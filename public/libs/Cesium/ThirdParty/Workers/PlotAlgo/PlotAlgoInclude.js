/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 6);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

﻿/* COPYRIGHT 2012 SUPERMAP
 * 本程序只能在有效的授权许可下使用。
 * 未经许可，不得以任何手段擅自使用或传播。*/

/**
 * @requires SuperMap/BaseTypes.js
 */

/**
 * Namespace: SuperMap.Lang
 * 国际化的命名空间，包含多种语言和方法库来设置和获取当前的语言。
 */
var SuperMap = window.SuperMap = window.SuperMap || {};

/***
 * @private
 * @type {{translate: SuperMap.PlotLang.translate}}
 */
SuperMap.PlotLang = {
    /**
     * APIMethod: translate
     * 从当前语言字符串的字典查找key。
     *     getCode获取的值用来判断合适的字典。字典存储在 <SuperMap.Lang> 方法中。
     *
     * Parameters:
     * key - {String} 字典中i18n字符串值的关键字.
     * context - {Object} <SuperMap.String.format> 使用此参数。
     *
     * Returns:
     * {String} 国际化的字符串。
     */
    translate: function(key, context) {
        var dictionary = SuperMap.PlotLang["zh-CN"];
        var message = dictionary && dictionary[key];
        if(!message) {
            // Message not found, fall back to message key
            message = key;
        }
        if(context) {
            message = SuperMap.String.format(message, context);
        }
        return message;
    }

};


/**
 * @private
 * APIMethod: SuperMap.plotI18n
 *  <SuperMap.Lang.translate> 的别名.  当前语言字符串的字典查找key。
 *  getCode获取的值用来判断合适的字典。字典存储在 <SuperMap.Lang> 方法中。
 *
 * Parameters:
 * key - {String} 字典中i18n字符串值的关键字.
 * context - {Object} <SuperMap.String.format> 使用此参数。
 *
 * Returns:
 * {String} 国际化的字符串。
 */
SuperMap.plotI18n = SuperMap.PlotLang.translate;


/**
 * @private
 * */
SuperMap.PlotLang["zh-CN"] = {
	//字体
	'SongTi':"宋体",
    //text
	'text':"文本",
    'textSizeLabel':"字体大小",
    'textSizeTitle':"字体大小",
    'textFaceNameLabel':"字体",
    'textFaceNameTitle':"字体",
    'textAlignLabel':"水平对齐方式",
    'textAlignTitle':"文本的水平对齐方式",
    'textVerticalAlignmentLabel':"垂直对齐方式",
    'textVerticalAlignmentTitle':"文本的垂直对齐方式",
    'textHaloRadiusLabel':"文本边框宽度",
    'textHaloRadiusTitle':"文本的外围边框的宽度",
    'textHaloColorLabel':"文本边框颜色",
    'textHaloColorTitle':"文本的外围边框的颜色",
    'textFillLabel':"文本颜色",
    'textFillTitle':"文本的颜色值",
    'textOpacityLabel':"透明度",
    'textOpacityTitle':"文本的透明度",
    'textDxLabel':"横向偏移",
    'textDxTitle':"文本的横向偏移值",
    'textDyLabel':"纵向偏移值",
    'textDyTitle':"文本的纵向偏移值",
    'textCompOpLabel':"叠加方式",
    'textCompOpTitle':"文本之间相互叠加里使用的覆盖或者是异或等运算方式",
    'expandingPointContent':"展",
    'volleyPointContent':"齐",
    'rendezvousPointContent':"会",
    'supplyPointContent':"补",
    //symbolAlgo
	//JB
    'symbolAlgo_17703':"加",
    'symbolAlgo_17704':"急",
    'symbolAlgo_21600':"冲",
    'symbolAlgo_28000_1':"危",
    'symbolAlgo_28000_2':"中",
    'symbolAlgo_28000_3':"轻",
    'symbolAlgo_315':"突击",
    'symbolAlgo_31304':"慑阻",
    'symbolAlgo_3010301':"调",
    'symbolAlgo_3010303':"出",
    'symbolAlgo_3010304':"协",

	//WJ
    'symbolAlgo_2121505':"火",
    'symbolAlgo_2121506':"墩",
    'symbolAlgo_2121507':"复",
    'symbolAlgo_2121601':"遥",
    'symbolAlgo_2121602':"障",
    'symbolAlgo_30010':"?",
    'symbolAlgo_3001101':"集",
    'symbolAlgo_3001102':"暴",
    'symbolAlgo_3001103':"骚",
    'symbolAlgo_3001104':"私",
    'symbolAlgo_3001105':"盗",
    'symbolAlgo_30020':"水",
    'symbolAlgo_3002001':"震",
    'symbolAlgo_3002004':"火",
    'symbolAlgo_30025':"滞",
    'symbolAlgo_5010301':"调",
    'symbolAlgo_5010303':"出",
    'symbolAlgo_5010304':"协",
    'symbolAlgo_5010401':"JZ",
    'symbolAlgo_5022001':"ZD0",
    'symbolAlgo_5034801':"催",
    "symbolAlgo_60203":"避",
    'symbolAlgo_60301':"爆",
    'symbolAlgo_6030101':"挖",
    'symbolAlgo_6030102':"浇",
    'symbolAlgo_6030103':"砌",
    'symbolAlgo_6030104':"装",
    'symbolAlgo_6030105':"石",
    'symbolAlgo_6030106':"沙",
    'symbolAlgo_6030107':"练",
    'symbolAlgo_60304':"隧",
    'symbolAlgo_3002501':"踏",
    'symbolAlgo_30026':"灾",
    'symbolAlgo_40104':"缉",
    'symbolAlgo_4030301':"标",
    'symbolAlgo_4030302':"劝",
    'symbolAlgo_4030303':"疏",
    'symbolAlgo_40304':"警",
    'symbolAlgo_4030401':"警",

    //basic symbol
    'polyLine':"折线",
    'parallelogram':"平行四边形",
    'circle':"圆",
    'ellipse':"椭圆",
    'annotation':"注记",
    'regularPolygon':"正多边形",
    'polygon':"多边形",
    'bezier':"贝塞尔曲线",
    'closedBesselCurve':"闭合贝塞尔曲线",
    'kidney':"集结地",
    'brace':"大括号",
    'trapezoid':"梯形",
    'rectangle':"矩形",
    'chord':"弓形",
    'sector':"扇形",
    'arc':"弧线",
    'parallel':"平行线",
    'annoframe':"注记指示框",
    'tooltipBoxM':"多角标注框",
    'runway':"跑道线",
    'curveEight':"八字形",
    'arrowLine':"箭头线",
    'pathText':"沿线注记",
    'concentricCircle':"同心圆",
    'combinedCircle':"组合圆",
    'freeCurve':"自由线",
    'nodeChain':"节点链",
    'lineMarking':"线型标注",
    'symbolTextBox':"标注框",

    'parallelFlatArrow':"平行平耳箭头",
    'multipleArrow':"多箭头",
    'trapezoidalFlatArrow':"梯形平耳箭头",
    'besselPointArrow':"贝塞尔尖耳箭头",
    'besselArrow':"普通贝塞尔箭头",
    'doubleArrow':"钳击箭头",
    'brokenSpaceTriangleArrow':"折线空三角箭头",
    'besselDovetailArrow':"贝塞尔燕尾箭头",
    'ordinaryLineArrow':"普通折线箭头",
    'besselPointedEarsTailArrow':"贝塞尔尖耳燕尾箭头",
    'besselTipArrow':"贝塞尔尖耳单点箭头",
    'besselArrowNoGraph':"普通贝塞尔箭头(不随图)",
    'brokenSpaceTriangleArrowNoGraph':"折线空三角箭头(不随图)",
    'besselPointedEarsTailArrowNoGraph':"贝塞尔尖耳燕尾箭头(不随图)",
    'ordinaryLineArrowNoGraph':"普通折线箭头(不随图)",
    'combianationArrow':"组合箭头",
    'symbolAlgo_311':'进攻方向',
    'symbolAlgo_317':'钳击',

    //new obj
    'airDeployment':"空军兵力部署",
    'airRoute':"空军航线",
    'arcRegion':"扇形区域",
    'flagGroup':"多旗",
    'lineRelation':"对象间连线",
    'polygonRegion':"多边形区域管理",
    'navyRoute':"海军航线",
    'missileRoute':"导弹航线",
    'navyDeployment':"海军兵力部署",
    'satelliteTimeWindows':"卫星时间窗",
    'satellite':"卫星",
    'symbolText':"对象标注",
    'symbolText1':"对象标注(带指示线)",
    'interferenceBeam':"干扰波束",
    'groupObject':"组合对象",

    //routeNodeTypeName
    'RENDEZVOUS': "会合点",
    'EXPANDING': "展开点",
    'VOLLEY': "齐射点",
    'STANDBY': "待机点",
    'SUPPLY': "补给点",
    'TAKEOFF': "起飞点",
    'INITIAL': "初始点",
    'VISUALINITAL': "可视初始点",
    'LANCH': "发射点",
    'TURNING': "转弯点",
    'AIMING': "瞄准点",
    'COMMONROUTE': "普通航路点",
    'WEAPONLAUNCH': "武器发射点",
    'TARGET': "目标点",
    'ATTACK':"攻击点",
    'SUPPRESS':"压制点",
    'EIGHTSPIRAL':"八字盘旋点",
    'HAPPYVALLEY':"跑马圈点",

    'LITERATESIGN':"标牌文字",

    'undoStackOverflow': '撤销的栈溢出',

    //Mapviewer
    'noContent':'无内容',
    'lableTitle': '_标签图层'

};



/***/ }),
/* 1 */
/***/ (function(module, exports) {

/*!
 * 
 *     iclient9-leaflet.(http://iclient.supermap.io)
 *     Copyright© 2000-2017 SuperMap Software Co. Ltd
 *     license: Apache-2.0
 *     version: v9.0.1
 * 
 */!function(r){var n={};function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=r,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=528)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SuperMap=window.SuperMap=window.SuperMap||{}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Util=undefined;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=r(0);r(62);var n,i,a,o,s,l,u,h;t.Util=y.SuperMap.Util=y.SuperMap.Util||{};y.SuperMap.Util.extend=function(e,t){if(e=e||{},t){for(var r in t){var n=t[r];n!==undefined&&(e[r]=n)}!("function"==typeof window.Event&&t instanceof window.Event)&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e},y.SuperMap.Util.copy=function(e,t){var r;if(e=e||{},t)for(var n in e)void 0!==(r=t[n])&&(e[n]=r)},y.SuperMap.Util.reset=function(e){for(var t in e=e||{})if(e.hasOwnProperty(t)){if("object"===c(e[t])&&e[t]instanceof Array){for(var r in e[t])e[t][r].destroy&&e[t][r].destroy();e[t].length=0}else"object"===c(e[t])&&e[t]instanceof Object&&e[t].destroy&&e[t].destroy();e[t]=null}},y.SuperMap.Util.getElement=function(){for(var e=[],t=0,r=arguments.length;t<r;t++){var n=arguments[t];if("string"==typeof n&&(n=document.getElementById(n)),1===arguments.length)return n;e.push(n)}return e},y.SuperMap.Util.isElement=function(e){return!(!e||1!==e.nodeType)},y.SuperMap.Util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},y.SuperMap.Util.removeItem=function(e,t){for(var r=e.length-1;0<=r;r--)e[r]===t&&e.splice(r,1);return e},y.SuperMap.Util.indexOf=function(e,t){if(null==e)return-1;if("function"==typeof e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},y.SuperMap.Util.modifyDOMElement=function(e,t,r,n,i,a,o,s){t&&(e.id=t),r&&(e.style.left=r.x+"px",e.style.top=r.y+"px"),n&&(e.style.width=n.w+"px",e.style.height=n.h+"px"),i&&(e.style.position=i),a&&(e.style.border=a),o&&(e.style.overflow=o),0<=parseFloat(s)&&parseFloat(s)<1?(e.style.filter="alpha(opacity="+100*s+")",e.style.opacity=s):1===parseFloat(s)&&(e.style.filter="",e.style.opacity="")},y.SuperMap.Util.applyDefaults=function(e,t){e=e||{};var r="function"==typeof window.Event&&t instanceof window.Event;for(var n in t)(e[n]===undefined||!r&&t.hasOwnProperty&&t.hasOwnProperty(n)&&!e.hasOwnProperty(n))&&(e[n]=t[n]);return!r&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},y.SuperMap.Util.getParameterString=function(e){var t=[];for(var r in e){var n=e[r];if(null!=n&&"function"!=typeof n){var i;if("object"===(void 0===n?"undefined":c(n))&&n.constructor===Array){for(var a,o=[],s=0,l=n.length;s<l;s++)a=n[s],o.push(encodeURIComponent(null===a||a===undefined?"":a));i=o.join(",")}else i=encodeURIComponent(n);t.push(encodeURIComponent(r)+"="+i)}}return t.join("&")},y.SuperMap.Util.urlAppend=function(e,t){var r=e;if(t){var n=(e+" ").split(/[?&]/);r+=" "===n.pop()?t:n.length?"&"+t:"?"+t}return r},y.SuperMap.Util.DEFAULT_PRECISION=14,y.SuperMap.Util.toFloat=function(e,t){return null==t&&(t=y.SuperMap.Util.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t))},y.SuperMap.Util.rad=function(e){return e*Math.PI/180},y.SuperMap.Util.getParameters=function(e){e=null===e||e===undefined?window.location.href:e;var t="";if(y.SuperMap.String.contains(e,"?")){var r=e.indexOf("?")+1,n=y.SuperMap.String.contains(e,"#")?e.indexOf("#"):e.length;t=e.substring(r,n)}for(var i={},a=t.split(/[&;]/),o=0,s=a.length;o<s;++o){var l=a[o].split("=");if(l[0]){var u=l[0];try{u=decodeURIComponent(u)}catch(h){u=unescape(u)}var c=(l[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(h){c=unescape(c)}1==(c=c.split(",")).length&&(c=c[0]),i[u]=c}}return i},y.SuperMap.Util.lastSeqID=0,y.SuperMap.Util.createUniqueID=function(e){return null==e&&(e="id_"),y.SuperMap.Util.lastSeqID+=1,e+y.SuperMap.Util.lastSeqID},y.SuperMap.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36},y.SuperMap.INCHES_PER_UNIT["in"]=y.SuperMap.INCHES_PER_UNIT.inches,y.SuperMap.INCHES_PER_UNIT.degrees=y.SuperMap.INCHES_PER_UNIT.dd,y.SuperMap.INCHES_PER_UNIT.nmi=1852*y.SuperMap.INCHES_PER_UNIT.m,y.SuperMap.METERS_PER_INCH=.0254000508001016,y.SuperMap.Util.extend(y.SuperMap.INCHES_PER_UNIT,{Inch:y.SuperMap.INCHES_PER_UNIT.inches,Meter:1/y.SuperMap.METERS_PER_INCH,Foot:.3048006096012192/y.SuperMap.METERS_PER_INCH,IFoot:.3048/y.SuperMap.METERS_PER_INCH,ClarkeFoot:.3047972651151/y.SuperMap.METERS_PER_INCH,SearsFoot:.30479947153867626/y.SuperMap.METERS_PER_INCH,GoldCoastFoot:.3047997101815088/y.SuperMap.METERS_PER_INCH,IInch:.0254/y.SuperMap.METERS_PER_INCH,MicroInch:254e-7/y.SuperMap.METERS_PER_INCH,Mil:2.54e-8/y.SuperMap.METERS_PER_INCH,Centimeter:.01/y.SuperMap.METERS_PER_INCH,Kilometer:1e3/y.SuperMap.METERS_PER_INCH,Yard:.9144018288036576/y.SuperMap.METERS_PER_INCH,SearsYard:.914398414616029/y.SuperMap.METERS_PER_INCH,IndianYard:.9143985307444408/y.SuperMap.METERS_PER_INCH,IndianYd37:.91439523/y.SuperMap.METERS_PER_INCH,IndianYd62:.9143988/y.SuperMap.METERS_PER_INCH,IndianYd75:.9143985/y.SuperMap.METERS_PER_INCH,IndianFoot:.30479951/y.SuperMap.METERS_PER_INCH,IndianFt37:.30479841/y.SuperMap.METERS_PER_INCH,IndianFt62:.3047996/y.SuperMap.METERS_PER_INCH,IndianFt75:.3047995/y.SuperMap.METERS_PER_INCH,Mile:1609.3472186944373/y.SuperMap.METERS_PER_INCH,IYard:.9144/y.SuperMap.METERS_PER_INCH,IMile:1609.344/y.SuperMap.METERS_PER_INCH,NautM:1852/y.SuperMap.METERS_PER_INCH,"Lat-66":110943.31648893273/y.SuperMap.METERS_PER_INCH,"Lat-83":110946.25736872235/y.SuperMap.METERS_PER_INCH,Decimeter:.1/y.SuperMap.METERS_PER_INCH,Millimeter:.001/y.SuperMap.METERS_PER_INCH,Dekameter:10/y.SuperMap.METERS_PER_INCH,Decameter:10/y.SuperMap.METERS_PER_INCH,Hectometer:100/y.SuperMap.METERS_PER_INCH,GermanMeter:1.0000135965/y.SuperMap.METERS_PER_INCH,CaGrid:.999738/y.SuperMap.METERS_PER_INCH,ClarkeChain:20.1166194976/y.SuperMap.METERS_PER_INCH,GunterChain:20.11684023368047/y.SuperMap.METERS_PER_INCH,BenoitChain:20.116782494375872/y.SuperMap.METERS_PER_INCH,SearsChain:20.11676512155/y.SuperMap.METERS_PER_INCH,ClarkeLink:.201166194976/y.SuperMap.METERS_PER_INCH,GunterLink:.2011684023368047/y.SuperMap.METERS_PER_INCH,BenoitLink:.20116782494375873/y.SuperMap.METERS_PER_INCH,SearsLink:.2011676512155/y.SuperMap.METERS_PER_INCH,Rod:5.02921005842012/y.SuperMap.METERS_PER_INCH,IntnlChain:20.1168/y.SuperMap.METERS_PER_INCH,IntnlLink:.201168/y.SuperMap.METERS_PER_INCH,Perch:5.02921005842012/y.SuperMap.METERS_PER_INCH,Pole:5.02921005842012/y.SuperMap.METERS_PER_INCH,Furlong:201.1684023368046/y.SuperMap.METERS_PER_INCH,Rood:3.778266898/y.SuperMap.METERS_PER_INCH,CapeFoot:.3047972615/y.SuperMap.METERS_PER_INCH,Brealey:375/y.SuperMap.METERS_PER_INCH,ModAmFt:.304812252984506/y.SuperMap.METERS_PER_INCH,Fathom:1.8288/y.SuperMap.METERS_PER_INCH,"NautM-UK":1853.184/y.SuperMap.METERS_PER_INCH,"50kilometers":5e4/y.SuperMap.METERS_PER_INCH,"150kilometers":15e4/y.SuperMap.METERS_PER_INCH}),y.SuperMap.Util.extend(y.SuperMap.INCHES_PER_UNIT,{mm:y.SuperMap.INCHES_PER_UNIT.Meter/1e3,cm:y.SuperMap.INCHES_PER_UNIT.Meter/100,dm:100*y.SuperMap.INCHES_PER_UNIT.Meter,km:1e3*y.SuperMap.INCHES_PER_UNIT.Meter,kmi:y.SuperMap.INCHES_PER_UNIT.nmi,fath:y.SuperMap.INCHES_PER_UNIT.Fathom,ch:y.SuperMap.INCHES_PER_UNIT.IntnlChain,link:y.SuperMap.INCHES_PER_UNIT.IntnlLink,"us-in":y.SuperMap.INCHES_PER_UNIT.inches,"us-ft":y.SuperMap.INCHES_PER_UNIT.Foot,"us-yd":y.SuperMap.INCHES_PER_UNIT.Yard,"us-ch":y.SuperMap.INCHES_PER_UNIT.GunterChain,"us-mi":y.SuperMap.INCHES_PER_UNIT.Mile,"ind-yd":y.SuperMap.INCHES_PER_UNIT.IndianYd37,"ind-ft":y.SuperMap.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/y.SuperMap.METERS_PER_INCH}),y.SuperMap.DOTS_PER_INCH=96,y.SuperMap.Util.normalizeScale=function(e){return 1<e?1/e:e},y.SuperMap.Util.getResolutionFromScale=function(e,t){var r;e&&(null==t&&(t="degrees"),r=1/(y.SuperMap.Util.normalizeScale(e)*y.SuperMap.INCHES_PER_UNIT[t]*y.SuperMap.DOTS_PER_INCH));return r},y.SuperMap.Util.getScaleFromResolution=function(e,t){return null==t&&(t="degrees"),e*y.SuperMap.INCHES_PER_UNIT[t]*y.SuperMap.DOTS_PER_INCH},y.SuperMap.IS_GECKO=-1===(n=navigator.userAgent.toLowerCase()).indexOf("webkit")&&-1!==n.indexOf("gecko"),y.SuperMap.Browser=(o=a="",s="pc",-1<(l=navigator.userAgent.toLowerCase()).indexOf("msie")||-1<l.indexOf("trident")&&-1<l.indexOf("rv")?(a="msie",i=l.match(/msie ([\d.]+)/)||l.match(/rv:([\d.]+)/)):-1<l.indexOf("chrome")?(a="chrome",i=l.match(/chrome\/([\d.]+)/)):-1<l.indexOf("firefox")?(a="firefox",i=l.match(/firefox\/([\d.]+)/)):-1<l.indexOf("opera")?(a="opera",i=l.match(/version\/([\d.]+)/)):-1<l.indexOf("safari")&&(a="safari",i=l.match(/version\/([\d.]+)/)),o=i?i[1]:"",-1<l.indexOf("ipad")||-1<l.indexOf("ipod")||-1<l.indexOf("iphone")?s="apple":-1<l.indexOf("android")&&(o=(i=l.match(/version\/([\d.]+)/))?i[1]:"",s="android"),{name:a,version:o,device:s}),y.SuperMap.Util.getBrowser=function(){return y.SuperMap.Browser},y.SuperMap.Util.isSupportCanvas=(u=!0,h=y.SuperMap.Util.getBrowser(),document.createElement("canvas").getContext?("firefox"===h.name&&parseFloat(h.version)<5&&(u=!1),"safari"===h.name&&parseFloat(h.version)<4&&(u=!1),"opera"===h.name&&parseFloat(h.version)<10&&(u=!1),"msie"===h.name&&parseFloat(h.version)<9&&(u=!1)):u=!1,u),y.SuperMap.Util.supportCanvas=function(){return y.SuperMap.Util.isSupportCanvas},y.SuperMap.INCHES_PER_UNIT.degree=y.SuperMap.INCHES_PER_UNIT.dd,y.SuperMap.INCHES_PER_UNIT.meter=y.SuperMap.INCHES_PER_UNIT.m,y.SuperMap.INCHES_PER_UNIT.foot=y.SuperMap.INCHES_PER_UNIT.ft,y.SuperMap.INCHES_PER_UNIT.inch=y.SuperMap.INCHES_PER_UNIT.inches,y.SuperMap.INCHES_PER_UNIT.mile=y.SuperMap.INCHES_PER_UNIT.mi,y.SuperMap.INCHES_PER_UNIT.kilometer=y.SuperMap.INCHES_PER_UNIT.km,y.SuperMap.INCHES_PER_UNIT.yard=y.SuperMap.INCHES_PER_UNIT.yd,y.SuperMap.Util.isInTheSameDomain=function(e){if(!e)return!0;var t=e.indexOf("//"),r=document.location.toString(),n=r.indexOf("//");if(-1===t)return!0;var i,a=i=e.substring(0,t),o=r.substring(n+2);n=o.indexOf("/");var s=o.indexOf(":"),l=o.substring(0,n),u=document.location.protocol;if(-1!==s||(l+=":"+("http:"===u.toLowerCase()?80:443)),u.toLowerCase()!==a.toLowerCase())return!1;var c=(a=e.substring(t+2)).indexOf(":");t=a.indexOf("/");var h,f=a.substring(0,t);return-1!==c?h=a.substring(0,c):(h=a.substring(0,t),f+=":"+("http:"===i.toLowerCase()?80:443)),h===document.domain&&f===l},y.SuperMap.Util.calculateDpi=function(e,t,r,n,i){if(e&&t&&r){var a,o=e.getWidth(),s=e.getHeight(),l=t.w,u=t.h;if(i=i||6378137,"degree"===(n=n||"degrees").toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()){var c=o/l,h=s/u;a=254/(h<c?c:h)/r/(2*Math.PI*i/360)/1e4}else{a=254/(o/l)/r/1e4}return a}},y.SuperMap.Util.toJSON=function(e){var t=e;if(null==t)return null;switch(t.constructor){case String:return t=(t=(t=(t=(t=(t=(t='"'+t.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var r=[],n=0,i=t.length;n<i;n++)r.push(y.SuperMap.Util.toJSON(t[n]));return"["+r.join(",")+"]";case Number:return isFinite(t)?String(t):null;case Boolean:return String(t);case Date:return"{'__type':\"System.DateTime\",'Year':"+t.getFullYear()+",'Month':"+(t.getMonth()+1)+",'Day':"+t.getDate()+",'Hour':"+t.getHours()+",'Minute':"+t.getMinutes()+",'Second':"+t.getSeconds()+",'Millisecond':"+t.getMilliseconds()+",'TimezoneOffset':"+t.getTimezoneOffset()+"}";default:if(null!=t.toJSON&&"function"==typeof t.toJSON)return t.toJSON();if("object"===(void 0===t?"undefined":c(t))){if(t.length){for(var a=[],o=0,s=t.length;o<s;o++)a.push(y.SuperMap.Util.toJSON(t[o]));return"["+a.join(",")+"]"}var l=[];for(var u in t)"function"!=typeof t[u]&&"CLASS_NAME"!==u&&"parent"!==u&&l.push("'"+u+"':"+y.SuperMap.Util.toJSON(t[u]));return 0<l.length?"{"+l.join(",")+"}":"{}"}return t.toString()}},y.SuperMap.Util.getResolutionFromScaleDpi=function(e,t,r,n){return n=n||6378137,r=r||"",0<e&&0<t?(e=y.SuperMap.Util.normalizeScale(e),"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/t/e/(2*Math.PI*n/360)/1e4:254/t/e/1e4):-1},y.SuperMap.Util.getScaleFromResolutionDpi=function(e,t,r,n){return n=n||6378137,r=r||"",0<e&&0<t?"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/t/e/(2*Math.PI*n/360)/1e4:254/t/e/1e4:-1},y.SuperMap.Util.transformResult=function(e){return e.responseText&&"string"==typeof e.responseText&&(e=JSON.parse(e.responseText)),e},y.SuperMap.Util.copyAttributes=function(e,t){if(e=e||{},t)for(var r in t){var n=t[r];n!==undefined&&"CLASS_NAME"!==r&&"function"!=typeof n&&(e[r]=n)}return e},y.SuperMap.Util.copyAttributesWithClip=function(e,t,r){if(e=e||{},t)for(var n in t){var i=!1;if(r&&r.length)for(var a=0,o=r.length;a<o;a++)if(n===r[a]){i=!0;break}if(!0!==i){var s=t[n];s!==undefined&&"CLASS_NAME"!==n&&"function"!=typeof s&&(e[n]=s)}}return e},y.SuperMap.Util.cloneObject=function(e){if(null===e||"object"!==(void 0===e?"undefined":c(e)))return e;if(e instanceof Date){var t=new Date;return t.setTime(e.getTime()),t}if(e instanceof Array)return e.slice(0);if(e instanceof Object){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=y.SuperMap.Util.cloneObject(e[n]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")},y.SuperMap.Util.lineIntersection=function(e,t,r,n){var i,a,o=null,s=(n.x-r.x)*(e.y-r.y)-(n.y-r.y)*(e.x-r.x),l=(t.x-e.x)*(e.y-r.y)-(t.y-e.y)*(e.x-r.x),u=(n.y-r.y)*(t.x-e.x)-(n.x-r.x)*(t.y-e.y);if(0!=u)a=l/u,o=0<=(i=s/u)&&a<=1&&i<=1&&0<=a?new y.SuperMap.Geometry.Point(e.x+i*(t.x-e.x),e.y+i*(t.y-e.y)):"No Intersection";else if(0==s&&0==l){var c=Math.max(e.y,t.y),h=Math.min(e.y,t.y),f=Math.max(e.x,t.x),p=Math.min(e.x,t.x);o=(r.y>=h&&r.y<=c||n.y>=h&&n.y<=c)&&r.x>=p&&r.x<=f||n.x>=p&&n.x<=f?"Coincident":"Parallel"}else o="Parallel";return o},y.SuperMap.Util.getTextBounds=function(e,t,r){document.body.appendChild(r),r.style.width="auto",r.style.height="auto",e.fontSize&&(r.style.fontSize=e.fontSize),e.fontFamily&&(r.style.fontFamily=e.fontFamily),e.fontWeight&&(r.style.fontWeight=e.fontWeight),r.style.position="relative",r.style.visibility="hidden",r.style.display="inline-block",r.innerHTML=t;var n=r.clientWidth,i=r.clientHeight;return document.body.removeChild(r),{textWidth:n,textHeight:i}}},function(e,t){e.exports=L},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AggregationQueryBuilderType=t.AggregationType=t.TopologyValidatorRule=t.SummaryType=t.StatisticAnalystMode=t.AnalystSizeUnit=t.AnalystAreaUnit=t.ClipAnalystMode=t.ChartType=t.ClientType=t.Exponent=t.VariogramMode=t.InterpolationAlgorithmType=t.SearchMode=t.PixelFormat=t.StatisticMode=t.UGCLayerType=t.LayerType=t.ColorSpaceType=t.GridType=t.TransferPreference=t.TransferTactic=t.EditType=t.DataReturnMode=t.SurfaceAnalystMethod=t.SmoothMethod=t.OutputType=t.OverlayOperationType=t.BufferEndType=t.TurnType=t.SupplyCenterType=t.SideType=t.DirectionType=t.LabelOverLengthMode=t.LabelBackShape=t.AlongLineDirection=t.FillGradientMode=t.TextAlignment=t.ColorGradientType=t.ThemeType=t.RangeMode=t.GraduatedMode=t.GraphAxesTextDisplayMode=t.ThemeGraphType=t.ThemeGraphTextFormat=t.EngineType=t.BufferRadiusUnit=t.Unit=t.MeasureMode=t.SpatialRelationType=t.SpatialQueryMode=t.JoinType=t.QueryOption=t.GeometryType=t.ServerType=t.DataFormat=undefined;var n=r(0),i=n.SuperMap.DataFormat={GEOJSON:"GEOJSON",ISERVER:"ISERVER"};t.DataFormat=i;var a=n.SuperMap.ServerType={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"};t.ServerType=a;var o=n.SuperMap.GeometryType={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN"};t.GeometryType=o;var s=n.SuperMap.QueryOption={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"};t.QueryOption=s;var l=n.SuperMap.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"};t.JoinType=l;var u=n.SuperMap.SpatialQueryMode={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"};t.SpatialQueryMode=u;var c=n.SuperMap.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"};t.SpatialRelationType=c;var h=n.SuperMap.MeasureMode={DISTANCE:"DISTANCE",AREA:"AREA"};t.MeasureMode=h;var f=n.SuperMap.Unit={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"};t.Unit=f;var p=n.SuperMap.BufferRadiusUnit={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"};t.BufferRadiusUnit=p;var y=n.SuperMap.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"};t.EngineType=y;var d=n.SuperMap.ThemeGraphTextFormat={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"};t.ThemeGraphTextFormat=d;var v=n.SuperMap.ThemeGraphType={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"};t.ThemeGraphType=v;var m=n.SuperMap.GraphAxesTextDisplayMode={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"};t.GraphAxesTextDisplayMode=m;var g=n.SuperMap.GraduatedMode={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"};t.GraduatedMode=g;var b=n.SuperMap.RangeMode={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"};t.RangeMode=b;var S=n.SuperMap.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"};t.ThemeType=S;var _=n.SuperMap.ColorGradientType={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"};t.ColorGradientType=_;var P=n.SuperMap.TextAlignment={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"};t.TextAlignment=P;var O=n.SuperMap.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"};t.FillGradientMode=O;var T=n.SuperMap.AlongLineDirection={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"};t.AlongLineDirection=T;var w=n.SuperMap.LabelBackShape={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"};t.LabelBackShape=w;var M=n.SuperMap.LabelOverLengthMode={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"};t.LabelOverLengthMode=M;var C=n.SuperMap.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"};t.DirectionType=C;var x=n.SuperMap.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"};t.SideType=x;var E=n.SuperMap.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"};t.SupplyCenterType=E;var A=n.SuperMap.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"};t.TurnType=A;var L=n.SuperMap.BufferEndType={FLAT:"FLAT",ROUND:"ROUND"};t.BufferEndType=L;var k=n.SuperMap.OverlayOperationType={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"};t.OverlayOperationType=k;var j=n.SuperMap.OutputType={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"};t.OutputType=j;var F=n.SuperMap.SmoothMethod={BSPLINE:"BSPLINE",POLISH:"POLISH"};t.SmoothMethod=F;var I=n.SuperMap.SurfaceAnalystMethod={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"};t.SurfaceAnalystMethod=I;var R=n.SuperMap.DataReturnMode={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"};t.DataReturnMode=R;var N=n.SuperMap.EditType={ADD:"add",UPDATE:"update",DELETE:"delete"};t.EditType=N;var D=n.SuperMap.TransferTactic={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"};t.TransferTactic=D;var G=n.SuperMap.TransferPreference={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"};t.TransferPreference=G;var B=n.SuperMap.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"};t.GridType=B;var U=n.SuperMap.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"};t.ColorSpaceType=U;var V=n.SuperMap.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"};t.LayerType=V;var J=n.SuperMap.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"};t.UGCLayerType=J;var z=n.SuperMap.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"};t.StatisticMode=z;var q=n.SuperMap.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"};t.PixelFormat=q;var H=n.SuperMap.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"};t.SearchMode=H;var W=n.SuperMap.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"};t.InterpolationAlgorithmType=W;var Q=n.SuperMap.VariogramMode={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"};t.VariogramMode=Q;var Y=n.SuperMap.Exponent={EXP1:"EXP1",EXP2:"EXP2"};t.Exponent=Y;var X=n.SuperMap.ClientType={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"};t.ClientType=X;var K=n.SuperMap.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"};t.ChartType=K;var Z=n.SuperMap.ClipAnalystMode={CLIP:"clip",INTERSECT:"intersect"};t.ClipAnalystMode=Z;var $=n.SuperMap.AnalystAreaUnit={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"};t.AnalystAreaUnit=$;var ee=n.SuperMap.AnalystSizeUnit={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"};t.AnalystSizeUnit=ee;var te=n.SuperMap.StatisticAnalystMode={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"};t.StatisticAnalystMode=te;var re=n.SuperMap.SummaryType={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"};t.SummaryType=re;var ne=n.SuperMap.TopologyValidatorRule={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"};t.TopologyValidatorRule=ne;var ie=n.SuperMap.AggregationType={GEOHASH_GRID:"geohash_grid",FILTER:"filter"};t.AggregationType=ie;var ae=n.SuperMap.AggregationQueryBuilderType={GEO_BOUNDING_BOX:"geo_bounding_box"};t.AggregationQueryBuilderType=ae},function(e,t,r){"use strict";var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(101),r(167),r(157),a["default"].supermap=a["default"].supermap||{},a["default"].supermap.control=a["default"].supermap.control||{}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElasticSearch=t.ThemeStyle=t.CartoCSS=t.TokenServiceParameter=t.ServerInfo=t.SecurityManager=t.KeyServiceParameter=t.SUtil=t.LevelRendererVector=t.Util=t.Transformable=t.Storage=t.SmicText=t.SmicStar=t.SmicSector=t.SmicRing=t.SmicRectangle=t.SmicPolygon=t.SmicPoint=t.SmicIsogon=t.SmicImage=t.SmicEllipse=t.SmicCircle=t.SmicBrokenLine=t.Shape=t.PaintLayer=t.Painter=t.Matrix=t.Math=t.Log=t.Http=t.Handler=t.Group=t.Eventful=t.LevelRendererEvent=t.Env=t.Easing=t.LevelRendererCurve=t.Config=t.ComputeBoundingBox=t.Color=t.Clip=t.Area=t.Animator=t.Animation=t.Render=t.LevelRenderer=t.FeatureTheme=t.Sector=t.FeatureRectangle=t.FeaturePolygon=t.Point=t.FeatureLine=t.Label=t.Image=t.FeatureCircle=t.ShapeParameters=t.ShapeFactory=t.ThemeVector=t.Ring=t.RankSymbol=t.OverlayPoint=t.Pie=t.Line=t.Graph=t.Circle=t.Bar3D=t.Bar=t.OnlineServiceBase=t.FilterField=t.DataItemOrderBy=t.DataItemType=t.ServiceStatus=t.OnlineQueryDatasParameter=t.OnlineData=t.Online=t.VectorClipJobsService=t.VectorClipJobsParameter=t.Vector=t.UpdateTurnNodeWeightService=t.UpdateTurnNodeWeightParameters=t.UpdateEdgeWeightService=t.UpdateEdgeWeightParameters=t.UGCSubLayer=t.UGCMapLayer=t.UGCLayer=t.TransferSolutionParameters=t.TransportationAnalystResultSetting=t.TransportationAnalystParameter=t.TransferSolutionService=t.TransferPathService=t.TransferPathParameters=t.TransferLine=t.TopologyValidatorJobsService=t.TopologyValidatorJobsParameter=t.TilesetsService=t.GeometryBatchAnalystService=t.ThiessenAnalystService=undefined,t.ThiessenAnalystParameters=t.ThemeUniqueItem=t.ThemeUnique=t.ThemeService=t.ThemeRangeItem=t.ThemeRange=t.ThemeParameters=t.ThemeOffset=t.ThemeMemoryData=t.ThemeLabelUniqueItem=t.ThemeLabelText=t.ThemeLabelItem=t.ThemeLabelBackground=t.ThemeLabelAlongLine=t.ThemeLabel=t.ThemeGridUniqueItem=t.ThemeGridUnique=t.ThemeGridRangeItem=t.ThemeGridRange=t.ThemeGraphText=t.ThemeGraphSize=t.ThemeGraphItem=t.ThemeGraphAxes=t.ThemeGraph=t.ThemeGraduatedSymbolStyle=t.ThemeGraduatedSymbol=t.ThemeFlow=t.ThemeDotDensity=t.Theme=t.TerrainCurvatureCalculationService=t.TerrainCurvatureCalculationParameters=t.SurfaceAnalystService=t.SurfaceAnalystParametersSetting=t.SurfaceAnalystParameters=t.SupplyCenter=t.SummaryRegionJobsService=t.SummaryRegionJobParameter=t.SummaryMeshJobsService=t.SummaryMeshJobParameter=t.SummaryAttributesJobsService=t.SummaryAttributesJobsParameter=t.StopQueryService=t.StopQueryParameters=t.SpatialAnalystBase=t.SingleObjectQueryJobsService=t.SingleObjectQueryJobsParameter=t.SetLayerStatusService=t.SetLayerStatusParameters=t.SetLayersInfoService=t.SetLayersInfoParameters=t.SetLayerInfoService=t.SetLayerInfoParameters=t.ServerTheme=t.ServerTextStyle=t.ServerStyle=t.ServerGeometry=t.ServerFeature=t.ServerColor=t.RouteLocatorService=t.RouteLocatorParameters=t.RouteCalculateMeasureService=t.RouteCalculateMeasureParameters=t.Route=t.QueryService=t.QueryParameters=t.QueryBySQLService=t.QueryBySQLParameters=t.QueryByGeometryService=t.QueryByGeometryParameters=t.QueryByDistanceService=t.QueryByDistanceParameters=t.QueryByBoundsService=t.QueryByBoundsParameters=t.ProcessingServiceBase=t.PointWithMeasure=t.OverlayGeoJobsService=t.OverlayGeoJobParameter=t.OverlayAnalystService=t.OverlayAnalystParameters=t.OverlapDisplayedOptions=t.OutputSetting=t.NetworkAnalystServiceBase=t.MeasureService=t.MeasureParameters=t.MathExpressionAnalysisService=t.MathExpressionAnalysisParameters=t.MapService=t.LinkItem=t.LayerStatus=t.LabelThemeCell=t.LabelSymbolCell=t.LabelMixedTextStyle=t.LabelMatrixCell=t.LabelImageCell=t.KernelDensityJobsService=t.KernelDensityJobParameter=t.JoinItem=t.InterpolationRBFAnalystParameters=t.InterpolationKrigingAnalystParameters=t.InterpolationIDWAnalystParameters=undefined,t.InterpolationAnalystService=t.InterpolationAnalystParameters=t.UGCImage=t.Grid=t.GetLayersInfoService=t.GetGridCellInfosService=t.GetGridCellInfosParameters=t.GetFieldsService=t.GetFeaturesServiceBase=t.GetFeaturesParametersBase=t.GetFeaturesBySQLService=t.GetFeaturesBySQLParameters=t.GetFeaturesByIDsService=t.GetFeaturesByIDsParameters=t.GetFeaturesByGeometryService=t.GetFeaturesByGeometryParameters=t.GetFeaturesByBufferService=t.GetFeaturesByBufferParameters=t.GetFeaturesByBoundsService=t.GetFeaturesByBoundsParameters=t.GeoRelationAnalystService=t.GeoRelationAnalystParameters=t.GeometryThiessenAnalystParameters=t.GeometrySurfaceAnalystParameters=t.GeometryOverlayAnalystParameters=t.GeometryBufferAnalystParameters=t.GeoHashGridAggParameter=t.GeoDecodingParameter=t.GeoCodingParameter=t.GeoBoundingBoxQueryBuilderParameter=t.GenerateSpatialDataService=t.GenerateSpatialDataParameters=t.FindTSPPathsService=t.FindTSPPathsParameters=t.FindServiceAreasService=t.FindServiceAreasParameters=t.FindPathService=t.FindPathParameters=t.FindMTSPPathsService=t.FindMTSPPathsParameters=t.FindLocationService=t.FindLocationParameters=t.FindClosestFacilitiesService=t.FindClosestFacilitiesParameters=t.FilterParameter=t.FilterAggParameter=t.FieldStatisticsParameters=t.FieldStatisticService=t.FieldParameters=t.FacilityAnalystUpstream3DService=t.FacilityAnalystUpstream3DParameters=t.FacilityAnalystTraceup3DService=t.FacilityAnalystTraceup3DParameters=t.FacilityAnalystTracedown3DService=t.FacilityAnalystTracedown3DParameters=t.FacilityAnalystStreamService=t.FacilityAnalystStreamParameters=t.FacilityAnalystSources3DService=t.FacilityAnalystSources3DParameters=t.FacilityAnalystSinks3DService=t.FacilityAnalystSinks3DParameters=t.FacilityAnalyst3DParameters=t.EditFeaturesService=t.EditFeaturesParameters=t.DensityKernelAnalystParameters=t.DensityAnalystService=t.DatasourceConnectionInfo=t.DatasetThiessenAnalystParameters=t.DatasetSurfaceAnalystParameters=t.DatasetOverlayAnalystParameters=t.DatasetInfo=t.DatasetBufferAnalystParameters=t.DataReturnOption=t.DataFlowService=t.ComputeWeightMatrixService=t.ComputeWeightMatrixParameters=t.CommonServiceBase=t.ColorDictionary=t.ClipParameter=t.ChartQueryService=t.ChartQueryParameters=t.ChartQueryFilterParameter=t.ChartFeatureInfoSpecsService=t.BurstPipelineAnalystService=t.BurstPipelineAnalystParameters=t.BuffersAnalystJobsService=t.BuffersAnalystJobsParameter=t.BufferSetting=t.BufferDistance=t.BufferAnalystService=t.BufferAnalystParameters=t.AreaSolarRadiationService=t.AreaSolarRadiationParameters=t.AggQueryBuilderParameter=t.AggregationParameter=t.AddressMatchService=t.IPortalServicesQueryParam=t.IPortalServiceBase=t.IPortalService=t.IPortalMapsQueryParam=undefined,t.IPortalMap=t.IPortal=t.IManagerServiceBase=t.IManagerCreateNodeParam=t.IManager=t.FetchRequest=t.getRequestTimeout=t.setRequestTimeout=t.isCORS=t.setCORS=t.WKT=t.JSONFormat=t.GeoJSON=t.Format=t.TimeFlowControl=t.TimeControlBase=t.GeometryVector=t.CommonUtil=t.Size=t.Pixel=t.LonLat=t.Geometry=t.Feature=t.Events=t.Event=t.DateExt=t.Credential=t.Bounds=t.ArrayExt=t.FunctionExt=t.NumberExt=t.StringExt=t.Rectangle=t.Polygon=t.GeometryPoint=t.MultiPolygon=t.MultiPoint=t.MultiLineString=t.LineString=t.LinearRing=t.GeoText=t.Curve=t.Collection=t.AggregationType=t.AggregationQueryBuilderType=t.OutputType=t.TopologyValidatorRule=t.StatisticAnalystMode=t.AnalystSizeUnit=t.AnalystAreaUnit=t.ClipAnalystMode=t.Exponent=t.VariogramMode=t.InterpolationAlgorithmType=t.SummaryType=t.SearchMode=t.PixelFormat=t.StatisticMode=t.UGCLayerType=t.LayerType=t.ClientType=t.GridType=t.TransferPreference=t.TransferTactic=t.EditType=t.ChartType=t.ColorSpaceType=t.SurfaceAnalystMethod=t.SmoothMethod=t.BufferEndType=t.TurnType=t.SupplyCenterType=t.OverlayOperationType=t.DirectionType=t.LabelOverLengthMode=t.LabelBackShape=t.AlongLineDirection=t.SideType=t.FillGradientMode=t.TextAlignment=t.ColorGradientType=t.ThemeType=t.RangeMode=t.GraduatedMode=t.GraphAxesTextDisplayMode=t.ThemeGraphType=t.ThemeGraphTextFormat=t.SpatialQueryMode=t.BufferRadiusUnit=t.Unit=t.DataReturnMode=t.SpatialRelationType=t.MeasureMode=t.EngineType=t.JoinType=t.QueryOption=t.GeometryType=t.ServerType=t.DataFormat=t.SuperMap=undefined;var n=r(0),i=r(3),a=r(526),o=r(523),s=r(521),l=r(519),u=r(510),c=r(508),h=r(433),f=r(430),p=r(426),y=r(422),d=r(421),v=r(417);t.SuperMap=n.SuperMap,t.DataFormat=i.DataFormat,t.ServerType=i.ServerType,t.GeometryType=i.GeometryType,t.QueryOption=i.QueryOption,t.JoinType=i.JoinType,t.EngineType=i.EngineType,t.MeasureMode=i.MeasureMode,t.SpatialRelationType=i.SpatialRelationType,t.DataReturnMode=i.DataReturnMode,t.Unit=i.Unit,t.BufferRadiusUnit=i.BufferRadiusUnit,t.SpatialQueryMode=i.SpatialQueryMode,t.ThemeGraphTextFormat=i.ThemeGraphTextFormat,t.ThemeGraphType=i.ThemeGraphType,t.GraphAxesTextDisplayMode=i.GraphAxesTextDisplayMode,t.GraduatedMode=i.GraduatedMode,t.RangeMode=i.RangeMode,t.ThemeType=i.ThemeType,t.ColorGradientType=i.ColorGradientType,t.TextAlignment=i.TextAlignment,t.FillGradientMode=i.FillGradientMode,t.SideType=i.SideType,t.AlongLineDirection=i.AlongLineDirection,t.LabelBackShape=i.LabelBackShape,t.LabelOverLengthMode=i.LabelOverLengthMode,t.DirectionType=i.DirectionType,t.OverlayOperationType=i.OverlayOperationType,t.SupplyCenterType=i.SupplyCenterType,t.TurnType=i.TurnType,t.BufferEndType=i.BufferEndType,t.SmoothMethod=i.SmoothMethod,t.SurfaceAnalystMethod=i.SurfaceAnalystMethod,t.ColorSpaceType=i.ColorSpaceType,t.ChartType=i.ChartType,t.EditType=i.EditType,t.TransferTactic=i.TransferTactic,t.TransferPreference=i.TransferPreference,t.GridType=i.GridType,t.ClientType=i.ClientType,t.LayerType=i.LayerType,t.UGCLayerType=i.UGCLayerType,t.StatisticMode=i.StatisticMode,t.PixelFormat=i.PixelFormat,t.SearchMode=i.SearchMode,t.SummaryType=i.SummaryType,t.InterpolationAlgorithmType=i.InterpolationAlgorithmType,t.VariogramMode=i.VariogramMode,t.Exponent=i.Exponent,t.ClipAnalystMode=i.ClipAnalystMode,t.AnalystAreaUnit=i.AnalystAreaUnit,t.AnalystSizeUnit=i.AnalystSizeUnit,t.StatisticAnalystMode=i.StatisticAnalystMode,t.TopologyValidatorRule=i.TopologyValidatorRule,t.OutputType=i.OutputType,t.AggregationQueryBuilderType=i.AggregationQueryBuilderType,t.AggregationType=i.AggregationType,t.Collection=a.Collection,t.Curve=a.Curve,t.GeoText=a.GeoText,t.LinearRing=a.LinearRing,t.LineString=a.LineString,t.MultiLineString=a.MultiLineString,t.MultiPoint=a.MultiPoint,t.MultiPolygon=a.MultiPolygon,t.GeometryPoint=a.GeometryPoint,t.Polygon=a.Polygon,t.Rectangle=a.Rectangle,t.StringExt=a.StringExt,t.NumberExt=a.NumberExt,t.FunctionExt=a.FunctionExt,t.ArrayExt=a.ArrayExt,t.Bounds=a.Bounds,t.Credential=a.Credential,t.DateExt=a.DateExt,t.Event=a.Event,t.Events=a.Events,t.Feature=a.Feature,t.Geometry=a.Geometry,t.LonLat=a.LonLat,t.Pixel=a.Pixel,t.Size=a.Size,t.CommonUtil=a.CommonUtil,t.GeometryVector=a.GeometryVector,t.TimeControlBase=s.TimeControlBase,t.TimeFlowControl=s.TimeFlowControl,t.Format=o.Format,t.GeoJSON=o.GeoJSON,t.JSONFormat=o.JSONFormat,t.WKT=o.WKT,t.setCORS=y.setCORS,t.isCORS=y.isCORS,t.setRequestTimeout=y.setRequestTimeout,t.getRequestTimeout=y.getRequestTimeout,t.FetchRequest=y.FetchRequest,t.IManager=l.IManager,t.IManagerCreateNodeParam=l.IManagerCreateNodeParam,t.IManagerServiceBase=l.IManagerServiceBase,t.IPortal=u.IPortal,t.IPortalMap=u.IPortalMap,t.IPortalMapsQueryParam=u.IPortalMapsQueryParam,t.IPortalService=u.IPortalService,t.IPortalServiceBase=u.IPortalServiceBase,t.IPortalServicesQueryParam=u.IPortalServicesQueryParam,t.AddressMatchService=c.AddressMatchService,t.AggregationParameter=c.AggregationParameter,t.AggQueryBuilderParameter=c.AggQueryBuilderParameter,t.AreaSolarRadiationParameters=c.AreaSolarRadiationParameters,t.AreaSolarRadiationService=c.AreaSolarRadiationService,t.BufferAnalystParameters=c.BufferAnalystParameters,t.BufferAnalystService=c.BufferAnalystService,t.BufferDistance=c.BufferDistance,t.BufferSetting=c.BufferSetting,t.BuffersAnalystJobsParameter=c.BuffersAnalystJobsParameter,t.BuffersAnalystJobsService=c.BuffersAnalystJobsService,t.BurstPipelineAnalystParameters=c.BurstPipelineAnalystParameters,t.BurstPipelineAnalystService=c.BurstPipelineAnalystService,t.ChartFeatureInfoSpecsService=c.ChartFeatureInfoSpecsService,t.ChartQueryFilterParameter=c.ChartQueryFilterParameter,t.ChartQueryParameters=c.ChartQueryParameters,t.ChartQueryService=c.ChartQueryService,t.ClipParameter=c.ClipParameter,t.ColorDictionary=c.ColorDictionary,t.CommonServiceBase=c.CommonServiceBase,t.ComputeWeightMatrixParameters=c.ComputeWeightMatrixParameters,t.ComputeWeightMatrixService=c.ComputeWeightMatrixService,t.DataFlowService=c.DataFlowService,t.DataReturnOption=c.DataReturnOption,t.DatasetBufferAnalystParameters=c.DatasetBufferAnalystParameters,t.DatasetInfo=c.DatasetInfo,t.DatasetOverlayAnalystParameters=c.DatasetOverlayAnalystParameters,t.DatasetSurfaceAnalystParameters=c.DatasetSurfaceAnalystParameters,t.DatasetThiessenAnalystParameters=c.DatasetThiessenAnalystParameters,t.DatasourceConnectionInfo=c.DatasourceConnectionInfo,t.DensityAnalystService=c.DensityAnalystService,t.DensityKernelAnalystParameters=c.DensityKernelAnalystParameters,t.EditFeaturesParameters=c.EditFeaturesParameters,t.EditFeaturesService=c.EditFeaturesService,t.FacilityAnalyst3DParameters=c.FacilityAnalyst3DParameters,t.FacilityAnalystSinks3DParameters=c.FacilityAnalystSinks3DParameters,t.FacilityAnalystSinks3DService=c.FacilityAnalystSinks3DService,t.FacilityAnalystSources3DParameters=c.FacilityAnalystSources3DParameters,t.FacilityAnalystSources3DService=c.FacilityAnalystSources3DService,t.FacilityAnalystStreamParameters=c.FacilityAnalystStreamParameters,t.FacilityAnalystStreamService=c.FacilityAnalystStreamService,t.FacilityAnalystTracedown3DParameters=c.FacilityAnalystTracedown3DParameters,t.FacilityAnalystTracedown3DService=c.FacilityAnalystTracedown3DService,t.FacilityAnalystTraceup3DParameters=c.FacilityAnalystTraceup3DParameters,t.FacilityAnalystTraceup3DService=c.FacilityAnalystTraceup3DService,t.FacilityAnalystUpstream3DParameters=c.FacilityAnalystUpstream3DParameters,t.FacilityAnalystUpstream3DService=c.FacilityAnalystUpstream3DService,t.FieldParameters=c.FieldParameters,t.FieldStatisticService=c.FieldStatisticService,t.FieldStatisticsParameters=c.FieldStatisticsParameters,t.FilterAggParameter=c.FilterAggParameter,t.FilterParameter=c.FilterParameter,t.FindClosestFacilitiesParameters=c.FindClosestFacilitiesParameters,t.FindClosestFacilitiesService=c.FindClosestFacilitiesService,t.FindLocationParameters=c.FindLocationParameters,t.FindLocationService=c.FindLocationService,t.FindMTSPPathsParameters=c.FindMTSPPathsParameters,t.FindMTSPPathsService=c.FindMTSPPathsService,t.FindPathParameters=c.FindPathParameters,t.FindPathService=c.FindPathService,t.FindServiceAreasParameters=c.FindServiceAreasParameters,t.FindServiceAreasService=c.FindServiceAreasService,t.FindTSPPathsParameters=c.FindTSPPathsParameters,t.FindTSPPathsService=c.FindTSPPathsService,t.GenerateSpatialDataParameters=c.GenerateSpatialDataParameters,t.GenerateSpatialDataService=c.GenerateSpatialDataService,t.GeoBoundingBoxQueryBuilderParameter=c.GeoBoundingBoxQueryBuilderParameter,t.GeoCodingParameter=c.GeoCodingParameter,t.GeoDecodingParameter=c.GeoDecodingParameter,t.GeoHashGridAggParameter=c.GeoHashGridAggParameter,t.GeometryBufferAnalystParameters=c.GeometryBufferAnalystParameters,t.GeometryOverlayAnalystParameters=c.GeometryOverlayAnalystParameters,t.GeometrySurfaceAnalystParameters=c.GeometrySurfaceAnalystParameters,t.GeometryThiessenAnalystParameters=c.GeometryThiessenAnalystParameters,t.GeoRelationAnalystParameters=c.GeoRelationAnalystParameters,t.GeoRelationAnalystService=c.GeoRelationAnalystService,t.GetFeaturesByBoundsParameters=c.GetFeaturesByBoundsParameters,t.GetFeaturesByBoundsService=c.GetFeaturesByBoundsService,t.GetFeaturesByBufferParameters=c.GetFeaturesByBufferParameters,t.GetFeaturesByBufferService=c.GetFeaturesByBufferService,t.GetFeaturesByGeometryParameters=c.GetFeaturesByGeometryParameters,t.GetFeaturesByGeometryService=c.GetFeaturesByGeometryService,t.GetFeaturesByIDsParameters=c.GetFeaturesByIDsParameters,t.GetFeaturesByIDsService=c.GetFeaturesByIDsService,t.GetFeaturesBySQLParameters=c.GetFeaturesBySQLParameters,t.GetFeaturesBySQLService=c.GetFeaturesBySQLService,t.GetFeaturesParametersBase=c.GetFeaturesParametersBase,t.GetFeaturesServiceBase=c.GetFeaturesServiceBase,t.GetFieldsService=c.GetFieldsService,t.GetGridCellInfosParameters=c.GetGridCellInfosParameters,t.GetGridCellInfosService=c.GetGridCellInfosService,t.GetLayersInfoService=c.GetLayersInfoService,t.Grid=c.Grid,t.UGCImage=c.UGCImage,t.InterpolationAnalystParameters=c.InterpolationAnalystParameters,t.InterpolationAnalystService=c.InterpolationAnalystService,t.InterpolationIDWAnalystParameters=c.InterpolationIDWAnalystParameters,t.InterpolationKrigingAnalystParameters=c.InterpolationKrigingAnalystParameters,t.InterpolationRBFAnalystParameters=c.InterpolationRBFAnalystParameters,t.JoinItem=c.JoinItem,t.KernelDensityJobParameter=c.KernelDensityJobParameter,t.KernelDensityJobsService=c.KernelDensityJobsService,t.LabelImageCell=c.LabelImageCell,t.LabelMatrixCell=c.LabelMatrixCell,t.LabelMixedTextStyle=c.LabelMixedTextStyle,t.LabelSymbolCell=c.LabelSymbolCell,t.LabelThemeCell=c.LabelThemeCell,t.LayerStatus=c.LayerStatus,t.LinkItem=c.LinkItem,t.MapService=c.MapService,t.MathExpressionAnalysisParameters=c.MathExpressionAnalysisParameters,t.MathExpressionAnalysisService=c.MathExpressionAnalysisService,t.MeasureParameters=c.MeasureParameters,t.MeasureService=c.MeasureService,t.NetworkAnalystServiceBase=c.NetworkAnalystServiceBase,t.OutputSetting=c.OutputSetting,t.OverlapDisplayedOptions=c.OverlapDisplayedOptions,t.OverlayAnalystParameters=c.OverlayAnalystParameters,t.OverlayAnalystService=c.OverlayAnalystService,t.OverlayGeoJobParameter=c.OverlayGeoJobParameter,t.OverlayGeoJobsService=c.OverlayGeoJobsService,t.PointWithMeasure=c.PointWithMeasure,t.ProcessingServiceBase=c.ProcessingServiceBase,t.QueryByBoundsParameters=c.QueryByBoundsParameters,t.QueryByBoundsService=c.QueryByBoundsService,t.QueryByDistanceParameters=c.QueryByDistanceParameters,t.QueryByDistanceService=c.QueryByDistanceService,t.QueryByGeometryParameters=c.QueryByGeometryParameters,t.QueryByGeometryService=c.QueryByGeometryService,t.QueryBySQLParameters=c.QueryBySQLParameters,t.QueryBySQLService=c.QueryBySQLService,t.QueryParameters=c.QueryParameters,t.QueryService=c.QueryService,t.Route=c.Route,t.RouteCalculateMeasureParameters=c.RouteCalculateMeasureParameters,t.RouteCalculateMeasureService=c.RouteCalculateMeasureService,t.RouteLocatorParameters=c.RouteLocatorParameters,t.RouteLocatorService=c.RouteLocatorService,t.ServerColor=c.ServerColor,t.ServerFeature=c.ServerFeature,t.ServerGeometry=c.ServerGeometry,t.ServerStyle=c.ServerStyle,t.ServerTextStyle=c.ServerTextStyle,t.ServerTheme=c.ServerTheme,t.SetLayerInfoParameters=c.SetLayerInfoParameters,t.SetLayerInfoService=c.SetLayerInfoService,t.SetLayersInfoParameters=c.SetLayersInfoParameters,t.SetLayersInfoService=c.SetLayersInfoService,t.SetLayerStatusParameters=c.SetLayerStatusParameters,t.SetLayerStatusService=c.SetLayerStatusService,t.SingleObjectQueryJobsParameter=c.SingleObjectQueryJobsParameter,t.SingleObjectQueryJobsService=c.SingleObjectQueryJobsService,t.SpatialAnalystBase=c.SpatialAnalystBase,t.StopQueryParameters=c.StopQueryParameters,t.StopQueryService=c.StopQueryService,t.SummaryAttributesJobsParameter=c.SummaryAttributesJobsParameter,t.SummaryAttributesJobsService=c.SummaryAttributesJobsService,t.SummaryMeshJobParameter=c.SummaryMeshJobParameter,t.SummaryMeshJobsService=c.SummaryMeshJobsService,t.SummaryRegionJobParameter=c.SummaryRegionJobParameter,t.SummaryRegionJobsService=c.SummaryRegionJobsService,t.SupplyCenter=c.SupplyCenter,t.SurfaceAnalystParameters=c.SurfaceAnalystParameters,t.SurfaceAnalystParametersSetting=c.SurfaceAnalystParametersSetting,t.SurfaceAnalystService=c.SurfaceAnalystService,t.TerrainCurvatureCalculationParameters=c.TerrainCurvatureCalculationParameters,t.TerrainCurvatureCalculationService=c.TerrainCurvatureCalculationService,t.Theme=c.Theme,t.ThemeDotDensity=c.ThemeDotDensity,t.ThemeFlow=c.ThemeFlow,t.ThemeGraduatedSymbol=c.ThemeGraduatedSymbol,t.ThemeGraduatedSymbolStyle=c.ThemeGraduatedSymbolStyle,t.ThemeGraph=c.ThemeGraph,t.ThemeGraphAxes=c.ThemeGraphAxes,t.ThemeGraphItem=c.ThemeGraphItem,t.ThemeGraphSize=c.ThemeGraphSize,t.ThemeGraphText=c.ThemeGraphText,t.ThemeGridRange=c.ThemeGridRange,t.ThemeGridRangeItem=c.ThemeGridRangeItem,t.ThemeGridUnique=c.ThemeGridUnique,t.ThemeGridUniqueItem=c.ThemeGridUniqueItem,t.ThemeLabel=c.ThemeLabel,t.ThemeLabelAlongLine=c.ThemeLabelAlongLine,t.ThemeLabelBackground=c.ThemeLabelBackground,t.ThemeLabelItem=c.ThemeLabelItem,t.ThemeLabelText=c.ThemeLabelText,t.ThemeLabelUniqueItem=c.ThemeLabelUniqueItem,t.ThemeMemoryData=c.ThemeMemoryData,t.ThemeOffset=c.ThemeOffset,t.ThemeParameters=c.ThemeParameters,t.ThemeRange=c.ThemeRange,t.ThemeRangeItem=c.ThemeRangeItem,t.ThemeService=c.ThemeService,t.ThemeUnique=c.ThemeUnique,t.ThemeUniqueItem=c.ThemeUniqueItem,t.ThiessenAnalystParameters=c.ThiessenAnalystParameters,t.ThiessenAnalystService=c.ThiessenAnalystService,t.GeometryBatchAnalystService=c.GeometryBatchAnalystService,t.TilesetsService=c.TilesetsService,t.TopologyValidatorJobsParameter=c.TopologyValidatorJobsParameter,t.TopologyValidatorJobsService=c.TopologyValidatorJobsService,t.TransferLine=c.TransferLine,t.TransferPathParameters=c.TransferPathParameters,t.TransferPathService=c.TransferPathService,t.TransferSolutionService=c.TransferSolutionService,t.TransportationAnalystParameter=c.TransportationAnalystParameter,t.TransportationAnalystResultSetting=c.TransportationAnalystResultSetting,t.TransferSolutionParameters=c.TransferSolutionParameters,t.UGCLayer=c.UGCLayer,t.UGCMapLayer=c.UGCMapLayer,t.UGCSubLayer=c.UGCSubLayer,t.UpdateEdgeWeightParameters=c.UpdateEdgeWeightParameters,t.UpdateEdgeWeightService=c.UpdateEdgeWeightService,t.UpdateTurnNodeWeightParameters=c.UpdateTurnNodeWeightParameters,t.UpdateTurnNodeWeightService=c.UpdateTurnNodeWeightService,t.Vector=c.Vector,t.VectorClipJobsParameter=c.VectorClipJobsParameter,t.VectorClipJobsService=c.VectorClipJobsService,t.Online=h.Online,t.OnlineData=h.OnlineData,t.OnlineQueryDatasParameter=h.OnlineQueryDatasParameter,t.ServiceStatus=h.ServiceStatus,t.DataItemType=h.DataItemType,t.DataItemOrderBy=h.DataItemOrderBy,t.FilterField=h.FilterField,t.OnlineServiceBase=h.OnlineServiceBase,t.Bar=v.Bar,t.Bar3D=v.Bar3D,t.Circle=v.Circle,t.Graph=v.Graph,t.Line=v.Line,t.Pie=v.Pie,t.OverlayPoint=v.OverlayPoint,t.RankSymbol=v.RankSymbol,t.Ring=v.Ring,t.ThemeVector=v.ThemeVector,t.ShapeFactory=v.ShapeFactory,t.ShapeParameters=v.ShapeParameters,t.FeatureCircle=v.FeatureCircle,t.Image=v.Image,t.Label=v.Label,t.FeatureLine=v.FeatureLine,t.Point=v.Point,t.FeaturePolygon=v.FeaturePolygon,t.FeatureRectangle=v.FeatureRectangle,t.Sector=v.Sector,t.FeatureTheme=v.FeatureTheme,t.LevelRenderer=v.LevelRenderer,t.Render=v.Render,t.Animation=v.Animation,t.Animator=v.Animator,t.Area=v.Area,t.Clip=v.Clip,t.Color=v.Color,t.ComputeBoundingBox=v.ComputeBoundingBox,t.Config=v.Config,t.LevelRendererCurve=v.LevelRendererCurve,t.Easing=v.Easing,t.Env=v.Env,t.LevelRendererEvent=v.LevelRendererEvent,t.Eventful=v.Eventful,t.Group=v.Group,t.Handler=v.Handler,t.Http=v.Http,t.Log=v.Log,t.Math=v.Math,t.Matrix=v.Matrix,t.Painter=v.Painter,t.PaintLayer=v.PaintLayer,t.Shape=v.Shape,t.SmicBrokenLine=v.SmicBrokenLine,t.SmicCircle=v.SmicCircle,t.SmicEllipse=v.SmicEllipse,t.SmicImage=v.SmicImage,t.SmicIsogon=v.SmicIsogon,t.SmicPoint=v.SmicPoint,t.SmicPolygon=v.SmicPolygon,t.SmicRectangle=v.SmicRectangle,t.SmicRing=v.SmicRing,t.SmicSector=v.SmicSector,t.SmicStar=v.SmicStar,t.SmicText=v.SmicText,t.Storage=v.Storage,t.Transformable=v.Transformable,t.Util=v.Util,t.LevelRendererVector=v.LevelRendererVector,t.SUtil=v.SUtil,t.KeyServiceParameter=f.KeyServiceParameter,t.SecurityManager=f.SecurityManager,t.ServerInfo=f.ServerInfo,t.TokenServiceParameter=f.TokenServiceParameter,t.CartoCSS=d.CartoCSS,t.ThemeStyle=d.ThemeStyle,t.ElasticSearch=p.ElasticSearch},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommonServiceBase=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(20),o=r(85),s=r(128),l=r(37),u=r(1),c=r(3),h=r(126),f=r(62);var p=t.CommonServiceBase=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.serverType=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,this.withCredentials=!1,u.Util.isArray(e)?(r.urls=e,r.length=e.length,r.totalTimes=r.length,1===r.length?r.url=e[0]:(r.index=parseInt(Math.random()*r.length),r.url=e[r.index])):(r.totalTimes=1,r.url=e),u.Util.isArray(e)&&!r.isServiceSupportPolling()&&(r.url=e[0],r.totalTimes=1),r.serverType=r.serverType||c.ServerType.ISERVER,(t=t||{})&&u.Util.extend(this,t),r.isInTheSameDomain=u.Util.isInTheSameDomain(r.url),r.events=new o.Events(r,null,r.EVENT_TYPES,!0),r.eventListeners instanceof Object&&r.events.on(r.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"}return i(n,[{key:"destroy",value:function(){var e=this;u.Util.isArray(e.urls)&&(e.urls=null,e.index=null,e.length=null,e.totalTimes=null),e.url=null,e.options=null,e._processSuccess=null,e._processFailed=null,e.isInTheSameDomain=null,e.EVENT_TYPES=null,e.events&&(e.events.destroy(),e.events=null),e.eventListeners&&(e.eventListeners=null)}},{key:"request",value:function(e){var t=this;e.url=e.url||t.url,e.proxy=e.proxy||t.proxy,e.withCredentials=e.withCredentials!=undefined?e.withCredentials:t.withCredentials,e.isInTheSameDomain=t.isInTheSameDomain;var r=this.getCredential(e.url);if(r){var n=e.url.substring(e.url.length-1,e.url.length);-1<e.url.indexOf("?")&&"?"===n?e.url+=r.getUrlParameters():-1<e.url.indexOf("?")&&"?"!==n?e.url+="&"+r.getUrlParameters():e.url+="?"+r.getUrlParameters()}t.calculatePollingTimes(),t._processSuccess=e.success,t._processFailed=e.failure,e.scope=t,e.success=t.getUrlCompleted,e.failure=t.getUrlFailed,t.options=e,t._commit(t.options)}},{key:"getCredential",value:function(e){var t=e,r=void 0,n=void 0;switch(this.serverType){case c.ServerType.IPORTAL:(r=(n=l.SecurityManager.getToken(t))?new s.Credential(n,"token"):null)||(r=(n=l.SecurityManager.getKey(t))?new s.Credential(n,"key"):null);break;case c.ServerType.ONLINE:r=(n=l.SecurityManager.getKey(t))?new s.Credential(n,"key"):null;break;default:r=(n=l.SecurityManager.getToken(t))?new s.Credential(n,"token"):null}return r}},{key:"getUrlCompleted",value:function(e){this._processSuccess(e)}},{key:"getUrlFailed",value:function(e){0<this.totalTimes?(this.totalTimes--,this.ajaxPolling()):this._processFailed(e)}},{key:"ajaxPolling",value:function(){var e=this,t=e.options.url,r=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],t=t.replace(r,r.exec(e.url)[0]),e.options.url=t,e.options.isInTheSameDomain=u.Util.isInTheSameDomain(t),e._commit(e.options)}},{key:"calculatePollingTimes",value:function(){var e=this;e.times?e.totalTimes>e.POLLING_TIMES?e.times>e.POLLING_TIMES?e.totalTimes=e.POLLING_TIMES:e.totalTimes=e.times:e.times<e.totalTimes&&(e.totalTimes=e.times):e.totalTimes>e.POLLING_TIMES&&(e.totalTimes=e.POLLING_TIMES),e.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"serviceProcessCompleted",value:function(e){e=u.Util.transformResult(e),this.events.triggerEvent("processCompleted",{result:e})}},{key:"serviceProcessFailed",value:function(e){var t=(e=u.Util.transformResult(e)).error||e;this.events.triggerEvent("processFailed",{error:t})}},{key:"_commit",value:function(r){"POST"!==r.method&&"PUT"!==r.method||(r.params&&(r.url=u.Util.urlAppend(r.url,u.Util.getParameterString(r.params||{}))),r.params=r.data),a.FetchRequest.commit(r.method,r.url,r.params,{headers:r.headers,withCredentials:r.withCredentials,timeout:r.async?0:null,proxy:r.proxy}).then(function(e){return e.text?e.text():e.json?e.json():e}).then(function(e){var t=e;("string"==typeof e&&(t=(new h.JSONFormat).read(e)),(!t||t.error||300<=t.code&&304!==t.code)&&(t=t&&t.error?{error:t.error}:{error:t}),t.error)?(r.scope?f.FunctionExt.bind(r.failure,r.scope):r.failure)(t):(t.succeed=t.succeed==undefined||t.succeed,(r.scope?f.FunctionExt.bind(r.success,r.scope):r.success)(t))})}}]),n}();n.SuperMap.CommonServiceBase=p},function(e,t,r){"use strict";var n=2*Math.PI,i=r(54);e.exports=function(e){return Math.abs(e)<=3.14159265359?e:e-i(e)*n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceBase=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};var o=t.ServiceBase=a["default"].Evented.extend({options:{url:null,proxy:null,serverType:null,withCredentials:!1},initialize:function(e,t){e&&(e=e.indexOf("/")!==e.length-1?e:e.substr(0,e.length-1)),this.url=e,a["default"].setOptions(this,t),this.fire("initialized",this)},destroy:function(){this.fire("destroy",this)}});a["default"].supermap.ServiceBase=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerGeometry=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),M=r(22),C=r(44),x=r(38),T=r(21),E=r(61),A=r(59),L=r(60),a=r(13),o=r(81),s=r(1),k=r(3);var l=t.ServerGeometry=function(){function w(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,e&&s.Util.extend(this,e),this.CLASS_NAME="SuperMap.ServerGeometry"}return n(w,[{key:"destroy",value:function(){var e=this;e.id=null,e.style=null,e.parts=null,e.partTopo=null,e.points=null,e.type=null,e.prjCoordSys=null}},{key:"toGeometry",value:function(){var e=this;switch(e.type){case k.GeometryType.POINT:return e.toGeoPoint();case k.GeometryType.LINE:return e.toGeoLine();case k.GeometryType.LINEM:return e.toGeoLinem();case k.GeometryType.REGION:return e.toGeoRegion();case k.GeometryType.POINTEPS:return e.toGeoPoint();case k.GeometryType.LINEEPS:return e.toGeoLineEPS();case k.GeometryType.REGIONEPS:return e.toGeoRegionEPS()}}},{key:"toGeoPoint",value:function(){var e=this.parts||[],t=this.points||[],r=e.length;if(0<r){if(1===r)return new M.Point(t[0].x,t[0].y);for(var n=[],i=0;i<r;i++)n.push(new M.Point(t[i].x,t[i].y));return new C.MultiPoint(n)}return null}},{key:"toGeoLine",value:function(){var e=this.parts||[],t=this.points||[],r=e.length;if(0<r){if(1===r){for(var n=[],i=0;i<e[0];i++)n.push(new M.Point(t[i].x,t[i].y));return n[0].equals(n[e[0]-1])?new x.LinearRing(n):new T.LineString(n)}for(var a=[],o=0;o<r;o++){for(var s=[],l=0;l<e[o];l++)s.push(new M.Point(t[l].x,t[l].y));a.push(new T.LineString(s)),t.splice(0,e[o])}return new E.MultiLineString(a)}return null}},{key:"toGeoLineEPS",value:function(){var e,t,r,n,i,a=this.parts||[],o=this.points||[],s=a.length;if(0<s){if(1===s){for(e=0,r=[];e<a[0];e++)r.push(new M.Point(o[e].x,o[e].y,o[e].type));return r[0].equals(r[a[0]-1])?(i=T.LineString.createLineEPS(r),new x.LinearRing(i)):(i=T.LineString.createLineEPS(r),new T.LineString(i))}for(e=0,n=[];e<s;e++){for(t=0,r=[];t<a[e];t++)r.push(new M.Point(o[t].x,o[t].y));i=T.LineString.createLineEPS(r),n.push(new T.LineString(i)),o.splice(0,a[e])}return new E.MultiLineString(n)}return null}},{key:"toGeoLinem",value:function(){return new o.Route.fromJson(this)}},{key:"toGeoRegion",value:function(){var e=this.parts||[],t=this.partTopo||[],r=this.points||[],n=e.length;if(n<=0)return null;var i=[],a=[];if(1==n){for(var o=0;o<r.length;o++)a.push(new M.Point(r[o].x,r[o].y));return i.push(new A.Polygon([new x.LinearRing(a)])),new L.MultiPolygon(i)}for(var s=[],l=[],u=[],c=[],h=0,f=0;h<n;h++){for(var p=0;p<e[h];p++)a.push(new M.Point(r[f+p].x,r[f+p].y));f+=e[h];var y=new A.Polygon([new x.LinearRing(a)]);a=[],u.push(y),c.push(1),l.push(y.getArea())}if(w.bubbleSort(l,u,t),0===t.length){for(var d=[],v=1;v<u.length;v++)for(var m=v-1;0<=m;m--)if(d[v]=-1,u[m].getBounds().containsBounds(u[v].getBounds())){c[v]=-1*c[m],c[v]<0&&(d[v]=m);break}for(var g=0;g<u.length;g++)0<c[g]?i.push(u[g]):(i[d[g]].components=i[d[g]].components.concat(u[g].components),i.push(""))}else{i=new Array;for(var b=0;b<u.length;b++)if(t[b]&&-1==t[b]?s=s.concat(u[b].components):(0<s.length&&0<i.length&&(i[i.length-1].components=i[i.length-1].components.concat(s),s=[]),i.push(u[b])),b==n-1){var S=i.length;if(S)i[S-1].components=i[S-1].components.concat(s);else for(var _=0,P=s.length;_<P;_++)i.push(new A.Polygon(s))}}return new L.MultiPolygon(i)}},{key:"toGeoRegionEPS",value:function(){var e=this.parts||[],t=this.partTopo||[],r=this.points||[],n=e.length;if(n<=0)return null;var i,a=[],o=[];if(1==n){for(var s=0;s<r.length;s++)o.push(new M.Point(r[s].x,r[s].y));return i=T.LineString.createLineEPS(o),a.push(new A.Polygon([new x.LinearRing(i)])),new L.MultiPolygon(a)}for(var l=[],u=[],c=[],h=[],f=0,p=0;f<n;f++){for(var y=0;y<e[f];y++)o.push(new M.Point(r[p+y].x,r[p+y].y));p+=e[f],i=T.LineString.createLineEPS(o);var d=new A.Polygon([new x.LinearRing(i)]);o=[],c.push(d),h.push(1),u.push(d.getArea())}if(w.bubbleSort(u,c,t),0===t.length){for(var v=[],m=1;m<c.length;m++)for(var g=m-1;0<=g;g--)if(v[m]=-1,c[g].getBounds().containsBounds(c[m].getBounds())){h[m]=-1*h[g],h[m]<0&&(v[m]=g);break}for(var b=0;b<c.length;b++)0<h[b]?a.push(c[b]):(a[v[b]].components=a[v[b]].components.concat(c[b].components),a.push(""))}else{a=new Array;for(var S=0;S<c.length;S++)if(t[S]&&-1==t[S]?l=l.concat(c[S].components):(0<l.length&&0<a.length&&(a[a.length-1].components=a[a.length-1].components.concat(l),l=[]),a.push(c[S])),S==n-1){var _=a.length;if(_)a[_-1].components=a[_-1].components.concat(l);else for(var P=0,O=l.length;P<O;P++)a.push(new A.Polygon(l))}}return new L.MultiPolygon(a)}}],[{key:"fromJson",value:function(e){if(e)return new w({id:e.id,style:a.ServerStyle.fromJson(e.style),parts:e.parts,partTopo:e.partTopo,points:e.points,center:e.center,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type})}},{key:"fromGeometry",value:function(e){if(e){var t=0,r=[],n=[],i=null,a=e.components,o=e.CLASS_NAME,s={epsgCode:e.SRID};if(isNaN(e.id)||(t=e.id),"SuperMap.Geometry.LinearRing"!=o&&"SuperMap.Geometry.LineString"!=o&&(e instanceof C.MultiPoint||e instanceof E.MultiLineString)){for(var l=a.length,u=0;u<l;u++){var c=a[u].getVertices().length;r.push(c);for(var h=0;h<c;h++)n.push(new M.Point(a[u].getVertices()[h].x,a[u].getVertices()[h].y))}i="SuperMap.Geometry.MultiPoint"==o?k.GeometryType.POINT:k.GeometryType.LINE}else if(e instanceof L.MultiPolygon){for(var f=a.length,p=0;p<f;p++)for(var y=a[p].components,d=y.length,v=0;v<d;v++){var m=y[v].getVertices().length+1;r.push(m);for(var g=0;g<m-1;g++)n.push(new M.Point(y[v].getVertices()[g].x,y[v].getVertices()[g].y));n.push(new M.Point(y[v].getVertices()[0].x,y[v].getVertices()[0].y))}i=k.GeometryType.REGION}else if(e instanceof A.Polygon){for(var b=a.length,S=0;S<b;S++){var _=a[S].getVertices().length+1;r.push(_);for(var P=0;P<_-1;P++)n.push(new M.Point(a[S].getVertices()[P].x,a[S].getVertices()[P].y));n.push(new M.Point(a[S].getVertices()[0].x,a[S].getVertices()[0].y))}i=k.GeometryType.REGION}else{for(var O=e.getVertices().length,T=0;T<O;T++)n.push(new M.Point(e.getVertices()[T].x,e.getVertices()[T].y));e instanceof x.LinearRing&&(n.push(new M.Point(e.getVertices()[0].x,e.getVertices()[0].y)),O++),r.push(O),i=e instanceof M.Point?k.GeometryType.POINT:k.GeometryType.LINE}return new w({id:t,style:null,parts:r,points:n,type:i,prjCoordSys:s})}}},{key:"IsClockWise",value:function(e){var t=e.length;if(t<3)return 0;var r=e[0].y*(e[t-1].x-e[1].x);e.push(e[0]);for(var n=1;n<t;n++)r+=e[n].y*(e[n-1].x-e[n+1].x);return.5*r}},{key:"bubbleSort",value:function(e,t,r){for(var n=0;n<e.length;n++)for(var i=0;i<e.length;i++)if(e[n]>e[i]){var a=e[i];e[i]=e[n],e[n]=a;var o=t[i];if(t[i]=t[n],t[n]=o,r&&0<r.length){var s=r[i];r[i]=r[n],r[n]=s}}}}]),w}();i.SuperMap.ServerGeometry=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpatialAnalystBase=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(3),s=r(6),l=r(16);var u=t.SpatialAnalystBase=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.format=o.DataFormat.GEOJSON,r.CLASS_NAME="SuperMap.SpatialAnalystBase",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e){var t,r=this;if((e=a.Util.transformResult(e))&&r.format===o.DataFormat.GEOJSON&&"function"==typeof r.toGeoJSONResult)if(a.Util.isArray(e)){for(var n=0;n<e.length;n++)e[n]=r.toGeoJSONResult(e[n]);t=e}else t=r.toGeoJSONResult(e);t||(t=e),r.events.triggerEvent("processCompleted",{result:t})}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;e.result&&e.result.resultGeometry&&(e=e.result);var t=new l.GeoJSON;if(e.recordsets)for(var r=0,n=e.recordsets,i=n.length;r<i;r++)n[r].features&&(n[r].features=JSON.parse(t.write(n[r].features)));else e.recordset&&e.recordset.features&&(e.recordset.features=JSON.parse(t.write(e.recordset.features)));return e.resultGeometry&&(e.resultGeometry=JSON.parse(t.write(e.resultGeometry))),e.regions&&(e.regions=JSON.parse(t.write(e.regions))),e}}]),n}();n.SuperMap.SpatialAnalystBase=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SUtil=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(186),a=r(106),o=r(185),s=r(70),l=r(184),u=r(183),c=r(182),h=r(181),f=r(180),p=r(179),y=r(30),d=r(69);var v=t.SUtil=function(){function w(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w)}return n(w,null,[{key:"SUtil_smoothBezier",value:function(e,t,r,n,i){i&&2===i||(i=[0,0]);var a,o,s=i,l=[],u=[],c=[],h=[],f=!!n;if(f){a=[Infinity,Infinity],o=[-Infinity,-Infinity];for(var p=e.length,y=0;y<p;y++)w.Util_vector.min(a,a,[e[y][0]+s[0],e[y][1]+s[1]]),w.Util_vector.max(o,o,[e[y][0]+s[0],e[y][1]+s[1]]);w.Util_vector.min(a,a,n[0]),w.Util_vector.max(o,o,n[1])}for(var d=e.length,v=0;v<d;v++){var m=[e[v][0]+s[0],e[v][1]+s[1]],g=void 0,b=void 0;if(r)g=[e[v?v-1:d-1][0]+s[0],e[v?v-1:d-1][1]+s[1]],b=[e[(v+1)%d][0]+s[0],e[(v+1)%d][1]+s[1]];else{if(0===v||v===d-1){l.push([e[v][0]+s[0],e[v][1]+s[1]]);continue}g=[e[v-1][0]+s[0],e[v-1][1]+s[1]],b=[e[v+1][0]+s[0],e[v+1][1]+s[1]]}w.Util_vector.sub(u,b,g),w.Util_vector.scale(u,u,t);var S=w.Util_vector.distance(m,g),_=w.Util_vector.distance(m,b),P=S+_;0!==P&&(S/=P,_/=P),w.Util_vector.scale(c,u,-S),w.Util_vector.scale(h,u,_);var O=w.Util_vector.add([],m,c),T=w.Util_vector.add([],m,h);f&&(w.Util_vector.max(O,O,a),w.Util_vector.min(O,O,o),w.Util_vector.max(T,T,a),w.Util_vector.min(T,T,o)),l.push(O),l.push(T)}return r&&l.push(l.shift()),l}},{key:"SUtil_smoothSpline",value:function(e,t,r,n){n&&2===n||(n=[0,0]);for(var i=n,a=e.length,o=[],s=0,l=1;l<a;l++)s+=w.Util_vector.distance([e[l-1][0]+i[0],e[l-1][1]+i[1]],[e[l][0]+i[0],e[l][1]+i[1]]);var u=s/5;u=u<a?a:u;for(var c=0;c<u;c++){var h=c/(u-1)*(t?a:a-1),f=Math.floor(h),p=h-f,y=void 0,d=[e[f%a][0]+i[0],e[f%a][1]+i[1]],v=void 0,m=void 0;t?(y=[e[(f-1+a)%a][0]+i[0],e[(f-1+a)%a][1]+i[1]],v=[e[(f+1)%a][0]+i[0],e[(f+1)%a][1]+i[1]],m=[e[(f+2)%a][0]+i[0],e[(f+2)%a][1]+i[1]]):(y=[e[0===f?f:f-1][0]+i[0],e[0===f?f:f-1][1]+i[1]],v=[e[a-2<f?a-1:f+1][0]+i[0],e[a-2<f?a-1:f+1][1]+i[1]],m=[e[a-3<f?a-1:f+2][0]+i[0],e[a-3<f?a-1:f+2][1]+i[1]]);var g=p*p,b=p*g;o.push([S(y[0],d[0],v[0],m[0],p,g,b),S(y[1],d[1],v[1],m[1],p,g,b)])}return o;function S(e,t,r,n,i,a,o){var s=.5*(r-e),l=.5*(n-t);return(2*(t-r)+s+l)*o+(-3*(t-r)-2*s-l)*a+s*i+t}}},{key:"SUtil_dashedLineTo",value:function(e,t,r,n,i,a,o){var s=[5,5];if(a="number"!=typeof a?5:a,e.setLineDash)return s[0]=a,s[1]=a,o&&o instanceof Array?e.setLineDash(o):e.setLineDash(s),e.moveTo(t,r),void e.lineTo(n,i);var l=n-t,u=i-r,c=Math.floor(Math.sqrt(l*l+u*u)/a);l/=c,u/=c;for(var h=!0,f=0;f<c;++f)h?e.moveTo(t,r):e.lineTo(t,r),h=!h,t+=l,r+=u;e.lineTo(n,i)}}]),w}();v.Util_area=new i.Area,v.Util_color=new a.Color,v.Util_computeBoundingBox=new o.ComputeBoundingBox,v.Util_curve=new s.Curve,v.Util_env=new l.Env,v.Util_event=new u.Event,v.Util_http=new c.Http,v.Util_log=new h.Log,v.Util_math=new f.Math,v.Util_matrix=new p.Matrix,v.Util=new y.Util,v.Util_vector=new d.Vector},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(55),o=r(71),s=r(1),h=r(11);t.Shape=function(e){function g(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g);var n,t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,e));return e=e||{},t.id=null,t.style={},t.highlightStyle=null,t.parent=null,t.__dirty=!0,t.__clipShapes=[],t.invisible=!1,t.ignore=!1,t.zlevel=0,t.draggable=!1,t.clickable=!1,t.hoverable=!0,t.z=0,t.refOriginalPosition=[0,0],t.refDataID=null,t.isHoverByRefDataID=!1,t.refDataHoverGroup=null,t.dataInfo=null,s.Util.extend(t,e),t.id=t.id||s.Util.createUniqueID("smShape_"),t.CLASS_NAME="SuperMap.LevelRenderer.Shape",t.getTansform=(n=[],function(e,t){var r=[e,t];return this.needTransform&&this.transform&&(h.SUtil.Util_matrix.invert(n,this.transform),h.SUtil.Util_matrix.mulVector(r,n,[e,t,1]),e==r[0]&&t==r[1]&&this.updateNeedTransform()),r}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(g,i.SuperMap.mixin(a.Eventful,o.Transformable)),n(g,[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){var r=this.beforeBrush(e,t);switch(e.beginPath(),this.buildPath(e,r),r.brushType){case"both":this.setCtxGlobalAlpha(e,"fill",r),e.fill(),0<r.lineWidth&&(this.setCtxGlobalAlpha(e,"stroke",r),e.stroke()),this.setCtxGlobalAlpha(e,"reset",r);break;case"stroke":this.setCtxGlobalAlpha(e,"stroke",r),0<r.lineWidth&&e.stroke(),this.setCtxGlobalAlpha(e,"reset",r);break;default:this.setCtxGlobalAlpha(e,"fill",r),e.fill(),this.setCtxGlobalAlpha(e,"reset",r)}this.drawText(e,r,this.style),this.afterBrush(e)}},{key:"beforeBrush",value:function(e,t){var r=this.style;return this.brushTypeOnly&&(r.brushType=this.brushTypeOnly),t&&(r=this.getHighlightStyle(r,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(r.strokeColor=r.strokeColor||r.color),e.save(),this.doClip(e),this.setContext(e,r),this.setTransform(e),r}},{key:"afterBrush",value:function(e){e.restore()}},{key:"setContext",value:function(e,t){for(var r=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],n=0,i=r.length;n<i;n++){var a=t[r[n][0]],o=r[n][1];void 0!==a&&(e[o]=a)}}},{key:"doClip",value:function(e){var t=h.SUtil.Util_matrix.create();if(this.__clipShapes)for(var r=0;r<this.__clipShapes.length;r++){var n=this.__clipShapes[r];if(n.needTransform){var i=n.transform;h.SUtil.Util_matrix.invert(t,i),e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}if(e.beginPath(),n.buildPath(e,n.style),e.clip(),n.needTransform){var a=t;e.transform(a[0],a[1],a[2],a[3],a[4],a[5])}}}},{key:"getHighlightStyle",value:function(e,t,r){var n={};for(var i in e)n[i]=e[i];var a=h.SUtil.Util_color.getHighlightColor();for(var o in"stroke"!=e.brushType?(n.strokeColor=a,n.lineWidth=e.lineWidth||1,n.brushType="both"):"stroke"!=r?(n.strokeColor=a,n.lineWidth=e.lineWidth||1):n.strokeColor=t.strokeColor||h.SUtil.Util_color.mix(e.strokeColor,h.SUtil.Util_color.toRGB(a)),t)"undefined"!=typeof t[o]&&(n[o]=t[o]);return n}},{key:"getHighlightZoom",value:function(){return"text"!=this.type?6:2}},{key:"drift",value:function(e,t){this.position[0]+=e,this.position[1]+=t}},{key:"buildPath",value:function(e,t){h.SUtil.Util_log("buildPath not implemented in "+this.type)}},{key:"getRect",value:function(e){h.SUtil.Util_log("getRect not implemented in "+this.type)}},{key:"isCover",value:function(e,t){var r=this.getTansform(e,t);e=r[0],t=r[1];var n=this.style.__rect;return n||(n=this.style.__rect=this.getRect(this.style)),e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height&&h.SUtil.Util_area.isInside(this,this.style,e,t)}},{key:"drawText",value:function(e,t,r){if("undefined"!=typeof t.text&&!1!==t.text){var n=t.textColor||t.color||t.strokeColor;e.fillStyle=n;var i,a,o,s,l=10,u=t.textPosition||this.textPosition||"top",c=[];switch(c=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],u){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var h=(r||t).__rect||this.getRect(r||t);switch(u){case"inside":o=h.x+h.width/2,s=h.y+h.height/2,i="center",a="middle","stroke"!=t.brushType&&n==t.color&&(e.fillStyle="#fff");break;case"left":o=h.x-l,s=h.y+h.height/2,i="end",a="middle";break;case"right":o=h.x+h.width+l,s=h.y+h.height/2,i="start",a="middle";break;case"top":o=h.x+h.width/2,s=h.y-l,i="center",a="bottom";break;case"bottom":o=h.x+h.width/2,s=h.y+h.height+l,i="center",a="top"}}break;case"start":case"end":var f=0,p=0,y=0,d=0;if("undefined"!=typeof t.pointList){var v=t.pointList;if(v.length<2)return;var m=v.length;switch(u){case"start":f=v[0][0]+c[0],p=v[1][0]+c[0],y=v[0][1]+c[1],d=v[1][1]+c[1];break;case"end":f=v[m-2][0]+c[0],p=v[m-1][0]+c[0],y=v[m-2][1]+c[1],d=v[m-1][1]+c[1]}}else f=t.xStart+c[0]||0,p=t.xEnd+c[0]||0,y=t.yStart+c[1]||0,d=t.yEnd+c[1]||0;switch(u){case"start":i=f<p?"end":"start",a=y<d?"bottom":"top",o=f,s=y;break;case"end":i=f<p?"start":"end",a=y<d?"top":"bottom",o=p,s=d}l-=4,f&&p&&f!=p?o-="end"==i?l:-l:i="center",y!=d?s-="bottom"==a?l:-l:a="middle";break;case"specific":o=t.textX||0,s=t.textY||0,i="start",a="middle"}t.labelXOffset&&!isNaN(t.labelXOffset)&&(o+=t.labelXOffset),t.labelYOffset&&!isNaN(t.labelYOffset)&&(s+=t.labelYOffset),null!=o&&null!=s&&g._fillText(e,t.text,o,s,t.textFont,t.textAlign||i,t.textBaseline||a)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(e,t,r){e.globalAlpha="fill"===t?"undefined"==typeof r.fillOpacity?"undefined"==typeof r.opacity?1:r.opacity:r.fillOpacity:"stroke"===t?"undefined"==typeof r.strokeOpacity?"undefined"==typeof r.opacity?1:r.opacity:r.strokeOpacity:"undefined"==typeof r.opacity?1:r.opacity}}],[{key:"_fillText",value:function(e,t,r,n,i,a,o){i&&(e.font=i),e.textAlign=a,e.textBaseline=o;var s=g._getTextRect(t,r,n,i,a,o);t=(t+"").split("\n");var l=h.SUtil.Util_area.getTextHeight("ZH",i);switch(o){case"top":n=s.y;break;case"bottom":n=s.y+l;break;default:n=s.y+l/2}for(var u=0,c=t.length;u<c;u++)e.fillText(t[u],r,n),n+=l}},{key:"_getTextRect",value:function(e,t,r,n,i,a){var o=h.SUtil.Util_area.getTextWidth(e,n),s=h.SUtil.Util_area.getTextHeight("ZH",n);switch(e=(e+"").split("\n"),i){case"end":case"right":t-=o;break;case"center":t-=o/2}switch(a){case"top":break;case"bottom":r-=s*e.length;break;default:r-=s*e.length/2}return{x:t,y:r,width:o,height:s*e.length}}}]),g}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerStyle=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(19);var s=t.ServerStyle=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.fillBackColor=new o.ServerColor(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new o.ServerColor(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new o.ServerColor(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ServerStyle"}return n(t,[{key:"destroy",value:function(){var e=this;e.fillBackColor&&(e.fillBackColor.destroy(),e.fillBackColor=null),e.fillBackOpaque=null,e.fillForeColor&&(e.fillForeColor.destroy(),e.fillForeColor=null),e.fillGradientMode=null,e.fillGradientAngle=null,e.fillGradientOffsetRatioX=null,e.fillGradientOffsetRatioY=null,e.fillOpaqueRate=null,e.fillSymbolID=null,e.lineColor&&(e.lineColor.destroy(),e.lineColor=null),e.lineSymbolID=null,e.lineWidth=null,e.markerAngle=null,e.markerSize=null,e.markerSymbolID=null}},{key:"toServerJSONObject",value:function(){var e={};return e=a.Util.copyAttributes(e,this)}}],[{key:"fromJson",value:function(e){if(e)return new t({fillBackColor:o.ServerColor.fromJson(e.fillBackColor),fillBackOpaque:e.fillBackOpaque,fillForeColor:o.ServerColor.fromJson(e.fillForeColor),fillGradientMode:e.fillGradientMode,fillGradientAngle:e.fillGradientAngle,fillGradientOffsetRatioX:e.fillGradientOffsetRatioX,fillGradientOffsetRatioY:e.fillGradientOffsetRatioY,fillOpaqueRate:e.fillOpaqueRate,fillSymbolID:e.fillSymbolID,lineColor:o.ServerColor.fromJson(e.lineColor),lineSymbolID:e.lineSymbolID,lineWidth:e.lineWidth,markerAngle:e.markerAngle,markerSize:e.markerSize,markerSymbolID:e.markerSymbolID})}}]),t}();i.SuperMap.ServerStyle=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkAnalystServiceBase=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(3),s=r(6);var l=t.NetworkAnalystServiceBase=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.format=o.DataFormat.GEOJSON,r.CLASS_NAME="SuperMap.NetworkAnalystServiceBase",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e){var t;(e=a.Util.transformResult(e))&&this.format===o.DataFormat.GEOJSON&&"function"==typeof this.toGeoJSONResult&&(t=this.toGeoJSONResult(e)),t||(t=e),this.events.triggerEvent("processCompleted",{result:t})}},{key:"toGeoJSONResult",value:function(e){return null}}]),n}();n.SuperMap.NetworkAnalystServiceBase=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);r(82),r(288);var o=t.FilterParameter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.FilterParameter"}return n(t,[{key:"destroy",value:function(){var e=this;if(e.attributeFilter=null,e.name=null,e.joinItems){for(var t=0,r=e.joinItems,n=r.length;t<n;t++)r[t].destroy();e.joinItems=null}if(e.linkItems){for(var i=0,a=e.linkItems,o=a.length;i<o;i++)a[i].destroy();e.linkItems=null}e.ids=null,e.orderBy=null,e.groupBy=null,e.fields=null}}]),t}();i.SuperMap.FilterParameter=o},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GeoJSON=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},a=n(0),h=n(84),f=n(1),o=n(27),s=n(31),l=n(126),p=n(22),y=n(44),d=n(21),v=n(61),m=n(38),g=n(59),b=n(60),S=n(3);var u=r.GeoJSON=function(e){function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e));return t.ignoreExtraDims=!1,t.CLASS_NAME="SuperMap.Format.GeoJSON",t.parseCoords={point:function(e){if(0==this.ignoreExtraDims&&2!=e.length)throw"Only 2D points are supported: "+e;return new p.Point(e[0],e[1])},multipoint:function(e){for(var t=[],r=null,n=0,i=e.length;n<i;++n){try{r=this.parseCoords.point.apply(this,[e[n]])}catch(a){throw a}t.push(r)}return new y.MultiPoint(t)},linestring:function(e){for(var t=[],r=null,n=0,i=e.length;n<i;++n){try{r=this.parseCoords.point.apply(this,[e[n]])}catch(a){throw a}t.push(r)}return new d.LineString(t)},multilinestring:function(e){for(var t=[],r=null,n=0,i=e.length;n<i;++n){try{r=this.parseCoords.linestring.apply(this,[e[n]])}catch(a){throw a}t.push(r)}return new v.MultiLineString(t)},polygon:function(e){for(var t,r,n=[],i=0,a=e.length;i<a;++i){try{r=this.parseCoords.linestring.apply(this,[e[i]])}catch(o){throw o}t=new m.LinearRing(r.components),n.push(t)}return new g.Polygon(n)},multipolygon:function(e){for(var t=[],r=null,n=0,i=e.length;n<i;++n){try{r=this.parseCoords.polygon.apply(this,[e[n]])}catch(a){throw a}t.push(r)}return new b.MultiPolygon(t)},box:function(e){if(2!=e.length)throw"GeoJSON box coordinates must have 2 elements";return new g.Polygon([new m.LinearRing([new p.Point(e[0][0],e[0][1]),new p.Point(e[1][0],e[0][1]),new p.Point(e[1][0],e[1][1]),new p.Point(e[0][0],e[1][1]),new p.Point(e[0][0],e[0][1])])])}},t.extract={feature:function(e){var t=this.extract.geometry.apply(this,[e.geometry]),r={type:"Feature",properties:this.createAttributes(e),geometry:t};return e.geometry&&"TEXT"===e.geometry.type&&(r.properties.texts=e.geometry.texts,r.properties.textStyle=e.geometry.textStyle),null!==e.fid&&(r.id=e.fid),null!==e.ID&&(r.id=e.ID),r},geometry:function(e){if(null==e)return null;var t=this.toGeometry(e),r=t.type,n=this.extract[r.toLowerCase()].apply(this,[t]);return"Collection"===(r="TEXT"===r?"Point":r)?{type:"GeometryCollection",geometries:n}:{type:r,coordinates:n}},point:function(e){var t=[e.x,e.y];for(var r in e)"x"===r||"y"===r||isNaN(e[r])||t.push(e[r]);return t},text:function(e){return[e.points[0].x,e.points[0].y]},multipoint:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t},linestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t},multilinestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.linestring.apply(this,[{components:e.components[r]}]));return t},polygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.linestring.apply(this,[{components:e.components[r]}]));return t},multipolygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.polygon.apply(this,[{components:e.components[r]}]));return t},collection:function(e){for(var t=e.components.length,r=new Array(t),n=0;n<t;++n)r[n]=this.extract.geometry.apply(this,[{type:"Collection",components:e.components[n]}]);return r}},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,l.JSONFormat),i(u,[{key:"read",value:function(e,t,r){t=t||"FeatureCollection";var n=null,i=null;if(i="string"==typeof e?c(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"read",this).call(this,e,r):e){if("string"!=typeof i.type);else if(this.isValidType(i,t))switch(t){case"Geometry":try{n=this.parseGeometry(i)}catch(l){}break;case"Feature":try{(n=this.parseFeature(i)).type="Feature"}catch(l){}break;case"FeatureCollection":switch(n=[],i.type){case"Feature":try{n.push(this.parseFeature(i))}catch(l){n=null}break;case"FeatureCollection":for(var a=0,o=i.features.length;a<o;++a)try{n.push(this.parseFeature(i.features[a]))}catch(l){n=null}break;default:try{var s=this.parseGeometry(i);n.push(new h.Vector(s))}catch(l){n=null}}}}else;return n}},{key:"isValidType",value:function(e,t){var r=!1;switch(t){case"Geometry":-1==f.Util.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],e.type)||(r=!0);break;case"FeatureCollection":r=!0;break;default:e.type==t&&(r=!0)}return r}},{key:"parseFeature",value:function(e){var t,r,n,i;n=e.properties?e.properties:{},i=e.geometry&&e.geometry.bbox||e.bbox;try{r=this.parseGeometry(e.geometry)}catch(a){throw a}return t=new h.Vector(r,n),i&&(t.bounds=o.Bounds.fromArray(i)),e.id&&(t.fid=e.id),t}},{key:"parseGeometry",value:function(e){if(null==e)return null;var t;if("GeometryCollection"==e.type){if(!f.Util.isArray(e.geometries))throw"GeometryCollection must have geometries array: "+e;for(var r=e.geometries.length,n=new Array(r),i=0;i<r;++i)n[i]=this.parseGeometry.apply(this,[e.geometries[i]]);t=new s.Collection(n)}else{if(!f.Util.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!this.parseCoords[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{t=this.parseCoords[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(a){throw a}}return t}},{key:"write",value:function(e,t){var r={type:null};if(f.Util.isArray(e)){r.type="FeatureCollection";var n=e.length;r.features=new Array(n);for(var i=0;i<n;++i){var a=e[i];if(l(a)){var o={};o.geometry=a,r.features[i]=this.extract.feature.apply(this,[o])}else r.features[i]=this.extract.feature.apply(this,[a])}}else if(l(e)){var s={};s.geometry=e,r=this.extract.feature.apply(this,[s])}function l(e){return e.hasOwnProperty("parts")&&e.hasOwnProperty("points")}return c(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"write",this).call(this,r,t)}},{key:"createCRSObject",value:function(e){var t=e.layer.projection.toString(),r={};if(t.match(/epsg:/i)){var n=parseInt(t.substring(t.indexOf(":")+1));r=4326==n?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+n}}}return r}},{key:"createAttributes",value:function(e){if(!e)return null;var t={};!function(e,t){if(!e.hasOwnProperty("fieldNames")||!e.hasOwnProperty("fieldValues"))return;var r=e.fieldNames,n=e.fieldValues;for(var i in r)t[r[i]]=n[i]}(e,t);var r=["fieldNames","fieldValues","geometry"];for(var n in e)-1<r.indexOf(n)||(t[n]=e[n]);return t}},{key:"toGeometry",value:function(e){var t=this,r=e.type;switch("polygon"===r&&(r=S.GeometryType.REGION),r.toUpperCase()){case S.GeometryType.POINT:return t.toGeoPoint(e);case S.GeometryType.LINE:return t.toGeoLine(e);case S.GeometryType.LINEM:return t.toGeoLinem(e);case S.GeometryType.REGION:return t.toGeoRegion(e);case S.GeometryType.RECTANGLE:return t.toGeoRectangle(e);case S.GeometryType.POINTEPS:return t.toGeoPoint(e);default:return e}}},{key:"toGeoPoint",value:function(e){var t=e.points||[{x:e.x,y:e.y}],r=(e.parts||[t.length]).length;if(r<1)return null;if(1===r)return{type:"Point",x:parseFloat(t[0].x),y:parseFloat(t[0].y)};for(var n=0,i=[];n<r;n++)i.push({x:parseFloat(t[n].x),y:parseFloat(t[n].y)});return{type:"MultiPoint",components:i}}},{key:"toGeoLine",value:function(e){var t=e.points||[],r=e.parts||[t.length],n=r.length;if(n<1)return null;if(1===n){for(var i=0,a=[];i<r[0];i++)a.push({x:parseFloat(t[i].x),y:parseFloat(t[i].y)});return this.isPointsEquals(a[0],a[r[0]-1])&&(a.pop(),a.push(a[0])),{type:"LineString",components:a}}for(var o=0,s=[];o<n;o++){for(var l=0,u=[];l<r[o];l++)u.push({x:parseFloat(t[l].x),y:parseFloat(t[l].y)});s.push(u),t.splice(0,r[o])}return{type:"MultiLineString",components:s}}},{key:"toGeoLinem",value:function(e){var t=e.points||[],r=e.parts||[t.length],n=r.length,i=[];if(n<1)return null;for(var a=0,o=0,s=[];a<n;a++){for(var l=0;l<r[a];l++)s.push({x:parseFloat(t[o+l].x),y:parseFloat(t[o+l].y),measure:parseFloat(t[o+l].measure)});o+=r[a],this.isPointsEquals(s[0],s[r[0]-1])&&(s.pop(),s.push(s[0])),i.push(s),s=[]}return{type:"MultiLineString",components:i}}},{key:"toGeoRegion",value:function(e){var t=[],r=e.points||[],n=e.parts||[r.length],i=n.length;if(i<1)return null;for(var a=new Array,o=0,s=0,l=[];o<i;o++){for(var u=0;u<n[o];u++)l.push({x:parseFloat(r[s+u].x),y:parseFloat(r[s+u].y)});s+=n[o];var c=l.concat();if(c.pop(),c.push(c[0]),0<this.isClockWise(c)?t.push(c):a.push([c]),o===i-1){var h=a.length;if(h)a[h-1]=a[h-1].concat(t);else for(var f=0,p=t.length;f<p;f++)a.push([t[f]].concat())}l=[]}return{type:"MultiPolygon",components:a}}},{key:"toGeoRectangle",value:function(e){var t=e.center,r=e.width/2,n=e.height/2,i={id:e.id,points:[{x:t.x-r,y:t.y+n},{x:t.x+r,y:t.y+n},{x:t.x+r,y:t.y-n},{x:t.x-r,y:t.y-n}],partTopo:e.partTopo,rotation:e.rotation,style:e.style,type:S.GeometryType.REGION};return this.toGeoRegion(i)}},{key:"isClockWise",value:function(e){var t=e.length;if(t<3)return 0;var r=e[0].y*(e[t-1].x-e[1].x);e.push(e[0]);for(var n=1;n<t;n++)r+=e[n].y*(e[n-1].x-e[n+1].x);return.5*r}},{key:"isPointsEquals",value:function(e,t){return e.x===t.x&&e.y===t.y}}]),u}();a.SuperMap.Format.GeoJSON=u},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ProcessingServiceBase=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},o=n(0),s=n(6),l=n(20),u=n(1),c=n(37);var h=r.ProcessingServiceBase=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=t||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"];var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.ProcessingServiceBase",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.CommonServiceBase),i(n,[{key:"destroy",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(e){var t=this;l.FetchRequest.get(e,null,{proxy:t.proxy}).then(function(e){return e.json()}).then(function(e){t.events.triggerEvent("processCompleted",{result:e})})["catch"](function(e){t.eventListeners.processFailed({error:e})})}},{key:"addJob",value:function(e,t,r,n){var i=this,a=null;t&&t instanceof r&&(a=new Object,r.toObject(t,a));var o={proxy:i.proxy,headers:{"Content-Type":"application/x-www-form-urlencoded"}};l.FetchRequest.post(i._processUrl(e),JSON.stringify(a),o).then(function(e){return e.json()}).then(function(e){e.succeed?i.serviceProcessCompleted(e,n):i.serviceProcessFailed(e)})["catch"](function(e){i.serviceProcessFailed({error:e})})}},{key:"serviceProcessCompleted",value:function(e,t){e=u.Util.transformResult(e),t=t||1e3;var r=this;if(e)var n=setInterval(function(){l.FetchRequest.get(e.newResourceLocation,{_t:(new Date).getTime()}).then(function(e){return e.json()}).then(function(e){r.events.triggerEvent("processRunning",{id:e.id,state:e.state}),"LOST"!==e.state.runState&&"KILLED"!==e.state.runState&&"FAILED"!==e.state.runState||(clearInterval(n),r.events.triggerEvent("processFailed",{error:e.state.errorMsg,state:e.state.runState})),"FINISHED"===e.state.runState&&e.setting.serviceInfo&&(clearInterval(n),r.events.triggerEvent("processCompleted",{result:e}))})["catch"](function(e){clearInterval(n),r.events.triggerEvent("processFailed",{error:e})})},t)}},{key:"serviceProcessFailed",value:function(e){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"serviceProcessFailed",this).call(this,e)}},{key:"_processUrl",value:function(e){return-1===e.indexOf(".json")&&(e+=".json"),c.SecurityManager.getToken(e)&&(e+="?token="+c.SecurityManager.getToken(e)),e}}]),n}();o.SuperMap.ProcessingServiceBase=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputSetting=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(121),s=r(3);var l=t.OutputSetting=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=s.OutputType.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",a.Util.extend(this,e),this.CLASS_NAME="SuperMap.OutputSetting"}return n(t,[{key:"destroy",value:function(){var e=this;e.type=null,e.datasetName=null,e.outputPath=null,e.datasourceInfo instanceof o.DatasourceConnectionInfo&&(e.datasourceInfo.destroy(),e.datasourceInfo=null)}}]),t}();i.SuperMap.OutputSetting=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerColor=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0);var a=t.ServerColor=function(){function a(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.red=e||0==e?e:255,this.green=t||0,this.blue=r||0,this.CLASS_NAME="SuperMap.ServerColor"}return n(a,[{key:"destroy",value:function(){this.red=null,this.green=null,this.blue=null}}],[{key:"fromJson",value:function(e){if(e){var t=new a,r=255;null!==e.red&&(r=Number(e.red)),t.red=r;var n=0;null!==e.green&&(n=Number(e.green)),t.green=n;var i=0;return null!==e.blue&&(i=Number(e.blue)),t.blue=i,t}}}]),a}();i.SuperMap.ServerColor=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FetchRequest=t.getRequestTimeout=t.setRequestTimeout=t.isCORS=t.setCORS=undefined;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r(517),r(512);var n,i=r(511),s=(n=i)&&n.__esModule?n:{"default":n},a=r(0),o=r(1);var l=window.fetch,c=(t.setCORS=a.SuperMap.setCORS=function(e){a.SuperMap.CORS=e},t.isCORS=a.SuperMap.isCORS=function(){return a.SuperMap.CORS!=undefined?a.SuperMap.CORS:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest}),h=(t.setRequestTimeout=a.SuperMap.setRequestTimeout=function(e){return a.SuperMap.RequestTimeout=e},t.getRequestTimeout=a.SuperMap.getRequestTimeout=function(){return a.SuperMap.RequestTimeout||45e3});t.FetchRequest=a.SuperMap.FetchRequest={commit:function(e,t,r,n){switch(e=e?e.toUpperCase():e){case"GET":return this.get(t,r,n);case"POST":return this.post(t,r,n);case"PUT":return this.put(t,r,n);case"DELETE":return this["delete"](t,r,n);default:return this.get(t,r,n)}},supportDirectRequest:function(e,t){return o.Util.isInTheSameDomain(e)||c()||t.proxy},get:function(e,t,r){r=r||{};if(e=this._processUrl(e,r),e=o.Util.urlAppend(e,this._getParameterString(t||{})),!this.supportDirectRequest(e,r)){var n={url:e=e.replace(".json",".jsonp"),data:t};return a.SuperMap.Util.RequestJSONP.GET(n)}return this.urlIsLong(e)?this._postSimulatie("GET",e.substring(0,e.indexOf("?")-1),t,r):this._fetch(e,t,r,"GET")},"delete":function(e,t,r){r=r||{};if(e=this._processUrl(e,r),e=o.Util.urlAppend(e,this._getParameterString(t||{})),!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var n={url:e+="&_method=DELETE",data:t};return a.SuperMap.Util.RequestJSONP.DELETE(n)}return this.urlIsLong(e)?this._postSimulatie("DELETE",e.substring(0,e.indexOf("?")-1),t,r):this._fetch(e,t,r,"DELETE")},post:function(e,t,r){if(r=r||{},!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var n={url:e+="&_method=POST",data:t};return a.SuperMap.Util.RequestJSONP.POST(n)}return this._fetch(this._processUrl(e,r),t,r,"POST")},put:function(e,t,r){if(r=r||{},e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var n={url:e+="&_method=PUT",data:t};return a.SuperMap.Util.RequestJSONP.DELETE(n)}return this._fetch(e,t,r,"PUT")},urlIsLong:function(e){for(var t=0,r=null,n=0,i=e.length;n<i;n++)(r=e.charCodeAt(n))<127?t++:128<=r&&r<=2047?t+=2:2048<=r&&r<=65535&&(t+=3);return!(t<2e3)},_postSimulatie:function(e,t,r,n){return t+=(-1<t.indexOf("?")?"&":"?")+"_method="+e,"string"!=typeof r&&(r=JSON.stringify(r)),this.post(t,r,n)},_processUrl:function(e,t){if(this._isMVTRequest(e))return e;if(-1===e.indexOf(".json")&&!t.withoutFormatSuffix)if(e.indexOf("?")<0)e+=".json";else{var r=e.split("?");2===r.length&&(e=r[0]+".json?"+r[1])}return t&&t.proxy&&("function"==typeof t.proxy?e=t.proxy(e):(e=decodeURIComponent(e),e=t.proxy+encodeURIComponent(e))),e},_fetch:function(e,t,r,n){return(r=r||{}).headers=r.headers||{},r.headers["Content-Type"]||(r.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),r.timeout?this._timeout(r.timeout,l(e,{method:n,headers:r.headers,body:"PUT"===n||"POST"===n?t:undefined,credentials:r.withCredentials?"include":"omit",mode:"cors",timeout:h()}).then(function(e){return e})):l(e,{method:n,body:"PUT"===n||"POST"===n?t:undefined,headers:r.headers,credentials:r.withCredentials?"include":"omit",mode:"cors",timeout:h()}).then(function(e){return e})},_fetchJsonp:function(e,t){return t=t||{},(0,s["default"])(e,{method:"GET",timeout:t.timeout}).then(function(e){return e})},_timeout:function(r,n){return new Promise(function(e,t){setTimeout(function(){t(new Error("timeout"))},r),n.then(e,t)})},_getParameterString:function(e){var t=[];for(var r in e){var n=e[r];if(null!=n&&"function"!=typeof n){var i;if("object"===(void 0===n?"undefined":u(n))&&n.constructor===Array){for(var a,o=[],s=0,l=n.length;s<l;s++)a=n[s],o.push(encodeURIComponent(null===a||a===undefined?"":a));i="["+o.join(",")+"]"}else i=encodeURIComponent(n);t.push(encodeURIComponent(r)+"="+i)}}return t.join("&")},_isMVTRequest:function(e){return-1<e.indexOf(".mvt")||-1<e.indexOf(".pbf")}};a.SuperMap.Util.RequestJSONP={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(e){for(var t in e){this.queryKeys.push(t),"string"!=typeof e[t]&&(e[t]=a.SuperMap.Util.toJSON(e[t]));var r=encodeURIComponent(e[t]);this.queryValues.push(r)}},issue:function(e){for(var r=this,n=r.getUid(),t=e.url,i=[],a=new Promise(function(t){r.supermap_callbacks[n]=function(e){delete r.supermap_callbacks[n],t(e)}}),o=t,s=0,l=r.queryKeys?r.queryKeys.length:0,u=0;u<l;u++)if(o.length+r.queryKeys[u].length+2>=r.limitLength){if(0==s)return!1;null==i&&(i=new Array),i.push(o),o=t,s=0,u--}else if(o.length+r.queryKeys[u].length+2+r.queryValues[u].length>r.limitLength)for(var c=r.queryValues[u];0<c.length;){var h=r.limitLength-o.length-r.queryKeys[u].length-2;-1<o.indexOf("?")?o+="&":o+="?";var f=c.substring(0,h);"%"===f.substring(h-1,h)?(h-=1,f=c.substring(0,h)):"%"===f.substring(h-2,h-1)&&(h-=2,f=c.substring(0,h)),o+=r.queryKeys[u]+"="+f,c=c.substring(h),0<f.length&&(null==i&&(i=new Array),i.push(o),o=t,s=0)}else s++,-1<o.indexOf("?")?o+="&":o+="?",o+=r.queryKeys[u]+"="+r.queryValues[u];return null==i&&(i=new Array),i.push(o),r.send(i,"SuperMap.Util.RequestJSONP.supermap_callbacks["+n+"]",e&&e.proxy),a},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(e,t,r){var n=e.length;if(0<n)for(var i=(new Date).getTime(),a=0;a<n;a++){var o=e[a];-1<o.indexOf("?")?o+="&":o+="?",o+="sectionCount="+n,o+="&sectionIndex="+a,o+="&jsonpUserID="+i,r&&(o=decodeURIComponent(o),o=r+encodeURIComponent(o)),(0,s["default"])(o,{jsonpCallbackFunction:t,timeout:3e4})}},GET:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(e.params),this.issue(e)},POST:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},PUT:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},DELETE:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineString=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),w=r(22),a=r(130);var o=t.LineString=function(e){function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));return t.CLASS_NAME="SuperMap.Geometry.LineString",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,a.Curve),n(l,[{key:"removeComponent",value:function(t){var r=this.components&&2<this.components.length;return r&&function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"removeComponent",this).apply(this,arguments),r}},{key:"getSortedSegments",value:function(){for(var e,t,r=this.components.length-1,n=new Array(r),i=0;i<r;++i)e=this.components[i],t=this.components[i+1],e.x<t.x?n[i]={x1:e.x,y1:e.y,x2:t.x,y2:t.y}:n[i]={x1:t.x,y1:t.y,x2:e.x,y2:e.y};return n.sort(function(e,t){return e.x1-t.x1})}},{key:"getVertices",value:function(e){return!0===e?[this.components[0],this.components[this.components.length-1]]:!1===e?this.components.slice(1,this.components.length-1):this.components.slice()}}],[{key:"calculateCircle",value:function(e){if(e.length<3)return e;var t={},r=e[0],n=e[1],i=e[2],a=0,o=0,s=!0,l=0,u=0,c=0,h=[],f=(i.y-r.y)/(i.x-r.x),p=i.y-f*i.x;if(i.x!=r.x&&i.y!=r.y&&n.y==f*n.x+p||i.x==r.x&&n.x==r.x||i.y==r.y&&n.y==r.y||i.x==r.x&&i.y==r.y||i.x==n.x&&i.y==n.y||r.x==n.x&&r.y==n.y)h.push(r),h.push(n),h.push(i);else{var y=(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y))*(2*(i.y-r.y))-(i.x*i.x+i.y*i.y-(r.x*r.x+r.y*r.y))*(2*(n.y-r.y)),d=2*(n.x-r.x)*(i.x*i.x+i.y*i.y-(r.x*r.x+r.y*r.y))-2*(i.x-r.x)*(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y)),v=4*((n.x-r.x)*(i.y-r.y)-(i.x-r.x)*(n.y-r.y));t.x=y/v,t.y=d/v;var m=(2*(a=Math.sqrt((r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y)))*a-((r.x-i.x)*(r.x-i.x)+(r.y-i.y)*(r.y-i.y)))/(2*a*a);m=(m=1<=m?1:m)<=-1?-1:m,c=180*Math.acos(m)/Math.PI,o=(c=i.x==r.x?t.x>r.x&&n.x>r.x||t.x<r.x&&n.x<r.x?360-c:c:t.y>f*t.x+p&&n.y>f*n.x+p||t.y<f*t.x+p&&n.y<f*n.x+p?360-c:c)/72,i.y!=r.y?i.x==r.x?i.y>r.y?n.x<r.x&&(s=!1):n.x>r.x&&(s=!1):i.x<r.x?n.y<f*n.x+p&&(s=!1):n.y>f*n.x+p&&(s=!1):i.x>r.x?n.y>r.y&&(s=!1):n.y<r.y&&(s=!1);var g=(r.y-t.y)/(r.x-t.x),b=0<=g?180*Math.atan(g)/Math.PI:Math.abs(180*Math.atan(g)/Math.PI)+90,S=Math.abs(t.y);r.y==S&&S==i.y&&r.x<i.x&&(b+=180);var _=r.y-t.y;h.push(r);for(var P=1;P<72;P++){l=o*P,u=b,s?0<=_?0<=g?u+=l:u=180-(u-90)+l:u=0<g?u-180+l:90-u+l:0<=_?0<=g?u-=l:u=180-(u-90)-l:u=0<=g?u-180-l:90-u-l,u=u*Math.PI/180;var O=t.x+a*Math.cos(u),T=t.y+a*Math.sin(u);h.push(new w.Point(O,T))}h.push(i)}return h}},{key:"createLineEPS",value:function(e){var t=[],r=e.length;if(null==e||r<2)return e;for(var n=0;n<r;){if("LTypeArc"==e[n].type){var i=l.createLineArc(t,n,r,e);t=i[0],n=i[1]}else t.push(e[n]),n++}return t}},{key:"createLineArc",value:function(e,t,r,n){if(0==t){var i=l.addPointEPS(n,t,r,"LTypeArc");Array.prototype.push.apply(e,i[0]),t=i[1]+1}else if(t==r-1){var a=[n[t-1],n[t]],o=l.calculateCircle(a);Array.prototype.push.apply(e,o),t++}else{var s=l.addPointEPS(n,t,r,"LTypeArc");e.pop(),Array.prototype.push.apply(e,s[0]),t=s[1]+1}return[e,t]}},{key:"addPointEPS",value:function(e,t,r,n){var i,a=[],o=t+1;return 0==t?Array.prototype.push.apply(a,[e[t],e[t+1]]):t==r-1?Array.prototype.push.apply(a,[e[t-1],e[t]]):Array.prototype.push.apply(a,[e[t-1],e[t],e[t+1]]),"LTypeCurve"==n?i=l.calculatePointsFBZN(a):"LTypeArc"==n&&(i=l.calculateCircle(a)),[i,o]}}]),l}();i.SuperMap.Geometry.LineString=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Point=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),o=r(26),s=r(27),l=r(1);var a=t.Point=function(e){function a(e,t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t,r,n));return i.x=parseFloat(e),i.y=parseFloat(t),i.tag=n||0==n?parseFloat(n):null,i.type=r||"Point",i.CLASS_NAME="SuperMap.Geometry.Point",i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o.Geometry),n(a,[{key:"clone",value:function(e){return null==e&&(e=new a(this.x,this.y)),l.Util.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new s.Bounds(this.x,this.y,this.x,this.y)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x===e.x&&this.y===e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"move",value:function(e,t){this.x=this.x+e,this.y=this.y+t,this.clearBounds()}},{key:"toShortString",value:function(){return this.x+", "+this.y}},{key:"destroy",value:function(){this.x=null,this.y=null,this.tag=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this)}},{key:"getVertices",value:function(e){return[this]}}]),a}();i.SuperMap.Geometry.Point=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0);var a=t.ShapeParameters=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters"}return n(e,[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}]),e}();i.SuperMap.Feature=i.SuperMap.Feature||{},i.SuperMap.Feature.ShapeParameters=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeFactory=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),b=r(74),Y=r(109),X=r(73),S=r(189),_=r(72),K=r(188),P=r(187),O=r(108),T=r(107),w=r(105),M=r(178),C=r(104),x=r(103),E=r(67),A=r(102),L=r(177),Z=r(1);var a=t.ShapeFactory=function(){function g(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),this.shapeParameters=e,this.CLASS_NAME="SuperMap.Feature.ShapeFactory"}return n(g,[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(e){if(e&&(this.shapeParameters=e),!this.shapeParameters)return null;var t=this.shapeParameters;if(t instanceof b.Point){var r=new Object;r.x=t.x,r.y=t.y,r.r=t.r,r=Z.Util.copyAttributesWithClip(r,t.style,["x","y"]);var n=new T.SmicPoint;return n.style=g.transformStyle(r),n.highlightStyle=g.transformStyle(t.highlightStyle),Z.Util.copyAttributesWithClip(n,t,["x","y","style","highlightStyle"]),n}if(t instanceof Y.Line){if(!t.pointList)return null;var i=new Object;i.pointList=t.pointList,i=Z.Util.copyAttributesWithClip(i,t.style,["pointList"]);var a=new C.SmicBrokenLine;return a.style=g.transformStyle(i),a.highlightStyle=g.transformStyle(t.highlightStyle),Z.Util.copyAttributesWithClip(a,t,["pointList","style","highlightStyle"]),a}if(t instanceof X.Polygon){if(!t.pointList)return null;var o=new Object;o.pointList=t.pointList,o=Z.Util.copyAttributesWithClip(o,t.style,["pointList"]);var s=new E.SmicPolygon;return s.style=g.transformStyle(o),s.highlightStyle=g.transformStyle(t.highlightStyle),Z.Util.copyAttributesWithClip(s,t,["pointList","style","highlightStyle"]),s}if(t instanceof S.Rectangle){if(!t.x&&!t.y&!t.width&!t.height)return null;var l=new Object;l.x=t.x,l.y=t.y,l.width=t.width,l.height=t.height,l=Z.Util.copyAttributesWithClip(l,t.style,["x","y","width","height"]);var u=new A.SmicRectangle;return u.style=g.transformStyle(l),u.highlightStyle=g.transformStyle(t.highlightStyle),Z.Util.copyAttributesWithClip(u,t,["x","y","width","height","style","highlightStyle"]),u}if(t instanceof _.Sector){var c=new Object;c.x=t.x,c.y=t.y,c.r=t.r,c.startAngle=t.startAngle,c.endAngle=t.endAngle,t.r0&&(c.r0=t.r0),t.clockWise&&(c.clockWise=t.clockWise),c=Z.Util.copyAttributesWithClip(c,t.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var h=new L.SmicSector;return h.style=g.transformStyle(c),h.highlightStyle=g.transformStyle(t.highlightStyle),Z.Util.copyAttributesWithClip(h,t,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),h}if(t instanceof K.Label){var f=new Object;f.x=t.x,f.y=t.y,f.text=t.text,f=Z.Util.copyAttributesWithClip(f,t.style,["x","y","text"]);var p=new w.SmicText;return p.style=g.transformStyle(f),p.highlightStyle=g.transformStyle(t.highlightStyle),Z.Util.copyAttributesWithClip(p,t,["x","y","text","style","highlightStyle"]),p}if(t instanceof P.Image){var y=new Object;y.x=t.x,y.y=t.y,t.image&&(y.image=t.image),t.width&&(y.width=t.width),t.height&&(y.height=t.height),t.sx&&(y.sx=t.sx),t.sy&&(y.sy=t.sy),t.sWidth&&(y.sWidth=t.sWidth),t.sHeight&&(y.sHeight=t.sHeight),y=Z.Util.copyAttributesWithClip(y,t.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var d=new x.SmicImage;return d.style=g.transformStyle(y),d.highlightStyle=g.transformStyle(t.highlightStyle),Z.Util.copyAttributesWithClip(d,t,["x","y","image","width","height","style","highlightStyle"]),d}if(t instanceof O.Circle){var v=new Object;v.x=t.x,v.r=t.r,v.y=t.y,v=Z.Util.copyAttributesWithClip(v,t.style,["x","y","r"]);var m=new M.SmicCircle;return m.style=new g.transformStyle(v),m.highlightStyle=new g.transformStyle(t.highlightStyle),Z.Util.copyAttributesWithClip(m,t,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),m}return null}}],[{key:"transformStyle",value:function(e){var t={},r=["normal","normal","normal","12","arial,sans-serif"],n=[!0,!1];for(var i in e)switch(i){case"fill":n[0]=e[i];break;case"fillColor":t.color=e[i];break;case"stroke":n[1]=e[i];break;case"strokeWidth":t.lineWidth=e[i];break;case"strokeLinecap":t.lineCap=e[i];break;case"strokeLineJoin":t.lineJoin=e[i];break;case"strokeDashstyle":t.lineType=e[i];break;case"pointRadius":t.r=e[i];break;case"label":t.text=e[i];break;case"labelRect":t.labelRect=e[i];break;case"fontColor":t.textColor=e[i];break;case"fontStyle":r[0]=e[i];break;case"fontVariant":r[1]=e[i];break;case"fontWeight":r[2]=e[i];break;case"fontSize":var a="";e[i]&&e[i].toString().indexOf("px")<0&&(a="px"),r[3]=e[i]+a;break;case"fontFamily":r[4]=e[i];break;case"fontOpacity":t.opacity=e[i];break;case"labelPosition":t.textPosition=e[i];break;case"labelAlign":t.textAlign=e[i];break;case"labelBaseline":t.textBaseline=e[i];break;case"labelRotation":t.textRotation=e[i];break;default:t[i]=e[i]}return t.textFont=r.join(" "),!0===n[0]&&!1===n[1]?t.brushType="fill":!1===n[0]&&!0===n[1]?t.brushType="stroke":!0===n[0]&&!0===n[1]?t.brushType="both":t.brushType="fill",null==t.lineWidth&&(t.lineWidth=1),t}},{key:"Background",value:function(e,t,r){var n=r||{},i=new S.Rectangle(t[0],t[3],Math.abs(t[2]-t[0]),Math.abs(t[3]-t[1]));return i.style={fillColor:"#f3f3f3"},n.backgroundStyle&&Z.Util.copyAttributesWithClip(i.style,n.backgroundStyle),n.backgroundRadius&&(i.style.radius=n.backgroundRadius),i.clickable=!1,i.hoverable=!1,e.createShape(i)}},{key:"GraphAxis",value:function(e,t,r,n){var i,a=t,o=r||{},s=[],l=[],u=!!o.useXReferenceLine&&o.useXReferenceLine,c=o.axisYTick&&!isNaN(o.axisYTick)?o.axisYTick:0,h=[],f=[];if(0==c){if(f.push([a[0],a[3]-5]),f.push([a[0],a[1]]),o.axis3DParameter&&!isNaN(o.axis3DParameter)&&15<=o.axis3DParameter){var p=parseInt(o.axis3DParameter),y=[a[0]-p,a[1]+p];o.axisUseArrow&&(h.push([y[0]+1.5,y[1]-7.5]),h.push([y[0]-1,y[1]+1]),h.push([y[0]+7.5,y[1]-1.5])),f.push([y[0],y[1]]),f.push([a[0],a[1]])}f.push([a[2]+5,a[1]])}else{var d=Math.abs(a[1]-a[3])/c,v=a[3];f.push([a[0],v-5]);for(var m=0;m<c;m++){if(f.push([a[0],v]),f.push([a[0]-5,v]),f.push([a[0],v]),u){var g=new Y.Line([[a[0],v],[a[2],v]]);g.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},g.clickable=!1,g.hoverable=!1,o.xReferenceLineStyle&&Z.Util.copyAttributesWithClip(g.style,o.xReferenceLineStyle),s.push(e.createShape(g))}v+=d}if(f.push([a[0],a[1]]),o.axis3DParameter&&!isNaN(o.axis3DParameter)&&15<=o.axis3DParameter){var b=parseInt(o.axis3DParameter),S=[a[0]-b,a[1]+b];o.axisUseArrow&&(h.push([S[0]+1.5,S[1]-7.5]),h.push([S[0]-1,S[1]+1]),h.push([S[0]+7.5,S[1]-1.5])),f.push([S[0],S[1]]),f.push([a[0],a[1]])}f.push([a[2]+5,a[1]])}if(o.axisUseArrow){var _=[[a[2]+5,a[1]+4],[a[2]+13,a[1]],[a[2]+5,a[1]-4]],P=[[a[0]-4,a[3]-5],[a[0],a[3]-13],[a[0]+4,a[3]-5]],O=new X.Polygon(_);O.style={fillColor:"#008acd"},Z.Util.copyAttributesWithClip(O.style,o.axisStyle),l.push(e.createShape(O));var T=new X.Polygon(P);if(T.style={fillColor:"#008acd"},Z.Util.copyAttributesWithClip(T.style,o.axisStyle),l.push(e.createShape(T)),o.axis3DParameter&&!isNaN(o.axis3DParameter)&&15<=o.axis3DParameter){var w=new X.Polygon(h);w.style={fillColor:"#008acd"},Z.Util.copyAttributesWithClip(w.style,o.axisStyle),l.push(e.createShape(w))}}i=f;var M=new Y.Line(i);M.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},o.axisStyle&&Z.Util.copyAttributesWithClip(M.style,o.axisStyle),M.clickable=!1,M.hoverable=!1;var C=[e.createShape(M)],x=[];if(o.axisYLabels&&o.axisYLabels.length&&0<o.axisYLabels.length){var E=o.axisYLabels,A=E.length,L=[0,0];if(o.axisYLabelsOffset&&o.axisYLabelsOffset.length&&(L=o.axisYLabelsOffset),1==A){var k=new K.Label(a[0]-5+L[0],a[3]+L[1],E[0]);k.style={labelAlign:"right"},o.axisYLabelsStyle&&Z.Util.copyAttributesWithClip(k.style,o.axisYLabelsStyle),k.clickable=!1,k.hoverable=!1,x.push(e.createShape(k))}else for(var j=a[3],F=Math.abs(a[1]-a[3])/(A-1),I=0;I<A;I++){var R=new K.Label(a[0]-5+L[0],j+L[1],E[I]);R.style={labelAlign:"right"},o.axisYLabelsStyle&&Z.Util.copyAttributesWithClip(R.style,o.axisYLabelsStyle),R.clickable=!1,R.hoverable=!1,x.push(e.createShape(R)),j+=F}}var N=[];if(o.axisXLabels&&o.axisXLabels.length&&0<o.axisXLabels.length){var D=o.axisXLabels,G=D.length,B=[0,0];if(o.axisXLabelsOffset&&o.axisXLabelsOffset.length&&(B=o.axisXLabelsOffset),n&&n.xPositions&&n.xPositions.length&&n.xPositions.length==G)for(var U=n.xPositions,V=0;V<G;V++){var J=new K.Label(U[V]+B[0],a[1]+B[1],D[V]);J.style={labelAlign:"center",labelBaseline:"top"},o.axisXLabelsStyle&&Z.Util.copyAttributesWithClip(J.style,o.axisXLabelsStyle),J.clickable=!1,J.hoverable=!1,N.push(e.createShape(J))}else if(1==G){var z=new K.Label(a[0]-5+B[0],a[1]+B[0],D[0]);z.style={labelAlign:"center",labelBaseline:"top"},o.axisXLabelsStyle&&Z.Util.copyAttributesWithClip(z.style,o.axisXLabelsStyle),z.clickable=!1,z.hoverable=!1,N.push(e.createShape(z))}else for(var q=a[0],H=Math.abs(a[2]-a[0])/(G-1),W=0;W<G;W++){var Q=new K.Label(q+B[0],a[1]+B[1],D[W]);Q.style={labelAlign:"center",labelBaseline:"top"},o.axisXLabelsStyle&&Z.Util.copyAttributesWithClip(Q.style,o.axisXLabelsStyle),Q.clickable=!1,Q.hoverable=!1,N.push(e.createShape(Q)),q+=H}}return s.concat(C).concat(x).concat(N).concat(l)}},{key:"ShapeStyleTool",value:function(e,t,r,n,i,a){var o=e||{};if(t&&Z.Util.copyAttributesWithClip(o,t),r&&r.length&&void 0!==i&&!isNaN(i)&&0<=i&&r[i]&&Z.Util.copyAttributesWithClip(o,r[i]),n&&n.length&&void 0!==a)for(var s=n,l=s.length,u=parseFloat(a),c=0;c<l;c++)if(s[c].start<=u&&u<s[c].end){Z.Util.copyAttributesWithClip(o,s[c].style);break}return o}}]),g}();i.SuperMap.Feature=i.SuperMap.Feature||{},i.SuperMap.Feature.ShapeFactory=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Theme=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);r(247);var o=t.Theme=function(){function r(e,t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),!e)return this;this.memoryData=null,this.type=e,t&&a.Util.extend(this,t),this.CLASS_NAME="SuperMap.Theme"}return n(r,[{key:"destroy",value:function(){this.memoryData&&(this.memoryData.destroy(),this.memoryData=null),this.type=null}},{key:"toServerJSONObject",value:function(){}}]),r}();i.SuperMap.Theme=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Geometry=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.Geometry=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Geometry",this.id=a.Util.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}return n(e,[{key:"destroy",value:function(){this.id=null,this.bounds=null,this.SRID=null}},{key:"clone",value:function(){return new e}},{key:"setBounds",value:function(e){e&&(this.bounds=e.clone())}},{key:"clearBounds",value:function(){this.bounds=null,this.parent&&this.parent.clearBounds()}},{key:"extendBounds",value:function(e){this.getBounds()?this.bounds.extend(e):this.setBounds(e)}},{key:"getBounds",value:function(){return null==this.bounds&&this.calculateBounds(),this.bounds}},{key:"calculateBounds",value:function(){}},{key:"getVertices",value:function(e){}},{key:"getArea",value:function(){return 0}}]),e}();i.SuperMap.Geometry=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bounds=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(306),o=r(86),s=r(45),l=r(1);var u=t.Bounds=function(){function i(e,t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),l.Util.isArray(e)&&(n=e[3],r=e[2],t=e[1],e=e[0]),this.left=null!=e?l.Util.toFloat(e):this.left,this.bottom=null!=t?l.Util.toFloat(t):this.bottom,this.right=null!=r?l.Util.toFloat(r):this.right,this.top=null!=n?l.Util.toFloat(n):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}return n(i,[{key:"clone",value:function(){return new i(this.left,this.bottom,this.right,this.top)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.left===e.left&&this.right===e.right&&this.top===e.top&&this.bottom===e.bottom),t}},{key:"toString",value:function(){return[this.left,this.bottom,this.right,this.top].join(",")}},{key:"toArray",value:function(e){return!0===e?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}},{key:"toBBOX",value:function(e,t){null==e&&(e=6);var r=Math.pow(10,e),n=Math.round(this.left*r)/r,i=Math.round(this.bottom*r)/r,a=Math.round(this.right*r)/r,o=Math.round(this.top*r)/r;return!0===t?i+","+n+","+o+","+a:n+","+i+","+a+","+o}},{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.top-this.bottom}},{key:"getSize",value:function(){return new a.Size(this.getWidth(),this.getHeight())}},{key:"getCenterPixel",value:function(){return new o.Pixel((this.left+this.right)/2,(this.bottom+this.top)/2)}},{key:"getCenterLonLat",value:function(){return this.centerLonLat||(this.centerLonLat=new s.LonLat((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}},{key:"scale",value:function(e,t){var r,n;return e=e||1,null==t&&(t=this.getCenterLonLat()),"SuperMap.LonLat"===t.CLASS_NAME?(r=t.lon,n=t.lat):(r=t.x,n=t.y),new i((this.left-r)*e+r,(this.bottom-n)*e+n,(this.right-r)*e+r,(this.top-n)*e+n)}},{key:"add",value:function(e,t){if(null==e||null==t)throw new TypeError("Bounds.add cannot receive null values");return new i(this.left+e,this.bottom+t,this.right+e,this.top+t)}},{key:"extend",value:function(e){var t=null;if(e){switch(e.CLASS_NAME){case"SuperMap.LonLat":t=new i(e.lon,e.lat,e.lon,e.lat);break;case"SuperMap.Geometry.Point":t=new i(e.x,e.y,e.x,e.y);break;case"SuperMap.Bounds":t=e}t&&(((this.centerLonLat=null)==this.left||t.left<this.left)&&(this.left=t.left),(null==this.bottom||t.bottom<this.bottom)&&(this.bottom=t.bottom),(null==this.right||t.right>this.right)&&(this.right=t.right),(null==this.top||t.top>this.top)&&(this.top=t.top))}}},{key:"containsLonLat",value:function(e,t){"boolean"==typeof t&&(t={inclusive:t}),t=t||{};var r=this.contains(e.lon,e.lat,t.inclusive),n=t.worldBounds;if(n&&!r){var i=n.getWidth(),a=(n.left+n.right)/2,o=Math.round((e.lon-a)/i);r=this.containsLonLat({lon:e.lon-o*i,lat:e.lat},{inclusive:t.inclusive})}return r}},{key:"containsPixel",value:function(e,t){return this.contains(e.x,e.y,t)}},{key:"contains",value:function(e,t,r){if(null==r&&(r=!0),null==e||null==t)return!1;e=l.Util.toFloat(e),t=l.Util.toFloat(t);var n=!1;return n=r?e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:e>this.left&&e<this.right&&t>this.bottom&&t<this.top,n}},{key:"intersectsBounds",value:function(e,t){if("boolean"==typeof t&&(t={inclusive:t}),(t=t||{}).worldBounds){var r=this.wrapDateLine(t.worldBounds);e=e.wrapDateLine(t.worldBounds)}else r=this;null==t.inclusive&&(t.inclusive=!0);var n=!1,i=r.left===e.right||r.right===e.left||r.top===e.bottom||r.bottom===e.top;if(t.inclusive||!i){var a=e.bottom>=r.bottom&&e.bottom<=r.top||r.bottom>=e.bottom&&r.bottom<=e.top,o=e.top>=r.bottom&&e.top<=r.top||r.top>e.bottom&&r.top<e.top,s=e.left>=r.left&&e.left<=r.right||r.left>=e.left&&r.left<=e.right,l=e.right>=r.left&&e.right<=r.right||r.right>=e.left&&r.right<=e.right;n=(a||o)&&(s||l)}if(t.worldBounds&&!n){var u=t.worldBounds,c=u.getWidth(),h=!u.containsBounds(r),f=!u.containsBounds(e);h&&!f?(e=e.add(-c,0),n=r.intersectsBounds(e,{inclusive:t.inclusive})):f&&!h&&(r=r.add(-c,0),n=e.intersectsBounds(r,{inclusive:t.inclusive}))}return n}},{key:"containsBounds",value:function(e,t,r){null==t&&(t=!1),null==r&&(r=!0);var n=this.contains(e.left,e.bottom,r),i=this.contains(e.right,e.bottom,r),a=this.contains(e.left,e.top,r),o=this.contains(e.right,e.top,r);return t?n||i||a||o:n&&i&&a&&o}},{key:"determineQuadrant",value:function(e){var t="",r=this.getCenterLonLat();return t+=e.lat<r.lat?"b":"t",t+=e.lon<r.lon?"l":"r"}},{key:"wrapDateLine",value:function(e,t){var r=(t=t||{}).leftTolerance||0,n=t.rightTolerance||0,i=this.clone();if(e){for(var a=e.getWidth();i.left<e.left&&i.right-n<=e.left;)i=i.add(a,0);for(;i.left+r>=e.right&&i.right>e.right;)i=i.add(-a,0);var o=i.left+r;o<e.right&&o>e.left&&i.right-n>e.right&&(i=i.add(-a,0))}return i}},{key:"toServerJSONObject",value:function(){return{rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom}}},{key:"destroy",value:function(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}}],[{key:"fromString",value:function(e,t){var r=e.split(",");return i.fromArray(r,t)}},{key:"fromArray",value:function(e,t){return!0===t?new i(e[1],e[0],e[3],e[2]):new i(e[0],e[1],e[2],e[3])}},{key:"fromSize",value:function(e){return new i(0,e.h,e.w,0)}},{key:"oppositeQuadrant",value:function(e){var t="";return t+="t"===e.charAt(0)?"b":"t",t+="l"===e.charAt(1)?"r":"l"}}]),i}();i.SuperMap.Bounds=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommontypesConversion=undefined;var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(2),o=(n=a)&&n.__esModule?n:{"default":n};r(4);var s=r(5);var l=t.CommontypesConversion=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"toSuperMapBounds",value:function(e){return e instanceof o["default"].LatLngBounds?new s.Bounds(e.getSouthWest().lng,e.getSouthWest().lat,e.getNorthEast().lng,e.getNorthEast().lat):e instanceof o["default"].Bounds?new s.Bounds(e.min.x,e.min.y,e.max.x,e.max.y):this.isArray(e)?new s.Bounds(e[0],e[1],e[2],e[3]):new s.Bounds}},{key:"isArray",value:function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{key:"toProcessingParam",value:function(e){var t={};if(e.length<1)t="";else{for(var r=[],n=0;n<e.length;n++){var i={};i.x=e[n][0],i.y=e[n][1],r.push(i)}t.type="REGION",t.points=r}return t}}]),e}();o["default"].supermap.CommontypesConversion=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(27),c=r(66),l=r(24);var o=t.Graph=function(e){function s(e,t,r,n,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,t,r,n,i,a));return o.shapeFactory=new l.ShapeFactory,o.shapeParameters=null,o.RelativeCoordinate=!1,o.setting=null,o.origonPoint=null,o.chartBox=null,o.chartBounds=null,o.width=null,o.height=null,o.XOffset=0,o.YOffset=0,o.DVBParameter=null,o.dataViewBox=null,o.DVBCodomain=null,o.DVBCenterPoint=null,o.DVBUnitValue=null,o.DVBOrigonPoint=null,o.DVBWidth=null,o.DVBHeight=null,o.origonPointOffset=null,o.fields=r||[],o.dataValues=null,o.lonlat=i||o.data.geometry.getBounds().getCenterLonLat(),n&&n.width&&n.height&&n.codomain&&(o.setting=n),o.CLASS_NAME="SuperMap.Feature.Theme.Graph",o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,c.Theme),n(s,[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;if(!(e.width&&e.height&&e.codomain))return!1;var t="undefined"==typeof e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,r=c.Theme.getDataValues(this.data,this.fields,t);this.dataValues=r||[],this.width=parseFloat(e.width),this.height=parseFloat(e.height),this.DVBCodomain=e.codomain,this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var n=this.width,i=this.height,a=this.location;this.origonPoint=[a[0]-n/2,a[1]-i/2];var o=this.origonPoint;this.chartBox=[o[0],o[1]+i,o[0]+n,o[1]];var s=this.chartBox,l=this.DVBParameter;this.dataViewBox=[s[0]+l[0],s[1]-l[1],s[2]-l[2],s[3]+l[3]];var u=this.dataViewBox;return!(u[0]>=u[2]||u[1]<=u[3])&&(this.DVBOrigonPoint=[u[0],u[3]],this.DVBWidth=Math.abs(u[2]-u[0]),this.DVBHeight=Math.abs(u[1]-u[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-o[0],this.DVBOrigonPoint[1]-o[1]],!0)}},{key:"resetLocation",value:function(e){e&&(this.lonlat=e);var t=this.getLocalXY(this.lonlat);t[0]+=this.XOffset,t[1]+=this.YOffset,this.location=t;var r=this.width,n=this.height,i=this.location;return this.chartBounds=new a.Bounds(i[0]-r/2,i[1]+n/2,i[0]+r/2,i[1]-n/2),this.resetLinearGradient(),i}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var e=this.shapes,t=this.location,r=0,n=e.length;r<n;r++){e[r].refOriginalPosition=t;var i=e[r].style;for(var a in i)switch(a){case"pointList":for(var o=i[a],s=0,l=o.length;s<l;s++)o[s][0]-=t[0],o[s][1]-=t[1];break;case"x":i[a]-=t[0];break;case"y":i[a]-=t[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}]),s}();c.Theme.getDataValues=function(e,t,r){if(!e.attributes)return!1;for(var n=[],i=e.attributes,a=0;a<t.length;a++)for(var o in i)if(o===t[a])try{!isNaN(r)&&0<=r?n.push(parseFloat(i[o].toString()).toFixed(r)):n.push(parseFloat(i[o].toString()))}catch(s){throw new Error("not a number")}return n.length===t.length&&n},i.SuperMap.Feature.Theme.Graph=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();t.Util=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util"}return n(e,[{key:"clone",value:function(e){var t=this.BUILTIN_OBJECT;if("object"==(void 0===e?"undefined":o(e))&&null!==e){var r=e;if(e instanceof Array){r=[];for(var n=0,i=e.length;n<i;n++)r[n]=this.clone(e[n])}else if(!t[Object.prototype.toString.call(e)])for(var a in r={},e)e.hasOwnProperty(a)&&(r[a]=this.clone(e[a]));return r}return e}},{key:"mergeItem",value:function(e,t,r,n){var i=this.BUILTIN_OBJECT;t.hasOwnProperty(r)&&("object"!=o(e[r])||i[Object.prototype.toString.call(e[r])]?!n&&r in e||(e[r]=t[r]):this.merge(e[r],t[r],n))}},{key:"merge",value:function(e,t,r){for(var n in t)this.mergeItem(e,t,n,r);return e}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(e,t){var r,n=this._canvas,i=this._pixelCtx,a=this._width,o=this._height,s=this._offsetX,l=this._offsetY;a<e+s&&(a=e+s+100,n.width=a,r=!0),o<t+l&&(o=t+l+100,n.height=o,r=!0),e<-s&&(a+=s=100*Math.ceil(-e/100),n.width=a,r=!0),t<-l&&(o+=l=100*Math.ceil(-t/100),n.height=o,r=!0),r&&i.translate(s,l)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}},{key:"inherits",value:function(e,t){var r=e.prototype;function n(){}for(var i in n.prototype=t.prototype,e.prototype=new n,r)e.prototype[i]=r[i];e.constructor=e}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Collection=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(27),o=r(26),s=r(1);var l=t.Collection=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.components=[],(t.componentTypes=null)!=e&&t.addComponents(e),t.CLASS_NAME="SuperMap.Geometry.Collection",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.Geometry),i(n,[{key:"destroy",value:function(){this.components.length=0,this.components=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){for(var e=new n,t=0,r=this.components.length;t<r;t++)e.addComponent(this.components[t].clone());return s.Util.applyDefaults(e,this),e}},{key:"getComponentsString",value:function(){for(var e=[],t=0,r=this.components.length;t<r;t++)e.push(this.components[t].toShortString());return e.join(",")}},{key:"calculateBounds",value:function(){this.bounds=null;var e=new a.Bounds,t=this.components;if(t)for(var r=0,n=t.length;r<n;r++)e.extend(t[r].getBounds());null!=e.left&&null!=e.bottom&&null!=e.right&&null!=e.top&&this.setBounds(e)}},{key:"addComponents",value:function(e){s.Util.isArray(e)||(e=[e]);for(var t=0,r=e.length;t<r;t++)this.addComponent(e[t])}},{key:"addComponent",value:function(e,t){var r=!1;if(e&&(null==this.componentTypes||-1<s.Util.indexOf(this.componentTypes,e.CLASS_NAME))){if(null!=t&&t<this.components.length){var n=this.components.slice(0,t),i=this.components.slice(t,this.components.length);n.push(e),this.components=n.concat(i)}else this.components.push(e);(e.parent=this).clearBounds(),r=!0}return r}},{key:"removeComponents",value:function(e){var t=!1;s.Util.isArray(e)||(e=[e]);for(var r=e.length-1;0<=r;--r)t=this.removeComponent(e[r])||t;return t}},{key:"removeComponent",value:function(e){return s.Util.removeItem(this.components,e),this.clearBounds(),!0}},{key:"getArea",value:function(){for(var e=0,t=0,r=this.components.length;t<r;t++)e+=this.components[t].getArea();return e}},{key:"equals",value:function(e){var t=!0;if(e&&e.CLASS_NAME&&this.CLASS_NAME===e.CLASS_NAME)if(s.Util.isArray(e.components)&&e.components.length===this.components.length){for(var r=0,n=this.components.length;r<n;++r)if(!this.components[r].equals(e.components[r])){t=!1;break}}else t=!1;else t=!1;return t}},{key:"getVertices",value:function(e){for(var t=[],r=0,n=this.components.length;r<n;++r)Array.prototype.push.apply(t,this.components[r].getVertices(e));return t}}]),n}();n.SuperMap.Geometry.Collection=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NormalizeScale=t.GetResolutionFromScaleDpi=t.scaleToResolution=t.resolutionToScale=t.getMeterPerMapUnit=t.toSuperMapGeometry=t.toGeoJSON=t.supermap_callbacks=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n},o=r(5);var s=t.supermap_callbacks={};a["default"].Util.supermap_callbacks=s;var l=t.toGeoJSON=function(e){return e?JSON.parse((new o.GeoJSON).write(e)):e},u=t.toSuperMapGeometry=function(e){if(!e)return e;var t,r=new o.GeoJSON;if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e.type))t=r.read(e,e.type);else if("function"==typeof e.toGeoJSON){var n=e.toGeoJSON();t=n?r.read(n,n.type):e}var i=t;return a["default"].Util.isArray(t)&&(1===t.length?i=t[0]:1<t.length&&(i=[],t.map(function(e){return i.push(e.geometry),e}))),i&&i.geometry?i.geometry:i},c=t.getMeterPerMapUnit=function(e){var t;if(e===o.Unit.METER)t=1;else if(e===o.Unit.DEGREE)t=2*Math.PI*6378137/360;else if(e===o.Unit.KILOMETER)t=.001;else if(e===o.Unit.INCH)t=1/.025399999918;else{if(e!==o.Unit.FOOT)return t;t=.3048}return t},h=t.resolutionToScale=function(e,t,r){var n=e*t*(1/.0254)*c(r);return n=1/n},f=t.scaleToResolution=function(e,t,r){var n=e*t*(1/.0254)*c(r);return n=1/n},p=t.GetResolutionFromScaleDpi=function(e,t,r,n){return n=n||6378137,r=r||"",0<e&&0<t?(e=a["default"].Util.NormalizeScale(e),"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/t/e/(2*Math.PI*n/360)/1e4:254/t/e/1e4):-1},y=t.NormalizeScale=function(e){return 1<e?1/e:e};a["default"].Util.toGeoJSON=l,a["default"].Util.toSuperMapGeometry=u,a["default"].Util.resolutionToScale=h,a["default"].Util.scaleToResolution=f,a["default"].Util.getMeterPerMapUnit=c,a["default"].Util.GetResolutionFromScaleDpi=p,a["default"].Util.NormalizeScale=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterpolationAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);r(282);var o=r(3);var s=t.InterpolationAnalystParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=o.PixelFormat.BIT16,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters")}return n(t,[{key:"destroy",value:function(){var e=this;e.bounds=null,e.searchRadius=null,e.zValueFieldName=null,e.zValueScale=null,e.resolution=null,e.filterQueryParameter=null,e.outputDatasetName=null,e.pixelFormat=null}}],[{key:"toObject",value:function(e,t){for(var r in e)if("inputPoints"===r&&"geometry"===e.InterpolationAnalystType){for(var n=[],i=0;i<e.inputPoints.length;i++){var a=e.inputPoints[i],o={x:a.x,y:a.y,z:a.tag};n.push(o)}t[r]=n}else t[r]=e[r]}}]),t}();i.SuperMap.InterpolationAnalystParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerTextStyle=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3),s=r(19);var l=t.ServerTextStyle=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.align=o.TextAlignment.BASELINECENTER,this.backColor=new s.ServerColor(255,255,255),this.foreColor=new s.ServerColor(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ServerTextStyle"}return n(r,[{key:"destroy",value:function(){var e=this;e.align=null,e.backColor&&(e.backColor.destroy(),e.backColor=null),e.foreColor&&(e.foreColor.destroy(),e.foreColor=null),e.backOpaque=null,e.sizeFixed=null,e.fontHeight=null,e.fontWidth=null,e.fontWeight=null,e.fontName=null,e.bold=null,e.italic=null,e.italicAngle=null,e.shadow=null,e.strikeout=null,e.outline=null,e.opaqueRate=null,e.underline=null,e.rotation=null}}],[{key:"fromObj",value:function(e){var t=new r(e);return a.Util.copy(t,e),t.backColor=s.ServerColor.fromJson(e.backColor),t.foreColor=s.ServerColor.fromJson(e.foreColor),t}}]),r}();i.SuperMap.ServerTextStyle=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransportationAnalystParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(279);var s=t.TransportationAnalystParameter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new o.TransportationAnalystResultSetting,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.TransportationAnalystParameter")}return n(t,[{key:"destroy",value:function(){var e=this;if(e.barrierEdgeIDs=null,e.barrierNodeIDs=null,e.weightFieldName=null,e.turnWeightField=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.barrierPoints&&e.barrierPoints.length)for(var t in e.barrierPoints)e.barrierPoints[t].destroy();e.barrierPoints=null}}]),t}();i.SuperMap.TransportationAnalystParameter=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);r(15);var o=r(3);var s=t.QueryParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=o.GeometryType.LINE,this.queryOption=o.QueryOption.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.QueryParameters")}return n(t,[{key:"destroy",value:function(){var e=this;if(e.customParams=null,e.expectCount=null,e.networkType=null,e.queryOption=null,e.queryParams){for(var t=0,r=e.queryParams,n=r.length;t<n;t++)r[t].destroy();e.queryParams=null}e.startRecord=null,e.holdTime=null,e.returnCustomResult=null,e.prjCoordSys=null}}]),t}();i.SuperMap.QueryParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecurityManager=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),l=r(1),u=r(20);var a=t.SecurityManager=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}return i(n,null,[{key:"generateToken",value:function(e,t){var r=this.servers[e];if(r)return u.FetchRequest.post(r.tokenServiceUrl,JSON.stringify(t.toJSON())).then(function(e){return e.text()})}},{key:"registerServers",value:function(e){this.servers=this.servers||{},l.Util.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var r=e[t];this.servers[r.server]=r}}},{key:"registerToken",value:function(e,t){if(this.tokens=this.tokens||{},e&&t){var r=this._getTokenStorageKey(e);this.tokens[r]=t}}},{key:"registerKey",value:function(e,t){if(this.keys=this.keys||{},e&&!(e.length<1)&&t){e=l.Util.isArray(e)?e:[e];for(var r=0;r<e.length;r++){var n=this._getUrlRestString(e[0])||e[0];this.keys[n]=t}}}},{key:"getServerInfo",value:function(e){return this.servers=this.servers||{},this.servers[e]}},{key:"getToken",value:function(e){if(e){this.tokens=this.tokens||{};var t=this._getTokenStorageKey(e);return this.tokens[t]}}},{key:"getKey",value:function(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;return this.keys[t]}},{key:"loginiServer",value:function(e,t,r,n){e+="/"===e.substr(e.length-1,1)?"services/security/login.json":"/services/security/login.json";var i={username:t&&t.toString(),password:r&&r.toString(),rememberme:n};i=JSON.stringify(i);return u.FetchRequest.post(e,i,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return e.json()})}},{key:"logoutiServer",value:function(e){e+="/"===e.substr(e.length-1,1)?"services/security/logout":"/services/security/logout";return u.FetchRequest.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0})["catch"](function(){return!1})}},{key:"loginOnline",value:function(e,t){var r=n.SSO+"/login?service="+e;this._open(r,t)}},{key:"loginiPortal",value:function(e,t,r){e+="/"===e.substr(e.length-1,1)?"web/login.json":"/web/login.json";var n={username:t&&t.toString(),password:r&&r.toString()};n=JSON.stringify(n);return u.FetchRequest.post(e,n,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0}).then(function(e){return e.json()})}},{key:"logoutiPortal",value:function(e){e+="/"===e.substr(e.length-1,1)?"services/security/logout":"/services/security/logout";return u.FetchRequest.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0})["catch"](function(){return!1})}},{key:"loginManager",value:function(e,t,r){if(l.Util.isInTheSameDomain(e)){var n="/"===e.substr(e.length-1,1)?e+"icloud/security/tokens.json":e+"/icloud/security/tokens.json",i=t||{},a={username:i.userName&&i.userName.toString(),password:i.password&&i.password.toString()};a=JSON.stringify(a);var o=this;return u.FetchRequest.post(n,a,{headers:{Accept:"*/*","Content-Type":"application/json"}}).then(function(e){e.text().then(function(e){return o.imanagerToken=e})})}var s=!r||r.isNewTab;this._open(e,s)}},{key:"destroyAllCredentials",value:function(){this.keys=null,this.tokens=null,this.servers=null}},{key:"destroyToken",value:function(e){if(e){var t=this._getTokenStorageKey(e);this.tokens=this.tokens||{},this.tokens[t]&&delete this.tokens[t]}}},{key:"destroyKey",value:function(e){if(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;this.keys[t]&&delete this.keys[t]}}},{key:"_open",value:function(e,t){t=null==t||t;var r=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,n=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,i="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+n+", left="+r+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";t?window.open(e,"login"):window.open(e,"login",i)}},{key:"_getTokenStorageKey",value:function(e){var t=e.match(/(.*?):\/\/([^\/]+)/i);return t?t[0]:e}},{key:"_getUrlRestString",value:function(e){if(!e)return e;var t=e.match(/http:\/\/(.*\/rest)/i);return t?t[0]:e}}]),n}();a.INNER_WINDOW_WIDTH=600,a.INNER_WINDOW_HEIGHT=600,a.SSO="https://sso.supermap.com",a.ONLINE="http://www.supermapol.com",n.SuperMap.SecurityManager=a},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LinearRing=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},a=n(0),s=n(21);var l=r.LinearRing=function(e){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.componentTypes=["SuperMap.Geometry.Point"],t.CLASS_NAME="SuperMap.Geometry.LinearRing",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,s.LineString),i(a,[{key:"addComponent",value:function(e,t){var r=!1,n=this.components.pop();null==t&&e.equals(n)||(r=o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"addComponent",this).apply(this,arguments));var i=this.components[0];return o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"addComponent",this).apply(this,[i]),r}},{key:"removeComponent",value:function(e){var t=this.components&&3<this.components.length;if(t){this.components.pop(),o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"removeComponent",this).apply(this,arguments);var r=this.components[0];o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"addComponent",this).apply(this,[r])}return t}},{key:"getArea",value:function(){var e=0;if(this.components&&2<this.components.length){for(var t=0,r=0,n=this.components.length;r<n-1;r++){var i=this.components[r],a=this.components[r+1];t+=(i.x+a.x)*(a.y-i.y)}e=-t/2}return e}},{key:"getVertices",value:function(e){return!0===e?[]:this.components.slice(0,this.components.length-1)}}]),a}();a.SuperMap.Geometry.LinearRing=l},function(e,t,r){"use strict";e.exports=function(e){return 1<Math.abs(e)&&(e=1<e?1:-1),Math.asin(e)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=e*t;return r/Math.sqrt(1-n*n)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetFeaturesServiceBase=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),o=r(1),s=r(3),l=r(6),u=r(16);var a=t.GetFeaturesServiceBase=function(e){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));t=t||{},r.returnContent=!0,r.fromIndex=0,r.toIndex=19,r.maxFeatures=null,r.format=s.DataFormat.GEOJSON,t&&o.Util.extend(r,t);var n,i=r;return t&&t.format&&(i.format=t.format.toUpperCase()),n=i.url.substr(i.url.length-1,1),i.url+="/"==n?"featureResults.json?":"/featureResults.json?",r.CLASS_NAME="SuperMap.GetFeaturesServiceBase",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,l.CommonServiceBase),n(a,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this);var t=this;t.returnContent=null,t.fromIndex=null,t.toIndex=null,t.maxFeatures=null,t.format=null}},{key:"processAsync",value:function(e){if(e){var t,r=this,n=!0;r.returnContent=e.returnContent,r.fromIndex=e.fromIndex,r.toIndex=e.toIndex,r.maxFeatures=e.maxFeatures,r.returnContent&&(r.url+="returnContent="+r.returnContent,n=!1),null!=r.fromIndex&&null!=r.toIndex&&!isNaN(r.fromIndex)&&!isNaN(r.toIndex)&&0<=r.fromIndex&&0<=r.toIndex&&!n&&(r.url+="&fromIndex="+r.fromIndex+"&toIndex="+r.toIndex),e.returnCountOnly&&(r.url+="&returnCountOnly="+e.returnContent),t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){if(e=o.Util.transformResult(e),this.format===s.DataFormat.GEOJSON&&e.features){var t=new u.GeoJSON;e.features=JSON.parse(t.write(e.features))}this.events.triggerEvent("processCompleted",{result:e})}}]),a}();i.SuperMap.GetFeaturesServiceBase=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetFeaturesParametersBase=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.GetFeaturesParametersBase=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetNames=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnCountOnly=!1,this.maxFeatures=null,this.aggregations=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"}return n(t,[{key:"destroy",value:function(){var e=this;e.datasetNames=null,e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.maxFeatures=null,e.aggregation&&(e.aggregation=null)}}]),t}();i.SuperMap.GetFeaturesParametersBase=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacilityAnalyst3DParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.FacilityAnalyst3DParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters"}return n(t,[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null}}]),t}();i.SuperMap.FacilityAnalyst3DParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiPoint=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(31);var o=t.MultiPoint=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.componentTypes=["SuperMap.Geometry.Point"],t.CLASS_NAME="SuperMap.Geometry.MultiPoint",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.Collection),n(r,[{key:"addPoint",value:function(e,t){this.addComponent(e,t)}},{key:"removePoint",value:function(e){this.removeComponent(e)}}]),r}();i.SuperMap.Geometry.MultiPoint=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LonLat=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(1);t.LonLat=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),i.Util.isArray(e)&&(t=e[1],e=e[0]),this.lon=e?i.Util.toFloat(e):0,this.lat=t?i.Util.toFloat(t):0,this.CLASS_NAME="SuperMap.LonLat"}return n(r,[{key:"toString",value:function(){return"lon="+this.lon+",lat="+this.lat}},{key:"toShortString",value:function(){return this.lon+","+this.lat}},{key:"clone",value:function(){return new r(this.lon,this.lat)}},{key:"add",value:function(e,t){if(null==e||null==t)throw new TypeError("LonLat.add cannot receive null values");return new r(this.lon+i.Util.toFloat(e),this.lat+i.Util.toFloat(t))}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.lon===e.lon&&this.lat===e.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(e.lon)&&isNaN(e.lat)),t}},{key:"wrapDateLine",value:function(e){var t=this.clone();if(e){for(;t.lon<e.left;)t.lon+=e.getWidth();for(;t.lon>e.right;)t.lon-=e.getWidth()}return t}},{key:"destroy",value:function(){this.lon=null,this.lat=null}}],[{key:"fromString",value:function(e){var t=e.split(",");return new r(t[0],t[1])}},{key:"fromArray",value:function(e){var t=i.Util.isArray(e);return new r(t&&e[0],t&&e[1])}}]),r}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Symbolizer=undefined;var n,i=r(2),s=(n=i)&&n.__esModule?n:{"default":n};t.Symbolizer=s["default"].Class.extend({initialize:function(e){this.properties=e.properties,this.type=e.type,this.layerName=e.layerName},render:function(e,t){this._renderer=e,this._container=e._container,this.options=t,e._initPath(this),e._updateStyle(this);var r=this.getElement();r&&this.layerName&&s["default"].DomUtil.addClass(r,this.layerName)},updateStyle:function(e,t){this.options=t,e._updateStyle(this)},getElement:function(){return this._path||this._renderer._container},_getPixelBounds:function(){for(var e=this._parts,t=s["default"].bounds([]),r=0;r<e.length;r++)for(var n=e[r],i=0;i<n.length;i++)t.extend(n[i]);var a=this._clickTolerance(),o=new s["default"].Point(a,a);return t.min._subtract(o),t.max._add(o),t},_clickTolerance:s["default"].Path.prototype._clickTolerance})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VectorFeatureType={LABEL:"LABEL",TEXT:"TEXT",POINT:"POINT",LINE:"LINE",REGION:"REGION"}},function(e,t,r){"use strict";var n=Math.PI/2,i=r(54);e.exports=function(e){return Math.abs(e)<n?e:e-i(e)*Math.PI}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,i){return e*i-t*Math.sin(2*i)+r*Math.sin(4*i)-n*Math.sin(6*i)}},function(e,t,r){"use strict";e.exports=function(e){return e*e*e*(35/3072)}},function(e,t,r){"use strict";e.exports=function(e){return.05859375*e*e*(1+.75*e)}},function(e,t,r){"use strict";e.exports=function(e){return.375*e*(1+.25*e*(1+.46875*e))}},function(e,t,r){"use strict";e.exports=function(e){return 1-.25*e*(1+e/16*(3+1.25*e))}},function(e,t,r){"use strict";e.exports=function(e){return e<0?-1:1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();t.Eventful=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful"}return n(e,[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(e,t,r){var n=this._handlers;return t&&e&&(n[e]||(n[e]=[]),n[e].push({h:t,one:!0,ctx:r||this})),this}},{key:"bind",value:function(e,t,r){var n=this._handlers;return t&&e&&(n[e]||(n[e]=[]),n[e].push({h:t,one:!1,ctx:r||this})),this}},{key:"unbind",value:function(e,t){var r=this._handlers;if(!e)return this._handlers={},this;if(t){if(r[e]){for(var n=[],i=0,a=r[e].length;i<a;i++)r[e][i].h!=t&&n.push(r[e][i]);r[e]=n}r[e]&&0===r[e].length&&delete r[e]}else delete r[e];return this}},{key:"dispatch",value:function(e){if(this._handlers[e]){var t=arguments,r=t.length;3<r&&(t=Array.prototype.slice.call(t,1));for(var n=this._handlers[e],i=n.length,a=0;a<i;){switch(r){case 1:n[a].h.call(n[a].ctx);break;case 2:n[a].h.call(n[a].ctx,t[1]);break;case 3:n[a].h.call(n[a].ctx,t[1],t[2]);break;default:n[a].h.apply(n[a].ctx,t)}n[a].one?(n.splice(a,1),i--):a++}}return this}},{key:"dispatchWithContext",value:function(e){if(this._handlers[e]){var t=arguments,r=t.length;4<r&&(t=Array.prototype.slice.call(t,1,t.length-1));for(var n=t[t.length-1],i=this._handlers[e],a=i.length,o=0;o<a;){switch(r){case 1:i[o].h.call(n);break;case 2:i[o].h.call(n,t[1]);break;case 3:i[o].h.call(n,t[1],t[2]);break;default:i[o].h.apply(n,t)}i[o].one?(i.splice(o,1),a--):o++}}return this}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryService=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),o=r(1),s=r(6),l=r(36),u=r(16),c=r(3);function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=t.QueryService=function(e){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=h(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));r.returnContent=!1,r.format=c.DataFormat.GEOJSON,t&&o.Util.extend(r,t),r.CLASS_NAME="SuperMap.QueryService";var n,i=r;return i.url?(t&&t.format&&(i.format=t.format.toUpperCase()),n=i.url.substr(i.url.length-1,1),i.url+="/"===n?"queryResults.json?":"/queryResults.json?",r):h(r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,s.CommonServiceBase),n(a,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this);this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){if(e instanceof l.QueryParameters){var t,r=this,n=null;r.returnContent=e.returnContent,t=r.getJsonParameters(e),r.returnContent?r.url+="returnContent="+r.returnContent:(n=e.returnCustomResult)&&(r.url+="returnCustomResult="+n),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){if((e=o.Util.transformResult(e))&&e.recordsets&&this.format===c.DataFormat.GEOJSON)for(var t=new u.GeoJSON,r=0,n=e.recordsets,i=n.length;r<i;r++)n[r].features&&(n[r].features=JSON.parse(t.write(n[r].features)));this.events.triggerEvent("processCompleted",{result:e})}},{key:"getQueryParameters",value:function(e){return new l.QueryParameters({customParams:e.customParams,expectCount:e.expectCount,networkType:e.networkType,queryOption:e.queryOption,queryParams:e.queryParams,startRecord:e.startRecord,prjCoordSys:e.prjCoordSys,holdTime:e.holdTime})}}]),a}();i.SuperMap.QueryService=a},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UGCSubLayer=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},o=n(0),s=n(1),l=n(235),u=n(82),c=n(278);n(3);var h=r.UGCSubLayer=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e=e||{};var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.datasetInfo=null,t.displayFilter=null,t.joinItems=null,t.representationField=null,t.ugcLayerType=null,t.CLASS_NAME="SuperMap.UGCSubLayer",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,l.UGCMapLayer),i(n,[{key:"fromJson",value:function(e){if(a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"fromJson",this).call(this,e),this.datasetInfo&&(this.datasetInfo=new c.DatasetInfo(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var t=[],r=0;r<this.joinItems.length;r++)t[r]=new u.JoinItem(this.joinItems[r]);this.joinItems=t}}},{key:"destroy",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this),s.Util.reset(this)}},{key:"toServerJSONObject",value:function(){var e=a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"toServerJSONObject",this).call(this);if(e.joinItems){for(var t=[],r=0;r<e.joinItems.length;r++)e.joinItems[r].toServerJSONObject&&(t[r]=e.joinItems[r].toServerJSONObject());e.joinItems=t}return e.datasetInfo&&e.datasetInfo.toServerJSONObject&&(e.datasetInfo=e.datasetInfo.toServerJSONObject()),e}}]),n}();o.SuperMap.UGCSubLayer=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataReturnOption=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3);var s=t.DataReturnOption=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.expectCount=1e3,this.dataset=null,this.dataReturnMode=o.DataReturnMode.RECORDSET_ONLY,this.deleteExistResultDataset=!0,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.DataReturnOption"}return n(t,[{key:"destroy",value:function(){this.expectCount=null,this.dataset=null,this.dataReturnMode=null,this.deleteExistResultDataset=null}}]),t}();i.SuperMap.DataReturnOption=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Polygon=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(31);r(22),r(21),r(38);var o=t.Polygon=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.componentTypes=["SuperMap.Geometry.LinearRing"],t.CLASS_NAME="SuperMap.Geometry.Polygon",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.Collection),n(r,[{key:"getArea",value:function(){var e=0;if(this.components&&0<this.components.length){e+=Math.abs(this.components[0].getArea());for(var t=1,r=this.components.length;t<r;t++)e-=Math.abs(this.components[t].getArea())}return e}}]),r}();i.SuperMap.Geometry.Polygon=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiPolygon=undefined;var n=r(0),i=r(31);var a=t.MultiPolygon=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.componentTypes=["SuperMap.Geometry.Polygon"],t.CLASS_NAME="SuperMap.Geometry.MultiPolygon",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.Collection),r}();n.SuperMap.Geometry.MultiPolygon=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiLineString=undefined;var n=r(0),i=r(31);r(21);var a=t.MultiLineString=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.componentTypes=["SuperMap.Geometry.LineString"],t.CLASS_NAME="SuperMap.Geometry.MultiLineString",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.Collection),r}();n.SuperMap.Geometry.MultiLineString=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayExt=t.FunctionExt=t.NumberExt=t.StringExt=undefined;var u=r(0);u.SuperMap.inherit=function(e,t){var r,n,i,a=function(){};for(a.prototype=t.prototype,e.prototype=new a,r=2,n=arguments.length;r<n;r++)"function"==typeof(i=arguments[r])&&(i=i.prototype),u.SuperMap.Util.extend(e.prototype,i)},u.SuperMap.mixin=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=0;r<n.length;r++)s(this,new n[r](t))},a=0;a<n.length;a++){var o=n[a];s(i,o),s(i.prototype,o.prototype),s(i.prototype,new o)}return i;function s(e,t){var r=Object.getOwnPropertyNames(t);Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t)));for(var n=0;n<r.length;n++){var i=r[n];if("constructor"!==i&&"prototype"!==i&&"name"!==i&&"length"!==i){var a=Object.getOwnPropertyDescriptor(t,i);window.ActiveXObject?Object.defineProperty(e,i,a||{}):Object.defineProperty(e,i,a)}}}};t.StringExt=u.SuperMap.String={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return-1!=e.indexOf(t)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){for(var t=e.split("-"),r=t[0],n=1,i=t.length;n<i;n++){var a=t[n];r+=a.charAt(0).toUpperCase()+a.substring(1)}return r},format:function(e,a,o){a||(a=window);return e.replace(u.SuperMap.String.tokenRegEx,function(e,t){for(var r,n=t.split(/\.+/),i=0;i<n.length;i++)0==i&&(r=a),r=r[n[i]];return"function"==typeof r&&(r=o?r.apply(null,o):r()),void 0===r?"undefined":r})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return u.SuperMap.String.numberRegEx.test(e)},numericIf:function(e){return u.SuperMap.String.isNumeric(e)?parseFloat(e):e}};var n=t.NumberExt=u.SuperMap.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var r=0;return 0<t&&(r=parseFloat(e.toPrecision(t))),r},format:function(e,t,r,n){t=void 0!==t?t:0,r=void 0!==r?r:u.SuperMap.Number.thousandsSeparator,n=void 0!==n?n:u.SuperMap.Number.decimalSeparator,null!=t&&(e=parseFloat(e.toFixed(t)));var i=e.toString().split(".");1===i.length&&null==t&&(t=0);var a,o=i[0];if(r)for(var s=/(-?[0-9]+)([0-9]{3})/;s.test(o);)o=o.replace(s,"$1"+r+"$2");if(0==t)a=o;else{var l=1<i.length?i[1]:"0";null!=t&&(l+=new Array(t-l.length+1).join("0")),a=o+n+l}return a}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(e){return n.limitSigDigs(this,e)});t.FunctionExt=u.SuperMap.Function={bind:function(t,r){var n=Array.prototype.slice.apply(arguments,[2]);return function(){var e=n.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(r,e)}},bindAsEventListener:function(t,r){return function(e){return t.call(r,e||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},t.ArrayExt=u.SuperMap.Array={filter:function(e,t,r){var n=[];if(Array.prototype.filter)n=e.filter(t,r);else{var i=e.length;if("function"!=typeof t)throw new TypeError;for(var a=0;a<i;a++)if(a in e){var o=e[a];t.call(r,o,a,e)&&n.push(o)}}return n}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoFeatureThemeLayer=undefined;var n,i=r(2),g=(n=i)&&n.__esModule?n:{"default":n},o=r(5),a=r(93),b=r(28);t.GeoFeatureThemeLayer=a.ThemeLayer.extend({options:{nodesClipPixel:2,isHoverAble:!1,isMultiHover:!1,isClickAble:!0,isAllowFeatureStyle:!1},initialize:function(e,t){a.ThemeLayer.prototype.initialize.call(this,e,t),g["default"].Util.setOptions(this,t);this.cache={},this.cacheFields=[],this.style={},this.highlightStyle={}},addFeatures:function(e){var t=this;t.fire("beforefeaturesadded",{features:e}),this.features=this.toFeature(e),t.isCustomSetMaxCacheCount||(t.maxCacheCount=5*t.features.length),t.renderer&&(t._map?t.redrawThematicFeatures(t._map.getBounds()):t.redrawThematicFeatures())},removeFeatures:function(e){this.clearCache(),a.ThemeLayer.prototype.removeFeatures.call(this,arguments)},removeAllFeatures:function(){this.clearCache(),a.ThemeLayer.prototype.removeAllFeatures.call(this,arguments)},redrawThematicFeatures:function(e){var t=this,r=t.renderer.getHoverOne(),n=null;if(r&&r.refDataID&&(n=r.refDataID),this.options.alwaysMapCRS&&e&&e instanceof g["default"].LatLngBounds){var i=this._map.options.crs;e=g["default"].bounds(i.project(e.getSouthWest()),i.project(e.getNorthEast()))}e=b.CommontypesConversion.toSuperMapBounds(e),t.renderer.clearAll();for(var a=t.features,o=t.cache,s=t.cacheFields,l=t._map.getZoom(),u=t.maxCacheCount,c=0,h=a.length;c<h;c++){var f=a[c],p=f.geometry.getBounds();if(!e||e.intersectsBounds(p)){var y=f.id+"_zoom_"+l.toString();if(o[y])o[y].updateAndAddShapes();else{var d=t.createThematicFeature(a[c]);if(!(d.getShapesCount()<1)&&(o[y]=d,s.push(y),s.length>u)){var v=s[0];s.splice(0,1),delete o[v]}}}}if(t.renderer.render(),n&&t.options.isHoverAble&&t.options.isMultiHover){var m=this.getShapesByFeatureID(n);this.renderer.updateHoverShapes(m)}},createThematicFeature:function(e){var t=this,r=t.getStyleByData(e);e.style&&t.isAllowFeatureStyle&&(r=o.CommonUtil.copyAttributesWithClip(e.style));var n={};n.nodesClipPixel=t.options.nodesClipPixel,n.isHoverAble=t.options.isHoverAble,n.isMultiHover=t.options.isMultiHover,n.isClickAble=t.options.isClickAble,n.highlightStyle=o.ShapeFactory.transformStyle(t.highlightStyle);for(var i=new o.ThemeVector(e,t,o.ShapeFactory.transformStyle(r),n),a=0;a<i.shapes.length;a++)t.renderer.addShape(i.shapes[a]);return i},redraw:function(){return this.clearCache(),a.ThemeLayer.prototype.redraw.apply(this,arguments)},clearCache:function(){this.cache={},this.cacheFields=[]},clear:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()},getCacheCount:function(){return this.cacheFields.length},setMaxCacheCount:function(e){isNaN(e)||(this.maxCacheCount=e,this.isCustomSetMaxCacheCount=!0)},getShapesByFeatureID:function(e){var t=[],r=this.renderer.getAllShapes();if(!e)return r;for(var n=0,i=r.length;n<i;n++){var a=r[n];a.refDataID&&e===a.refDataID&&t.push(a)}return t}})},function(e,t,r){"use strict";var s=Math.PI/2;e.exports=function(e,t){for(var r,n,i=.5*e,a=s-2*Math.atan(t),o=0;o<=15;o++)if(r=e*Math.sin(a),a+=n=s-2*Math.atan(t*Math.pow((1-r)/(1+r),i))-a,Math.abs(n)<=1e-10)return a;return-9999}},function(e,t,r){"use strict";var a=Math.PI/2;e.exports=function(e,t,r){var n=e*r,i=.5*e;return n=Math.pow((1-n)/(1+n),i),Math.tan(.5*(a-t))/n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Theme=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(22),o=r(129),s=r(45),l=r(1);var u=t.Theme=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),e&&t&&t.map&&t.renderer&&(this.id=l.Util.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=e,this.shapes=[],this.layer=t,this.CLASS_NAME="SuperMap.Feature.Theme")}return n(r,[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}},{key:"getLocalXY",value:function(e){var t=this.layer.map.getResolution(),r=this.layer.map.getExtent();return e instanceof a.Point||e instanceof o.GeoText?[e.x/t+-r.left/t,r.top/t-e.y/t]:e instanceof s.LonLat?[e.lon/t+-r.left/t,r.top/t-e.lat/t]:null}}]),r}();i.SuperMap.Feature=i.SuperMap.Feature||{},i.SuperMap.Feature.Theme=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmicPolygon=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(12),u=r(1),O=r(11);t.SmicPolygon=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.type="smicpolygon",t.holePolygonPointLists=null,t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.Shape),n(r,[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.style;t&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),e.save(),this.setContext(e,r),this.setTransform(e);var n=!1;"fill"!=r.brushType&&"both"!=r.brushType&&"undefined"!=typeof r.brushType||(e.beginPath(),"dashed"==r.lineType||"dotted"==r.lineType||"dot"==r.lineType||"dash"==r.lineType||"dashdot"==r.lineType||"longdash"==r.lineType||"longdashdot"==r.lineType?this.buildPath(e,{lineType:"solid",lineWidth:r.lineWidth,pointList:r.pointList}):(this.buildPath(e,r),n=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",r),e.fill(),this.setCtxGlobalAlpha(e,"reset",r)),0<r.lineWidth&&("stroke"==r.brushType||"both"==r.brushType)&&(n||(e.beginPath(),this.buildPath(e,r)),this.setCtxGlobalAlpha(e,"stroke",r),e.stroke(),this.setCtxGlobalAlpha(e,"reset",r)),this.drawText(e,r,this.style);var i=u.Util.cloneObject(r);if(i.pointList&&this.holePolygonPointLists&&0<this.holePolygonPointLists.length)for(var a=this.holePolygonPointLists,o=a.length,s=0;s<o;s++){var l=a[s];i.pointList=l,n=!(e.globalCompositeOperation="destination-out"),"fill"!=i.brushType&&"both"!=i.brushType&&"undefined"!=typeof i.brushType||(e.beginPath(),"dashed"==i.lineType||"dotted"==i.lineType||"dot"==i.lineType||"dash"==i.lineType||"dashdot"==i.lineType||"longdash"==i.lineType||"longdashdot"==i.lineType?this.buildPath(e,{lineType:"solid",lineWidth:i.lineWidth,pointList:i.pointList}):(this.buildPath(e,i),n=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",i),e.fill(),this.setCtxGlobalAlpha(e,"reset",i)),0<i.lineWidth&&("stroke"==i.brushType||"both"==i.brushType)?(n||(e.beginPath(),this.buildPath(e,i)),e.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(e,"stroke",i),e.stroke(),this.setCtxGlobalAlpha(e,"reset",i)):e.globalCompositeOperation="source-over"}e.restore()}},{key:"buildPath",value:function(e,t){t.showShadow&&(e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.pointList;if(!(n.length<2))if(t.smooth&&"spline"!==t.smooth){var i,a,o,s=O.SUtil.SUtil_smoothBezier(n,t.smooth,!0,t.smoothConstraint,r);e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var l=n.length,u=0;u<l;u++)i=s[2*u],a=s[2*u+1],o=[n[(u+1)%l][0]+r[0],n[(u+1)%l][1]+r[1]],e.bezierCurveTo(i[0],i[1],a[0],a[1],o[0],o[1])}else if("spline"===t.smooth&&(n=O.SUtil.SUtil_smoothSpline(n,!0,null,r)),t.lineType&&"solid"!=t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=c;var h=t.lineWidth||1,f=h,p=h;"dashed"===t.lineType&&(f*=5,p*=5,t.lineCap&&"butt"!==t.lineCap&&(f-=h,p+=h)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(f=1,p+=h),"dot"===t.lineType&&(p*=4,t.lineCap&&"butt"!==t.lineCap&&(f=1,p+=h)),"dash"===t.lineType&&(f*=4,p*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=h,p+=h)),"longdash"===t.lineType&&(f*=8,p*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=h,p+=h)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var y=1;y<n.length;y++)O.SUtil.SUtil_dashedLineTo(e,n[y-1][0]+r[0],n[y-1][1]+r[1],n[y][0]+r[0],n[y][1]+r[1],h,[f,p]);O.SUtil.SUtil_dashedLineTo(e,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],h,[f,p])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var d=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=d;var v=t.lineWidth||1,m=v,g=v,b=v,S=v;"dashdot"===t.lineType&&(m*=4,g*=4,S*=4,t.lineCap&&"butt"!==t.lineCap&&(m-=v,g+=v,b=1,S+=v)),"longdashdot"===t.lineType&&(m*=8,g*=4,S*=4,t.lineCap&&"butt"!==t.lineCap&&(m-=v,g+=v,b=1,S+=v)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var _=1;_<n.length;_++)O.SUtil.SUtil_dashedLineTo(e,n[_-1][0]+r[0],n[_-1][1]+r[1],n[_][0]+r[0],n[_][1]+r[1],v,[m,g,b,S]);O.SUtil.SUtil_dashedLineTo(e,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],v,[m,g,b,S])}}else{e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var P=1;P<n.length;P++)e.lineTo(n[P][0]+r[0],n[P][1]+r[1]);e.lineTo(n[0][0]+r[0],n[0][1]+r[1])}}},{key:"getRect",value:function(e,t){var r;if(t?r=t:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),r=this.refOriginalPosition),e.__rect)return e.__rect;for(var n,i=Number.MAX_VALUE,a=Number.MIN_VALUE,o=Number.MAX_VALUE,s=Number.MIN_VALUE,l=e.pointList,u=0,c=l.length;u<c;u++)l[u][0]+r[0]<i&&(i=l[u][0]+r[0]),l[u][0]+r[0]>a&&(a=l[u][0]+r[0]),l[u][1]+r[1]<o&&(o=l[u][1]+r[1]),l[u][1]+r[1]>s&&(s=l[u][1]+r[1]);return n="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(i-n/2),y:Math.round(o-n/2),width:a-i+n,height:s-o+n},e.__rect}}]),r}()},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=r.Config=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};i.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},i.catchBrushException=!1,i.debugMode=0},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();t.Vector=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector"}return n(e,[{key:"create",value:function(e,t){var r=new(0,this.ArrayCtor)(2);return r[0]=e||0,r[1]=t||0,r}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e}},{key:"set",value:function(e,t,r){return e[0]=t,e[1]=r,e}},{key:"add",value:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}},{key:"scaleAndAdd",value:function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}},{key:"sub",value:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}},{key:"len",value:function(e){return Math.sqrt(this.lenSquare(e))}},{key:"lenSquare",value:function(e){return e[0]*e[0]+e[1]*e[1]}},{key:"mul",value:function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}},{key:"div",value:function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}},{key:"dot",value:function(e,t){return e[0]*t[0]+e[1]*t[1]}},{key:"scale",value:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}},{key:"normalize",value:function(e,t){var r=this.len(t);return 0===r?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}},{key:"distance",value:function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}},{key:"distanceSquare",value:function(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}},{key:"negate",value:function(e,t){return e[0]=-t[0],e[1]=-t[1],e}},{key:"lerp",value:function(e,t,r,n){return e[0]=t[0]+n*(r[0]-t[0]),e[1]=t[1]+n*(r[1]-t[1]),e}},{key:"applyTransform",value:function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}},{key:"min",value:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}},{key:"max",value:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}},{key:"length",value:function(e){return this.len(e)}},{key:"lengthSquare",value:function(e){return this.lenSquare(e)}},{key:"dist",value:function(e,t){return this.distance(e,t)}},{key:"distSquare",value:function(e,t){return this.distanceSquare(e,t)}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Curve=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(69);t.Curve=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vector=new i.Vector,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve"}return n(e,[{key:"isAroundZero",value:function(e){return e>-this.EPSILON&&e<this.EPSILON}},{key:"isNotAroundZero",value:function(e){return e>this.EPSILON||e<-this.EPSILON}},{key:"cubicAt",value:function(e,t,r,n,i){var a=1-i;return a*a*(a*e+3*i*t)+i*i*(i*n+3*a*r)}},{key:"cubicDerivativeAt",value:function(e,t,r,n,i){var a=1-i;return 3*(((t-e)*a+2*(r-t)*i)*a+(n-r)*i*i)}},{key:"cubicRootAt",value:function(e,t,r,n,i,a){var o=n+3*(t-r)-e,s=3*(r-2*t+e),l=3*(t-e),u=e-i,c=s*s-3*o*l,h=s*l-9*o*u,f=l*l-3*s*u,p=0;if(this.isAroundZero(c)&&this.isAroundZero(h))if(this.isAroundZero(s))a[0]=0;else{var y=-l/s;0<=y&&y<=1&&(a[p++]=y)}else{var d=h*h-4*c*f;if(this.isAroundZero(d)){var v=h/c,m=-s/o+v,g=-v/2;0<=m&&m<=1&&(a[p++]=m),0<=g&&g<=1&&(a[p++]=g)}else if(0<d){var b=Math.sqrt(d),S=c*s+1.5*o*(-h+b),_=c*s+1.5*o*(-h-b),P=(-s-((S=S<0?-Math.pow(-S,this.ONE_THIRD):Math.pow(S,this.ONE_THIRD))+(_=_<0?-Math.pow(-_,this.ONE_THIRD):Math.pow(_,this.ONE_THIRD))))/(3*o);0<=P&&P<=1&&(a[p++]=P)}else{var O=(2*c*s-3*o*h)/(2*Math.sqrt(c*c*c)),T=Math.acos(O)/3,w=Math.sqrt(c),M=Math.cos(T),C=(-s-2*w*M)/(3*o),x=(-s+w*(M+this.THREE_SQRT*Math.sin(T)))/(3*o),E=(-s+w*(M-this.THREE_SQRT*Math.sin(T)))/(3*o);0<=C&&C<=1&&(a[p++]=C),0<=x&&x<=1&&(a[p++]=x),0<=E&&E<=1&&(a[p++]=E)}}return p}},{key:"cubicExtrema",value:function(e,t,r,n,i){var a=6*r-12*t+6*e,o=9*t+3*n-3*e-9*r,s=3*t-3*e,l=0;if(this.isAroundZero(o)){if(this.isNotAroundZero(a)){var u=-s/a;0<=u&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*o*s;if(this.isAroundZero(c))i[0]=-a/(2*o);else if(0<c){var h=Math.sqrt(c),f=(-a+h)/(2*o),p=(-a-h)/(2*o);0<=f&&f<=1&&(i[l++]=f),0<=p&&p<=1&&(i[l++]=p)}}return l}},{key:"cubicSubdivide",value:function(e,t,r,n,i,a){var o=(t-e)*i+e,s=(r-t)*i+t,l=(n-r)*i+r,u=(s-o)*i+o,c=(l-s)*i+s,h=(c-u)*i+u;a[0]=e,a[1]=o,a[2]=u,a[3]=h,a[4]=h,a[5]=c,a[6]=l,a[7]=n}},{key:"cubicProjectPoint",value:function(e,t,r,n,i,a,o,s,l,u,c){var h,f=this.vector.create(),p=this.vector.create(),y=this.vector.create(),d=.005,v=Infinity;f[0]=l,f[1]=u;for(var m=0;m<1;m+=.05){p[0]=this.cubicAt(e,r,i,o,m),p[1]=this.cubicAt(t,n,a,s,m);var g=this.vector.distSquare(f,p);g<v&&(h=m,v=g)}v=Infinity;for(var b=0;b<32&&!(d<this.EPSILON);b++){var S=h-d,_=h+d;p[0]=this.cubicAt(e,r,i,o,S),p[1]=this.cubicAt(t,n,a,s,S);var P=this.vector.distSquare(p,f);if(0<=S&&P<v)h=S,v=P;else{y[0]=this.cubicAt(e,r,i,o,_),y[1]=this.cubicAt(t,n,a,s,_);var O=this.vector.distSquare(y,f);_<=1&&O<v?(h=_,v=O):d*=.5}}return c&&(c[0]=this.cubicAt(e,r,i,o,h),c[1]=this.cubicAt(t,n,a,s,h)),Math.sqrt(v)}},{key:"quadraticAt",value:function(e,t,r,n){var i=1-n;return i*(i*e+2*n*t)+n*n*r}},{key:"quadraticDerivativeAt",value:function(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}},{key:"quadraticRootAt",value:function(e,t,r,n,i){var a=e-2*t+r,o=2*(t-e),s=e-n,l=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(o)){var u=-s/o;0<=u&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*a*s;if(this.isAroundZero(c)){var h=-o/(2*a);0<=h&&h<=1&&(i[l++]=h)}else if(0<c){var f=Math.sqrt(c),p=(-o+f)/(2*a),y=(-o-f)/(2*a);0<=p&&p<=1&&(i[l++]=p),0<=y&&y<=1&&(i[l++]=y)}}return l}},{key:"quadraticExtremum",value:function(e,t,r){var n=e+r-2*t;return 0===n?.5:(e-t)/n}},{key:"quadraticProjectPoint",value:function(e,t,r,n,i,a,o,s,l){var u,c=this.vector.create(),h=this.vector.create(),f=this.vector.create(),p=.005,y=Infinity;c[0]=o,c[1]=s;for(var d=0;d<1;d+=.05){h[0]=this.quadraticAt(e,r,i,d),h[1]=this.quadraticAt(t,n,a,d);var v=this.vector.distSquare(c,h);v<y&&(u=d,y=v)}y=Infinity;for(var m=0;m<32&&!(p<this.EPSILON);m++){var g=u-p,b=u+p;h[0]=this.quadraticAt(e,r,i,g),h[1]=this.quadraticAt(t,n,a,g);var S=this.vector.distSquare(h,c);if(0<=g&&S<y)u=g,y=S;else{f[0]=this.quadraticAt(e,r,i,b),f[1]=this.quadraticAt(t,n,a,b);var _=this.vector.distSquare(f,c);b<=1&&_<y?(u=b,y=_):p*=.5}}return l&&(l[0]=this.quadraticAt(e,r,i,u),l[1]=this.quadraticAt(t,n,a,u)),Math.sqrt(y)}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Transformable=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(11);t.Transformable=function(){function e(){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=(n=a.SUtil.Util_vector.create(),function(e){this.transform||(this.transform=a.SUtil.Util_matrix.create());var t=this.transform;function r(e){return-5e-5<e&&e<5e-5}a.SUtil.Util_vector.sub(n,e,this.position),r(n[0])&&r(n[1])||(a.SUtil.Util_vector.normalize(n,n),t[2]=n[0]*this.scale[1],t[3]=n[1]*this.scale[1],t[0]=n[1]*this.scale[0],t[1]=-n[0]*this.scale[0],t[4]=this.position[0],t[5]=this.position[1],this.decomposeTransform())})}return n(e,[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function e(e){return 5e-5<e||e<-5e-5}this.needLocalTransform=e(this.rotation[0])||e(this.position[0])||e(this.position[1])||e(this.scale[0]-1)||e(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var e=[0,0],t=this.transform||a.SUtil.Util_matrix.create();if(a.SUtil.Util_matrix.identity(t),this.needLocalTransform){if(i(this.scale[0])||i(this.scale[1])){e[0]=-this.scale[2]||0,e[1]=-this.scale[3]||0;var r=i(e[0])||i(e[1]);r&&a.SUtil.Util_matrix.translate(t,t,e),a.SUtil.Util_matrix.scale(t,t,this.scale),r&&(e[0]=-e[0],e[1]=-e[1],a.SUtil.Util_matrix.translate(t,t,e))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){e[0]=-this.rotation[1]||0,e[1]=-this.rotation[2]||0;var n=i(e[0])||i(e[1]);n&&a.SUtil.Util_matrix.translate(t,t,e),a.SUtil.Util_matrix.rotate(t,t,this.rotation[0]),n&&(e[0]=-e[0],e[1]=-e[1],a.SUtil.Util_matrix.translate(t,t,e))}}else 0!==this.rotation&&a.SUtil.Util_matrix.rotate(t,t,this.rotation);(i(this.position[0])||i(this.position[1]))&&a.SUtil.Util_matrix.translate(t,t,this.position)}this.transform=t,this.parent&&this.parent.needTransform&&(this.needLocalTransform?a.SUtil.Util_matrix.mul(this.transform,this.parent.transform,this.transform):a.SUtil.Util_matrix.copy(this.transform,this.parent.transform))}function i(e){return 5e-5<e||e<-5e-5}}},{key:"setTransform",value:function(e){if(this.needTransform){var t=this.transform;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var e=this.transform,t=e[0]*e[0]+e[1]*e[1],r=this.position,n=this.scale,i=this.rotation;o(t-1)&&(t=Math.sqrt(t));var a=e[2]*e[2]+e[3]*e[3];o(a-1)&&(a=Math.sqrt(a)),r[0]=e[4],r[1]=e[5],n[0]=t,n[1]=a,n[2]=n[3]=0,i[0]=Math.atan2(-e[1]/a,e[0]/t),i[1]=i[2]=0}function o(e){return 5e-5<e||e<-5e-5}}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sector=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(23);var o=t.Sector=function(e){function l(e,t,r,n,i,a,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,r,n,i,a,o));return s.x=isNaN(e)?0:e,s.y=isNaN(t)?0:t,s.r=isNaN(r)?0:r,s.startAngle=isNaN(n)?0:n,s.endAngle=isNaN(i)?0:i,s.r0=isNaN(a)?0:a,s.clockWise=o,s.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector",s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,a.ShapeParameters),n(l,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"destroy",this).call(this)}}]),l}();i.SuperMap.Feature=i.SuperMap.Feature||{},i.SuperMap.Feature.ShapeParameters.Sector=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Polygon=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(23);var o=t.Polygon=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.pointList=e,t.holePolygonPointLists=null,t.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.ShapeParameters),n(r,[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}}]),r}();i.SuperMap.Feature=i.SuperMap.Feature||{},i.SuperMap.Feature.ShapeParameters.Polygon=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Point=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(23);var o=t.Point=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.x=isNaN(e)?0:e,r.y=isNaN(t)?0:t,r.r=6,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.ShapeParameters),i(n,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}}]),n}();n.SuperMap.Feature=n.SuperMap.Feature||{},n.SuperMap.Feature.ShapeParameters.Point=o},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LabelMatrixCell=undefined;var i=n(0);var a=r.LabelMatrixCell=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="LabelMatrixCell"};i.SuperMap.LabelMatrixCell=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeOffset=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.ThemeOffset=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThemeOffset"}return n(r,[{key:"destroy",value:function(){this.offsetFixed=null,this.offsetX=null,this.offsetY=null}}],[{key:"fromObj",value:function(e){if(e){var t=new r;return a.Util.copy(t,e),t}}}]),r}();i.SuperMap.ThemeOffset=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeFlow=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(13);var s=t.ThemeFlow=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new o.ServerStyle,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThemeFlow"}return n(r,[{key:"destroy",value:function(){this.flowEnabled=null,this.leaderLineDisplayed=null,this.leaderLineStyle&&(this.leaderLineStyle.destroy(),this.leaderLineStyle=null)}}],[{key:"fromObj",value:function(e){if(e){var t=new r;return a.Util.copy(t,e),t.leaderLineStyle=o.ServerStyle.fromJson(e.leaderLineStyle),t}}}]),r}();i.SuperMap.ThemeFlow=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeLabel=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),f=r(1),a=r(25),p=r(246),y=r(116),d=r(77),v=r(76),m=r(245),g=r(243),b=r(242),o=r(3);var s=t.ThemeLabel=function(e){function h(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,"LABEL",e));return t.alongLine=new g.ThemeLabelAlongLine,t.background=new b.ThemeLabelBackground,t.flow=new d.ThemeFlow,t.items=null,t.uniqueItems=null,t.labelExpression=null,t.labelOverLengthMode=o.LabelOverLengthMode.NONE,t.matrixCells=null,t.maxLabelLength=256,t.numericPrecision=0,t.offset=new v.ThemeOffset,t.overlapAvoided=!0,t.rangeExpression=null,t.uniqueExpression=null,t.smallGeometryLabeled=!1,t.text=new m.ThemeLabelText,t.textSpace=0,e&&f.Util.extend(t,e),t.CLASS_NAME="SuperMap.ThemeLabel",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,a.Theme),n(h,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"destroy",this).call(this);var t=this;if(t.alongLine=null,t.background&&(t.background.destroy(),t.background=null),t.flow=null,t.items){for(var r=0,n=t.items,i=n.length;r<i;r++)n[r].destroy();t.items=null}if(t.uniqueItems){for(var a=0,o=t.uniqueItems,s=o.length;a<s;a++)o[a].destory();t.uniqueItems=null}t.labelExpression=null,t.labelOverLengthMode=null,t.matrixCells=null,t.maxLabelLength=null,t.numericPrecision=null,t.overlapAvoided=null,t.rangeExpression=null,t.uniqueExpression=null,t.offset&&(t.offset.destroy(),t.offset=null),t.overlapAvoided=null,t.smallGeometryLabeled=null,t.text&&(t.text.destroy(),t.text=null),t.textSpace=null}},{key:"toJSON",value:function(){return f.Util.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,this.alongLine&&(e.alongLine=this.alongLine.isAlongLine,e.alongLineDirection=this.alongLine.alongLineDirection,e.angleFixed=this.alongLine.angleFixed,e.isLabelRepeated=this.alongLine.isLabelRepeated,e.labelRepeatInterval=this.alongLine.labelRepeatInterval,e.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,e.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.text&&(e.maxTextHeight=this.text.maxTextHeight,e.maxTextWidth=this.text.maxTextWidth,e.minTextHeight=this.text.minTextHeight,e.minTextWidth=this.text.minTextWidth,e.uniformStyle=this.text.uniformStyle,e.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(e.labelBackShape=this.background.labelBackShape,e.backStyle=this.background.backStyle),e.labelOverLengthMode=this.labelOverLengthMode,e.maxLabelLength=this.maxLabelLength,e.smallGeometryLabeled=this.smallGeometryLabeled,e.rangeExpression=this.rangeExpression,e.uniqueExpression=this.uniqueExpression,e.numericPrecision=this.numericPrecision,e.items=this.items,e.uniqueItems=this.uniqueItems,e.labelExpression=this.labelExpression,e.overlapAvoided=this.overlapAvoided,e.matrixCells=this.matrixCells,e.textSpace=this.textSpace,e}}],[{key:"fromObj",value:function(e){if(e){var t=new h,r=e.items,n=e.uniqueItems,i=e.matrixCells;if(e.matrixCells=null,f.Util.copy(t,e),t.alongLine=g.ThemeLabelAlongLine.fromObj(e),t.background=b.ThemeLabelBackground.fromObj(e),t.flow=new d.ThemeFlow({flowEnabled:e.flowEnabled,leaderLineDisplayed:e.leaderLineDisplayed,leaderLineStyle:e.leaderLineStyle}),r){t.items=[];for(var a=0,o=r.length;a<o;a++)t.items.push(p.ThemeLabelItem.fromObj(r[a]))}if(n){t.uniqueItems=[];for(var s=0,l=n.length;s<l;s++)t.uniqueItems.push(y.ThemeUniqueItem.fromObj(n[s]))}if(i){t.matrixCells=[];for(var u=0,c=i.length;u<c;u++);}return t.offset=v.ThemeOffset.fromObj(e),t.text=m.ThemeLabelText.fromObj(e),t}}}]),h}();i.SuperMap.ThemeLabel=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThiessenAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.ThiessenAnalystParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters")}return n(t,[{key:"destroy",value:function(){this.clipRegion&&(this.clipRegion.destroy(),this.clipRegion=null),this.createResultDataset=null,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=null}}]),t}();i.SuperMap.ThiessenAnalystParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SurfaceAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(58),s=r(3),l=r(275);var u=t.SurfaceAnalystParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolution=0,this.extractParameter=new l.SurfaceAnalystParametersSetting,this.resultSetting=new o.DataReturnOption,this.surfaceAnalystMethod=s.SurfaceAnalystMethod.ISOLINE,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters"}return n(t,[{key:"destroy",value:function(){this.resolution=null,this.extractParameter&&(this.extractParameter.destroy(),this.extractParameter=null),this.resultSetting&&(this.resultSetting.destroy(),this.resultSetting=null),this.surfaceAnalystMethod=null}}]),t}();i.SuperMap.SurfaceAnalystParameters=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Route=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),c=r(38),h=r(21),f=r(287),o=r(31);var s=t.Route=function(e){function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,t));return r.id=null,r.center=null,r.style=null,r.length=null,r.maxM=null,r.minM=null,r.parts=null,r.points=null,r.type=null,r.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],t&&a.Util.extend(r,t),r.CLASS_NAME="SuperMap.Route",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,o.Collection),n(u,[{key:"toJson",value:function(){var e="{";if(null!=this.id&&this.id!=undefined&&(e+='"id":'+this.id+","),null!=this.center&&this.center!=undefined&&(e+='"center":'+this.center+","),null!=this.style&&this.style!=undefined&&(e+='"style":'+this.style+","),null!=this.length&&this.length!=undefined&&(e+='"length":'+this.length+","),null!=this.maxM&&this.maxM!=undefined&&(e+='"maxM":'+this.maxM+","),null!=this.minM&&this.minM!=undefined&&(e+='"minM":'+this.minM+","),null!=this.type&&this.type!=undefined&&(e+='"type":"'+this.type+'",'),null!=this.parts&&this.parts!=undefined){e+='"parts":['+this.parts[0];for(var t=1;t<this.parts.length;t++)e+=","+this.parts[t];e+="],"}if(null!=this.components&&0<this.components.length){e+='"points":[';for(var r=0,n=this.components.length;r<n;r++)for(var i=0,a=this.components[r].components.length;i<a;i++)e+=this.components[r].components[i].toJson()+",";e=e.replace(/,$/g,""),e+="]"}return e=e.replace(/,$/g,""),e+="}"}},{key:"destroy",value:function(){var e=this;e.id=null,e.center=null,e.style=null,e.length=null,e.maxM=null,e.minM=null,e.type=null,e.parts=null,e.components.length=0,e.components=null,e.componentTypes=null}}],[{key:"fromJson",value:function(e){if(e){var t=e.parts||[],r=e.points||[],n=t.length,i=[];if(!(0<n))return null;for(var a=0,o=0,s=[];a<n;a++){for(var l=0;l<t[a];l++)s.push(f.PointWithMeasure.fromJson(r[o+l]));o+=t[a],s[0].equals(s[t[a]-1])?i.push(new c.LinearRing(s)):i.push(new h.LineString(s)),s=[]}return new u(i,{id:e.id,center:e.center,style:e.style,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type,parts:e.parts})}}}]),u}();i.SuperMap.Route=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JoinItem=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.JoinItem=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.foreignTableName=null,this.joinFilter=null,this.joinType=null,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.JoinItem"}return n(t,[{key:"destroy",value:function(){this.foreignTableName=null,this.joinFilter=null,this.joinType=null}},{key:"toServerJSONObject",value:function(){var e={};return e=a.Util.copyAttributes(e,this)}}]),t}();i.SuperMap.JoinItem=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPortalServiceBase=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(3),o=r(37),s=r(128),l=r(20);var u=t.IPortalServiceBase=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.serviceUrl=e,this.serverType=a.ServerType.iPortal,this.CLASS_NAME="SuperMap.iPortalServiceBase"}return n(t,[{key:"request",value:function(e,t,r,n){return t=this.createCredentialUrl(t),l.FetchRequest.commit(e,t,r,n).then(function(e){return e.json()})}},{key:"createCredentialUrl",value:function(e){var t=e,r=this.getCredential();if(r){var n=t.substring(t.length-1,t.length);-1<t.indexOf("?")&&"?"===n?t+=r.getUrlParameters():-1<t.indexOf("?")&&"?"!==n?t+="&"+r.getUrlParameters():t+="?"+r.getUrlParameters()}return t}},{key:"getCredential",value:function(){var e,t=o.SecurityManager.getToken(this.serviceUrl);return(e=t?new s.Credential(t,"token"):null)||(e=(t=this.getKey())?new s.Credential(t,"key"):null),e}},{key:"getKey",value:function(){}}]),t}();i.SuperMap.iPortalServiceBase=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(0),o=r(303),s=r(1);var i=t.Vector=function(e){function i(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,null,null,t));return n.fid=null,n.geometry=e||null,n.attributes={},t&&(n.attributes=s.Util.extend(n.attributes,t)),n.bounds=null,n.state=null,n.style=r||null,n.url=null,n.lonlat=null,n.CLASS_NAME="SuperMap.Feature.Vector",a.SuperMap.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"},i.style={"default":{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},"delete":{display:"none"}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,o.Feature),n(i,[{key:"destroy",value:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){return new i(this.geometry?this.geometry.clone():null,this.attributes,this.style)}},{key:"toState",value:function(e){if(e===a.SuperMap.State.UPDATE)switch(this.state){case a.SuperMap.State.UNKNOWN:case a.SuperMap.State.DELETE:this.state=e;break;case a.SuperMap.State.UPDATE:case a.SuperMap.State.INSERT:}else if(e===a.SuperMap.State.INSERT)switch(this.state){case a.SuperMap.State.UNKNOWN:break;default:this.state=e}else if(e===a.SuperMap.State.DELETE)switch(this.state){case a.SuperMap.State.INSERT:case a.SuperMap.State.DELETE:break;case a.SuperMap.State.UNKNOWN:case a.SuperMap.State.UPDATE:this.state=e}else e===a.SuperMap.State.UNKNOWN&&(this.state=e)}}]),i}();a.SuperMap.Feature.Vector=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Events=undefined;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(86),l=r(304),u=r(62),c=r(1);var s=t.Events=function(){function s(e,t,r,n,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=e,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=n,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,c.Util.extend(this,i),null!=r)for(var a=0,o=r.length;a<o;a++)this.addEventType(r[a]);null!=t&&this.attachToElement(t),this.CLASS_NAME="SuperMap.Events"}return n(s,[{key:"destroy",value:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(l.Event.stopObservingElement(this.element),this.element.hasScrollEvent&&l.Event.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(e){this.listeners[e]||(this.eventTypes.push(e),this.listeners[e]=[])}},{key:"attachToElement",value:function(e){this.element?l.Event.stopObservingElement(this.element):(this.eventHandler=u.FunctionExt.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=u.FunctionExt.bind(this.clearMouseCache,this)),this.element=e;for(var t=0,r=this.BROWSER_EVENTS.length;t<r;t++){var n=this.BROWSER_EVENTS[t];this.addEventType(n),l.Event.observe(e,n,this.eventHandler)}l.Event.observe(e,"dragstart",l.Event.stop)}},{key:"on",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])}},{key:"register",value:function(e,t,r,n){if(e in s&&!this.extensions[e]&&(this.extensions[e]=new s[e](this)),null!=r&&-1!==c.Util.indexOf(this.eventTypes,e)){null==t&&(t=this.object);var i=this.listeners[e];i||(i=[],this.listeners[e]=i,this.extensionCount[e]=0);var a={obj:t,func:r};n?(i.splice(this.extensionCount[e],0,a),"object"===(void 0===n?"undefined":o(n))&&n.extension&&this.extensionCount[e]++):i.push(a)}}},{key:"registerPriority",value:function(e,t,r){this.register(e,t,r,!0)}},{key:"un",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])}},{key:"unregister",value:function(e,t,r){null==t&&(t=this.object);var n=this.listeners[e];if(null!=n)for(var i=0,a=n.length;i<a;i++)if(n[i].obj===t&&n[i].func===r){n.splice(i,1);break}}},{key:"remove",value:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])}},{key:"triggerEvent",value:function(e,t){var r,n=this.listeners[e];if(!n||0==n.length)return undefined;null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e);for(var i=0,a=(n=n.slice()).length;i<a;i++){var o=n[i];if((r=o.func.apply(o.obj,[t]))!=undefined&&0==r)break}return this.fallThrough||l.Event.stop(t,!0),r}},{key:"handleBrowserEvent",value:function(e){var t=e.type,r=this.listeners[t];if(r&&0!=r.length){var n=e.touches;if(n&&n[0]){for(var i,a=0,o=0,s=n.length,l=0;l<s;++l)a+=(i=n[l]).clientX,o+=i.clientY;e.clientX=a/s,e.clientY=o/s}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var e=document.body;e&&(0==e.scrollTop&&0==e.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(e){if(this.includeXY?this.element.hasScrollEvent||(l.Event.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=c.Util.getViewportElement();this.element.scrolls=[t.scrollLeft,t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=c.Util.pagePosition(this.element)),new a.Pixel(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}]),s}();i.SuperMap.Events=s,i.SuperMap.Events.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pixel=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0);var a=t.Pixel=function(){function n(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.x=e?parseFloat(e):0,this.y=t?parseFloat(t):0,this.mode=r,this.CLASS_NAME="SuperMap.Pixel",n.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"}}return i(n,[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new n(this.x,this.y,this.mode)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"distanceTo",value:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}},{key:"add",value:function(e,t){if(null==e||null==t)throw new TypeError("Pixel.add cannot receive null values");return new n(this.x+e,this.y+t)}},{key:"offset",value:function(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}]),n}();n.SuperMap.Pixel=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorTileFormat=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=t.VectorTileFormat={JSON:"JSON",MVT:"MVT",PBF:"PBF"};a["default"].supermap.VectorTileFormat=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolyBase=undefined;var n,i=r(2),l=(n=i)&&n.__esModule?n:{"default":n};t.PolyBase={_makeFeatureParts:function(e,t){t=t||{x:1,y:1};var r,n=e.geometry;this._parts=[];for(var i=0;i<n.length;i++){for(var a=n[i],o=[],s=0;s<a.length;s++)r=a[s],o.push(l["default"].point(r).scaleBy(t));this._parts.push(o)}},makeInteractive:function(){this._pxBounds=this._getPixelBounds()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextSymbolizer=undefined;var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=r(2),l=(n=a)&&n.__esModule?n:{"default":n},o=r(46),s=r(90),u=r(91);var c=t.TextSymbolizer=l["default"].Path.extend({includes:o.Symbolizer.prototype,options:{color:"white",fillColor:"black",fill:!0,fillOpacity:1,opacity:.6,weight:1,rotation:0,stroke:!0,fontFamily:"Arial Unicode MS Regular",fontSize:14,fontWeight:"normal",textAlign:"center",offsetX:1,offsetY:1},initialize:function(e,t){o.Symbolizer.prototype.initialize.call(this,e),this._makeFeatureParts(e,t),this.options.offsetX=t||1,this.options.offsetY=t||1},render:function(e,t){if(this.properties.texts&&(this._text=this.properties.texts[0]),!this._text){var r=this.properties.attributes;this._text=r&&this.properties.textField&&r[this.properties.textField]||""}var n=this.options;this._pxBounds=l["default"].bounds(this._point,this._point),o.Symbolizer.prototype.render.apply(this,[e,t]),this.options=l["default"].Util.extend(n,t),this._updatePath()},_makeFeatureParts:function(e,t){t=t||{x:1,y:1};var r=e.geometry[0];"object"===i(r[0])&&"x"in r[0]?this._point=l["default"].point(r[0]).scaleBy(t):this._point=l["default"].point(r).scaleBy(t),this._empty=l["default"].Util.falseFn},makeInteractive:function(){this._updateBounds()},updateStyle:function(e,t){return this._updateBounds(),o.Symbolizer.prototype.updateStyle.call(this,e,t)},_updateBounds:function(){var e=this._renderer._getTextWidth(this),t=[e/2,e/2];this._pxBounds=l["default"].bounds(this._point.subtract(t),this._point.add(t))},_updatePath:function(){this._renderer._updateText(this)},_containsPoint:function(e){return!1}});s.CanvasRenderer.include({_getTextWidth:function(e){return this._ctx.measureText(e._text).width},_updateText:function(e){if(this._drawing&&!e._empty()){var t=this.getContainer(),r=this._map.getSize();t.width=r.x,t.height=r.y,t.style.width=r.x+"px",t.style.height=r.y+"px";var n=this._ctx,i=e.options,a=i.offsetX||1,o=i.offsetY||1,s=e._point.subtract(l["default"].point(a,o));i.fill&&(this._drawnLayers[e._leaflet_id]=e,n.fillRect(0,0,r.x,r.y),n.font=[i.fontWeight?i.fontWeight:"normal",i.fontSize?i.fontSize:"14px",i.fontFamily?i.fontFamily:"Arial Unicode MS Regular,Microsoft Yahei"].join(" "),n.textAlign=i.textAlign,n.lineWidth=i.weight,n.fillStyle=i.fillColor,n.fillText(e._text,s.x,s.y),n.strokeStyle=i.color,n.strokeText(e._text,s.x,s.y),n.rotate(i.rotation))}}}),u.SVGRenderer.include({_getTextWidth:function(e){return e._path.getComputedTextLength()||0},_initPath:function(e){var t;c&&e instanceof c?(t=e._path=l["default"].SVG.create("text")).textContent=e._text:t=e._path=l["default"].SVG.create("path"),e.options.className&&l["default"].DomUtil.addClass(t,e.options.className),e.options.interactive&&l["default"].DomUtil.addClass(t,"leaflet-interactive"),this._updateStyle(e),this._layers[l["default"].stamp(e)]=e},_updateText:function(e){var t=e._path,r=e.options,n=r.offsetX||1,i=r.offsetY||1,a=e._point.subtract(l["default"].point(n,i));t.setAttribute("x",a.x),t.setAttribute("y",a.y),r.rotation=r.rotation||0,t.setAttribute("transform","rotate("+r.rotation/Math.PI*180+" "+a.x+" "+a.y+")"),t.setAttribute("text-anchor","center"===r.textAlign?"middle":r.textAlign),t.style.fontSize=r.fontSize,t.style.fontFamily=r.fontFamily,t.style.fontWeight=r.fontWeight||"normal",t.style.glyphOrientationVertical=r.rotation||"",r.stroke?(t.setAttribute("stroke",r.color),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-linejoin","round"),t.setAttribute("stroke-opacity",r.opacity),t.setAttribute("stroke-width",1<r.weight?r.weight/10:r.weight)):t.setAttribute("stroke","none"),r.fill?(t.setAttribute("fill",r.fillColor||r.color),t.setAttribute("fill-opacity",r.fillOpacity)):t.setAttribute("fill","none")}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasRenderer=undefined;var n,i=r(2),s=(n=i)&&n.__esModule?n:{"default":n};t.CanvasRenderer=s["default"].Canvas.extend({initialize:function(e,t,r){s["default"].Canvas.prototype.initialize.call(this,r),this._tileCoord=e,this._size=t,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._layers={},this._drawnLayers={},this._drawing=!0,r.interactive&&(this._container.style.pointerEvents="auto")},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},getOffset:function(){return this._tileCoord.scaleBy(this._size).subtract(this._map.getPixelOrigin())},onAdd:s["default"].Util.falseFn,addTo:function(e){this._map=e},removeFrom:function(e){delete this._map},_updateDashArray:function(e){var t=e.options.dashArray;if(t&&"string"==typeof t){var r,n=t.split(","),i=[];for(r=0;r<n.length;r++)i.push(Number(n[r]));e.options._dashArray=i}else e.options._dashArray=t},_onClick:function(e){var t,r,n=this._map.mouseEventToLayerPoint(e).subtract(this.getOffset());for(var i in this._layers)(t=this._layers[i]).options.interactive&&t._containsPoint(n)&&!this._map._draggableMoved(t)&&(r=t);r&&(s["default"].DomEvent.stop(e),this._fireEvent([r],e))},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e).subtract(this.getOffset());this._handleMouseHover(e,t)}},_updateIcon:function(n){if(this._drawing){var e=n.options,i=this._ctx,a=n._getImage();if(e.iconSize&&a.complete){var t=s["default"].point(e.iconSize),r=t&&t.divideBy(2,!0),o=n._point.subtract(r);i.drawImage(a,o.x,o.y,t.x,t.y)}else s["default"].DomEvent.on(a,"load",function(){var e=s["default"].point([a.width,a.height]),t=e&&e.divideBy(2,!0),r=n._point.subtract(t);i.drawImage(a,r.x,r.y,e.x,e.y)});this._drawnLayers[n._leaflet_id]=n}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SVGRenderer=undefined;var n,i=r(2),l=(n=i)&&n.__esModule?n:{"default":n};t.SVGRenderer=l["default"].SVG.extend({initialize:function(e,t,r){l["default"].SVG.prototype.initialize.call(this,r),this._tileCoord=e,this._size=t,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._container.setAttribute("viewBox",[0,0,this._size.x,this._size.y].join(" ")),this._layers={}},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},onAdd:l["default"].Util.falseFn,addTo:function(e){if(this._map=e,this.options.interactive)for(var t in this._layers){var r=this._layers[t];r._path.style.pointerEvents="auto",this._map._targets[l["default"].stamp(r._path)]=r}},removeFrom:function(e){var t=e||this._map;if(this.options.interactive)for(var r in this._layers){var n=this._layers[r];delete t._targets[l["default"].stamp(n._path)]}delete this._map},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup||(this._rootGroup=this._container),this._rootGroup.appendChild(e._path),this._layers[l["default"].stamp(e)]=e},_updateIcon:function(n){var i=n._path=l["default"].SVG.create("image"),e=n.options,t=e.iconUrl;if(e.iconSize){var r=l["default"].point(e.iconSize),a=r&&r.divideBy(2,!0),o=n._point.subtract(a);i.setAttribute("x",o.x),i.setAttribute("y",o.y),i.setAttribute("width",r.x+"px"),i.setAttribute("height",r.y+"px")}else{var s=new Image;s.src=t,l["default"].DomEvent.on(s,"load",function(){var e=l["default"].point([s.width,s.height]),t=e&&e.divideBy(2,!0),r=n._point.subtract(t);i.setAttribute("x",r.x),i.setAttribute("y",r.y),i.setAttribute("width",e.x+"px"),i.setAttribute("height",e.y+"px")})}i.setAttribute("href",t)}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.themeFeature=t.ThemeFeature=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(5);var s=t.ThemeFeature=a["default"].Class.extend({initialize:function(e,t){this.geometry=e,this.attributes=t},toFeature:function(){var e=this.geometry,t=[];if(e instanceof a["default"].Polygon)t=this.reverseLatLngs(e.getLatLngs()),e=new o.Polygon(t);else if(e instanceof a["default"].Polyline)t=this.reverseLatLngs(e.getLatLngs()),e=new o.LineString(t);else if(3===e.length)e=new o.GeoText(e[1],e[0],e[2]);else{if(e instanceof a["default"].LatLng)t=[e.lng,e.lat];else if(e instanceof a["default"].Point)t=[e.x,e.y];else if(e instanceof a["default"].CircleMarker){var r=e.getLatLng();t=[r.lng,r.lat]}else t=e;2===t.length&&(e=new o.GeometryPoint(t[0],t[1]))}return new o.GeometryVector(e,this.attributes)},reverseLatLngs:function(e){a["default"].Util.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)e[t]=[e[t].lng,e[t].lat];return e}}),l=t.themeFeature=function(e,t){return new s(e,t)};a["default"].supermap.themeFeature=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeLayer=undefined;var n,i=r(2),c=(n=i)&&n.__esModule?n:{"default":n},a=r(5),o=r(92);t.ThemeLayer=c["default"].Layer.extend({options:{alwaysMapCRS:!1,id:a.CommonUtil.createUniqueID("themeLayer_"),opacity:1,TFEvents:[],attribution:"Map Data <span>© <a href='http://support.supermap.com.cn/product/iServer.aspx' target='_blank'>SuperMap iServer</a></span> with <span>© <a href='http://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>"},initialize:function(e,t){c["default"].Util.setOptions(this,t),this.name=e,this.features=[],this.TFEvents=this.options.TFEvents,this.levelRenderer=new a.LevelRenderer,this.movingOffset=[0,0]},getEvents:function(){var e={zoomend:this._reset,moveend:this._reset,resize:this._resize};return this._map._zoomAnimated&&(e.zoomanim=this._zoomAnim),e},onRemove:function(e){c["default"].DomUtil.remove(this.container),e.off("mousemove",this.mouseMoveHandler)},onAdd:function(e){var r=this;if(r.map=r._map=e,r._initContainer(),r.levelRenderer){var t=e.getSize();r.container.style.width=t.x+"px",r.container.style.height=t.y+"px",r._updateOpacity(),r.renderer=r.levelRenderer.init(r.container),r.renderer.clear(),r.features&&0<r.features.length&&r._reset(),r.addTFEvents(),r.mouseMoveHandler=function(e){var t=e.layerPoint;r.currentMousePosition=c["default"].point(t.x+r.movingOffset[0],t.y+r.movingOffset[1])},e.on("mousemove",r.mouseMoveHandler),r.update()}else e.removeLayer(r)},addFeatures:function(e){},redrawThematicFeatures:function(e){},destroyFeatures:function(e){if(e===undefined&&(e=this.features),e){this.removeFeatures(e);for(var t=e.length-1;0<=t;t--)e[t].destroy()}},removeFeatures:function(e){var t=this;if(e&&0!==e.length){if(e===t.features)return t.removeAllFeatures();c["default"].Util.isArray(e)||(e=[e]);for(var r=[],n=e.length-1;0<=n;n--){var i=e[n],a=c["default"].Util.indexOf(t.features,i);-1!==a?t.features.splice(a,1):r.push(i)}for(var o=[],s=0,l=t.features.length;s<l;s++)i=t.features[s],o.push(i);t.features=[],t.addFeatures(o),t.renderer&&(t._map?t.redrawThematicFeatures(t._map.getBounds()):t.redrawThematicFeatures());var u=0==r.length;t.fire("featuresremoved",{features:r,succeed:u})}},removeAllFeatures:function(){this.renderer&&this.renderer.clear(),this.features=[],this.fire("featuresremoved",{features:[],succeed:!0})},getFeatures:function(){for(var e=this.features.length,t=new Array(e),r=0;r<e;++r)t[r]=this.features[r];return t},getFeatureBy:function(e,t){var r=null;for(var n in this.features)if(this.features[n][e]===t){r=this.features[n];break}return r},getFeatureById:function(e){return this.getFeatureBy("id",e)},getFeaturesByAttribute:function(e,t){var r,n=[];for(var i in this.features)(r=this.features[i])&&r.attributes&&r.attributes[e]===t&&n.push(r);return n},update:function(e){var t=this._map.containerPointToLayerPoint([0,0]);c["default"].DomUtil.setPosition(this.container,t);var r=this;r.renderer&&r.redrawThematicFeatures(e),r.currentMousePosition&&(r.currentMousePosition=c["default"].point(r.currentMousePosition.x-r.movingOffset[0],r.currentMousePosition.y-r.movingOffset[1])),r.movingOffset=[0,0],r._zoom=r._map.getZoom(),r._center=r._map.getCenter()},setOpacity:function(e){e!==this.options.opacity&&(e&&(this.options.opacity=e),this._updateOpacity())},redraw:function(){return!!this.renderer&&(this._map?this.redrawThematicFeatures(this._map.getBounds()):this.redrawThematicFeatures(),!0)},on:function(e,t,r){return this.renderer?this.renderer.on(e,t):c["default"].Layer.prototype.on.call(this,e,t),this},off:function(e,t,r){return this.renderer?this.renderer.un(e,t):c["default"].Layer.prototype.off.call(this,e,t),this},addTFEvents:function(){for(var e=this.TFEvents,t=e.length,r=0;r<t;r++)this.renderer.on(e[r][0],e[r][1])},getLocalXY:function(e){if(!this._map)return e;var t=e;c["default"].Util.isArray(e)&&(t=c["default"].point(e[0],e[1])),e instanceof c["default"].Point||(t=e instanceof a.GeometryPoint||e instanceof a.GeoText?c["default"].point(e.x,e.y):c["default"].point(e.lon,e.lat));var r=this._map.latLngToContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(t):c["default"].latLng(t.y,t.x));return[r.x,r.y]},toFeature:function(e){if(a.CommonUtil.isArray(e)){for(var t=[],r=0;r<e.length;r++)e[r]instanceof o.ThemeFeature?t.push(e[r].toFeature()):e[r]instanceof a.GeometryVector?t.push(e[r]):t.push(new a.ServerFeature.fromJson(e[r]).toFeature());return t}if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e.type))return(new a.GeoJSON).read(e,"FeatureCollection");throw new Error("features's type is not be supported.")},_initContainer:function(){var e=this.getPane(),t="themeLayer leaflet-layer leaflet-zoom-"+(this._map.options.zoomAnimation&&c["default"].Browser.any3d?"animated":"hide");this.container=c["default"].DomUtil.create("div",t,e);var r=c["default"].DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this.container.id=this.options.id,this.container.style[r]="50% 50%",this.container.style.position="absolute",this.container.style.zIndex=200},_zoomAnim:function(e){var t=this._map.getZoomScale(e.zoom),r=this._map._getCenterOffset(e.center)._multiplyBy(-t).subtract(this._map._getMapPanePos());c["default"].DomUtil.setTransform?c["default"].DomUtil.setTransform(this.container,r,t):this.container.style[c["default"].DomUtil.TRANSFORM]=c["default"].DomUtil.getTranslateString(r)+" scale("+t+")"},_updateOpacity:function(){a.CommonUtil.modifyDOMElement(this.container,null,null,null,null,null,null,this.options.opacity),null!==this._map&&this._map.fire("changelayer",{layer:this,property:"opacity"})},_reset:function(){var e=this._map.getBounds();this.update(e);var t=this._map.getSize(),r=this._map.containerPointToLayerPoint([0,0]);c["default"].DomUtil.setPosition(this.container,r),parseFloat(this.container.width)!==parseFloat(t.x)&&(this.container.width=t.x+"px"),parseFloat(this.container.height)!==parseFloat(t.y)&&(this.container.height=t.y+"px"),this.redraw()},_resize:function(){var e=this._map.getSize();this.container.style.width=e.x+"px",this.container.style.height=e.y+"px",this.renderer.resize()}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CartoCSSToLeaflet=undefined;var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(2),l=(n=a)&&n.__esModule?n:{"default":n};r(4);var b=r(5),o=r(151),S=r(150);var s=t.CartoCSSToLeaflet=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.cartoCSS=null,this.mapUrl=e}return i(t,[{key:"pretreatedCartoCSS",value:function(e,t){t&&(e=this.processCharacters(e)),this.cartoCSS=this.cartoCSS||{};var r=new b.CartoCSS(e).getShaders();if(r)for(var n=0;n<r.length;n++){var i=r[n].elements[0],a=r[n].attachment;this.cartoCSS[i.clean]=this.cartoCSS[i.clean]||{},this.cartoCSS[i.clean][a]=this.cartoCSS[i.clean][a]||[],this.cartoCSS[i.clean][a].push(r[n])}}},{key:"processCharacters",value:function(e){var t=e;if(t){for(var r in t=(t=t.replace(/[@]/gi,"___")).replace(/\\#/gi,"___"),this.layersInfo){var n=r.replace(/[@#\s]/gi,"___");t=t.replace(r.replace(/[#]/gi,"\\#"),n)}return t=(t=t.replace(/[#]/gi,"\n#")).replace(/\[zoom/gi,"[scale")}}},{key:"pickShader",value:function(e){if(!this.cartoCSS)return null;var t=e.replace(/[@#\s]/gi,"___");return this.cartoCSS[t]}},{key:"getDefaultStyle",value:function(e){var t={},r=o.DefaultStyle[e];for(var n in r){var i=r[n];t[n]=i}return t}},{key:"getStyleFromiPortalMarker",value:function(e){return 0==e.indexOf("./")?null:(0==e.indexOf("http://support.supermap.com.cn:8092/static/portal")&&(e=e.replace("http://support.supermap.com.cn:8092/static/portal","http://support.supermap.com.cn:8092/apps/viewer/static")),l["default"].icon({iconUrl:e,iconSize:l["default"].point(48,43),iconAnchor:l["default"].point(24,43),popupAnchor:l["default"].point(0,-43)}))}},{key:"getStyleFromiPortalStyle",value:function(e,t,r){var n=r?JSON.parse(r):null,i={};if("Point"===t||"MultiPoint"===t){var a=n||e.pointStyle;return a.externalGraphic?0==a.externalGraphic.indexOf("./")?null:(0==a.externalGraphic.indexOf("http://support.supermap.com.cn:8092/static/portal")&&(a.externalGraphic=a.externalGraphic.replace("http://support.supermap.com.cn:8092/static/portal","http://support.supermap.com.cn:8092/apps/viewer/static")),l["default"].icon({iconUrl:a.externalGraphic,iconSize:l["default"].point(a.graphicWidth,a.graphicHeight),iconAnchor:l["default"].point(-a.graphicXOffset,-a.graphicYOffset),popupAnchor:l["default"].point(0,-a.graphicHeight)})):(i.radius=a.pointRadius,i.color=a.strokeColor,i.opacity=a.strokeOpacity,i.lineCap=a.strokeLineCap,i.weight=a.strokeWidth,i.fillColor=a.fillColor,i.fillOpacity=a.fillOpacity,i.dashArray=this.dashStyle(a,1),i)}if("LineString"===t||"MultiLineString"===t||"Box"===t){var o=n||e.lineStyle;return i.color=o.strokeColor,i.opacity=o.strokeOpacity,i.fillOpacity=o.fillOpacity,i.lineCap=o.strokeLineCap,i.weight=o.strokeWidth,i.dashArray=this.dashStyle(o,1),i}if("Polygon"===t||"MultiPolygon"===t){var s=n||e.polygonStyle;return i.color=s.strokeColor,i.opacity=s.strokeOpacity,i.lineCap=s.strokeLineCap,i.weight=s.strokeWidth,i.fillColor=s.fillColor,i.fillOpacity=s.fillOpacity,i.dashArray=this.dashStyle(s,1),i}}},{key:"dashStyle",value:function(e,t){if(!e)return[];var r=e.strokeWidth*t,n=e.strokeDashstyle;switch(n){case"solid":return[];case"dot":return[1,4*r];case"dash":return[4*r,4*r];case"dashdot":return[4*r,4*r,1,4*r];case"longdash":return[8*r,4*r];case"longdashdot":return[8*r,4*r,1,4*r];default:return n?b.CommonUtil.isArray(n)?n:(n=b.StringExt.trim(n).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(","):[]}}},{key:"getValidStyleFromCarto",value:function(e,t,r,n,i){if(!r)return null;var a=n.type,o=n.properties.attributes||{},s=this.getDefaultStyle(a);i=i===undefined||i,o.FEATUREID=n.properties.id,o.SCALE=t;for(var l,u,c=S.CartoStyleMap[a],h=0,f=r.length;h<f;h++){var p=r[h],y=c[p.property],d=p.getValue(o,e,!0);if(null!==d&&y)if("fontSize"===y)l=(d=i?d*=.8:d)+"px",s.fontSize=l;else if("fontName"===y)u=d,s.fontName=u;else{if("globalCompositeOperation"===y){if(!(d=S.CompOpMap[d])||""===d)continue}else if(i&&"iconUrl"===y){d=(d=this.mapUrl+"/tileFeature/symbols/"+d.replace(/(___)/gi,"@")).replace(/(__0__0__)/gi,"__8__8__"),s.iconUrl=d;continue}"weight"===y&&d<1&&(d=Math.ceil(d)),s[y]=d}}return s}},{key:"getValidStyleFromLayerInfo",value:function(e,t){var r=e.type,n=this.getDefaultStyle(r),i=t&&t.layerStyle;if(!i)return n;if("POINT"===r){var a=Math.ceil(i.markerSize*b.SuperMap.DOTS_PER_INCH*b.SuperMap.INCHES_PER_UNIT.mm)||8,o={transparent:!0,resourceType:"SYMBOLMARKER",picWidth:a,picHeight:a,style:JSON.stringify(i)};return n.iconUrl=b.CommonUtil.urlAppend(this.mapUrl+"/symbol.png",b.CommonUtil.getParameterString(o)),n.iconSize=[a,a],n}if("TEXT"===r){if(i=e.properties.textStyle||t.layerStyle,n.fontWeight=i.bold?i.fontWeight:"normal",i.fontHeight){var s=i.fontHeight*b.SuperMap.DOTS_PER_INCH*b.SuperMap.INCHES_PER_UNIT.mm*.85;n.fontSize=s+"px",n.textHeight=s}if(i.fontName&&(n.fontFamily=i.fontName.indexOf("@")?i.fontName.replace(/@/g,""):i.fontName),i.align){var l=i.align.replace(/TOP|MIDDLE|BASELINE|BOTTOM/,"");n.textAlign=l.toLowerCase()}return n.weight=i.outline?i.outlineWidth:0,i.backColor&&(n.color="rgba("+i.backColor.red+","+i.backColor.green+","+i.backColor.blue+",1)"),i.foreColor&&(n.fillColor="rgba("+i.foreColor.red+","+i.foreColor.green+","+i.foreColor.blue+",1)"),n.rotation=i.rotation||0,n}var u=7<i.fillSymbolID?0:i.fillSymbolID,c=5<i.lineSymbolID?0:i.lineSymbolID;for(var h in i){var f=S.ServerStyleMap[h];if(f){var p=f.leafletStyle;switch(f.type){case"number":var y=i[h];f.unit&&(y=y*b.SuperMap.DOTS_PER_INCH*b.SuperMap.INCHES_PER_UNIT[f.unit]*2.5),n[p]=y;break;case"color":var d=i[h],v=void 0,m=1;if("fillColor"===p)0!==u&&1!==u||(m=1-u,v="rgba("+d.red+","+d.green+","+d.blue+","+m+")");else if("color"===p){if(0===c||5===c)m=0===c?1:0;else{var g=[1,0];switch(c){case 1:g=[9.7,3.7];break;case 2:g=[3.7,3.7];break;case 3:g=[9.7,3.7,2.3,3.7];break;case 4:g=[9.7,3.7,2.3,3.7,2.3,3.7]}n.lineDasharray=g}v="rgba("+d.red+","+d.green+","+d.blue+","+m+")"}n[p]=v}}}return t&&t.textField&&(n.textAlign="LEFT"),n}}]),t}();l["default"].supermap.CartoCSSToLeaflet=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wmtsLayer=t.WMTSLayer=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=t.WMTSLayer=a["default"].TileLayer.extend({options:{version:"1.0.0",style:"",tilematrixSet:"",format:"image/png",tileSize:256,matrixIds:null,layer:"",requestEncoding:"KVP",attribution:"with <span>© <a href='http://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>"},initialize:function(e,t){this._url=e,a["default"].setOptions(this,t);var r=this.options;if("REST"===r.requestEncoding){this.formatSuffix="."+({"image/png":"png","image/png8":"png","image/png24":"png","image/png32":"png",png:"png","image/jpeg":"jpg","image/jpg":"jpg",jpeg:"jpg",jpg:"jpg"}[r.format]||r.format.split("/").pop()||"png")}else r.requestEncoding="KVP"},getTileUrl:function(e){var t=this._getZoomForUrl(),r=this.options.matrixIds?this.options.matrixIds[t].identifier:t,n=a["default"].Util.template(this._url,{s:this._getSubdomain(e)}),i={service:"WMTS",request:"GetTile",version:this.options.version,style:this.options.style,tilematrixSet:this.options.tilematrixSet,format:this.options.format,width:this.options.tileSize,height:this.options.tileSize,layer:this.options.layer,tilematrix:r,tilerow:e.y,tilecol:e.x};if(this.options.tileProxy&&(n=this.options.tileProxy+n),"KVP"===this.options.requestEncoding)n+=a["default"].Util.getParamString(i,n);else if("REST"===this.options.requestEncoding){n+="/"+i.layer+"/"+i.style+"/"+i.tilematrixSet+"/"+i.tilematrix+"/"+i.tilerow+"/"+i.tilecol+this.formatSuffix}return n}}),s=t.wmtsLayer=function(e,t){return new o(e,t)};a["default"].supermap.wmtsLayer=s},function(e,t,r){"use strict";e.exports=function(e,t){var r;return 1e-7<e?(1-e*e)*(t/(1-(r=e*t)*r)-.5/e*Math.log((1-r)/(1+r))):2*t}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,i){var a,o;a=e/t;for(var s=0;s<15;s++)if(a+=o=(e-(t*a-r*Math.sin(2*a)+n*Math.sin(4*a)-i*Math.sin(6*a)))/(t-2*r*Math.cos(2*a)+4*n*Math.cos(4*a)-6*i*Math.cos(6*a)),Math.abs(o)<=1e-10)return a;return NaN}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=t*r;return e/Math.sqrt(1-n*n)}},function(e,t,r){"use strict";e.exports=function(e,t){var r,n;if(e=e||{},!t)return e;for(n in t)(r=t[n])!==undefined&&(e[n]=r);return e}},function(e,t,r){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(398),s=r(99),n=r(394),l=r(391);function u(e,t){if(!(this instanceof u))return new u(e);t=t||function(e){if(e)throw e};var r=o(e);if("object"===(void 0===r?"undefined":a(r))){var n=l(r),i=u.projections.get(n.projName);i?(s(this,n),s(this,i),this.init(),t(null,this)):t(e)}else t(e)}(u.projections=n).start(),e.exports=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nonEarthCRS=t.NonEarthCRS=t.nonProjection=t.NonProjection=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};a["default"].Projection={};var o=t.NonProjection=a["default"].Class.extend({initialize:function(e){this.bounds=e},project:function(e){return new a["default"].Point(e.lng,e.lat)},unproject:function(e){return new a["default"].LatLng(e.y,e.x)}}),s=t.nonProjection=function(e){return new o(e)},l=t.NonEarthCRS=a["default"].Class.extend({includes:a["default"].CRS,initialize:function(e){e.origin&&(this.transformation=new a["default"].Transformation(1,-e.origin.x,-1,e.origin.y)),this.projection=a["default"].Projection.NonProjection(e.bounds),this.bounds=e.bounds,this.origin=e.origin,this.resolutions=e.resolutions},scale:function(e){return this.resolutions&&0!==this.resolutions.length?1/this.resolutions[e]:1/(Math.max(this.bounds.getSize().x,this.bounds.getSize().y)/256)*Math.pow(2,e)},zoom:function(e){if(!this.resolutions||0===this.resolutions.length)return e/(1/(Math.max(this.bounds.getSize().x,this.bounds.getSize().y)/256));for(var t=0;t<this.resolutions.length;t++)if(1/this.resolutions==e)return t;return-1},distance:function(e,t){var r=t.lng-e.lng,n=t.lat-e.lat;return Math.sqrt(r*r+n*n)},infinite:!0}),u=t.nonEarthCRS=function(e){return new l(e)};a["default"].Projection.NonProjection=s,a["default"].CRS.NonEarthCRS=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmicRectangle=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(12);t.SmicRectangle=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.type="smicrectangle",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.Shape),n(r,[{key:"destroy",value:function(){this.type=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r,n,i,a,o,s=this.refOriginalPosition,l=t.x+s[0],u=t.y+s[1],c=t.width,h=t.height,f=t.radius;"number"==typeof f?r=n=i=a=f:f instanceof Array?1===f.length?r=n=i=a=f[0]:2===f.length?(r=i=f[0],n=a=f[1]):3===f.length?(r=f[0],n=a=f[1],i=f[2]):(r=f[0],n=f[1],i=f[2],a=f[3]):r=n=i=a=0,c<r+n&&(r*=c/(o=r+n),n*=c/o),c<i+a&&(i*=c/(o=i+a),a*=c/o),h<n+i&&(n*=h/(o=n+i),i*=h/o),h<r+a&&(r*=h/(o=r+a),a*=h/o),e.moveTo(l+r,u),e.lineTo(l+c-n,u),0!==n&&e.quadraticCurveTo(l+c,u,l+c,u+n),e.lineTo(l+c,u+h-i),0!==i&&e.quadraticCurveTo(l+c,u+h,l+c-i,u+h),e.lineTo(l+a,u+h),0!==a&&e.quadraticCurveTo(l,u+h,l,u+h-a),e.lineTo(l,u+r),0!==r&&e.quadraticCurveTo(l,u,l+r,u)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;t.radius?this._buildRadiusPath(e,t):(e.moveTo(t.x+r[0],t.y+r[1]),e.lineTo(t.x+r[0]+t.width,t.y+r[1]),e.lineTo(t.x+r[0]+t.width,t.y+r[1]+t.height),e.lineTo(t.x+r[0],t.y+r[1]+t.height),e.lineTo(t.x+r[0],t.y+r[1])),e.closePath()}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition;return e.__rect||(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+r[0]-t/2),y:Math.round(e.y+r[1]-t/2),width:e.width+t,height:e.height+t}),e.__rect}}]),r}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmicImage=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(12);var a=t.SmicImage=function(e){function g(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,e));return t.type="smicimage",t._imageCache={},t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(g,i.Shape),n(g,[{key:"destroy",value:function(){this.type=null,this._imageCache=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t,r){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,i=this.style||{};t&&(i=this.getHighlightStyle(i,this.highlightStyle||{}));var a=i.image,o=this;if("string"==typeof a){var s=a;this._imageCache[s]?a=this._imageCache[s]:((a=new Image).onload=function(){a.onload=null,clearTimeout(g._refreshTimeout),g._needsRefresh.push(o),g._refreshTimeout=setTimeout(function(){r&&r(g._needsRefresh),g._needsRefresh=[]},10)},a.src=s,this._imageCache[s]=a)}if(a){if("IMG"==a.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=a.readyState)return}else if(!a.complete)return;var l=i.width||a.width,u=i.height||a.height,c=i.x+n[0],h=i.y+n[1];if(!a.width||!a.height)return;if(e.save(),this.doClip(e),this.setContext(e,i),this.setTransform(e),i.sWidth&&i.sHeight){var f=i.sx+n[0]||0,p=i.sy+n[1]||0;e.drawImage(a,f,p,i.sWidth,i.sHeight,c,h,l,u)}else if(i.sx&&i.sy){var y=i.sx+n[0],d=i.sy+n[1],v=l-y,m=u-d;e.drawImage(a,y,d,v,m,c,h,l,u)}else e.drawImage(a,c,h,l,u);i.width||(i.width=l),i.height||(i.height=u),this.style.width||(this.style.width=l),this.style.height||(this.style.height=u),this.drawText(e,i,this.style),e.restore()}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return{x:e.x+t[0],y:e.y+t[1],width:e.width,height:e.height}}},{key:"clearCache",value:function(){this._imageCache={}}}]),g}();a._needsRefresh=[],a._refreshTimeout=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmicBrokenLine=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(12),a=r(67),_=r(11);t.SmicBrokenLine=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.brushTypeOnly="stroke",t.textPosition="end",t.type="smicbroken-line",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.Shape),n(r,[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.pointList;if(!(n.length<2)){var i=Math.min(t.pointList.length,Math.round(t.pointListLength||t.pointList.length));if(t.smooth&&"spline"!==t.smooth){var a,o,s,l=_.SUtil.SUtil_smoothBezier(n,t.smooth,!1,t.smoothConstraint,r);e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var u=0;u<i-1;u++)a=l[2*u],o=l[2*u+1],s=[n[u+1][0]+r[0],n[u+1][1]+r[1]],e.bezierCurveTo(a[0],a[1],o[0],o[1],s[0],s[1])}else if("spline"===t.smooth&&(i=(n=_.SUtil.SUtil_smoothSpline(n,null,null,r)).length),t.lineType&&"solid"!==t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t.lineWidth||1,h=c,f=c;"dashed"===t.lineType&&(h*=5,f*=5,t.lineCap&&"butt"!==t.lineCap&&(h-=c,f+=c)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(h=1,f+=c),"dot"===t.lineType&&(f*=4,t.lineCap&&"butt"!==t.lineCap&&(h=1,f+=c)),"dash"===t.lineType&&(h*=4,f*=4,t.lineCap&&"butt"!==t.lineCap&&(h-=c,f+=c)),"longdash"===t.lineType&&(h*=8,f*=4,t.lineCap&&"butt"!==t.lineCap&&(h-=c,f+=c)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var p=1;p<i;p++)_.SUtil.SUtil_dashedLineTo(e,n[p-1][0]+r[0],n[p-1][1]+r[1],n[p][0]+r[0],n[p][1]+r[1],c,[h,f])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var y=t.lineWidth||1,d=y,v=y,m=y,g=y;"dashdot"===t.lineType&&(d*=4,v*=4,g*=4,t.lineCap&&"butt"!==t.lineCap&&(d-=y,v+=y,m=1,g+=y)),"longdashdot"===t.lineType&&(d*=8,v*=4,g*=4,t.lineCap&&"butt"!==t.lineCap&&(d-=y,v+=y,m=1,g+=y)),y=(t.lineWidth||1)*("dashed"===t.lineType?5:1),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var b=1;b<i;b++)_.SUtil.SUtil_dashedLineTo(e,n[b-1][0]+r[0],n[b-1][1]+r[1],n[b][0]+r[0],n[b][1]+r[1],y,[d,v,m,g])}}else{e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var S=1;S<i;S++)e.lineTo(n[S][0]+r[0],n[S][1]+r[1])}}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return a.SmicPolygon.prototype.getRect.apply(this,[e,t])}}]),r}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmicText=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(12),p=r(11);t.SmicText=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.type="smictext",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.Shape),n(r,[{key:"destroy",value:function(){this.type=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=this.style;if(t&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),"undefined"!=typeof n.text&&!1!==n.text){e.save(),this.doClip(e),this.setContext(e,n),this.setTransform(e),n.textFont&&(e.font=n.textFont),e.textAlign=n.textAlign||"start",e.textBaseline=n.textBaseline||"middle";var i,a=(n.text+"").split("\n"),o=p.SUtil.Util_area.getTextHeight("ZH",n.textFont),s=this.getRectNoRotation(n),l=n.x+r[0];i="top"==n.textBaseline?s.y:"bottom"==n.textBaseline?s.y+o:s.y+o/2;for(var u=n.x+r[0],c=n.y+r[1],h=0,f=a.length;h<f;h++){switch(n.labelRect&&(e.fillRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=n.strokeColor,e.strokeRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=n.textColor),n.brushType){case"stroke":this.setCtxGlobalAlpha(e,"stroke",n),n.textRotation&&0!==n.textRotation?(e.save(),e.translate(u,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?e.strokeText(a[h],0,o*h,n.maxWidth):e.strokeText(a[h],0,o*h):"bottom"==n.textBaseline?n.maxWidth?e.strokeText(a[h],0,o*(h+1)-s.height,n.maxWidth):e.strokeText(a[h],0,o*(h+1)-s.height):n.maxWidth?e.strokeText(a[h],0,o*(h+1)-s.height/2-o/2,n.maxWidth):e.strokeText(a[h],0,o*(h+1)-s.height/2-o/2),e.restore()):n.maxWidth?e.strokeText(a[h],l,i,n.maxWidth):e.strokeText(a[h],l,i),this.setCtxGlobalAlpha(e,"reset",n);break;case"both":n.textRotation&&0!==n.textRotation?(e.save(),e.translate(u,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(a[h],0,o*h,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(a[h],0,o*h,n.maxWidth)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(a[h],0,o*h),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(a[h],0,o*h)):"bottom"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(a[h],0,o*(h+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(a[h],0,o*(h+1)-s.height,n.maxWidth)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(a[h],0,o*(h+1)-s.height),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(a[h],0,o*(h+1)-s.height)):n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(a[h],0,o*(h+1)-s.height/2-o/2,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(a[h],0,o*(h+1)-s.height/2-o/2,n.maxWidth)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(a[h],0,o*(h+1)-s.height/2-o/2),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(a[h],0,o*(h+1)-s.height/2-o/2)),this.setCtxGlobalAlpha(e,"reset",n),e.restore()):(n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(a[h],l,i,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(a[h],l,i,n.maxWidth)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(a[h],l,i),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(a[h],l,i)),this.setCtxGlobalAlpha(e,"reset",n));break;default:this.setCtxGlobalAlpha(e,"fill",n),n.textRotation&&0!==n.textRotation?(e.save(),e.translate(u,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?e.fillText(a[h],0,o*h,n.maxWidth):e.fillText(a[h],0,o*h):"bottom"==n.textBaseline?n.maxWidth?e.fillText(a[h],0,o*(h+1)-s.height,n.maxWidth):e.fillText(a[h],0,o*(h+1)-s.height):n.maxWidth?e.fillText(a[h],0,o*(h+1)-s.height/2-o/2,n.maxWidth):e.fillText(a[h],0,o*(h+1)-s.height/2-o/2),e.restore()):n.maxWidth?e.fillText(a[h],l,i,n.maxWidth):e.fillText(a[h],l,i),this.setCtxGlobalAlpha(e,"reset",n)}i+=o}e.restore()}}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;for(var t,r,n,i,a=this.getTextBackground(e,!0),o=0,s=a.length;o<s;o++){var l=a[o];0==o?(t=l[0],n=l[0],r=l[1],i=l[1]):(l[0]<t&&(t=l[0]),l[0]>n&&(n=l[0]),l[1]<r&&(r=l[1]),l[1]>i&&(i=l[1]))}return e.__rect={x:t,y:r,width:n-t,height:i-r},e.__rect}},{key:"getRectNoRotation",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition,n=p.SUtil.Util_area.getTextHeight("ZH",e.textFont),i=p.SUtil.Util_area.getTextWidth(e.text,e.textFont),a=p.SUtil.Util_area.getTextHeight(e.text,e.textFont),o=e.x+r[0];"end"==e.textAlign||"right"==e.textAlign?o-=i:"center"==e.textAlign&&(o-=i/2),t="top"==e.textBaseline?e.y+r[1]:"bottom"==e.textBaseline?e.y+r[1]-a:e.y+r[1]-a/2;var s,l=!1;if(e.maxWidth){var u=parseInt(e.maxWidth);u<i&&(s=i,l=!0,i=u),o=e.x+r[0],"end"==e.textAlign||"right"==e.textAlign?o-=i:"center"==e.textAlign&&(o-=i/2)}e.textFont&&(-1<e.textFont.toLowerCase().indexOf("italic")&&(i+=s&&!0===l?n/3*(i/s):n/3));return{x:o,y:t,width:i,height:a}}},{key:"getTextBackground",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;if((!t||!1===t)&&e.__textBackground)return e.__textBackground;var n=this.getRectNoRotation(e),i=e.x+r[0],a=e.y+r[1],o=[];if(e.textRotation&&0!==e.textRotation){var s=e.textRotation,l=this.getRotatedLocation(n.x,n.y,i,a,s),u=this.getRotatedLocation(n.x+n.width,n.y,i,a,s),c=this.getRotatedLocation(n.x+n.width,n.y+n.height,i,a,s),h=this.getRotatedLocation(n.x,n.y+n.height,i,a,s);o.push(l),o.push(u),o.push(c),o.push(h)}else{var f=[n.x,n.y],p=[n.x+n.width,n.y],y=[n.x+n.width,n.y+n.height],d=[n.x,n.y+n.height];o.push(f),o.push(p),o.push(y),o.push(d)}return e.__textBackground=o,e.__textBackground}},{key:"getRotatedLocation",value:function(e,t,r,n,i){var a,o,s=new Array;return t=-t,n=-n,i=-i,a=(e-r)*Math.cos(i/180*Math.PI)-(t-n)*Math.sin(i/180*Math.PI)+r,o=(e-r)*Math.sin(i/180*Math.PI)+(t-n)*Math.cos(i/180*Math.PI)+n,s[0]=a,s[1]=-o,s}}]),r}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Color=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(30);t.Color=function(){function h(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),this.util=new i.Util,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color"}return n(h,[{key:"customPalette",value:function(e){this.palette=e}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(e,t){return e|=0,(t=t||this.palette)[e%t.length]}},{key:"customHighlight",value:function(e){this.highlightColor=e}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(e,t,r,n,i,a,o){var s=this.util;this._ctx||(this._ctx=s.getContext());for(var l=this._ctx.createRadialGradient(e,t,r,n,i,a),u=0,c=o.length;u<c;u++)l.addColorStop(o[u][0],o[u][1]);return l.__nonRecursion=!0,l}},{key:"getLinearGradient",value:function(e,t,r,n,i){var a=this.util;this._ctx||(this._ctx=a.getContext());for(var o=this._ctx.createLinearGradient(e,t,r,n),s=0,l=i.length;s<l;s++)o.addColorStop(i[s][0],i[s][1]);return o.__nonRecursion=!0,o}},{key:"getStepColors",value:function(e,t,r){e=this.toRGBA(e),t=this.toRGBA(t),e=this.getData(e);for(var n=[],i=((t=this.getData(t))[0]-e[0])/r,a=(t[1]-e[1])/r,o=(t[2]-e[2])/r,s=(t[3]-e[3])/r,l=0,u=e[0],c=e[1],h=e[2],f=e[3];l<r;l++)n[l]=this.toColor([this.adjust(Math.floor(u),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(h),[0,255]),f.toFixed(4)-0],"rgba"),u+=i,c+=a,h+=o,f+=s;return u=t[0],c=t[1],h=t[2],f=t[3],n[l]=this.toColor([u,c,h,f],"rgba"),n}},{key:"getGradientColors",value:function(e,t){var r=[],n=e.length;if(t===undefined&&(t=20),1===n)r=this.getStepColors(e[0],e[0],t);else if(1<n)for(var i=0,a=n-1;i<a;i++){var o=this.getStepColors(e[i],e[i+1],t);i<a-1&&o.pop(),r=r.concat(o)}return r}},{key:"toColor",value:function(e,t){if(t=t||"rgb",e&&(3===e.length||4===e.length)){if(e=this.map(e,function(e){return 1<e?Math.ceil(e):e}),-1<t.indexOf("hex"))return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1);if(-1<t.indexOf("hs")){var r=this.map(e.slice(1,3),function(e){return e+"%"});e[1]=r[0],e[2]=r[1]}return-1<t.indexOf("a")?(3===e.length&&e.push(1),e[3]=this.adjust(e[3],[0,1]),t+"("+e.slice(0,4).join(",")+")"):t+"("+e.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(e){(e=this.trim(e)).indexOf("rgba")<0&&(e=this.toRGBA(e));var t=[],r=0;return e.replace(/[\d.]+/g,function(e){r<3?e|=0:e=+e,t[r++]=e}),t}},{key:"convert",value:function(e,t){if(!this.isCalculableColor(e))return e;var r=this.getData(e),n=r[3];return void 0===n&&(n=1),-1<e.indexOf("hsb")?r=this._HSV_2_RGB(r):-1<e.indexOf("hsl")&&(r=this._HSL_2_RGB(r)),-1<t.indexOf("hsb")||-1<t.indexOf("hsv")?r=this._RGB_2_HSB(r):-1<t.indexOf("hsl")&&(r=this._RGB_2_HSL(r)),r[3]=n,this.toColor(r,t)}},{key:"toRGBA",value:function(e){return this.convert(e,"rgba")}},{key:"toRGB",value:function(e){return this.convert(e,"rgb")}},{key:"toHex",value:function(e){return this.convert(e,"hex")}},{key:"toHSVA",value:function(e){return this.convert(e,"hsva")}},{key:"toHSV",value:function(e){return this.convert(e,"hsv")}},{key:"toHSBA",value:function(e){return this.convert(e,"hsba")}},{key:"toHSB",value:function(e){return this.convert(e,"hsb")}},{key:"toHSLA",value:function(e){return this.convert(e,"hsla")}},{key:"toHSL",value:function(e){return this.convert(e,"hsl")}},{key:"toName",value:function(e){for(var t in this._nameColors)if(this.toHex(this._nameColors[t])===this.toHex(e))return t;return null}},{key:"trim",value:function(e){return String(e).replace(/\s+/g,"")}},{key:"normalize",value:function(e){if(this._nameColors[e]&&(e=this._nameColors[e]),e=(e=this.trim(e)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(e)){var t=(3840&(e=parseInt(e.slice(1),16)))<<8,r=(240&e)<<4,n=15&e;e="#"+((1<<24)+(t<<4)+t+(r<<4)+r+(n<<4)+n).toString(16).slice(1)}return e}},{key:"lift",value:function(e,t){if(!this.isCalculableColor(e))return e;var r=0<t?1:-1;void 0===t&&(t=0),t=1<Math.abs(t)?1:Math.abs(t),e=this.toRGB(e);for(var n=this.getData(e),i=0;i<3;i++)n[i]=1===r?n[i]*(1-t)|0:(255-n[i])*t+n[i]|0;return"rgb("+n.join(",")+")"}},{key:"reverse",value:function(e){if(!this.isCalculableColor(e))return e;var t=this.getData(this.toRGBA(e));return t=this.map(t,function(e){return 255-e}),this.toColor(t,"rgb")}},{key:"mix",value:function(e,t,r){if(!this.isCalculableColor(e)||!this.isCalculableColor(t))return e;void 0===r&&(r=.5);for(var n=2*(r=1-this.adjust(r,[0,1]))-1,i=this.getData(this.toRGBA(e)),a=this.getData(this.toRGBA(t)),o=i[3]-a[3],s=((n*o==-1?n:(n+o)/(1+n*o))+1)/2,l=1-s,u=[],c=0;c<3;c++)u[c]=i[c]*s+a[c]*l;var h=i[3]*r+a[3]*(1-r);return h=Math.max(0,Math.min(1,h)),1===i[3]&&1===a[3]?this.toColor(u,"rgb"):(u[3]=h,this.toColor(u,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(e){var t,r,n=(e=this.normalize(e)).match(this.colorRegExp);if(null===n)throw new Error("The color format error");var i,a=[];if(n[2])i=[(t=n[2].replace("#","").split(""))[0]+t[1],t[2]+t[3],t[4]+t[5]],a=this.map(i,function(e){return h.prototype.adjust.call(this,parseInt(e,16),[0,255])});else if(n[4]){var o=n[4].split(",");r=o[3],i=o.slice(0,3),a=this.map(i,function(e){return e=Math.floor(0<e.indexOf("%")?2.55*parseInt(e,0):e),h.prototype.adjust.call(this,e,[0,255])}),void 0!==r&&a.push(this.adjust(parseFloat(r),[0,1]))}else if(n[5]||n[6]){var s=(n[5]||n[6]).split(","),l=parseInt(s[0],0)/360,u=s[1],c=s[2];r=s[3],(a=this.map([u,c],function(e){return h.prototype.adjust.call(this,parseFloat(e)/100,[0,1])})).unshift(l),void 0!==r&&a.push(this.adjust(parseFloat(r),[0,1]))}return a}},{key:"alpha",value:function(e,t){if(!this.isCalculableColor(e))return e;null===t&&(t=1);var r=this.getData(this.toRGBA(e));return r[3]=this.adjust(Number(t).toFixed(4),[0,1]),this.toColor(r,"rgba")}},{key:"map",value:function(e,t){if("function"!=typeof t)throw new TypeError;for(var r=e?e.length:0,n=0;n<r;n++)e[n]=t(e[n]);return e}},{key:"adjust",value:function(e,t){return e<=t[0]?e=t[0]:e>=t[1]&&(e=t[1]),e}},{key:"isCalculableColor",value:function(e){return e instanceof Array||"string"==typeof e}},{key:"_HSV_2_RGB",value:function(e){var t,r,n,i=e[0],a=e[1],o=e[2];if(0===a)n=r=t=255*o;else{var s=6*i;6===s&&(s=0);var l=0|s,u=o*(1-a),c=o*(1-a*(s-l)),h=o*(1-a*(1-(s-l))),f=0,p=0,y=0;0===l?(f=o,p=h,y=u):1===l?(f=c,p=o,y=u):2===l?(f=u,p=o,y=h):3===l?(f=u,p=c,y=o):4===l?(f=h,p=u,y=o):(f=o,p=u,y=c),t=255*f,r=255*p,n=255*y}return[t,r,n]}},{key:"_HSL_2_RGB",value:function(e){var t,r,n,i=e[0],a=e[1],o=e[2];if(0===a)n=r=t=255*o;else{var s,l=2*o-(s=o<.5?o*(1+a):o+a-a*o);t=255*this._HUE_2_RGB(l,s,i+1/3),r=255*this._HUE_2_RGB(l,s,i),n=255*this._HUE_2_RGB(l,s,i-1/3)}return[t,r,n]}},{key:"_HUE_2_RGB",value:function(e,t,r){return r<0&&(r+=1),1<r&&(r-=1),6*r<1?e+6*(t-e)*r:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}},{key:"_RGB_2_HSB",value:function(e){var t,r,n=e[0]/255,i=e[1]/255,a=e[2]/255,o=Math.min(n,i,a),s=Math.max(n,i,a),l=s-o,u=s;if(0===l)r=t=0;else{r=l/s;var c=((s-n)/6+l/2)/l,h=((s-i)/6+l/2)/l,f=((s-a)/6+l/2)/l;n===s?t=f-h:i===s?t=1/3+c-f:a===s&&(t=2/3+h-c),t<0&&(t+=1),1<t&&(t-=1)}return[t*=360,r*=100,u*=100]}},{key:"_RGB_2_HSL",value:function(e){var t,r,n=e[0]/255,i=e[1]/255,a=e[2]/255,o=Math.min(n,i,a),s=Math.max(n,i,a),l=s-o,u=(s+o)/2;if(0===l)r=t=0;else{r=u<.5?l/(s+o):l/(2-s-o);var c=((s-n)/6+l/2)/l,h=((s-i)/6+l/2)/l,f=((s-a)/6+l/2)/l;n===s?t=f-h:i===s?t=1/3+c-f:a===s&&(t=2/3+h-c),t<0&&(t+=1),1<t&&(t-=1)}return[t*=360,r*=100,u*=100]}}]),h}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmicPoint=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(12);t.SmicPoint=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.type="smicpoint",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.Shape),n(r,[{key:"destroy",value:function(){this.type=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;e.arc(t.x+r[0],t.y+r[1],t.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition;return e.__rect||(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+r[0]-e.r-t/2),y:Math.round(e.y+r[1]-e.r-t/2),width:2*e.r+t,height:2*e.r+t}),e.__rect}}]),r}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Circle=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(23);var o=t.Circle=function(e){function i(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t,r));return n.x=isNaN(e)?0:e,n.y=isNaN(t)?0:t,n.r=isNaN(r)?0:r,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.ShapeParameters),n(i,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"destroy",this).call(this)}}]),i}();i.SuperMap.Feature=i.SuperMap.Feature||{},i.SuperMap.Feature.ShapeParameters.Circle=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Line=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(23);var o=t.Line=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.pointList=e,t.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.ShapeParameters),n(r,[{key:"destroy",value:function(){this.pointList=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}}]),r}();i.SuperMap.Feature=i.SuperMap.Feature||{},i.SuperMap.Feature.ShapeParameters.Line=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UGCLayer=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(27);r(3);var s=t.UGCLayer=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.UGCLayer"}return n(t,[{key:"destroy",value:function(){a.Util.reset(this)}},{key:"fromJson",value:function(e){e=e||{},a.Util.extend(this,e);var t=this.bounds;t&&(this.bounds=new o.Bounds(t.leftBottom.x,t.leftBottom.y,t.rightTop.x,t.rightTop.y))}},{key:"toServerJSONObject",value:function(){var e={};return(e=a.Util.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}]),t}();i.SuperMap.UGCLayer=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeRange=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),o=r(1),s=r(25),l=r(236),u=r(3);var a=t.ThemeRange=function(e){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,"RANGE",e));return t.precision="1.0E-12",t.items=null,t.rangeExpression=null,t.rangeMode=u.RangeMode.EQUALINTERVAL,t.rangeParameter=0,t.colorGradientType=u.ColorGradientType.YELLOW_RED,e&&o.Util.extend(t,e),t.CLASS_NAME="SuperMap.ThemeRange",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,s.Theme),n(a,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this);var t=this;if(t.items){if(0<t.items.length)for(var r in t.items)t.items[r].destroy(),t.items[r]=null;t.items=null}t.rangeExpression=null,t.rangeMode=null,t.rangeParameter=null,t.colorGradientType=null}}],[{key:"fromObj",value:function(e){if(e){var t=new a;o.Util.copy(t,e);var r=e.items,n=r?r.length:0;t.items=[];for(var i=0;i<n;i++)t.items.push(l.ThemeRangeItem.fromObj(r[i]));return t}}}]),a}();i.SuperMap.ThemeRange=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeGraduatedSymbol=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(25),s=r(77),l=r(76),u=r(237),c=r(3);var h=t.ThemeGraduatedSymbol=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,"GRADUATEDSYMBOL",e));return t.baseValue=0,t.expression=null,t.flow=new s.ThemeFlow,t.graduatedMode=c.GraduatedMode.CONSTANT,t.offset=new l.ThemeOffset,t.style=new u.ThemeGraduatedSymbolStyle,e&&a.Util.extend(t,e),t.CLASS_NAME="SuperMap.ThemeGraduatedSymbol",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.Theme),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);var t=this;t.expression=null,t.flow&&(t.flow.destroy(),t.flow=null),t.graduatedMode=c.GraduatedMode.CONSTANT,t.offset&&(t.offset.destroy(),t.offset=null),t.style&&(t.style.destroy(),t.style=null)}},{key:"toJSON",value:function(){return a.Util.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,e.baseValue=this.baseValue,e.expression=this.expression,e.graduatedMode=this.graduatedMode,this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.style&&(e.negativeStyle=this.style.negativeStyle,e.negativeDisplayed=this.style.negativeDisplayed,e.positiveStyle=this.style.positiveStyle,e.zeroDisplayed=this.style.zeroDisplayed,e.zeroStyle=this.style.zeroStyle),e}}],[{key:"fromObj",value:function(e){if(e){var t=new i.SuperMap.ThemeGraduatedSymbol;return a.Util.copy(t,e),t.flow=s.ThemeFlow.fromObj(e),t.offset=l.ThemeOffset.fromObj(e),t.style=u.ThemeGraduatedSymbolStyle.fromObj(e),t}}}]),r}();i.SuperMap.ThemeGraduatedSymbol=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeDotDensity=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(25),s=r(13);var l=t.ThemeDotDensity=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,"DOTDENSITY",e));return t.dotExpression=null,t.style=new s.ServerStyle,t.value=null,e&&a.Util.extend(t,e),t.CLASS_NAME="SuperMap.ThemeDotDensity",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.Theme),n(r,[{key:"destroy",value:function(){this.dotExpression=null,this.value=null,this.style&&(this.style.destroy(),this.style=null)}},{key:"toServerJSONObject",value:function(){var e={};return(e=a.Util.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}],[{key:"fromObj",value:function(e){if(e){var t=new r;return a.Util.copy(t,e),t.style=s.ServerStyle.fromJson(e.style),t}}}]),r}();i.SuperMap.ThemeDotDensity=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeGraph=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),o=r(1),s=r(25),l=r(77),u=r(76),c=r(241),h=r(240),f=r(239),p=r(238),y=r(3);var a=t.ThemeGraph=function(e){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,"GRAPH",e));return t.barWidth=0,t.flow=new l.ThemeFlow,t.graduatedMode=y.GraduatedMode.CONSTANT,t.graphAxes=new c.ThemeGraphAxes,t.graphSize=new h.ThemeGraphSize,t.graphSizeFixed=!1,t.graphText=new f.ThemeGraphText,t.graphType=y.ThemeGraphType.AREA,t.graphAxesTextDisplayMode=y.GraphAxesTextDisplayMode.NONE,t.items=null,t.memoryKeys=null,t.negativeDisplayed=!1,t.offset=new u.ThemeOffset,t.overlapAvoided=!0,t.roseAngle=0,t.startAngle=0,e&&o.Util.extend(t,e),t.CLASS_NAME="SuperMap.ThemeGraph",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,s.Theme),n(a,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this);var t=this;if(t.barWidth=null,t.flow&&(t.flow.destroy(),t.flow=null),t.graduatedMode=null,t.graphAxes&&(t.graphAxes.destroy(),t.graphAxes=null),t.graphSize&&(t.graphSize.destroy(),t.graphSize=null),t.graphSizeFixed=null,t.graphText&&(t.graphText.destroy(),t.graphText=null),t.graphType=null,t.items){for(var r=0,n=t.items,i=n.length;r<i;r++)n[r].destroy();t.items=null}t.memoryKeys=null,t.negativeDisplayed=null,t.offset&&(t.offset.destroy(),t.offset=null),t.overlapAvoided=null,t.roseAngle=null,t.startAngle=null,t.graphAxesTextDisplayMode=null}},{key:"toJSON",value:function(){return o.Util.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,this.graphText&&(e.graphTextDisplayed=this.graphText.graphTextDisplayed,e.graphTextFormat=this.graphText.graphTextFormat,e.graphTextStyle=this.graphText.graphTextStyle),this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.graphAxes&&(e.axesColor=this.graphAxes.axesColor,e.axesDisplayed=this.graphAxes.axesDisplayed,e.axesGridDisplayed=this.graphAxes.axesGridDisplayed,e.axesTextDisplayed=this.graphAxes.axesTextDisplayed,e.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(e.maxGraphSize=this.graphSize.maxGraphSize,e.minGraphSize=this.graphSize.minGraphSize),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),e.barWidth=this.barWidth,e.graduatedMode=this.graduatedMode,e.graphSizeFixed=this.graphSizeFixed,e.graphType=this.graphType,e.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,e.items=this.items,e.memoryKeys=this.memoryKeys,e.negativeDisplayed=this.negativeDisplayed,e.overlapAvoided=this.overlapAvoided,e.roseAngle=this.roseAngle,e.startAngle=this.startAngle,e}}],[{key:"fromObj",value:function(e){var t=new a,r=e.items,n=r?r.length:0;o.Util.copy(t,e),t.items=[],t.flow=l.ThemeFlow.fromObj(e),t.graphAxes=c.ThemeGraphAxes.fromObj(e),t.graphSize=h.ThemeGraphSize.fromObj(e),t.graphText=f.ThemeGraphText.fromObj(e),t.offset=u.ThemeOffset.fromObj(e);for(var i=0;i<n;i++)t.items.push(p.ThemeGraphItem.fromObj(r[i]));return t}}]),a}();i.SuperMap.ThemeGraph=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeUnique=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),o=r(1),s=r(25),l=r(13),u=r(116),c=r(3);var a=t.ThemeUnique=function(e){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,"UNIQUE",e));return t.defaultStyle=new l.ServerStyle,t.items=null,t.uniqueExpression=null,t.colorGradientType=c.ColorGradientType.YELLOW_RED,e&&o.Util.extend(t,e),t.CLASS_NAME="SuperMap.ThemeUnique",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,s.Theme),n(a,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this);var t=this;if(t.uniqueExpression=null,t.colorGradientType=null,t.items){if(0<t.items.length)for(var r in t.items)t.items[r].destroy(),t.items[r]=null;t.items=null}t.defaultStyle&&(t.defaultStyle.destroy(),t.defaultStyle=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=o.Util.copyAttributes(e,this)).defaultStyle&&e.defaultStyle.toServerJSONObject&&(e.defaultStyle=e.defaultStyle.toServerJSONObject()),e.items){for(var t=[],r=e.items.length,n=0;n<r;n++)t.push(e.items[n].toServerJSONObject());e.items=t}return e}}],[{key:"fromObj",value:function(e){var t=new a,r=e.items,n=r?r.length:0;o.Util.extend(t,e),t.items=[],t.defaultStyle=new l.ServerStyle.fromJson(e.defaultStyle);for(var i=0;i<n;i++)t.items.push(new u.ThemeUniqueItem.fromObj(r[i]));return t}}]),a}();i.SuperMap.ThemeUnique=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeUniqueItem=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(13);var s=t.ThemeUniqueItem=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.caption=null,this.style=new o.ServerStyle,this.unique=null,this.visible=!0,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThemeUniqueItem"}return n(r,[{key:"destroy",value:function(){this.caption=null,this.unique=null,this.style&&(this.style.destroy(),this.style=null),this.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=a.Util.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}],[{key:"fromObj",value:function(e){var t=new r;return a.Util.copy(t,e),t.style=o.ServerStyle.fromJson(e.style),t}}]),r}();i.SuperMap.ThemeUniqueItem=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryThiessenAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(79),s=r(9);var l=t.GeometryThiessenAnalystParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.points=null,e&&a.Util.extend(t,e),t.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.ThiessenAnalystParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);if(this.points){for(var t=this.points.length-1;0<=t;t--)this.points[t].destroy();this.points=null}}}],[{key:"toObject",value:function(e,t){for(var r in e)"clipRegion"===r?t.clipRegion=s.ServerGeometry.fromGeometry(e.clipRegion):t[r]=e[r]}}]),r}();i.SuperMap.GeometryThiessenAnalystParameters=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryOverlayAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(119),s=r(9);var l=t.GeometryOverlayAnalystParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return e&&e.operateGeometry&&(t.operateGeometry=e.operateGeometry),e&&e.sourceGeometry&&(t.sourceGeometry=e.sourceGeometry),e&&e.operateGeometries&&(t.operateGeometries=e.operateGeometries),e&&e.sourceGeometries&&(t.sourceGeometries=e.sourceGeometries),e&&a.Util.extend(t,e),t.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.OverlayAnalystParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);var t=this;t.sourceGeometry&&(t.sourceGeometry.destroy(),t.sourceGeometry=null),t.sourceGeometries&&(t.sourceGeometries.destroy(),t.sourceGeometries=null),t.sourceGeometry&&(t.sourceGeometry.destroy(),t.sourceGeometry=null),t.operateGeometries&&(t.operateGeometries.destroy(),t.operateGeometries=null)}}],[{key:"toObject",value:function(e,t){for(var r in e)if("sourceGeometry"===r)t.sourceGeometry=s.ServerGeometry.fromGeometry(e.sourceGeometry);else if("sourceGeometries"===r){for(var n=[],i=0;i<e.sourceGeometries.length;i++)n.push(s.ServerGeometry.fromGeometry(e.sourceGeometries[i]));t.sourceGeometries=n}else if("operateGeometry"===r)t.operateGeometry=s.ServerGeometry.fromGeometry(e.operateGeometry);else if("operateGeometries"===r){for(var a=[],o=0;o<e.operateGeometries.length;o++)a.push(s.ServerGeometry.fromGeometry(e.operateGeometries[o]));t.operateGeometries=a}else t[r]=e[r]}}]),r}();i.SuperMap.GeometryOverlayAnalystParameters=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3);var s=t.OverlayAnalystParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.operation=o.OverlayOperationType.UNION,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.OverlayAnalystParameters"}return n(t,[{key:"destroy",value:function(){this.operation=null}}]),t}();i.SuperMap.OverlayAnalystParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryBufferAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(122),s=r(9);var l=t.GeometryBufferAnalystParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.sourceGeometry=null,t.sourceGeometrySRID=null,e&&a.Util.extend(t,e),t.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.BufferAnalystParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);this.sourceGeometry&&(this.sourceGeometry.destroy(),this.sourceGeometry=null)}}],[{key:"toObject",value:function(e,t){for(var r in e)if("bufferSetting"===r){var n={};for(var i in e.bufferSetting)n[i]=e.bufferSetting[i];t.analystParameter=n}else"sourceGeometry"===r?t.sourceGeometry=s.ServerGeometry.fromGeometry(e.sourceGeometry):t[r]=e[r]}}]),r}();i.SuperMap.GeometryBufferAnalystParameters=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatasourceConnectionInfo=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);r(3);var o=t.DatasourceConnectionInfo=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"}return n(t,[{key:"destroy",value:function(){var e=this;e.alias=null,e.connect=null,e.dataBase=null,e.driver=null,e.engineType=null,e.exclusive=null,e.OpenLinkTable=null,e.password=null,e.readOnly=null,e.server=null,e.user=null}}]),t}();i.SuperMap.DatasourceConnectionInfo=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(291);var s=t.BufferAnalystParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);this.bufferSetting=new o.BufferSetting,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.BufferAnalystParameters"}return n(t,[{key:"destroy",value:function(){this.bufferSetting&&(this.bufferSetting.destroy(),this.bufferSetting=null)}}]),t}();i.SuperMap.BufferAnalystParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AggregationParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.AggregationParameter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.aggName=null,this.aggType=null,this.aggFieldName=null,this.subAgg=null,this.CLASS_NAME="SuperMap.AggregationParameter",a.Util.extend(this,e)}return n(t,[{key:"destroy",value:function(){this.aggName=null,this.aggFieldName=null,this.aggType=null,this.subAgg&&(this.subAgg=null)}}]),t}();i.SuperMap.AggregationParameter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AggQueryBuilderParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.AggQueryBuilderParameter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=null,this.queryType=null,this.CLASS_NAME="SuperMap.AggQueryBuilderParameter",a.Util.extend(this,e)}return n(t,[{key:"destroy",value:function(){this.name=null,this.queryType=null}}]),t}();i.SuperMap.AggQueryBuilderParameter=o},function(e,t,r){"use strict";var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(a){"object"===("undefined"==typeof window?"undefined":i(window))&&(n=window)}e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSONFormat=undefined;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),o=r(127);var s=t.JSONFormat=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.indent="    ",t.space=" ",t.newline="\n",t.level=0,t.pretty=!1,t.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),t.CLASS_NAME="SuperMap.Format.JSON",t.serialize={object:function(e){if(null==e)return"null";if(e.constructor===Date)return this.serialize.date.apply(this,[e]);if(e.constructor===Array)return this.serialize.array.apply(this,[e]);var t,r,n,i=["{"];this.level+=1;var a=!1;for(t in e)e.hasOwnProperty(t)&&(r=this.write.apply(this,[t,this.pretty]),n=this.write.apply(this,[e[t],this.pretty]),null!=r&&null!=n&&(a&&i.push(","),i.push(this.writeNewline(),this.writeIndent(),r,":",this.writeSpace(),n),a=!0));return this.level-=1,i.push(this.writeNewline(),this.writeIndent(),"}"),i.join("")},array:function(e){var t,r=["["];this.level+=1;for(var n=0,i=e.length;n<i;++n)null!=(t=this.write.apply(this,[e[n],this.pretty]))&&(0<n&&r.push(","),r.push(this.writeNewline(),this.writeIndent(),t));return this.level-=1,r.push(this.writeNewline(),this.writeIndent(),"]"),r.join("")},string:function(e){var n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,t){var r=n[t];return r||(r=t.charCodeAt(),"\\u00"+Math.floor(r/16).toString(16)+(r%16).toString(16))})+'"':'"'+e+'"'},number:function(e){return isFinite(e)?String(e):"null"},"boolean":function(e){return String(e)},date:function(e){function t(e){return e<10?"0"+e:e}return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"'}},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.Format),n(r,[{key:"read",value:function(e,t){var r;if(this.nativeJSON)try{r=JSON.parse(e,t)}catch(n){}return this.keepData&&(this.data=r),r}},{key:"write",value:function(e,t){this.pretty=!!t;var r=null,n=void 0===e?"undefined":a(e);if(this.serialize[n])try{r=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[n].apply(this,[e])}catch(i){}return r}},{key:"writeIndent",value:function(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t)e.push(this.indent);return e.join("")}},{key:"writeNewline",value:function(){return this.pretty?this.newline:""}},{key:"writeSpace",value:function(){return this.pretty?this.space:""}}]),r}();i.SuperMap.Format.JSON=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Format=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.Format=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=null,this.keepData=!1,a.Util.extend(this,e),this.options=e,this.CLASS_NAME="SuperMap.Format"}return n(t,[{key:"destroy",value:function(){}},{key:"read",value:function(e){}},{key:"write",value:function(e){}}]),t}();i.SuperMap.Format=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Credential=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0);var a=t.Credential=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.value=e||"",this.name=t||"token",this.CLASS_NAME="SuperMap.Credential"}return n(r,[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}]),r}();a.CREDENTIAL=null,i.SuperMap.Credential=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoText=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(26),c=r(27),f=r(1),o=r(22);r(21),r(86),r(45);var s=t.GeoText=function(e){function i(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t,r));return n.x=parseFloat(e),n.y=parseFloat(t),n.text=r.toString(),n.bsInfo={h:null,w:null},n.element=document.createElement("span"),n.CLASS_NAME="SuperMap.Geometry.GeoText",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.Geometry),n(i,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"destroy",this).call(this),this.x=null,this.y=null,this.text=null}},{key:"getCentroid",value:function(){return new o.Point(this.x,this.y)}},{key:"clone",value:function(e){return null==e&&(e=new i(this.x,this.y,this.text)),f.Util.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new c.Bounds(this.x,this.y,this.x,this.y)}},{key:"getLabelPxBoundsByLabel",value:function(e,t,r,n){var i,a,o,s,l=f.Util.cloneObject(e),u=(n.label||this.text).split("\n").length;if(t=parseFloat(t),r=parseFloat(r),1<u&&(r=parseFloat(r)*u),n.labelAlign&&"cm"!==n.labelAlign)switch(n.labelAlign){case"lt":l.x+=t/2,l.y+=r/2;break;case"lm":l.x+=t/2;break;case"lb":l.x+=t/2,l.y-=r/2;break;case"ct":l.y+=r/2;break;case"cb":l.y-=r/2;break;case"rt":l.x-=t/2,l.y+=r/2;break;case"rm":l.x-=t/2;break;case"rb":l.x-=t/2,l.y-=r/2}return this.bsInfo.h=r,this.bsInfo.w=t,i=l.x-parseFloat(t)/2,a=l.y+parseFloat(r)/2,s=l.x+parseFloat(t)/2,o=l.y-parseFloat(r)/2,new c.Bounds(i,a,s,o)}},{key:"getLabelPxBoundsByText",value:function(e,t){var r,n,i,a,o=this.getLabelPxSize(t),s=f.Util.cloneObject(e);if(t.labelAlign&&"cm"!==t.labelAlign)switch(t.labelAlign){case"lt":s.x+=o.w/2,s.y+=o.h/2;break;case"lm":s.x+=o.w/2;break;case"lb":s.x+=o.w/2,s.y-=o.h/2;break;case"ct":s.y+=o.h/2;break;case"cb":s.y-=o.h/2;break;case"rt":s.x-=o.w/2,s.y+=o.h/2;break;case"rm":s.x-=o.w/2;break;case"rb":s.x-=o.w/2,s.y-=o.h/2}return this.bsInfo.h=o.h,this.bsInfo.w=o.w,r=s.x-o.w/2,n=s.y+o.h/2,a=t.fontStyle&&"italic"===t.fontStyle?s.x+o.w/2+parseInt(parseFloat(t.fontSize)/2):s.x+o.w/2,i=s.y-o.h/2,new c.Bounds(r,n,a,i)}},{key:"getLabelPxSize",value:function(e){var t,r,n,i,a=parseFloat(e.strokeWidth);t=e.label||this.text,r=e.fontSize?parseFloat(e.fontSize):parseFloat("12px");var o=t.split("\n"),s=o.length;i=1<s?r*s+s+a+.2*r:r+a+.2*r+1,n=0,this.labelWTmp&&n<this.labelWTmp&&(n=this.labelWTmp);for(var l=0;l<s;l++){var u=this.getTextCount(o[l]),c=this.labelWTmp=f.Util.getTextBounds(e,o[l],this.element).textWidth+1*u.textC+a;n<c&&(n=c)}var h=new Object;return h.h=i,h.w=n,h}},{key:"getTextCount",value:function(e){for(var t={},r=0,n=0,i=0;i<e.length;i++)255<e.charCodeAt(i)?r++:n++;return t.cnC=r,t.enC=n,t.textC=e.length,t}}]),i}();i.SuperMap.Geometry.GeoText=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Curve=undefined;var n=r(0),i=r(44);var a=t.Curve=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],t.CLASS_NAME="SuperMap.Geometry.Curve",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.MultiPoint),r}();n.SuperMap.Geometry.Curve=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorTileJSON=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n},p=r(47),y=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}}(r(32)),o=r(5);t.VectorTileJSON=a["default"].Class.extend({initialize:function(e){this.url=e},getTile:function(){var t=this;return o.FetchRequest.get(t.url,null,{timeout:1e4}).then(function(e){return e.json()}).then(function(e){return t._processRecordSets(e,t)})},_processRecordSets:function(e,t){var r=e.recordsets;if(!(r=t._convertToGeoJSON(r)))return null;for(var n=0;n<r.length;n++){for(var i=r[n],a=0;a<i.features.length;a++){var o=i.features[a];(o=t._convertToVectorLayerFeature(o,t)).layerName=i.layerName,i.features[a]=o}i.extent=256,delete i.fieldTypes,delete i.fields}return r},_convertToVectorLayerFeature:function(e,t){if(e.geometry){var r,n,i,a,o={},s=e.geometry,l=s.type,u=s.coordinates,c=e.properties,h=c.id;if("Point"===l)o=c&&c.texts?t._createFeature(h,p.VectorFeatureType.TEXT,[u],c):t._createFeature(h,p.VectorFeatureType.POINT,[u],c);else if("MultiPoint"===l)o=t._createFeature(h,p.VectorFeatureType.POINT,u,c);else if("LineString"===l)o=t._createFeature(h,p.VectorFeatureType.LINE,[u],c);else if("MultiLineString"===l||"Polygon"===l){for(i=[],r=0;r<u.length;r++)a=u[r],"Polygon"===l&&(a.outer=0===r),i.push(a);var f="Polygon"===l?p.VectorFeatureType.REGION:p.VectorFeatureType.LINE;o=t._createFeature(h,f,i,c)}else{if("MultiPolygon"!==l)throw new Error("Illegal GeoJSON object");for(i=[],r=0;r<u.length;r++)for(n=0;n<u[r].length;n++)(a=u[r][n]).outer=0===n,i.push(a);o=t._createFeature(h,p.VectorFeatureType.REGION,i,c)}return o}},_convertToGeoJSON:function(e){if(e){for(var t=0;t<e.length;t++){for(var r=e[t],n=0;n<r.features.length;n++){for(var i=r.features[n],a=[],o=0,s=0;s<i.geometry.parts.length;s++){for(var l=2*i.geometry.parts[s],u=0,c=o;u<l;u+=2,c+=2){var h=i.geometry.points[c],f=i.geometry.points[c+1];a.push({x:h,y:f})}o+=l}i.geometry.points=a}r.features=y.toGeoJSON(r.features).features}return e}},_createFeature:function(e,t,r,n){return{id:e,type:t,geometry:r,properties:n}}})},function(e,t,r){"use strict";var u=r(330);function p(e,t,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=i,e.readFields(a,this,t)}function a(e,t,r){1==e?t.id=r.readVarint():2==e?function(e,t){var r=e.readVarint()+e.pos;for(;e.pos<r;){var n=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[n]=i}}(r,t):3==e?t.type=r.readVarint():4==e&&(t._geometry=r.pos)}function y(e){for(var t,r,n=0,i=0,a=e.length,o=a-1;i<a;o=i++)t=e[i],n+=((r=e[o]).x-t.x)*(t.y+r.y);return n}(e.exports=p).types=["Unknown","Point","LineString","Polygon"],p.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r=e.readVarint()+e.pos,n=1,i=0,a=0,o=0,s=[];e.pos<r;){if(!i){var l=e.readVarint();n=7&l,i=l>>3}if(i--,1===n||2===n)a+=e.readSVarint(),o+=e.readSVarint(),1===n&&(t&&s.push(t),t=[]),t.push(new u(a,o));else{if(7!==n)throw new Error("unknown command "+n);t&&t.push(t[0].clone())}}return t&&s.push(t),s},p.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,n=0,i=0,a=0,o=Infinity,s=-Infinity,l=Infinity,u=-Infinity;e.pos<t;){if(!n){var c=e.readVarint();r=7&c,n=c>>3}if(n--,1===r||2===r)(i+=e.readSVarint())<o&&(o=i),s<i&&(s=i),(a+=e.readSVarint())<l&&(l=a),u<a&&(u=a);else if(7!==r)throw new Error("unknown command "+r)}return[o,l,s,u]},p.prototype.toGeoJSON=function(e,t,r){var n,i,a=this.extent*Math.pow(2,r),o=this.extent*e,s=this.extent*t,l=this.loadGeometry(),u=p.types[this.type];function c(e){for(var t=0;t<e.length;t++){var r=e[t],n=180-360*(r.y+s)/a;e[t]=[360*(r.x+o)/a-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(n=0;n<l.length;n++)h[n]=l[n][0];c(l=h);break;case 2:for(n=0;n<l.length;n++)c(l[n]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var r,n,i=[],a=0;a<t;a++){var o=y(e[a]);0!==o&&(n===undefined&&(n=o<0),n===o<0?(r&&i.push(r),r=[e[a]]):r.push(e[a]))}r&&i.push(r);return i}(l),n=0;n<l.length;n++)for(i=0;i<l[n].length;i++)c(l[n][i])}1===l.length?l=l[0]:u="Multi"+u;var f={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(f.id=this.id),f}},function(e,t,r){"use strict";var n=r(132);function i(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(a,this,t),this.length=this._features.length}function a(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function(e){var t=null,r=e.readVarint()+e.pos;for(;e.pos<r;){var n=e.readVarint()>>3;t=1===n?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null}return t}(r))}(e.exports=i).prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new n(this._pbf,t,this.extent,this._keys,this._values)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorTilePBF=undefined;var s=o(r(2)),n=o(r(334)),i=r(332),l=r(47),a=r(5);function o(e){return e&&e.__esModule?e:{"default":e}}t.VectorTilePBF=s["default"].Class.extend({initialize:function(e){this.url=e},getTile:function(){var t=this;return a.FetchRequest.get(t.url,null,{timeout:1e4}).then(function(e){return e.ok?e.blob().then(function(e){var r=new FileReader;return new Promise(function(t){r.addEventListener("loadend",function(){var e=new n["default"](r.result);return t(new i.VectorTile(e))}),r.readAsArrayBuffer(e)})}):{layers:[]}}).then(function(e){return t._processVectorTileSpec(e)})},_processVectorTileSpec:function(e){var t=[];for(var r in e.layers){for(var n=[],i=0;i<e.layers[r].length;i++){var a=e.layers[r].feature(i);switch(a.geometry=a.loadGeometry(),a.layerName=r,a.properties={attributes:s["default"].Util.extend({},a.properties),id:a.id},a.type){case 1:a.type=l.VectorFeatureType.POINT;break;case 2:a.type=l.VectorFeatureType.LINE;break;case 3:a.type=l.VectorFeatureType.REGION}n.push(a)}var o={};o.features=n,o.layerName=r,o.extent=e.layers[r].extent,t.push(o)}return t}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegionSymbolizer=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n},o=r(46),s=r(88);t.RegionSymbolizer=a["default"].Polygon.extend({includes:[o.Symbolizer.prototype,s.PolyBase],initialize:function(e,t){o.Symbolizer.prototype.initialize.call(this,e),this._makeFeatureParts(e,t)},render:function(e,t){o.Symbolizer.prototype.render.call(this,e,t),this._updatePath()}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineSymbolizer=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n},o=r(46),s=r(88);t.LineSymbolizer=a["default"].Polyline.extend({includes:[o.Symbolizer.prototype,s.PolyBase],initialize:function(e,t){o.Symbolizer.prototype.initialize.call(this,e),this._makeFeatureParts(e,t)},render:function(e,t){t.fill=!1,o.Symbolizer.prototype.render.call(this,e,t),this._updatePath()},updateStyle:function(e,t){t.fill=!1,o.Symbolizer.prototype.updateStyle.call(this,e,t)}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointSymbolizer=undefined;var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=r(46),o=r(2),s=(n=o)&&n.__esModule?n:{"default":n};var l=t.PointSymbolizer=s["default"].CircleMarker.extend({includes:a.Symbolizer.prototype,statics:{iconCache:{}},initialize:function(e,t){a.Symbolizer.prototype.initialize.call(this,e),this._makeFeatureParts(e,t)},render:function(e,t){a.Symbolizer.prototype.render.call(this,e,t),this._radius=t.radius||s["default"].CircleMarker.prototype.options.radius,this._updatePath()},_makeFeatureParts:function(e,t){t=t||{x:1,y:1};var r=e.geometry[0];"object"===i(r[0])&&"x"in r[0]?this._point=s["default"].point(r[0]).scaleBy(t):this._point=s["default"].point(r).scaleBy(t),this._empty=s["default"].Util.falseFn},makeInteractive:function(){this._updateBounds()},updateStyle:function(e,t){return this._radius=t.radius||this._radius,this._updateBounds(),a.Symbolizer.prototype.updateStyle.call(this,e,t)},_updateBounds:function(){if(this.options.iconUrl&&this.options.iconSize){var e=s["default"].point(this.options.iconSize),t=e&&e.divideBy(2,!0),r=this._point.subtract(t);this._pxBounds=new s["default"].Bounds(r,r.add(e))}else s["default"].CircleMarker.prototype._updateBounds.call(this)},_updatePath:function(){this.options.iconUrl?this._renderer._updateIcon(this):s["default"].CircleMarker.prototype._updatePath.call(this)},_getImage:function(){if(!this.options.iconUrl)return null;var e=this.options.iconUrl,t=l.iconCache[e];if(!t){var r=this.options.iconSize||[50,50];t=l.iconCache[e]=this._createIcon(e,r)}return t},_createIcon:function(e,t){var r=e;if(!r)throw new Error("iconUrl not set in Icon options (see the docs).");var n=document.createElement("img");n.src=r,n.className="leaflet-marker-icon "+(this.layerName||"");var i=t;if("number"==typeof i&&(i=[i,i]),i){var a=s["default"].point(i),o=s["default"].point(a&&a.divideBy(2,!0));a&&(n.style.width=a.x+"px",n.style.height=a.y+"px"),o&&(n.style.marginLeft=-o.x+"px",n.style.marginTop=-o.y+"px")}return n.onload=function(){i||(n.style.width=this.width+"px",n.style.height=this.height+"px")},n},_containsPoint:function(e){return this.options.iconUrl?this._pxBounds.contains(e):s["default"].CircleMarker.prototype._containsPoint.call(this,e)}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorTile=undefined;var n,i=r(2),g=(n=i)&&n.__esModule?n:{"default":n},b=r(47),a=r(89),o=r(137),s=r(136),l=r(135),u=r(134),c=r(131),h=r(87);t.VectorTile=g["default"].Class.extend({initialize:function(e,t){this.layer=e.layer,this.tileSize=e.layer.getTileSize(),this.format=e.format,this.coords=e.coords,this.renderer=e.renderer,this.done=t,this.layer._textVectorTiles={}},renderTile:function(){var t=this,e=t.layer,r=t.coords,n=e._getTileUrl(r);(-1<[h.VectorTileFormat.MVT,h.VectorTileFormat.PBF].indexOf(t.format.toUpperCase())?new u.VectorTilePBF(n):new c.VectorTileJSON(n)).getTile().then(function(e){t.render(e,r)})},render:function(e,t){if(e){for(var r=this,n=r.renderer,i=r.layer,a=0;a<e.length;a++){var o=e[a],s=o.layerName;i._dataLayerNames[s]=!0;for(var l=r.tileSize.divideBy(o.extent),u=i.getLayerStyleInfo(o.layerName),c=0;c<o.features.length;c++){var h=o.features[c];if(h){u.type===b.VectorFeatureType.LABEL&&h.type===b.VectorFeatureType.POINT&&h.properties.attributes&&(h.type=b.VectorFeatureType.TEXT);var f=r._getStyleOptions(t,h,s,r);if(f.length){var p=r._createFeatureLayer(h,l);if(p){var y={scope:r,coords:t,renderer:n};if(!r._extractTextLayer(h,p,f,y)){for(var d=0;d<f.length;d++){var v=r._validateStyle(f[d],h.type);p.render(n,v),n._addPath(p)}i.options.interactive&&p.makeInteractive();var m=i._getFeatureKey(h.id,s);n._features[m]={layerName:s,feature:p}}}}}}}i._map&&n.addTo(i._map),g["default"].Util.requestAnimFrame(r.done.bind(t,null,r.layer._vectorTiles[r.layer._tileCoordsToKey(t)]))}},_extractTextLayer:function(e,t,r,n){if(e.type!==b.VectorFeatureType.TEXT)return!1;var i=n.scope,a=n.coords,o=i.layer,s=o._tileCoordsToKey(a),l=e.id,u=e.layerName,c=o._textVectorTiles[s];return c||(c={layers:{},coords:a,renderer:n.renderer}),c.layers[l]={layer:t,style:r,layerName:u},o._textVectorTiles[s]=c,!0},_getStyleOptions:function(e,t,r,n){var i=n,a=i.layer,o=a.getVectorTileLayerStyle(e,t)||i._defaultStyle(t.type),s=t.id,l=a._getFeatureKey(s,r),u=a._overriddenStyles[l];return o=(o=(o=u||o)instanceof Function?o(t.properties,e.z):o)instanceof Array?o:[o]},_createFeatureLayer:function(e,t){var r;switch(e.type){case b.VectorFeatureType.POINT:r=new o.PointSymbolizer(e,t);break;case b.VectorFeatureType.LINE:r=new s.LineSymbolizer(e,t);break;case b.VectorFeatureType.REGION:r=new l.RegionSymbolizer(e,t);break;case b.VectorFeatureType.TEXT:r=new a.TextSymbolizer(e,t)}var n=this.layer;return r&&n.options.interactive&&r.addEventParent(n),r},_validateStyle:function(e,t){switch(g["default"].Path.prototype.options.weight=1,g["default"].Path.prototype.options.fillOpacity=1,t){case b.VectorFeatureType.POINT:return g["default"].extend({},g["default"].CircleMarker.prototype.options,e);case b.VectorFeatureType.LINE:return g["default"].extend({},g["default"].Polyline.prototype.options,e);case b.VectorFeatureType.REGION:return g["default"].extend({},g["default"].Polygon.prototype.options,e);case b.VectorFeatureType.TEXT:return g["default"].extend({},a.TextSymbolizer.prototype.options,e)}},_defaultStyle:function(e){var t=g["default"].Path.prototype.options;switch(t.weight=1,t.fillOpacity=1,t.radius=3,e){case b.VectorFeatureType.POINT:return g["default"].extend({},t,g["default"].CircleMarker.prototype.options);case b.VectorFeatureType.LINE:return g["default"].extend({},t,g["default"].Polyline.prototype.options);case b.VectorFeatureType.REGION:return g["default"].extend({},t,g["default"].Polygon.prototype.options);case b.VectorFeatureType.TEXT:return g["default"].extend({},t,a.TextSymbolizer.prototype.options)}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorGrid=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n},o=r(91),s=r(90),l=r(138),u=r(89),c=r(87),h=r(47);t.VectorGrid=a["default"].GridLayer.extend({options:{vectorTileLayerStyles:null,renderer:"SVG",format:c.VectorTileFormat.JSON,interactive:!0,maxZoom:23},initialize:function(e){var n=this;a["default"].setOptions(n,e),a["default"].GridLayer.prototype.initialize.call(n,e),n._vectorTiles={},n._overriddenStyles={},n.vectorTileLayerStyles=n.options.vectorTileLayerStyles,n.on("tileunload",function(e){var t=n._tileCoordsToKey(e.coords),r=n._vectorTiles[t];r&&n._map&&r.removeFrom(n._map),delete n._vectorTiles[t]},n),n.on("tileerror ",n._renderText,n),n.on("load",n._renderText,n),n._dataLayerNames={}},createTile:function(e,t){var r=this.getTileSize(),n=null;return n="Canvas"===this.options.renderer?new s.CanvasRenderer(e,r,this.options):new o.SVGRenderer(e,r,this.options),(this._vectorTiles[this._tileCoordsToKey(e)]=n)._features={},new l.VectorTile({layer:this,format:this.options.format,coords:e,renderer:n},t).renderTile(),n.getContainer()},getStyles:function(){return this.vectorTileLayerStyles},getStyle:function(e){return this.vectorTileLayerStyles&&this.vectorTileLayerStyles[e]},setFeatureStyle:function(e,t,r){var n=this._getFeatureKey(e,t);for(var i in this._overriddenStyles[n]=r,this._vectorTiles){var a=this._vectorTiles[i],o=a._features[n];if(o){var s=o.feature;this._updateStyles(s,a,r)}}return this},resetFeatureStyle:function(e,t){var r=this._getFeatureKey(e,t);for(var n in delete this._overriddenStyles[r],this._vectorTiles){var i=this._vectorTiles[n],a=i._features[r];if(a){var o=a.feature,s=this.vectorTileLayerStyles[a.layerName];this._updateStyles(o,i,s)}}return this},getDataLayerNames:function(){return Object.keys(this._dataLayerNames)},_removeAllTiles:function(){a["default"].GridLayer.prototype._removeAllTiles.call(this),this._textVectorTiles={}},_renderText:function(){var e=this._textVectorTiles;for(var t in e){var r=e[t],n=r.renderer;for(var i in r.layers){for(var a=r.layers[i],o=a.style,s=a.layer,l=0;l<o.length;l++)s.render(n,o[l]),n._addPath(s);this.options.interactive&&s.makeInteractive()}}},_getFeatureKey:function(e,t){return(e=e||0)+"_"+(t=t||"null")},_updateStyles:function(e,t,r){(r=r instanceof Function?r(e.properties,t.getCoord().z):r)instanceof Array||(r=[r]);for(var n=0;n<r.length;n++){var i=this._extendStyle(r[n],e.type);e.updateStyle(t,i)}},_extendStyle:function(e,t){switch(t){case h.VectorFeatureType.POINT:return a["default"].extend({},a["default"].CircleMarker.prototype.options,e);case h.VectorFeatureType.LINE:return a["default"].extend({},a["default"].Polyline.prototype.options,e);case h.VectorFeatureType.REGION:return a["default"].extend({},a["default"].Polygon.prototype.options,e);case h.VectorFeatureType.TEXT:return a["default"].extend({},u.TextSymbolizer.prototype.options,e)}}})},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MapVRenderer=undefined;var i,a=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},o=n(2),b=(i=o)&&i.__esModule?i:{"default":i},l=n(337);function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=l.baiduMapLayer?l.baiduMapLayer.__proto__:Function;r.MapVRenderer=function(e){function o(e,t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var i=u(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,r,n));if(!c)return u(i);var a=i;return n=n||{},a.init(n),a.argCheck(n),i.canvasLayer=t,i.clickEvent=i.clickEvent.bind(i),i.mousemoveEvent=i.mousemoveEvent.bind(i),i._moveStartEvent=i.moveStartEvent.bind(i),i._moveEndEvent=i.moveEndEvent.bind(i),i._zoomstart=i.zoomStartEvent.bind(i),i.bindEvent(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,c),a(o,[{key:"clickEvent",value:function(e){var t=this.map.containerPointToLayerPoint([0,0]),r=this.devicePixelRatio=window.devicePixelRatio,n=e.layerPoint;s(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"clickEvent",this).call(this,b["default"].point((n.x-t.x)/r,(n.y-t.y)/r),e)}},{key:"mousemoveEvent",value:function(e){var t=e.layerPoint;s(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"mousemoveEvent",this).call(this,t,e)}},{key:"bindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.on("click",this.clickEvent),this.options.methods.mousemove&&e.on("mousemove",this.mousemoveEvent)),this.map.on("movestart",this._moveStartEvent),this.map.on("moveend",this._moveEndEvent),this.map.on("zoomstart",this._zoomstart)}},{key:"unbindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.off("click",this.clickEvent),this.options.methods.mousemove&&e.off("mousemove",this.mousemoveEvent)),this.map.off("movestart",this._moveStartEvent),this.map.off("moveend",this._moveEndEvent),this.map.off("zoomstart",this._zoomStartEvent)}},{key:"getContext",value:function(){return this.canvasLayer.getCanvas().getContext(this.context)}},{key:"addData",value:function(e,t){var r=e;e&&e.get&&(r=e.get()),this.dataSet.add(r),this.update({options:t})}},{key:"update",value:function(e){var t=e||{},r=t.data;r&&r.get&&(r=r.get()),r!=undefined&&this.dataSet.set(r),s(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"update",this).call(this,{options:t.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(t){if(this.dataSet){var e=this.dataSet.get({filter:function(e){return null==t||"function"!=typeof t||!t(e)}});this.dataSet.set(e),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"_canvasUpdate",value:function(r){if(this.canvasLayer){var n=this,i=n.options.animation,e=this.getContext(),a=this.map;if(n.isEnabledTime()){if(r===undefined)return void this.clear(e);"2d"===this.context&&(e.save(),e.globalCompositeOperation="destination-out",e.fillStyle="rgba(0, 0, 0, .1)",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.restore())}else this.clear(e);if("2d"===this.context)for(var t in n.options)e[t]=n.options[t];else e.clear(e.COLOR_BUFFER_BIT);if(!(n.options.minZoom&&a.getZoom()<n.options.minZoom||n.options.maxZoom&&a.getZoom()>n.options.maxZoom)){var o=a.getBounds(),s=o.getEast()-o.getWest(),l=o.getNorth()-o.getSouth(),u=a.getSize(),c=s/u.x,h=l/u.y,f=a.latLngToLayerPoint(a.getCenter()),p=this.canvasLayer.getTopLeft(),y=a.latLngToAccurateContainerPoint(p),d={transferCoordinate:function(e){var t,r={x:(t="2d"===n.context?a.latLngToAccurateContainerPoint(b["default"].latLng(e[1],e[0])):{x:(e[0]-p.lng)/c,y:(p.lat-e[1])/h}).x-y.x,y:t.y-y.x};return[r.x,r.y]}};r!==undefined&&(d.filter=function(e){var t=i.trails||10;return r&&e.time>r-t&&e.time<r});var v=n.dataSet.get(d);this.processData(v),n.options._size=n.options.size;var m=a.latLngToContainerPoint(b["default"].latLng(0,0)),g={x:m.x-f.x,y:m.y-f.y};this.drawContext(e,v,n.options,g),n.options.updateCallback&&n.options.updateCallback(r)}}}},{key:"init",value:function(e){this.options=e,this.initDataRange(e),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){}},{key:"moveStartEvent",value:function(){var e=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=e.stepsRange.start,this._hide())}},{key:"moveEndEvent",value:function(){this.canvasLayer.draw(),this._show()}},{key:"zoomStartEvent",value:function(){this._hide()}},{key:"clear",value:function(e){e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}},{key:"_hide",value:function(){this.canvasLayer.canvas.style.display="none"}},{key:"_show",value:function(){this.canvasLayer.canvas.style.display="block"}},{key:"draw",value:function(){this.canvasLayer.draw()}}]),o}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.graphThemeLayer=t.GraphThemeLayer=undefined;var n,i=r(2),g=(n=i)&&n.__esModule?n:{"default":n};r(4);var b=r(5),a=r(93),S=r(28);var o=t.GraphThemeLayer=a.ThemeLayer.extend({options:{isOverLay:!0},initialize:function(e,t,r){var n=[];n.push(e),n.push(r),a.ThemeLayer.prototype.initialize.apply(this,n),this.chartsType=t,this.themeFields=r&&r.themeFields?r.themeFields:null,this.charts=r&&r.charts?r.charts:[],this.cache=r&&r.cache?r.cache:{},this.chartsSetting=r&&r.chartsSetting?r.chartsSetting:{}},setChartsType:function(e){this.chartsType=e,this.redraw()},addFeatures:function(e){this.fire("beforefeaturesadded",{features:e}),this.features=this.toFeature(e),this.renderer&&(this._map?this.redrawThematicFeatures(this._map.getBounds()):this.redrawThematicFeatures())},redrawThematicFeatures:function(e){var t=this;t.renderer.clearAll();var r=t.features;if(this.options.alwaysMapCRS&&e&&e instanceof g["default"].LatLngBounds){var n=this._map.options.crs;e=g["default"].bounds(n.project(e.getSouthWest()),n.project(e.getNorthEast()))}e=S.CommontypesConversion.toSuperMapBounds(e);for(var i=0,a=r.length;i<a;i++){var o=r[i],s=o.geometry.getBounds();if(!e||e.intersectsBounds(s)){var l=t.cache,u=o.id;if(!l[u]){l[u]=u;var c=t.createThematicFeature(o),h=t.overlayWeightField&&o.attributes[t.overlayWeightField]&&!isNaN(o.attributes[t.overlayWeightField]);c&&h&&(c.__overlayWeight=o.attributes[t.overlayWeightField]),c&&t.charts.push(c)}}}t.drawCharts()},createThematicFeature:function(e){var t;return b.FeatureTheme[this.chartsType]&&this.themeFields&&this.chartsSetting&&(t=new b.FeatureTheme[this.chartsType](e,this,this.themeFields,this.chartsSetting)),!!t&&(t.assembleShapes(),t)},drawCharts:function(){this.renderer&&(this.overlayWeightField&&this._sortChart(),this.options&&!this.options.isOverLay?this._addOverlayShape():this._addNoOverlayShape(),this.renderer.render())},getShapesByFeatureID:function(e){var t=[],r=this.renderer.getAllShapes();if(!e)return r;for(var n=0,i=r.length;n<i;n++){var a=r[n];a.refDataID&&e===a.refDataID&&t.push(a)}return t},isQuadrilateralOverLap:function(e,t){var r=e.length,n=t.length;if(5!==r||5!==n)return null;for(var i=!1,a=0;a<r;a++)if(this.isPointInPoly(e[a],t)){i=!0;break}for(var o=0;o<n;o++)if(this.isPointInPoly(t[o],e)){i=!0;break}for(var s=0;s<r-1&&!i;s++)for(var l=0;l<n-1;l++){if("SuperMap.Geometry.Point"===b.CommonUtil.lineIntersection(e[s],e[s+1],t[l],t[l+1]).CLASS_NAME){i=!0;break}}return i},isPointInPoly:function(e,t){for(var r=!1,n=-1,i=t.length,a=i-1;++n<i;a=n)(t[n].y<=e.y&&e.y<t[a].y||t[a].y<=e.y&&e.y<t[n].y)&&e.x<(t[a].x-t[n].x)*(e.y-t[n].y)/(t[a].y-t[n].y)+t[n].x&&(r=!r);return r},isChartInMap:function(e,t){for(var r=e,n=!1,i=0,a=t.length;i<a;i++){var o=t[i];if(o.x>=r.left&&o.x<=r.right&&o.y>=r.top&&o.y<=r.bottom){n=!0;break}}return n},clearCache:function(){this.cache={},this.charts=[]},removeFeatures:function(e){this.clearCache(),a.ThemeLayer.prototype.removeFeatures.apply(this,arguments)},removeAllFeatures:function(){this.clearCache(),a.ThemeLayer.prototype.removeAllFeatures.apply(this,arguments)},redraw:function(){return this.clearCache(),a.ThemeLayer.prototype.redraw.apply(this,arguments)},clear:function(){this.renderer&&(this.renderer.clearAll(),this.renderer.refresh()),this.removeAllFeatures(),this.clearCache()},getWeightFieldValue:function(e,t,r){if((void 0===r||isNaN(r))&&(r=0),!e.attributes)return r;var n=e.attributes[t];return(void 0===n||isNaN(n))&&(n=r),n},_sortChart:function(){this.charts&&this.charts.sort(function(e,t){return"undefined"==typeof e.__overlayWeight&&"undefined"==typeof t.__overlayWeight?0:"undefined"!=typeof e.__overlayWeight&&"undefined"==typeof t.__overlayWeight?-1:"undefined"==typeof e.__overlayWeight&&"undefined"!=typeof t.__overlayWeight?1:"undefined"!=typeof e.__overlayWeight&&"undefined"!=typeof t.__overlayWeight?parseFloat(e.__overlayWeight)<parseFloat(t.__overlayWeight)?1:-1:0})},_addOverlayShape:function(){for(var e=this.charts,t=0,r=e.length;t<r;t++)for(var n=e[t],i=n.resetLocation(),a=n.shapes,o=0,s=a.length;o<s;o++)a[o].refOriginalPosition=i,this.renderer.addShape(a[o])},_addNoOverlayShape:function(){var e=this._map.getBounds(),t=this._map.options.crs;this.options.alwaysMapCRS&&(e=g["default"].bounds(t.project(e.getSouthWest()),t.project(e.getNorthEast()))),e=S.CommontypesConversion.toSuperMapBounds(e);for(var r=this.charts,n=[],i=this.getLocalXY(new b.LonLat(e.left,e.top)),a=this.getLocalXY(new b.LonLat(e.right,e.bottom)),o=new b.Bounds(i[0],a[1],a[0],i[1]),s=0,l=r.length;s<l;s++){var u=r[s],c=u.resetLocation(),h=u.chartBounds,f=[{x:h.left,y:h.top},{x:h.left,y:h.bottom},{x:h.right,y:h.bottom},{x:h.right,y:h.top},{x:h.left,y:h.top}];if(!o||this.isChartInMap(o,f)){for(var p=!1,y=0;y<n.length;y++)if(this.isQuadrilateralOverLap(f,n[y])){p=!0;break}if(!p){n.push(f);for(var d=u.shapes,v=0,m=d.length;v<m;v++)d[v].refOriginalPosition=c,this.renderer.addShape(d[v])}}}}}),s=t.graphThemeLayer=function(e,t,r){return new o(e,t,r)};g["default"].supermap.graphThemeLayer=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.imageStyle=t.ImageStyle=t.graphic=t.Graphic=t.circleStyle=t.CircleStyle=t.cloverStyle=t.CloverStyle=t.GraphicWebGLRenderer=t.GraphicCanvasRenderer=undefined;var n=r(343),i=r(342),a=r(149),o=r(341),s=r(340),l=r(339);t.GraphicCanvasRenderer=s.GraphicCanvasRenderer,t.GraphicWebGLRenderer=l.GraphicWebGLRenderer,t.CloverStyle=n.CloverStyle,t.cloverStyle=n.cloverStyle,t.CircleStyle=i.CircleStyle,t.circleStyle=i.circleStyle,t.Graphic=a.Graphic,t.graphic=a.graphic,t.ImageStyle=o.ImageStyle,t.imageStyle=o.imageStyle},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataFlowService=t.DataFlowService=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(8),s=r(5);var l=t.DataFlowService=o.ServiceBase.extend({options:{geometry:null,prjCoordSys:null,excludeField:null},initialize:function(e,t){t=t||{},a["default"].setOptions(this,t),t.projection&&(this.options.prjCoordSys=t.projection),o.ServiceBase.prototype.initialize.call(this,e,t),this.dataFlow=new s.DataFlowService(e,t),this.dataFlow.events.on({broadcastSocketConnected:this._defaultEvent,broadcastSocketError:this._defaultEvent,broadcastFailed:this._defaultEvent,broadcastSuccessed:this._defaultEvent,subscribeSocketConnected:this._defaultEvent,subscribeSocketError:this._defaultEvent,messageSuccessed:this._defaultEvent,setFilterParamSuccessed:this._defaultEvent,scope:this})},initBroadcast:function(){return this.dataFlow.initBroadcast(),this},broadcast:function(e){this.dataFlow.broadcast(e)},initSubscribe:function(){return this.dataFlow.initSubscribe(),this},setExcludeField:function(e){return this.dataFlow.setExcludeField(e),this.options.excludeField=e,this},setGeometry:function(e){return this.dataFlow.setGeometry(e),this.options.geometry=e,this},unSubscribe:function(){this.dataFlow.unSubscribe()},unBroadcast:function(){this.dataFlow.unBroadcast()},_defaultEvent:function(e){this.fire(e.eventType||e.type,e)}}),u=t.dataFlowService=function(e,t){return new l(e,t)};a["default"].supermap.dataFlowService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unicodeMarker=t.UnicodeMarker=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=t.UnicodeMarker=a["default"].Path.extend({options:{fontStyle:"normal",fontWeight:"normal",fontSize:"1em",fontFamily:"sans-serif",textAlign:"center",textBaseline:"middle",vfactor:-.5,labelRotation:0,globalAlpha:1,label:""},initialize:function(e,t){a["default"].Util.setOptions(this,t),this._latlng=e},setLatLng:function(e){return this._latlng=e,this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._clickTolerance(),t=[e,e];this._pxBounds=new a["default"].Bounds(this._point.subtract(t),this._point.add(t))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateUnicode(this)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._clickTolerance()}}),s=t.unicodeMarker=function(e,t){return new o(e,t)};a["default"].Canvas.include({_updateUnicode:function(e){if(this._drawing){var t={x:(this._drawnLayers[e._leaflet_id]=e)._point.x,y:e._point.y},r=this._ctx,n=[e.options.fontStyle,"normal",e.options.fontWeight,e.options.fontSize,e.options.fontFamily].join(" "),i=e.options.label.replace(/^&#x/,""),a=(i=String.fromCharCode(parseInt(i,16))).split("\n"),o=a.length;if(r.fillStyle=e.options.fontColor,r.globalAlpha=1,0<=e.options.fontOpacity&&e.options.fontOpacity<1&&(r.globalAlpha=e.options.fontOpacity),r.fillText){r.font=n,r.textAlign=e.options.textAlign,r.textBaseline=e.options.textBaseline;var s=e.options.vfactor,l=r.measureText("Mg").height||r.measureText("xx").width;t.y+=l*s*(o-1);for(var u=0;u<o;u++)0!=e.options.labelRotation?(r.save(),r.translate(t.x,t.y),r.rotate(e.options.labelRotation*Math.PI/180),r.fillText(a[u],0,l*u),r.restore()):r.fillText(a[u],t.x,t.y)}else if(r.mozDrawText){r.mozTextStyle=n;var c=e.options.textAlign,h=e.options.vfactor,f=r.mozMeasureText("xx");t.y+=f*(1+h*o);for(var p=0;p<o;p++){var y=t.x+c*r.mozMeasureText(a[p]),d=t.y+p*f;r.translate(y,d),r.mozDrawText(a[p]),r.translate(-y,-d)}}}}}),a["default"].supermap.unicodeMarker=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.featureService=t.FeatureService=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(8),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}}(r(32)),l=r(28),u=r(5);var c=t.FeatureService=o.ServiceBase.extend({initialize:function(e,t){o.ServiceBase.prototype.initialize.call(this,e,t)},getFeaturesByIDs:function(e,t,r){new u.GetFeaturesByIDsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},getFeaturesByBounds:function(e,t,r){new u.GetFeaturesByBoundsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},getFeaturesByBuffer:function(e,t,r){new u.GetFeaturesByBufferService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},getFeaturesBySQL:function(e,t,r){new u.GetFeaturesBySQLService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},getFeaturesByGeometry:function(e,t,r){new u.GetFeaturesByGeometryService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},editFeatures:function(e,t){if(e&&e.dataSourceName&&e.dataSetName){var r=this.url;r+="/datasources/"+e.dataSourceName+"/datasets/"+e.dataSetName,new u.EditFeaturesService(r,{eventListeners:{processCompleted:t,processFailed:t}}).processAsync(this._processParams(e))}},_processParams:function(e){if(!e)return{};e.returnContent=null==e.returnContent||e.returnContent,e.fromIndex=e.fromIndex?e.fromIndex:0,e.toIndex=e.toIndex?e.toIndex:-1,e.isUseBatch=null!=e.isUseBatch&&e.isUseBatch,e.bounds&&(e.bounds=l.CommontypesConversion.toSuperMapBounds(e.bounds)),e.geometry&&(e.geometry=s.toSuperMapGeometry(e.geometry)),e.editType&&(e.editType=e.editType.toLowerCase());var t=this;if(e.features){var r=[];a["default"].Util.isArray(e.features)?e.features.map(function(e){return r.push(t._createServerFeature(e)),e}):r.push(t._createServerFeature(e.features)),e.features=r}return e},_createServerFeature:function(e){var t,r={},n=[],i=[];for(var a in(t=e||{}).properties)n.push(a),i.push(t.properties[a]);return r.fieldNames=n,r.fieldValues=i,t.id&&(r.id=t.id),r.geometry=s.toSuperMapGeometry(t),r},_processFormat:function(e){return e||u.DataFormat.GEOJSON}}),h=t.featureService=function(e,t){return new c(e,t)};a["default"].supermap.featureService=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.labelThemeLayer=t.LabelThemeLayer=undefined;var n,i=r(2),c=(n=i)&&n.__esModule?n:{"default":n};r(4);var a=r(63),A=r(5);var o=t.LabelThemeLayer=a.GeoFeatureThemeLayer.extend({options:{isOverLay:!0,isAvoid:!0},initialize:function(e,t){a.GeoFeatureThemeLayer.prototype.initialize.call(this,e,t),c["default"].Util.setOptions(this,t),this.style=[],this.themeField=null,this.styleGroups=[],this.defaultStyle={fontColor:"#000000",fontOpacity:1,fontSize:"12px",fontStyle:"normal",fontWeight:"normal",labelAlign:"cm",labelXOffset:0,labelYOffset:0,labelRotation:0,fill:!1,fillColor:"#ee9900",fillOpacity:.4,stroke:!1,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",labelRect:!0,labelSelect:!0,_isGeoTextStrategyStyle:!0},this.getPxBoundsMode=0},onAdd:function(e){a.GeoFeatureThemeLayer.prototype.onAdd.call(this,e),this.container.style.zIndex=200},redrawThematicFeatures:function(e){if(!this.labelFeatures||0==this.labelFeatures.length){var t=this.setLabelsStyle(this.features);this.labelFeatures=[];for(var r=0,n=t.length;r<n;r++)this.labelFeatures.push(t[r])}this.features=this.getDrawnLabels(this.labelFeatures),a.GeoFeatureThemeLayer.prototype.redrawThematicFeatures.call(this,e)},getDrawnLabels:function(e){for(var t,r,n,i,a=[],o=[],s={labelAlign:"cm",labelXOffset:0,labelYOffset:0},l=this._map,u=l.getSize(),c=l.getZoom(),h=0,f=e.length;h<f;h++){((r=e[h]).isStyleChange||r.isStyleChange===undefined)&&(r=this.setStyle(r));var p=this.getLabelPxLocation(r);if(0<=p.x&&p.x<=u.x&&0<=p.y&&p.y<=u.y){if(-1<r.style.minZoomLevel&&c<=r.style.minZoomLevel)continue;if(-1<r.style.maxZoomLevel&&c>r.style.maxZoomLevel)continue;var y=null;r.isStyleChange?(r.isStyleChange=null,y=this.calculateLabelBounds(r,p)):y=r.geometry.bsInfo.w&&r.geometry.bsInfo.h?this.calculateLabelBounds2(r,p):this.calculateLabelBounds(r,p);var d=new A.Bounds(0,u.y,u.x,0),v=y.length;if(this.options.isAvoid){var m=this.getAvoidInfo(d,y);if(m){if("left"===m.aspectW){r.style.labelXOffset+=m.offsetX;for(var g=0;g<v;g++)y[g].x+=m.offsetX}else if("right"===m.aspectW){r.style.labelXOffset+=-m.offsetX;for(var b=0;b<v;b++)y[b].x+=-m.offsetX}if("top"===m.aspectH){r.style.labelYOffset+=m.offsetY;for(var S=0;S<v;S++)y[S].y+=m.offsetY}else if("bottom"===m.aspectH){r.style.labelYOffset+=-m.offsetY;for(var _=0;_<v;_++)y[_].y+=-m.offsetY}r.isStyleChange=!0}}if(this.options.isOverLay){var P=!1;if(0!=h)for(var O=0;O<o.length;O++)if(this.isQuadrilateralOverLap(y,o[O])){P=!0;break}if(P)continue;o.push(y)}for(var T=[],w=0;w<v-1;w++)T.push(l.containerPointToLatLng(y[w]));var M=T[3],C=T[1],x=new A.Bounds(M.lng,M.lat,C.lng,C.lat).getCenterLonLat(),E=new A.GeoText(x.lon,x.lat,r.attributes[this.themeField]);E.calculateBounds(),n=A.CommonUtil.cloneObject(r.style),i=A.CommonUtil.cloneObject(A.CommonUtil.copyAttributes(n,s)),(t=new A.GeometryVector(E,r.attributes,i)).id=r.id,t.fid=r.fid,a.push(t)}}return a},getStyleByData:function(e){var t=e;if(t.style=A.CommonUtil.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=A.CommonUtil.copyAttributes(t.style,this.style),this.themeField&&this.styleGroups&&t.attributes){var r=this.themeField,n=t.attributes,i=this.styleGroups,a=!1,o=null;for(var s in n)if(r===s){a=!0,o=n[s];break}if(a)for(var l=0,u=i.length;l<u;l++)if(o>=i[l].start&&o<i[l].end){var c=i[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=A.CommonUtil.copyAttributes(t.style,c)}t.style.label=t.attributes[this.themeField]}return t.style},setLabelsStyle:function(e){for(var t,r=[],n=0,i=e.length;n<i;n++){var a=e[n];if("SuperMap.Geometry.GeoText"!==a.geometry.CLASS_NAME)return e;(a.geometry.bsInfo.w||a.geometry.bsInfo.h)&&(a.geometry.bsInfo.w=null,a.geometry.bsInfo.h=null,a.geometry.labelWTmp=null),(t=this.setStyle(a)).layer=this.layer,r.push(t)}return r},setStyle:function(e){var t=e;if(t.style=A.CommonUtil.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=A.CommonUtil.copyAttributes(t.style,this.style),this.groupField&&this.styleGroups&&t.attributes){var r=this.groupField,n=t.attributes,i=this.styleGroups,a=!1,o=null;for(var s in n)if(r===s){a=!0,o=n[s];break}if(a)for(var l=0,u=i.length;l<u;l++)if(o>=i[l].start&&o<i[l].end){var c=i[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=A.CommonUtil.copyAttributes(t.style,c)}}return t.style.label=t.geometry.text,t},getLabelPxLocation:function(e){var t=e.geometry,r=e.style,n=t.getCentroid(),i=this._map.latLngToContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(c["default"].point(n.x,n.y)):c["default"].latLng(n.y,n.x)),a=c["default"].point(i.x,i.y);if(r.labelXOffset||r.labelYOffset){var o=isNaN(r.labelXOffset)?0:r.labelXOffset,s=isNaN(r.labelYOffset)?0:r.labelYOffset,l=a.add(c["default"].point(o,-s));return c["default"].point(l.x,l.y)}return c["default"].point(a.x,a.y)},calculateLabelBounds:function(e,t){var r=e.geometry,n=null,i=null;if(0==this.getPxBoundsMode)n=r.getLabelPxBoundsByText(t,e.style);else{if(1!==this.getPxBoundsMode)return null;i=this.getLabelInfo(e.geometry.getCentroid(),e.style),n=r.getLabelPxBoundsByLabel(t,i.w,i.h,e.style)}var a=[];return a=e.style.labelRotation%180==0?[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.right,y:n.bottom},{x:n.left,y:n.bottom},{x:n.left,y:n.top}]:this.rotationBounds(n,t,e.style.labelRotation),r.bounds=new A.Bounds(a[1].x,a[3].y,a[2].x,a[4].y),a},calculateLabelBounds2:function(e,t){var r,n,i,a,o,s=e.geometry.bsInfo,l=e.style,u=A.CommonUtil.cloneObject(t);if(l.labelAlign&&"cm"!==l.labelAlign)switch(l.labelAlign){case"lt":u.x+=s.w/2,u.y+=s.h/2;break;case"lm":u.x+=s.w/2;break;case"lb":u.x+=s.w/2,u.y-=s.h/2;break;case"ct":u.y+=s.h/2;break;case"cb":u.y-=s.h/2;break;case"rt":u.x-=s.w/2,u.y+=s.h/2;break;case"rm":u.x-=s.w/2;break;case"rb":u.x-=s.w/2,u.y-=s.h/2}n=u.x-s.w/2,i=u.y+s.h/2,o=l.fontStyle&&"italic"===l.fontStyle?u.x+s.w/2+parseInt(parseFloat(l.fontSize)/2):u.x+s.w/2,a=u.y-s.h/2,r=new A.Bounds(n,i,o,a);var c=[];return c=l.labelRotation%180==0?[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.right,y:r.bottom},{x:r.left,y:r.bottom},{x:r.left,y:r.top}]:this.rotationBounds(r,t,l.labelRotation),e.geometry.bounds=new A.Bounds(c[1].x,c[3].y,c[2].x,c[4].y),c},getLabelInfo:function(e,t){var r={l:"left",r:"right",t:"top",b:"bottom"},n={l:0,r:-1,t:0,b:-1};t=A.CommonUtil.extend({fontColor:"#000000",labelAlign:"cm"},t);var i=this.getLocalXY(e),a=0;if(t.labelXOffset||t.labelYOffset){var o=isNaN(t.labelXOffset)?0:t.labelXOffset,s=isNaN(t.labelYOffset)?0:t.labelYOffset;i[0]+=o,i[1]-=s}var l=document.createElement("canvas");l.globalAlpha=0,l.lineWidth=1;var u=l.getContext("2d");u.fillStyle=t.fontColor,u.globalAlpha=t.fontOpacity||1;var c,h,f,p=[t.fontStyle?t.fontStyle:"normal","normal",t.fontWeight?t.fontWeight:"normal",t.fontSize?t.fontSize:"1em",t.fontFamily?t.fontFamily:"sans-serif"].join(" "),y=t.label.split("\n"),d=y.length;if(u.fillText){u.font=p,u.textAlign=r[t.labelAlign[0]]||"center",u.textBaseline=r[t.labelAlign[1]]||"middle",null==(c=n[t.labelAlign[1]])&&(c=-.5),h=u.measureText("Mg").height||u.measureText("xx").width,i[1]+=h*c*(d-1);for(var v=0;v<d;v++)a<(f=u.measureText(y[v]).width)&&(a=f)}else if(u.mozDrawText){u.mozTextStyle=p,null==(c=n[t.labelAlign[1]])&&(c=-.5),h=u.mozMeasureText("xx"),i[1]+=h*(1+c*d);for(var m=0;m<d;m++)a<(f=u.measureText(y[m]).width)&&(a=f)}var g={};return a?(g.w=a,g.h=t.fontSize,g.rows=y.length,g):null},rotationBounds:function(e,t,r){var n=c["default"].point(e.left,e.top),i=c["default"].point(e.right,e.top),a=c["default"].point(e.right,e.bottom),o=c["default"].point(e.left,e.bottom),s=[];s.push(this.getRotatedLocation(n.x,n.y,t.x,t.y,r)),s.push(this.getRotatedLocation(i.x,i.y,t.x,t.y,r)),s.push(this.getRotatedLocation(a.x,a.y,t.x,t.y,r)),s.push(this.getRotatedLocation(o.x,o.y,t.x,t.y,r));for(var l=[],u=0;u<s.length;u++)l.push({x:s[u].x,y:s[u].y});return l.push({x:s[0].x,y:s[0].y}),l},getRotatedLocation:function(e,t,r,n,i){var a,o,s={};return t=-t,n=-n,i=-i,a=(e-r)*Math.cos(i/180*Math.PI)-(t-n)*Math.sin(i/180*Math.PI)+r,o=(e-r)*Math.sin(i/180*Math.PI)+(t-n)*Math.cos(i/180*Math.PI)+n,s.x=a,s.y=-o,s},getAvoidInfo:function(a,e){if(5!==e.length)return null;for(var t=[{x:a.left,y:a.top},{x:a.right,y:a.top},{x:a.right,y:a.bottom},{x:a.left,y:a.bottom},{x:a.left,y:a.top}],r=!1,n=t.length,i=e.length,o=0,s=0,l="",u="",c=0;c<n-1;c++)for(var h=0;h<i-1;h++){"SuperMap.Geometry.Point"===A.CommonUtil.lineIntersection(t[c],t[c+1],e[h],e[h+1]).CLASS_NAME&&(f(e[h]),f(e[h+1]),r=!0)}return r?{aspectW:u,aspectH:l,offsetX:o,offsetY:s}:null;function f(e){if(!a.contains(e.x,e.y)){if(e.y<a.top){var t=Math.abs(a.top-e.y);s<t&&(s=t,l="top")}if(e.y>a.bottom){var r=Math.abs(e.y-a.bottom);s<r&&(s=r,l="bottom")}if(e.x<a.left){var n=Math.abs(a.left-e.x);o<n&&(o=n,u="left")}if(e.x>a.right){var i=Math.abs(e.x-a.right);o<i&&(o=i,u="right")}}}},isQuadrilateralOverLap:function(e,t){var r=e.length,n=t.length;if(5!==r||5!==n)return null;for(var i=!1,a=0;a<r;a++)if(this.isPointInPoly(e[a],t)){i=!0;break}for(var o=0;o<n;o++)if(this.isPointInPoly(t[o],e)){i=!0;break}for(var s=0;s<r-1&&!i;s++)for(var l=0;l<n-1;l++){if("SuperMap.Geometry.Point"===A.CommonUtil.lineIntersection(e[s],e[s+1],t[l],t[l+1]).CLASS_NAME){i=!0;break}}return i},isPointInPoly:function(e,t){for(var r=!1,n=-1,i=t.length,a=i-1;++n<i;a=n)(t[n].y<=e.y&&e.y<t[a].y||t[a].y<=e.y&&e.y<t[n].y)&&e.x<(t[a].x-t[n].x)*(e.y-t[n].y)/(t[a].y-t[n].y)+t[n].x&&(r=!r);return r}}),s=t.labelThemeLayer=function(e,t){return new o(e,t)};c["default"].supermap.labelThemeLayer=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rangeThemeLayer=t.RangeThemeLayer=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(63),p=r(5);var s=t.RangeThemeLayer=o.GeoFeatureThemeLayer.extend({initialize:function(e,t){o.GeoFeatureThemeLayer.prototype.initialize.call(this,e,t),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(e){var t=e,r=p.CommonUtil.copyAttributesWithClip({},this.style),n=this.styleGroups,i=!1,a=null,o=this.styleGroups&&0<this.styleGroups.length;if(this.themeField&&o&&t.attributes){var s=this.themeField,l=t.attributes;for(var u in l)if(s===u){i=!0,a=l[u];break}}if(i&&o)for(var c=0,h=n.length;c<h;c++){if(c===h-1?a>=n[c].start&&a<=n[c].end:a>=n[c].start&&a<n[c].end){var f=n[c].style;r=p.CommonUtil.copyAttributesWithClip(r,f)}}return r}}),l=t.rangeThemeLayer=function(e,t){return new s(e,t)};a["default"].supermap.rangeThemeLayer=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueThemeLayer=t.UniqueThemeLayer=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(63),p=r(5);var s=t.UniqueThemeLayer=o.GeoFeatureThemeLayer.extend({initialize:function(e,t){o.GeoFeatureThemeLayer.prototype.initialize.call(this,e,t),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(e){var t=e,r=p.CommonUtil.copyAttributesWithClip({},this.style),n=this.styleGroups,i=!1,a=null,o=this.styleGroups&&0<this.styleGroups.length;if(this.themeField&&o&&t.attributes){var s=this.themeField,l=t.attributes;for(var u in l)if(s===u){i=!0,a=l[u];break}}if(i&&o)for(var c=0,h=n.length;c<h;c++)if(a.toString()===n[c].value.toString()){var f=n[c].style;r=p.CommonUtil.copyAttributesWithClip(r,f)}return r}}),l=t.uniqueThemeLayer=function(e,t){return new s(e,t)};a["default"].supermap.uniqueThemeLayer=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.graphic=t.Graphic=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=t.Graphic=a["default"].Class.extend({initialize:function(e){var t=(e=e||{}).latLng||e._latLng;this._latLng=a["default"].latLng(t.lat,t.lng),this._style=e.style||e._canvas,this._attributes=e.attributes},setLatLng:function(e){this._latLng=e},setCanvas:function(e){this._style=e},setAttributes:function(e){this._attributes=e},getLatLng:function(){return this._latLng},getCanvas:function(){return this._style},getAttributes:function(){return this._attributes},setStyle:function(e){this._style=e},getStyle:function(){return this._style}}),s=t.graphic=function(e){return new o(e)};a["default"].supermap.graphic=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompOpMap=t.ServerStyleMap=t.CartoStyleMap=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=t.CartoStyleMap={TEXT:{"text-size":"fontSize","text-face-name":"fontFamily","text-align":"textAlign","text-name":"textName","text-weight":"fontWeight","text-halo-color":"color","text-fill":"fillColor","text-comp-op":"globalCompositeOperation"},POINT:{"point-file":"iconUrl","point-fill":"fillColor","point-radius":"radius","point-halo-color":"color","point-comp-op":"globalCompositeOperation"},LINE:{"line-color":"color","line-width":"weight","line-cap":"lineCap","line-join":"lineJoin","line-dash-offset":"dashOffset","line-opacity":"opacity","line-dasharray":"dashArray","line-comp-op":"globalCompositeOperation"},REGION:{"line-color":"color","line-width":"weight","line-cap":"lineCap","line-join":"lineJoin","line-dash-offset":"dashOffset","line-opacity":"opacity","line-dasharray":"dashArray","polygon-fill":"fillColor","polygon-opacity":"fillOpacity","polygon-comp-op":"globalCompositeOperation"}},s=t.ServerStyleMap={lineWidth:{leafletStyle:"weight",type:"number",unit:"mm",defaultValue:.1},fillForeColor:{leafletStyle:"fillColor",type:"color",defaultValue:"rgba(0,0,0,0)"},foreColor:{leafletStyle:"color",type:"color",defaultValue:"rgba(0,0,0,0)"},markerSize:{leafletStyle:"markerSize",type:"number",unit:"mm",defaultValue:2.4},lineColor:{leafletStyle:"color",type:"color",defaultValue:"#000000"}},l=t.CompOpMap={clear:"",src:"",dst:"","src-over":"source-over","dst-over":"destination-over","src-in":"source-in","dst-in":"destination-in","src-out":"source-out","dst-out":"destination-out","src-atop":"source-atop","dst-atop":"destination-atop",xor:"xor",plus:"lighter",minus:"",multiply:"",screen:"",overlay:"",darken:"",lighten:"lighter","color-dodge":"","color-burn":"","hard-light":"","soft-light":"",difference:"",exclusion:"",contrast:"",invert:"","invert-rgb":"","grain-merge":"","grain-extract":"",hue:"",saturation:"",color:"",value:""};a["default"].supermap.CartoStyleMap=o,a["default"].supermap.ServerStyleMap=s,a["default"].supermap.CompOpMap=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultStyle=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=t.DefaultStyle={TEXT:{fontSize:"14px",fontFamily:"Arial Unicode MS Regular,Microsoft YaHei",textAlign:"left",color:"rgba(255,255,255,0)",fillColor:"rgba(80,80,80,1)",weight:1,globalAlpha:1},POINT:{fillColor:"#ffcc00",color:"#cc3333",weight:1,radius:3,opacity:1},LINE:{color:"rgba(0,0,0,0)",weight:1,lineCap:"butt",lineJoin:"round",dashOffset:0,dashArray:[],opacity:1},REGION:{color:"rgba(0,0,0,0)",fillColor:"rgba(0,0,0,0)",weight:1,lineCap:"butt",lineJoin:"round",dashOffset:0,opacity:1,fillOpacity:1,dashArray:[]}};a["default"].supermap.DefaultStyle=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tiledMapLayer=t.TiledMapLayer=undefined;var n,i=r(2),o=(n=i)&&n.__esModule?n:{"default":n};r(4);var c=r(5),h=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}}(r(32));var a=t.TiledMapLayer=o["default"].TileLayer.extend({options:{layersID:null,redirect:!1,transparent:null,cacheEnabled:null,clipRegionEnabled:!1,prjCoordSys:null,overlapDisplayed:!1,overlapDisplayedOptions:null,tileversion:null,crs:null,serverType:c.ServerType.ISERVER,format:"png",attribution:"Map Data <span>© <a href='http://support.supermap.com.cn/product/iServer.aspx' target='_blank'>SuperMap iServer</a></span> with <span>© <a href='http://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>"},initialize:function(e,t){this._url=e,o["default"].TileLayer.prototype.initialize.apply(this,arguments),o["default"].setOptions(this,t),o["default"].stamp(this),this.tileSetsIndex=-1,this.tempIndex=-1},onAdd:function(e){this._crs=this.options.crs||e.options.crs,o["default"].TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this.getScaleFromCoords(e),r=this._getLayerUrl()+"&scale="+t+"&x="+e.x+"&y="+e.y;return this.options.tileProxy&&(r=this.options.tileProxy+encodeURIComponent(r)),r},getScale:function(e){var t=e||this._map.getZoom();return this.scales[t]},getScaleFromCoords:function(e){var t;return this.scales&&this.scales[e.z]?this.scales[e.z]:(this.scales=this.scales||{},t=this.getDefaultScale(e),this.scales[e.z]=t)},getDefaultScale:function(e){var t,r=this._crs;if(r.options&&r.options.scaleDenominators)return 1/r.options.scaleDenominators[e.z];if(r.options&&r.options.scales)return r.options.scales[e.z];if(r.options&&r.options.resolutions)t=r.options.resolutions[e.z];else if(r._scales)t=1/r._scales[e.z];else{var n=this._tileCoordsToBounds(e),i=r.project(n.getNorthEast()),a=r.project(n.getSouthWest()),o=this.options.tileSize;t=Math.max(Math.abs(i.x-a.x)/o,Math.abs(i.y-a.y)/o)}var s=c.Unit.METER;if(r.code){var l=r.code.split(":");if(l&&1<l.length){var u=parseInt(l[1]);s=u&&4e3<=u&&u<=5e3?c.Unit.DEGREE:c.Unit.METER}}return h.resolutionToScale(t,96,s)},setTileSetsInfo:function(e){this.tileSets=e,o["default"].Util.isArray(this.tileSets)&&(this.tileSets=this.tileSets[0]),this.tileSets&&(this.fire("tilesetsinfoloaded",{tileVersions:this.tileSets.tileVersions}),this.changeTilesVersion())},lastTilesVersion:function(){this.tempIndex=this.tileSetsIndex-1,this.changeTilesVersion()},nextTilesVersion:function(){this.tempIndex=this.tileSetsIndex+1,this.changeTilesVersion()},changeTilesVersion:function(){var e=this;if(null!=e.tileSets&&!(e.tempIndex===e.tileSetsIndex||this.tempIndex<0)){var t=e.tileSets.tileVersions;if(t&&e.tempIndex<t.length&&0<=e.tempIndex){var r=t[e.tempIndex].name;e.mergeTileVersionParam(r)&&(e.tileSetsIndex=e.tempIndex,e.fire("tileversionschanged",{tileVersion:t[e.tempIndex]}))}}},updateCurrentTileSetsIndex:function(e){this.tempIndex=e},mergeTileVersionParam:function(e){return!!e&&(this.requestParams.tileversion=e,this._paramsChanged=!0,this.redraw(),!(this._paramsChanged=!1))},_getLayerUrl:function(){return this._paramsChanged&&(this._layerUrl=this._createLayerUrl()),this._layerUrl||this._createLayerUrl()},_createLayerUrl:function(){var e=this._url+"/tileImage."+this.options.format+"?";return e+=encodeURI(this._getRequestParamString()),e=this._appendCredential(e),this._layerUrl=e},_getRequestParamString:function(){this.requestParams=this.requestParams||this._getAllRequestParams();var e=[];for(var t in this.requestParams)e.push(t+"="+this.requestParams[t]);return e.join("&")},_getAllRequestParams:function(){var e=this.options||{},t={},r=this.options.tileSize;r instanceof o["default"].Point||(r=o["default"].point(r,r)),t.width=r.x,t.height=r.y,t.redirect=!0===e.redirect,t.transparent=!0===e.transparent,t.cacheEnabled=!(!1===e.cacheEnabled),e.prjCoordSys&&(t.prjCoordSys=JSON.stringify(e.prjCoordSys)),e.layersID&&(t.layersID=e.layersID.toString()),e.clipRegionEnabled&&e.clipRegion instanceof o["default"].Path&&(e.clipRegion=h.toSuperMapGeometry(e.clipRegion.toGeoJSON()),e.clipRegion=c.CommonUtil.toJSON(c.ServerGeometry.fromGeometry(e.clipRegion)),t.clipRegionEnabled=e.clipRegionEnabled,t.clipRegion=JSON.stringify(e.clipRegion));var n=this._crs;if(n.options&&n.options.origin)t.origin=JSON.stringify({x:n.options.origin[0],y:n.options.origin[1]});else if(n.projection&&n.projection.bounds){var i=n.projection.bounds,a=o["default"].point(i.min.x,i.max.y);t.origin=JSON.stringify({x:a.x,y:a.y})}return!1===e.overlapDisplayed?(t.overlapDisplayed=!1,e.overlapDisplayedOptions&&(t.overlapDisplayedOptions=this.overlapDisplayedOptions.toString())):t.overlapDisplayed=!0,!0===e.cacheEnabled&&e.tileversion&&(t.tileversion=e.tileversion.toString()),t},_appendCredential:function(e){var t,r,n=e;switch(this.options.serverType){case c.ServerType.IPORTAL:(t=(r=c.SecurityManager.getToken(this._url))?new c.Credential(r,"token"):null)||(t=(r=c.SecurityManager.getKey(this._url))?new c.Credential(r,"key"):null);break;case c.ServerType.ONLINE:t=(r=c.SecurityManager.getKey(this._url))?new c.Credential(r,"key"):null;break;default:t=(r=c.SecurityManager.getToken(this._url))?new c.Credential(r,"token"):null}return t&&(n+="&"+t.getUrlParameters()),n}}),s=t.tiledMapLayer=function(e,t){return new a(e,t)};o["default"].supermap.tiledMapLayer=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tiandituTileLayer=t.TiandituTileLayer=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(95);var s=t.TiandituTileLayer=o.WMTSLayer.extend({layerLabelMap:{vec:"cva",ter:"cta",img:"cia"},layerZoomMap:{vec:18,ter:14,img:18},options:{layerType:"vec",isLabel:!1,attribution:"Map Data <a href='http://www.tianditu.com' target='_blank'><img style='background-color:transparent;bottom:2px;opacity:1;' src='http://api.tianditu.com/img/map/logo.png' width='53px' height='22px' opacity='0'></a> with <span>© <a href='http://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>",url:"http://t{s}.tianditu.com/{layer}_{proj}/wmts?",zoomOffset:1,dpi:96,style:"default",format:"tiles",subdomains:[0,1,2,3,4,5,6,7]},initialize:function(e){e=e||{},a["default"].setOptions(this,e),this.options.layer=this.options.isLabel?this.layerLabelMap[this.options.layerType]:this.options.layerType,this.options.maxZoom=this.layerZoomMap[this.options.layerType]-1,o.WMTSLayer.prototype.initialize.call(this,this.options.url,this.options),a["default"].stamp(this)},onAdd:function(e){this.options.tilematrixSet="EPSG:4326"===e.options.crs.code?"c":"w",this._url=this._url.replace("{layer}",this.options.layer).replace("{proj}",this.options.tilematrixSet),o.WMTSLayer.prototype.onAdd.call(this,e)}}),l=t.tiandituTileLayer=function(e){return new s(e)};a["default"].supermap.tiandituTileLayer=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cloudTileLayer=t.CloudTileLayer=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=t.CloudTileLayer=a["default"].TileLayer.extend({defaultURL:"http://t2.supermapcloud.com/FileService/image",options:{mapName:"quanguo",type:"web",minZoom:3,maxZoom:18,attribution:"Map Data ©2014 SuperMap - GS(2014)6070号-data©Navinfo with <span>© <a href='http://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>"},initialize:function(e,t){a["default"].setOptions(this,t);var r=e||this.defaultURL;this._url=r+"?map="+this.options.mapName+"&type="+this.options.type,a["default"].stamp(this)},getTileUrl:function(e){var t=this._url+"&x="+e.x+"&y="+e.y+"&z="+e.z;return this.options.tileProxy&&(t=this.options.tileProxy+encodeURIComponent(t)),t}}),s=t.cloudTileLayer=function(e,t){return new o(e,t)};a["default"].supermap.cloudTileLayer=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baiduTileLayer=t.BaiduTileLayer=undefined,r(4);var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};var o=t.BaiduTileLayer=a["default"].TileLayer.extend({url:"http://online{num}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles={styles}&udt=20150815&scaler=1",options:{minZoom:3,maxZoom:19,bounds:a["default"].latLngBounds(a["default"].latLng(-85.0511287798,-180),a["default"].latLng(85.0511287798,180)),retina:a["default"].Browser.retina,attribution:"Map Data © 2017 Baidu - GS(2016)2089号 - Data © 长地万方 with <span>© <a href='http://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>"},initialize:function(e,t){e&&(this.url=e),a["default"].setOptions(this,t),this.options.retina&&(this.options.maxZoom=18),a["default"].stamp(this)},getTileUrl:function(e){var t=a["default"].Util.template(this.url,{num:Math.abs((e.x+e.y)%8)+1,x:e.x,y:-e.y-1,z:this._getZoomForUrl(),styles:this.options.retina?"ph":"pl"});return this.options.tileProxy&&(t=this.options.tileProxy+encodeURIComponent(t)),t}}),s=t.baiduTileLayer=function(e,t){return new o(e,t)};a["default"].supermap.baiduTileLayer=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapService=t.MapService=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(8),s=r(5);var l=t.MapService=o.ServiceBase.extend({options:{projection:null},initialize:function(e,t){t=t||{},a["default"].setOptions(this,t),t.projection&&(this.options.projection=t.projection),o.ServiceBase.prototype.initialize.call(this,e,t)},getMapInfo:function(e){new s.MapService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},projection:this.options.projection}).processAsync()},getTilesets:function(e){new s.TilesetsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync()}}),u=t.mapService=function(e,t){return new l(e,t)};a["default"].supermap.mapService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TianDiTu_MercatorCRS=t.TianDiTu_WGS84CRS=t.BaiduCRS=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};for(var o,s=t.BaiduCRS=a["default"].CRS.Baidu=a["default"].extend({},a["default"].CRS.EPSG3857,{code:"Baidu",scale:function(e){return 6378137*Math.PI*2/Math.pow(2,18-e)},transformation:(o=.5/(6378137*Math.PI),new a["default"].Transformation(o,0,-o,0))}),l=[],u=1;u<19;u++)l.push(1.40625/Math.pow(2,u));for(var c=t.TianDiTu_WGS84CRS=a["default"].CRS.TianDiTu_WGS84=a["default"].Proj.CRS("EPSG:4326",{origin:[-180,90],resolutions:l,bounds:a["default"].bounds([-180,-90],[180,90])}),h=[],f=1;f<19;f++)h.push(156543.03392804062/Math.pow(2,f));var p=t.TianDiTu_MercatorCRS=a["default"].CRS.TianDiTu_Mercator=a["default"].Proj.CRS("EPSG:3857",{origin:[-20037508.3427892,20037508.3427892],resolutions:h,bounds:a["default"].bounds([-20037508.3427892,-20037508.3427892],[20037508.3427892,20037508.3427892])});a["default"].CRS.BaiduCRS=s,a["default"].CRS.TianDiTu_WGS84CRS=c,a["default"].CRS.TianDiTu_MercatorCRS=p},function(e,t,r){"use strict";e.exports=function(e,t,r,n){return r*=t,t*=t,n[0]*e-r*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))}},function(e,t,r){"use strict";var n=r(53),i=r(52),a=r(51),o=r(50),m=r(49),T=r(7),w=Math.PI/2,M=r(54),C=r(39);t.init=function(){this.e0=n(this.es),this.e1=i(this.es),this.e2=a(this.es),this.e3=o(this.es),this.ml0=this.a*m(this.e0,this.e1,this.e2,this.e3,this.lat0)},t.forward=function(e){var t,r,n,i=e.x,a=e.y,o=T(i-this.long0),s=Math.sin(a),l=Math.cos(a);if(this.sphere){var u=l*Math.sin(o);if(Math.abs(Math.abs(u)-1)<1e-10)return 93;r=.5*this.a*this.k0*Math.log((1+u)/(1-u)),t=Math.acos(l*Math.cos(o)/Math.sqrt(1-u*u)),a<0&&(t=-t),n=this.a*this.k0*(t-this.lat0)}else{var c=l*o,h=Math.pow(c,2),f=this.ep2*Math.pow(l,2),p=Math.tan(a),y=Math.pow(p,2);t=1-this.es*Math.pow(s,2);var d=this.a/Math.sqrt(t),v=this.a*m(this.e0,this.e1,this.e2,this.e3,a);r=this.k0*d*c*(1+h/6*(1-y+f+h/20*(5-18*y+Math.pow(y,2)+72*f-58*this.ep2)))+this.x0,n=this.k0*(v-this.ml0+d*p*(h*(.5+h/24*(5-y+9*f+4*Math.pow(f,2)+h/30*(61-58*y+Math.pow(y,2)+600*f-330*this.ep2)))))+this.y0}return e.x=r,e.y=n,e},t.inverse=function(e){var t,r,n,i,a,o;if(this.sphere){var s=Math.exp(e.x/(this.a*this.k0)),l=.5*(s-1/s),u=this.lat0+e.y/(this.a*this.k0),c=Math.cos(u);t=Math.sqrt((1-c*c)/(1+l*l)),a=C(t),u<0&&(a=-a),o=0===l&&0===c?this.long0:T(Math.atan2(l,c)+this.long0)}else{var h=e.x-this.x0,f=e.y-this.y0;for(r=t=(this.ml0+f/this.k0)/this.a,i=0;r+=n=(t+this.e1*Math.sin(2*r)-this.e2*Math.sin(4*r)+this.e3*Math.sin(6*r))/this.e0-r,!(Math.abs(n)<=1e-10);i++)if(6<=i)return 95;if(Math.abs(r)<w){var p=Math.sin(r),y=Math.cos(r),d=Math.tan(r),v=this.ep2*Math.pow(y,2),m=Math.pow(v,2),g=Math.pow(d,2),b=Math.pow(g,2);t=1-this.es*Math.pow(p,2);var S=this.a/Math.sqrt(t),_=S*(1-this.es)/t,P=h/(S*this.k0),O=Math.pow(P,2);a=r-S*d*O/_*(.5-O/24*(5+3*g+10*v-4*m-9*this.ep2-O/30*(61+90*g+298*v+45*b-252*this.ep2-3*m))),o=T(this.long0+P*(1-O/6*(1+2*g+v-O/20*(5-2*v+28*g-3*m+8*this.ep2+24*b)))/y)}else a=w*M(f),o=this.long0}return e.x=o,e.y=a,e},t.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},function(e,t,r){"use strict";var n=6,S="AJSAJS",_="AFAFAF",P=65,O=73,T=79,w=86,M=90;function C(e){return e*(Math.PI/180)}function x(e){return e/Math.PI*180}function E(e){var t=e.northing,r=e.easting,n=e.zoneLetter,i=e.zoneNumber;if(i<0||60<i)return null;var a,o,s,l,u,c,h,f,p,y=.00669438,d=(1-Math.sqrt(1-y))/(1+Math.sqrt(1-y)),v=r-5e5,m=t;n<"N"&&(m-=1e7),h=6*(i-1)-180+3,a=y/(1-y),p=(f=m/.9996/6367449.145945056)+(3*d/2-27*d*d*d/32)*Math.sin(2*f)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*f)+151*d*d*d/96*Math.sin(6*f),o=6378137/Math.sqrt(1-y*Math.sin(p)*Math.sin(p)),s=Math.tan(p)*Math.tan(p),l=a*Math.cos(p)*Math.cos(p),u=6378137*(1-y)/Math.pow(1-y*Math.sin(p)*Math.sin(p),1.5),c=v/(.9996*o);var g=p-o*Math.tan(p)/u*(c*c/2-(5+3*s+10*l-4*l*l-9*a)*c*c*c*c/24+(61+90*s+298*l+45*s*s-252*a-3*l*l)*c*c*c*c*c*c/720);g=x(g);var b,S=(c-(1+2*s+l)*c*c*c/6+(5-2*l+28*s-3*l*l+8*a+24*s*s)*c*c*c*c*c/120)/Math.cos(p);if(S=h+x(S),e.accuracy){var _=E({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});b={top:_.lat,right:_.lon,bottom:g,left:S}}else b={lat:g,lon:S};return b}function A(e){var t=e%n;return 0===t&&(t=n),t}function i(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,r=e.length,n=null,i="",a=0;!/[A-Z]/.test(t=e.charAt(a));){if(2<=a)throw"MGRSPoint bad conversion from: "+e;i+=t,a++}var o=parseInt(i,10);if(0===a||r<a+3)throw"MGRSPoint bad conversion from: "+e;var s=e.charAt(a++);if(s<="A"||"B"===s||"Y"===s||"Z"<=s||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+e;n=e.substring(a,a+=2);for(var l=A(o),u=function(e,t){var r=S.charCodeAt(t-1),n=1e5,i=!1;for(;r!==e.charCodeAt(0);){if(++r===O&&r++,r===T&&r++,M<r){if(i)throw"Bad character: "+e;r=P,i=!0}n+=1e5}return n}(n.charAt(0),l),c=function(e,t){if("V"<e)throw"MGRSPoint given invalid Northing "+e;var r=_.charCodeAt(t-1),n=0,i=!1;for(;r!==e.charCodeAt(0);){if(++r===O&&r++,r===T&&r++,w<r){if(i)throw"Bad character: "+e;r=P,i=!0}n+=1e5}return n}(n.charAt(1),l);c<g(s);)c+=2e6;var h=r-a;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var f,p,y,d=h/2,v=0,m=0;return 0<d&&(f=1e5/Math.pow(10,d),p=e.substring(a,a+d),v=parseFloat(p)*f,y=e.substring(a+d),m=parseFloat(y)*f),{easting:v+u,northing:m+c,zoneLetter:s,zoneNumber:o,accuracy:f}}function g(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(0<=t)return t;throw"Invalid zone letter: "+e}t.forward=function(e,t){return t=t||5,r=function(e){var t,r,n,i,a,o,s,l,u=e.lat,c=e.lon,h=.00669438,f=C(u),p=C(c);l=Math.floor((c+180)/6)+1,180===c&&(l=60);56<=u&&u<64&&3<=c&&c<12&&(l=32);72<=u&&u<84&&(0<=c&&c<9?l=31:9<=c&&c<21?l=33:21<=c&&c<33?l=35:33<=c&&c<42&&(l=37));s=C(6*(l-1)-180+3),t=h/(1-h),r=6378137/Math.sqrt(1-h*Math.sin(f)*Math.sin(f)),n=Math.tan(f)*Math.tan(f),i=t*Math.cos(f)*Math.cos(f),a=Math.cos(f)*(p-s),o=6378137*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-35*h*h*h/3072*Math.sin(6*f));var y=.9996*r*(a+(1-n+i)*a*a*a/6+(5-18*n+n*n+72*i-58*t)*a*a*a*a*a/120)+5e5,d=.9996*(o+r*Math.tan(f)*(a*a/2+(5-n+9*i+4*i*i)*a*a*a*a/24+(61-58*n+n*n+600*i-330*t)*a*a*a*a*a*a/720));u<0&&(d+=1e7);return{northing:Math.round(d),easting:Math.round(y),zoneNumber:l,zoneLetter:function(e){var t="Z";e<=84&&72<=e?t="X":e<72&&64<=e?t="W":e<64&&56<=e?t="V":e<56&&48<=e?t="U":e<48&&40<=e?t="T":e<40&&32<=e?t="S":e<32&&24<=e?t="R":e<24&&16<=e?t="Q":e<16&&8<=e?t="P":e<8&&0<=e?t="N":e<0&&-8<=e?t="M":e<-8&&-16<=e?t="L":e<-16&&-24<=e?t="K":e<-24&&-32<=e?t="J":e<-32&&-40<=e?t="H":e<-40&&-48<=e?t="G":e<-48&&-56<=e?t="F":e<-56&&-64<=e?t="E":e<-64&&-72<=e?t="D":e<-72&&-80<=e&&(t="C");return t}(u)}}({lat:e[1],lon:e[0]}),n=t,i="00000"+r.easting,a="00000"+r.northing,r.zoneNumber+r.zoneLetter+(y=r.easting,d=r.northing,v=r.zoneNumber,m=A(v),g=Math.floor(y/1e5),b=Math.floor(d/1e5)%20,o=g,s=b,l=m-1,u=S.charCodeAt(l),c=_.charCodeAt(l),p=!1,M<(h=u+o-1)&&(h=h-M+P-1,p=!0),(h===O||u<O&&O<h||(O<h||u<O)&&p)&&h++,(h===T||u<T&&T<h||(T<h||u<T)&&p)&&++h===O&&h++,M<h&&(h=h-M+P-1),w<(f=c+s)?(f=f-w+P-1,p=!0):p=!1,(f===O||c<O&&O<f||(O<f||c<O)&&p)&&f++,(f===T||c<T&&T<f||(T<f||c<T)&&p)&&++f===O&&f++,w<f&&(f=f-w+P-1),String.fromCharCode(h)+String.fromCharCode(f))+i.substr(i.length-5,n)+a.substr(a.length-5,n);var r,n,i,a,o,s,l,u,c,h,f,p,y,d,v,m,g,b},t.inverse=function(e){var t=E(i(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]},t.toPoint=function(e){var t=E(i(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}},function(e,t,r){"use strict";e.exports=function(e){var t={x:e[0],y:e[1]};return 2<e.length&&(t.z=e[2]),3<e.length&&(t.m=e[3]),t}},function(t,r,n){"use strict";var o=.017453292519943295,s=57.29577951308232,l=1,u=2,c=n(387),h=n(386),f=n(100),p=n(161);t.exports=function e(t,r,n){var i;function a(e,t){return(e.datum.datum_type===l||e.datum.datum_type===u)&&"WGS84"!==t.datumCode}return Array.isArray(n)&&(n=p(n)),t.datum&&r.datum&&(a(t,r)||a(r,t))&&(e(t,i=new f("WGS84"),n),t=i),"enu"!==t.axis&&h(t,!1,n),"longlat"===t.projName?(n.x*=o,n.y*=o):(t.to_meter&&(n.x*=t.to_meter,n.y*=t.to_meter),t.inverse(n)),t.from_greenwich&&(n.x+=t.from_greenwich),n=c(t.datum,r.datum,n),r.from_greenwich&&(n.x-=r.from_greenwich),"longlat"===r.projName?(n.x*=s,n.y*=s):(r.forward(n),r.to_meter&&(n.x/=r.to_meter,n.y/=r.to_meter)),"enu"!==r.axis&&h(r,!0,n),n}},function(e,t,r){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=.017453292519943295,s=r(99);function i(e,t,r){e[t]=r.map(function(e){var t={};return l(e,t),t}).reduce(function(e,t){return s(e,t)},{})}function l(e,t){var r;Array.isArray(e)?("PARAMETER"===(r=e.shift())&&(r=e.shift()),1===e.length?Array.isArray(e[0])?(t[r]={},l(e[0],t[r])):t[r]=e[0]:e.length?"TOWGS84"===r?t[r]=e:(t[r]={},-1<["UNIT","PRIMEM","VERT_DATUM"].indexOf(r)?(t[r]={name:e[0].toLowerCase(),convert:e[1]},3===e.length&&(t[r].auth=e[2])):"SPHEROID"===r?(t[r]={name:e[0],a:e[1],rf:e[2]},4===e.length&&(t[r].auth=e[3])):-1<["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(r)?(e[0]=["name",e[0]],i(t,r,e)):e.every(function(e){return Array.isArray(e)})?i(t,r,e):l(e,t[r])):t[r]=!0):t[e]=!0}function u(e){return e*n}e.exports=function(e,t){var r=JSON.parse((","+e).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]').replace(/,\["VERTCS".+/,"")),n=r.shift(),i=r.shift();r.unshift(["name",i]),r.unshift(["type",n]),r.unshift("output");var a={};return l(r,a),function(a){function e(e){var t=a.to_meter||1;return parseFloat(e,10)*t}"GEOGCS"===a.type?a.projName="longlat":"LOCAL_CS"===a.type?(a.projName="identity",a.local=!0):"object"===o(a.PROJECTION)?a.projName=Object.keys(a.PROJECTION)[0]:a.projName=a.PROJECTION,a.UNIT&&(a.units=a.UNIT.name.toLowerCase(),"metre"===a.units&&(a.units="meter"),a.UNIT.convert&&("GEOGCS"===a.type?a.DATUM&&a.DATUM.SPHEROID&&(a.to_meter=parseFloat(a.UNIT.convert,10)*a.DATUM.SPHEROID.a):a.to_meter=parseFloat(a.UNIT.convert,10))),a.GEOGCS&&(a.GEOGCS.DATUM?a.datumCode=a.GEOGCS.DATUM.name.toLowerCase():a.datumCode=a.GEOGCS.name.toLowerCase(),"d_"===a.datumCode.slice(0,2)&&(a.datumCode=a.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==a.datumCode&&"new_zealand_1949"!==a.datumCode||(a.datumCode="nzgd49"),"wgs_1984"===a.datumCode&&("Mercator_Auxiliary_Sphere"===a.PROJECTION&&(a.sphere=!0),a.datumCode="wgs84"),"_ferro"===a.datumCode.slice(-6)&&(a.datumCode=a.datumCode.slice(0,-6)),"_jakarta"===a.datumCode.slice(-8)&&(a.datumCode=a.datumCode.slice(0,-8)),~a.datumCode.indexOf("belge")&&(a.datumCode="rnb72"),a.GEOGCS.DATUM&&a.GEOGCS.DATUM.SPHEROID&&(a.ellps=a.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===a.ellps.toLowerCase().slice(0,13)&&(a.ellps="intl"),a.a=a.GEOGCS.DATUM.SPHEROID.a,a.rf=parseFloat(a.GEOGCS.DATUM.SPHEROID.rf,10)),~a.datumCode.indexOf("osgb_1936")&&(a.datumCode="osgb36")),a.b&&!isFinite(a.b)&&(a.b=a.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",u],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",u],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",u],["lat0","latitude_of_origin",u],["lat0","standard_parallel_1",u],["lat1","standard_parallel_1",u],["lat2","standard_parallel_2",u],["alpha","azimuth",u],["srsCode","name"]].forEach(function(e){return t=a,n=(r=e)[0],i=r[1],void(!(n in t)&&i in t&&(t[n]=t[i],3===r.length&&(t[n]=r[2](t[n]))));var t,r,n,i}),a.long0||!a.longc||"Albers_Conic_Equal_Area"!==a.projName&&"Lambert_Azimuthal_Equal_Area"!==a.projName||(a.long0=a.longc),a.lat_ts||!a.lat1||"Stereographic_South_Pole"!==a.projName&&"Polar Stereographic (variant B)"!==a.projName||(a.lat0=u(0<a.lat1?90:-90),a.lat_ts=a.lat1)}(a.output),s(t,a.output)}},function(e,t,r){"use strict";var s=.017453292519943295,l=r(396),u=r(395);e.exports=function(e){var t,r,n,i={},a={};e.split("+").map(function(e){return e.trim()}).filter(function(e){return e}).forEach(function(e){var t=e.split("=");t.push(!0),a[t[0].toLowerCase()]=t[1]});var o={proj:"projName",datum:"datumCode",rf:function(e){i.rf=parseFloat(e)},lat_0:function(e){i.lat0=e*s},lat_1:function(e){i.lat1=e*s},lat_2:function(e){i.lat2=e*s},lat_ts:function(e){i.lat_ts=e*s},lon_0:function(e){i.long0=e*s},lon_1:function(e){i.long1=e*s},lon_2:function(e){i.long2=e*s},alpha:function(e){i.alpha=parseFloat(e)*s},lonc:function(e){i.longc=e*s},x_0:function(e){i.x0=parseFloat(e)},y_0:function(e){i.y0=parseFloat(e)},k_0:function(e){i.k0=parseFloat(e)},k:function(e){i.k0=parseFloat(e)},a:function(e){i.a=parseFloat(e)},b:function(e){i.b=parseFloat(e)},r_a:function(){i.R_A=!0},zone:function(e){i.zone=parseInt(e,10)},south:function(){i.utmSouth=!0},towgs84:function(e){i.datum_params=e.split(",").map(function(e){return parseFloat(e)})},to_meter:function(e){i.to_meter=parseFloat(e)},units:function(e){i.units=e,u[e]&&(i.to_meter=u[e].to_meter)},from_greenwich:function(e){i.from_greenwich=e*s},pm:function(e){i.from_greenwich=(l[e]?l[e]:parseFloat(e))*s},nadgrids:function(e){"@null"===e?i.datumCode="none":i.nadgrids=e},axis:function(e){var t="ewnsud";3===e.length&&-1!==t.indexOf(e.substr(0,1))&&-1!==t.indexOf(e.substr(1,1))&&-1!==t.indexOf(e.substr(2,1))&&(i.axis=e)}};for(t in a)r=a[t],t in o?"function"==typeof(n=o[t])?n(r):i[n]=r:i[t]=r;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i}},function(e,t,r){"use strict";var n=r(397),i=r(164),a=r(163);function o(e){var t=this;if(2===arguments.length){var r=arguments[1];o[e]="string"==typeof r?"+"===r.charAt(0)?i(arguments[1]):a(arguments[1]):r}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(e){Array.isArray(e)?o.apply(t,e):o(e)});if("string"==typeof e){if(e in o)return o[e]}else"EPSG"in e?o["EPSG:"+e.EPSG]=e:"ESRI"in e?o["ESRI:"+e.ESRI]=e:"IAU2000"in e?o["IAU2000:"+e.IAU2000]=e:console.log(e);return}}n(o),e.exports=o},function(e,t,r){"use strict";var n=r(399);n.defaultDatum="WGS84",n.Proj=r(100),n.WGS84=new n.Proj("WGS84"),n.Point=r(385),n.toPoint=r(161),n.defs=r(165),n.transform=r(162),n.mgrs=r(160),n.version=r(384).version,r(383)(n),e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crs=t.CRS=undefined;var l=i(r(2)),n=i(r(166));function i(e){return e&&e.__esModule?e:{"default":e}}window.proj4=n["default"],window.Proj4js=n["default"],l["default"].Proj={},l["default"].Proj._isProj4Obj=function(e){return"undefined"!=typeof e.inverse&&"undefined"!=typeof e.forward},l["default"].Proj.Projection=l["default"].Class.extend({initialize:function(e,t,r){var n=l["default"].Proj._isProj4Obj(e);this._proj=n?e:this._projFromCodeDef(e,t);var i=r;l["default"].Util.isArray(r)&&(i=l["default"].bounds(r)),this.bounds=n?t:i},project:function(e){var t=this._proj.forward([e.lng,e.lat]);return new l["default"].Point(t[0],t[1])},unproject:function(e,t){this.bounds&&(e.x=e.x<this.bounds.min.x?this.bounds.min.x:e.x>this.bounds.max.x?this.bounds.max.x:e.x,e.y=e.y<this.bounds.min.y?this.bounds.min.y:e.y>this.bounds.max.y?this.bounds.max.y:e.y);var r=this._proj.inverse([e.x,e.y]);return new l["default"].LatLng(r[1],r[0],t)},_projFromCodeDef:function(e,t){if(t)n["default"].defs(e,t);else if(n["default"].defs[e]===undefined){var r=e.split(":");if(3<r.length&&(e=r[r.length-3]+":"+r[r.length-1]),n["default"].defs[e]===undefined)throw"No projection definition for code "+e}return(0,n["default"])(e)},getUnits:function(){return this._proj.oProj.units}});var a=t.CRS=l["default"].Class.extend({includes:l["default"].CRS,options:{transformation:new l["default"].Transformation(1,0,-1,0)},initialize:function(e,t){var r,n,i;if(l["default"].Proj._isProj4Obj(e)?(r=(n=e).srsCode,t=t||{},this.projection=new l["default"].Proj.Projection(n,t.bounds)):(r=e,i=(t=t||{}).def||"",this.projection=new l["default"].Proj.Projection(r,i,t.bounds)),l["default"].Util.setOptions(this,t),this.code=r,this.transformation=this.options.transformation,this.options.bounds&&(this.options.bounds=l["default"].bounds(this.options.bounds)),!this.options.origin&&this.options.bounds&&(this.options.origin=[this.options.bounds.min.x,this.options.bounds.max.y]),this.options.origin&&(this.options.origin instanceof l["default"].Point&&(this.options.origin=[this.options.origin.x,this.options.origin.y]),this.transformation=new l["default"].Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales&&0<this.options.scales.length)this._scales=this._toProj4Scales(this.options.scales);else if(this.options.scaleDenominators&&0<this.options.scaleDenominators.length){for(var a=[],o=0;o<this.options.scaleDenominators.length;o++)a[o]=1/this.options.scaleDenominators[o];this._scales=this._toProj4Scales(a)}else if(this.options.resolutions&&0<this.options.resolutions.length){this._scales=[];for(var s=this.options.resolutions.length-1;0<=s;s--)this.options.resolutions[s]&&(this._scales[s]=1/this.options.resolutions[s])}else this.options.bounds&&(this._scales=this._getDefaultProj4ScalesByBounds(this.options.bounds));this.infinite=!this.options.bounds},scale:function(e){var t,r=Math.floor(e);return e===r?this._scales[e]:(t=this._scales[r])+(this._scales[r+1]-t)*(e-r)},zoom:function(e){var t,r,n=this._closestElement(this._scales,e),i=this._scales.indexOf(n);return e===n?i:(r=i+1,(t=this._scales[r])===undefined?Infinity:(e-n)/(t-n)+i)},distance:l["default"].CRS.Earth.distance,R:l["default"].CRS.Earth.R,_closestElement:function(e,t){for(var r,n=e.length;n--;)e[n]<=t&&(r===undefined||r<e[n])&&(r=e[n]);return r},_toProj4Scales:function(e){var t=[];if(!e)return t;for(var r=0;r<e.length;r++){var n=this.projection?this._getMeterPerMapUnit(this.projection.getUnits()):1;t[r]=1/(.0254/(96*e[r])/n)}return t},_getMeterPerMapUnit:function(e){var t=1;return"meter"===e?t=1:"degrees"===e?t=2*Math.PI*6378137/360:"kilometer"===e?t=.001:"inch"===e?t=1/.025399999918:"feet"===e&&(t=.3048),t},_getDefaultProj4ScalesByBounds:function(e){if(!e)return[];for(var t=e.getSize(),r=Math.max(t.x,t.y)/256,n=[],i=0;i<23;i++)n[i]=Math.pow(2,i)/r;return n}}),o=t.crs=function(e,t){return new a(e,t)};l["default"].Proj.CRS=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();t.Easing=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing"}return n(e,[{key:"destroy",value:function(){}},{key:"Linear",value:function(e){return e}},{key:"QuadraticIn",value:function(e){return e*e}},{key:"QuadraticOut",value:function(e){return e*(2-e)}},{key:"QuadraticInOut",value:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},{key:"CubicIn",value:function(e){return e*e*e}},{key:"CubicOut",value:function(e){return--e*e*e+1}},{key:"CubicInOut",value:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},{key:"QuarticIn",value:function(e){return e*e*e*e}},{key:"QuarticOut",value:function(e){return 1- --e*e*e*e}},{key:"QuarticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},{key:"QuinticIn",value:function(e){return e*e*e*e*e}},{key:"QuinticOut",value:function(e){return--e*e*e*e*e+1}},{key:"QuinticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},{key:"SinusoidalIn",value:function(e){return 1-Math.cos(e*Math.PI/2)}},{key:"SinusoidalOut",value:function(e){return Math.sin(e*Math.PI/2)}},{key:"SinusoidalInOut",value:function(e){return.5*(1-Math.cos(Math.PI*e))}},{key:"ExponentialIn",value:function(e){return 0===e?0:Math.pow(1024,e-1)}},{key:"ExponentialOut",value:function(e){return 1===e?1:1-Math.pow(2,-10*e)}},{key:"ExponentialInOut",value:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},{key:"CircularIn",value:function(e){return 1-Math.sqrt(1-e*e)}},{key:"CircularOut",value:function(e){return Math.sqrt(1- --e*e)}},{key:"CircularInOut",value:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},{key:"ElasticIn",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(!r||r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(!r||r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(!r||r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(e){return e*e*(2.70158*e-1.70158)}},{key:"BackOut",value:function(e){return--e*e*(2.70158*e+1.70158)+1}},{key:"BackInOut",value:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},{key:"BounceIn",value:function(e){return 1-this.BounceOut(1-e)}},{key:"BounceOut",value:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},{key:"BounceInOut",value:function(e){return e<.5?.5*this.BounceIn(2*e):.5*this.BounceOut(2*e-1)+.5}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Clip=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(168);t.Clip=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._targetPool=e.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=e.life||1e3,this._delay=e.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop="undefined"!=typeof e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip"}return n(t,[{key:"destroy",value:function(){}},{key:"step",value:function(e){var t=new a.Easing,r=(e-this._startTime)/this._life;if(!(r<0)){r=Math.min(r,1);var n="string"==typeof this.easing?t[this.easing]:this.easing,i="function"==typeof n?n(r):r;return this.fire("frame",i),1==r?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var e=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-e+this.gap}},{key:"fire",value:function(e,t){for(var r=0,n=this._targetPool.length;r<n;r++)this["on"+e]&&this["on"+e](this._targetPool[r],t)}}]),t}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Animator=t.Animation=undefined;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(30),o=r(55),A=r(169),L=r(11),s=r(1);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var k=t.Animation=function(e){function y(e){l(this,y);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,e));return e=e||{},t.stage={},t.onframe=function(){},t._clips=[],t._running=!1,t._time=0,s.Util.extend(t,e),t.CLASS_NAME="SuperMap.LevelRenderer.Animation",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(y,o.Eventful),a(y,[{key:"add",value:function(e){this._clips.push(e)}},{key:"remove",value:function(e){var t=(new i.Util).indexOf(this._clips,e);0<=t&&this._clips.splice(t,1)}},{key:"_update",value:function(){for(var e=(new Date).getTime(),t=e-this._time,r=this._clips,n=r.length,i=[],a=[],o=0;o<n;o++){var s=r[o],l=s.step(e);l&&(i.push(l),a.push(s))}this.stage.update&&this.stage.update();for(var u=0;u<n;)r[u]._needsRemove?(r[u]=r[n-1],r.pop(),n--):u++;n=i.length;for(var c=0;c<n;c++)a[c].fire(i[c]);this._time=e,this.onframe(t),this.dispatch("frame",t)}},{key:"start",value:function(){var t=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},r=this;this._running=!0,this._time=(new Date).getTime(),t(function e(){r._running&&(r._update(),t(e))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(e,t){var r=new u(e,(t=t||{}).loop,t.getter,t.setter);return r.animation=this,r}}],[{key:"_interpolateNumber",value:function(e,t,r){return(t-e)*r+e}},{key:"_interpolateArray",value:function(e,t,r,n,i){var a=e.length;if(1==i)for(var o=0;o<a;o++)n[o]=y._interpolateNumber(e[o],t[o],r);else for(var s=e[0].length,l=0;l<a;l++)for(var u=0;u<s;u++)n[l][u]=y._interpolateNumber(e[l][u],t[l][u],r)}},{key:"_isArrayLike",value:function(e){switch(void 0===e?"undefined":n(e)){case"undefined":case"string":return!1}return"undefined"!=typeof e.length}},{key:"_catmullRomInterpolateArray",value:function(e,t,r,n,i,a,o,s,l){var u=e.length;if(1==l)for(var c=0;c<u;c++)s[c]=y._catmullRomInterpolate(e[c],t[c],r[c],n[c],i,a,o);else for(var h=e[0].length,f=0;f<u;f++)for(var p=0;p<h;p++)s[f][p]=y._catmullRomInterpolate(e[f][p],t[f][p],r[f][p],n[f][p],i,a,o)}},{key:"_catmullRomInterpolate",value:function(e,t,r,n,i,a,o){var s=.5*(r-e),l=.5*(n-t);return(2*(t-r)+s+l)*o+(-3*(t-r)-2*s-l)*a+s*i+t}},{key:"_cloneValue",value:function(e){var t=Array.prototype.slice;if(y._isArrayLike(e)){var r=e.length;if(y._isArrayLike(e[0])){for(var n=[],i=0;i<r;i++)n.push(t.call(e[i]));return n}return t.call(e)}return e}},{key:"rgba2String",value:function(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}}]),y}(),u=t.Animator=function(){function i(e,t,r,n){l(this,i),this._tracks={},this._target=e,this._loop=t||!1,this._getter=r||function(e,t){return e[t]},this._setter=n||function(e,t,r){e[t]=r},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator"}return a(i,[{key:"when",value:function(e,t){for(var r in t)this._tracks[r]||(this._tracks[r]=[],0!==e&&this._tracks[r].push({time:0,value:k._cloneValue(this._getter(this._target,r))})),this._tracks[r].push({time:parseInt(e,10),value:t[r]});return this}},{key:"during",value:function(e){return this._onframeList.push(e),this}},{key:"start",value:function(O){var T=this,w=this._setter,M=this._getter,C=T._onframeList.length,x="spline"===O,E=function(){if(T._clipCount--,0===T._clipCount){T._tracks={};for(var e=T._doneList.length,t=0;t<e;t++)T._doneList[t].call(T)}},e=function(e,a){var o=e.length;if(o){var t=e[0].value,s=k._isArrayLike(t),l=!1,u=s&&k._isArrayLike(t[0])?2:1;e.sort(function(e,t){return e.time-t.time});for(var r=e[o-1].time,c=[],h=[],n=0;n<o;n++){c.push(e[n].time/r);var i=e[n].value;"string"==typeof i&&(0===(i=L.SUtil.Util_color.toArray(i)).length&&(i[0]=i[1]=i[2]=0,i[3]=1),l=!0),h.push(i)}var f,p,y,d,v,m,g,b=0,S=0;if(l)var _=[0,0,0,0];var P=new A.Clip({target:T._target,life:r,loop:T._loop,delay:T._delay,onframe:function(e,t){if(t<S){for(f=Math.min(b+1,o-1),p=f;0<=p&&!(c[p]<=t);p--);p=Math.min(p,o-2)}else{for(p=b;p<o&&!(c[p]>t);p++);p=Math.min(p-1,o-2)}S=t;var r=c[(b=p)+1]-c[p];if(0!==r){if(y=(t-c[p])/r,x)if(v=h[p],d=h[0===p?p:p-1],m=h[o-2<p?o-1:p+1],g=h[o-3<p?o-1:p+2],s)k._catmullRomInterpolateArray(d,v,m,g,y,y*y,y*y*y,M(e,a),u);else{var n=void 0;n=l?k.rgba2String(_):k._catmullRomInterpolate(d,v,m,g,y,y*y,y*y*y),w(e,a,n)}else if(s)k._interpolateArray(h[p],h[p+1],y,M(e,a),u);else{var i=void 0;l?(k._interpolateArray(h[p],h[p+1],y,_,1),i=k.rgba2String(_)):i=k._interpolateNumber(h[p],h[p+1],y),w(e,a,i)}for(p=0;p<C;p++)T._onframeList[p](e,t)}},ondestroy:E});O&&"spline"!==O&&(P.easing=O),T._clipList.push(P),T._clipCount++,T.animation.add(P)}};for(var t in this._tracks)e(this._tracks[t],t);return this}},{key:"stop",value:function(){for(var e=0;e<this._clipList.length;e++){var t=this._clipList[e];this.animation.remove(t)}this._clipList=[]}},{key:"delay",value:function(e){return this._delay=e,this}},{key:"done",value:function(e){return e&&this._doneList.push(e),this}}]),i}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Handler=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(55),u=r(68),c=r(11);t.Handler=function(e){function l(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var n,i,a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,r));a.root=e,a.storage=t,a.painter=r,a._lastX=0,a._lastY=0,a._mouseX=0,a._mouseY=0,a._findHover=null,a._domHover=null,a._findHover=(n=function(e,t,r){var n=this;if(n._draggingTarget&&n._draggingTarget.id==e.id||e.isSilent())return!1;var i=n._event;if(e.isCover(t,r)){if(e.hoverable)if(e.isHoverByRefDataID&&!0===e.isHoverByRefDataID){if(e.refDataID){var a=e.refDataID,o=null;e.refDataHoverGroup&&(o=e.refDataHoverGroup);for(var s=n.storage._shapeList,l=0,u=s.length;l<u;l++){var c=s[l];c.refDataID&&a===c.refDataID&&(o?c.refDataHoverGroup&&o===c.refDataHoverGroup&&n.storage.addHover(c):n.storage.addHover(c))}}}else n.storage.addHover(e);for(var h=e.parent;h;){if(h.clipShape&&!h.clipShape.isCover(n._mouseX,n._mouseY))return!1;h=h.parent}return n._lastHover!=e&&(n._processOutShape(i),n._processDragLeave(i),n._lastHover=e,n._processDragEnter(i)),n._processOverShape(i),n._processDragOver(i),n._hasfound=1,!0}return!1},i=a,function(e,t,r){return n.call(i,e,t,r)}),a._domHover=r.getDomHover(),a.CLASS_NAME="SuperMap.LevelRenderer.Handler";var o={resize:function(e){e=e||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(u.Config.EVENT.RESIZE,e)},click:function(e){e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<10&&this._dispatchAgency(t,u.Config.EVENT.CLICK,e),this._mousemoveHandler(e)},dblclick:function(e){e=e||window.event,e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<5&&this._dispatchAgency(t,u.Config.EVENT.DBLCLICK,e),this._mousemoveHandler(e)},mousewheel:function(e){var t=0<((e=this._zrenderEventFixed(e)).wheelDelta||-e.detail)?1.1:1/1.1,r=this.painter.getLayers(),n=!1;for(var i in r)if("hover"!==i){var a=r[i],o=a.position;if(a.zoomable){a.__zoom=a.__zoom||1;var s=a.__zoom;s*=t,t=(s=Math.max(Math.min(a.maxZoom,s),a.minZoom))/a.__zoom,a.__zoom=s,o[0]-=(this._mouseX-o[0])*(t-1),o[1]-=(this._mouseY-o[1])*(t-1),a.scale[0]*=t,a.scale[1]*=t,n=a.dirty=!0}}n&&this.painter.refresh(),this._dispatchAgency(this._lastHover,u.Config.EVENT.MOUSEWHEEL,e),this._mousemoveHandler(e)},mousemove:function(e){this._clickThreshold++,e=this._zrenderEventFixed(e),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=c.SUtil.Util_event.getX(e),this._mouseY=c.SUtil.Util_event.getY(e);var t=this._mouseX-this._lastX,r=this._mouseY-this._lastY;this._processDragStart(e),this._hasfound=0,this._event=e,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(e),this._processDragLeave(e)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var n="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,t,r),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var i=this.painter.getLayers(),a=!1;for(var o in i)if("hover"!==o){var s=i[o];s.panable&&(n="move",s.position[0]+=t,s.position[1]+=r,a=!0,s.dirty=!0)}a&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?n="move":this._hasfound&&this._lastHover.clickable&&(n="pointer"),this.root.style.cursor=n,this._dispatchAgency(this._lastHover,u.Config.EVENT.MOUSEMOVE,e),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(e){var t=(e=this._zrenderEventFixed(e)).toElement||e.relatedTarget;if(t!=this.root)for(;t&&9!=t.nodeType;){if(t==this.root)return void this._mousemoveHandler(e);t=t.parentNode}e.zrenderX=this._lastX,e.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(e),this._processDrop(e),this._processDragEnd(e),this.painter.refreshHover(),this.dispatch(u.Config.EVENT.GLOBALOUT,e)},mousedown:function(e){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=e.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,e=this._zrenderEventFixed(e),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,u.Config.EVENT.MOUSEDOWN,e),this._lastDownButton=e.button},mouseup:function(e){e=this._zrenderEventFixed(e),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,u.Config.EVENT.MOUSEUP,e),this._processDrop(e),this._processDragEnd(e)},touchstart:function(e){e=this._zrenderEventFixed(e,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(e),this._mousedownHandler(e)},touchmove:function(e){e=this._zrenderEventFixed(e,!0),this._mousemoveHandler(e),this._isDragging&&c.SUtil.Util_event.stop(e)},touchend:function(e){e=this._zrenderEventFixed(e,!0),this._mouseupHandler(e);var t=new Date;t-this._lastTouchMoment<u.Config.EVENT.touchClickDelay&&(this._mobildFindFixed(e),this._clickHandler(e),t-this._lastClickMoment<u.Config.EVENT.touchClickDelay/2&&(this._dblclickHandler(e),this._lastHover&&this._lastHover.clickable&&c.SUtil.Util_event.stop(e)),this._lastClickMoment=t),this.painter.clearHover()}};function s(t,r){return function(e){return t.call(r,e)}}return function(e){var t=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],r=t.length;for(;r--;){var n=t[r];e["_"+n+"Handler"]=s(o[n],e)}}(a),window.addEventListener?(window.addEventListener("resize",a._resizeHandler),c.SUtil.Util_env.os.tablet||c.SUtil.Util_env.os.phone?(e.addEventListener("touchstart",a._touchstartHandler),e.addEventListener("touchmove",a._touchmoveHandler),e.addEventListener("touchend",a._touchendHandler)):(e.addEventListener("click",a._clickHandler),e.addEventListener("dblclick",a._dblclickHandler),e.addEventListener("mousewheel",a._mousewheelHandler),e.addEventListener("mousemove",a._mousemoveHandler),e.addEventListener("mousedown",a._mousedownHandler),e.addEventListener("mouseup",a._mouseupHandler)),e.addEventListener("DOMMouseScroll",a._mousewheelHandler),e.addEventListener("mouseout",a._mouseoutHandler)):(window.attachEvent("onresize",a._resizeHandler),e.attachEvent("onclick",a._clickHandler),e.ondblclick=a._dblclickHandler,e.attachEvent("onmousewheel",a._mousewheelHandler),e.attachEvent("onmousemove",a._mousemoveHandler),e.attachEvent("onmouseout",a._mouseoutHandler),e.attachEvent("onmousedown",a._mousedownHandler),e.attachEvent("onmouseup",a._mouseupHandler)),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i.Eventful),n(l,[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,i.Eventful.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(e,t){return this.bind(e,t),this}},{key:"un",value:function(e,t){return this.unbind(e,t),this}},{key:"trigger",value:function(e,t){var r=u.Config.EVENT;switch(e){case r.RESIZE:case r.CLICK:case r.DBLCLICK:case r.MOUSEWHEEL:case r.MOUSEMOVE:case r.MOUSEDOWN:case r.MOUSEUP:case r.MOUSEOUT:this["_"+e+"Handler"](t)}}},{key:"dispose",value:function(){var e=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),c.SUtil.Util_env.os.tablet||c.SUtil.Util_env.os.phone?(e.removeEventListener("touchstart",this._touchstartHandler),e.removeEventListener("touchmove",this._touchmoveHandler),e.removeEventListener("touchend",this._touchendHandler)):(e.removeEventListener("click",this._clickHandler),e.removeEventListener("dblclick",this._dblclickHandler),e.removeEventListener("mousewheel",this._mousewheelHandler),e.removeEventListener("mousemove",this._mousemoveHandler),e.removeEventListener("mousedown",this._mousedownHandler),e.removeEventListener("mouseup",this._mouseupHandler)),e.removeEventListener("DOMMouseScroll",this._mousewheelHandler),e.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),e.detachEvent("onclick",this._clickHandler),e.detachEvent("dblclick",this._dblclickHandler),e.detachEvent("onmousewheel",this._mousewheelHandler),e.detachEvent("onmousemove",this._mousemoveHandler),e.detachEvent("onmouseout",this._mouseoutHandler),e.detachEvent("onmousedown",this._mousedownHandler),e.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(e){var t=this._lastHover;if(this._isMouseDown&&t&&t.draggable&&!this._draggingTarget&&this._mouseDownTarget==t){if(t.dragEnableTime&&new Date-this._lastMouseDownMoment<t.dragEnableTime)return;var r=t;this._draggingTarget=r,this._isDragging=1,r.invisible=!0,this.storage.mod(r.id),this._dispatchAgency(r,u.Config.EVENT.DRAGSTART,e),this.painter.refresh()}}},{key:"_processDragEnter",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,u.Config.EVENT.DRAGENTER,e,this._draggingTarget)}},{key:"_processDragOver",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,u.Config.EVENT.DRAGOVER,e,this._draggingTarget)}},{key:"_processDragLeave",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,u.Config.EVENT.DRAGLEAVE,e,this._draggingTarget)}},{key:"_processDrop",value:function(e){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,u.Config.EVENT.DROP,e,this._draggingTarget))}},{key:"_processDragEnd",value:function(e){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,u.Config.EVENT.DRAGEND,e),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(e){this._dispatchAgency(this._lastHover,u.Config.EVENT.MOUSEOVER,e)}},{key:"_processOutShape",value:function(e){this._dispatchAgency(this._lastHover,u.Config.EVENT.MOUSEOUT,e)}},{key:"_dispatchAgency",value:function(e,t,r,n){var i="on"+t,a={type:t,event:r,target:e,cancelBubble:!1},o=e;for(n&&(a.dragged=n);o&&(o[i]&&(a.cancelBubble=o[i](a)),o.dispatch(t,a),o=o.parent,!a.cancelBubble););e?a.cancelBubble||this.dispatch(t,a):n||this.dispatch(t,{type:t,event:r})}},{key:"_iterateAndFindHover",value:function(){for(var e,t=c.SUtil.Util_matrix.create(),r=this.storage.getShapeList(),n=[0,0],i=r.length-1;0<=i;i--){var a=r[i];if(void 0!==a.zlevel&&(e=this.painter.getLayer(a.zlevel,e),n[0]=this._mouseX,n[1]=this._mouseY,e.needTransform&&(c.SUtil.Util_matrix.invert(t,e.transform),c.SUtil.Util_vector.applyTransform(n,n,t))),this._findHover(a,n[0],n[1]))break}}},{key:"_mobildFindFixed",value:function(e){var t=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=e.zrenderX,this._mouseY=e.zrenderY,this._event=e,this._iterateAndFindHover();for(var r=0;!this._lastHover&&r<t.length;r++){var n=t[r];n.x&&(this._mouseX+=n.x),n.y&&(this._mouseX+=n.y),this._iterateAndFindHover()}this._lastHover&&(e.zrenderX=this._mouseX,e.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(e,t){if(e.zrenderFixed)return e;if(t){var r="touchend"!=e.type?e.targetTouches[0]:e.changedTouches[0];if(r){var n=this.root.getBoundingClientRect();e.zrenderX=r.clientX-n.left,e.zrenderY=r.clientY-n.top}}else{var i=(e=e||window.event).toElement||e.relatedTarget||e.srcElement||e.target;i&&i!=this._domHover&&(e.zrenderX=("undefined"!=typeof e.offsetX?e.offsetX:e.layerX)+i.offsetLeft,e.zrenderY=("undefined"!=typeof e.offsetY?e.offsetY:e.layerY)+i.offsetTop)}return e.zrenderFixed=1,e}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}]),l}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaintLayer=t.Painter=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(71),c=r(103),l=r(1),o=r(30),v=r(68),m=r(11);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=t.Painter=function(){function s(e,t){u(this,s),this.root=e,this.storage=t,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,s.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var r=document.createElement("div");(this._domRoot=r).style.position="relative",r.style.overflow="hidden",r.style.width=this._width+"px",r.style.height=this._height+"px",this.root.appendChild(r),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=s.createDom(l.Util.createUniqueID("SuperMap.Theme_background_"),"div",this),r.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var n=new f(l.Util.createUniqueID("_highLightLayer_"),this);this._layers.hover=n,r.appendChild(n.dom),n.initContext(),n.dom.onselectstart=a,n.dom.style["-webkit-user-select"]="none",n.dom.style["user-select"]="none",n.dom.style["-webkit-touch-callout"]="none";var i=this;function a(){return!1}this.updatePainter=function(e,t){i.refreshShapes(e,t)}}return i(s,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(e){return this.refresh(e,!0),this}},{key:"refresh",value:function(e,t){var r=this.storage.getShapeList(!0);return this._paintList(r,t),"function"==typeof e&&e(),this}},{key:"_paintList",value:function(e,t){var r,n,i;for(var a in void 0===t&&(t=!1),this._updateLayerStatus(e),this._layers)"hover"!==a&&(this._layers[a].unusedCount++,this._layers[a].updateTransform());for(var o=[],s=0,l=e.length;s<l;s++){var u=e[s];if(n!==u.zlevel&&(r&&r.needTransform&&i.restore(),i=(r=this.getLayer(u.zlevel)).ctx,n=u.zlevel,r.unusedCount=0,(r.dirty||t)&&r.clear(),r.needTransform&&(i.save(),r.setTransform(i))),i&&u.__startClip){var c=u.__startClip;if(i.save(),c.needTransform){var h=c.transform;m.SUtil.Util_matrix.invert(o,h),i.transform(h[0],h[1],h[2],h[3],h[4],h[5])}if(i.beginPath(),c.buildPath(i,c.style),i.clip(),c.needTransform){var f=o;i.transform(f[0],f[1],f[2],f[3],f[4],f[5])}}if((r&&r.dirty||t)&&!u.invisible&&(!u.onbrush||u.onbrush&&!u.onbrush(i,!1)))if(v.Config.catchBrushException)try{u.brush(i,!1,this.updatePainter)}catch(d){m.SUtil.Util_log(d,"brush error of "+u.type,u)}else u.brush(i,!1,this.updatePainter);i&&u.__stopClip&&i.restore(),u.__dirty=!1}for(var p in i&&r&&r.needTransform&&i.restore(),this._layers)if("hover"!==p){var y=this._layers[p];y.dirty=!1,1==y.unusedCount&&y.clear()}}},{key:"getLayer",value:function(e){var t=this._layers[e];if(!t){var r=this._zlevelList.length,n=null,i=-1;if(0<r&&e>this._zlevelList[0]){for(i=0;i<r-1&&!(this._zlevelList[i]<e&&this._zlevelList[i+1]>e);i++);n=this._layers[this._zlevelList[i]]}this._zlevelList.splice(i+1,0,e),t=new f(l.Util.createUniqueID("_levelLayer_"+e),this);var a=n?n.dom:this._bgDom;a.nextSibling?a.parentNode.insertBefore(t.dom,a.nextSibling):a.parentNode.appendChild(t.dom),t.initContext(),this._layers[e]=t,this._layerConfig[e]&&(new o.Util).merge(t,this._layerConfig[e],!0),t.updateTransform()}return t}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(e){var t=this._layers,r={};for(var n in t)"hover"!==n&&(r[n]=t[n].elCount,t[n].elCount=0);for(var i=0;i<e.length;i++){var a=e[i],o=t[a.zlevel];if(o){if(o.elCount++,o.dirty)continue;o.dirty=a.__dirty}}for(var s in t)"hover"!==s&&r[s]!==t[s].elCount&&(t[s].dirty=!0)}},{key:"refreshShapes",value:function(e,t){for(var r=0,n=e.length;r<n;r++){var i=e[r];this.storage.mod(i.id)}return this.refresh(t),this}},{key:"clear",value:function(){for(var e in this._layers)"hover"!=e&&this._layers[e].clear();return this}},{key:"modLayer",value:function(e,t){if(t){this._layerConfig[e]?(new o.Util).merge(this._layerConfig[e],t,!0):this._layerConfig[e]=t;var r=this._layers[e];r&&(new o.Util).merge(r,this._layerConfig[e],!0)}}},{key:"delLayer",value:function(e){var t=this._layers[e];t&&(this.modLayer(e,{position:t.position,rotation:t.rotation,scale:t.scale}),t.dom.parentNode.removeChild(t.dom),delete this._layers[e],this._zlevelList.splice((new o.Util).indexOf(this._zlevelList,e),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var e=this.storage.getHoverShapes(!0),t=0,r=e.length;t<r;t++)this._brushHover(e[t]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var e=this._layers.hover;return e&&e.clear(),this}},{key:"resize",value:function(){var e=this._domRoot;e.style.display="none";var t=this._getWidth(),r=this._getHeight();if(e.style.display="",this._width!=t||r!=this._height){for(var n in this._width=t,this._height=r,e.style.width=t+"px",e.style.height=r+"px",this._layers)this._layers[n].resize(t,r);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(e){var t=this._layers[e];t&&t.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(e,t,r){var n=s.createDom(l.Util.createUniqueID("SuperMap.Theme.image_"),"canvas",this);this._bgDom.appendChild(n);var i=n.getContext("2d");1!=s.devicePixelRatio&&i.scale(s.devicePixelRatio,s.devicePixelRatio),i.fillStyle=t||"#fff",i.rect(0,0,this._width*s.devicePixelRatio,this._height*s.devicePixelRatio),i.fill();var a=this;this.storage.iterShape(function(e){if(!e.invisible&&(!e.onbrush||e.onbrush&&!e.onbrush(i,!1)))if(v.Config.catchBrushException)try{e.brush(i,!1,a.updatePainter)}catch(t){m.SUtil.Util_log(t,"brush error of "+e.type,e)}else e.brush(i,!1,a.updatePainter)},{normal:"up",update:!0});var o=n.toDataURL(e,r);return i=null,this._bgDom.removeChild(n),o}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(e){var t=this._layers.hover.ctx;if(!e.onbrush||e.onbrush&&!e.onbrush(t,!0)){var r=this.getLayer(e.zlevel);if(r.needTransform&&(t.save(),r.setTransform(t)),v.Config.catchBrushException)try{e.brush(t,!0,this.updatePainter)}catch(n){m.SUtil.Util_log(n,"hoverBrush error of "+e.type,e)}else e.brush(t,!0,this.updatePainter);r.needTransform&&t.restore()}}},{key:"_shapeToImage",value:function(e,t,r,n,i){var a=document.createElement("canvas"),o=a.getContext("2d"),s=i||window.devicePixelRatio||1;a.style.width=r+"px",a.style.height=n+"px",a.setAttribute("width",r*s),a.setAttribute("height",n*s),o.clearRect(0,0,r*s,n*s);var l={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[0,0,0],t.rotation=0,t.scale=[1,1],t&&t.brush(o,!1);var u=new c.SmicImage({id:e,style:{x:0,y:0,image:a}});return null!=l.position&&(u.position=t.position=l.position),null!=l.rotation&&(u.rotation=t.rotation=l.rotation),null!=l.scale&&(u.scale=t.scale=l.scale),u}},{key:"_createShapeToImageProcessor",value:function(){var i=this;return function(e,t,r,n){return i._shapeToImage(e,t,r,n,s.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(e){if(!(e instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var t=0;t<e.length;t++)this.storage.addHover(e[t]),this._brushHover(e[t])}}],[{key:"createDom",value:function(e,t,r){var n=document.createElement(t),i=r._width,a=r._height;return n.style.position="absolute",n.style.left=0,n.style.top=0,n.style.width=i+"px",n.style.height=a+"px",n.setAttribute("width",i*s.devicePixelRatio),n.setAttribute("height",a*s.devicePixelRatio),n.setAttribute("id",e),n}}]),s}(),f=t.PaintLayer=function(e){function n(e,t){u(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.dom=null,r.domBack=null,r.ctxBack=null,r.painter=t,r.unusedCount=0,r.config=null,r.dirty=!0,r.elCount=0,r.clearColor=0,r.motionBlur=!1,r.lastFrameAlpha=.7,r.zoomable=!1,r.panable=!1,r.maxZoom=Infinity,r.minZoom=0,r.ctx=null,r.dom=h.createDom(l.Util.createUniqueID("SuperMap.Theme"+e),"canvas",t),r.dom.onselectstart=function(){return!1},r.dom.style["-webkit-user-select"]="none",r.dom.style["user-select"]="none",r.dom.style["-webkit-touch-callout"]="none",r.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.Transformable),i(n,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,a.Transformable.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!=h.devicePixelRatio&&this.ctx.scale(h.devicePixelRatio,h.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=h.createDom(l.Util.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=h.devicePixelRatio&&this.ctxBack.scale(h.devicePixelRatio,h.devicePixelRatio)}},{key:"resize",value:function(e,t){this.dom.style.width=e+"px",this.dom.style.height=t+"px",this.dom.setAttribute("width",e*h.devicePixelRatio),this.dom.setAttribute("height",t*h.devicePixelRatio),1!=h.devicePixelRatio&&this.ctx.scale(h.devicePixelRatio,h.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",e*h.devicePixelRatio),this.domBack.setAttribute("height",t*h.devicePixelRatio),1!=h.devicePixelRatio&&this.ctxBack.scale(h.devicePixelRatio,h.devicePixelRatio))}},{key:"clear",value:function(){var e=this.dom,t=this.ctx,r=e.width,n=e.height,i=this.clearColor,a=this.motionBlur,o=this.lastFrameAlpha;if(a&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,r/h.devicePixelRatio,n/h.devicePixelRatio)),i?(t.save(),t.fillStyle=this.config.clearColor,t.fillRect(0,0,r/h.devicePixelRatio,n/h.devicePixelRatio),t.restore()):t.clearRect(0,0,r/h.devicePixelRatio,n/h.devicePixelRatio),a){var s=this.domBack;t.save(),t.globalAlpha=o,t.drawImage(s,0,0,r/h.devicePixelRatio,n/h.devicePixelRatio),t.restore()}}}]),n}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Group=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(55),s=r(71);t.Group=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return e=e||{},t.id=null,t.type="group",t.clipShape=null,t._children=[],t._storage=null,t.__dirty=!0,t.ignore=!1,a.Util.extend(t,e),t.id=t.id||a.Util.createUniqueID("smShapeGroup_"),t.CLASS_NAME="SuperMap.LevelRenderer.Group",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.SuperMap.mixin(o.Eventful,s.Transformable)),n(r,[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(e){return this._children[e]}},{key:"addChild",value:function(e){e!=this&&e.parent!=this&&(e.parent&&e.parent.removeChild(e),this._children.push(e),(e.parent=this)._storage&&this._storage!==e._storage&&(this._storage.addToMap(e),e instanceof r&&e.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(e){var t=a.Util.indexOf(this._children,e);this._children.splice(t,1),e.parent=null,this._storage&&(this._storage.delFromMap(e.id),e instanceof r&&e.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(e,t){for(var r=!!t,n=0;n<this._children.length;n++){var i=this._children[n];r?e.call(t,i):e(i)}}},{key:"traverse",value:function(e,t){for(var r=!!t,n=0;n<this._children.length;n++){var i=this._children[n];r?e.call(t,i):e(i),"group"===i.type&&i.traverse(e,t)}}},{key:"addChildrenToStorage",value:function(e){for(var t=0;t<this._children.length;t++){var r=this._children[t];e.addToMap(r),"group"===r.type&&r.addChildrenToStorage(e)}}},{key:"delChildrenFromStorage",value:function(e){for(var t=0;t<this._children.length;t++){var r=this._children[t];e.delFromMap(r.id),"group"===r.type&&r.delChildrenFromStorage(e)}}},{key:"modSelf",value:function(){this.__dirty=!0}}]),r}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),s=r(30),l=r(173);t.Storage=function(){function c(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage"}return n(c,[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(e,t){if(!t){t={hover:!1,normal:"down",update:!1}}if(t.hover)for(var r=0,n=this._hoverElements.length;r<n;r++){var i=this._hoverElements[r];if(i.updateTransform(),e(i))return this}switch(t.update&&this.updateShapeList(),t.normal){case"down":for(var a=this._shapeList.length;a--;)if(e(this._shapeList[a]))return this;break;default:for(var o=0,s=this._shapeList.length;o<s;o++)if(e(this._shapeList[o]))return this}return this}},{key:"getHoverShapes",value:function(e){for(var t=[],r=this._hoverElements.length,n=0;n<r;n++){t.push(this._hoverElements[n]);var i=this._hoverElements[n].hoverConnect;if(i)for(var a,o=0,s=(i=i instanceof Array?i:[i]).length;o<s;o++)(a=i[o].id?i[o]:this.get(i[o]))&&t.push(a)}if(t.sort(c.shapeCompareFunc),e)for(var l=0,u=t.length;l<u;l++)t[l].updateTransform();return t}},{key:"getShapeList",value:function(e){return e&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var e=this._roots.length,t=0;t<e;t++){var r=this._roots[t];this._updateAndAddShape(r)}this._shapeList.length=this._shapeListOffset;for(var n=this._shapeList.length,i=0;i<n;i++)this._shapeList[i].__renderidx=i;this._shapeList.sort(c.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(e,t){if(!e.ignore)if(e.updateTransform(),"group"==e.type){e.clipShape&&((e.clipShape.parent=e).clipShape.updateTransform(),t?(t=t.slice()).push(e.clipShape):t=[e.clipShape]);for(var r=0;r<e._children.length;r++){var n=e._children[r];n.__dirty=e.__dirty||n.__dirty,this._updateAndAddShape(n,t)}e.__dirty=!1}else e.__clipShapes=t,this._shapeList[this._shapeListOffset++]=e}},{key:"mod",value:function(e,t){var r=this._elements[e];if(r&&(r.modSelf(),t))if(t.parent||t._storage||t.__startClip){var n={};for(var i in t)"parent"!=i&&"_storage"!=i&&"__startClip"!=i&&t.hasOwnProperty(i)&&(n[i]=t[i]);(new s.Util).merge(r,n,!0)}else(new s.Util).merge(r,t,!0);return this}},{key:"drift",value:function(e,t,r){var n=this._elements[e];return n&&(n.needTransform=!0,"horizontal"===n.draggable?r=0:"vertical"===n.draggable&&(t=0),(!n.ondrift||n.ondrift&&!n.ondrift(t,r))&&n.drift(t,r)),this}},{key:"addHover",value:function(e){return e.updateNeedTransform(),this._hoverElements.push(e),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return 0<this._hoverElements.length}},{key:"addRoot",value:function(e){e instanceof l.Group&&e.addChildrenToStorage(this),this.addToMap(e),this._roots.push(e)}},{key:"delRoot",value:function(e){if(void 0===e){for(var t=0;t<this._roots.length;t++){var r=this._roots[t];r instanceof l.Group&&r.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(e instanceof Array)for(var n=e.length,i=0;i<n;i++)this.delRoot(e[i]);else{var a;a="string"==typeof e?this._elements[e]:e;var o=(new s.Util).indexOf(this._roots,a);0<=o&&(this.delFromMap(a.id),this._roots.splice(o,1),a instanceof l.Group&&a.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(e){return e instanceof l.Group&&(e._storage=this),e.modSelf(),this._elements[e.id]=e,this}},{key:"get",value:function(e){return this._elements[e]}},{key:"delFromMap",value:function(e){var t=this._elements[e];return t&&(delete this._elements[e],t instanceof l.Group&&(t._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}],[{key:"shapeCompareFunc",value:function(e,t){return e.zlevel==t.zlevel?e.z==t.z?e.__renderidx-t.__renderidx:e.z-t.z:e.zlevel-t.zlevel}}]),c}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Render=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),u=r(30),i=r(1),a=r(174),o=r(172),s=r(171),l=r(170),c=r(11);t.Render=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.id=e,this.storage=new a.Storage,this.painter=new o.Painter(t,this.storage),this.handler=new s.Handler(t,this.storage,this.painter),this.animatingElements=[],this.animation=new l.Animation({stage:{update:r.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render"}return n(r,[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(e){return this.storage.addRoot(e),this}},{key:"addGroup",value:function(e){return this.storage.addRoot(e),this}},{key:"delShape",value:function(e){return this.storage.delRoot(e),this}},{key:"delGroup",value:function(e){return this.storage.delRoot(e),this}},{key:"modShape",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modGroup",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modLayer",value:function(e,t){return this.painter.modLayer(e,t),this}},{key:"addHoverShape",value:function(e){return this.storage.addHover(e),this}},{key:"render",value:function(e){return this.painter.render(e),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(e){return this.painter.refresh(e),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(e){return this.painter.refreshHover(e),this}},{key:"refreshShapes",value:function(e,t){return this.painter.refreshShapes(e,t),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(t,e,r){if("string"==typeof t&&(t=this.storage.get(t)),t){var n;if(e){for(var i=e.split("."),a=t,o=0,s=i.length;o<s;o++)a&&(a=a[i[o]]);a&&(n=a)}else n=t;if(!n)return void c.SUtil.Util_log('Property "'+e+'" is not existed in element '+t.id);var l=this.animatingElements;return"undefined"==typeof t.__aniCount&&(t.__aniCount=0),0===t.__aniCount&&l.push(t),t.__aniCount++,this.animation.animate(n,{loop:r}).done(function(){if(t.__aniCount--,0===t.__aniCount){var e=(new u.Util).indexOf(l,t);l.splice(e,1)}})}c.SUtil.Util_log("Element not existed")}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(e,t,r){return this.painter.toDataURL(e,t,r)}},{key:"shapeToImage",value:function(e,t,r){var n=i.Util.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(n,e,t,r)}},{key:"on",value:function(e,t){return this.handler.on(e,t),this}},{key:"un",value:function(e,t){return this.handler.un(e,t),this}},{key:"trigger",value:function(e,t){return this.handler.trigger(e,t),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(e){return this.painter.updateHoverLayer(e),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}],[{key:"getFrameCallback",value:function(n){return function(){var e=n.animatingElements;if(e instanceof Array){for(var t=0,r=e.length;t<r;t++)n.storage.mod(e[t].id);(e.length||n._needsRefreshNextFrame)&&n.refresh()}}}}]),r}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RankSymbol=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(29);var o=t.RankSymbol=function(e){function s(e,t,r,n,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,t,r,n,i,a));return o.setting=null,n&&n.codomain&&(o.setting=n,o.DVBCodomain=o.setting.codomain),o.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol",o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,a.Graph),n(s,[{key:"destroy",value:function(){this.setting=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;e.XOffset&&(this.XOffset=e.XOffset),e.YOffset&&(this.YOffset=e.YOffset),this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var t=this.width,r=this.height,n=this.location;this.origonPoint=[n[0]-t/2,n[1]-r/2];var i=this.origonPoint;this.chartBox=[i[0],i[1]+r,i[0]+t,i[1]];var a=this.chartBox,o=this.DVBParameter;this.dataViewBox=[a[0]+o[0],a[1]-o[1],a[2]-o[2],a[3]+o[3]];var s=this.dataViewBox;return!(s[0]>=s[2]||s[1]<=s[3])&&(this.DVBOrigonPoint=[s[0],s[3]],this.DVBWidth=Math.abs(s[2]-s[0]),this.DVBHeight=Math.abs(s[1]-s[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-i[0],this.DVBOrigonPoint[1]-i[1]],!0)}}]),s}();i.SuperMap.Feature.Theme.RankSymbol=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmicSector=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(12),p=r(11);t.SmicSector=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.type="smicsector",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.Shape),n(r,[{key:"destroy",value:function(){this.type=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.x+r[0],i=t.y+r[1],a=t.r0||0,o=t.r,s=t.startAngle,l=t.endAngle,u=t.clockWise||!1;s=p.SUtil.Util_math.degreeToRadian(s),l=p.SUtil.Util_math.degreeToRadian(l),u||(s=-s,l=-l);var c=p.SUtil.Util_math.cos(s),h=p.SUtil.Util_math.sin(s);e.moveTo(c*a+n,h*a+i),e.lineTo(c*o+n,h*o+i),e.arc(n,i,o,s,l,!u),e.lineTo(p.SUtil.Util_math.cos(l)*a+n,p.SUtil.Util_math.sin(l)*a+i),0!==a&&e.arc(n,i,a,l,s,u),e.closePath()}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition,r=p.SUtil.Util_vector.create(),n=p.SUtil.Util_vector.create(),i=p.SUtil.Util_vector.create(),a=p.SUtil.Util_vector.create(),o=e.x+t[0],s=e.y+t[1],l=e.r0||0,u=e.r,c=p.SUtil.Util_math.degreeToRadian(e.startAngle),h=p.SUtil.Util_math.degreeToRadian(e.endAngle),f=e.clockWise;return f||(c=-c,h=-h),1<l?p.SUtil.Util_computeBoundingBox.arc(o,s,l,c,h,!f,r,i):(r[0]=i[0]=o,r[1]=i[1]=s),p.SUtil.Util_computeBoundingBox.arc(o,s,u,c,h,!f,n,a),p.SUtil.Util_vector.min(r,r,n),p.SUtil.Util_vector.max(i,i,a),e.__rect={x:r[0],y:r[1],width:i[0]-r[0],height:i[1]-r[1]},e.__rect}}]),r}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmicCircle=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(12);t.SmicCircle=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.type="smiccircle",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.Shape),n(r,[{key:"destroy",value:function(){this.type=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.x+r[0],i=t.y+r[1];return e.moveTo(n+t.r,i),e.arc(n,i,t.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition,n=e.x+r[0],i=e.y+r[1],a=e.r;return t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(n-a-t/2),y:Math.round(i-a-t/2),width:2*a+t,height:2*a+t},e.__rect}}]),r}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();t.Matrix=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix"}return n(e,[{key:"create",value:function(){var e=new(0,this.ArrayCtor)(6);return this.identity(e),e}},{key:"identity",value:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}},{key:"mul",value:function(e,t,r){return e[0]=t[0]*r[0]+t[2]*r[1],e[1]=t[1]*r[0]+t[3]*r[1],e[2]=t[0]*r[2]+t[2]*r[3],e[3]=t[1]*r[2]+t[3]*r[3],e[4]=t[0]*r[4]+t[2]*r[5]+t[4],e[5]=t[1]*r[4]+t[3]*r[5]+t[5],e}},{key:"translate",value:function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}},{key:"rotate",value:function(e,t,r){var n=t[0],i=t[2],a=t[4],o=t[1],s=t[3],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+o*u,e[1]=-n*u+o*c,e[2]=i*c+s*u,e[3]=-i*u+c*s,e[4]=c*a+u*l,e[5]=c*l-u*a,e}},{key:"scale",value:function(e,t,r){var n=r[0],i=r[1];return e[0]=t[0]*n,e[1]=t[1]*i,e[2]=t[2]*n,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*i,e}},{key:"invert",value:function(e,t){var r=t[0],n=t[2],i=t[4],a=t[1],o=t[3],s=t[5],l=r*o-a*n;return l?(l=1/l,e[0]=o*l,e[1]=-a*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*s-o*i)*l,e[5]=(a*i-r*s)*l,e):null}},{key:"mulVector",value:function(e,t,r){var n=t[0],i=t[2],a=t[4],o=t[1],s=t[3],l=t[5];return e[0]=r[0]*n+r[1]*i+a,e[1]=r[0]*o+r[1]*s+l,e}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();t.Math=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math"}return n(e,[{key:"sin",value:function(e,t){return window.Math.sin(t?e*this._radians:e)}},{key:"cos",value:function(e,t){return window.Math.cos(t?e*this._radians:e)}},{key:"degreeToRadian",value:function(e){return e*this._radians}},{key:"radianToDegree",value:function(e){return e/this._radians}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Log=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(68);t.Log=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!==i.Config.debugMode)if(1==i.Config.debugMode)for(var e in arguments)throw new Error(arguments[e]);else if(1<i.Config.debugMode)for(var t in arguments)console.log(arguments[t])}}return n(e,[{key:"destory",value:function(){return!0}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();t.Http=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http"}return n(e,[{key:"get",value:function(e,t,r){if("object"===(void 0===e?"undefined":a(e))){var n=e;e=n.url,t=n.onsuccess,r=n.onerror}var i=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");i.open("GET",e,!0),i.onreadystatechange=function(){4==i.readyState&&(200<=i.status&&i.status<300||304===i.status?t&&t(i.responseText):r&&r(),i.onreadystatechange=new Function,i=null)},i.send(null)}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();t.Event=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stop="function"==typeof window.addEventListener?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event"}return n(e,[{key:"getX",value:function(e){return"undefined"!=typeof e.zrenderX&&e.zrenderX||"undefined"!=typeof e.offsetX&&e.offsetX||"undefined"!=typeof e.layerX&&e.layerX||"undefined"!=typeof e.clientX&&e.clientX}},{key:"getY",value:function(e){return"undefined"!=typeof e.zrenderY&&e.zrenderY||"undefined"!=typeof e.offsetY&&e.offsetY||"undefined"!=typeof e.layerY&&e.layerY||"undefined"!=typeof e.clientY&&e.clientY}},{key:"getDelta",value:function(e){return"undefined"!=typeof e.zrenderDelta&&e.zrenderDelta||"undefined"!=typeof e.wheelDelta&&e.wheelDelta||"undefined"!=typeof e.detail&&-e.detail}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();t.Env=function(){function P(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,P),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var e,t,r,n,i,a,o,s,l,u,c,h,f,p,y,d,v,m,g,b,S,_=this;return e=navigator.userAgent,t=_.os={},r=_.browser={},n=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=e.match(/(Android);?[\s\/]+([\d.]+)?/),a=e.match(/(iPad).*OS\s([\d_]+)/),o=e.match(/(iPod)(.*OS\s([\d_]+))?/),s=!a&&e.match(/(iPhone\sOS)\s([\d_]+)/),l=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=l&&e.match(/TouchPad/),c=e.match(/Kindle\/([\d.]+)/),h=e.match(/Silk\/([\d._]+)/),f=e.match(/(BlackBerry).*Version\/([\d.]+)/),p=e.match(/(BB10).*Version\/([\d.]+)/),y=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),d=e.match(/PlayBook/),v=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),m=e.match(/Firefox\/([\d.]+)/),g=e.match(/MSIE ([\d.]+)/),b=n&&e.match(/Mobile\//)&&!v,S=e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!v,(r.webkit=!!n)&&(r.version=n[1]),i&&(t.android=!0,t.version=i[2]),s&&!o&&(t.ios=t.iphone=!0,t.version=s[2].replace(/_/g,".")),a&&(t.ios=t.ipad=!0,t.version=a[2].replace(/_/g,".")),o&&(t.ios=t.ipod=!0,t.version=o[3]?o[3].replace(/_/g,"."):null),l&&(t.webos=!0,t.version=l[2]),u&&(t.touchpad=!0),f&&(t.blackberry=!0,t.version=f[2]),p&&(t.bb10=!0,t.version=p[2]),y&&(t.rimtabletos=!0,t.version=y[2]),d&&(r.playbook=!0),c&&(t.kindle=!0,t.version=c[1]),h&&(r.silk=!0,r.version=h[1]),!h&&t.android&&e.match(/Kindle Fire/)&&(r.silk=!0),v&&(r.chrome=!0,r.version=v[1]),m&&(r.firefox=!0,r.version=m[1]),g&&(r.ie=!0,r.version=g[1]),b&&(e.match(/Safari/)||t.ios)&&(r.safari=!0),S&&(r.webview=!0),g&&(r.ie=!0,r.version=g[1]),t.tablet=!!(a||d||i&&!e.match(/Mobile/)||m&&e.match(/Tablet/)||g&&!e.match(/Phone/)&&e.match(/Touch/)),t.phone=!(t.tablet||t.ipod||!(i||s||l||f||p||v&&e.match(/Android/)||v&&e.match(/CriOS\/([\d.]+)/)||m&&e.match(/Mobile/)||g&&e.match(/Touch/))),{browser:r,os:t,canvasSupported:!!document.createElement("canvas").getContext}}return n(P,[{key:"destory",value:function(){return!0}}]),P}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComputeBoundingBox=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),d=r(70),y=r(69);t.ComputeBoundingBox=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox"}return n(e,[{key:"computeBoundingBox",value:function(e,t,r){if(0!==e.length){for(var n=e[0][0],i=e[0][0],a=e[0][1],o=e[0][1],s=1;s<e.length;s++){var l=e[s];l[0]<n&&(n=l[0]),l[0]>i&&(i=l[0]),l[1]<a&&(a=l[1]),l[1]>o&&(o=l[1])}t[0]=n,t[1]=a,r[0]=i,r[1]=o}}},{key:"cubeBezier",value:function(e,t,r,n,i,a){var o=new d.Curve,s=[];o.cubicExtrema(e[0],t[0],r[0],n[0],s);for(var l=0;l<s.length;l++)s[l]=o.cubicAt(e[0],t[0],r[0],n[0],s[l]);var u=[];o.cubicExtrema(e[1],t[1],r[1],n[1],u);for(var c=0;c<u.length;c++)u[c]=o.cubicAt(e[1],t[1],r[1],n[1],u[c]);s.push(e[0],n[0]),u.push(e[1],n[1]);var h=Math.min.apply(null,s),f=Math.max.apply(null,s),p=Math.min.apply(null,u),y=Math.max.apply(null,u);i[0]=h,i[1]=p,a[0]=f,a[1]=y}},{key:"quadraticBezier",value:function(e,t,r,n,i){var a=new d.Curve,o=a.quadraticExtremum(e[0],t[0],r[0]),s=a.quadraticExtremum(e[1],t[1],r[1]),l=1-(o=Math.max(Math.min(o,1),0)),u=1-(s=Math.max(Math.min(s,1),0)),c=l*l*e[0]+2*l*o*t[0]+o*o*r[0],h=l*l*e[1]+2*l*o*t[1]+o*o*r[1],f=u*u*e[0]+2*u*s*t[0]+s*s*r[0],p=u*u*e[1]+2*u*s*t[1]+s*s*r[1];n[0]=Math.min(e[0],r[0],c,f),n[1]=Math.min(e[1],r[1],h,p),i[0]=Math.max(e[0],r[0],c,f),i[1]=Math.max(e[1],r[1],h,p)}},{key:"arc",value:function(e,t,r,n,i,a,o,s){var l=new y.Vector,u=l.create(),c=l.create(),h=l.create();if(u[0]=Math.cos(n)*r+e,u[1]=Math.sin(n)*r+t,c[0]=Math.cos(i)*r+e,c[1]=Math.sin(i)*r+t,l.min(o,u,c),l.max(s,u,c),(n%=2*Math.PI)<0&&(n+=2*Math.PI),(i%=2*Math.PI)<0&&(i+=2*Math.PI),i<n&&!a?i+=2*Math.PI:n<i&&a&&(n+=2*Math.PI),a){var f=i;i=n,n=f}for(var p=0;p<i;p+=Math.PI/2)n<p&&(h[0]=Math.cos(p)*r+e,h[1]=Math.sin(p)*r+t,l.min(o,h,o),l.max(s,h,s))}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Area=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(30),a=r(70);t.Area=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.util=new i.Util,this.curve=new a.Curve,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area"}return n(e,[{key:"normalizeRadian",value:function(e){return(e%=this.PI2)<0&&(e+=this.PI2),e}},{key:"isInside",value:function(e,t,r,n){if(!t||!e)return!1;var i=e.type;this._ctx=this._ctx||this.util.getContext();var a=this._mathMethod(e,t,r,n);if(void 0!==a)return a;if(e.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(e,this._ctx,t,r,n);switch(i){case"ellipse":case"smicellipse":return!0;case"trochoid":var o="out"==t.location?t.r1+t.r2+t.d:t.r1-t.r2+t.d;return this.isInsideCircle(t,r,n,o);case"rose":return this.isInsideCircle(t,r,n,t.maxr);default:return!1}}},{key:"_mathMethod",value:function(e,t,r,n){switch(e.type){case"bezier-curve":return"undefined"==typeof t.cpX2?this.isInsideQuadraticStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.xEnd,t.yEnd,t.lineWidth,r,n):this.isInsideCubicStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.cpX2,t.cpY2,t.xEnd,t.yEnd,t.lineWidth,r,n);case"line":return this.isInsideLine(t.xStart,t.yStart,t.xEnd,t.yEnd,t.lineWidth,r,n);case"broken-line":return this.isInsideBrokenLine(t.pointList,t.lineWidth,r,n);case"smicbroken-line":var i=r,a=n;return e.refOriginalPosition&&(i=r-e.refOriginalPosition[0],a=n-e.refOriginalPosition[1]),this.isInsideBrokenLine(t.pointList,t.lineWidth,i,a);case"ring":return this.isInsideRing(t.x,t.y,t.r0,t.r,r,n);case"smicring":var o=t.x,s=t.y;return e.refOriginalPosition&&(o=t.x+e.refOriginalPosition[0],s=t.y+e.refOriginalPosition[1]),this.isInsideRing(o,s,t.r0,t.r,r,n);case"circle":return this.isInsideCircle(t.x,t.y,t.r,r,n);case"smicpoint":var l=r,u=n;return e.refOriginalPosition&&(l=r-e.refOriginalPosition[0],u=n-e.refOriginalPosition[1]),this.isInsideCircle(t.x,t.y,t.r,l,u);case"sector":var c=t.startAngle*Math.PI/180,h=t.endAngle*Math.PI/180;return t.clockWise||(c=-c,h=-h),this.isInsideSector(t.x,t.y,t.r0,t.r,c,h,!t.clockWise,r,n);case"smicsector":var f=t.startAngle*Math.PI/180,p=t.endAngle*Math.PI/180;t.clockWise||(f=-f,p=-p);var y=t.x,d=t.y;return e.refOriginalPosition&&(y=t.x+e.refOriginalPosition[0],d=t.y+e.refOriginalPosition[1]),this.isInsideSector(y,d,t.r0,t.r,f,p,!t.clockWise,r,n);case"path":return this.isInsidePath(t.pathArray,Math.max(t.lineWidth,5),t.brushType,r,n);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(t.pointList,r,n);case"smicpolygon":var v=r,m=n;if(e.refOriginalPosition&&(v=r-e.refOriginalPosition[0],m=n-e.refOriginalPosition[1]),e.holePolygonPointLists&&0<e.holePolygonPointLists.length){for(var g=this.isInsidePolygon(t.pointList,v,m),b=e.holePolygonPointLists,S=!1,_=0,P=b.length;_<P;_++){var O=b[_];!0===this.isInsidePolygon(O,v,m)&&(S=!0)}return!0===g&&!1===S}return this.isInsidePolygon(t.pointList,v,m);case"text":var T=t.__rect||e.getRect(t);return this.isInsideRect(T.x,T.y,T.width,T.height,r,n);case"smictext":var w=e.getTextBackground(t);return this.isInsidePolygon(w,r,n);case"rectangle":case"image":return this.isInsideRect(t.x,t.y,t.width,t.height,r,n);case"smicimage":var M=t.x,C=t.y;return e.refOriginalPosition&&(M=t.x+e.refOriginalPosition[0],C=t.y+e.refOriginalPosition[1]),this.isInsideRect(M,C,t.width,t.height,r,n)}}},{key:"_buildPathMethod",value:function(e,t,r,n,i){return t.beginPath(),e.buildPath(t,r),t.closePath(),t.isPointInPath(n,i)}},{key:"isOutside",value:function(e,t,r,n){return!this.isInside(e,t,r,n)}},{key:"isInsideLine",value:function(e,t,r,n,i,a,o){if(0===i)return!1;var s=Math.max(i,5),l=0;if(t+s<o&&n+s<o||o<t-s&&o<n-s||e+s<a&&r+s<a||a<e-s&&a<r-s)return!1;if(e===r)return Math.abs(a-e)<=s/2;var u=(l=(t-n)/(e-r))*a-o+(e*n-r*t)/(e-r);return u*u/(l*l+1)<=s/2*s/2}},{key:"isInsideCubicStroke",value:function(e,t,r,n,i,a,o,s,l,u,c){if(0===l)return!1;var h=Math.max(l,5);return!(t+h<c&&n+h<c&&a+h<c&&s+h<c||c<t-h&&c<n-h&&c<a-h&&c<s-h||e+h<u&&r+h<u&&i+h<u&&o+h<u||u<e-h&&u<r-h&&u<i-h&&u<o-h)&&this.curve.cubicProjectPoint(e,t,r,n,i,a,o,s,u,c,null)<=h/2}},{key:"isInsideQuadraticStroke",value:function(e,t,r,n,i,a,o,s,l){if(0===o)return!1;var u=Math.max(o,5);return!(t+u<l&&n+u<l&&a+u<l||l<t-u&&l<n-u&&l<a-u||e+u<s&&r+u<s&&i+u<s||s<e-u&&s<r-u&&s<i-u)&&this.curve.quadraticProjectPoint(e,t,r,n,i,a,s,l,null)<=u/2}},{key:"isInsideArcStroke",value:function(e,t,r,n,i,a,o,s,l){var u=this.PI2;if(0===o)return!1;var c=Math.max(o,5);s-=e,l-=t;var h=Math.sqrt(s*s+l*l);if(r<h-c||h+c<r)return!1;if(Math.abs(n-i)>=u)return!0;if(a){var f=n;n=this.normalizeRadian(i),i=this.normalizeRadian(f)}else n=this.normalizeRadian(n),i=this.normalizeRadian(i);i<n&&(i+=u);var p=Math.atan2(l,s);return p<0&&(p+=u),n<=p&&p<=i||n<=p+u&&p+u<=i}},{key:"isInsideBrokenLine",value:function(e,t,r,n){for(var i=Math.max(t,10),a=0,o=e.length-1;a<o;a++){var s=e[a][0],l=e[a][1],u=e[a+1][0],c=e[a+1][1];if(this.isInsideLine(s,l,u,c,i,r,n))return!0}return!1}},{key:"isInsideRing",value:function(e,t,r,n,i,a){var o=(i-e)*(i-e)+(a-t)*(a-t);return o<n*n&&r*r<o}},{key:"isInsideRect",value:function(e,t,r,n,i,a){return e<=i&&i<=e+r&&t<=a&&a<=t+n}},{key:"isInsideCircle",value:function(e,t,r,n,i){return(n-e)*(n-e)+(i-t)*(i-t)<r*r}},{key:"isInsideSector",value:function(e,t,r,n,i,a,o,s,l){return this.isInsideArcStroke(e,t,(r+n)/2,i,a,o,n-r,s,l)}},{key:"isInsidePolygon",value:function(e,t,r){for(var n=e.length,i=0,a=0,o=n-1;a<n;a++){var s=e[o][0],l=e[o][1],u=e[a][0],c=e[a][1];i+=this.windingLine(s,l,u,c,t,r),o=a}return 0!==i}},{key:"windingLine",value:function(e,t,r,n,i,a){return t<a&&n<a||a<t&&a<n?0:n==t?0:i<(a-t)/(n-t)*(r-e)+e?n<t?1:-1:0}},{key:"swapExtrema",value:function(){var e=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=e}},{key:"windingCubic",value:function(e,t,r,n,i,a,o,s,l,u){var c=this.curve,h=this.roots,f=this.extrema;if(t<u&&n<u&&a<u&&s<u||u<t&&u<n&&u<a&&u<s)return 0;var p=c.cubicRootAt(t,n,a,s,u,h);if(0===p)return 0;for(var y,d,v=0,m=-1,g=0;g<p;g++){var b=h[g];c.cubicAt(e,r,i,o,b)<l||(m<0&&(m=c.cubicExtrema(t,n,a,s,f),f[1]<f[0]&&1<m&&this.swapExtrema(),y=c.cubicAt(t,n,a,s,f[0]),1<m&&(d=c.cubicAt(t,n,a,s,f[1]))),2==m?b<f[0]?v+=y<t?1:-1:b<f[1]?v+=d<y?1:-1:v+=s<d?1:-1:b<f[0]?v+=y<t?1:-1:v+=s<y?1:-1)}return v}},{key:"windingQuadratic",value:function(e,t,r,n,i,a,o,s){var l=this.curve,u=this.roots;if(t<s&&n<s&&a<s||s<t&&s<n&&s<a)return 0;var c=l.quadraticRootAt(t,n,a,s,u);if(0===c)return 0;var h=l.quadraticExtremum(t,n,a);if(0<=h&&h<=1){for(var f=0,p=l.quadraticAt(t,n,a,h),y=0;y<c;y++){o<l.quadraticAt(e,r,i,u[y])||(u[y]<h?f+=p<t?1:-1:f+=a<p?1:-1)}return f}return o<l.quadraticAt(e,r,i,u[0])?0:a<t?1:-1}},{key:"windingArc",value:function(e,t,r,n,i,a,o,s){var l=this.roots,u=this.PI2;if(r<(s-=t)||s<-r)return 0;var c=Math.sqrt(r*r-s*s);if(l[0]=-c,l[1]=c,Math.abs(n-i)>=u){i=u;var h=a?1:-1;return o>=l[n=0]+e&&o<=l[1]+e?h:0}if(a){var f=n;n=this.normalizeRadian(i),i=this.normalizeRadian(f)}else n=this.normalizeRadian(n),i=this.normalizeRadian(i);i<n&&(i+=u);for(var p=0,y=0;y<2;y++){var d=l[y];if(o<d+e){var v=Math.atan2(s,d),m=a?1:-1;v<0&&(v=u+v),(n<=v&&v<=i||n<=v+u&&v+u<=i)&&(v>Math.PI/2&&v<1.5*Math.PI&&(m=-m),p+=m)}}return p}},{key:"isInsidePath",value:function(e,t,r,n,i){for(var a=0,o=0,s=0,l=0,u=0,c=!0,h=!0,f="stroke"===(r=r||"fill")||"both"===r,p="fill"===r||"both"===r,y=0;y<e.length;y++){var d=e[y],v=d.points;if(c||"M"===d.command){if(0<y&&(p&&(a+=this.windingLine(o,s,l,u,n,i)),0!==a))return!0;l=v[v.length-2],u=v[v.length-1],c=!1,h&&"A"!==d.command&&(h=!1,o=l,s=u)}switch(d.command){case"M":o=v[0],s=v[1];break;case"L":if(f&&this.isInsideLine(o,s,v[0],v[1],t,n,i))return!0;p&&(a+=this.windingLine(o,s,v[0],v[1],n,i)),o=v[0],s=v[1];break;case"C":if(f&&this.isInsideCubicStroke(o,s,v[0],v[1],v[2],v[3],v[4],v[5],t,n,i))return!0;p&&(a+=this.windingCubic(o,s,v[0],v[1],v[2],v[3],v[4],v[5],n,i)),o=v[4],s=v[5];break;case"Q":if(f&&this.isInsideQuadraticStroke(o,s,v[0],v[1],v[2],v[3],t,n,i))return!0;p&&(a+=this.windingQuadratic(o,s,v[0],v[1],v[2],v[3],n,i)),o=v[2],s=v[3];break;case"A":var m=v[0],g=v[1],b=v[2],S=v[3],_=v[4],P=v[5],O=Math.cos(_)*b+m,T=Math.sin(_)*S+g;h?(h=!1,l=O,u=T):a+=this.windingLine(o,s,O,T);var w=(n-m)*S/b+m;if(f&&this.isInsideArcStroke(m,g,S,_,_+P,1-v[7],t,w,i))return!0;p&&(a+=this.windingArc(m,g,S,_,_+P,1-v[7],w,i)),o=Math.cos(_+P)*b+m,s=Math.sin(_+P)*S+g;break;case"z":if(f&&this.isInsideLine(o,s,l,u,t,n,i))return!0;c=!0}}return p&&(a+=this.windingLine(o,s,l,u,n,i)),0!==a}},{key:"getTextWidth",value:function(e,t){var r=e+":"+t;if(this._textWidthCache[r])return this._textWidthCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t);for(var n=0,i=0,a=(e=(e+"").split("\n")).length;i<a;i++)n=Math.max(this._ctx.measureText(e[i]).width,n);return this._ctx.restore(),this._textWidthCache[r]=n,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),n}},{key:"getTextHeight",value:function(e,t){var r=e+":"+t;if(this._textHeightCache[r])return this._textHeightCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t),e=(e+"").split("\n");var n=(this._ctx.measureText("ZH").width+2)*e.length;return this._ctx.restore(),this._textHeightCache[r]=n,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),n}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Image=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(23);var o=t.Image=function(e){function c(e,t,r,n,i,a,o,s,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e,t,r,n,i,a,o,s,l));return u.x=e,u.y=t,u.image=r,u.width=n,u.height=i,u.sx=a,u.sy=o,u.sWidth=s,u.sHeight=l,u.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image",u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,a.ShapeParameters),n(c,[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"destroy",this).call(this)}}]),c}();i.SuperMap.Feature=i.SuperMap.Feature||{},i.SuperMap.Feature.ShapeParameters.Image=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Label=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(23);var o=t.Label=function(e){function i(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t,r));return n.x=e,n.y=t,n.text=r,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.ShapeParameters),n(i,[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"destroy",this).call(this)}}]),i}();i.SuperMap.Feature=i.SuperMap.Feature||{},i.SuperMap.Feature.ShapeParameters.Label=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Rectangle=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),o=r(23);var a=t.Rectangle=function(e){function a(e,t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t,r,n));return i.x=isNaN(e)?0:e,i.y=isNaN(e)?0:t,i.width=isNaN(r)?0:r,i.height=isNaN(n)?0:n,i.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle",i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o.ShapeParameters),n(a,[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this)}}]),a}();i.SuperMap.Feature=i.SuperMap.Feature||{},i.SuperMap.Feature.ShapeParameters.Rectangle=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OnlineServiceBase=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3),s=r(20);var l=t.OnlineServiceBase=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},a.Util.extend(this,e),this.serverType=o.ServerType.ONLINE,this.CLASS_NAME="SuperMap.OnlineServiceBase"}return n(t,[{key:"request",value:function(e,t,r,n){return t=this.createCredentialUrl(t),s.FetchRequest.commit(e,t,r,n).then(function(e){return e.json()})}},{key:"createCredentialUrl",value:function(e){var t=e,r=this.getCredential();if(r){var n="key="+r,i=t.substring(t.length-1,t.length);-1<t.indexOf("?")&&"?"===i?t+=n:-1<t.indexOf("?")&&"?"!==i?t+="&"+n:t+="?"+n}return t}},{key:"getCredential",value:function(){}}]),t}();i.SuperMap.OnlineServiceBase=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OnlineData=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(190);var s=t.OnlineData=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t=t||{},r.MD5=null,r.type=null,r.userName=null,r.fileName=null,r.size=null,r.serviceStatus=null,r.serviceId=null,r.id=null,r.lastModfiedTime=null,r.status=null,r.storageId=null,r.publishInfo=null,r.authorizeSetting=null,r.nickname=null,r.tags=[],r.description=null,r.dataItemServices=null,r.coordType=null,r.dataCheckResult=null,r.dataMetaInfo=null,r.thumbnail=null,a.Util.extend(r,t),r.id&&(r.serviceUrl=e+"/"+r.id),r.CLASS_NAME="SuperMap.OnlineData",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.OnlineServiceBase),i(n,[{key:"load",value:function(){if(this.serviceUrl){var t=this;return t.request("GET",this.serviceUrl).then(function(e){a.Util.extend(t,e)})}}},{key:"getPublishedServices",value:function(){return this.dataItemServices}},{key:"getAuthorizeSetting",value:function(){return this.authorizeSetting}}]),n}();n.SuperMap.OnlineData=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterField=t.DataItemOrderBy=t.DataItemType=t.ServiceStatus=undefined;var n=r(0),i=n.SuperMap.ServiceStatus={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"};t.ServiceStatus=i;var a=n.SuperMap.DataItemType={AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"};t.DataItemType=a;var o=n.SuperMap.DataItemOrderBy={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"};t.DataItemOrderBy=o;var s=n.SuperMap.FilterField={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"};t.FilterField=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorClipJobsParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3),s=r(18);var l=t.VectorClipJobsParameter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=o.ClipAnalystMode.CLIP,this.output=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"}return n(t,[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof s.OutputSetting&&(this.output.destroy(),this.output=null)}}],[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r]):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}]),t}();i.SuperMap.VectorClipJobsParameter=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateTurnNodeWeightParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.UpdateTurnNodeWeightParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",a.Util.extend(this,e),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters")}return n(t,[{key:"destroy",value:function(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null}}]),t}();i.SuperMap.UpdateTurnNodeWeightParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateEdgeWeightParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.UpdateEdgeWeightParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",a.Util.extend(this,e),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters")}return n(t,[{key:"destroy",value:function(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null}}]),t}();i.SuperMap.UpdateEdgeWeightParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransferSolutionParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3);var s=t.TransferSolutionParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.solutionCount=6,this.transferPreference=o.TransferPreference.NONE,this.transferTactic=o.TransferTactic.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.TransferSolutionParameters"}return n(t,[{key:"destroy",value:function(){a.Util.reset(this)}}],[{key:"toJson",value:function(e){if(e)return a.Util.toJSON(e)}}]),t}();i.SuperMap.TransferSolutionParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransferPathParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);r(198);var o=t.TransferPathParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.transferLines=null,this.points=!1,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.TransferPathParameters"}return n(t,[{key:"destroy",value:function(){a.Util.reset(this)}}],[{key:"toJson",value:function(e){if(e)return a.Util.toJSON(e)}}]),t}();i.SuperMap.TransferPathParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransferLine=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.TransferLine=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.TransferLine"}return n(t,[{key:"destroy",value:function(){a.Util.reset(this)}}],[{key:"fromJson",value:function(e){if(e)return new t({lineID:e.lineID,lineName:e.lineName,lineAliasName:e.lineAliasName,startStopIndex:e.startStopIndex,startStopName:e.startStopName,startStopAliasName:e.startStopAliasName,endStopIndex:e.endStopIndex,endStopName:e.endStopName,endStopAliasName:e.endStopAliasName})}}]),t}();i.SuperMap.TransferLine=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TopologyValidatorJobsParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3),s=r(18);var l=t.TopologyValidatorJobsParameter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=o.TopologyValidatorRule.REGIONNOOVERLAP,this.output=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")}return n(t,[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof s.OutputSetting&&(this.output.destroy(),this.output=null)}}],[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r]):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}]),t}();i.SuperMap.TopologyValidatorJobsParameter=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);r(82),r(113),r(112),r(114),r(78),r(111),r(115),r(204),r(202),r(226),r(225),r(224);var o=t.ThemeParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThemeParameters"}return n(t,[{key:"destroy",value:function(){if(this.datasetNames=null,this.dataSourceNames=null,this.joinItems){for(var e=0,t=this.joinItems,r=t.length;e<r;e++)t[e].destroy();this.joinItems=null}if(this.themes){for(var n=0,i=this.themes,a=i.length;n<a;n++)i[n].destroy();this.themes=null}}}]),t}();i.SuperMap.ThemeParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeGridUniqueItem=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(19);var s=t.ThemeGridUniqueItem=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.caption=null,this.color=new o.ServerColor,this.unique=null,this.visible=!0,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem"}return n(r,[{key:"destroy",value:function(){this.caption=null,this.unique=null,this.color&&(this.color.destroy(),this.color=null),this.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=a.Util.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}],[{key:"fromObj",value:function(e){var t=new r;return a.Util.copy(t,e),t.color=o.ServerColor.fromJson(e.color),t}}]),r}();i.SuperMap.ThemeGridUniqueItem=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeGridUnique=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),o=r(1),s=r(25),l=r(19),u=r(201);var a=t.ThemeGridUnique=function(e){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,"GRIDUNIQUE",e));return t.defaultcolor=new l.ServerColor,t.items=null,e&&o.Util.extend(t,e),t.CLASS_NAME="SuperMap.ThemeGridUnique",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,s.Theme),n(a,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this);if(this.items){if(0<this.items.length)for(var t in this.items)this.items[t].destroy(),this.items[t]=null;this.items=null}this.defaultcolor&&(this.defaultcolor.destroy(),this.defaultcolor=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=o.Util.copyAttributes(e,this)).defaultcolor&&e.defaultcolor.toServerJSONObject&&(e.defaultcolor=e.defaultcolor.toServerJSONObject()),e.items){for(var t=[],r=e.items.length,n=0;n<r;n++)t.push(e.items[n].toServerJSONObject());e.items=t}return e}}],[{key:"fromObj",value:function(e){var t=new a,r=e.items,n=r?r.length:0;o.Util.extend(t,e),t.items=[],t.defaultcolor=new l.ServerColor.fromJson(e.defaultcolor);for(var i=0;i<n;i++)t.items.push(new u.ThemeGridUniqueItem.fromObj(r[i]));return t}}]),a}();i.SuperMap.ThemeGridUnique=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeGridRangeItem=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(19);var s=t.ThemeGridRangeItem=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.caption=null,this.color=new o.ServerColor,this.end=0,this.start=0,this.visible=!0,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGridRangeItem"}return n(r,[{key:"destroy",value:function(){this.caption=null,this.end=null,this.start=null,this.color&&(this.color.destroy(),this.color=null),this.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=a.Util.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}],[{key:"fromObj",value:function(e){if(e){var t=new r;return a.Util.copy(t,e),t.color=o.ServerColor.fromJson(e.color),t}}}]),r}();i.SuperMap.ThemeGridRangeItem=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeGridRange=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),o=r(1),s=r(25),l=r(203),u=r(3);var a=t.ThemeGridRange=function(e){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,"GRIDRANGE",e));return t.items=null,t.rangeMode=u.RangeMode.EQUALINTERVAL,t.rangeParameter=0,t.colorGradientType=u.ColorGradientType.YELLOW_RED,t.reverseColor=!1,e&&o.Util.extend(t,e),t.CLASS_NAME="SuperMap.ThemeGridRange",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,s.Theme),n(a,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this);var t=this;if(t.items){if(0<t.items.length)for(var r in t.items)t.items[r].destroy(),t.items[r]=null;t.items=null}t.reverseColor=null,t.rangeMode=null,t.rangeParameter=null,t.colorGradientType=null}}],[{key:"fromObj",value:function(e){if(e){var t=new a;o.Util.copy(t,e);var r=e.items,n=r?r.length:0;t.items=[];for(var i=0;i<n;i++)t.items.push(l.ThemeGridRangeItem.fromObj(r[i]));return t}}}]),a}();i.SuperMap.ThemeGridRange=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TerrainCurvatureCalculationParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.TerrainCurvatureCalculationParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters")}return n(t,[{key:"destroy",value:function(){this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName=null,this.planCurvatureName=null,this.deleteExistResultDataset=!0}}],[{key:"toObject",value:function(e,t){for(var r in e)"dataset"!==r&&(t[r]=e[r])}}]),t}();i.SuperMap.TerrainCurvatureCalculationParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryRegionJobParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3),s=r(18);var l=t.SummaryRegionJobParameter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=o.AnalystSizeUnit.METER,this.type=o.SummaryType.SUMMARYMESH,this.output=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")}return n(t,[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof s.OutputSetting&&(this.output.destroy(),this.output=null)}}],[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"type"!==r&&"type"!==r?"output"!==r?("SUMMARYREGION"===e.type||"SUMMARYMESH"===e.type&&"regionDataset"!==r)&&(t.analyst=t.analyst||{},t.analyst[r]="query"===r?e[r].toBBOX():e[r]):(t.output=t.output||{},t.output=e[r]):t.type=e[r]:(t.input=t.input||{},t.input[r]=e[r])}}]),t}();i.SuperMap.SummaryRegionJobParameter=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryMeshJobParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3),s=r(18);var l=t.SummaryMeshJobParameter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=o.StatisticAnalystMode.AVERAGE,this.fields="",this.type=o.SummaryType.SUMMARYMESH,this.output=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")}return n(t,[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof s.OutputSetting&&(this.output.destroy(),this.output=null)}}],[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"type"!==r?"output"!==r?("SUMMARYMESH"===e.type&&"regionDataset"!==r||"SUMMARYREGION"===e.type&&!n(["meshType","resolution","query"],r))&&(t.analyst=t.analyst||{},t.analyst[r]="query"===r?e[r].toBBOX():e[r]):(t.output=t.output||{},t.output=e[r]):t.type=e[r]:(t.input=t.input||{},t.input[r]=e[r]);function n(e,t){for(var r=e.length;r--;)if(e[r]===t)return!0;return!1}}}]),t}();i.SuperMap.SummaryMeshJobParameter=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryAttributesJobsParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(18);var s=t.SummaryAttributesJobsParameter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")}return n(t,[{key:"destroy",value:function(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof o.OutputSetting&&(this.output.destroy(),this.output=null)}}],[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r]):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}]),t}();i.SuperMap.SummaryAttributesJobsParameter=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StopQueryParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.StopQueryParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.keyWord=null,this.returnPosition=!1,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.StopQueryParameters"}return n(t,[{key:"destroy",value:function(){a.Util.reset(this)}}]),t}();i.SuperMap.StopQueryParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SingleObjectQueryJobsParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3),s=r(18);var l=t.SingleObjectQueryJobsParameter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=o.SpatialQueryMode.CONTAIN,this.output=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")}return n(t,[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof s.OutputSetting&&(this.output.destroy(),this.output=null)}}],[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r]):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}]),t}();i.SuperMap.SingleObjectQueryJobsParameter=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetLayerStatusParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);r(223);var o=t.SetLayerStatusParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerStatusList=[],this.holdTime=15,this.resourceID=null,e&&a.Util.extend(this,e)}return n(t,[{key:"destroy",value:function(){this.layerStatusList=null,this.holdTime=null,this.resourceID=null}},{key:"toJSON",value:function(){var e="{";e+='"layers":[';for(var t=[],r=0,n=this.layerStatusList.length;r<n;r++)t.push(this.layerStatusList[r].toJSON());return e+=t,e+="]",e+="}"}}]),t}();i.SuperMap.SetLayerStatusParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetLayersInfoParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.SetLayersInfoParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.SetLayersInfoParameters"}return n(t,[{key:"destroy",value:function(){this.isTempLayers=null,this.resourceID=null,this.layersInfo=null}}]),t}();i.SuperMap.SetLayersInfoParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetLayerInfoParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.SetLayerInfoParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.SetLayerInfoParameters"}return n(t,[{key:"destroy",value:function(){this.resourceID=null,this.tempLayerName=null,this.layerInfo=null}}]),t}();i.SuperMap.SetLayerInfoParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RouteLocatorParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),s=r(1),l=r(26);r(81);var a=t.RouteLocatorParameters=function(){function o(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),!e)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var t=e.sourceRoute,r={};if(t&&t instanceof l.Geometry&&t.components){r.type=t.type,r.parts=t.parts;for(var n=[],i=0,a=t.components.length;i<a;i++)n=n.concat(t.components[i].components);r.points=n,e.sourceRoute=r}s.Util.extend(this,e),this.CLASS_NAME="SuperMap.RouteLocatorParameters"}return n(o,[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.type=null,e.measure=null,e.offset=0,e.isIgnoreGap=!1,e.startMeasure=null,e.endMeasure=null,e.dataset=null,e.routeID=null,e.routeIDField=null}}]),o}();i.SuperMap.RouteLocatorParameters=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RouteCalculateMeasureParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);r(81);var o=t.RouteCalculateMeasureParameters=function(){function t(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!e)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters"}return n(t,[{key:"destroy",value:function(){this.sourceRoute=null,this.point=null,this.tolerance&&(this.tolerance=null),this.isIgnoreGap&&(this.isIgnoreGap=!1)}}]),t}();i.SuperMap.RouteCalculateMeasureParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryBySQLParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(36);function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=t.QueryBySQLParameters=function(e){function r(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),!e)return s(t);var t=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.returnContent=!0,a.Util.extend(t,e),t.CLASS_NAME="SuperMap.QueryBySQLParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.QueryParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);this.returnContent=null}}]),r}();i.SuperMap.QueryBySQLParameters=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryByGeometryParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(36),s=r(3);function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=t.QueryByGeometryParameters=function(e){function r(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),!e)return l(t);var t=l(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.returnContent=!0,t.geometry=null,t.spatialQueryMode=s.SpatialQueryMode.INTERSECT,a.Util.extend(t,e),t.CLASS_NAME="SuperMap.QueryByGeometryParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.QueryParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);this.returnContent=null,this.geometry=null,this.spatialQueryMode=null}}]),r}();i.SuperMap.QueryByGeometryParameters=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryByDistanceParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(36);function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=t.QueryByDistanceParameters=function(e){function r(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),!e)return s(t);var t=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.distance=0,t.geometry=null,t.isNearest=null,t.returnContent=!0,a.Util.extend(t,e),t.CLASS_NAME="SuperMap.QueryByDistanceParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.QueryParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);this.returnContent=null,this.distance=null,this.isNearest=null,this.geometry&&(this.geometry.destroy(),this.geometry=null)}}]),r}();i.SuperMap.QueryByDistanceParameters=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryByBoundsParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(36);function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=t.QueryByBoundsParameters=function(e){function r(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),!e)return s(t);var t=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.returnContent=!0,t.bounds=null,a.Util.extend(t,e),t.CLASS_NAME="SuperMap.QueryByBoundsParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.QueryParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);this.returnContent=null,this.bounds&&(this.bounds=null)}}]),r}();i.SuperMap.QueryByBoundsParameters=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayGeoJobParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(18);var s=t.OverlayGeoJobParameter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")}return n(t,[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof o.OutputSetting&&(this.output.destroy(),this.output=null)}}],[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!=r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r]):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}]),t}();i.SuperMap.OverlayGeoJobParameter=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeasureParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3);var s=t.MeasureParameters=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),e&&(this.geometry=e,this.unit=o.Unit.METER,this.prjCoordSys=null,this.distanceMode=null,t&&a.Util.extend(this,t),this.CLASS_NAME="SuperMap.MeasureParameters")}return n(r,[{key:"destroy",value:function(){this.geometry=null,this.unit=null,this.prjCoordSys=null}}]),r}();i.SuperMap.MeasureParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MathExpressionAnalysisParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.MathExpressionAnalysisParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters")}return n(t,[{key:"destroy",value:function(){this.dataset=null,this.bounds=null,this.expression=null,this.isZip=!0,this.ignoreNoValue=!0,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=null}}],[{key:"toObject",value:function(e,t){for(var r in e)if("dataset"!==r&&(t[r]=e[r]),"extractRegion"===r&&e[r]){for(var n=e[r].components[0].components,i={},a=[],o=n.length,s=0;s<o-1;s++){var l={};l.x=n[s].x,l.y=n[s].y,a.push(l)}i.points=a,i.type="REGION",t[r]=i}}}]),t}();i.SuperMap.MathExpressionAnalysisParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayerStatus=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.LayerStatus=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.LayerStatus"}return n(t,[{key:"destroy",value:function(){this.layerName=null,this.isVisible=null,this.displayFilter=null}},{key:"toJSON",value:function(){var e="{";e+='"type":"UGC",';var t=[];return this.layerName&&(t.push('"name":"'+this.layerName+'"'),t.push('"visible":'+this.isVisible)),this.displayFilter&&t.push('"displayFilter":"'+this.displayFilter+'"'),(this.minScale||0==this.minScale)&&t.push('"minScale":'+this.minScale),(this.maxScale||0==this.maxScale)&&t.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&t.push('"fieldValuesDisplayFilter":'+a.Util.toJSON(this.fieldValuesDisplayFilter)),e+=t,e+="}"}}]),t}();i.SuperMap.LayerStatus=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabelThemeCell=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(78),s=r(75);var l=t.LabelThemeCell=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.themeLabel=new o.ThemeLabel,t.type="THEME",e&&a.Util.extend(t,e),t.CLASS_NAME=" SuperMap.LabelThemeCell",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,s.LabelMatrixCell),n(r,[{key:"destroy",value:function(){this.themeLabel&&(this.themeLabel.destroy(),this.themeLabel=null)}}]),r}();i.SuperMap.LabelThemeCell=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabelSymbolCell=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(13),s=r(75);var l=t.LabelSymbolCell=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.style=new o.ServerStyle,t.symbolIDField=null,t.type="SYMBOL",e&&a.Util.extend(t,e),t.CLASS_NAME="SuperMap.LabelSymbolCell",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,s.LabelMatrixCell),n(r,[{key:"destroy",value:function(){this.style&&(this.style.destroy(),this.style=null),this.symbolIDField=null}}]),r}();i.SuperMap.LabelSymbolCell=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabelImageCell=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(75);var s=t.LabelImageCell=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.height=0,t.pathField=null,t.rotation=0,t.width=0,t.sizeFixed=!1,t.type="IMAGE",e&&a.Util.extend(t,e),t.CLASS_NAME="SuperMap.LabelImageCell",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.LabelMatrixCell),n(r,[{key:"destroy",value:function(){this.height=null,this.pathField=null,this.rotation=null,this.width=null,this.sizeFixed=null}}]),r}();i.SuperMap.LabelImageCell=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelDensityJobParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3),s=r(18);var l=t.KernelDensityJobParameter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=o.AnalystSizeUnit.METER,this.radiusUnit=o.AnalystSizeUnit.METER,this.areaUnit=o.AnalystAreaUnit.SQUAREMILE,this.output=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")}return n(t,[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof s.OutputSetting&&(this.output.destroy(),this.output=null)}}],[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]="query"===r?e[r].toBBOX():e[r]):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}]),t}();i.SuperMap.KernelDensityJobParameter=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterpolationKrigingAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3);r(79);var s=r(33);var l=t.InterpolationKrigingAnalystParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.type=null,t.mean=null,t.angle=0,t.nugget=0,t.range=0,t.sill=0,t.variogramMode=o.VariogramMode.SPHERICAL,t.exponent=o.Exponent.EXP1,t.searchMode=null,t.expectedCount=12,t.maxPointCountForInterpolation=200,t.maxPointCountInNode=50,e&&a.Util.extend(t,e),t.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,s.InterpolationAnalystParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);var t=this;t.type=null,t.mean=null,t.angle=null,t.nugget=null,t.range=null,t.sill=null,t.variogramMode=null,t.exponent=null,t.searchMode=null,t.expectedCount=null,t.maxPointCountForInterpolation=null,t.maxPointCountInNode=null}}]),r}();i.SuperMap.InterpolationKrigingAnalystParameters=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterpolationIDWAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(33);var s=t.InterpolationIDWAnalystParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.power=2,t.searchMode=null,t.expectedCount=12,e&&a.Util.extend(t,e),t.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.InterpolationAnalystParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);this.power=null,this.searchMode=null,this.expectedCount=null}}]),r}();i.SuperMap.InterpolationIDWAnalystParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterpolationRBFAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(33);var s=t.InterpolationRBFAnalystParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.smooth=.1,t.tension=40,t.searchMode=null,t.expectedCount=12,t.maxPointCountForInterpolation=200,t.maxPointCountInNode=50,e&&a.Util.extend(t,e),t.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.InterpolationAnalystParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);this.smooth=null,this.tension=null,this.searchMode=null,this.expectedCount=null,this.maxPointCountForInterpolation=null,this.maxPointCountInNode=null}}],[{key:"toObject",value:function(e,t){for(var r in e)t[r]=e[r]}}]),r}();i.SuperMap.InterpolationRBFAnalystParameters=s},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Vector=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},o=n(0),s=n(1),l=n(57),u=n(13);var c=r.Vector=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),e=e||{};var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.style=null,t.CLASS_NAME="SuperMap.Vector",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,l.UGCSubLayer),i(r,[{key:"destroy",value:function(){a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this),s.Util.reset(this)}},{key:"fromJson",value:function(e){a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"fromJson",this).call(this,e);var t=this.style;t&&(this.style=new u.ServerStyle(t))}},{key:"toServerJSONObject",value:function(){var e=o.SuperMap.toServerJSONObject();return e.style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}]),r}();o.SuperMap.Vector=c},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UGCImage=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},o=n(0),s=n(57),l=n(19),u=n(1);n(3);var c=r.UGCImage=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),e=e||{};var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.brightness=null,t.colorSpaceType=null,t.contrast=null,t.displayBandIndexes=null,t.transparent=null,t.transparentColor=null,t.transparentColorTolerance=null,t.CLASS_NAME="SuperMap.Image",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,s.UGCSubLayer),i(r,[{key:"destroy",value:function(){a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this),u.Util.reset(this)}},{key:"fromJson",value:function(e){a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"fromJson",this).call(this,e),this.transparentColor&&(this.transparentColor=new l.ServerColor(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue))}},{key:"toServerJSONObject",value:function(){return a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"toServerJSONObject",this).call(this)}}]),r}();o.SuperMap.Image=c},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Grid=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),l=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},a=n(0),o=n(1),u=n(57),c=n(19),h=n(13),f=n(281);n(3);var s=r.Grid=function(e){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),e=e||{};var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.colorDictionarys=null,t.brightness=null,t.colorGradientType=null,t.colors=null,t.contrast=null,t.dashStyle=null,t.gridType=null,t.horizontalSpacing=null,t.sizeFixed=null,t.solidStyle=null,t.specialColor=null,t.specialValue=null,t.specialValueTransparent=null,t.verticalSpacing=null,t.CLASS_NAME="SuperMap.Grid",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,u.UGCSubLayer),i(s,[{key:"destroy",value:function(){l(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"destroy",this).call(this),o.Util.reset(this)}},{key:"fromJson",value:function(e){if(l(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"fromJson",this).call(this,e),this.specialColor&&(this.specialColor=new c.ServerColor(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var t,r=[];for(var n in this.colors)t=this.colors[n],r.push(new c.ServerColor(t.red,t.green,t.blue));this.colors=r}if(this.dashStyle&&(this.dashStyle=new h.ServerStyle(this.dashStyle)),this.solidStyle&&(this.solidStyle=new h.ServerStyle(this.solidStyle)),this.colorDictionary){var i,a=[];for(var o in this.colorDictionary)i=this.colorDictionary[o],a.push(new f.ColorDictionary({elevation:o,color:i}));this.colorDictionarys=a}delete this.colorDictionary}},{key:"toServerJSONObject",value:function(){var e=l(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"toServerJSONObject",this).call(this);return e.dashStyle&&e.dashStyle.toServerJSONObject&&(e.dashStyle=e.dashStyle.toServerJSONObject()),e.solidStyle&&e.solidStyle.toServerJSONObject&&(e.solidStyle=e.solidStyle.toServerJSONObject()),e}}]),s}();a.SuperMap.Grid=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OverlapDisplayedOptions=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(110);var s=t.OverlapDisplayedOptions=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,a.Util.extend(this,e),this.ugcLayer=new o.UGCLayer(e),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions"}return n(t,[{key:"destroy",value:function(){a.Util.reset(this)}},{key:"fromJson",value:function(e){this.ugcLayer.fromJson.apply(this,[e])}},{key:"toServerJSONObject",value:function(){return this.ugcLayer.toServerJSONObject.apply(this,arguments)}},{key:"toString",value:function(){var e=this.ugcLayer.toServerJSONObject.apply(this,arguments),t="{";for(var r in e)e.hasOwnProperty(r)&&(t+="'"+r+"':"+e[r]+",");return t=t.substr(0,t.length-1),t+="}"}}]),t}();i.SuperMap.OverlapDisplayedOptions=s},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UGCMapLayer=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},o=n(0),s=n(1),l=n(110);n(234);var u=r.UGCMapLayer=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),e=e||{};var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.completeLineSymbolDisplayed=null,t.maxScale=null,t.minScale=null,t.minVisibleGeometrySize=null,t.opaqueRate=null,t.symbolScalable=null,t.symbolScale=null,t.overlapDisplayed=null,t.overlapDisplayedOptions=null,t.CLASS_NAME="SuperMap.UGCMapLayer",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,l.UGCLayer),i(r,[{key:"destroy",value:function(){a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this),s.Util.reset(this)}},{key:"fromJson",value:function(e){a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"fromJson",this).call(this,e)}},{key:"toServerJSONObject",value:function(){return a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"toServerJSONObject",this).call(this)}}]),r}();o.SuperMap.UGCMapLayer=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeRangeItem=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(13);var s=t.ThemeRangeItem=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.caption=null,this.end=0,this.start=0,this.style=new o.ServerStyle,this.visible=!0,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThemeRangeItem"}return n(r,[{key:"destroy",value:function(){this.caption=null,this.end=null,this.start=null,this.style&&(this.style.destroy(),this.style=null),this.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=a.Util.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}],[{key:"fromObj",value:function(e){if(e){var t=new r;return a.Util.copy(t,e),t.style=o.ServerStyle.fromJson(e.style),t}}}]),r}();i.SuperMap.ThemeRangeItem=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeGraduatedSymbolStyle=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(13),o=r(1);var s=t.ThemeGraduatedSymbolStyle=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.negativeDisplayed=!1,this.negativeStyle=new a.ServerStyle,this.positiveStyle=new a.ServerStyle,this.zeroDisplayed=!1,this.zeroStyle=new a.ServerStyle,e&&o.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle"}return n(r,[{key:"destroy",value:function(){this.negativeDisplayed=null,this.negativeStyle=null,this.positiveStyle=null,this.zeroDisplayed=null,this.zeroStyle=null}}],[{key:"fromObj",value:function(e){if(e){var t=new r;return o.Util.copy(t,e),t.negativeStyle=a.ServerStyle.fromJson(e.negativeStyle),t.positiveStyle=a.ServerStyle.fromJson(e.positiveStyle),t.zeroStyle=a.ServerStyle.fromJson(e.zeroStyle),t}}}]),r}();i.SuperMap.ThemeGraduatedSymbolStyle=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeGraphItem=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(13);var s=t.ThemeGraphItem=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new o.ServerStyle,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphItem"}return n(r,[{key:"destroy",value:function(){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=null}}],[{key:"fromObj",value:function(e){if(e){var t=new r;return a.Util.copy(t,e),t.uniformStyle=o.ServerStyle.fromJson(e.uniformStyle),t}}}]),r}();i.SuperMap.ThemeGraphItem=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeGraphText=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(34),s=r(3);var l=t.ThemeGraphText=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.graphTextDisplayed=!1,this.graphTextFormat=s.ThemeGraphTextFormat.CAPTION,this.graphTextStyle=new o.ServerTextStyle,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphText"}return n(r,[{key:"destroy",value:function(){this.graphTextDisplayed=null,this.graphTextFormat=null,this.graphTextStyle&&(this.graphTextStyle.destroy(),this.graphTextStyle=null)}}],[{key:"fromObj",value:function(e){var t=new r;return a.Util.copy(t,e),t.graphTextStyle=o.ServerTextStyle.fromObj(e.graphTextStyle),t}}]),r}();i.SuperMap.ThemeGraphText=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeGraphSize=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.ThemeGraphSize=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.maxGraphSize=0,this.minGraphSize=0,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphSize"}return n(r,[{key:"destroy",value:function(){this.maxGraphSize=null,this.minGraphSize=null}}],[{key:"fromObj",value:function(e){var t=new r;return a.Util.copy(t,e),t}}]),r}();i.SuperMap.ThemeGraphSize=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeGraphAxes=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(19),s=r(34);var l=t.ThemeGraphAxes=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.axesColor=new o.ServerColor(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new s.ServerTextStyle,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphAxes"}return n(r,[{key:"destroy",value:function(){this.axesColor&&(this.axesColor.destroy(),this.axesColor=null),this.axesDisplayed=null,this.axesGridDisplayed=null,this.axesTextDisplayed=null,this.axesTextStyle&&(this.axesTextStyle.destroy(),this.axesTextStyle=null)}}],[{key:"fromObj",value:function(e){if(e){var t=new r;return a.Util.copy(t,e),t.axesColor=o.ServerColor.fromJson(e.axesColor),t.axesTextStyle=s.ServerTextStyle.fromObj(e.axesTextStyle),t}}}]),r}();i.SuperMap.ThemeGraphAxes=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeLabelBackground=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(13),s=r(3);var l=t.ThemeLabelBackground=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.labelBackShape=s.LabelBackShape.NONE,this.backStyle=new o.ServerStyle,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelBackground"}return n(r,[{key:"destroy",value:function(){this.labelBackShape=null,this.backStyle&&(this.backStyle.destroy(),this.backStyle=null)}}],[{key:"fromObj",value:function(e){if(e){var t=new r;return t.labelBackShape=e.labelBackShape,t.backStyle=o.ServerStyle.fromJson(e.backStyle),t}}}]),r}();i.SuperMap.ThemeLabelBackground=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeLabelAlongLine=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3);var s=t.ThemeLabelAlongLine=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.isAlongLine=!0,this.alongLineDirection=o.AlongLineDirection.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine"}return n(r,[{key:"destroy",value:function(){this.isAlongLine=null,this.alongLineDirection=null,this.angleFixed=null,this.repeatedLabelAvoided=null,this.repeatIntervalFixed=null,this.labelRepeatInterval=null}}],[{key:"fromObj",value:function(e){if(e){var t=new r;return a.Util.copy(t,e),t}}}]),r}();i.SuperMap.ThemeLabelAlongLine=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabelMixedTextStyle=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),o=r(1),s=r(34);var a=t.LabelMixedTextStyle=function(){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new s.ServerTextStyle,e&&o.Util.extend(this,e),this.CLASS_NAME="SuperMap.LabelMixedTextStyle"}return n(a,[{key:"destroy",value:function(){var e=this;if(e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null),e.separator=null,e.separatorEnabled=null,e.splitIndexes&&(e.splitIndexes=null),e.styles){for(var t=0,r=e.styles,n=r.length;t<n;t++)r[t].destroy();e.styles=null}}}],[{key:"fromObj",value:function(e){if(e){var t=new a,r=e.styles;if(o.Util.copy(t,e),t.defaultStyle=new s.ServerTextStyle(e.defaultStyle),r){t.styles=[];for(var n=0,i=r.length;n<i;n++)t.styles.push(new s.ServerTextStyle(r[n]))}return t}}}]),a}();i.SuperMap.LabelMixedTextStyle=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeLabelText=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(34),s=r(244);var l=t.ThemeLabelText=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new o.ServerTextStyle,this.uniformMixedStyle=null,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelText"}return n(r,[{key:"destroy",value:function(){var e=this;e.maxTextHeight=null,e.maxTextWidth=null,e.minTextHeight=null,e.minTextWidth=null,e.uniformStyle&&(e.uniformStyle.destroy(),e.uniformStyle=null),e.uniformMixedStyle&&(e.uniformMixedStyle.destroy(),e.uniformMixedStyle=null)}}],[{key:"fromObj",value:function(e){if(e){var t=new r;return a.Util.copy(t,e),t.uniformStyle=o.ServerTextStyle.fromObj(e.uniformStyle),t.uniformMixedStyle=s.LabelMixedTextStyle.fromObj(e.uniformMixedStyle),t}}}]),r}();i.SuperMap.ThemeLabelText=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeLabelItem=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(34);var s=t.ThemeLabelItem=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new o.ServerTextStyle,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelItem"}return n(r,[{key:"destroy",value:function(){this.caption=null,this.end=null,this.start=null,this.style&&(this.style.destroy(),this.style=null),this.visible=null}}],[{key:"fromObj",value:function(e){if(e){var t=new r;return a.Util.copy(t,e),t}}}]),r}();i.SuperMap.ThemeLabelItem=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeMemoryData=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0);var a=t.ThemeMemoryData=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.srcData=e,this.targetData=t,this.CLASS_NAME="SuperMap.ThemeMemoryData"}return n(r,[{key:"destroy",value:function(){this.srcData=null,this.targetData=null}},{key:"toJSON",value:function(){if(this.srcData&&this.targetData){for(var e="",t=Math.min(this.srcData.length,this.targetData.length),r=0;r<t;r++)e+="'"+this.srcData[r]+"':'"+this.targetData[r]+"',";return 0<r&&(e=e.substring(0,e.length-1)),"{"+e+"}"}return null}}]),r}();i.SuperMap.ThemeMemoryData=a},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ServerTheme=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},o=n(0),s=n(1),l=n(45),u=n(78),c=n(115),h=n(114),f=n(113),p=n(112),y=n(111),d=n(57);var v=r.ServerTheme=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),e=e||{};var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.theme=null,t.themeElementPosition=null,t.CLASS_NAME="SuperMap.ServerTheme",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,d.UGCSubLayer),i(r,[{key:"destroy",value:function(){a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this),s.Util.reset(this)}},{key:"fromJson",value:function(e){a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"fromJson",this).call(this,e);var t=this.theme;switch(t&&t.type){case"LABEL":this.theme=u.ThemeLabel.fromObj(t);break;case"UNIQUE":this.theme=c.ThemeUnique.fromObj(t);break;case"GRAPH":this.theme=h.ThemeGraph.fromObj(t);break;case"DOTDENSITY":this.theme=f.ThemeDotDensity.fromObj(t);break;case"GRADUATEDSYMBOL":this.theme=p.ThemeGraduatedSymbol.fromObj(t);break;case"RANGE":this.theme=y.ThemeRange.fromObj(t)}this.themeElementPosition&&(this.themeElementPosition=new l.LonLat(this.themeElementPosition.x,this.themeElementPosition.y))}},{key:"toServerJSONObject",value:function(){var e=a(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"toServerJSONObject",this).call(this);return e.themeElementPosition&&e.themeElementPosition.toServerJSONObject&&(e.themeElementPosition=e.themeElementPosition.toServerJSONObject()),e.theme&&e.theme.toServerJSONObject&&(e.theme=e.theme.toServerJSONObject()),e}}]),r}();o.SuperMap.ServerTheme=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetGridCellInfosParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.GetGridCellInfosParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters"}return n(t,[{key:"destroy",value:function(){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null}}]),t}();i.SuperMap.GetGridCellInfosParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetFeaturesBySQLParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(42);r(15);var s=t.GetFeaturesBySQLParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.getFeatureMode="SQL",t.queryParameter=null,a.Util.extend(t,e),t.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.GetFeaturesParametersBase),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);this.getFeatureMode=null,this.queryParameter&&(this.queryParameter.destroy(),this.queryParameter=null)}}],[{key:"toJsonParameters",value:function(e){var t={datasetNames:e.datasetNames,getFeatureMode:"SQL",queryParameter:e.queryParameter};return e.maxFeatures&&!isNaN(e.maxFeatures)&&(t.maxFeatures=e.maxFeatures),e.aggregations&&(t.aggregations=e.aggregations),a.Util.toJSON(t)}}]),r}();i.SuperMap.GetFeaturesBySQLParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetFeaturesByIDsParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(15),s=r(42);var l=t.GetFeaturesByIDsParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.getFeatureMode="ID",t.IDs=null,t.fields=null,a.Util.extend(t,e),t.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,s.GetFeaturesParametersBase),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);if(this.IDs=null,this.getFeatureMode=null,this.fields){for(;0<this.fields.length;)this.fields.pop();this.fields=null}}}],[{key:"toJsonParameters",value:function(e){var t,r;return t={datasetNames:e.datasetNames,getFeatureMode:"ID",ids:e.IDs},e.fields&&((r=new o.FilterParameter).name=e.datasetNames,r.fields=e.fields,t.queryParameter=r),a.Util.toJSON(t)}}]),r}();i.SuperMap.GetFeaturesByIDsParameters=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetFeaturesByGeometryParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3),s=r(15),l=r(42),u=r(9);var c=t.GetFeaturesByGeometryParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.getFeatureMode="SPATIAL",t.geometry=null,t.fields=null,t.attributeFilter=null,t.spatialQueryMode=o.SpatialQueryMode.CONTAIN,a.Util.extend(t,e),t.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,l.GetFeaturesParametersBase),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);var t=this;if(t.geometry&&(t.geometry.destroy(),t.geometry=null),t.fields){for(;0<t.fields.length;)t.fields.pop();t.fields=null}t.attributeFilter=null,t.spatialQueryMode=null,t.getFeatureMode=null}}],[{key:"toJsonParameters",value:function(e){var t,r,n;return r=u.ServerGeometry.fromGeometry(e.geometry),n={datasetNames:e.datasetNames,getFeatureMode:"SPATIAL",geometry:r,spatialQueryMode:e.spatialQueryMode},e.fields&&((t=new s.FilterParameter).name=e.datasetNames,t.fields=e.fields,n.queryParameter=t),e.attributeFilter&&(n.attributeFilter=e.attributeFilter,n.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(n.maxFeatures=e.maxFeatures),a.Util.toJSON(n)}}]),r}();i.SuperMap.GetFeaturesByGeometryParameters=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetFeaturesByBufferParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(42),s=r(15),l=r(9);var u=t.GetFeaturesByBufferParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.bufferDistance=null,t.attributeFilter=null,t.geometry=null,t.fields=null,a.Util.extend(t,e),t.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.GetFeaturesParametersBase),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);if(this.bufferDistance=null,this.attributeFilter=null,this.fields){for(;0<this.fields.length;)this.fields.pop();this.fields=null}this.geometry&&(this.geometry.destroy(),this.geometry=null)}}],[{key:"toJsonParameters",value:function(e){var t,r,n;return n=l.ServerGeometry.fromGeometry(e.geometry),r={datasetNames:e.datasetNames,getFeatureMode:"BUFFER",bufferDistance:e.bufferDistance,geometry:n},e.fields&&((t=new s.FilterParameter).name=e.datasetNames,t.fields=e.fields,r.queryParameter=t),e.attributeFilter&&(r.attributeFilter=e.attributeFilter,r.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(r.maxFeatures=e.maxFeatures),a.Util.toJSON(r)}}]),r}();i.SuperMap.GetFeaturesByBufferParameters=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetFeaturesByBoundsParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3),s=r(15),l=r(42);var u=t.GetFeaturesByBoundsParameters=function(e){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.getFeatureMode=i.getFeatureMode.BOUNDS,t.bounds=null,t.fields=null,t.attributeFilter=null,t.spatialQueryMode=o.SpatialQueryMode.CONTAIN,a.Util.extend(t,e),t.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,l.GetFeaturesParametersBase),n(i,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"destroy",this).call(this);var t=this;if(t.bounds&&(t.bounds.destroy(),t.bounds=null),t.fields){for(;0<t.fields.length;)t.fields.pop();t.fields=null}t.attributeFilter=null,t.spatialQueryMode=null,t.getFeatureMode=null}}],[{key:"toJsonParameters",value:function(e){var t,r,n;return r={leftBottom:{x:e.bounds.left,y:e.bounds.bottom},rightTop:{x:e.bounds.right,y:e.bounds.top}},n={datasetNames:e.datasetNames,getFeatureMode:i.getFeatureMode.BOUNDS,bounds:r,spatialQueryMode:e.spatialQueryMode},e.fields&&((t=new s.FilterParameter).name=e.datasetNames,t.fields=e.fields,n.queryParameter=t),e.attributeFilter&&(n.attributeFilter=e.attributeFilter,n.getFeatureMode=i.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),e.maxFeatures&&!isNaN(e.maxFeatures)&&(n.maxFeatures=e.maxFeatures),a.Util.toJSON(n)}}]),i}();u.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"},i.SuperMap.GetFeaturesByBoundsParameters=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoRelationAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);r(3),r(15);var o=t.GeoRelationAnalystParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters"}return n(t,[{key:"destroy",value:function(){var e=this;e.sourceFilter&&e.sourceFilter.destroy(),e.sourceFilter=null,e.referenceFilter&&e.referenceFilter.destroy(),e.referenceFilter=null,e.dataset=null,e.spatialRelationType=null,e.isBorderInside=null,e.returnFeature=null,e.returnGeoRelatedOnly=null,e.startRecord=null,e.expectCount=null}}]),t}();i.SuperMap.GeoRelationAnalystParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeometrySurfaceAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(80);var s=t.GeometrySurfaceAnalystParameters=function(e){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.points=null,t.zValues=null,e&&a.Util.extend(t,e),t.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,o.SurfaceAnalystParameters),n(i,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"destroy",this).call(this);if(this.points){for(var t=0,r=this.points,n=r.length;t<n;t++)r[t].destroy();this.points=null}this.zValues=null}}]),i}();i.SuperMap.GeometrySurfaceAnalystParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenerateSpatialDataParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);r(58);var o=t.GenerateSpatialDataParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters"}return n(t,[{key:"destroy",value:function(){var e=this;e.routeTable&&(e.routeTable=null),e.routeIDField=null,e.attributeFilter=null,e.eventTable=null,e.eventRouteIDField=null,e.measureField=null,e.measureStartField=null,e.measureEndField=null,e.measureOffsetField=null,e.errorInfoField=null,e.dataReturnOption&&(e.dataReturnOption.destroy(),e.dataReturnOption=null)}}]),t}();i.SuperMap.GenerateSpatialDataParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FindTSPPathsParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(35);var s=t.FindTSPPathsParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new o.TransportationAnalystParameter,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.FindTSPPathsParameters"}return n(t,[{key:"destroy",value:function(){this.endNodeAssigned=null,this.isAnalyzeById=null,this.nodes=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}]),t}();i.SuperMap.FindTSPPathsParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FindServiceAreasParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(35);var s=t.FindServiceAreasParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.weights=null,this.parameter=new o.TransportationAnalystParameter,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.FindServiceAreasParameters"}return n(t,[{key:"destroy",value:function(){this.isAnalyzeById=null,this.isCenterMutuallyExclusive=null,this.centers=null,this.isFromCenter=null,this.weights=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}]),t}();i.SuperMap.FindServiceAreasParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FindPathParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(35);var s=t.FindPathParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new o.TransportationAnalystParameter,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.FindPathParameters"}return n(t,[{key:"destroy",value:function(){this.isAnalyzeById=null,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}]),t}();i.SuperMap.FindPathParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FindMTSPPathsParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(35);var s=t.FindMTSPPathsParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new o.TransportationAnalystParameter,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters"}return n(t,[{key:"destroy",value:function(){this.centers=null,this.hasLeastTotalCost=null,this.isAnalyzeById=null,this.nodes=null,this.maxWeight=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}]),t}();i.SuperMap.FindMTSPPathsParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FindLocationParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.FindLocationParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.FindLocationParameters"}return n(t,[{key:"destroy",value:function(){if(this.expectedSupplyCenterCount=null,this.isFromCenter=null,this.turnWeightField=null,this.weightName=null,this.supplyCenters){for(var e=0,t=this.supplyCenters,r=t.length;e<r;e++)t[e].destroy();this.supplyCenters=null}}}]),t}();i.SuperMap.FindLocationParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FindClosestFacilitiesParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(35);var s=t.FindClosestFacilitiesParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new o.TransportationAnalystParameter,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters"}return n(t,[{key:"destroy",value:function(){this.event=null,this.expectFacilityCount=null,this.facilities=null,this.fromEvent=null,this.isAnalyzeById=null,this.maxWeight=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}]),t}();i.SuperMap.FindClosestFacilitiesParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FieldStatisticsParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(265);var s=t.FieldStatisticsParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.fieldName=null,t.statisticMode=null,e&&a.Util.extend(t,e),t.CLASS_NAME="SuperMap.FieldStatisticsParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.FieldParameters),n(r,[{key:"destroy",value:function(){this.fieldName=null,this.statisticMode=null}}]),r}();i.SuperMap.FieldStatisticsParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FieldParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.FieldParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasource=null,this.dataset=null,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.FieldParameters"}return n(t,[{key:"destroy",value:function(){this.datasource=null,this.dataset=null}}]),t}();i.SuperMap.FieldParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacilityAnalystUpstream3DParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(43);var s=t.FacilityAnalystUpstream3DParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return e=e||{},t.sourceNodeIDs=null,a.Util.extend(t,e),t.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.FacilityAnalyst3DParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this),this.sourceNodeIDs=null}}]),r}();i.SuperMap.FacilityAnalystUpstream3DParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacilityAnalystTraceup3DParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(43);var o=t.FacilityAnalystTraceup3DParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.FacilityAnalyst3DParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}}]),r}();i.SuperMap.FacilityAnalystTraceup3DParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacilityAnalystTracedown3DParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(43);var o=t.FacilityAnalystTracedown3DParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.FacilityAnalyst3DParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}}]),r}();i.SuperMap.FacilityAnalystTracedown3DParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacilityAnalystStreamParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.FacilityAnalystStreamParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,this.queryType=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters"}return n(t,[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null,this.type=null}}]),t}();i.SuperMap.FacilityAnalystStreamParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacilityAnalystSources3DParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(43);var o=t.FacilityAnalystSources3DParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.FacilityAnalyst3DParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}}]),r}();i.SuperMap.FacilityAnalystSources3DParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacilityAnalystSinks3DParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(43);var o=t.FacilityAnalystSinks3DParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.FacilityAnalyst3DParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}}]),r}();i.SuperMap.FacilityAnalystSinks3DParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditFeaturesParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3),s=r(9);var l=t.EditFeaturesParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=o.EditType.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.EditFeaturesParameters"}return n(t,[{key:"destroy",value:function(){this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=null,this.IDs=null,this.returnContent=null}}],[{key:"toJsonParameters",value:function(e){var t,r,n;if(e.editType===o.EditType.DELETE){if(null===e.IDs)return;n={ids:e.IDs}}else if(n=[],e.features){r=e.features.length;for(var i=0;i<r;i++)(t=e.features[i]).geometry=s.ServerGeometry.fromGeometry(t.geometry),n.push(t)}return a.Util.toJSON(n)}}]),t}();i.SuperMap.EditFeaturesParameters=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DensityKernelAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.DensityKernelAnalystParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters"}return n(t,[{key:"destroy",value:function(){this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=null}}],[{key:"toObject",value:function(e,t){for(var r in e)"dataset"!==r&&(t[r]=e[r])}}]),t}();i.SuperMap.DensityKernelAnalystParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatasetThiessenAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(79),s=r(9);var l=t.DatasetThiessenAnalystParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.filterQueryParameter=null,t.dataset=null,e&&a.Util.extend(t,e),t.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.ThiessenAnalystParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null)}}],[{key:"toObject",value:function(e,t){for(var r in e)"clipRegion"===r?t.clipRegion=s.ServerGeometry.fromGeometry(e.clipRegion):t[r]=e[r]}}]),r}();i.SuperMap.DatasetThiessenAnalystParameters=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SurfaceAnalystParametersSetting=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(3),o=r(1),s=r(9),l=r(26);var u=t.SurfaceAnalystParametersSetting=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=a.SmoothMethod.BSPLINE,this.smoothness=0,e&&o.Util.extend(this,e),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting"}return n(t,[{key:"destroy",value:function(){this.clipRegion&&(this.clipRegion.destroy(),this.clipRegion=null),this.datumValue=null,this.expectedZValues=null,this.interval=null,this.resampleTolerance=null,this.smoothMethod=null,this.smoothness=null}},{key:"toJSON",value:function(){var e="'datumValue':"+o.Util.toJSON(this.datumValue);if(e+=",'interval':"+o.Util.toJSON(this.interval),e+=",'resampleTolerance':"+o.Util.toJSON(this.resampleTolerance),e+=",'smoothMethod':"+o.Util.toJSON(this.smoothMethod),e+=",'smoothness':"+o.Util.toJSON(this.smoothness),null!=this.expectedZValues&&(e+=",'expectedZValues':"+o.Util.toJSON(this.expectedZValues)),null!=this.clipRegion){var t=this.clipRegion;this.clipRegion instanceof l.Geometry&&this.clipRegion.components&&(t=s.ServerGeometry.fromGeometry(this.clipRegion)),e+=",'clipRegion':"+o.Util.toJSON(t)}return"{"+e+"}"}}]),t}();i.SuperMap.SurfaceAnalystParametersSetting=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatasetSurfaceAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(15),s=r(80),l=r(9),u=r(26);var c=t.DatasetSurfaceAnalystParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.dataset=null,t.filterQueryParameter=new o.FilterParameter,t.zValueFieldName=null,e&&a.Util.extend(t,e),t.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,s.SurfaceAnalystParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);this.dataset=null,this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null),this.zValueFieldName=null}}],[{key:"toObject",value:function(e,t){for(var r in e)if("filterQueryParameter"===r&&(t.filterQueryParameter=e.filterQueryParameter),"extractParameter"===r)e.extractParameter.clipRegion instanceof u.Geometry&&e.extractParameter.clipRegion.components&&(e.extractParameter.clipRegion=l.ServerGeometry.fromGeometry(e.extractParameter.clipRegion)),t.extractParameter=e.extractParameter;else{if("dataset"===r)continue;if("surfaceAnalystMethod"===r)continue;t[r]=e[r]}}}]),r}();i.SuperMap.DatasetSurfaceAnalystParameters=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatasetOverlayAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),o=r(1),s=r(58),l=r(15),u=r(119),c=r(9);var a=t.DatasetOverlayAnalystParameters=function(e){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.operateDataset=null,t.operateDatasetFields=[],t.operateDatasetFilter=new l.FilterParameter,t.operateRegions=[],t.sourceDataset=null,t.sourceDatasetFields=[],t.sourceDatasetFilter=new l.FilterParameter,t.tolerance=0,t.resultSetting=new s.DataReturnOption,o.Util.extend(t,e),t.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,u.OverlayAnalystParameters),n(a,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this);var t=this;if(t.operateDataset=null,t.operateDatasetFields=null,t.operateDatasetFilter&&(t.operateDatasetFilter.destroy(),t.operateDatasetFilter=null),t.operateRegions){for(var r=0,n=t.operateRegions,i=n.length;r<i;r++)n[r].destroy();t.operateRegions=null}t.sourceDataset=null,t.sourceDatasetFields=null,t.sourceDatasetFilter&&(t.sourceDatasetFilter.destroy(),t.sourceDatasetFilter=null),t.tolerance=null,t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null)}}],[{key:"toObject",value:function(e,t){for(var r in e)if("sourceDataset"!==r)if("operateRegions"===r){t.operateRegions=[];var n=e.operateRegions;for(var i in n)n.hasOwnProperty(i)&&(t.operateRegions[i]=c.ServerGeometry.fromGeometry(n[i]))}else"resultSetting"===r?t.dataReturnOption=e.resultSetting:t[r]=e[r]}}]),a}();i.SuperMap.DatasetOverlayAnalystParameters=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatasetInfo=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(27);var s=t.DatasetInfo=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),e=e||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,a.Util.extend(this,e);var t=this.bounds;t&&(this.bounds=new o.Bounds(t.leftBottom.x,t.leftBottom.y,t.rightTop.x,t.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo"}return n(r,[{key:"destroy",value:function(){a.Util.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return(e=a.Util.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}]),r}();i.SuperMap.DatasetInfo=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransportationAnalystResultSetting=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.TransportationAnalystResultSetting=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting")}return n(t,[{key:"destroy",value:function(){this.returnEdgeFeatures=null,this.returnEdgeGeometry=null,this.returnEdgeIDs=null,this.returnNodeFeatures=null,this.returnNodeGeometry=null,this.returnNodeIDs=null,this.returnPathGuides=null,this.returnRoutes=null}}]),t}();i.SuperMap.TransportationAnalystResultSetting=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComputeWeightMatrixParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(35);var s=t.ComputeWeightMatrixParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.nodes=null,this.parameter=new o.TransportationAnalystParameter,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters"}return n(t,[{key:"destroy",value:function(){this.isAnalyzeById=null,this.nodes=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}]),t}();i.SuperMap.ComputeWeightMatrixParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorDictionary=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(19);var s=t.ColorDictionary=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),e=e||{},this.elevation=null,this.color=null,a.Util.extend(this,e);var t=this.color;t&&(this.color=new o.ServerColor(t.red,t.green,t.blue)),this.CLASS_NAME="SuperMap.ColorDictionary"}return n(r,[{key:"destroy",value:function(){a.Util.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return e=a.Util.copyAttributes(e,this)}}]),r}();i.SuperMap.ColorDictionary=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClipParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(9);var s=t.ClipParameter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!1,this.isExactClip=null,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ClipParameter"}return n(t,[{key:"destroy",value:function(){this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=null,this.isExactClip=null}},{key:"toJSON",value:function(){if(0==this.isClipInRegion)return null;var e="";if(e+="'isClipInRegion':"+a.Util.toJSON(this.isClipInRegion),null!=this.clipDatasetName&&(e+=",'clipDatasetName':"+a.Util.toJSON(this.clipDatasetName)),null!=this.clipDatasourceName&&(e+=",'clipDatasourceName':"+a.Util.toJSON(this.clipDatasourceName)),null!=this.isExactClip&&(e+=",'isExactClip':"+a.Util.toJSON(this.isExactClip)),null!=this.clipRegion){var t=o.ServerGeometry.fromGeometry(this.clipRegion);if(t){var r=t.parts[0],n=t.points.splice(0,r);e+=",'clipRegion':{\"point2Ds\":",e+=a.Util.toJSON(n),e+="}"}}return"{"+e+"}"}}]),t}();i.SuperMap.ClipParameter=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChartQueryParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),u=r(284);var o=t.ChartQueryParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ChartQueryParameters"}return n(t,[{key:"destroy",value:function(){this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null}},{key:"getVariablesJson",value:function(){var e="";if(e+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var t=[],r=this.chartLayerNames.length,n=0;n<r;n++)t.push('"'+this.chartLayerNames[n]+'"');e+='"chartLayerNames":'+("["+t.join(",")+"]")+","}if("ChartBoundsQuery"===this.queryMode&&this.bounds&&(e+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var i=[],a=this.chartQueryFilterParameters.length,o=0;o<a;o++){var s=this.chartQueryFilterParameters[o];s instanceof u.ChartQueryFilterParameter&&i.push(s.toJson())}var l="["+i.join(",")+"]";l='"chartQueryParams":'+l+",",l+='"startRecord":'+this.startRecord+",",e+='"chartQueryParameters":'+(l="{"+(l+='"expectCount":'+this.expectCount)+"}")}return e="{"+e+"}"}}]),t}();i.SuperMap.ChartQueryParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChartQueryFilterParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.ChartQueryFilterParameter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter"}return n(t,[{key:"destroy",value:function(){this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null}},{key:"toJson",value:function(){var e="";return e+='"isQueryPoint":'+this.isQueryPoint+",",e+='"isQueryLine":'+this.isQueryLine+",",e+='"isQueryRegion":'+this.isQueryRegion+",",this.attributeFilter&&(e+='"attributeFilter": "'+this.attributeFilter+'",'),e="{"+(e+='"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode)+"}"}}]),t}();i.SuperMap.ChartQueryFilterParameter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BurstPipelineAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.BurstPipelineAnalystParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters"}return n(t,[{key:"destroy",value:function(){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=null}}]),t}();i.SuperMap.BurstPipelineAnalystParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuffersAnalystJobsParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3),s=r(18);var l=t.BuffersAnalystJobsParameter=function(){function t(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=o.AnalystSizeUnit.METER,this.dissolveField="",this.output=null,!e)return this;a.Util.extend(this,e),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"}return n(t,[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof s.OutputSetting&&(this.output.destroy(),this.output=null)}}],[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]="bounds"===r?e[r].toBBOX():e[r]):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}]),t}();i.SuperMap.BuffersAnalystJobsParameter=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointWithMeasure=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(22);var s=t.PointWithMeasure=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.measure=null,e&&a.Util.extend(t,e),t.CLASS_NAME="SuperMap.PointWithMeasure",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.Point),n(r,[{key:"equals",value:function(e){var t=!1;if(null!=e){var r=this.x===e.x&&this.y===e.y&&this.measure===e.measure,n=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),i=isNaN(e.x)&&isNaN(e.y)&&isNaN(e.measure);t=r||n&&i}return t}},{key:"toJson",value:function(){var e="{";return null!=this.measure&&this.measure!=undefined&&(e+='"measure":'+this.measure+","),e+='"x":'+this.x+",",e+='"y":'+this.y,e+="}"}},{key:"destroy",value:function(){this.measure=null,this.x=null,this.y=null}}],[{key:"fromJson",value:function(e){if(e)return new r({x:e.x,y:e.y,measure:e.measure})}}]),r}();i.SuperMap.PointWithMeasure=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkItem=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(121);var s=t.LinkItem=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.LinkItem"}return n(t,[{key:"destroy",value:function(){this.datasourceConnectionInfo instanceof o.DatasourceConnectionInfo&&(this.datasourceConnectionInfo.destroy(),this.datasourceConnectionInfo=null),this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null}}]),t}();i.SuperMap.LinkItem=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatasetBufferAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(122),s=r(58),l=r(15);var u=t.DatasetBufferAnalystParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.dataset=null,t.filterQueryParameter=new l.FilterParameter,t.resultSetting=new s.DataReturnOption,t.isAttributeRetained=!0,t.isUnion=!1,a.Util.extend(t,e),t.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.BufferAnalystParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);this.dataset=null,this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null),this.resultSetting&&(this.resultSetting.destroy(),this.resultSetting=null),this.isAttributeRetained=null,this.isUnion=null}}],[{key:"toObject",value:function(e,t){for(var r in e)if("bufferSetting"===r)e.bufferSetting.radiusUnit=e.bufferSetting.radiusUnit.toUpperCase(),t.bufferAnalystParameter=e.bufferSetting;else if("resultSetting"===r)t.dataReturnOption=e.resultSetting;else{if("dataset"===r)continue;t[r]=e[r]}}}]),r}();i.SuperMap.DatasetBufferAnalystParameters=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferDistance=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.BufferDistance=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.exp=null,this.value=100,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.BufferDistance"}return n(t,[{key:"destroy",value:function(){this.exp=null,this.value=null}}]),t}();i.SuperMap.BufferDistance=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferSetting=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3),s=r(290);var l=t.BufferSetting=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.endType=o.BufferEndType.FLAT,this.leftDistance=new s.BufferDistance,this.rightDistance=new s.BufferDistance,this.semicircleLineSegment=4,this.radiusUnit=o.BufferRadiusUnit.METER,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.BufferSetting"}return n(t,[{key:"destroy",value:function(){this.endType=null,this.leftDistance&&(this.leftDistance.destroy(),this.leftDistance=null),this.rightDistance&&(this.rightDistance.destroy(),this.rightDistance=null),this.semicircleLineSegment=null,this.radiusUnit=null}}]),t}();i.SuperMap.BufferSetting=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AreaSolarRadiationParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.AreaSolarRadiationParameters=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters"}return n(t,[{key:"destroy",value:function(){this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName=null,this.planCurvatureName=null,this.deleteExistResultDataset=!0}}],[{key:"toObject",value:function(e,t){var r={};for(var n in e){if("dataset"!==n)"latitude"===n||"timeMode"===n||"dayStart"===n||("dayEnd"===n||"hourStart"===n||"hourEnd"===n)||("transmittance"===n||"hourInterval"===n||"dayInterval"===n)?r[n]=e[n]:t[n]=e[n]}t.parameter=r}}]),t}();i.SuperMap.AreaSolarRadiationParameters=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoDecodingParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.GeoDecodingParameter=function(){function r(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),e.filters){var t=[];e.filters.split(",").map(function(e){return t.push('"'+e+'"'),e}),e.filters=t}this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,a.Util.extend(this,e)}return n(r,[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}]),r}();i.SuperMap.GeoDecodingParameter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoCodingParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.GeoCodingParameter=function(){function r(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),e.filters){var t=[];e.filters.split(",").map(function(e){return t.push('"'+e+'"'),e}),e.filters=t}this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,a.Util.extend(this,e)}return n(r,[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}]),r}();i.SuperMap.GeoCodingParameter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPortalMap=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(83);var s=t.IPortalMap=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t=t||{},r.authorizeSetting=[],r.center="",r.controls=null,r.checkStatus="",r.createTime=0,r.description="",r.epsgCode=0,r.extent="",r.id=0,r.isDefaultBottomMap=!1,r.layers=[],r.level=null,r.nickname="",r.sourceType="",r.status=null,r.tags=[],r.thumbnail="",r.title="",r.units=null,r.updateTime=0,r.userName="",r.visitCount=0,a.Util.extend(r,t),r.mapUrl=e,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.IPortalServiceBase),i(n,[{key:"load",value:function(){var r=this;return r.request("GET",r.mapUrl+".json").then(function(e){if(e.error)return e;for(var t in e)r[t]=e[t]})}},{key:"update",value:function(){var e={units:this.units,level:this.level,center:this.center,controls:this.controls,description:this.description,epsgCode:this.epsgCode,extent:this.extent,status:this.status,tags:this.tags,layers:this.layers,title:this.title,thumbnail:this.thumbnail,sourceType:this.sourceType,authorizeSetting:this.authorizeSetting};return this.request("PUT",this.mapUrl,JSON.stringify(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}]),n}();n.SuperMap.iPortalMap=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPortalService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(83);var s=t.IPortalService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t=t||{},r.addedMapNames=null,r.addedSceneNames=null,r.authorizeSetting=[],r.checkStatus="",r.createTime=0,r.description="",r.enable=!0,r.id=0,r.isBatch=!1,r.isDataItemService=!1,r.linkPage=null,r.mapInfos=[],r.metadata=null,r.nickname="",r.offline=!1,r.proxiedUrl=null,r.resTitle="",r.scenes=[],r.serviceRootUrlId=null,r.tags=[],r.thumbnail=null,r.type="",r.updateTime=0,r.userName="",r.verifyReason=null,r.version=null,r.visitCount=0,a.Util.extend(r,t),r.serviceUrl=e,r.id&&(r.serviceUrl=e+"/"+r.id),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.IPortalServiceBase),i(n,[{key:"load",value:function(){var r=this;return r.request("GET",r.serviceUrl+".json").then(function(e){if(e.error)return e;for(var t in e)r[t]=e[t]})}},{key:"update",value:function(){var e={authorizeSetting:this.authorizeSetting,metadata:this.metadata,tags:this.tags,thumbnail:this.thumbnail};return this.request("PUT",this.serviceUrl,JSON.stringify(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}]),n}();n.SuperMap.iPortalService=s},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IPortalMapsQueryParam=undefined;var i=n(0),a=n(1);var o=r.IPortalMapsQueryParam=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.userNames=null,this.tags=null,this.suggest=!1,this.sourceTypes=null,this.keywords=null,this.epsgCode=null,this.orderBy=null,this.currentPage=null,this.pageSize=null,this.dirIds=null,this.isNotInDir=!1,this.updateStart=null,this.updateEnd=null,this.visitStart=null,this.visitEnd=null,this.filterFields=null,a.Util.extend(this,t)};i.SuperMap.iPortalMapsQueryParam=o},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IPortalServicesQueryParam=undefined;var i=n(0),a=n(1);var o=r.IPortalServicesQueryParam=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.tags=[],this.userNames="",this.types=[],this.checkStatus="",this.offline=!1,this.orderBy="",this.orderType="",this.keywords=[],this.currentPage=0,this.pageSize=0,this.isBatch=!1,this.dirIds=[],this.isNotInDir=!1,this.filterFields=[],this.authorizedOnly=!1,a.Util.extend(this,t)};i.SuperMap.iPortalServicesQueryParam=o},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IManagerCreateNodeParam=undefined;var i=n(0),a=n(1);var o=r.IManagerCreateNodeParam=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",a.Util.extend(this,t)};i.SuperMap.iManagerCreateNodeParam=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IManagerServiceBase=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(37),o=r(20);var s=t.IManagerServiceBase=function(){function r(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),e){var t=e.substr(e.length-1,1);this.serviceUrl="/"===t?e.substr(0,e.length-2):e}this.CLASS_NAME="SuperMap.iManagerServiceBase"}return n(r,[{key:"request",value:function(e,t,r,n){(n=n||{headers:{Accept:"*/*","Content-Type":"application/json"}}).hasOwnProperty("withCredentials")||(n.withCredentials=!0);var i=a.SecurityManager.imanagerToken;return i&&(n.headers||(n.headers=[]),n.headers["X-Auth-Token"]=i),r&&(r=JSON.stringify(r)),o.FetchRequest.commit(e,t,r,n).then(function(e){return e.json()})}}]),r}();i.SuperMap.iManagerServiceBase=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeControlBase=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(85);var o=t.TimeControlBase=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=this;e=e||{},this.speed=e.speed&&0<=e.speed?e.speed:1,this.frequency=e.speed&&0<=e.frequency?e.frequency:1e3,this.startTime=e.startTime&&null!=e.startTime?e.startTime:0,this.endTime=e.endTime&&null!=e.endTime&&e.endTime>=t.startTime?e.endTime:+new Date,this.repeat=e.repeat===undefined||e.repeat,this.reverse=e.reverse!==undefined&&e.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],t.events=new a.Events(this,null,this.EVENT_TYPES),t.speed=Number(t.speed),t.frequency=Number(t.frequency),t.startTime=Number(t.startTime),t.endTime=Number(t.endTime),t.startTime=Date.parse(new Date(t.startTime)),t.endTime=Date.parse(new Date(t.endTime)),t.currentTime=t.startTime,this.CLASS_NAME="SuperMap.TimeControlBase"}return n(r,[{key:"updateOptions",value:function(e){var t=this;(e=e||{}).speed&&0<=e.speed&&(t.speed=e.speed,t.speed=Number(t.speed)),e.speed&&0<=e.frequency&&(t.frequency=e.frequency,t.frequency=Number(t.frequency)),e.startTime&&null!=e.startTime&&(t.startTime=e.startTime,t.startTime=Date.parse(new Date(t.startTime))),e.endTime&&null!=e.endTime&&e.endTime>=t.startTime&&(t.endTime=e.endTime,t.endTime=Date.parse(new Date(t.endTime))),null!=e.repeat&&(t.repeat=e.repeat),null!=e.reverse&&(t.reverse=e.reverse)}},{key:"start",value:function(){this.running||(this.running=!0,this.tick(),this.events.triggerEvent("start",this.currentTime))}},{key:"pause",value:function(){this.running=!1,this.events.triggerEvent("pause",this.currentTime)}},{key:"stop",value:function(){this.currentTime=this.startTime,this.running&&(this.running=!1),this.events.triggerEvent("stop",this.currentTime)}},{key:"toggle",value:function(){this.running?this.pause():this.start()}},{key:"setSpeed",value:function(e){return 0<=e&&(this.speed=e,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(e){return 0<=e&&(this.frequency=e,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(e){return!((e=Date.parse(new Date(e)))>this.endTime)&&(this.startTime=e,this.currentTime<this.startTime&&(this.currentTime=this.startTime,this.tick()),!0)}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(e){return this.endTime=Date.parse(new Date(this.endTime)),!(e<this.startTime)&&(this.endTime=e,this.currentTime>=this.endTime&&(this.currentTime=this.startTime,this.tick()),!0)}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(e){return this.currentTime=Date.parse(new Date(this.currentTime)),e>=this.startTime&&e<=this.endTime&&(this.currentTime=e,this.startTime=this.currentTime,this.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(e){this.repeat=e}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(e){this.reverse=e}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){this.speed=null,this.frequency=null,this.startTime=null,this.endTime=null,this.currentTime=null,this.repeat=null,this.running=!1,this.reverse=null}},{key:"tick",value:function(){}}]),r}();i.SuperMap.TimeControlBase=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LogoBase64="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII="},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Feature=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1);var o=t.Feature=function(){function n(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.CLASS_NAME="SuperMap.Feature",this.layer=e,this.id=a.Util.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=t,this.data=null!=r?r:{}}return i(n,[{key:"destroy",value:function(){this.id=null,this.lonlat=null,this.data=null}}]),n}();n.SuperMap.Feature=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=undefined;var c=r(0),h=r(1),n=t.Event=c.SuperMap.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1===e.touches.length},isMultiTouch:function(e){return e.touches&&1<e.touches.length},isLeftClick:function(e){return e.which&&1===e.which||e.button&&1===e.button},isRightClick:function(e){return e.which&&3===e.which||e.button&&2===e.button},stop:function(e,t){t||(e.preventDefault?e.preventDefault():e.returnValue=!1),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},findElement:function(e,t){for(var r=c.SuperMap.Event.element(e);r.parentNode&&(!r.tagName||r.tagName.toUpperCase()!=t.toUpperCase());)r=r.parentNode;return r},observe:function(e,t,r,n){var i=h.Util.getElement(e);if(n=n||!1,"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||i.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),!i._eventCacheID){var a="eventCacheID_";i.id&&(a=i.id+"_"+a),i._eventCacheID=h.Util.createUniqueID(a)}var o=i._eventCacheID;this.observers[o]||(this.observers[o]=[]),this.observers[o].push({element:i,name:t,observer:r,useCapture:n}),i.addEventListener?i.addEventListener(t,r,n):i.attachEvent&&i.attachEvent("on"+t,r)},stopObservingElement:function(e){var t=h.Util.getElement(e)._eventCacheID;this._removeElementObservers(c.SuperMap.Event.observers[t])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;0<=t;t--){var r=e[t],n=new Array(r.element,r.name,r.observer,r.useCapture);c.SuperMap.Event.stopObserving.apply(this,n)}},stopObserving:function(e,t,r,n){n=n||!1;var i=h.Util.getElement(e),a=i._eventCacheID;"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||i.detachEvent)&&(t="keydown");var o=!1,s=c.SuperMap.Event.observers[a];if(s)for(var l=0;!o&&l<s.length;){var u=s[l];if(u.name===t&&u.observer===r&&u.useCapture===n){s.splice(l,1),0==s.length&&delete c.SuperMap.Event.observers[a],o=!0;break}l++}return o&&(i.removeEventListener?i.removeEventListener(t,r,n):i&&i.detachEvent&&i.detachEvent("on"+t,r)),o},unloadCache:function(){if(c.SuperMap.Event&&c.SuperMap.Event.observers){for(var e in c.SuperMap.Event.observers){var t=c.SuperMap.Event.observers[e];c.SuperMap.Event._removeElementObservers.apply(this,[t])}c.SuperMap.Event.observers=!1}},CLASS_NAME:"SuperMap.Event"};c.SuperMap.Event=n,c.SuperMap.Event.observe(window,"unload",c.SuperMap.Event.unloadCache,!1)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Rectangle=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),o=r(26),s=r(27);var a=t.Rectangle=function(e){function a(e,t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t,r,n));return i.x=e,i.y=t,i.width=r,i.height=n,i.CLASS_NAME="SuperMap.Geometry.Rectangle",i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o.Geometry),n(a,[{key:"calculateBounds",value:function(){this.bounds=new s.Bounds(this.x,this.y,this.x+this.width,this.y+this.height)}},{key:"getArea",value:function(){return this.width*this.height}}]),a}();i.SuperMap.Geometry.Rectangle=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Size=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0);var a=t.Size=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.w=e?parseFloat(e):0,this.h=e?parseFloat(t):0,this.CLASS_NAME="SuperMap.Size"}return n(r,[{key:"toString",value:function(){return"w="+this.w+",h="+this.h}},{key:"clone",value:function(){return new r(this.w,this.h)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.w===e.w&&this.h===e.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(e.w)&&isNaN(e.h)),t}},{key:"destroy",value:function(){this.w=null,this.h=null}}]),r}();i.SuperMap.Size=a},function(e,t,r){"use strict";r(536)},function(e,t,r){"use strict";r(307),r(529)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trafficTransferAnalystService=t.TrafficTransferAnalystService=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(8),s=r(5);var l=t.TrafficTransferAnalystService=o.ServiceBase.extend({initialize:function(e,t){o.ServiceBase.prototype.initialize.call(this,e,t)},queryStop:function(e,t){new s.StopQueryService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)},analysisTransferPath:function(e,t){new s.TransferPathService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(this._processParams(e))},analysisTransferSolution:function(e,t){new s.TransferSolutionService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(this._processParams(e))},_processParams:function(r){return r?(r.points&&a["default"].Util.isArray(r.points)&&r.points.map(function(e,t){return r.points[t]=e instanceof a["default"].LatLng?{x:e.lng,y:e.lat}:e,r.points[t]}),r):{}}}),u=t.trafficTransferAnalystService=function(e,t){return new l(e,t)};a["default"].supermap.trafficTransferAnalystService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.themeService=t.ThemeService=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n},o=r(8);r(4);var s=r(5);var l=t.ThemeService=o.ServiceBase.extend({initialize:function(e,t){o.ServiceBase.prototype.initialize.call(this,e,t)},getThemeInfo:function(e,t){new s.ThemeService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)}}),u=t.themeService=function(e,t){return new l(e,t)};a["default"].supermap.themeService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spatialAnalystService=t.SpatialAnalystService=undefined;var n,i=r(2),p=(n=i)&&n.__esModule?n:{"default":n};r(4);var a=r(8),y=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}}(r(32)),d=r(28),s=r(5);var o=t.SpatialAnalystService=a.ServiceBase.extend({initialize:function(e,t){a.ServiceBase.prototype.initialize.call(this,e,t)},getAreaSolarRadiationResult:function(e,t,r){new s.AreaSolarRadiationService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(e)},bufferAnalysis:function(e,t,r){new s.BufferAnalystService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},densityAnalysis:function(e,t,r){new s.DensityAnalystService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},generateSpatialData:function(e,t,r){new s.GenerateSpatialDataService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(e)},geoRelationAnalysis:function(e,t,r){new s.GeoRelationAnalystService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(e)},interpolationAnalysis:function(e,t,r){new s.InterpolationAnalystService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},mathExpressionAnalysis:function(e,t,r){new s.MathExpressionAnalysisService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},overlayAnalysis:function(e,t,r){new s.OverlayAnalystService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},routeCalculateMeasure:function(e,t,r){new s.RouteCalculateMeasureService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},routeLocate:function(e,t,r){new s.RouteLocatorService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},surfaceAnalysis:function(e,t,r){new s.SurfaceAnalystService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},terrainCurvatureCalculate:function(e,t,r){new s.TerrainCurvatureCalculationService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(e)},thiessenAnalysis:function(e,t,r){new s.ThiessenAnalystService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},geometrybatchAnalysis:function(e,t,r){for(var n=new s.GeometryBatchAnalystService(this.url,{serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}),i=[],a=0;a<e.length;a++){var o=e[a];i.push({analystName:o.analystName,param:this._processParams(o.param)})}n.processAsync(i)},_processParams:function(r){if(!r)return{};if(r.bounds&&(r.bounds=d.CommontypesConversion.toSuperMapBounds(r.bounds)),r.inputPoints)for(var e=0;e<r.inputPoints.length;e++){var t=r.inputPoints[e];p["default"].Util.isArray(t)&&(r.inputPoints[e]={x:t[0],y:t[1],tag:t[2]})}if(r.points)for(var n=0;n<r.points.length;n++){var i=r.points[n];p["default"].Util.isArray(i)?r.points[n]={x:i[0],y:i[1]}:i instanceof p["default"].LatLng?r.points[n]={x:i.lng,y:i.lat}:r.points[n]={x:i.x,y:i.y}}if(r.point&&(p["default"].Util.isArray(r.point)?r.point={x:r.point[0],y:r.point[1]}:r.point instanceof p["default"].LatLng?r.point={x:r.point.lng,y:r.point.lat}:r.point={x:r.point.x,y:r.point.y}),r.extractRegion&&(r.extractRegion=y.toSuperMapGeometry(r.extractRegion)),r.extractParameter&&r.extractParameter.clipRegion&&(r.extractParameter.clipRegion=y.toSuperMapGeometry(r.extractParameter.clipRegion)),r.sourceGeometry){var a=null;r.sourceGeometrySRID&&(a=r.sourceGeometrySRID),r.sourceGeometry=y.toSuperMapGeometry(r.sourceGeometry),a&&(r.sourceGeometry.SRID=a),delete r.sourceGeometry.sourceGeometrySRID}if(r.operateGeometry&&(r.operateGeometry=y.toSuperMapGeometry(r.operateGeometry)),r.sourceGeometries){for(var o=[],s=0;s<r.sourceGeometries.length;s++)o.push(y.toSuperMapGeometry(r.sourceGeometries[s]));r.sourceGeometries=o}if(r.operateGeometries){for(var l=[],u=0;u<r.operateGeometries.length;u++)l.push(y.toSuperMapGeometry(r.operateGeometries[u]));r.operateGeometries=l}if(r.sourceRoute&&r.sourceRoute instanceof p["default"].Polyline){var c={type:"LINEM"};c.parts=[r.sourceRoute.getLatLngs().length],c.points=[];for(var h=0;h<r.sourceRoute.getLatLngs().length;h++){var f=r.sourceRoute.getLatLngs()[h];c.points=c.points.concat({x:f.lng,y:f.lat,measure:f.alt})}r.sourceRoute=c}return r.operateRegions&&p["default"].Util.isArray(r.operateRegions)&&r.operateRegions.map(function(e,t){return r.operateRegions[t]=y.toSuperMapGeometry(e),r.operateRegions[t]}),r},_processFormat:function(e){return e||s.DataFormat.GEOJSON}}),l=t.spatialAnalystService=function(e,t){return new o(e,t)};p["default"].supermap.spatialAnalystService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryService=t.QueryService=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(8),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}}(r(32)),l=r(28),u=r(5);var c=t.QueryService=o.ServiceBase.extend({initialize:function(e,t){o.ServiceBase.prototype.initialize.call(this,e,t)},queryByBounds:function(e,t,r){new u.QueryByBoundsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},queryByDistance:function(e,t,r){new u.QueryByDistanceService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},queryBySQL:function(e,t,r){new u.QueryBySQLService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},queryByGeometry:function(e,t,r){new u.QueryByGeometryService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},_processParams:function(e){return e?(e.returnContent=null==e.returnContent||e.returnContent,e.queryParams&&!a["default"].Util.isArray(e.queryParams)&&(e.queryParams=[e.queryParams]),e.bounds&&(e.bounds=l.CommontypesConversion.toSuperMapBounds(e.bounds)),e.geometry&&(e.geometry instanceof a["default"].Point?e.geometry=new u.GeometryPoint(e.geometry.x,e.geometry.y):e.geometry=s.toSuperMapGeometry(e.geometry)),e):{}},_processFormat:function(e){return e||u.DataFormat.GEOJSON}}),h=t.queryService=function(e,t){return new c(e,t)};a["default"].supermap.queryService=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processingService=t.ProcessingService=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(8),s=r(28),l=r(5);var u=t.ProcessingService=o.ServiceBase.extend({initialize:function(e,t){t=t||{},a["default"].setOptions(this,t),o.ServiceBase.prototype.initialize.call(this,e,t),this.kernelDensityJobs={},this.summaryMeshJobs={},this.queryJobs={},this.summaryRegionJobs={},this.vectorClipJobs={},this.overlayGeoJobs={},this.buffersJobs={},this.topologyValidatorJobs={},this.summaryAttributesJobs={}},getKernelDensityJobs:function(e,t){var r=this._processFormat(t);new l.KernelDensityJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getKernelDensityJobs()},getKernelDensityJob:function(e,t,r){var n=this._processFormat(r);new l.KernelDensityJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getKernelDensityJob(e)},addKernelDensityJob:function(e,t,r,n){var i=this,a=i._processParams(e),o=i._processFormat(n);new l.KernelDensityJobsService(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.kernelDensityJobs[e.id]=e.state}},format:o}).addKernelDensityJob(a,r)},getKernelDensityJobState:function(e){return this.kernelDensityJobs[e]},getSummaryMeshJobs:function(e,t){var r=this._processFormat(t);new l.SummaryMeshJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getSummaryMeshJobs()},getSummaryMeshJob:function(e,t,r){var n=this._processFormat(r);new l.SummaryMeshJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getSummaryMeshJob(e)},addSummaryMeshJob:function(e,t,r,n){var i=this,a=i._processParams(e),o=i._processFormat(n);new l.SummaryMeshJobsService(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.summaryMeshJobs[e.id]=e.state}},format:o}).addSummaryMeshJob(a,r)},getSummaryMeshJobState:function(e){return this.summaryMeshJobs[e]},getQueryJobs:function(e,t){var r=this._processFormat(t);new l.SingleObjectQueryJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getQueryJobs()},getQueryJob:function(e,t,r){var n=this._processFormat(r);new l.SingleObjectQueryJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getQueryJob(e)},addQueryJob:function(e,t,r,n){var i=this,a=i._processParams(e),o=i._processFormat(n);new l.SingleObjectQueryJobsService(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.queryJobs[e.id]=e.state}},format:o}).addQueryJob(a,r)},getQueryJobState:function(e){return this.queryJobs[e]},getSummaryRegionJobs:function(e,t){var r=this._processFormat(t);new l.SummaryRegionJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getSummaryRegionJobs()},getSummaryRegionJob:function(e,t,r){var n=this._processFormat(r);new l.SummaryRegionJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getSummaryRegionJob(e)},addSummaryRegionJob:function(e,t,r,n){var i=this,a=i._processParams(e),o=i._processFormat(n);new l.SummaryRegionJobsService(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.summaryRegionJobs[e.id]=e.state}},format:o}).addSummaryRegionJob(a,r)},getSummaryRegionJobState:function(e){return this.summaryRegionJobs[e]},getVectorClipJobs:function(e,t){var r=this._processFormat(t);new l.VectorClipJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getVectorClipJobs()},getVectorClipJob:function(e,t,r){var n=this._processFormat(r);new l.VectorClipJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getVectorClipJob(e)},addVectorClipJob:function(e,t,r,n){var i=this,a=i._processParams(e),o=i._processFormat(n);new l.VectorClipJobsService(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.vectorClipJobs[e.id]=e.state}},format:o}).addVectorClipJob(a,r)},getVectorClipJobState:function(e){return this.vectorClipJobs[e]},getOverlayGeoJobs:function(e,t){var r=this._processFormat(t);new l.OverlayGeoJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getOverlayGeoJobs()},getOverlayGeoJob:function(e,t,r){var n=this._processFormat(r);new l.OverlayGeoJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getOverlayGeoJob(e)},addOverlayGeoJob:function(e,t,r,n){var i=this,a=i._processParams(e),o=i._processFormat(n);new l.OverlayGeoJobsService(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.overlayGeoJobs[e.id]=e.state}},format:o}).addOverlayGeoJob(a,r)},getoverlayGeoJobState:function(e){return this.overlayGeoJobs[e]},getBuffersJobs:function(e,t){var r=this._processFormat(t);new l.BuffersAnalystJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getBuffersJobs()},getBuffersJob:function(e,t,r){var n=this._processFormat(r);new l.BuffersAnalystJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getBuffersJob(e)},addBuffersJob:function(e,t,r,n){var i=this,a=i._processParams(e),o=i._processFormat(n);new l.BuffersAnalystJobsService(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.buffersJobs[e.id]=e.state}},format:o}).addBuffersJob(a,r)},getBuffersJobState:function(e){return this.buffersJobs[e]},getTopologyValidatorJobs:function(e,t){var r=this._processFormat(t);new l.TopologyValidatorJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getTopologyValidatorJobs()},getTopologyValidatorJob:function(e,t,r){var n=this._processFormat(r);new l.TopologyValidatorJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getTopologyValidatorJob(e)},addTopologyValidatorJob:function(e,t,r,n){var i=this,a=i._processParams(e),o=i._processFormat(n);new l.TopologyValidatorJobsService(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.topologyValidatorJobs[e.id]=e.state}},format:o}).addTopologyValidatorJob(a,r)},getTopologyValidatorJobState:function(e){return this.topologyValidatorJobs[e]},getSummaryAttributesJobs:function(e,t){var r=this._processFormat(t);new l.SummaryAttributesJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getSummaryAttributesJobs()},getSummaryAttributesJob:function(e,t,r){var n=this._processFormat(r);new l.SummaryAttributesJobsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getSummaryAttributesJob(e)},addSummaryAttributesJob:function(e,t,r,n){var i=this,a=i._processParams(e),o=i._processFormat(n);new l.SummaryAttributesJobsService(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.summaryAttributesJobs[e.id]=e.state}},format:o}).addSummaryAttributesJob(a,r)},getSummaryAttributesJobState:function(e){return this.summaryAttributesJobs[e]},_processFormat:function(e){return e||l.DataFormat.GEOJSON},_processParams:function(e){return e?(e.bounds&&(e.bounds=s.CommontypesConversion.toSuperMapBounds(e.bounds)),e.query&&(e.query=s.CommontypesConversion.toSuperMapBounds(e.query)),e.geometryQuery&&(e.geometryQuery=s.CommontypesConversion.toProcessingParam(e.geometryQuery)),e.geometryClip&&(e.geometryClip=s.CommontypesConversion.toProcessingParam(e.geometryClip)),e):{}}}),c=t.processingService=function(e,t){return new u(e,t)};a["default"].supermap.processingService=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.networkAnalystService=t.NetworkAnalystService=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(8),s=r(5);var l=t.NetworkAnalystService=o.ServiceBase.extend({initialize:function(e,t){o.ServiceBase.prototype.initialize.call(this,e,t)},burstPipelineAnalyst:function(e,t){new s.BurstPipelineAnalystService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(this._processParams(e))},computeWeightMatrix:function(e,t){new s.ComputeWeightMatrixService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(this._processParams(e))},findClosestFacilities:function(e,t,r){new s.FindClosestFacilitiesService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},streamFacilityAnalyst:function(e,t,r){new s.FacilityAnalystStreamService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},findLocation:function(e,t,r){new s.FindLocationService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},findPath:function(e,t,r){new s.FindPathService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},findTSPPaths:function(e,t,r){new s.FindTSPPathsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},findMTSPPaths:function(e,t,r){new s.FindMTSPPathsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},findServiceAreas:function(e,t,r){new s.FindServiceAreasService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}).processAsync(this._processParams(e))},updateEdgeWeight:function(e,t){new s.UpdateEdgeWeightService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)},updateTurnNodeWeight:function(e,t){new s.UpdateTurnNodeWeightService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)},_processParams:function(r){if(!r)return{};if(r.centers&&a["default"].Util.isArray(r.centers)&&r.centers.map(function(e,t){return r.centers[t]=e instanceof a["default"].LatLng?{x:e.lng,y:e.lat}:e,r.centers[t]}),r.nodes&&a["default"].Util.isArray(r.nodes)&&r.nodes.map(function(e,t){return r.nodes[t]=e instanceof a["default"].LatLng?{x:e.lng,y:e.lat}:e,r.nodes[t]}),r.event&&r.event instanceof a["default"].LatLng&&(r.event={x:r.event.lng,y:r.event.lat}),r.facilities&&a["default"].Util.isArray(r.facilities)&&r.facilities.map(function(e,t){return r.facilities[t]=e instanceof a["default"].LatLng?{x:e.lng,y:e.lat}:e,r.facilities[t]}),r.parameter&&r.parameter.barrierPoints){var e=r.parameter.barrierPoints;a["default"].Util.isArray(e)?e.map(function(e,t){return r.parameter.barrierPoints[t]=e instanceof a["default"].LatLng?{x:e.lng,y:e.lat}:e,r.parameter.barrierPoints[t]}):r.parameter.barrierPoints=[e instanceof a["default"].LatLng?{x:e.lng,y:e.lat}:e]}return r},_processFormat:function(e){return e||s.DataFormat.GEOJSON}}),u=t.networkAnalystService=function(e,t){return new l(e,t)};a["default"].supermap.networkAnalystService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.networkAnalyst3DService=t.NetworkAnalyst3DService=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n},o=r(8);r(4);var s=r(5);var l=t.NetworkAnalyst3DService=o.ServiceBase.extend({initialize:function(e,t){o.ServiceBase.prototype.initialize.call(this,e,t)},sinksFacilityAnalyst:function(e,t){new s.FacilityAnalystSinks3DService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)},sourcesFacilityAnalyst:function(e,t){new s.FacilityAnalystSources3DService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)},traceUpFacilityAnalyst:function(e,t){new s.FacilityAnalystTraceup3DService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)},traceDownFacilityAnalyst:function(e,t){new s.FacilityAnalystTracedown3DService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)},upstreamFacilityAnalyst:function(e,t){new s.FacilityAnalystUpstream3DService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)}}),u=t.networkAnalyst3DService=function(e,t){return new l(e,t)};a["default"].supermap.networkAnalyst3DService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.measureService=t.MeasureService=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n},o=r(8);r(4);var s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}}(r(32)),l=r(5);var u=t.MeasureService=o.ServiceBase.extend({initialize:function(e,t){o.ServiceBase.prototype.initialize.call(this,e,t)},measureDistance:function(e,t){return this.measure(l.MeasureMode.DISTANCE,e,t),this},measureArea:function(e,t){return this.measure(l.MeasureMode.AREA,e,t),this},measure:function(e,t,r){if(t instanceof l.MeasureParameters){t.geometry&&(t.geometry=s.toSuperMapGeometry(t.geometry)),new l.MeasureService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,measureMode:e,eventListeners:{scope:this,processCompleted:r,processFailed:r}}).processAsync(t)}}}),c=t.measureService=function(e,t){return new u(e,t)};a["default"].supermap.measureService=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.layerInfoService=t.LayerInfoService=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n},o=r(8);r(4);var s=r(5);var l=t.LayerInfoService=o.ServiceBase.extend({initialize:function(e,t){o.ServiceBase.prototype.initialize.call(this,e,t)},getLayersInfo:function(e){new s.GetLayersInfoService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{processCompleted:e,processFailed:e}}).processAsync()},setLayerInfo:function(e,t){if(e instanceof s.SetLayerInfoParameters){var r=e.resourceID,n=e.tempLayerName,i=e.layerInfo;if(r&&n){var a=this.url.concat();a+="/tempLayersSet/"+r+"/"+n,new s.SetLayerInfoService(a,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(i)}}},setLayersInfo:function(e,t){if(e instanceof s.SetLayersInfoParameters){var r=e.resourceID,n=!!e.isTempLayers&&e.isTempLayers,i=e.layersInfo;if((!n||r)&&i)new s.SetLayersInfoService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{processCompleted:t,processFailed:t},resourceID:r,isTempLayers:n}).processAsync(i)}},setLayerStatus:function(e,t){if(e instanceof s.SetLayerStatusParameters){new s.SetLayerStatusService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(e)}}}),u=t.layerInfoService=function(e,t){return new l(e,t)};a["default"].supermap.layerInfoService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gridCellInfosService=t.GridCellInfosService=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n},o=r(8);r(4);var s=r(5);var l=t.GridCellInfosService=o.ServiceBase.extend({initialize:function(e,t){o.ServiceBase.prototype.initialize.call(this,e,t)},getGridCellInfos:function(e,t){if(e instanceof s.GetGridCellInfosParameters){new s.GetGridCellInfosService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)}}}),u=t.gridCellInfosService=function(e,t){return new l(e,t)};a["default"].supermap.gridCellInfosService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fieldService=t.FieldService=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(8),s=r(5);var l=t.FieldService=o.ServiceBase.extend({initialize:function(e){o.ServiceBase.prototype.initialize.call(this,e)},getFields:function(e,t){new s.GetFieldsService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},datasource:e.datasource,dataset:e.dataset}).processAsync()},getFieldStatisticsInfo:function(e,t){if(e instanceof s.FieldStatisticsParameters){var r=e.fieldName,n=e.statisticMode;for(var i in n&&!a["default"].Util.isArray(n)&&(n=[n]),this.currentStatisticResult={fieldName:r},this._statisticsCallback=t,n)this.currentStatisticResult[n[i]]=null,this._fieldStatisticRequest(e.datasource,e.dataset,r,n[i])}},_fieldStatisticRequest:function(e,t,r,n){new s.FieldStatisticService(this.url,{eventListeners:{scope:this,processCompleted:this._processCompleted,processFailed:this._statisticsCallback},datasource:e,dataset:t,field:r,statisticMode:n}).processAsync()},_processCompleted:function(e){var t=!0,r=e.result;for(var n in this.currentStatisticResult&&null==this.currentStatisticResult[r.mode]&&(this.currentStatisticResult[r.mode]=r.result),this.currentStatisticResult)if(null==this.currentStatisticResult[n]){t=!1;break}t&&this._statisticsCallback({result:this.currentStatisticResult})}}),u=t.fieldService=function(e,t){return new l(e,t)};a["default"].supermap.fieldService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chartService=t.ChartService=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(5),s=r(8),l=r(28);var u=t.ChartService=s.ServiceBase.extend({initialize:function(e,t){s.ServiceBase.prototype.initialize.call(this,e,t)},queryChart:function(e,t,r){var n=this._processParams(e),i=this._processFormat(r);new o.ChartQueryService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:i}).processAsync(n)},getChartFeatureInfo:function(e){var t=this.url.concat();t+="/chartFeatureInfoSpecs",new o.ChartFeatureInfoSpecsService(t,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync()},_processParams:function(e){if(!e)return{};e.returnContent=null==e.returnContent||e.returnContent,e.chartQueryFilterParameters&&!a["default"].Util.isArray(e.chartQueryFilterParameters)&&(e.chartQueryFilterParameters=[e.chartQueryFilterParameters]),e.bounds&&(e.bounds=l.CommontypesConversion.toSuperMapBounds(e.bounds))},_processFormat:function(e){return e||o.DataFormat.GEOJSON}}),c=t.chartService=function(e,t){return new u(e,t)};a["default"].supermap.chartService=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addressMatchService=t.AddressMatchService=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n},o=r(8);r(4);var s=r(5);var l=t.AddressMatchService=o.ServiceBase.extend({initialize:function(e,t){o.ServiceBase.prototype.initialize.call(this,e,t)},code:function(e,t){new s.AddressMatchService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).code(this.url+"/geocoding",e)},decode:function(e,t){new s.AddressMatchService(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).decode(this.url+"/geodecoding",e)}}),u=t.addressMatchService=function(e,t){return new l(e,t)};a["default"].supermap.addressMatchService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trafficTransferAnalystService=t.TrafficTransferAnalystService=t.themeService=t.ThemeService=t.spatialAnalystService=t.SpatialAnalystService=t.ServiceBase=t.queryService=t.QueryService=t.processingService=t.ProcessingService=t.networkAnalystService=t.NetworkAnalystService=t.networkAnalyst3DService=t.NetworkAnalyst3DService=t.measureService=t.MeasureService=t.mapService=t.MapService=t.layerInfoService=t.LayerInfoService=t.gridCellInfosService=t.GridCellInfosService=t.fieldService=t.FieldService=t.featureService=t.FeatureService=t.dataFlowService=t.DataFlowService=t.chartService=t.ChartService=t.addressMatchService=t.AddressMatchService=undefined;var n=r(321),i=r(320),a=r(143),o=r(145),s=r(319),l=r(318),u=r(317),c=r(156),h=r(316),f=r(315),p=r(314),y=r(313),d=r(312),v=r(8),m=r(311),g=r(310),b=r(309);t.AddressMatchService=n.AddressMatchService,t.addressMatchService=n.addressMatchService,t.ChartService=i.ChartService,t.chartService=i.chartService,t.DataFlowService=a.DataFlowService,t.dataFlowService=a.dataFlowService,t.FeatureService=o.FeatureService,t.featureService=o.featureService,t.FieldService=s.FieldService,t.fieldService=s.fieldService,t.GridCellInfosService=l.GridCellInfosService,t.gridCellInfosService=l.gridCellInfosService,t.LayerInfoService=u.LayerInfoService,t.layerInfoService=u.layerInfoService,t.MapService=c.MapService,t.mapService=c.mapService,t.MeasureService=h.MeasureService,t.measureService=h.measureService,t.NetworkAnalyst3DService=f.NetworkAnalyst3DService,t.networkAnalyst3DService=f.networkAnalyst3DService,t.NetworkAnalystService=p.NetworkAnalystService,t.networkAnalystService=p.networkAnalystService,t.ProcessingService=y.ProcessingService,t.processingService=y.processingService,t.QueryService=d.QueryService,t.queryService=d.queryService,t.ServiceBase=v.ServiceBase,t.SpatialAnalystService=m.SpatialAnalystService,t.spatialAnalystService=m.spatialAnalystService,t.ThemeService=g.ThemeService,t.themeService=g.themeService,t.TrafficTransferAnalystService=b.TrafficTransferAnalystService,t.trafficTransferAnalystService=b.trafficTransferAnalystService},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorTilePBF=t.VectorTileJSON=t.VectorTile=t.VectorGrid=t.VectorFeatureType=t.TextSymbolizer=t.PolyBase=t.Symbolizer=t.SVGRenderer=t.RegionSymbolizer=t.PointSymbolizer=t.LineSymbolizer=t.CanvasRenderer=undefined;var n=r(90),i=r(136),a=r(137),o=r(135),s=r(91),l=r(46),u=r(88),c=r(89),h=r(47),f=r(139),p=r(138),y=r(131),d=r(134);t.CanvasRenderer=n.CanvasRenderer,t.LineSymbolizer=i.LineSymbolizer,t.PointSymbolizer=a.PointSymbolizer,t.RegionSymbolizer=o.RegionSymbolizer,t.SVGRenderer=s.SVGRenderer,t.Symbolizer=l.Symbolizer,t.PolyBase=u.PolyBase,t.TextSymbolizer=c.TextSymbolizer,t.VectorFeatureType=h.VectorFeatureType,t.VectorGrid=f.VectorGrid,t.VectorTile=p.VectorTile,t.VectorTileJSON=y.VectorTileJSON,t.VectorTilePBF=d.VectorTilePBF},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeLayer=t.themeFeature=t.ThemeFeature=t.GeoFeatureThemeLayer=undefined;var n=r(63),i=r(92),a=r(93);t.GeoFeatureThemeLayer=n.GeoFeatureThemeLayer,t.ThemeFeature=i.ThemeFeature,t.themeFeature=i.themeFeature,t.ThemeLayer=a.ThemeLayer},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapVRenderer=undefined;var n=r(140);t.MapVRenderer=n.MapVRenderer},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompOpMap=t.ServerStyleMap=t.CartoStyleMap=t.DefaultStyle=t.CartoCSSToLeaflet=undefined;var n=r(94),i=r(151),a=r(150);t.CartoCSSToLeaflet=n.CartoCSSToLeaflet,t.DefaultStyle=i.DefaultStyle,t.CartoStyleMap=a.CartoStyleMap,t.ServerStyleMap=a.ServerStyleMap,t.CompOpMap=a.CompOpMap},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.heatMapFeature=t.HeatMapFeature=t.heatMapLayer=t.HeatMapLayer=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n},v=r(5);var o=t.HeatMapLayer=a["default"].Layer.extend({options:{alwaysMapCRS:!1,id:v.CommonUtil.createUniqueID("heatMapLayer_"),featureWeight:null,opacity:1,colors:["blue","cyan","lime","yellow","red"],useGeoUnit:!1,radius:50,attribution:"Map Data <span>© <a href='http://support.supermap.com.cn/product/iServer.aspx' target='_blank'>SuperMap iServer</a></span> with <span>© <a href='http://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>"},initialize:function(e,t){a["default"].Util.setOptions(this,t),this.name=e,this.features=[],this.maxWeight=null,this.minWeight=null,this.rootCanvas=null,this.canvasContext=null,this.maxWidth=null,this.maxHeight=null,this.id=this.options.id,this.featureWeight=this.options.featureWeight,this.colors=this.options.colors,this.useGeoUnit=this.options.useGeoUnit,this.opacity=this.options.opacity,this.radius=this.options.radius,this.movingOffset=[0,0]},onRemove:function(e){a["default"].DomUtil.remove(this.rootCanvas),e.off("mousemove",this.mouseMoveHandler)},onAdd:function(e){var r=this;if(r._map=e,r._createCanvasContainer(),r.rootCanvas){var t=e.getSize();r.rootCanvas.width=r.maxWidth=t.x,r.rootCanvas.height=r.maxHeight=t.y,r._updateOpacity(),r.mouseMoveHandler=function(e){var t=e.layerPoint;r.currentMousePosition=a["default"].point(t.x+r.movingOffset[0],t.y+r.movingOffset[1])},e.on("mousemove",r.mouseMoveHandler),r.update()}else e.removeLayer(r)},addFeatures:function(e){this.features=this.toiClientFeature(e),this.refresh()},refresh:function(){if(0!==this.features.length&&this._map){var e=this._map.getBounds();this.updateHeatPoints(e)}},updateHeatPoints:function(e){this.features&&0<this.features.length?this.convertFastToPixelPoints(e):this.canvasContext.clearRect(0,0,this.maxWidth,this.maxWidth)},convertFastToPixelPoints:function(e){var t,r,n,i,a,o,s,l=[],u=e.getEast()-e.getWest(),c=e.getNorth()-e.getSouth(),h=this._map.getSize();i=u/h.x>c/h.y?u/h.x:c/h.y,this.useRadius=this.useGeoUnit?parseInt(this.radius/i):this.radius;for(var f=0;f<this.features.length;f++){var p=this.features[f],y=p.geometry,d=this.getLocalXY(new v.LonLat(y.x,y.y));this.featureWeight?(d.weight=p.attributes[this.featureWeight],this.maxWeight||(a=a||d.weight,o=o||d.weight,a=Math.max(a,d.weight),o=Math.min(o,d.weight))):d.weight=1,t=Math.floor(d[0]),r=Math.floor(d[1]),n=d.weight,l.push([t,r,n])}this.maxWeight?this.draw(l,this.maxWeight):(s=a&&o?(a+o)/2:1,this.draw(l,s))},draw:function(e,t){if(!(0<this.maxHeight&&0<this.maxWidth))return!1;var r=this.canvasContext;this.canvasContext.clearRect(0,0,this.maxWidth,this.maxHeight),this.drawCircle(this.useRadius),this.createGradient();for(var n=0;n<e.length;n++){var i=e[n];this.canvasContext.globalAlpha=Math.max(i[2]/t,.05),this.canvasContext.drawImage(this.circle,i[0]-this.useRadius,i[1]-this.useRadius)}var a=r.getImageData(0,0,this.maxWidth,this.maxHeight);this.colorize(a.data,this.grad),r.putImageData(a,0,0)},colorize:function(e,t){for(var r,n=0;n<e.length;n+=4)(r=4*e[n+3])&&(e[n]=t[r],e[n+1]=t[r+1],e[n+2]=t[r+2])},drawCircle:function(e){var t=e/2,r=this.circle=document.createElement("canvas"),n=r.getContext("2d");r.height=2*e,r.width=2*e,n.shadowOffsetX=n.shadowOffsetY=2*e,n.shadowBlur=t,n.shadowColor="#000000",n.beginPath(),n.arc(-e,-e,e/2,0,2*Math.PI,!0),n.closePath(),n.fill()},createGradient:function(){var e=this.colors,t=document.createElement("canvas"),r=t.getContext("2d"),n=r.createLinearGradient(0,0,0,256);t.height=256;for(var i=t.width=1,a=0,o=e.length;a<o;a++)n.addColorStop(i/o,e[a]),i++;r.fillStyle=n,r.fillRect(0,0,1,256),this.grad=r.getImageData(0,0,1,256).data},update:function(){var e=this._map.containerPointToLayerPoint([0,0]);a["default"].DomUtil.setPosition(this.rootCanvas,e);var t=this;t.refresh(),t.currentMousePosition&&(t.currentMousePosition=a["default"].point(t.currentMousePosition.x-t.movingOffset[0],t.currentMousePosition.y-t.movingOffset[1])),t.movingOffset=[0,0],t._zoom=t._map.getZoom(),t._center=t._map.getCenter()},getLocalXY:function(e){if(!this._map)return e;var t=e;a["default"].Util.isArray(e)&&(t=a["default"].point(e[0],e[1])),e instanceof a["default"].Point||(t=e instanceof v.GeometryPoint||e instanceof v.GeoText?a["default"].point(e.x,e.y):a["default"].point(e.lon,e.lat));var r=this._map.latLngToContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(t):a["default"].latLng(t.y,t.x));return[r.x,r.y]},setOpacity:function(e){e!==this.options.opacity&&(e&&(this.options.opacity=e),this._updateOpacity())},removeFeatures:function(e){if(e&&0!==e.length&&this.features&&0!==this.features.length){if(e===this.features)return this.removeAllFeatures();v.CommonUtil.isArray(e)||(e=[e]);for(var t,r,n=[],i=0,a=e.length;i<a;i++)t=e[i],-1!==(r=v.CommonUtil.indexOf(this.features,t))?this.features.splice(r,1):n.push(t);var o=0==n.length;this._map.fire("featuresremoved",{features:n,succeed:o}),this.refresh()}},removeAllFeatures:function(){this.features=[],this.refresh()},_createCanvasContainer:function(){var e=this.getPane(),t="heatMapLayer leaflet-layer leaflet-zoom-"+(this._map.options.zoomAnimation&&a["default"].Browser.any3d?"animated":"hide");this.rootCanvas=a["default"].DomUtil.create("canvas",t,e);var r=a["default"].DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this.rootCanvas.id=this.id,this.rootCanvas.style[r]="50% 50%",this.rootCanvas.style.position="absolute",this.rootCanvas.style.zIndex=200,v.CommonUtil.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,this.opacity),this.canvasContext=this.rootCanvas.getContext("2d")},_updateOpacity:function(){v.CommonUtil.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,this.options.opacity),null!==this._map&&this._map.fire("changelayer",{layer:this,property:"opacity"})},getEvents:function(){var e={zoomend:this._reset,moveend:this._reset,resize:this._resize};return this._map._zoomAnimated&&(e.zoomanim=this._zoomAnim),e},toiClientFeature:function(e){if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e.type))return(new v.GeoJSON).read(e,"FeatureCollection");if(a["default"].Util.isArray(e)){for(var t=[],r=0,n=e.length;r<n;r++)e[r]instanceof l&&t.push(e[r].toFeature());return t}throw new Error("features 类型不符，请检查。")},_zoomAnim:function(e){var t=this._map.getZoomScale(e.zoom),r=this._map._getCenterOffset(e.center)._multiplyBy(-t).subtract(this._map._getMapPanePos());a["default"].DomUtil.setTransform?a["default"].DomUtil.setTransform(this.rootCanvas,r,t):this.rootCanvas.style[a["default"].DomUtil.TRANSFORM]=a["default"].DomUtil.getTranslateString(r)+" scale("+t+")"},_reset:function(){this.update();var e=this._map.getSize(),t=this._map.containerPointToLayerPoint([0,0]);a["default"].DomUtil.setPosition(this.rootCanvas,t),parseFloat(this.rootCanvas.width)!==parseFloat(e.x)&&(this.rootCanvas.width=e.x),parseFloat(this.rootCanvas.height)!==parseFloat(e.y)&&(this.rootCanvas.height=e.y),this.refresh()},_resize:function(){var e=this._map.getSize();this.maxWidth=e.x,this.maxHeight=e.y}}),s=t.heatMapLayer=function(e,t){return new o(e,t)};a["default"].supermap.heatMapLayer=s;var l=t.HeatMapFeature=a["default"].Class.extend({initialize:function(e,t){this.geometry=e,this.attributes=t},toFeature:function(){var e=this.geometry,t=[];if(e instanceof a["default"].LatLng)t=[e.lng,e.lat];else if(e instanceof a["default"].Point)t=[e.x,e.y];else if(e instanceof a["default"].CircleMarker){var r=e.getLatLng();t=[r.lng,r.lat]}else t=e;return 2===t.length&&(e=new v.GeometryPoint(t[0],t[1])),new v.GeometryVector(e,this.attributes)}}),u=t.heatMapFeature=function(e,t){return new l(e,t)};a["default"].supermap.heatMapFeature=u},function(e,t){e.exports=function(){try{return turf}catch(e){return{}}}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.turfLayer=t.TurfLayer=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}}(r(328));var s=t.TurfLayer=a["default"].GeoJSON.extend({turfMap:{"Measurement.along":["line","distance","units"],"Measurement.area":["geojson"],"Measurement.bbox":["geojson"],"Measurement.bboxPolygon":["bbox"],"Measurement.bearing":["start","end","final"],"Measurement.center":["geojson","properties"],"Measurement.centerOfMass":["geojson","properties"],"Measurement.centroid":["geojson","properties"],"Measurement.destination":["origin","distance","bearing","units"],"Measurement.distance":["from","to","units"],"Measurement.envelope":["geojson"],"Measurement.lineDistance":["geojson","units"],"Measurement.midpoint":["point1","point2"],"Measurement.pointOnSurface":["fc"],"Measurement.polygonTangents":["point","polygon"],"Measurement.rhumbBearing":["start","end","final"],"Measurement.rhumbDestination":["origin","distance","bearing","units"],"Measurement.rhumbDistance":["from","to","units"],"Measurement.square":["bbox"],"Measurement.greatCircle":["start","end","properties","npoints","offset"],"CoordinateMutation.flip":["geojson","mutate"],"CoordinateMutation.rewind":["geojson","reverse","mutate"],"CoordinateMutation.round":["num","precision"],"CoordinateMutation.truncate":["geojson","precision","coordinates","mutate"],"Transformation.bboxClip":["feature","bbox"],"Transformation.bezier":["line","resolution","sharpness"],"Transformation.buffer":["geojson","radius","units","steps"],"Transformation.circle":["center","radius","steps","units","properties"],"Transformation.clone":["geojson","cloneAll"],"Transformation.concave":["points","maxEdge","units"],"Transformation.convex":["feature"],"Transformation.difference":["polygon1","polygon2"],"Transformation.dissolve":["featureCollection","propertyName"],"Transformation.intersect":["poly1","poly2"],"Transformation.lineOffset":["geojson","distance","units"],"Transformation.simplify":["feature","tolerance","highQuality"],"Transformation.tesselate":["poly"],"Transformation.transformRotate":["geojson","angle","pivot","mutate"],"Transformation.transformTranslate":["geojson","distance","direction","units","zTranslation","mutate"],"Transformation.transformScale":["geojson","factor","origin","mutate"],"Transformation.union":["A"],"featureConversion.combine":["fc"],"featureConversion.explode":["geojson"],"featureConversion.flatten":["geojson"],"featureConversion.lineStringToPolygon":["lines","properties","autoComplete","orderCoords"],"featureConversion.polygonize":["geojson"],"featureConversion.polygonToLineString":["polygon","properties"],"Misc.kinks":["featureIn"],"Misc.lineArc":["center","radius","bearing1","bearing2","steps","units"],"Misc.lineChunk":["geojson","segmentLength","units","reverse"],"Misc.lineIntersect":["line1","line2"],"Misc.lineOverlap":["line1","line2"],"Misc.lineSegment":["geojson"],"Misc.lineSlice":["startPt","stopPt","line"],"Misc.lineSliceAlong":["line","startDist","stopDist","units"],"Misc.lineSplit":["line","splitter"],"Misc.mask":["polygon","mask"],"Misc.pointOnLine":["lines","pt","units"],"Misc.sector":["center","radius","bearing1","bearing2","steps","units"],"Misc.unkinkPolygon":["geojson"],"Helper.featureCollection":["features"],"Helper.feature":["geometry","properties"],"Helper.geometryCollection":["geometries","properties"],"Helper.lineString":["coordinates","properties"],"Helper.multiLineString":["coordinates","properties"],"Helper.multiPoint":["coordinates","properties"],"Helper.multiPolygon":["coordinates","properties"],"Helper.point":["coordinates","properties"],"Helper.polygon":["coordinates","properties"],"Data.random":["type","count","options"],"Data.sample":["featurecollection","num"],"Interpolation.interpolate":["points","cellSize","gridType","property","units","weight"],"Interpolation.isobands":["pointGrid","breaks","zProperty","options"],"Interpolation.isolines":["pointGrid","breaks","zProperty","propertiesToAllIsolines","propertiesPerIsoline"],"Interpolation.planepoint":["point","triangle"],"Interpolation.tin":["points","z"],"Interpolation.idw":["controlPoints","valueField","weight","cellWidth","units"],"Joins.inside":["point","polygon","ignoreBoundary"],"Joins.within":["points","polygons"],"Joins.tag":["points","polygons","field","outField"],"Grids.hexGrid":["bbox","cellDiameter","units","triangles"],"Grids.pointGrid":["bbox","cellSide","units","centered","bboxIsMask"],"Grids.squareGrid":["bbox","cellSize","units","completelyWithin"],"Grids.triangleGrid":["bbox","cellSize","units"],"Classification.nearest":["targetPoint","points"],"Aggregation.collect":["polygons","points","inProperty","outProperty"],"Aggregation.clustersDbscan":["points","maxDistance","units","minPoints"],"Aggregation.clustersKmeans":["points","numberOfClusters","mutate"],"Meta.coordAll":["geojson"],"Meta.coordEach":["geojson","callback","excludeWrapCoord"],"Meta.coordReduce":["geojson","callback","initialValue","excludeWrapCoord"],"Meta.featureEach":["geojson","callback"],"Meta.featureReduce":["geojson","callback","initialValue"],"Meta.flattenEach":["geojson","callback"],"Meta.flattenReduce":["geojson","callback","initialValue"],"Meta.getCoord":["obj"],"Meta.getCoords":["obj"],"Meta.getGeom":["obj"],"Meta.getGeomType":["obj"],"Meta.geomEach":["geojson","callback"],"Meta.geomReduce":["geojson","callback","initialValue"],"Meta.propEach":["geojson","callback"],"Meta.propReduce":["geojson","callback","initialValue"],"Meta.segmentEach":["geojson","callback"],"Meta.segmentReduce":["geojson","callback","initialValue"],"Meta.getCluster":["geojson","filter"],"Meta.clusterEach":["geojson","property","callback"],"Meta.clusterReduce":["geojson","property","callback","initialValue"],"Assertions.collectionOf":["featureCollection","type","name"],"Assertions.containsNumber":["coordinates"],"Assertions.geojsonType":["value","type","name"],"Assertions.featureOf":["feature","type","name"],"Booleans.booleanClockwise":["line"],"Booleans.booleanContains":["feature1","feature2"],"Booleans.booleanCrosses":["feature1","feature2"],"Booleans.booleanDisjoint":["feature1","feature2"],"Booleans.booleanOverlap":["feature1","feature2"],"Booleans.booleanPointOnLine":["point","linestring","ignoreEndVertices"],"UnitConversion.bearingToAngle":["bearing"],"UnitConversion.convertArea":["area","originalUnit","finalUnit"],"UnitConversion.convertDistance":["distance","originalUnit","finalUnit"],"UnitConversion.degrees2radians":["degrees"],"UnitConversion.distanceToRadians":["distance","units"],"UnitConversion.distanceToDegrees":["distance","units"],"UnitConversion.radiansToDistance":["radians","units"],"UnitConversion.radians2degrees":["radians"]},options:{attribution:"<span>© <a href='http://turfjs.org/' target='_blank'>turfjs</a></span> with <span>© <a href='http://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>"},initialize:function(e){e=e||{},a["default"].Util.setOptions(this,e),a["default"].stamp(this),this._layers={}},process:function(e,t,r,n){var i=o[e.split(".")[1]].apply(this,this.parse(e,t));(n=null==n||n)&&this.addData([i]),r&&r(i)},parse:function(e,t){if("Transformation.union"===e)return t.A;var r=[],n=this.turfMap[e];return n&&n.map(function(e){return r.push(t[e]),t[e]}),r}}),l=t.turfLayer=function(e){return new s(e)};a["default"].supermap.turfLayer=l},function(e,t,r){"use strict";function n(e,t){this.x=e,this.y=t}(e.exports=n).prototype={clone:function(){return new n(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=t*this.x-r*this.y,i=r*this.x+t*this.y;return this.x=n,this.y=i,this},_rotateAround:function(e,t){var r=Math.cos(e),n=Math.sin(e),i=t.x+r*(this.x-t.x)-n*(this.y-t.y),a=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=i,this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(e){return e instanceof n?e:Array.isArray(e)?new n(e[0],e[1]):e}},function(e,t,r){"use strict";var i=r(133);function n(e,t,r){if(3===e){var n=new i(r,r.readVarint()+r.pos);n.length&&(t[n.name]=n)}}e.exports=function(e,t){this.layers=e.readFields(n,{},t)}},function(e,t,r){"use strict";e.exports.VectorTile=r(331),e.exports.VectorTileFeature=r(132),e.exports.VectorTileLayer=r(133)},function(e,t,r){"use strict";t.read=function(e,t,r,n,i){var a,o,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,h=r?i-1:0,f=r?-1:1,p=e[t+h];for(h+=f,a=p&(1<<-c)-1,p>>=-c,c+=s;0<c;a=256*a+e[t+h],h+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;0<c;o=256*o+e[t+h],h+=f,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:(p?-1:1)*Infinity;o+=Math.pow(2,n),a-=u}return(p?-1:1)*o*Math.pow(2,a-n)},t.write=function(e,t,r,n,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,y=n?1:-1,d=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===Infinity?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),2<=(t+=1<=o+h?f/l:f*Math.pow(2,1-h))*l&&(o++,l/=2),c<=o+h?(s=0,o=c):1<=o+h?(s=(t*l-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));8<=i;e[r+p]=255&s,p+=y,s/=256,i-=8);for(o=o<<i|s,u+=i;0<u;e[r+p]=255&o,p+=y,o/=256,u-=8);e[r+p-y]|=128*d}},function(e,t,r){"use strict";e.exports=i;var n=r(333);function i(e){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var a=4294967296,o=1/a;function s(e){return e.type===i.Bytes?e.readVarint()+e.pos:e.pos+1}function l(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function u(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;e<=i;i--)r.buf[i+n]=r.buf[i]}function c(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function h(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function f(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function p(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function y(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function d(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function v(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function m(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function g(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function b(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function S(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function _(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,a=this.pos;this.type=7&n,e(i,t,this),this.pos===a&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=b(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=_(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=b(this.buf,this.pos)+b(this.buf,this.pos+4)*a;return this.pos+=8,e},readSFixed64:function(){var e=b(this.buf,this.pos)+_(this.buf,this.pos+4)*a;return this.pos+=8,e},readFloat:function(){var e=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,n=this.buf;return t=127&(r=n[this.pos++]),r<128?t:(t|=(127&(r=n[this.pos++]))<<7,r<128?t:(t|=(127&(r=n[this.pos++]))<<14,r<128?t:(t|=(127&(r=n[this.pos++]))<<21,r<128?t:function(e,t,r){var n,i,a=r.buf;if(i=a[r.pos++],n=(112&i)>>4,i<128)return l(e,n,t);if(i=a[r.pos++],n|=(127&i)<<3,i<128)return l(e,n,t);if(i=a[r.pos++],n|=(127&i)<<10,i<128)return l(e,n,t);if(i=a[r.pos++],n|=(127&i)<<17,i<128)return l(e,n,t);if(i=a[r.pos++],n|=(127&i)<<24,i<128)return l(e,n,t);if(i=a[r.pos++],n|=(1&i)<<31,i<128)return l(e,n,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=function(e,t,r){var n="",i=t;for(;i<r;){var a,o,s,l=e[i],u=null,c=239<l?4:223<l?3:191<l?2:1;if(r<i+c)break;1===c?l<128&&(u=l):2===c?128==(192&(a=e[i+1]))&&(u=(31&l)<<6|63&a)<=127&&(u=null):3===c?(a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&((u=(15&l)<<12|(63&a)<<6|63&o)<=2047||55296<=u&&u<=57343)&&(u=null)):4===c&&(a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&((u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||1114112<=u)&&(u=null)),null===u?(u=65533,c=1):65535<u&&(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),n+=String.fromCharCode(u),i+=c}return n}(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var r=s(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=s(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===i.Varint)for(;127<this.buf[this.pos++];);else if(t===i.Bytes)this.pos=this.readVarint()+this.pos;else if(t===i.Fixed32)this.pos+=4;else{if(t!==i.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),S(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),S(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),S(this.buf,-1&e,this.pos),S(this.buf,Math.floor(e*o),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),S(this.buf,-1&e,this.pos),S(this.buf,Math.floor(e*o),this.pos+4),this.pos+=8},writeVarint:function(e){268435455<(e=+e||0)||e<0?function(e,t){var r,n;0<=e?(r=e%4294967296|0,n=e/4294967296|0):(n=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:n=n+1|(r=0));if(0x10000000000000000<=e||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),i=r,a=t,a.buf[a.pos++]=127&i|128,i>>>=7,a.buf[a.pos++]=127&i|128,i>>>=7,a.buf[a.pos++]=127&i|128,i>>>=7,a.buf[a.pos++]=127&i|128,i>>>=7,a.buf[a.pos]=127&i,function(e,t){var r=(7&e)<<4;if(t.buf[t.pos++]|=r|((e>>>=3)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;t.buf[t.pos++]=127&e}(n,t);var i,a}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,r){for(var n,i,a=0;a<t.length;a++){if(55295<(n=t.charCodeAt(a))&&n<57344){if(!i){56319<n||a+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):i=n;continue}if(n<56320){e[r++]=239,e[r++]=191,e[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(e[r++]=239,e[r++]=191,e[r++]=189,i=null);n<128?e[r++]=n:(n<2048?e[r++]=n>>6|192:(n<65536?e[r++]=n>>12|224:(e[r++]=n>>18|240,e[r++]=n>>12&63|128),e[r++]=n>>6&63|128),e[r++]=63&n|128)}return r}(this.buf,e,this.pos);var r=this.pos-t;128<=r&&u(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),n.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),n.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var n=this.pos-r;128<=n&&u(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,r){this.writeTag(e,i.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){this.writeMessage(e,c,t)},writePackedSVarint:function(e,t){this.writeMessage(e,h,t)},writePackedBoolean:function(e,t){this.writeMessage(e,y,t)},writePackedFloat:function(e,t){this.writeMessage(e,f,t)},writePackedDouble:function(e,t){this.writeMessage(e,p,t)},writePackedFixed32:function(e,t){this.writeMessage(e,d,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,v,t)},writePackedFixed64:function(e,t){this.writeMessage(e,m,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,g,t)},writeBytesField:function(e,t){this.writeTag(e,i.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,i.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,i.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,i.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tiledVectorLayer=t.TileVectorLayer=undefined;var n,i=r(2),l=(n=i)&&n.__esModule?n:{"default":n};r(4);var a=r(139),o=r(94),u=r(5);var s=t.TileVectorLayer=a.VectorGrid.extend({options:{serverType:null,crs:null,cartoCSS:null,layerNames:null,layersID:null,serverCartoCSSStyle:!0,returnAttributes:!1,expands:null,cacheEnabled:!1,tileTemplate:null,subdomains:"abc",timeout:1e4,attribution:" with <span>© <a href='http://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>"},initialize:function(e,t){(t=t||{}).noWrap=null==t.noWrap||t.noWrap,l["default"].setOptions(this,t),a.VectorGrid.prototype.initialize.call(this,t),l["default"].stamp(this);if(!e||""===e||e.indexOf("http")<0)return e="",this;(this.url=e)&&e.indexOf("/")===e.length-1&&(e=e.substr(0,e.length-1),this.url=e),this.cartoCSSToLeaflet=new o.CartoCSSToLeaflet(this.url),this.initLayersInfo(),!this.options.serverCartoCSSStyle&&this.options&&this.setClientCartoCSS(this.options.cartoCSS)},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._map=e,this._initLayerUrl(),!this.options.tileTemplate&&this.options.serverCartoCSSStyle||this._initGrid()},initLayersInfo:function(){var s=this,e=s.url+"/layers.json";u.FetchRequest.get(e,null,{timeout:s.options.timeout}).then(function(e){return e.json()}).then(function(e){if(s.layersInfoInitialized=!0,s.layersInfo=e,s.layersInfo){for(var t={},r=0,n=s.layersInfo.length;r<n;r++)for(var i=s.layersInfo[r].subLayers.layers,a=0,o=i.length;a<o;a++)i[a].layerIndex=o-a,t[i[a].name]=i[a];s.layersInfo=t,s.options.serverCartoCSSStyle&&s.getVectorStylesFromServer()}})["catch"](function(e){console.error("error",e)})},getLayerStyleInfo:function(e){var t;if(this.layersStyles=this.layersStyles||{},t=this.layersStyles[e])return t;if(!this.layersInfo)return{};var r=this.layersInfo[e];if(!r)return null;switch(t={layerIndex:r.layerIndex,ugcLayerType:r.ugcLayerType},r.ugcLayerType){case"VECTOR":t.layerStyle=r.style?r.style:null;break;case"THEME":var n=r.theme;t.layerStyle=n?n.defaultStyle:null,n&&"LABEL"===n.type&&(t.type=n.type,t.textField=n.labelExpression);break;default:r.style&&(t.layerStyle=r.style)}return this.layersStyles[e]=t},getVectorStylesFromServer:function(){var t=this,e=t.url+"/tileFeature/vectorstyles.json";u.FetchRequest.get(e,null,{timeout:t.options.timeout}).then(function(e){return e.json()}).then(function(e){if(!e||!e.style)return null;e.style&&"cartoCSS"===e.type&&t.setServerCartoCSS(e.style),t.options&&t.setClientCartoCSS(t.options.cartoCSS),t._initGrid()})["catch"](function(e){console.error("error",e)})},setServerCartoCSS:function(e){this.cartoCSSToLeaflet.pretreatedCartoCSS(e,!0)},setClientCartoCSS:function(e){this.cartoCSSToLeaflet.pretreatedCartoCSS(e,!1)},getVectorTileLayerStyle:function(e,t){if(!t)return null;var r=t.layerName,n=this.getLayerStyleInfo(r);if(n.textField){var i=n.textField;if(i&&i.indexOf(".")){var a=i.split(".");i=a&&0<a.length&&a[a.length-1]}t.properties.textField=i}this.vectorTileLayerStyles=this.vectorTileLayerStyles||{};var o=this.vectorTileLayerStyles[r];if(o)return t=this._mergeFeatureTextField(t,o),o;if(!o){var s=this.getScaleFromCoords(e),l=this.cartoCSSToLeaflet.pickShader(r)||[];for(var u in o=[],l)for(var c=l[u],h=0;h<c.length;h++){var f=this.cartoCSSToLeaflet.getValidStyleFromCarto(e.z,s,c[h],t);f&&o.push(f)}}return("TEXT"===(t=this._mergeFeatureTextField(t,o)).type||!o||o.length<1)&&(o=this.cartoCSSToLeaflet.getValidStyleFromLayerInfo(t,n),"TEXT"===t.type&&(o.textName="["+t.properties.textField+"]")),this.vectorTileLayerStyles[r]=o},getScale:function(e){var t=e||this._map.getZoom();return this.scales[t]},getScaleFromCoords:function(e){var t;return this.scales&&this.scales[e.z]?this.scales[e.z]:(this.scales=this.scales||{},t=this.getDefaultScale(e),this.scales[e.z]=t)},getDefaultScale:function(e){var t,r=this._crs;if(r.options&&r.options.resolutions)t=r.options.resolutions[e.z];else{var n=this._tileCoordsToBounds(e),i=r.project(n.getNorthEast()),a=r.project(n.getSouthWest()),o=this.options.tileSize;t=Math.max(Math.abs(i.x-a.x)/o,Math.abs(i.y-a.y)/o)}var s=u.Unit.METER;return r.code&&-1<r.code.indexOf("4326")&&(s=u.Unit.DEGREE),l["default"].Util.resolutionToScale(t,96,s)},_mergeFeatureTextField:function(e,t){if(!this.options.serverCartoCSSStyle||!t||"TEXT"!==e.type)return e;var r=t;l["default"].Util.isArray(t)||(r=[t]);for(var n=0;n<r.length;n++){var i=r[n].textName;i&&e.properties&&(e.properties.textField=i.substring(1,i.length-1))}return e},_getTileUrl:function(e){return this.options.tileTemplate?this._getTileTemplateUrl(e):this._getDefaultTileUrl(e)},_getTileTemplateUrl:function(e){var t=this.options.tileTemplate,r={s:this._getSubdomain(e),x:e.x,y:e.y,z:e.z};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-e.y;this.options.tms&&(r.y=n),r["-y"]=n}return l["default"].Util.template(t,l["default"].extend(r,this.options))},_initGrid:function(){a.VectorGrid.prototype.onAdd.call(this,this._map)},_getSubdomain:l["default"].TileLayer.prototype._getSubdomain,_getDefaultTileUrl:function(e){var t=e.x,r=e.y,n=this._tileUrl+"&x="+t+"&y="+r;return n+="&scale="+this.getScaleFromCoords(e)},_initLayerUrl:function(){var e=this.options;if(this.url){var t=e.format.toString().toLowerCase();this._tileUrl=this.url+"/tileFeature."+t+"?",this._tileUrl+=encodeURI(this._createURLParam(e))}},_createURLParam:function(e){var t=[],r=this._getCredential();if(r&&t.push(r),e.layersID&&t.push("layersID="+e.layersID),e.layerNames){l["default"].Util.isArray(e.layerNames)||(e.layerNames=[e.layerNames]);var n="["+e.layerNames.join(",")+"]";t.push("layerNames="+n)}var i=this._crs;if(i.options&&i.options.origin)t.push("origin="+JSON.stringify({x:i.options.origin[0],y:i.options.origin[1]}));else if(i.projection&&i.projection.bounds){var a=i.projection.bounds,o=l["default"].point(a.min.x,a.max.y);t.push("origin="+JSON.stringify({x:o.x,y:o.y}))}e.expands&&t.push("expands="+e.expands),t.push("returnAttributes="+e.returnAttributes),t.push("cacheEnabled="+e.cacheEnabled);var s=this.options.tileSize;return t.push("width="+s),t.push("height="+s),t.join("&")},_getCredential:function(e){var t,r;switch(this.options.serverType){case u.ServerType.IPORTAL:(t=(r=u.SecurityManager.getToken(e))?new u.Credential(r,"token"):null)||(t=(r=u.SecurityManager.getKey(e))?new u.Credential(r,"key"):null);break;case u.ServerType.ONLINE:t=(r=u.SecurityManager.getKey(e))?new u.Credential(r,"key"):null;break;default:t=(r=u.SecurityManager.getToken(e))?new u.Credential(r,"token"):null}return t?t.getUrlParameters():null}}),c=t.tiledVectorLayer=function(e,t){return new s(e,t)};l["default"].supermap.tiledVectorLayer=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rankSymbolThemeLayer=t.RankSymbolThemeLayer=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(5),s=r(141);var l=t.RankSymbolThemeLayer=s.GraphThemeLayer.extend({initialize:function(e,t,r){s.GraphThemeLayer.prototype.initialize.apply(this,arguments),this.symbolType=t,this.symbolSetting={}},setSymbolType:function(e){this.symbolType=e,this.redraw()},createThematicFeature:function(e){var t;return o.FeatureTheme[this.symbolType]&&this.themeField&&this.symbolSetting&&(t=new o.FeatureTheme[this.symbolType](e,this,[this.themeField],this.symbolSetting)),!!t&&(t.assembleShapes(),t)}}),u=t.rankSymbolThemeLayer=function(e,t,r){return new l(e,t,r)};a["default"].supermap.rankSymbolThemeLayer=u},function(e,t){e.exports=function(){try{return mapv}catch(e){return{}}}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapVLayer=t.MapVLayer=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(140);var s=t.MapVLayer=a["default"].Layer.extend({options:{attributionPrefix:null,attribution:" © 2017 百度 MapV with <span>© <a href='http://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>"},initialize:function(e,t,r){r=r||{},this.dataSet=e||{},this.mapVOptions=t||{},this.render=this.render.bind(this),a["default"].Util.setOptions(this,r),this.options.attributionPrefix&&(this.options.attribution=this.options.attributionPrefix+this.options.attribution),this.canvas=this._createCanvas(),a["default"].stamp(this)},onAdd:function(e){this._map=e;var t=this.getPane(),r=this.container=a["default"].DomUtil.create("div","leaflet-layer leaflet-zoom-animated",t);r.appendChild(this.canvas);var n=e.getSize();r.style.width=n.x+"px",r.style.height=n.y+"px",this.renderer=new o.MapVRenderer(e,this,this.dataSet,this.mapVOptions),this.draw(),this.fire("loaded")},onRemove:function(){a["default"].DomUtil.remove(this.container),this.renderer.unbindEvent()},addData:function(e,t){this.renderer.addData(e,t)},update:function(e){this.renderer.update(e)},getData:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet},removeData:function(e){this.renderer&&this.renderer.removeData(e)},clearData:function(){this.renderer.clearData()},draw:function(){return this._reset()},setZIndex:function(e){this.canvas.style.zIndex=e},render:function(){this.renderer._canvasUpdate()},getCanvas:function(){return this.canvas},getContainer:function(){return this.container},getTopLeft:function(){var e,t=this._map;t&&(e=t.getBounds().getNorthWest());return e},_createCanvas:function(){var e=document.createElement("canvas");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=this.options.zIndex||600;var t="undefined"==typeof window?{}:window,r=this.devicePixelRatio=t.devicePixelRatio;return"2d"==this.mapVOptions.context&&e.getContext(this.mapVOptions.context).scale(r,r),e},_resize:function(){var e=this.canvas;if(e){var t=this._map,r=t.getSize();e.width=r.x,e.height=r.y,e.style.width=r.x+"px",e.style.height=r.y+"px";var n=t.getBounds(),i=t.latLngToLayerPoint(n.getNorthWest());a["default"].DomUtil.setPosition(e,i)}},_reset:function(){this._resize(),this._render()},redraw:function(){this._resize(),this._render()},_render:function(){this.render()}}),l=t.mapVLayer=function(e,t,r){return new s(e,t,r)};a["default"].Map.include({latLngToAccurateContainerPoint:function(e){var t=this.project(a["default"].latLng(e))._subtract(this.getPixelOrigin());return a["default"].point(t).add(this._getMapPanePos())}}),a["default"].supermap.mapVLayer=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicWebGLRenderer=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};var o=a["default"].Util.falseFn;t.GraphicWebGLRenderer=a["default"].Class.extend({initialize:function(e,t){this.layer=e;var r=t||{};a["default"].Util.setOptions(this,r),this._initContainer()},getRenderer:function(){return this},update:function(e){e&&-1<e.length&&(this._data=e),this._renderLayer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0}),this._refreshData();var t=this._getLayerState();t.data=this._data||[],this._renderLayer.setNeedsRedraw(!0),this._renderLayer.setState(t)},drawGraphics:function(e){this._data=e||[],this._renderLayer||this._createInnerRender(),this._draw()},_initContainer:function(){this._container=this._createCanvas(this.options.width,this.options.height),this._layerContainer=this.options.container,this._wrapper=a["default"].DomUtil.create("div","deck-wrapper",this._layerContainer),this._wrapper.appendChild(this._container)},_createCanvas:function(e,t){var r=a["default"].DomUtil.create("canvas","graphicLayer  leaflet-layer leaflet-zoom-hide");return r.oncontextmenu=a["default"].Util.falseFn,r.width=e,r.height=t,r.style.width=e+"px",r.style.height=t+"px",r},_createInnerRender:function(){var n=this,e=this._getLayerState(),t=e.color,r=e.radius,i=e.opacity,a=e.highlightColor,o=e.radiusScale,s=e.radiusMinPixels,l=e.radiusMaxPixels,u=e.strokeWidth,c=e.outline,h={id:"scatter-plot",data:n._data,pickable:Boolean(this.options.onClick)||Boolean(this.options.onHover),autoHighlight:!0,color:t,opacity:i,radius:r,radiusScale:o,highlightColor:a,radiusMinPixels:s,radiusMaxPixels:l,strokeWidth:u,outline:c,getPosition:function(e){if(!e)return[0,0,0];var t=e&&e.getLatLng();return t&&[t.lng,t.lat,0]},getColor:function(e){var t=n._getLayerDefaultStyle(),r=e&&e.options;return r&&r.color||t.color},getRadius:function(e){var t=n._getLayerDefaultStyle(),r=e&&e.getStyle();return r&&r.radius||t.radius},updateTriggers:{getColor:[t],getRadius:[r]}},f=this;this.options.onClick&&(h.onClick=function(){f._container.style.cursor="pointer",f.options.onClick.apply(f,arguments)}),this.options.onHover&&(h.onHover=function(){f._container.style.cursor="pointer",f.options.onHover.apply(f,arguments)}),n._renderLayer=new window.DeckGL.ScatterplotLayer(h)},_getLayerDefaultStyle:function(){var e=this.layer.options;return{color:e.color,opacity:e.opacity,radius:e.radius,radiusScale:e.radiusScale,radiusMinPixels:e.radiusMinPixels,radiusMaxPixels:e.radiusMaxPixels,strokeWidth:e.strokeWidth,outline:e.outline}},_getLayerState:function(){var e=this.layer.getState();return e.zoom=e.zoom-1,e},_draw:function(){var e=this._getLayerState();this._refreshData(),e.data=this._data||[];var t={};for(var r in e)t[r]=e[r];this._renderLayer.setNeedsRedraw(!0),t.layers=[this._renderLayer],t.canvas=this._container,t.onBeforeRender=this._onBeforeRender.bind(this),t.onAfterRender=this._onAfterRender.bind(this),this.deckGL?this.deckGL.setProps(t):this.deckGL=new window.DeckGL.experimental.DeckGLJS(t)},_clearBuffer:function(){var e=this.deckGL.layerManager;return e&&e.context.gl.clear(e.context.gl.COLOR_BUFFER_BIT),this},_refreshData:function(){var e=this._data||[],t=a["default"].Util.isArray(e)?[].concat(e):[e];this._renderLayer.props.data||(this._renderLayer.props.data=[]);for(var r=this._renderLayer.props.data.length=0;r<t.length;r++)this._renderLayer.props.data.push(t[r]);this._data=this._renderLayer.props.data},_handleClick:o,_onBeforeRender:o,_onAfterRender:o,_removePath:function(){return this._wrapper.parentElement.removeChild(this._wrapper),this._container=null,this._wrapper=null,this},_initPath:o,_addPath:o})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicCanvasRenderer=undefined;var n,i=r(2),c=(n=i)&&n.__esModule?n:{"default":n};var a=c["default"].Util.falseFn;t.GraphicCanvasRenderer=c["default"].Class.extend({initialize:function(e,t){this.layer=e,t=t||{},c["default"].Util.setOptions(this,t)},getRenderer:function(){return this.options.renderer},update:function(e){this.layer._update(e)},_handleClick:function(e){var t=this.layer,r=t._map;if(t.options.onClick){this.layer._renderer._ctx.canvas.style.cursor="pointer";for(var n=t._getGraphicsInBounds(),i=0;i<n.length;i++){var a=void 0,o=void 0,s=r.latLngToLayerPoint(n[i].getLatLng()),l=n[i].getStyle();if(l.img){var u=l.anchor;a=c["default"].point(s.x-l.img.width/2,s.y-l.img.height/2),o=c["default"].point(s.x+l.img.width/2,s.y+l.img.height/2),a=h(a,u),o=h(o,u)}else a=c["default"].point(s.x-l.width/2,s.y-l.height/2),o=c["default"].point(s.x+l.width/2,s.y+l.height/2);if(c["default"].bounds(a,o).contains(r.latLngToLayerPoint(e.latlng)))return t.options.onClick.call(t,n[i])}}},_clearBuffer:a});function h(e,t){var r=c["default"].point(e),n=c["default"].point(t);return[r.x-n.x,r.y-n.y]}c["default"].Canvas.include({drawGraphics:function(e){var r=this;r._ctx.clearRect(0,0,r._ctx.canvas.width,r._ctx.canvas.height),e.forEach(function(e){var t=e.getStyle();t.img?r._drawImage.call(r,r._ctx,t,e.getLatLng()):r._drawCanvas.call(r,r._ctx,t,e.getLatLng())})},_drawCanvas:function(e,t,r){var n=t,i=this._map.latLngToLayerPoint(r),a=i.x-n.width/2,o=i.y-n.height/2,s=n.width,l=n.height;e.drawImage(n,a,o,s,l)},_drawImage:function(e,t,r){var n,i;if(t.size){var a=t.size;n=a[0],i=a[1]}else n=t.img.width,i=t.img.height;var o=this._coordinateToPoint(r),s=c["default"].point(o),l=c["default"].point(t.anchor);o=[s.x-l.x,s.y-l.y],e.drawImage(t.img,o[0],o[1],n,i)},_coordinateToPoint:function(e){if(!this._map)return e;var t=e;c["default"].Util.isArray(e)?t=c["default"].latLng(e[0],e[1]):e instanceof c["default"].LatLng&&(t=c["default"].latLng(e.lat,e.lng));var r=this._map.latLngToLayerPoint(t);return[r.x,r.y]}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.imageStyle=t.ImageStyle=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=t.ImageStyle=a["default"].Class.extend({options:{img:"image",origin:[0,0],anchor:null,size:null},initialize:function(e){e=e||{},a["default"].Util.setOptions(this,e),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d")},getStyle:function(){return this.options}}),s=t.imageStyle=function(e){return new o(e)};a["default"].supermap.imageStyle=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.circleStyle=t.CircleStyle=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=t.CircleStyle=a["default"].Class.extend({options:{stroke:!0,color:"#3388ff",weight:1,opacity:1,lineCap:"round",lineJoin:"round",fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",radius:3},initialize:function(e){e=e||{},a["default"].Util.setOptions(this,e),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d"),this._initStyle()},getCanvas:function(){return this._canvas},getStyle:function(){return this._canvas},_initStyle:function(){this._ctx.beginPath(),this._ctx.arc(this._canvas.width/2,this._canvas.height/2,this.options.radius,0,2*Math.PI),this._fillStroke()},_fillStroke:function(){var e=this.options;e.fill&&(this._ctx.globalAlpha=e.fillOpacity,this._ctx.fillStyle=e.fillColor||e.color,this._ctx.fill(e.fillRule||"evenodd")),e.stroke&&0!==e.weight&&(this._ctx.globalAlpha=e.opacity,this._ctx.lineWidth=e.weight,this._ctx.strokeStyle=e.color,this._ctx.lineCap=e.lineCap,this._ctx.lineJoin=e.lineJoin,this._ctx.stroke())}}),s=t.circleStyle=function(e){return new o(e)};a["default"].supermap.circleStyle=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cloverStyle=t.CloverStyle=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=t.CloverStyle=a["default"].Class.extend({options:{radius:10,angele:60,spaceAngle:0,count:3,fill:!1,stroke:!0,color:"#3388ff",weight:1,lineCap:"round",lineJoin:"round",fillColor:"#66ccff",fillOpacity:.2,fillRule:"evenodd",opacity:1},initialize:function(e){e=e||{},a["default"].Util.setOptions(this,e),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d");var t=this.options.stroke.width===undefined?1:this.options.stroke.width;this.options.width=2*(this.options.radius+t)+1,this._initStyle()},getStyle:function(){return this._canvas},drawSector:function(e,t,r,n,i,a){i=i/180*Math.PI,a=a/180*Math.PI,e.moveTo(t,r),e.lineTo(t+n*Math.cos(i),r+n*Math.sin(i)),e.arc(t,r,n,i,a),e.lineTo(t,r)},_initStyle:function(){var e=0,t=this.options,r=t.angle;if(t.spaceAngle=360/t.count-t.angle,!(t.spaceAngle<0)){this._ctx.beginPath(),this.anchor=[t.width/2,t.width/2];for(var n=0;n<t.count;n++)this.drawSector(this._ctx,this.anchor[0],this.anchor[1],t.radius,e,r),r=(e=r+t.spaceAngle)+t.angle;this._fillStroke()}},_fillStroke:function(){var e=this.options;e.fill&&(this._ctx.globalAlpha=e.fillOpacity,this._ctx.fillStyle=e.fillColor||e.color,this._ctx.fill(e.fillRule||"evenodd")),e.stroke&&0!==e.weight&&(this._ctx.globalAlpha=e.opacity,this._ctx.lineWidth=e.weight,this._ctx.strokeStyle=e.color,this._ctx.lineCap=e.lineCap,this._ctx.lineJoin=e.lineJoin,this._ctx.stroke())}}),s=t.cloverStyle=function(e){return new o(e)};a["default"].supermap.cloverStyle=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();t.Detector=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"supportWebGL",value:function(){return i("webgl")}},{key:"supportWebGL2",value:function(){return i("webgl2")}},{key:"supportCanvas",value:function(){return i("2d")}}]),e}();function i(e){var t=document.createElement("canvas");return t&&t.getContext(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.graphicLayer=t.GraphicLayer=undefined;var n,i=r(2),o=(n=i)&&n.__esModule?n:{"default":n};r(4);var a=r(344),s=r(142);var l=["canvas","webgl"],u={color:[0,0,0,255],opacity:.8,radius:10,radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1},c=function(){for(var e=document.createElement("div"),t=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],r=0;r<t.length;r++){var n=t[r];if(e.style[n]!==undefined)return n}return t[0]}(),h=t.GraphicLayer=o["default"].Path.extend({initialize:function(e,t){this.graphics=[].concat(e);var r=t||{};o["default"].Util.setOptions(this,r);var n=this.options.render;a.Detector.supportWebGL2()?this.options.render=n&&n!==l[1]?l[0]:l[1]:this.options.render=l[0]},getEvents:function(){return{click:this._handleClick.bind(this),resize:this._resize.bind(this),moveend:this._moveEnd.bind(this)}},onAdd:function(){this._renderer=this._createRenderer(),this._container=this._renderer._container,o["default"].Path.prototype.onAdd.call(this)},onRemove:function(){this._renderer._removePath(this)},setGraphics:function(e){this.graphics=this.graphics||[],this.graphics.length=0;var t=o["default"].Util.isArray(e)?[].concat(e):[e];this.graphics=[].concat(t),this.update()},addGraphics:function(e){this.graphics=this.graphics||[];var t=o["default"].Util.isArray(e)?[].concat(e):[e];this.graphics=this.graphics.concat(t),this.update()},setStyle:function(e){var t=this.options,r={color:t.color,radius:t.radius,opacity:t.opacity,highlightColor:t.highlightColor,radiusScale:t.radiusScale,radiusMinPixels:t.radiusMinPixels,radiusMaxPixels:t.radiusMaxPixels,strokeWidth:t.strokeWidth,outline:t.outline};this.options=o["default"].Util.extend(this.options,r,e),this.update()},update:function(){this._layerRenderer.update(this.graphics)},clear:function(){this.removeGraphics()},removeGraphics:function(){this.graphics.length=0,this.update()},getRenderer:function(){return this._renderer},getState:function(){var e=this._map,t=e.getSize().x,r=e.getSize().y,n=e.getCenter(),i={longitude:n.lng,latitude:n.lat,zoom:e.getZoom(),maxZoom:e.getMaxZoom(),pitch:0,bearing:0},a={};for(var o in i)a[o]=i[o];a.width=t,a.height=r;var s=this.options;return a.color=s.color,a.radius=s.radius,a.opacity=s.opacity,a.highlightColor=s.highlightColor,a.radiusScale=s.radiusScale,a.radiusMinPixels=s.radiusMinPixels,a.radiusMaxPixels=s.radiusMaxPixels,a.strokeWidth=s.strokeWidth,a.outline=s.outline,a},_resize:function(){var e=this._map.getSize();this._container.width=e.x,this._container.height=e.y,this._container.style.width=e.x+"px",this._container.style.height=e.y+"px";var t=this._map.containerPointToLayerPoint([0,0]);o["default"].DomUtil.setPosition(this._container,t),this._update()},_moveEnd:function(){this._layerRenderer._clearBuffer();var e=this._map.getSize();this._container._width!==e.x&&(this._container.width=e.x),this._container._height!==e.y&&(this._container.height=e.y),this._draw()},_draw:function(){var e=this._map.getPanes().mapPane._leaflet_pos;this._container.style[c]="translate("+-Math.round(e.x)+"px,"+-Math.round(e.y)+"px)",this._update()},_createRenderer:function(){var e=this._map,t=e.getSize().x,r=e.getSize().y,n=void 0;if(this.options.render===l[0])n=new s.GraphicCanvasRenderer(this,{width:t,height:r,renderer:e.getRenderer(this)});else{var i=o["default"].Util.setOptions({},u),a=o["default"].Util.setOptions({options:i},this.options);(a=o["default"].Util.setOptions(this,a)).container=e.getPane("overlayPane"),a.width=t,a.height=r,n=new s.GraphicWebGLRenderer(this,a)}return this._layerRenderer=n,this._layerRenderer.getRenderer()},_update:function(){this._map&&this._updatePath()},_updatePath:function(){var e=this._getGraphicsInBounds();this._renderer.drawGraphics(e)},_project:function(){var i=this;i._getGraphicsInBounds().map(function(e){var t=i._map.latLngToLayerPoint(e.getLatLng()),r=i._clickTolerance(),n=[e._anchor+r,e._anchor+r];return e._pxBounds=new o["default"].Bounds(t.subtract(n),t.add(n)),e}),i._pxBounds=o["default"].bounds(o["default"].point(0,0),o["default"].point(this._container.width,this._container.height))},_getGraphicsInBounds:function(){var t=[],r=this._map.getBounds();return this.graphics.map(function(e){return r.contains(e.getLatLng())&&t.push(e),e}),t},_handleClick:function(e){this._layerRenderer._handleClick(e)},beforeAdd:o["default"].Util.falseFn,_containsPoint:o["default"].Util.falseFn}),f=t.graphicLayer=function(e,t){return new h(e,t)};o["default"].supermap.graphicLayer=f},function(e,t){e.exports=function(){try{return echarts}catch(e){return{}}}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.echartsLayer=t.EchartsLayer=undefined,t.LeafletMapCoordSys=a;var p=n(r(2));r(4);var y=n(r(346));function n(e){return e&&e.__esModule?e:{"default":e}}var i=t.EchartsLayer=p["default"].Layer.extend({includes:[],_echartsContainer:null,_map:null,_ec:null,_echartsOptions:null,options:{attribution:"© 2017 百度 ECharts with <span>© <a href='http://iclient.supermap.io/' target='_blank'>SuperMap iClient</a></span>",loadWhileAnimating:!1},initialize:function(e,t){p["default"].Util.setOptions(this,t),this.setOption(e)},setOption:function(e,t,r){var n=e.baseOption||e;n.LeafletMap=n.LeafletMap||{roam:!0},n.animation=!0===n.animation,this._echartsOptions=e,this._ec&&this._ec.setOption(e,t,r)},getEcharts:function(){return this._ec},_disableEchartsContainer:function(){this._echartsContainer.style.visibility="hidden"},_enableEchartsContainer:function(){this._echartsContainer.style.visibility="visible"},onAdd:function(e){this._map=e,this._initEchartsContainer(),this._ec=y["default"].init(this._echartsContainer),y["default"].leafletMap=e;var f=this;e.on("zoomstart",function(){f._disableEchartsContainer()}),!f.options.loadWhileAnimating&&e.on("movestart",function(){f._disableEchartsContainer()}),y["default"].registerAction({type:"LeafletMapLayout",event:"LeafletMapLayout",update:"updateLayout"},function(e,t){}),y["default"].registerCoordinateSystem("leaflet",a),y["default"].extendComponentModel({type:"LeafletMap",getBMap:function(){return this.__LeafletMap},defaultOption:{roam:!1}}),y["default"].extendComponentView({type:"LeafletMap",render:function(i,e,a){var o=!0,t=y["default"].leafletMap,s=a.getZr().painter.getViewportRoot(),r=t.options.zoomAnimation&&p["default"].Browser.any3d;s.className=" leaflet-layer leaflet-zoom-"+(r?"animated":"hide")+" echarts-layer";var n=p["default"].DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);s.style[n]="50% 50%";var l=i.coordinateSystem,u=a.getZr().painter.getLayers(),c=function(){if(!o){var e,t=f._map.containerPointToLayerPoint([0,0]),r=[t.x||0,t.y||0];if(s.style.left=r[0]+"px",s.style.top=r[1]+"px",!f.options.loadWhileAnimating){for(var n in u)u.hasOwnProperty(n)&&u[n]&&(e=u[n].ctx)&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height);f._enableEchartsContainer()}l.setMapOffset(r),i.__mapOffset=r,a.dispatchAction({type:"LeafletMapLayout"})}};function h(){o||(a.dispatchAction({type:"LeafletMapLayout"}),f._enableEchartsContainer())}this._oldMoveHandler&&t.off(f.options.loadWhileAnimating?"move":"moveend",this._oldMoveHandler),this._oldZoomEndHandler&&t.off("zoomend",this._oldZoomEndHandler),t.on(f.options.loadWhileAnimating?"move":"moveend",c),t.on("zoomend",h),this._oldMoveHandler=c,this._oldZoomEndHandler=h,o=!1}}),this._ec.setOption(this._echartsOptions)},onRemove:function(){this._ec.dispose()},_initEchartsContainer:function(){var e=this._map.getSize(),t=document.createElement("div");t.style.position="absolute",t.style.height=e.y+"px",t.style.width=e.x+"px",t.style.zIndex=10,this._echartsContainer=t,this._map.getPanes().overlayPane.appendChild(this._echartsContainer);var r=this;this._map.on("resize",function(e){var t=e.newSize;r._echartsContainer.style.width=t.x+"px",r._echartsContainer.style.height=t.y+"px",r._ec.resize()})}});function a(e){this._LeafletMap=e,this.dimensions=["lng","lat"],this._mapOffset=[0,0]}a.prototype.dimensions=["lng","lat"],a.prototype.setMapOffset=function(e){this._mapOffset=e},a.prototype.getBMap=function(){return this._LeafletMap},a.prototype.prepareCustoms=function(){var e=y["default"].util,t=this.getViewRect();return{coordSys:{type:"leaflet",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:e.bind(this.dataToPoint,this),size:e.bind(function(a,o){return o=o||[0,0],e.map([0,1],function(e){var t=o[e],r=a[e]/2,n=[],i=[];return n[e]=t-r,i[e]=t+r,n[1-e]=i[1-e]=o[1-e],Math.abs(this.dataToPoint(n)[e]-this.dataToPoint(i)[e])},this)},this)}}},a.prototype.dataToPoint=function(e){null===e[1]&&(e[1]=p["default"].CRS.EPSG3857.projection.MAX_LATITUDE),e[1]=this.fixLat(e[1]);var t=this._LeafletMap.latLngToLayerPoint([e[1],e[0]]),r=this._mapOffset;return[t.x-r[0],t.y-r[1]]},a.prototype.fixLat=function(e){return 90<=e?89.99999999999999:e<=-90?-89.99999999999999:e},a.prototype.pointToData=function(e){var t=this._mapOffset,r=this._LeafletMap.layerPointToLatLng([e[0]+t[0],e[1]+t[1]]);return[r.lng,r.lat]},a.prototype.getViewRect=function(){var e=this._LeafletMap.getSize();return new y["default"].graphic.BoundingRect(0,0,e.x,e.y)},a.prototype.getRoamTransform=function(){return y["default"].matrix.create()},a.dimensions=a.prototype.dimensions,a.create=function(e){var t=void 0;e.eachComponent("LeafletMap",function(e){t||(t=new a(y["default"].leafletMap)),e.coordinateSystem=t,e.coordinateSystem.setMapOffset(e.__mapOffset||[0,0])}),e.eachSeries(function(e){e.get("coordinateSystem")&&"leaflet"!==e.get("coordinateSystem")||(t||(t=new a(y["default"].leafletMap)),e.coordinateSystem=t,e.animation=!0===e.animation)})};var o=t.echartsLayer=function(e,t){return new i(e,t)};p["default"].supermap.echartsLayer=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataFlowLayer=t.DataFlowLayer=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(143);var s=t.DataFlowLayer=a["default"].GeoJSON.extend({options:{geometry:null,prjCoordSys:null,excludeField:null,idField:"id"},initialize:function(e,r){(r=r||{}).style&&!r.pointToLayer&&(r.pointToLayer=function(e,t){return a["default"].circleMarker(t,r.style())}),a["default"].Util.setOptions(this,r),this._layers={},a["default"].stamp(this),this.url=e,this.idCache={}},onAdd:function(e){var t=this;t.dataService=new o.DataFlowService(this.url,{geometry:this.options.geometry,prjCoordSys:this.options.prjCoordSys,excludeField:this.options.excludeField}).initSubscribe(),t.dataService.on("subscribeSocketConnected",function(e){t.fire("subscribeSuccessed",e)}),t.dataService.on("messageSuccessed",function(e){t._onMessageSuccessed(e)}),t.dataService.on("setFilterParamSuccessed",function(e){t.fire("setFilterParamSuccessed",e)})},onRemove:function(e){this.dataService.unSubscribe()},setExcludeField:function(e){return this.dataService.setExcludeField(e),this.options.excludeField=e,this},setGeometry:function(e){return this.dataService.setGeometry(e),this.options.geometry=e,this},_onMessageSuccessed:function(e){var t=e.featureResult,r=e.featureResult.properties[this.options.idField],n=null;r!==undefined&&this.idCache[r]?(n=this.getLayer(this.idCache[r]),this._updateLayerData(n,t)):((n=a["default"].GeoJSON.geometryToLayer(t,this.options)).feature=a["default"].GeoJSON.asFeature(t),this.addLayer(n),r!==undefined&&(this.idCache[r]=this.getLayerId(n))),this.options.onEachFeature&&this.options.onEachFeature(t,n),this.fire("dataUpdated",{layer:this,updateLayer:n,data:e.featureResult})},_updateLayerData:function(e,t){t.properties&&(e.feature.properties=t.properties);var r=[];switch(t.geometry.type){case"Point":r=a["default"].GeoJSON.coordsToLatLng(t.geometry.coordinates),e.setLatLng(r);break;case"LineString":r=a["default"].GeoJSON.coordsToLatLngs(t.geometry.coordinates,0),e.setLatLngs(r);break;case"MultiLineString":case"Polygon":r=a["default"].GeoJSON.coordsToLatLngs(t.geometry.coordinates,1),e.setLatLngs(r);break;case"MultiPolygon":r=a["default"].GeoJSON.coordsToLatLngs(t.geometry.coordinates,2),e.setLatLngs(r)}}}),l=t.dataFlowLayer=function(e,t){return new s(e,t)};a["default"].supermap.dataFlowLayer=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorTilePBF=t.VectorTileJSON=t.VectorTile=t.VectorGrid=t.VectorFeatureType=t.TextSymbolizer=t.PolyBase=t.Symbolizer=t.SVGRenderer=t.RegionSymbolizer=t.PointSymbolizer=t.LineSymbolizer=t.CanvasRenderer=t.ThemeLayer=t.themeFeature=t.ThemeFeature=t.GeoFeatureThemeLayer=t.MapVRenderer=t.graphic=t.Graphic=t.circleStyle=t.CircleStyle=t.cloverStyle=t.CloverStyle=t.imageStyle=t.ImageStyle=t.CompOpMap=t.ServerStyleMap=t.CartoStyleMap=t.DefaultStyle=t.CartoCSSToLeaflet=t.VectorTileFormat=t.heatMapFeature=t.HeatMapFeature=t.heatMapLayer=t.HeatMapLayer=t.uniqueThemeLayer=t.UniqueThemeLayer=t.unicodeMarker=t.UnicodeMarker=t.turfLayer=t.TurfLayer=t.tiledVectorLayer=t.TileVectorLayer=t.rankSymbolThemeLayer=t.RankSymbolThemeLayer=t.rangeThemeLayer=t.RangeThemeLayer=t.mapVLayer=t.MapVLayer=t.labelThemeLayer=t.LabelThemeLayer=t.graphThemeLayer=t.GraphThemeLayer=t.graphicLayer=t.GraphicLayer=t.LeafletMapCoordSys=t.echartsLayer=t.EchartsLayer=t.dataFlowLayer=t.DataFlowLayer=undefined;var n=r(348),i=r(347),a=r(345),o=r(141),s=r(146),l=r(338),u=r(147),c=r(336),h=r(335),f=r(329),p=r(144),y=r(148),d=r(327),v=r(87),m=r(326),g=r(142),b=r(325),S=r(324),_=r(323);t.DataFlowLayer=n.DataFlowLayer,t.dataFlowLayer=n.dataFlowLayer,t.EchartsLayer=i.EchartsLayer,t.echartsLayer=i.echartsLayer,t.LeafletMapCoordSys=i.LeafletMapCoordSys,t.GraphicLayer=a.GraphicLayer,t.graphicLayer=a.graphicLayer,t.GraphThemeLayer=o.GraphThemeLayer,t.graphThemeLayer=o.graphThemeLayer,t.LabelThemeLayer=s.LabelThemeLayer,t.labelThemeLayer=s.labelThemeLayer,t.MapVLayer=l.MapVLayer,t.mapVLayer=l.mapVLayer,t.RangeThemeLayer=u.RangeThemeLayer,t.rangeThemeLayer=u.rangeThemeLayer,t.RankSymbolThemeLayer=c.RankSymbolThemeLayer,t.rankSymbolThemeLayer=c.rankSymbolThemeLayer,t.TileVectorLayer=h.TileVectorLayer,t.tiledVectorLayer=h.tiledVectorLayer,t.TurfLayer=f.TurfLayer,t.turfLayer=f.turfLayer,t.UnicodeMarker=p.UnicodeMarker,t.unicodeMarker=p.unicodeMarker,t.UniqueThemeLayer=y.UniqueThemeLayer,t.uniqueThemeLayer=y.uniqueThemeLayer,t.HeatMapLayer=d.HeatMapLayer,t.heatMapLayer=d.heatMapLayer,t.HeatMapFeature=d.HeatMapFeature,t.heatMapFeature=d.heatMapFeature,t.VectorTileFormat=v.VectorTileFormat,t.CartoCSSToLeaflet=m.CartoCSSToLeaflet,t.DefaultStyle=m.DefaultStyle,t.CartoStyleMap=m.CartoStyleMap,t.ServerStyleMap=m.ServerStyleMap,t.CompOpMap=m.CompOpMap,t.ImageStyle=g.ImageStyle,t.imageStyle=g.imageStyle,t.CloverStyle=g.CloverStyle,t.cloverStyle=g.cloverStyle,t.CircleStyle=g.CircleStyle,t.circleStyle=g.circleStyle,t.Graphic=g.Graphic,t.graphic=g.graphic,t.MapVRenderer=b.MapVRenderer,t.GeoFeatureThemeLayer=S.GeoFeatureThemeLayer,t.ThemeFeature=S.ThemeFeature,t.themeFeature=S.themeFeature,t.ThemeLayer=S.ThemeLayer,t.CanvasRenderer=_.CanvasRenderer,t.LineSymbolizer=_.LineSymbolizer,t.PointSymbolizer=_.PointSymbolizer,t.RegionSymbolizer=_.RegionSymbolizer,t.SVGRenderer=_.SVGRenderer,t.Symbolizer=_.Symbolizer,t.PolyBase=_.PolyBase,t.TextSymbolizer=_.TextSymbolizer,t.VectorFeatureType=_.VectorFeatureType,t.VectorGrid=_.VectorGrid,t.VectorTile=_.VectorTile,t.VectorTileJSON=_.VectorTileJSON,t.VectorTilePBF=_.VectorTilePBF},function(e,t,r){"use strict";function n(e){return Object.prototype.toString.call(e)}function i(e){return"[object String]"===n(e)}e.exports={getObjectType:n,isDate:function(e){return"[object Date]"===n(e)},isString:i,isDateString:function(e){return i(e)&&!isNaN(Date.parse(e))},parseDateFromString:function(e){return Date.parse(e)},isNumber:function(e){return"number"==typeof e}}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=r(350),h="&&",f="||",i="and",o="or",p="=",y="~",d="!"+p,v="!"+y,m=">",g=">=",b="<",S="<=",_="*",P=",",O=".",T="(",w=")",M="where",C={pathway:[],groups:{}},x={},s={},l=console.log;function u(e){var r=A(e,M),n=r[0],i=r[1];C.pathway=A(n,P);for(var a=0,o=C.pathway.length;a<o;a++)C.pathway[a]=A(C.pathway[a],O),C.pathway[a][0]==_&&C.pathway[a].shift(),0===C.pathway[a].length&&C.pathway.splice(a,1);for(var s=-1,l=-1,u=0;u<i.length;){if(i[u]===T)s=u;else if(i[u]===w&&s<(l=u)&&-1!==s){var c="gr_"+(new Date).getTime();C.groups[c]=i.substring(s+1,l),i=i.replace(T+C.groups[c]+w,c),u=-1}u+=1}!function t(r,n){var i=E(n,h),a=E(n,f);if(i!==Number.MAX_VALUE||a!==Number.MAX_VALUE)if(i<a){r.and=r.and||[];var o=A(n,h);r.and.push(o[0]),t(r.and,o[1])}else{r.or=r.or||[];var o=A(n,f);r.or.push(o[0]),t(r.or,o[1])}else C.groups[n]?(n=C.groups[n],t(r,n)):(Array.isArray(r)?r.push(n):r.or=[n],function e(t){for(var r in t)if(t.hasOwnProperty(r))if(Array.isArray(t[r]))e(t[r]);else if("string"==typeof t[r])if(L(t[r],d)){var n=A(t[r],d);t[r]={ne:[n[0],n[1]]}}else if(L(t[r],v)){var n=A(t[r],v);t[r]={nreq:[n[0],n[1]]}}else if(L(t[r],y)){var n=A(t[r],y);t[r]={req:[n[0],n[1]]}}else if(L(t[r],g)){var n=A(t[r],g);t[r]={ge:[n[0],n[1]]}}else if(L(t[r],m)){var n=A(t[r],m);t[r]={gt:[n[0],n[1]]}}else if(L(t[r],S)){var n=A(t[r],S);t[r]={le:[n[0],n[1]]}}else if(L(t[r],b)){var n=A(t[r],b);t[r]={lt:[n[0],n[1]]}}else if(L(t[r],p)){var n=A(t[r],p);t[r]={eq:[n[0],n[1]]}}}(x.or?x.or:x.and))}(x,i)}function E(e,t){var r=e.indexOf(t);return-1===r?Number.MAX_VALUE:r}function A(e,t){return e.split(t).map(function(e){return e.trim()})}function L(e,t){return-1<e.indexOf(t)}function c(e,t){var r=A(t,O),n=e;for(var i in r){if(!n.hasOwnProperty(r[i]))return"";n=n[r[i]]}return n=a.isDate(n)?n.valueOf():a.isDateString(n)?a.parseDateFromString(n):n.toString()}function k(e,t){var r=!1;for(var n in e){if(r=r||(n===i?j:n===o?k:F)(e[n],t),s.trace&&l(C.step,"======((( or",e[n],r),r)return r}return r}function j(e,t){var r=!0;for(var n in e){if(r=r&&(n===i?j:n===o?k:F)(e[n],t),s.trace&&l(C.step,"======((( and",e[n],r),!r)return r}return r}function F(e,t){if(C.step+=1,e.or){var r=k(e.or,t);return s.trace&&l(C.step,"OR",e,r),r}if(e.and){r=j(e.and,t);return s.trace&&l(C.step,"AND",e,r),r}if("object"===(void 0===e?"undefined":n(e)))return e.eq?c(t,e.eq[0])===e.eq[1]:e.ne?c(t,e.ne[0])!==e.ne[1]:e.req?L(c(t,e.req[0]),e.req[1]):e.nreq?!L(c(t,e.nreq[0]),e.nreq[1]):e.gt?c(t,e.gt[0])>e.gt[1]:e.ge?c(t,e.ge[0])>=e.ge[1]:e.lt?c(t,e.lt[0])<e.lt[1]:e.le?c(t,e.le[0])<=e.le[1]:F(e,t)}function I(e,t,r){return C={pathway:[],groups:{},step:0},x={},s=r=r||{trace:!1},u(t),(n=function(e){var t=[];for(var r in e)F(x,e[r])&&t.push(e[r]);return t}(e))&&0<C.pathway.length?n.map(function(e){for(var t={},r=0,n=C.pathway.length;r<n;r++){var i=C.pathway[r].join(O);t[i]=c(e,i)}return t}):n;var n}void 0!==e&&"undefined"!=typeof e.exports&&(e.exports=I),"undefined"!=typeof window&&(window.Query=I)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webMap=t.WebMap=undefined;var E=o(r(2)),A=o(r(351)),l=o(r(166));r(4);var L=r(5),n=r(94),a=r(101),f=r(149),b=r(155),S=r(95),_=r(154),P=r(152),p=r(148),y=r(147),k=r(146),s=r(145),d=r(92),u=r(144),i=r(153);function o(e){return e&&e.__esModule?e:{"default":e}}var c=t.WebMap=E["default"].LayerGroup.extend({options:{map:"map",server:"http://www.supermapol.com",featureLayerPopupEnable:!0,featureLayerPopup:null,credentialValue:null,credentialKey:"key",attribution:"Map Data <span>© <a href='http://www.supermapol.com'>SuperMap Online</a></span> with <span>© <a href='http://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>"},defaultFeatureLayerPopup:function(e){return e.feature.properties.attributes.title+":"+e.feature.properties.attributes.description},initialize:function(e,t){(e||t)&&(this._layers={},E["default"].setOptions(this,t),this.id=e,this.load(),this.cartoCSSToLeaflet=new n.CartoCSSToLeaflet)},load:function(){this.options.server.indexOf("http://")<0&&this.options.server.indexOf("https://")<0&&(this.options.server="http://"+this.options.server);var e=this.options.server+"/web/maps/"+this.id+".json";this.options.credentialValue&&(e+="?"+this.options.credentialKey+"="+this.options.credentialValue);var r=this;L.FetchRequest.get(e).then(function(e){return e.json()}).then(function(e){if(e){var t=e.layers;r.mapInfo=e,r.createLayersByJson(t)}})},addLayerWrapper:function(e,t,r){return t&&this.createMap(r),this.addLayer(e),e.labelLayer&&this.addLayer(e.labelLayer),this},createLayersByJson:function(e){if(E["default"].Util.isArray(e)&&0!==e.length){this.layers=[];for(var t=[],r=0;r<e.length;r++){var n=e[r];n._originIndex=r,"BASE_LAYER"===(n.layerType=n.layerType||"BASE_LAYER")?(n.isBaseLayer=!0,this.createLayer(n.type,n)):t.unshift(n)}for(;0<t.length;){var i=t.pop(),a=i.type,o=i.layerType=i.layerType||"BASE_LAYER";"OVERLAY_LAYER"!==o&&(a=o),this.createLayer(a,i)}this.fire("mapLoaded",{map:this._map})}},createCRS:function(e,t,r,n,i){return e<0?new a.NonEarthCRS({bounds:i,origin:n,resolutions:r}):910112===e||910102===e?E["default"].CRS.BaiduCRS:(910111===e&&(e=3857),910101===e&&(e=4326),E["default"].Proj.CRS("EPSG:"+e,{origin:n,resolutions:r,bounds:i}))},createMap:function(e){var t=e.crs||E["default"].CRS.EPSG3857,r=E["default"].latLngBounds(t.unproject(e.bounds.min),t.unproject(e.bounds.max));this._map=E["default"].map(this.options.map,{center:r.getCenter(),maxZoom:e.maxZoom||22,minZoom:e.minZoom||0,zoom:e.zoom||0,crs:t,renderer:E["default"].canvas()}),t instanceof a.NonEarthCRS?this._map.setZoom(e.zoom?e.zoom+2:2,{maxZoom:e.maxZoom||22}):this._map.fitBounds(r,{maxZoom:e.maxZoom||22})},getResolutionsFromScales:function(e,t,r,n){for(var i=[],a=0;a<e.length;a++)i.push(E["default"].Util.GetResolutionFromScaleDpi(e[a],t,r,n));return i},createLayer:function(e,t){var r,n=t.prjCoordSys,i=n&&n.epsgCode||this.mapInfo.epsgCode,a=this.mapInfo.center||t.center,o=this.mapInfo.level||t.level,s=this.mapInfo.extent||t.bounds,l=t.scales,u=t.isBaseLayer,c=t.opacity,h=E["default"].bounds([s.leftBottom.x,s.leftBottom.y],[s.rightTop.x,s.rightTop.y]),f=t.bounds?E["default"].bounds([t.bounds.leftBottom.x,t.bounds.leftBottom.y],[t.bounds.rightTop.x,t.bounds.rightTop.y]):null,p=f?E["default"].point(f.min.x,f.max.y):E["default"].point(h.min.x,h.max.y),y=l?this.getResolutionsFromScales(l,96,t.units):null,d=this.createCRS(i,n?n.type:"",y,p,f||h),v={bounds:h,center:E["default"].point(a.x,a.y),crs:d,zoom:o};switch(e){case"SUPERMAP_REST":r=(0,P.tiledMapLayer)(t.url,{transparent:!0,opacity:c});break;case"SUPERMAP_REST_VECTOR":break;case"TIANDITU_VEC":case"TIANDITU_IMG":case"TIANDITU_TER":v.crs=4326===i?E["default"].CRS.TianDiTu_WGS84:E["default"].CRS.TianDiTu_Mercator,v.minZoom=1,v.zoom=1+v.zoom,r=this.createTiandituLayer(t);break;case"BAIDU":v.crs=E["default"].CRS.BaiduCRS,v.zoom=3+v.zoom,v.minZoom=3,r=(0,b.baiduTileLayer)();break;case"BING":break;case"WMS":r=this.createWmsLayer(t);break;case"WMTS":v.resolutions=this.getResolutionsFromScales(l,90.71446714322,t.units);var m=t.identifier,g=m.substring(m.indexOf("_")+1);r=(0,S.wmtsLayer)(t.url,{layer:g,style:"default",tilematrixSet:m,format:"image/png"});break;case"CLOUD":v.crs=E["default"].CRS.EPSG3857,v.zoom=3+v.zoom,v.minZoom=3,r=(0,_.cloudTileLayer)(t.url,{opacity:c});break;case"MARKER_LAYER":r=this.createMarkersLayer(t,d);break;case"FEATURE_LAYER":"ANIMATORVECTOR"==t.identifier||(r="THEME"==t.identifier?this.createThemeLayer(t):this.createVectorLayer(t,d));break;default:throw new Error("unSupported Layer Type")}r&&t.isVisible&&this.addLayerWrapper(r,u,v)},createTiandituLayer:function(e){var t=e.type.split("_")[1].toLowerCase(),r="OVERLAY_LAYER"===e.layerType;return new i.TiandituTileLayer({layerType:t,isLabel:r})},createMarkersLayer:function(e,r){var t=this,n=e.markers||[],i=E["default"].geoJSON(E["default"].Util.toGeoJSON(n),{pointToLayer:function(e,t){var r=new E["default"].Marker(t);return r.setStyle=function(e){e&&r.setIcon(e)},r},coordsToLatLng:function(e){var t=r.unproject(E["default"].point(e[0],e[1]));return new E["default"].LatLng(t.lat,t.lng,e[2])},style:function(e){return t.cartoCSSToLeaflet.getStyleFromiPortalMarker(e.properties.icon)}});return this.options.featureLayerPopupEnable&&i.bindPopup(this.options.featureLayerPopup||this.defaultFeatureLayerPopup),i},createWmsLayer:function(e){var t=e.url,r=e.opacity,n=e.subLayers;return n&&"undefined"!==n&&"null"!==n||(n="0"),E["default"].tileLayer.wms(t,{layers:n,format:"image/png",transparent:!0,noWrap:!0,opacity:r})},createVectorLayer:function(e,r){var n=this,i=e.style,a=e.opacity,o=this,s=function(e){var t=r.unproject(E["default"].point(e[0],e[1]));return new E["default"].LatLng(t.lat,t.lng,e[2])};if(!e.url){var t=E["default"].geoJSON(E["default"].Util.toGeoJSON(e.features),{pointToLayer:function(e,t){var r=new E["default"].Marker(t);return r.setStyle=function(e){e&&r.setIcon(e)},r},coordsToLatLng:s,style:function(e){var t=o.cartoCSSToLeaflet.getStyleFromiPortalStyle(i||{},e.geometry.type,e.properties.style);return t.dashArray&&0==t.dashArray.length&&(t.dashArray=null),t},opacity:a});return this.options.featureLayerPopupEnable&&t.bindPopup(this.options.featureLayerPopup||this.defaultFeatureLayerPopup),t}for(var l=e.url,u=e.name,c=e.features,h=0;h<c.length;h++){var f=c[h];f.visible&&this.getFeaturesBySQL(l,u,f.name,"",L.DataFormat.GEOJSON,function(e){var t=E["default"].geoJSON(e.result,{pointToLayer:function(e,t){var r=new E["default"].Marker(t);return r.setStyle=function(e){e&&r.setIcon(e)},r},coordsToLatLng:s,style:function(e){return this.cartoCSSToLeaflet.getStyleFromiPortalStyle(i||{},e.geometry.type,e.properties.style)},opacity:a});n.options.featureLayerPopupEnable&&t.bindPopup(o.options.featureLayerPopup||o.defaultFeatureLayerPopup),n.addLayer(t)})}},getFeaturesBySQL:function(e,t,r,n,i,a){n=n||"SMID > 0";var o=new L.GetFeaturesBySQLParameters({queryParameter:{name:r+"@"+t,attributeFilter:n},datasetNames:[t+":"+r],fromIndex:0,toIndex:1e5});(0,s.featureService)(e).getFeaturesBySQL(o,a,i)},createThemeLayer:function(e){var t,r=this,n=e.themeSettings&&JSON.parse(e.themeSettings),i=n.type;if(e.themeSettings=n,(t="HEAT"===i?this.createHeatLayer(e,n):"UNIQUE"===i?this.createUniqueLayer(e,n):"RANGE"===i?this.createRangeLayer(e,n):this.createBaseThemeLayer(e,n))&&(this.addFeature2ThemeLayer(e,t),t.on("add",function(e){r.registerThemeEvent(e.target)})),n&&n.labelField){var a=this.createLabelLayer(e,n);a.on("add",function(e){r.registerThemeEvent(e.target)}),t.labelLayer=a}return t},createBaseThemeLayer:function(e,t){var r=e.style,n=e.opacity,i=t.vectorType,a=r.pointStyle;a.fill="LINE"!==i;var o={};o.radius=a.pointRadius,o.color=a.strokeColor,o.opacity=a.strokeOpacity,o.lineCap=a.strokeLineCap,o.weight=a.strokeWidth,o.fillColor=a.fillColor,o.fillOpacity=a.fillOpacity;var s=function(e,t){return E["default"].circleMarker(t,o)};return a.unicode&&(s=function(e,t){return new u.UnicodeMarker(t,a)}),E["default"].geoJSON({type:"GeometryCollection",geometries:[]},{pointToLayer:s,opacity:n})},createUniqueLayer:function(e,t){for(var r=e.title,n=t.field,i=[],a=t.settings,o=e.isVisible,s=e.opacity,l=t.vectorType,u=0;u<a.length;u++){var c={};c.value=a[u].value,c.style=a[u].style,i.push(c)}var h=new p.UniqueThemeLayer(r,{opacity:s,visibility:o});this.registerThemeEvent(h),h.style=e.style.pointStyle,"LINE"===l&&(h.style.fill=!1),h.style.stroke=!0,h.themeField=n,h.styleGroups=i;var f=this;return h.on("click",function(e){if(e.target&&e.target.refDataID){var t=h.getFeatureById(e.target.refDataID);f.events.triggerEvent("uniquefeatureclicked",t,h)}}),h},createRangeLayer:function(e,t){var r=e.title,n=t.field,i=[],a=t.settings,o=e.isVisible,s=e.opacity,l=t.vectorType,u=e.style.pointStyle;u.fill="LINE"!==l;for(var c=0;c<a.length;c++){var h={};h.start=a[c].start,h.end=a[c].end,h.style=a[c].style,i.push(h)}var f=new y.RangeThemeLayer(r,{visibility:o,opacity:s});return this.registerThemeEvent(f),f.style=e.style.pointStyle,f.style.stroke=!0,f.themeField=n,f.styleGroups=i,f},createLabelLayer:function(e,t){var r,n=e.title,i=t.labelField,a=t.settings,o=e.isVisible;r=!a||0<a.length?{fillColor:"#ffffff"}:a[0].style;var s=E["default"].Util.extend(new L.ThemeStyle,r);s.fontWeight="bold",s.fontSize="14px",s.labelRect=!0,s.strokeColor=s.fillColor,s.fontColor=t.labelColor,t.labelFont&&(s.fontFamily=t.labelFont);var l=new k.LabelThemeLayer(n,{visibility:o,opacity:.7});return this.registerThemeEvent(l),l.style=s,l.themeField=i,l.styleGroups=[],l},createHeatLayer:function(e,t){for(var r=t.colors||["blue","cyan","lime","yellow","red"],n={},i=void 0,a=0,o=r.length,s=1;a<o;a++)n[s/o]=r[a],s++;var l=t.settings[0].radius;return"千米"!==t.heatUnit&&"km"!==t.heatUnit||(l=1e3*t.heatRadius),t.settings[0]&&t.settings[0].featureWeight&&(i=t.settings[0].featureWeight),E["default"].heatLayer([],{radius:l/2,minOpacity:e.opacity,gradient:n,blur:l/2,featureWeight:i})},addFeature2ThemeLayer:function(l,u){var c=this;if("FEATURE_LAYER"===l.layerType&&"THEME"===l.identifier){var h=this,e=!!l.datasourceName,t=l.cartoCSS;if(t)var f=this.getCartoCSS2Obj(t).needTransform,r=this.getCartoCSS2Obj(t).isAddFile;var n,i,a,o=l.url,s=l.credential,p=l.themeSettings,y=p.filter;if(r){var d=JSON.parse(l.datasourceName),v=this.getSQLFromFilter(y);if(o)this.getFeatureFromFileAdded(l,function(e){var t,r=[];if("EXCEL"===e.type||"CSV"===e.type)for(var n=0,i=(t=h.parseFeatureFromEXCEL.apply(h,[e.content.rows,e.content.colTitles,!1,d])).length;n<i;n++)0<(0,A["default"])({attr:t[n].attributes},v).length&&r.push(t[n]);else for(var a=0,o=(t=h.parseFeatureFromJson(e.content)).length;a<o;a++)0<(0,A["default"])({attr:t[a].attributes},v).length&&r.push(t[a]);var s=l.prjCoordSys&&l.prjCoordSys.epsgCode;f?h.changeFeatureLayerEpsgCode(s,"4326",u,r,function(e){x(e)}):x(r)},function(){});else{for(var m=[],g=l.features,b=0,S=g.length;b<S;b++){var _=g[b];if(0<(0,A["default"])({attr:_.attributes},v).length){var P=_.geometry.points[0].x,O=_.geometry.points[0].y,T=new L.GeometryPoint(P,O),w=new L.GeometryVector(T,_.attributes,_.style);m.push(w)}}x(m)}}else if(e){var M=l.datasourceName;a=(i=(n=l.subLayers&&JSON.parse(l.subLayers)).length&&0<n.length?n[0]:n)&&i.name,this.getFeaturesBySQL(l.url,M,a,p.filter,L.DataFormat.ISERVER,function(e){var t,r,n=e.result,i=[];if(n&&n.features){for(var a=0,o=(t=n.features).length;a<o;a++)r=new L.ServerFeature.fromJson(t[a]).toFeature(),i.push(r);var s=l.prjCoordSys&&l.prjCoordSys.epsgCode;f?c.changeFeatureLayerEpsgCode(s,"4326",u,i,function(e){x(e)}):x(t)}})}else{a=(i=(n=l.subLayers&&JSON.parse(l.subLayers)).length&&0<n.length?n[0]:n)&&i.name;var C=l.prjCoordSys&&l.prjCoordSys.epsgCode;this.getFeaturesBySQL(o,s,a,y,L.DataFormat.ISERVER,function(e){f?h.changeFeatureLayerEpsgCode(C,"4326",u,e,function(e){x(e)}):x(e)})}}function x(e){if(u&&u.labelLayer instanceof k.LabelThemeLayer&&h.addFeature2LabelLayer(u.labelLayer,e,l),E["default"].HeatLayer&&u instanceof E["default"].HeatLayer){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r].geometry;t[r]=E["default"].latLng(i.y,i.x),u.options.featureWeight&&(t[r]=[t[r].lat,t[r].lng,parseFloat(e[r].attributes[u.options.featureWeight])])}u.setLatLngs(t)}else u instanceof E["default"].GeoJSON?u.addData(JSON.parse((new L.GeoJSON).write(e))):u.addFeatures(e)}},addFeature2LabelLayer:function(e,t,r){if(t){for(var n,i,a=r.themeSettings,o=(a="string"==typeof a?JSON.parse(r.themeSettings):r.themeSettings).labelField,s=e.style,l=[],u=r.styleString&&JSON.parse(r.styleString),c=0;c<t.length;c++){i=this.getLabelLngLat(a.vectorType,t[c]),this.setLabelOffset(a.vectorType,u,t[c],s);var h=t[c].attributes;n=new d.ThemeFeature([i.lat,i.lng,h[o]],h),l.push(n)}e.style=s,e.addFeatures(l)}},setLabelOffset:function(e,t,r,n){if("POINT"===e){var i=t.pointStyle.pointRadius||0,a=t.pointStyle.strokeWidth||0,o=parseInt(t.pointStyle.fontSize)||0;n.labelXOffset=0,n.labelYOffset=t.pointStyle.unicode?20+o:25+(i+a)}},getLabelLngLat:function(e,t){var r={};if("POINT"===e){var n=t.geometry;r.lng=n.x,r.lat=n.y}else if("LINE"===e){var i,a,o=t.geometry.components;if(o[0].x)i=o.length,a=parseInt(i/2),r.lng=o[a].x,r.lat=o[a].y;else{var s=o[0].components;i=s.length,a=parseInt(i/2),r.lng=s[a].x,r.lat=s[a].y}}else{var l=t.geometry.getCentroid();r.lng=l.x,r.lat=l.y}return r},changeFeatureLayerEpsgCode:function(e,t,r,n,a){var o,i,s=this,l=[];if(e&&t){if(n&&0<n.length){for(o=0,i=n.length;o<i;o++){var u=n[o].geometry.getVertices();l=l.concat(u)}e="EPSG:"+e,t="EPSG:"+t,s.coordsTransform(e,t,l,(c=n,function(e){var t=e.length;for(o=0;o<t;o++){var r=l[o],n=e[o];r.x=n.x,r.y=n.y,r.calculateBounds()}for(o=0,t=c.length;o<t;o++){var i=c[o].geometry;i.components&&s.calculateComponents(i.components),i.calculateBounds()}a&&a.call(s,c)}))}var c;return!0}},calculateComponents:function(e){if(e)if(e.components)this.calculateComponents(e.components);else for(var t=0,r=e.length;t<r;t++){var n=e[t];n.components&&this.calculateComponents(n.components),n.calculateBounds()}},coordsTransform:function(e,t,r,n){var i,a=this.SERVER_TYPE_MAP[e],o=this.SERVER_TYPE_MAP[t];if(e!==t&&a&&o){var s=this.SERVER_TYPE_MAP["EPSG:3857"],l=this.SERVER_TYPE_MAP["EPSG:4326"];if(a!==s&&a!==l||o!==s&&o!==l){var u=a+"_"+o;this.postTransform(u,r,n)}else this.projTransform(e,t,r,n)}else{if(r&&r.length!==undefined){i=[];for(var c=0,h=r.length;c<h;c++){var f={x:r[c].x,y:r[c].y};i.push(f)}}else i={x:r.x,y:r.y};n&&n.call(this,i)}},projTransform:function(e,t,r,n){var i;if(l["default"]){if(r&&r.length!==undefined){i=[];for(var a=0,o=r.length;a<o;a++){var s=(0,l["default"])(e,t,[r[a].x,r[a].y]);i.push({x:s[0],y:s[1]})}}else i={x:(i=(0,l["default"])(e,t,[r.x,r.y]))[0],y:i[1]};n&&(this.fire("coordconvertsuccess",{newCoor:i}),n.call(this,i))}},postTransform:function(e,r,t){var n=this,i=[];if(!e)return t.call(n,null);if(r&&r.length!==undefined)for(var a=0,o=r.length;a<o;a++)i.push({x:r[a].x,y:r[a].y});else i=[{x:r.x,y:r.y}];if(0===i.length)return t.call(n,null);var s,l={convertType:e,points:i},u=this.url+"coordconvert.json",c={url:u,isInTheSameDomain:!0,data:l=JSON.stringify(l),method:"POST",success:(s=t,function(e){if(s){var t=JSON.parse(e.responseText);r||r.length===undefined||(t=t[0]),n.fire("coordconvertsuccess",{newCoors:t}),s.call(n,t)}}),failure:function(e){n.actived&&n.fire("coordconvertfailed",{err:e})},scope:this};!L.CommonUtil.isInTheSameDomain(u)&&this.proxy&&(c.proxy=this.proxy),L.CommonUtil.committer(c)},getSQLFromFilter:function(e){return e?" *  where ("+(e=e.replace(/=/g,"==").replace(/and|AND/g,"&&").replace(/or|OR/g,"||").replace(/>==/g,">=").replace(/<==/g,"<="))+")":" * where (1==1||1>=0)"},getAttributesObjFromTable:function(e,t){if(0!==e.length&&0!==t.length){for(var r=[],n=0;n<e.length;n++){for(var i={},a=0;a<t.length;a++)i[t[a]]=e[n][a];r.push(i)}return r}},parseFeatureFromEXCEL:function(e,t,r,n){for(var i=this.getAttributesObjFromTable(e,t),a=[],o=0,s=i.length;o<s;o++){var l=i[o][n.lon],u=i[o][n.lat];if(l&&u){l=parseFloat(l),u=parseFloat(u);var c,h=new L.GeometryPoint(l,u);c=r?new f.Graphic(h,i[o],null):new L.GeometryVector(h,i[o],null),a.push(c)}}return a},parseFeatureFromJson:function(e){var t=new L.GeoJSON,r=t.read(e);if(null==r){var n=JSON.parse(e.replace(/'/,'"'));(n.isAnalyseResult||"MapEditor"===n.type||"DataInsights"===n.type||"ISERVER"===n.type)&&(n=n.data.recordsets[0].features),r=(t=new L.GeoJSON).read(n)}for(var i=0,a=r.length;i<a;i++)r[i].attributes=r[i].attributes.properties||r[i].attributes;return r},getFeatureFromFileAdded:function(e,t,r,n){var i=n?e.url+"?currentPage=1&&pageSize=9999999":e.url;L.FetchRequest.get(i).then(function(e){return e.json()}).then(function(e){t&&t(e)})["catch"](function(e){return r&&r(e)})},getCartoCSS2Obj:function(e){var t,r=!1;return-1<e.indexOf("}")?(r=(e=JSON.parse(e)).needTransform,t=e.isAddFile):t="needTransform"===e?!(r=!0):"true"===e,{isAddFile:t,needTransform:r}},registerThemeEvent:function(r){var n=this;r.on("click",function(e){if(r.map){n.selectedFeature&&(n.fire("featureUnSelected",{feature:n.selectedFeature}),n.selectedFeature=null);var t=void 0;e.target&&e.target.refDataID&&(t=r.getFeatureById(e.target.refDataID)),t&&(n.selectedFeature=t,n.fire("featureSelected",{feature:t}))}}),r.on("mousemove",function(e){if(r.map&&e.target&&e.target.refDataID){var t=void 0;e.target&&e.target.refDataID&&(t=r.getFeatureById(e.target.refDataID)),t&&n.fire("featureMousemove",{feature:t})}})},SERVER_TYPE_MAP:{"EPSG:4326":"WGS84","EPSG:3857":"MERCATOR","EPSG:900913":"MERCATOR","EPSG:102113":"MERCATOR","EPSG:910101":"GCJ02","EPSG:910111":"GCJ02MERCATOR","EPSG:910102":"BD","EPSG:910112":"BDMERCATOR"}}),h=t.webMap=function(e,t){return new c(e,t)};E["default"].supermap.webmap=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.imageMapLayer=t.ImageMapLayer=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(5);var s=t.ImageMapLayer=i.Layer.extend({options:{layersID:null,redirect:!1,transparent:null,cacheEnabled:null,clipRegionEnabled:!0,prjCoordSys:null,overlapDisplayed:!1,overlapDisplayedOptions:null,opacity:1,alt:"",pane:"tilePane",interactive:!1,crossOrigin:!1,errorOverlayUrl:!1,zIndex:1,className:"",serverType:o.ServerType.ISERVER,attribution:"Map Data <span>© <a href='http://support.supermap.com.cn/product/iServer.aspx' target='_blank'>SuperMap iServer</a></span> with <span>© <a href='http://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>",updateInterval:150,format:"png"},initialize:function(e,t){this._url=e,i.Util.setOptions(this,t)},onAdd:function(e){this.update=i.Util.throttle(this.update,this.options.updateInterval,this),e.on("moveend",this.update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?e.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this.update()},onRemove:function(e){this._currentImage&&this._map.removeLayer(this._currentImage),this._map.off("moveend",this.update,this)},bringToFront:function(){return this.options.position="front",this._currentImage&&this._currentImage.bringToFront(),this},bringToBack:function(){return this.options.position="back",this._currentImage&&this._currentImage.bringToBack(),this},getOpacity:function(){return this.options.opacity},setOpacity:function(e){return this.options.opacity=e,this._currentImage&&this._currentImage.setOpacity(e),this},getImageUrl:function(e){var t=i.Util.getParamString(e)+this._initLayerUrl();return t=this._url+"/image."+this.options.format+t,t=this._appendCredential(t),this.options.tileProxy&&(t=this.options.tileProxy+encodeURIComponent(t)),t},_getImageParams:function(){var e=this._calculateImageSize();return{viewBounds:this._compriseBounds(this._calculateBounds()),width:e.x,height:e.y}},_initLayerUrl:function(){var e="&";return e+=encodeURI(this._initAllRequestParams().join("&"))},_initAllRequestParams:function(){var e=this.options||{},t=[],r=!0===e.redirect&&e.redirect;t.push("redirect="+r);var n=!0===e.transparent&&e.transparent;t.push("transparent="+n);var i=!1!==e.cacheEnabled||e.cacheEnabled;return t.push("cacheEnabled="+i),e.prjCoordSys&&t.push("prjCoordSys="+JSON.stringify(e.prjCoordSys)),e.layersID&&t.push("layersID="+e.layersID),e.clipRegionEnabled&&e.clipRegion instanceof a["default"].Path&&(e.clipRegion=a["default"].Util.toSuperMapGeometry(e.clipRegion.toGeoJSON()),e.clipRegion=o.CommonUtil.toJSON(o.ServerGeometry.fromGeometry(e.clipRegion)),t.push("clipRegionEnabled="+e.clipRegionEnabled),t.push("clipRegion="+JSON.stringify(e.clipRegion))),!1===e.overlapDisplayed?(t.push("overlapDisplayed=false"),e.overlapDisplayedOptions&&t.push("overlapDisplayedOptions="+this.overlapDisplayedOptions.toString())):t.push("overlapDisplayed=true"),t},_requestImage:function(e,t){var r=this.getImageUrl(e);this._loadImage(r,t)},_loadImage:function(t,a){if(this._map){var o=new i.ImageOverlay(t,a,{opacity:0,alt:this.options.alt,zIndex:this.options.zIndex,className:this.options.className,errorOverlayUrl:this.options.error,crossOrigin:this.options.crossOrigin,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),r=function e(t){o.off("error",e,this);var r=this._map;if(r){var n=t.target,i=this._currentImage;n._bounds&&n._bounds.equals(a)&&n._bounds.equals(r.getBounds())?(this._currentImage=n,"front"===this.options.position&&this.bringToFront(),"back"===this.options.position&&this.bringToBack(),this._currentImage._map&&this._currentImage.setOpacity(this.options.opacity),i&&r.removeLayer(i),i&&i._map&&i._map.removeLayer(i)):r.removeLayer(n),this.fire("load",{bounds:a})}};o.once("load",r,this),o.once("error",function(){this._map.removeLayer(o),this.fire("error"),o.off("load",r,this)},this),this.fire("loading",{bounds:a})}},update:function(){if(this._map){var e=this._map.getZoom(),t=this._map.getBounds();if(e>this._map.options.maxZoom||e<this._map.options.zoom)this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);else{var r=this._getImageParams();r?this._requestImage(r,t):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_calculateBounds:function(){var e=this._map.getPixelBounds(),t=this._map.unproject(e.getBottomLeft()),r=this._map.unproject(e.getTopRight()),n=this._map.options.crs.project(r),i=this._map.options.crs.project(t);return a["default"].bounds(n,i)},_compriseBounds:function(e){var t={leftBottom:{x:e.getBottomLeft().x,y:e.getTopRight().y},rightTop:{x:e.getTopRight().x,y:e.getBottomLeft().y}};return JSON.stringify(t)},_calculateImageSize:function(){var e=this._map,t=e.getPixelBounds(),r=e.getSize(),n=e.unproject(t.getBottomLeft()),i=e.unproject(t.getTopRight()),a=e.latLngToLayerPoint(i).y,o=e.latLngToLayerPoint(n).y;return(0<a||o<r.y)&&(r.y=o-a),r},_appendCredential:function(e){var t,r,n=e;switch(this.options.serverType){case o.ServerType.IPORTAL:(t=(r=o.SecurityManager.getToken(this._url))?new o.Credential(r,"token"):null)||(t=(r=o.SecurityManager.getKey(this._url))?new o.Credential(r,"key"):null);break;case o.ServerType.ONLINE:t=(r=o.SecurityManager.getKey(this._url))?new o.Credential(r,"key"):null;break;default:t=(r=o.SecurityManager.getToken(this._url))?new o.Credential(r,"token"):null}return t&&(n+="&"+t.getUrlParameters()),n}}),l=t.imageMapLayer=function(e,t){return new s(e,t)};a["default"].supermap.imageMapLayer=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webMap=t.WebMap=t.wmtsLayer=t.WMTSLayer=t.tiledMapLayer=t.TiledMapLayer=t.tiandituTileLayer=t.TiandituTileLayer=t.imageMapLayer=t.ImageMapLayer=t.cloudTileLayer=t.CloudTileLayer=t.baiduTileLayer=t.BaiduTileLayer=undefined;var n=r(155),i=r(154),a=r(353),o=r(153),s=r(152),l=r(95),u=r(352);t.BaiduTileLayer=n.BaiduTileLayer,t.baiduTileLayer=n.baiduTileLayer,t.CloudTileLayer=i.CloudTileLayer,t.cloudTileLayer=i.cloudTileLayer,t.ImageMapLayer=a.ImageMapLayer,t.imageMapLayer=a.imageMapLayer,t.TiandituTileLayer=o.TiandituTileLayer,t.tiandituTileLayer=o.tiandituTileLayer,t.TiledMapLayer=s.TiledMapLayer,t.tiledMapLayer=s.tiledMapLayer,t.WMTSLayer=l.WMTSLayer,t.wmtsLayer=l.wmtsLayer,t.WebMap=u.WebMap,t.webMap=u.webMap},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NormalizeScale=t.GetResolutionFromScaleDpi=t.scaleToResolution=t.resolutionToScale=t.getMeterPerMapUnit=t.toSuperMapGeometry=t.toGeoJSON=t.crs=t.CRS=t.nonEarthCRS=t.NonEarthCRS=t.nonProjection=t.NonProjection=t.TianDiTu_MercatorCRS=t.TianDiTu_WGS84CRS=t.BaiduCRS=t.CommontypesConversion=undefined;var n=r(28),i=r(157),a=r(101),o=r(167),s=r(32);t.CommontypesConversion=n.CommontypesConversion,t.BaiduCRS=i.BaiduCRS,t.TianDiTu_WGS84CRS=i.TianDiTu_WGS84CRS,t.TianDiTu_MercatorCRS=i.TianDiTu_MercatorCRS,t.NonProjection=a.NonProjection,t.nonProjection=a.nonProjection,t.NonEarthCRS=a.NonEarthCRS,t.nonEarthCRS=a.nonEarthCRS,t.CRS=o.CRS,t.crs=o.crs,t.toGeoJSON=s.toGeoJSON,t.toSuperMapGeometry=s.toSuperMapGeometry,t.getMeterPerMapUnit=s.getMeterPerMapUnit,t.resolutionToScale=s.resolutionToScale,t.scaleToResolution=s.scaleToResolution,t.GetResolutionFromScaleDpi=s.GetResolutionFromScaleDpi,t.NormalizeScale=s.NormalizeScale},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logo=t.Logo=undefined;var n,i=r(2),s=(n=i)&&n.__esModule?n:{"default":n};r(4);var l=r(302);var a=t.Logo=s["default"].Control.extend({options:{position:"bottomright",imageUrl:null,link:null,width:null,height:null,alt:"SuperMap iClient"},onAdd:function(){var e=s["default"].DomUtil.create("div","iclient-leaflet-logo");e.style.marginTop=0,e.style.marginBottom=0,e.style.marginLeft=0,e.style.marginRight=0;var t=l.LogoBase64;this.options.imageUrl&&(t=this.options.imageUrl);var r=this.options.alt,n="94px",i="29px",a="width:"+n+";height:"+i+";";this.options.imageUrl&&(a="width:"+(n=this.options.width)+";height:"+(i=this.options.height)+";",n&&i||(a=""));var o=this.options.link||"http://iclient.supermap.io";return e.innerHTML="<a href='"+o+"' target='_blank' style='border: none;display: block;'><img src="+t+" alt='"+r+"' style='border: none;"+a+"margin-right:5px;margin-bottom:2px;white-space: nowrap'></a>",e}});s["default"].Map.mergeOptions({logoControl:!0}),s["default"].Map.addInitHook(function(){!this._logoAdded&&this.options.logoControl&&(!0===this.options.logoControl?this.logoControl=new a:this.options.logoControl instanceof s["default"].Control&&(this.logoControl=this.options.logoControl),this.logoControl&&(this.addControl(this.logoControl),this._logoAdded=!0))});var o=t.logo=function(e){return new a(e)};s["default"].supermap.control.logo=o},function(e,t,r){"use strict";var x=r(7),E=Math.PI/2,A=1e-10,L=r(49),k=r(53),j=r(52),F=r(51),I=r(50),R=r(98),O=r(39),T=r(97);t.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},t.forward=function(e){var t,r,n,i,a,o,s,l,u,c,h,f,p,y,d,v,m,g,b,S,_,P,O=e.x,T=e.y,w=Math.sin(e.y),M=Math.cos(e.y),C=x(O-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=A?(e.x=this.x0+this.a*(E-T)*Math.sin(C),e.y=this.y0-this.a*(E-T)*Math.cos(C)):Math.abs(this.sin_p12+1)<=A?(e.x=this.x0+this.a*(E+T)*Math.sin(C),e.y=this.y0+this.a*(E+T)*Math.cos(C)):(g=this.sin_p12*w+this.cos_p12*M*Math.cos(C),m=(v=Math.acos(g))/Math.sin(v),e.x=this.x0+this.a*m*M*Math.sin(C),e.y=this.y0+this.a*m*(this.cos_p12*w-this.sin_p12*M*Math.cos(C))):(t=k(this.es),r=j(this.es),n=F(this.es),i=I(this.es),Math.abs(this.sin_p12-1)<=A?(a=this.a*L(t,r,n,i,E),o=this.a*L(t,r,n,i,T),e.x=this.x0+(a-o)*Math.sin(C),e.y=this.y0-(a-o)*Math.cos(C)):Math.abs(this.sin_p12+1)<=A?(a=this.a*L(t,r,n,i,E),o=this.a*L(t,r,n,i,T),e.x=this.x0+(a+o)*Math.sin(C),e.y=this.y0+(a+o)*Math.cos(C)):(s=w/M,l=R(this.a,this.e,this.sin_p12),u=R(this.a,this.e,w),c=Math.atan((1-this.es)*s+this.es*l*this.sin_p12/(u*M)),b=0===(h=Math.atan2(Math.sin(C),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(C)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=A?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(C)*Math.cos(c)/Math.sin(h)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),v=l*b*(1-(S=b*b)*(d=(p=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*p)*(1-d)/6+(_=S*b)/8*(y=f*p)*(1-2*d)+(P=_*b)/120*(d*(4-7*d)-3*f*f*(1-7*d))-P*b/48*y),e.x=this.x0+v*Math.sin(h),e.y=this.y0+v*Math.cos(h))),e},t.inverse=function(e){var t,r,n,i,a,o,s,l,u,c,h,f,p,y,d,v,m,g,b,S,_,P;if(e.x-=this.x0,e.y-=this.y0,this.sphere){if((t=Math.sqrt(e.x*e.x+e.y*e.y))>2*E*this.a)return;return r=t/this.a,n=Math.sin(r),i=Math.cos(r),a=this.long0,Math.abs(t)<=A?o=this.lat0:(o=O(i*this.sin_p12+e.y*n*this.cos_p12/t),s=Math.abs(this.lat0)-E,a=Math.abs(s)<=A?0<=this.lat0?x(this.long0+Math.atan2(e.x,-e.y)):x(this.long0-Math.atan2(-e.x,e.y)):x(this.long0+Math.atan2(e.x*n,t*this.cos_p12*i-e.y*this.sin_p12*n))),e.x=a,e.y=o,e}return l=k(this.es),u=j(this.es),c=F(this.es),h=I(this.es),Math.abs(this.sin_p12-1)<=A?(f=this.a*L(l,u,c,h,E),t=Math.sqrt(e.x*e.x+e.y*e.y),o=T((f-t)/this.a,l,u,c,h),a=x(this.long0+Math.atan2(e.x,-1*e.y))):Math.abs(this.sin_p12+1)<=A?(f=this.a*L(l,u,c,h,E),t=Math.sqrt(e.x*e.x+e.y*e.y),o=T((t-f)/this.a,l,u,c,h),a=x(this.long0+Math.atan2(e.x,e.y))):(t=Math.sqrt(e.x*e.x+e.y*e.y),d=Math.atan2(e.x,e.y),p=R(this.a,this.e,this.sin_p12),v=Math.cos(d),g=-(m=this.e*this.cos_p12*v)*m/(1-this.es),b=3*this.es*(1-g)*this.sin_p12*this.cos_p12*v/(1-this.es),P=1-g*(_=(S=t/p)-g*(1+g)*Math.pow(S,3)/6-b*(1+3*g)*Math.pow(S,4)/24)*_/2-S*_*_*_/6,y=Math.asin(this.sin_p12*Math.cos(_)+this.cos_p12*Math.sin(_)*v),a=x(this.long0+Math.asin(Math.sin(d)*Math.sin(_)/Math.cos(y))),o=Math.atan((1-this.es*P*this.sin_p12/Math.sin(y))*Math.tan(y)/(1-this.es))),e.x=a,e.y=o,e},t.names=["Azimuthal_Equidistant","aeqd"]},function(e,t,r){"use strict";var m=r(7),g=Math.PI/2,b=r(39);t.init=function(){this.R=this.a},t.forward=function(e){var t,r,n=e.x,i=e.y,a=m(n-this.long0);Math.abs(i)<=1e-10&&(t=this.x0+this.R*a,r=this.y0);var o=b(2*Math.abs(i/Math.PI));(Math.abs(a)<=1e-10||Math.abs(Math.abs(i)-g)<=1e-10)&&(t=this.x0,r=0<=i?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var s=.5*Math.abs(Math.PI/a-a/Math.PI),l=s*s,u=Math.sin(o),c=Math.cos(o),h=c/(u+c-1),f=h*h,p=h*(2/u-1),y=p*p,d=Math.PI*this.R*(s*(h-y)+Math.sqrt(l*(h-y)*(h-y)-(y+l)*(f-y)))/(y+l);a<0&&(d=-d),t=this.x0+d;var v=l+h;return d=Math.PI*this.R*(p*v-s*Math.sqrt((y+l)*(l+1)-v*v))/(y+l),r=0<=i?this.y0+d:this.y0-d,e.x=t,e.y=r,e},t.inverse=function(e){var t,r,n,i,a,o,s,l,u,c,h,f;return e.x-=this.x0,e.y-=this.y0,h=Math.PI*this.R,a=(n=e.x/h)*n+(i=e.y/h)*i,h=3*(i*i/(l=-2*(o=-Math.abs(i)*(1+a))+1+2*i*i+a*a)+(2*(s=o-2*i*i+n*n)*s*s/l/l/l-9*o*s/l/l)/27)/(u=(o-s*s/3/l)/l)/(c=2*Math.sqrt(-u/3)),1<Math.abs(h)&&(h=0<=h?1:-1),f=Math.acos(h)/3,r=0<=e.y?(-c*Math.cos(f+Math.PI/3)-s/3/l)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-s/3/l)*Math.PI,t=Math.abs(n)<1e-10?this.long0:m(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(n*n-i*i)+a*a))/2/n),e.x=t,e.y=r,e},t.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},function(e,t,r){"use strict";var n=r(53),i=r(52),a=r(51),o=r(50),s=r(40),l=r(49),u=r(7),c=r(48),h=r(97);t.init=function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=n(this.es),this.e1=i(this.es),this.e2=a(this.es),this.e3=o(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=s(this.e,this.sinphi,this.cosphi),this.ml1=l(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=s(this.e,this.sinphi,this.cosphi),this.ml2=l(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=l(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},t.forward=function(e){var t,r=e.x,n=e.y;if(this.sphere)t=this.a*(this.g-n);else{var i=l(this.e0,this.e1,this.e2,this.e3,n);t=this.a*(this.g-i)}var a=this.ns*u(r-this.long0),o=this.x0+t*Math.sin(a),s=this.y0+this.rh-t*Math.cos(a);return e.x=o,e.y=s,e},t.inverse=function(e){var t,r,n,i;e.x-=this.x0,e.y=this.rh-e.y+this.y0,0<=this.ns?(r=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(r=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var a=0;if(0!==r&&(a=Math.atan2(t*e.x,t*e.y)),this.sphere)return i=u(this.long0+a/this.ns),n=c(this.g-r/this.a),e.x=i,e.y=n,e;var o=this.g-r/this.a;return n=h(o,this.e0,this.e1,this.e2,this.e3),i=u(this.long0+a/this.ns),e.x=i,e.y=n,e},t.names=["Equidistant_Conic","eqdc"]},function(e,t,r){"use strict";var c=r(7);t.init=function(){},t.forward=function(e){for(var t=e.x,r=e.y,n=c(t-this.long0),i=r,a=Math.PI*Math.sin(r),o=0;;o++){var s=-(i+Math.sin(i)-a)/(1+Math.cos(i));if(i+=s,Math.abs(s)<1e-10)break}i/=2,Math.PI/2-Math.abs(r)<1e-10&&(n=0);var l=.900316316158*this.a*n*Math.cos(i)+this.x0,u=1.4142135623731*this.a*Math.sin(i)+this.y0;return e.x=l,e.y=u,e},t.inverse=function(e){var t,r;e.x-=this.x0,e.y-=this.y0,r=e.y/(1.4142135623731*this.a),.999999999999<Math.abs(r)&&(r=.999999999999),t=Math.asin(r);var n=c(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*t+Math.sin(2*t))/Math.PI,1<Math.abs(r)&&(r=1);var i=Math.asin(r);return e.x=n,e.y=i,e},t.names=["Mollweide","moll"]},function(e,t,r){"use strict";var l=r(158);e.exports=function(e,t,r){for(var n=1/(1-t),i=e,a=20;a;--a){var o=Math.sin(i),s=1-t*o*o;if(i-=s=(l(i,o,Math.cos(i),r)-e)*(s*Math.sqrt(s))*n,Math.abs(s)<1e-10)return i}return i}},function(e,t,r){"use strict";var n=.01068115234375;e.exports=function(e){var t=[];t[0]=1-e*(.25+e*(.046875+e*(.01953125+e*n))),t[1]=e*(.75-e*(.046875+e*(.01953125+e*n)));var r=e*e;return t[2]=r*(.46875-e*(.013020833333333334+.007120768229166667*e)),r*=e,t[3]=r*(.3645833333333333-.005696614583333333*e),t[4]=r*e*.3076171875,t}},function(e,t,r){"use strict";var c=r(7),a=r(48),n=r(362),h=r(158),o=r(361),s=Math.PI/2,l=r(39);t.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=n(this.es)},t.forward=function(e){var t,r,n=e.x,i=e.y;if(n=c(n-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(i),o=20;o;--o){var s=(this.m*i+Math.sin(i)-a)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<1e-10)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;t=this.a*this.C_x*n*(this.m+Math.cos(i)),r=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);r=this.a*h(i,l,u,this.en),t=this.a*n*u/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=r,e},t.inverse=function(e){var t,r,n,i;return e.x-=this.x0,n=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,n/=this.C_x*(this.m+Math.cos(t)),this.m?t=l((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=l(Math.sin(t)/this.n)),n=c(n+this.long0),t=a(t)):(t=o(e.y/this.a,this.es,this.en),(i=Math.abs(t))<s?(i=Math.sin(t),r=this.long0+e.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(t)),n=c(r)):i-1e-10<s&&(n=this.long0)),e.x=n,e.y=t,e},t.names=["Sinusoidal","sinu"]},function(e,t,r){"use strict";var o=r(7);t.init=function(){},t.forward=function(e){var t=e.x,r=e.y,n=o(t-this.long0),i=this.x0+this.a*n,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return e.x=i,e.y=a,e},t.inverse=function(e){e.x-=this.x0,e.y-=this.y0;var t=o(this.long0+e.x/this.a),r=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=r,e},t.names=["Miller_Cylindrical","mill"]},function(e,t,r){"use strict";var C=484813681109536e-20;t.iterations=1,t.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},t.forward=function(e){var t,r=e.x,n=e.y-this.lat0,i=r-this.long0,a=n/C*1e-5,o=i,s=1,l=0;for(t=1;t<=10;t++)s*=a,l+=this.A[t]*s;var u,c=l,h=o,f=1,p=0,y=0,d=0;for(t=1;t<=6;t++)u=p*c+f*h,f=f*c-p*h,p=u,y=y+this.B_re[t]*f-this.B_im[t]*p,d=d+this.B_im[t]*f+this.B_re[t]*p;return e.x=d*this.a+this.x0,e.y=y*this.a+this.y0,e},t.inverse=function(e){var t,r,n=e.x,i=e.y,a=n-this.x0,o=(i-this.y0)/this.a,s=a/this.a,l=1,u=0,c=0,h=0;for(t=1;t<=6;t++)r=u*o+l*s,l=l*o-u*s,u=r,c=c+this.C_re[t]*l-this.C_im[t]*u,h=h+this.C_im[t]*l+this.C_re[t]*u;for(var f=0;f<this.iterations;f++){var p,y=c,d=h,v=o,m=s;for(t=2;t<=6;t++)p=d*c+y*h,y=y*c-d*h,d=p,v+=(t-1)*(this.B_re[t]*y-this.B_im[t]*d),m+=(t-1)*(this.B_im[t]*y+this.B_re[t]*d);y=1,d=0;var g=this.B_re[1],b=this.B_im[1];for(t=2;t<=6;t++)p=d*c+y*h,y=y*c-d*h,d=p,g+=t*(this.B_re[t]*y-this.B_im[t]*d),b+=t*(this.B_im[t]*y+this.B_re[t]*d);var S=g*g+b*b;c=(v*g+m*b)/S,h=(m*g-v*b)/S}var _=c,P=h,O=1,T=0;for(t=1;t<=9;t++)O*=_,T+=this.D[t]*O;var w=this.lat0+T*C*1e5,M=this.long0+P;return e.x=M,e.y=w,e},t.names=["New_Zealand_Map_Grid","nzmg"]},function(e,t,r){"use strict";var n=r(53),i=r(52),a=r(51),o=r(50),v=r(7),l=r(48),m=r(49),g=1e-10,u=r(98);t.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=n(this.es),this.e1=i(this.es),this.e2=a(this.es),this.e3=o(this.es),this.ml0=this.a*m(this.e0,this.e1,this.e2,this.e3,this.lat0)},t.forward=function(e){var t,r,n,i=e.x,a=e.y,o=v(i-this.long0);if(n=o*Math.sin(a),this.sphere)Math.abs(a)<=g?(t=this.a*o,r=-1*this.a*this.lat0):(t=this.a*Math.sin(n)/Math.tan(a),r=this.a*(l(a-this.lat0)+(1-Math.cos(n))/Math.tan(a)));else if(Math.abs(a)<=g)t=this.a*o,r=-1*this.ml0;else{var s=u(this.a,this.e,Math.sin(a))/Math.tan(a);t=s*Math.sin(n),r=this.a*m(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+s*(1-Math.cos(n))}return e.x=t+this.x0,e.y=r+this.y0,e},t.inverse=function(e){var t,r,n,i,a,o,s,l,u;if(n=e.x-this.x0,i=e.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=g)t=v(n/this.a+this.long0),r=0;else{var c;for(o=this.lat0+i/this.a,s=n*n/this.a/this.a+o*o,l=o,a=20;a;--a)if(l+=u=-1*(o*(l*(c=Math.tan(l))+1)-l-.5*(l*l+s)*c)/((l-o)/c-1),Math.abs(u)<=g){r=l;break}t=v(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(r))}else if(Math.abs(i+this.ml0)<=g)r=0,t=v(this.long0+n/this.a);else{var h,f,p,y,d;for(o=(this.ml0+i)/this.a,s=n*n/this.a/this.a+o*o,l=o,a=20;a;--a)if(d=this.e*Math.sin(l),h=Math.sqrt(1-d*d)*Math.tan(l),f=this.a*m(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(o*(h*(y=f/this.a)+1)-y-.5*h*(y*y+s))/(this.es*Math.sin(2*l)*(y*y+s-2*o*y)/(4*h)+(o-y)*(h*p-2/Math.sin(2*l))-p),Math.abs(u)<=g){r=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),t=v(this.long0+Math.asin(n*h/this.a)/Math.sin(r))}return e.x=t,e.y=r,e},t.names=["Polyconic","poly"]},function(e,t,r){"use strict";var a=r(7),o=r(48);t.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},t.forward=function(e){var t=e.x,r=e.y,n=a(t-this.long0),i=o(r-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*i,e},t.inverse=function(e){var t=e.x,r=e.y;return e.x=a(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=o(this.lat0+(r-this.y0)/this.a),e},t.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},function(e,t,r){"use strict";var u=Math.PI/2;e.exports=function(e,t){var r=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-r)<1e-6)return t<0?-1*u:u;for(var n,i,a,o,s=Math.asin(.5*t),l=0;l<30;l++)if(i=Math.sin(s),a=Math.cos(s),o=e*i,s+=n=Math.pow(1-o*o,2)/(2*a)*(t/(1-e*e)-i/(1-o*o)+.5/e*Math.log((1-o)/(1+o))),Math.abs(n)<=1e-10)return s;return NaN}},function(e,t,r){"use strict";var s=r(7),l=r(96),n=r(40),i=r(368);t.init=function(){this.sphere||(this.k0=n(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},t.forward=function(e){var t,r,n=e.x,i=e.y,a=s(n-this.long0);if(this.sphere)t=this.x0+this.a*a*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var o=l(this.e,Math.sin(i));t=this.x0+this.a*this.k0*a,r=this.y0+this.a*o*.5/this.k0}return e.x=t,e.y=r,e},t.inverse=function(e){var t,r;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=s(this.long0+e.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(r=i(this.e,2*e.y*this.k0/this.a),t=s(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=r,e},t.names=["cea"]},function(e,t,r){"use strict";var c=r(7),s=r(39);t.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},t.forward=function(e){var t,r,n,i,a,o,s,l=e.x,u=e.y;return n=c(l-this.long0),t=Math.sin(u),r=Math.cos(u),i=Math.cos(n),1,0<(a=this.sin_p14*t+this.cos_p14*r*i)||Math.abs(a)<=1e-10?(o=this.x0+1*this.a*r*Math.sin(n)/a,s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*r*i)/a):(o=this.x0+this.infinity_dist*r*Math.sin(n),s=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*r*i)),e.x=o,e.y=s,e},t.inverse=function(e){var t,r,n,i,a,o;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(i=Math.atan2(t,this.rc),r=Math.sin(i),n=Math.cos(i),o=s(n*this.sin_p14+e.y*r*this.cos_p14/t),a=Math.atan2(e.x*r,t*this.cos_p14*n-e.y*this.sin_p14*r),a=c(this.long0+a)):(o=this.phic0,a=0),e.x=a,e.y=o,e},t.names=["gnom"]},function(e,t,r){"use strict";var n=r(40),l=r(96),u=r(7),c=r(39);t.init=function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=n(this.e3,this.sin_po,this.cos_po),this.qs1=l(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=n(this.e3,this.sin_po,this.cos_po),this.qs2=l(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=l(this.e3,this.sin_po,this.cos_po),1e-10<Math.abs(this.lat1-this.lat2)?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},t.forward=function(e){var t=e.x,r=e.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=l(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,a=this.ns0*u(t-this.long0),o=i*Math.sin(a)+this.x0,s=this.rh-i*Math.cos(a)+this.y0;return e.x=o,e.y=s,e},t.inverse=function(e){var t,r,n,i,a,o;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,0<=this.ns0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),(i=0)!==t&&(i=Math.atan2(n*e.x,n*e.y)),n=t*this.ns0/this.a,this.sphere?o=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,o=this.phi1z(this.e3,r)),a=u(i/this.ns0+this.long0),e.x=a,e.y=o,e},t.phi1z=function(e,t){var r,n,i,a,o=c(.5*t);if(e<1e-10)return o;for(var s=e*e,l=1;l<=25;l++)if(o+=a=.5*(i=1-(n=e*(r=Math.sin(o)))*n)*i/Math.cos(o)*(t/(1-s)-r/i+.5/e*Math.log((1-n)/(1+n))),Math.abs(a)<=1e-7)return o;return null},t.names=["Albers_Conic_Equal_Area","Albers","aea"]},function(e,t,r){"use strict";var p=Math.PI/2,y=Math.PI/4,d=1e-10,v=r(96),m=r(7);t.S_POLE=1,t.N_POLE=2,t.EQUIT=3,t.OBLIQ=4,t.init=function(){var e,t=Math.abs(this.lat0);if(Math.abs(t-p)<d?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<d?this.mode=this.EQUIT:this.mode=this.OBLIQ,0<this.es)switch(this.qp=v(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=v(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},t.forward=function(e){var t,r,n,i,a,o,s,l,u,c,h=e.x,f=e.y;if(h=m(h-this.long0),this.sphere){if(a=Math.sin(f),c=Math.cos(f),n=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+c*n:1+this.sinph0*a+this.cosph0*c*n)<=d)return null;t=(r=Math.sqrt(2/r))*c*Math.sin(h),r*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(f+this.phi0)<d)return null;r=y-.5*f,t=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(h),r*=n}}else{switch(u=l=s=0,n=Math.cos(h),i=Math.sin(h),a=Math.sin(f),o=v(this.e,a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=o/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*l*n;break;case this.EQUIT:u=1+l*n;break;case this.N_POLE:u=p+f,o=this.qp-o;break;case this.S_POLE:u=f-p,o=this.qp+o}if(Math.abs(u)<d)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),r=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*s-this.sinb1*l*n):(u=Math.sqrt(2/(1+l*n)))*s*this.ymf,t=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:0<=o?(t=(u=Math.sqrt(o))*i,r=n*(this.mode===this.S_POLE?u:-u)):t=r=0}}return e.x=this.a*t+this.x0,e.y=this.a*r+this.y0,e},t.inverse=function(e){e.x-=this.x0,e.y-=this.y0;var t,r,n,i,a,o,s,l=e.x/this.a,u=e.y/this.a;if(this.sphere){var c,h=0,f=0;if(1<(r=.5*(c=Math.sqrt(l*l+u*u))))return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(f=Math.sin(r),h=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(c)<=d?0:Math.asin(u*f/c),l*=f,u=h*c;break;case this.OBLIQ:r=Math.abs(c)<=d?this.phi0:Math.asin(h*this.sinph0+u*f*this.cosph0/c),l*=f*this.cosph0,u=(h-Math.sin(r)*this.sinph0)*c;break;case this.N_POLE:u=-u,r=p-r;break;case this.S_POLE:r-=p}t=0!==u||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,u):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,u*=this.dd,(o=Math.sqrt(l*l+u*u))<d)return e.x=0,e.y=this.phi0,e;i=2*Math.asin(.5*o/this.rq),n=Math.cos(i),l*=i=Math.sin(i),this.mode===this.OBLIQ?(s=n*this.sinb1+u*i*this.cosb1/o,a=this.qp*s,u=o*this.cosb1*n-u*this.sinb1*i):(s=u*i/o,a=this.qp*s,u=o*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),!(a=l*l+u*u))return e.x=0,e.y=this.phi0,e;s=1-a/this.qp,this.mode===this.S_POLE&&(s=-s)}t=Math.atan2(l,u),r=this.authlat(Math.asin(s),this.apa)}return e.x=m(this.long0+t),e.y=r,e},t.P00=.3333333333333333,t.P01=.17222222222222222,t.P02=.10257936507936508,t.P10=.06388888888888888,t.P11=.0664021164021164,t.P20=.016415012942191543,t.authset=function(e){var t,r=[];return r[0]=e*this.P00,t=e*e,r[0]+=t*this.P01,r[1]=t*this.P10,t*=e,r[0]+=t*this.P02,r[1]+=t*this.P11,r[2]=t*this.P20,r},t.authlat=function(e,t){var r=e+e;return e+t[0]*Math.sin(r)+t[1]*Math.sin(r+r)+t[2]*Math.sin(r+r+r)},t.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},function(e,t,r){"use strict";var f=r(49),n=r(53),i=r(52),a=r(51),o=r(50),p=r(98),y=r(7),d=r(48),v=r(97),m=Math.PI/2;t.init=function(){this.sphere||(this.e0=n(this.es),this.e1=i(this.es),this.e2=a(this.es),this.e3=o(this.es),this.ml0=this.a*f(this.e0,this.e1,this.e2,this.e3,this.lat0))},t.forward=function(e){var t,r,n=e.x,i=e.y;if(n=y(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(i)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(i),Math.cos(n))-this.lat0);else{var a=Math.sin(i),o=Math.cos(i),s=p(this.a,this.e,a),l=Math.tan(i)*Math.tan(i),u=n*Math.cos(i),c=u*u,h=this.es*o*o/(1-this.es);t=s*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),r=this.a*f(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*a/o*c*(.5+(5-l+6*h)*c/24)}return e.x=t+this.x0,e.y=r+this.y0,e},t.inverse=function(e){e.x-=this.x0,e.y-=this.y0;var t,r,n=e.x/this.a,i=e.y/this.a;if(this.sphere){var a=i+this.lat0;t=Math.asin(Math.sin(a)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(a))}else{var o=this.ml0/this.a+i,s=v(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-m)<=1e-10)return e.x=this.long0,e.y=m,i<0&&(e.y*=-1),e;var l=p(this.a,this.e,Math.sin(s)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),h=n*this.a/l,f=h*h;t=s-l*Math.tan(s)/u*h*h*(.5-(1+3*c)*h*h/24),r=h*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(s)}return e.x=y(r+this.long0),e.y=d(t),e},t.names=["Cassini","Cassini_Soldner","cass"]},function(e,t,r){"use strict";var h=r(7);t.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},t.forward=function(e){var t,r,n,i,a,o,s,l=e.x,u=e.y,c=h(l-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),n=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),a=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(i)),o=this.n*a,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),e.y=s*Math.cos(o)/1,e.x=s*Math.sin(o)/1,this.czech||(e.y*=-1,e.x*=-1),e},t.inverse=function(e){var t,r,n,i,a,o,s,l=e.x;e.x=e.y,e.y=l,this.czech||(e.y*=-1,e.x*=-1),a=Math.sqrt(e.x*e.x+e.y*e.y),i=Math.atan2(e.y,e.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(t)),e.x=this.long0-r/this.alfa,o=t;for(var u=s=0;e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-e.y)<1e-10&&(s=1),o=e.y,u+=1,0===s&&u<15;);return 15<=u?null:e},t.names=["Krovak","krovak"]},function(e,t,r){"use strict";var c=r(40),h=r(65),u=Math.PI/2,s=r(54),f=r(7),p=r(64);t.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),r=Math.cos(this.lat1),n=c(this.e,t,r),i=h(this.e,this.lat1,t),a=Math.sin(this.lat2),o=Math.cos(this.lat2),s=c(this.e,a,o),l=h(this.e,this.lat2,a),u=h(this.e,this.lat0,Math.sin(this.lat0));1e-10<Math.abs(this.lat1-this.lat2)?this.ns=Math.log(n/s)/Math.log(i/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},t.forward=function(e){var t=e.x,r=e.y;Math.abs(2*Math.abs(r)-Math.PI)<=1e-10&&(r=s(r)*(u-2e-10));var n,i,a=Math.abs(Math.abs(r)-u);if(1e-10<a)n=h(this.e,r,Math.sin(r)),i=this.a*this.f0*Math.pow(n,this.ns);else{if((a=r*this.ns)<=0)return null;i=0}var o=this.ns*f(t-this.long0);return e.x=this.k0*(i*Math.sin(o))+this.x0,e.y=this.k0*(this.rh-i*Math.cos(o))+this.y0,e},t.inverse=function(e){var t,r,n,i,a,o=(e.x-this.x0)/this.k0,s=this.rh-(e.y-this.y0)/this.k0;0<this.ns?(t=Math.sqrt(o*o+s*s),r=1):(t=-Math.sqrt(o*o+s*s),r=-1);var l=0;if(0!==t&&(l=Math.atan2(r*o,r*s)),0!==t||0<this.ns){if(r=1/this.ns,n=Math.pow(t/(this.a*this.f0),r),-9999===(i=p(this.e,n)))return null}else i=-u;return a=f(l/this.ns+this.long0),e.x=a,e.y=i,e},t.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},function(e,t,r){"use strict";var d=r(65),v=r(7),u=r(64),p=Math.PI/2,y=Math.PI/4;t.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var e=Math.sin(this.lat0),t=Math.cos(this.lat0),r=this.e*e;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(t,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-r*r);var n,i,a=d(this.e,this.lat0,e),o=this.bl/t*Math.sqrt((1-this.es)/(1-r*r));if(o*o<1&&(o=1),isNaN(this.longc)){var s=d(this.e,this.lat1,Math.sin(this.lat1)),l=d(this.e,this.lat2,Math.sin(this.lat2));0<=this.lat0?this.el=(o+Math.sqrt(o*o-1))*Math.pow(a,this.bl):this.el=(o-Math.sqrt(o*o-1))*Math.pow(a,this.bl);var u=Math.pow(s,this.bl),c=Math.pow(l,this.bl);i=.5*((n=this.el/u)-1/n);var h=(this.el*this.el-c*u)/(this.el*this.el+c*u),f=(c-u)/(c+u),p=v(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(h*Math.tan(.5*this.bl*p)/f)/this.bl,this.long0=v(this.long0);var y=v(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*y)/i),this.alpha=Math.asin(o*Math.sin(this.gamma0))}else n=0<=this.lat0?o+Math.sqrt(o*o-1):o-Math.sqrt(o*o-1),this.el=n*Math.pow(a,this.bl),i=.5*(n-1/n),this.gamma0=Math.asin(Math.sin(this.alpha)/o),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:0<=this.lat0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(o*o-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(o*o-1),Math.cos(this.alpha))},t.forward=function(e){var t,r,n,i=e.x,a=e.y,o=v(i-this.long0);if(Math.abs(Math.abs(a)-p)<=1e-10)n=0<a?-1:1,r=this.al/this.bl*Math.log(Math.tan(y+n*this.gamma0*.5)),t=-1*n*p*this.al/this.bl;else{var s=d(this.e,a,Math.sin(a)),l=this.el/Math.pow(s,this.bl),u=.5*(l-1/l),c=.5*(l+1/l),h=Math.sin(this.bl*o),f=(u*Math.sin(this.gamma0)-h*Math.cos(this.gamma0))/c;r=Math.abs(Math.abs(f)-1)<=1e-10?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-f)/(1+f))/this.bl,t=Math.abs(Math.cos(this.bl*o))<=1e-10?this.al*this.bl*o:this.al*Math.atan2(u*Math.cos(this.gamma0)+h*Math.sin(this.gamma0),Math.cos(this.bl*o))/this.bl}return this.no_rot?(e.x=this.x0+t,e.y=this.y0+r):(t-=this.uc,e.x=this.x0+r*Math.cos(this.alpha)+t*Math.sin(this.alpha),e.y=this.y0+t*Math.cos(this.alpha)-r*Math.sin(this.alpha)),e},t.inverse=function(e){var t,r;this.no_rot?(r=e.y-this.y0,t=e.x-this.x0):(r=(e.x-this.x0)*Math.cos(this.alpha)-(e.y-this.y0)*Math.sin(this.alpha),t=(e.y-this.y0)*Math.cos(this.alpha)+(e.x-this.x0)*Math.sin(this.alpha),t+=this.uc);var n=Math.exp(-1*this.bl*r/this.al),i=.5*(n-1/n),a=.5*(n+1/n),o=Math.sin(this.bl*t/this.al),s=(o*Math.cos(this.gamma0)+i*Math.sin(this.gamma0))/a,l=Math.pow(this.el/Math.sqrt((1+s)/(1-s)),1/this.bl);return Math.abs(s-1)<1e-10?(e.x=this.long0,e.y=p):Math.abs(s+1)<1e-10?(e.x=this.long0,e.y=-1*p):(e.y=u(this.e,l),e.x=v(this.long0-Math.atan2(i*Math.cos(this.gamma0)-o*Math.sin(this.gamma0),Math.cos(this.bl*t/this.al))/this.bl)),e},t.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},function(e,t,r){"use strict";t.init=function(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),r=this.a,n=1/this.rf,i=2*n-Math.pow(n,2),a=this.e=Math.sqrt(i);this.R=this.k0*r*Math.sqrt(1-i)/(1-i*Math.pow(t,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+e/2)),l=Math.log((1+a*t)/(1-a*t));this.K=o-this.alpha*s+this.alpha*a/2*l},t.forward=function(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),n=-this.alpha*(t+r)+this.K,i=2*(Math.atan(Math.exp(n))-Math.PI/4),a=this.alpha*(e.x-this.lambda0),o=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(a))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(a));return e.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,e.x=this.R*o+this.x0,e},t.inverse=function(e){for(var t=e.x-this.x0,r=e.y-this.y0,n=t/this.R,i=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n)),o=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+o/this.alpha,l=0,u=a,c=-1e3,h=0;1e-7<Math.abs(u-c);){if(20<++h)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=s,e.y=u,e},t.names=["somerc"]},function(e,t,r){"use strict";var f=Math.PI/2,p=1e-10,n=r(54),i=r(40),y=r(65),l=r(64),d=r(7);t.ssfn_=function(e,t,r){return t*=r,Math.tan(.5*(f+e))*Math.pow((1-t)/(1+t),.5*r)},t.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=p&&(this.k0=.5*(1+n(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=p&&(0<this.lat0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=p&&(this.k0=.5*this.cons*i(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/y(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=i(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-f,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},t.forward=function(e){var t,r,n,i,a,o,s=e.x,l=e.y,u=Math.sin(l),c=Math.cos(l),h=d(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=p&&Math.abs(l+this.lat0)<=p?(e.x=NaN,e.y=NaN,e):this.sphere?(t=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(h)),e.x=this.a*t*c*Math.sin(h)+this.x0,e.y=this.a*t*(this.coslat0*u-this.sinlat0*c*Math.cos(h))+this.y0,e):(r=2*Math.atan(this.ssfn_(l,u,this.e))-f,i=Math.cos(r),n=Math.sin(r),Math.abs(this.coslat0)<=p?(a=y(this.e,l*this.con,this.con*u),o=2*this.a*this.k0*a/this.cons,e.x=this.x0+o*Math.sin(s-this.long0),e.y=this.y0-this.con*o*Math.cos(s-this.long0)):(Math.abs(this.sinlat0)<p?(t=2*this.a*this.k0/(1+i*Math.cos(h)),e.y=t*n):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*i*Math.cos(h))),e.y=t*(this.cosX0*n-this.sinX0*i*Math.cos(h))+this.y0),e.x=t*i*Math.sin(h)+this.x0),e)},t.inverse=function(e){var t,r,n,i,a;e.x-=this.x0,e.y-=this.y0;var o=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var s=2*Math.atan(o/(.5*this.a*this.k0));return t=this.long0,r=this.lat0,o<=p?(e.x=t,e.y=r,e):(r=Math.asin(Math.cos(s)*this.sinlat0+e.y*Math.sin(s)*this.coslat0/o),t=Math.abs(this.coslat0)<p?0<this.lat0?d(this.long0+Math.atan2(e.x,-1*e.y)):d(this.long0+Math.atan2(e.x,e.y)):d(this.long0+Math.atan2(e.x*Math.sin(s),o*this.coslat0*Math.cos(s)-e.y*this.sinlat0*Math.sin(s))),e.x=t,e.y=r,e)}if(Math.abs(this.coslat0)<=p){if(o<=p)return r=this.lat0,t=this.long0,e.x=t,e.y=r,e;e.x*=this.con,e.y*=this.con,n=o*this.cons/(2*this.a*this.k0),r=this.con*l(this.e,n),t=this.con*d(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else i=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,o<=p?a=this.X0:(a=Math.asin(Math.cos(i)*this.sinX0+e.y*Math.sin(i)*this.cosX0/o),t=d(this.long0+Math.atan2(e.x*Math.sin(i),o*this.cosX0*Math.cos(i)-e.y*this.sinX0*Math.sin(i)))),r=-1*l(this.e,Math.tan(.5*(f+a)));return e.x=t,e.y=r,e},t.names=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"]},function(e,t,r){"use strict";e.exports=function(e,t){return Math.pow((1-e)/(1+e),t)}},function(e,t,r){"use strict";var a=Math.PI/4,o=r(379),s=Math.PI/2;t.init=function(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+a)/(Math.pow(Math.tan(.5*this.lat0+a),this.C)*o(this.e*e,this.ratexp))},t.forward=function(e){var t=e.x,r=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+a),this.C)*o(this.e*Math.sin(r),this.ratexp))-s,e.x=this.C*t,e},t.inverse=function(e){for(var t=e.x/this.C,r=e.y,n=Math.pow(Math.tan(.5*r+a)/this.K,1/this.C),i=20;0<i&&(r=2*Math.atan(n*o(this.e*Math.sin(e.y),-.5*this.e))-s,!(Math.abs(r-e.y)<1e-14));--i)e.y=r;return i?(e.x=t,e.y=r,e):null},t.names=["gauss"]},function(e,t,r){"use strict";var s=r(380),l=r(7);t.init=function(){s.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},t.forward=function(e){var t,r,n,i;return e.x=l(e.x-this.long0),s.forward.apply(this,[e]),t=Math.sin(e.y),r=Math.cos(e.y),n=Math.cos(e.x),i=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*r*n),e.x=i*r*Math.sin(e.x),e.y=i*(this.cosc0*t-this.sinc0*r*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},t.inverse=function(e){var t,r,n,i,a;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,a=Math.sqrt(e.x*e.x+e.y*e.y)){var o=2*Math.atan2(a,this.R2);t=Math.sin(o),r=Math.cos(o),i=Math.asin(r*this.sinc0+e.y*t*this.cosc0/a),n=Math.atan2(e.x*t,a*this.cosc0*r-e.y*this.sinc0*t)}else i=this.phic0,n=0;return e.x=n,e.y=i,s.inverse.apply(this,[e]),e.x=l(e.x+this.long0),e},t.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},function(e,t,r){"use strict";var n=r(159);t.dependsOn="tmerc",t.init=function(){this.zone&&(this.lat0=0,this.long0=.017453292519943295*(6*Math.abs(this.zone)-183),this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,n.init.apply(this),this.forward=n.forward,this.inverse=n.inverse)},t.names=["Universal Transverse Mercator System","utm"]},function(e,t,r){"use strict";var n=[r(159),r(382),r(381),r(378),r(377),r(376),r(375),r(374),r(373),r(372),r(371),r(370),r(369),r(367),r(366),r(365),r(364),r(363),r(360),r(359),r(358),r(357)];e.exports=function(t){n.forEach(function(e){t.Proj.projections.add(e)})}},function(e){e.exports={_from:"proj4@2.3.15",_id:"proj4@2.3.15",_inBundle:!1,_integrity:"sha1-WtBui8owvg/6OJpJ5FZfUfBtCJ4=",_location:"/proj4",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"proj4@2.3.15",name:"proj4",escapedName:"proj4",rawSpec:"2.3.15",saveSpec:null,fetchSpec:"2.3.15"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/proj4/-/proj4-2.3.15.tgz",_shasum:"5ad06e8bca30be0ffa389a49e4565f51f06d089e",_spec:"proj4@2.3.15",_where:"F:\\dev\\iClient-JavaScript",author:"",bugs:{url:"https://github.com/proj4js/proj4js/issues"},bundleDependencies:!1,contributors:[{name:"Mike Adair",email:"madair@dmsolutions.ca"},{name:"Richard Greenwood",email:"rich@greenwoodmap.com"},{name:"Calvin Metcalf",email:"calvin.metcalf@gmail.com"},{name:"Richard Marsden",url:"http://www.winwaed.com"},{name:"T. Mittan"},{name:"D. Steinwand"},{name:"S. Nelson"}],dependencies:{mgrs:"~0.0.2"},deprecated:!1,description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",devDependencies:{browserify:"~12.0.1",chai:"~1.8.1",curl:"git://github.com/cujojs/curl.git",grunt:"~0.4.2","grunt-browserify":"~4.0.1","grunt-cli":"~0.1.13","grunt-contrib-connect":"~0.6.0","grunt-contrib-jshint":"~0.8.0","grunt-contrib-uglify":"~0.11.1","grunt-mocha-phantomjs":"~0.4.0",istanbul:"~0.2.4",mocha:"~1.17.1",tin:"~0.4.0"},directories:{test:"test",doc:"docs"},homepage:"https://github.com/proj4js/proj4js#readme",jam:{main:"dist/proj4.js",include:["dist/proj4.js","README.md","AUTHORS","LICENSE.md"]},license:"MIT",main:"lib/index.js",name:"proj4",repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},scripts:{test:"./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"},version:"2.3.15"}},function(e,t,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=r(160);function a(e,t,r){if(!(this instanceof a))return new a(e,t,r);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"===(void 0===e?"undefined":i(e)))this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&void 0===t){var n=e.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=e,this.y=t,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}a.fromMGRS=function(e){return new a(n.toPoint(e))},a.prototype.toMGRS=function(e){return n.forward([this.x,this.y],e)},e.exports=a},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i,a,o=r.x,s=r.y,l=r.z||0;for(a=0;a<3;a++)if(!t||2!==a||r.z!==undefined)switch(0===a?(n=o,i="x"):1===a?(n=s,i="y"):(n=l,i="z"),e.axis[a]){case"e":r[i]=n;break;case"w":r[i]=-n;break;case"n":r[i]=n;break;case"s":r[i]=-n;break;case"u":r[i]!==undefined&&(r.z=n);break;case"d":r[i]!==undefined&&(r.z=-n);break;default:return null}return r}},function(e,t,r){"use strict";var f=1,p=2,y=.006694379990141316;e.exports=function(e,t,r){var n,i,a;function o(e){return e===f||e===p}if(e.compare_datums(t))return r;if(5===e.datum_type||5===t.datum_type)return r;var s=e.a,l=e.es,u=t.a,c=t.es,h=e.datum_type;if(3===h)if(0===this.apply_gridshift(e,0,r))e.a=6378137,e.es=y;else{if(!e.datum_params)return e.a=s,e.es=e.es,r;for(n=1,i=0,a=e.datum_params.length;i<a;i++)n*=e.datum_params[i];if(0===n)return e.a=s,e.es=e.es,r;h=3<e.datum_params.length?p:f}return 3===t.datum_type&&(t.a=6378137,t.es=y),(e.es!==t.es||e.a!==t.a||o(h)||o(t.datum_type))&&(e.geodetic_to_geocentric(r),o(e.datum_type)&&e.geocentric_to_wgs84(r),o(t.datum_type)&&t.geocentric_from_wgs84(r),t.geocentric_to_geodetic(r)),3===t.datum_type&&this.apply_gridshift(t,1,r),e.a=s,e.es=l,t.a=u,t.es=c,r}},function(t,r,n){"use strict";var _=Math.PI/2,i=484813681109536e-20,P=.3826834323650898,a=function e(t){if(!(this instanceof e))return new e(t);this.datum_type=4,t&&(t.datumCode&&"none"===t.datumCode&&(this.datum_type=5),t.datum_params&&(this.datum_params=t.datum_params.map(parseFloat),0===this.datum_params[0]&&0===this.datum_params[1]&&0===this.datum_params[2]||(this.datum_type=1),3<this.datum_params.length&&(0===this.datum_params[3]&&0===this.datum_params[4]&&0===this.datum_params[5]&&0===this.datum_params[6]||(this.datum_type=2,this.datum_params[3]*=i,this.datum_params[4]*=i,this.datum_params[5]*=i,this.datum_params[6]=this.datum_params[6]/1e6+1))),this.datum_type=t.grids?3:this.datum_type,this.a=t.a,this.b=t.b,this.es=t.es,this.ep2=t.ep2,3===this.datum_type&&(this.grids=t.grids))};a.prototype={compare_datums:function(e){return this.datum_type===e.datum_type&&(!(this.a!==e.a||5e-11<Math.abs(this.es-e.es))&&(1===this.datum_type?this.datum_params[0]===e.datum_params[0]&&this.datum_params[1]===e.datum_params[1]&&this.datum_params[2]===e.datum_params[2]:2===this.datum_type?this.datum_params[0]===e.datum_params[0]&&this.datum_params[1]===e.datum_params[1]&&this.datum_params[2]===e.datum_params[2]&&this.datum_params[3]===e.datum_params[3]&&this.datum_params[4]===e.datum_params[4]&&this.datum_params[5]===e.datum_params[5]&&this.datum_params[6]===e.datum_params[6]:3!==this.datum_type&&3!==e.datum_type||this.nadgrids===e.nadgrids))},geodetic_to_geocentric:function(e){var t,r,n,i,a,o,s,l=e.x,u=e.y,c=e.z?e.z:0;if(u<-_&&-1.001*_<u)u=-_;else if(_<u&&u<1.001*_)u=_;else if(u<-_||_<u)return null;return l>Math.PI&&(l-=2*Math.PI),a=Math.sin(u),s=Math.cos(u),o=a*a,t=((i=this.a/Math.sqrt(1-this.es*o))+c)*s*Math.cos(l),r=(i+c)*s*Math.sin(l),n=(i*(1-this.es)+c)*a,e.x=t,e.y=r,e.z=n,0},geocentric_to_geodetic:function(e){var t,r,n,i,a,o,s,l,u,c,h,f,p,y,d,v,m=e.x,g=e.y,b=e.z?e.z:0;if(!1,t=Math.sqrt(m*m+g*g),r=Math.sqrt(m*m+g*g+b*b),t/this.a<1e-12){if(!0,y=0,r/this.a<1e-12)return d=_,void(v=-this.b)}else y=Math.atan2(g,m);for(n=b/r,i=t/r,a=1/Math.sqrt(1-this.es*(2-this.es)*i*i),l=i*(1-this.es)*a,u=n*a,p=0;p++,v=t*l+b*u-(s=this.a/Math.sqrt(1-this.es*u*u))*(1-this.es*u*u),o=this.es*s/(s+v),f=(h=n*(a=1/Math.sqrt(1-o*(2-o)*i*i)))*l-(c=i*(1-o)*a)*u,l=c,u=h,1e-24<f*f&&p<30;);return d=Math.atan(h/Math.abs(c)),e.x=y,e.y=d,e.z=v,e},geocentric_to_geodetic_noniter:function(e){var t,r,n,i,a,o,s,l,u,c,h,f,p,y,d,v,m,g=e.x,b=e.y,S=e.z?e.z:0;if(g=parseFloat(g),b=parseFloat(b),S=parseFloat(S),m=!1,0!==g)t=Math.atan2(b,g);else if(0<b)t=_;else if(b<0)t=-_;else if(m=!0,(t=0)<S)r=_;else{if(!(S<0))return r=_,void(n=-this.b);r=-_}return a=g*g+b*b,o=1.0026*S,f=(i=Math.sqrt(a))/(l=Math.sqrt(o*o+a)),h=(c=o/l)*c*c,s=S+this.b*this.ep2*h,v=i-this.a*this.es*f*f*f,p=s/(u=Math.sqrt(s*s+v*v)),y=v/u,d=this.a/Math.sqrt(1-this.es*p*p),n=P<=y?i/y-d:y<=-P?i/-y-d:S/p+d*(this.es-1),!1===m&&(r=Math.atan(p/y)),e.x=t,e.y=r,e.z=n,e},geocentric_to_wgs84:function(e){if(1===this.datum_type)e.x+=this.datum_params[0],e.y+=this.datum_params[1],e.z+=this.datum_params[2];else if(2===this.datum_type){var t=this.datum_params[0],r=this.datum_params[1],n=this.datum_params[2],i=this.datum_params[3],a=this.datum_params[4],o=this.datum_params[5],s=this.datum_params[6],l=s*(e.x-o*e.y+a*e.z)+t,u=s*(o*e.x+e.y-i*e.z)+r,c=s*(-a*e.x+i*e.y+e.z)+n;e.x=l,e.y=u,e.z=c}},geocentric_from_wgs84:function(e){if(1===this.datum_type)e.x-=this.datum_params[0],e.y-=this.datum_params[1],e.z-=this.datum_params[2];else if(2===this.datum_type){var t=this.datum_params[0],r=this.datum_params[1],n=this.datum_params[2],i=this.datum_params[3],a=this.datum_params[4],o=this.datum_params[5],s=this.datum_params[6],l=(e.x-t)/s,u=(e.y-r)/s,c=(e.z-n)/s;e.x=l+o*u-a*c,e.y=-o*l+u+i*c,e.z=a*l-i*u+c}}},t.exports=a},function(e,t,r){"use strict";t.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},t.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},t.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},t.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},t.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},t.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},t.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},t.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},t.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},t.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},t.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},t.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},t.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},t.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},t.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},t.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},t.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},t.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},t.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},t.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},t.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},t.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},t.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},t.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},t.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},t.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},t.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},t.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},t.hough={a:6378270,rf:297,ellipseName:"Hough"},t.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},t.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},t.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},t.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},t.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},t.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},t.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},t.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},t.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},t.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},t.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},t.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},t.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},t.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},function(e,t,r){"use strict";t.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},t.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},t.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},t.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},t.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},t.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},t.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},t.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},t.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},t.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},t.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},t.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},t.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},t.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},t.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},t.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},function(e,t,r){"use strict";var n=r(390),i=r(389),a=r(99),o=r(388);e.exports=function(e){if(e.datumCode&&"none"!==e.datumCode){var t=n[e.datumCode];t&&(e.datum_params=t.towgs84?t.towgs84.split(","):null,e.ellps=t.ellipse,e.datumName=t.datumName?t.datumName:e.datumCode)}if(!e.a){var r=i[e.ellps]?i[e.ellps]:i.WGS84;a(e,r)}return e.rf&&!e.b&&(e.b=(1-1/e.rf)*e.a),(0===e.rf||Math.abs(e.a-e.b)<1e-10)&&(e.sphere=!0,e.b=e.a),e.a2=e.a*e.a,e.b2=e.b*e.b,e.es=(e.a2-e.b2)/e.a2,e.e=Math.sqrt(e.es),e.R_A&&(e.a*=1-e.es*(.16666666666666666+e.es*(.04722222222222222+.022156084656084655*e.es)),e.a2=e.a*e.a,e.b2=e.b*e.b,e.es=0),e.ep2=(e.a2-e.b2)/e.b2,e.k0||(e.k0=1),e.axis||(e.axis="enu"),e.datum||(e.datum=o(e)),e}},function(e,t,r){"use strict";function n(e){return e}t.init=function(){},t.forward=n,t.inverse=n,t.names=["longlat","identity"]},function(e,t,r){"use strict";var n=r(40),s=Math.PI/2,l=57.29577951308232,u=r(7),c=Math.PI/4,h=r(65),o=r(64);t.init=function(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=n(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},t.forward=function(e){var t,r,n=e.x,i=e.y;if(90<i*l&&i*l<-90&&180<n*l&&n*l<-180)return null;if(Math.abs(Math.abs(i)-s)<=1e-10)return null;if(this.sphere)t=this.x0+this.a*this.k0*u(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(c+.5*i));else{var a=Math.sin(i),o=h(this.e,i,a);t=this.x0+this.a*this.k0*u(n-this.long0),r=this.y0-this.a*this.k0*Math.log(o)}return e.x=t,e.y=r,e},t.inverse=function(e){var t,r,n=e.x-this.x0,i=e.y-this.y0;if(this.sphere)r=s-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var a=Math.exp(-i/(this.a*this.k0));if(-9999===(r=o(this.e,a)))return null}return t=u(this.long0+n/(this.a*this.k0)),e.x=t,e.y=r,e},t.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},function(e,t,r){"use strict";var n=[r(393),r(392)],i={},a=[];function o(e,t){var r=a.length;return e.names?((a[r]=e).names.forEach(function(e){i[e.toLowerCase()]=r}),this):(console.log(t),!0)}t.add=o,t.get=function(e){if(!e)return!1;var t=e.toLowerCase();return"undefined"!=typeof i[t]&&a[i[t]]?a[i[t]]:void 0},t.start=function(){n.forEach(o)}},function(e,t,r){"use strict";t.ft={to_meter:.3048},t["us-ft"]={to_meter:1200/3937}},function(e,t,r){"use strict";t.greenwich=0,t.lisbon=-9.131906111111,t.paris=2.337229166667,t.bogota=-74.080916666667,t.madrid=-3.687938888889,t.rome=12.452333333333,t.bern=7.439583333333,t.jakarta=106.807719444444,t.ferro=-17.666666666667,t.brussels=4.367975,t.stockholm=18.058277777778,t.athens=23.7163375,t.oslo=10.722916666667},function(e,t,r){"use strict";e.exports=function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}},function(e,t,r){"use strict";var n=r(165),i=r(163),a=r(164);e.exports=function(e){return"string"!=typeof e?e:e in n?n[e]:(r=e,["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"].reduce(function(e,t){return e+1+r.indexOf(t)},0)?i(e):"+"===e[0]?a(e):void 0);var r}},function(e,t,r){"use strict";var n=r(100),i=r(162),a=n("WGS84");function o(e,t,r){var n;return Array.isArray(r)?(n=i(e,t,r),3===r.length?[n.x,n.y,n.z]:[n.x,n.y]):i(e,t,r)}function s(e){return e instanceof n?e:e.oProj?e.oProj:n(e)}e.exports=function(t,r,e){t=s(t);var n,i=!1;return void 0===r?(r=t,t=a,i=!0):("undefined"!=typeof r.x||Array.isArray(r))&&(e=r,r=t,t=a,i=!0),r=s(r),e?o(t,r,e):(n={forward:function(e){return o(t,r,e)},inverse:function(e){return o(r,t,e)}},i&&(n.oProj=r),n)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeTileVersion=t.ChangeTileVersion=undefined;var n,i=r(2),a=(n=i)&&n.__esModule?n:{"default":n};r(4);var o=r(156);var s=t.ChangeTileVersion=a["default"].Control.extend({options:{layer:null,position:"topleft",title:"switch tile version",tooltip:"top",collapsed:!0,nextText:"+",lastText:"-",ico:"V",orientation:"horizontal","switch":!0},onAdd:function(){"vertical"!==this.options.orientation&&(this.options.orientation="horizontal");var e=this._initLayout();return this.options.layer&&this.setLayer(this.options.layer),e},setContent:function(e){var t=a["default"].Util.extend({},e);this.setVersionName(t.desc).setToolTip(t.desc)},setVersionName:function(e){var t=e;return e||(t=this.getValue()),this._sliderValue.innerHTML=t,this},setToolTip:function(e){return this.tooltip.innerHTML=e,this},updateLength:function(e){0<e&&(this.length=e,this.max=this.length-1,this.slider.setAttribute("max",this.max))},setLayer:function(e){e&&(this.options.layer=e);var r=this,t=r.options.layer;t.on("tilesetsinfoloaded",function(e){var t=e&&e.tileVersions;r.update(t)}),t.on("tileversionschanged",function(e){var t=e&&e.tileVersion;r.setContent(t)}),r.getTileSetsInfo()},update:function(e){this.tileVersions=e,this.updateLength(this.tileVersions.length)},getTileSetsInfo:function(){var t=this;t.options.layer&&new o.MapService(t.options.layer._url).getTilesets(function(e){t.options.layer.setTileSetsInfo(e.result)})},removeLayer:function(){this.options.layer=null},nextTilesVersion:function(){return this.firstLoad?(this.options.layer.nextTilesVersion(),this.firstLoad=!1):parseInt(this.slider.value)>this.max-1||(this.slider.value=parseInt(this.slider.value)+1,this.options.layer.nextTilesVersion()),this},lastTilesVersion:function(){return parseInt(this.slider.value)<this.min+1||(this.slider.value=parseInt(this.slider.value)-1,this.options.layer.lastTilesVersion()),this},tilesVersion:function(e){for(var t=this.options.layer,r=this.tileVersions,n=r.length,i=0;i<n;i++)if(r[i].name==e){t.updateCurrentTileSetsIndex(i),t.changeTilesVersion();break}},getValue:function(){return this.slider.value},getVersion:function(){var e=this.tileVersions[this.getValue()];return e&&e.name},_initLayout:function(){var e="leaflet-control-ctv";this._container=a["default"].DomUtil.create("div",e+" "+e+"-"+this.options.orientation),this._sliderBtn=a["default"].DomUtil.create("a",e+"-toggle",this._container),this._sliderBtn.setAttribute("title",this.options.title),this._sliderBtn.innerHTML=this.options.ico,this._sliderValue=a["default"].DomUtil.create("p",e+"-value",this._container),this._sliderValue.innerHTML=this.options.ico;var t="leaflet-ctv-slider";return this._sliderContent=a["default"].DomUtil.create("div",t+"-main  tooltip",this._container),this.tooltip=a["default"].DomUtil.create("span","tooltip-text  tooltip-"+this.options.tooltip,this._sliderContent),this.tooltip.innerHTML=this.options.ico,this.options["switch"]&&(this._next=a["default"].DomUtil.create("a",t+"-incdec "+t+"-next",this._sliderContent),this._next.innerHTML=this.options.nextText,a["default"].DomEvent.on(this._next,"click",this.nextTilesVersion,this),a["default"].DomUtil.addClass(this._container,e+"-incdec")),this._sliderContainer=a["default"].DomUtil.create("div",t+"-container",this._sliderContent),this.slider=a["default"].DomUtil.create("input",t,this._sliderContainer),this.min=null==this.min||isNaN(this.min)?0:parseInt(this.min),this.slider.setAttribute("title",this.options.title),this.slider.setAttribute("id","slider"),this.slider.setAttribute("type","range"),this.slider.setAttribute("min",this.min),this.slider.setAttribute("max",0),this.slider.setAttribute("step",1),this.slider.setAttribute("value",0),this.firstLoad=!0,"oninput"in this.slider||"onchange"in this.slider?a["default"].DomEvent.on(this.slider,"change",this._tilesVersion,this):this.slider.onpropertychange=this._tilesVersion,this.options["switch"]&&(this._last=a["default"].DomUtil.create("a",t+"-incdec "+t+"-last",this._sliderContent),this._last.innerHTML=this.options.lastText,a["default"].DomEvent.on(this._last,"click",this.lastTilesVersion,this)),"vertical"===this.options.orientation?(this.slider.style.width="170px",this._sliderContainer.style.height="170px"):this._sliderContainer.style.width="150px",a["default"].DomEvent.disableClickPropagation(this._container),this.options.collapsed?(a["default"].Browser.android||a["default"].DomEvent.on(this._container,"mouseenter",this._expand,this).on(this._container,"mouseleave",this._collapse,this),a["default"].Browser.touch?a["default"].DomEvent.on(this._sliderBtn,"click",a["default"].DomEvent.stop).on(this._sliderBtn,"click",this._expand,this):a["default"].DomEvent.on(this._sliderBtn,"focus",this._expand,this)):this._expand(),this._container},_expand:function(){a["default"].DomUtil.addClass(this._container,"leaflet-control-ctv-expanded")},_collapse:function(){a["default"].DomUtil.removeClass(this._container,"leaflet-control-ctv-expanded")},_tilesVersion:function(){var e=this.getVersion();this.tilesVersion(e)}});a["default"].Map.mergeOptions({changeTileVersionControl:!1}),a["default"].Map.addInitHook(function(){this.options.changeTileVersionControl&&(this.changeTileVersionControl=new s,this.addControl(this.changeTileVersionControl))});var l=t.changeTileVersion=function(e){return new s(e)};a["default"].supermap.control.changeTileVersion=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logo=t.Logo=t.changeTileVersion=t.ChangeTileVersion=undefined;var n=r(400),i=r(356);t.ChangeTileVersion=n.ChangeTileVersion,t.changeTileVersion=n.changeTileVersion,t.Logo=i.Logo,t.logo=i.logo},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmicStar=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(12),S=r(11);t.SmicStar=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.type="smicstar",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicStar",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.Shape),n(r,[{key:"destroy",value:function(){this.type=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.n;if(n&&!(n<2)){var i=S.SUtil.Util_math.sin,a=S.SUtil.Util_math.cos,o=Math.PI,s=t.x+r[0],l=t.y+r[1],u=t.r,c=t.r0;null==c&&(c=4<n?u*a(2*o/n)/a(o/n):u/3);var h=o/n,f=-o/2,p=s+u*a(f),y=l+u*i(f);f+=h;var d=t.pointList=[];d.push([p,y]);for(var v,m=0,g=2*n-1;m<g;m++)v=m%2==0?c:u,d.push([s+v*a(f),l+v*i(f)]),f+=h;d.push([p,y]),e.moveTo(d[0][0],d[0][1]);for(var b=0;b<d.length;b++)e.lineTo(d[b][0],d[b][1]);e.closePath()}}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition;return t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+r[0]-e.r-t/2),y:Math.round(e.y+r[1]-e.r-t/2),width:2*e.r+t,height:2*e.r+t},e.__rect}}]),r}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmicRing=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(12);t.SmicRing=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.type="smicring",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRing",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.Shape),n(r,[{key:"destroy",value:function(){this.type=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;e.arc(t.x+r[0],t.y+r[1],t.r,0,2*Math.PI,!1),e.moveTo(t.x+r[0]+t.r0,t.y+r[1]),e.arc(t.x+r[0],t.y+r[1],t.r0,0,2*Math.PI,!0)}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition;return t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+r[0]-e.r-t/2),y:Math.round(e.y+r[1]-e.r-t/2),width:2*e.r+t,height:2*e.r+t},e.__rect}}]),r}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmicIsogon=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(12),g=r(11);t.SmicIsogon=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.type="smicisogon",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicIsogon",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.Shape),n(r,[{key:"destroy",value:function(){this.type=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=g.SUtil.Util_math.sin,i=g.SUtil.Util_math.cos,a=Math.PI,o=t.n;if(o&&!(o<2)){var s=t.x+r[0],l=t.y+r[1],u=t.r,c=2*a/o,h=-a/2,f=s+u*i(h),p=l+u*n(h);h+=c;var y=t.pointList=[];y.push([f,p]);for(var d=0,v=o-1;d<v;d++)y.push([s+u*i(h),l+u*n(h)]),h+=c;y.push([f,p]),e.moveTo(y[0][0],y[0][1]);for(var m=0;m<y.length;m++)e.lineTo(y[m][0],y[m][1]);e.closePath()}}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition;return t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+r[0]-e.r-t/2),y:Math.round(e.y+r[1]-e.r-t/2),width:2*e.r+t,height:2*e.r+t},e.__rect}}]),r}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmicEllipse=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(12);t.SmicEllipse=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.type="smicellipse",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicEllipse",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.Shape),n(r,[{key:"destroy",value:function(){this.type=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.x+r[0],i=t.y+r[1],a=t.a,o=t.b,s=.5522848*a,l=.5522848*o;e.moveTo(n-a,i),e.bezierCurveTo(n-a,i-l,n-s,i-o,n,i-o),e.bezierCurveTo(n+s,i-o,n+a,i-l,n+a,i),e.bezierCurveTo(n+a,i+l,n+s,i+o,n,i+o),e.bezierCurveTo(n-s,i+o,n-a,i+l,n-a,i),e.closePath()}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition;return t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+r[0]-e.a-t/2),y:Math.round(e.x+r[1]-e.b-t/2),width:2*e.a+t,height:2*e.b+t},e.__rect}}]),r}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LevelRenderer=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(175);var s=t.LevelRenderer=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),r._instances={},r.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer"}return n(r,[{key:"destroy",value:function(){this.dispose(),this.version=null}},{key:"init",value:function(e){var t=new o.Render(a.Util.createUniqueID("LRenderer_"),e);return r._instances[t.id]=t}},{key:"dispose",value:function(e){if(e)e.dispose(),this.delInstance(e.id);else{for(var t in r._instances)r._instances[t].dispose();r._instances={}}return this}},{key:"getInstance",value:function(e){return r._instances[e]}},{key:"delInstance",value:function(e){return delete r._instances[e],this}}]),r}();i.SuperMap.LevelRenderer=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SUtil=t.LevelRendererVector=t.Util=t.Transformable=t.Storage=t.SmicText=t.SmicStar=t.SmicSector=t.SmicRing=t.SmicRectangle=t.SmicPolygon=t.SmicPoint=t.SmicIsogon=t.SmicImage=t.SmicEllipse=t.SmicCircle=t.SmicBrokenLine=t.Shape=t.PaintLayer=t.Painter=t.Matrix=t.Math=t.Log=t.Http=t.Handler=t.Group=t.Eventful=t.LevelRendererEvent=t.Env=t.Easing=t.LevelRendererCurve=t.Config=t.ComputeBoundingBox=t.Color=t.Clip=t.Area=t.Animator=t.Animation=t.Render=t.LevelRenderer=undefined;var n=r(406),i=r(175),a=r(170),o=r(186),s=r(169),l=r(106),u=r(185),c=r(68),h=r(70),f=r(168),p=r(184),y=r(183),d=r(55),v=r(173),m=r(171),g=r(182),b=r(181),S=r(180),_=r(179),P=r(172),O=r(12),T=r(104),w=r(178),M=r(405),C=r(103),x=r(404),E=r(107),A=r(67),L=r(102),k=r(403),j=r(177),F=r(402),I=r(105),R=r(174),N=r(71),D=r(30),G=r(69),B=r(11);t.LevelRenderer=n.LevelRenderer,t.Render=i.Render,t.Animation=a.Animation,t.Animator=a.Animator,t.Area=o.Area,t.Clip=s.Clip,t.Color=l.Color,t.ComputeBoundingBox=u.ComputeBoundingBox,t.Config=c.Config,t.LevelRendererCurve=h.Curve,t.Easing=f.Easing,t.Env=p.Env,t.LevelRendererEvent=y.Event,t.Eventful=d.Eventful,t.Group=v.Group,t.Handler=m.Handler,t.Http=g.Http,t.Log=b.Log,t.Math=S.Math,t.Matrix=_.Matrix,t.Painter=P.Painter,t.PaintLayer=P.PaintLayer,t.Shape=O.Shape,t.SmicBrokenLine=T.SmicBrokenLine,t.SmicCircle=w.SmicCircle,t.SmicEllipse=M.SmicEllipse,t.SmicImage=C.SmicImage,t.SmicIsogon=x.SmicIsogon,t.SmicPoint=E.SmicPoint,t.SmicPolygon=A.SmicPolygon,t.SmicRectangle=L.SmicRectangle,t.SmicRing=k.SmicRing,t.SmicSector=j.SmicSector,t.SmicStar=F.SmicStar,t.SmicText=I.SmicText,t.Storage=R.Storage,t.Transformable=N.Transformable,t.Util=D.Util,t.LevelRendererVector=G.Vector,t.SUtil=B.SUtil},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureTheme=t.Sector=t.FeatureRectangle=t.FeaturePolygon=t.Point=t.FeatureLine=t.Label=t.Image=t.FeatureCircle=t.ShapeParameters=t.ShapeFactory=undefined;var n=r(24),i=r(23),a=r(108),o=r(187),s=r(188),l=r(109),u=r(74),c=r(73),h=r(189),f=r(72),p=r(66);t.ShapeFactory=n.ShapeFactory,t.ShapeParameters=i.ShapeParameters,t.FeatureCircle=a.Circle,t.Image=o.Image,t.Label=s.Label,t.FeatureLine=l.Line,t.Point=u.Point,t.FeaturePolygon=c.Polygon,t.FeatureRectangle=h.Rectangle,t.Sector=f.Sector,t.FeatureTheme=p.Theme},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeVector=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),l=r(26),m=r(1),a=r(66),u=r(305),c=r(22),h=r(31),f=r(44),p=r(21),y=r(61),d=r(38),v=r(59),g=r(60),b=r(130),S=r(129),_=r(107),P=r(104),o=r(105),O=r(102),T=r(67),w=r(45);function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=t.ThemeVector=function(e){function s(e,t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var a=M(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,t));if(!e.geometry)return M(a);if(!(e.geometry instanceof l.Geometry))return M(a);a.dataBounds=e.geometry.getBounds(),a.nodesClipPixel=2,a.isHoverAble=!0,a.isMultiHover=!0,a.isClickAble=!0,a.highlightStyle=null,a.shapeOptions={},a.style=r||{},a.CLASS_NAME="SuperMap.Feature.Theme.Vector",a.style=r||{},n&&m.Util.copyAttributesWithClip(a,n,["shapeOptions","dataBounds"]),i&&m.Util.copyAttributesWithClip(a.shapeOptions,i);var o=e.geometry;return a.lonlat=a.dataBounds.getCenterLonLat(),a.location=a.getLocalXY(a.lonlat),o instanceof d.LinearRing?a.lineToTF(o):o instanceof p.LineString?a.lineToTF(o):o instanceof b.Curve||(o instanceof f.MultiPoint?a.multiPointToTF(o):o instanceof y.MultiLineString?a.multiLineStringToTF(o):o instanceof g.MultiPolygon?a.multiPolygonToTF(o):o instanceof v.Polygon?a.polygonToTF(o):o instanceof h.Collection||(o instanceof c.Point?a.pointToTF(o):o instanceof u.Rectangle?a.rectangleToTF(o):o instanceof S.GeoText&&a.geoTextToTF(o))),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,a.Theme),n(s,[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)}(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"destroy",this).call(this)}},{key:"lineToTF",value:function(e){for(var t=e.components,r=[],n=[],i=this.location,a=[],o=this.nodesClipPixel,s=0;s<t.length;s++){var l=t[s];if(n=[],r=this.getLocalXY(l),n[0]=r[0]-i[0],n[1]=r[1]-i[1],0<a.length){var u=a[a.length-1];if(Math.abs(u[0]-n[0])<=o&&Math.abs(u[1]-n[1])<=o)continue}a.push(n)}if(a.length<2)return null;var c=new Object;(c=m.Util.copyAttributesWithClip(c,this.style,["pointList"])).pointList=a;var h=new P.SmicBrokenLine({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(h.highlightStyle=this.highlightStyle),h.refOriginalPosition=this.location,h.refDataID=this.data.id,h.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&m.Util.copyAttributesWithClip(h,this.shapeOptions),this.shapes.push(h)}},{key:"multiPointToTF",value:function(e){for(var t=e.components,r=[],n=[],i=this.location,a=[],o=this.nodesClipPixel,s=0;s<t.length;s++){var l=t[s];if(n=[],r=this.getLocalXY(l),n[0]=r[0]-i[0],n[1]=r[1]-i[1],0<a.length){var u=a[a.length-1];if(Math.abs(u[0]-n[0])<=o&&Math.abs(u[1]-n[1])<=o)continue}a.push(n);var c=new Object;c.r=6,(c=m.Util.copyAttributesWithClip(c,this.style)).x=n[0],c.y=n[1];var h=new _.SmicPoint({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(h.highlightStyle=this.highlightStyle),h.refOriginalPosition=i,h.refDataID=this.data.id,h.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&m.Util.copyAttributesWithClip(h,this.shapeOptions),this.shapes.push(h)}}},{key:"multiLineStringToTF",value:function(e){for(var t=e.components,r=0;r<t.length;r++){var n=t[r];this.lineToTF(n)}}},{key:"multiPolygonToTF",value:function(e){for(var t=e.components,r=0;r<t.length;r++){var n=t[r];this.polygonToTF(n)}}},{key:"pointToTF",value:function(e){var t=this.location,r=this.getLocalXY(e),n=new Object;n.r=6,(n=m.Util.copyAttributesWithClip(n,this.style)).x=r[0]-t[0],n.y=r[1]-t[1];var i=new _.SmicPoint({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(i.highlightStyle=this.highlightStyle),i.refOriginalPosition=t,i.refDataID=this.data.id,i.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&m.Util.copyAttributesWithClip(i,this.shapeOptions),this.shapes.push(i)}},{key:"polygonToTF",value:function(e){for(var t=e.components,r=[],n=[],i=this.location,a=[],o=[],s=[],l=this.nodesClipPixel,u=0;u<t.length;u++){var c=t[u].components;if(0===u){a=[];for(var h=0;h<c.length;h++){if(n=[],r=this.getLocalXY(c[h]),n[0]=r[0]-i[0],n[1]=r[1]-i[1],0<a.length){var f=a[a.length-1];if(Math.abs(f[0]-n[0])<=l&&Math.abs(f[1]-n[1])<=l)continue}a.push(n)}}else{o=[];for(var p=0;p<c.length;p++){if(n=[],r=this.getLocalXY(c[p]),n[0]=r[0]-i[0],n[1]=r[1]-i[1],0<o.length){var y=o[o.length-1];if(Math.abs(y[0]-n[0])<=l&&Math.abs(y[1]-n[1])<=l)continue}o.push(n)}}o.length<2||s.push(o)}if(!(a.length<2)){var d={};(d=m.Util.copyAttributesWithClip(d,this.style,["pointList"])).pointList=a;var v=new T.SmicPolygon({style:d,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(v.highlightStyle=this.highlightStyle),v.refOriginalPosition=this.location,v.refDataID=this.data.id,v.isHoverByRefDataID=this.isMultiHover,0<s.length&&(v.holePolygonPointLists=s),this.shapeOptions&&m.Util.copyAttributesWithClip(v,this.shapeOptions),this.shapes.push(v)}}},{key:"rectangleToTF",value:function(e){var t=this.location,r=new w.LonLat(e.x,e.y),n=this.layer.map.getResolution(),i=this.getLocalXY(r),a=new Object;a.r=6,(a=m.Util.copyAttributesWithClip(a,this.style)).x=i[0]-t[0],a.y=i[1]-t[1]-2*e.width/n,a.width=e.width/n,a.height=e.height/n;var o=new O.SmicRectangle({style:a,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=t,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&m.Util.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"geoTextToTF",value:function(e){var t=this.location,r=this.getLocalXY(e),n=new Object;n.r=6,(n=m.Util.copyAttributesWithClip(n,this.style,["x","y","text"])).x=r[0]-t[0],n.y=r[1]-t[1],n.text=e.text;var i=new o.SmicText({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(i.highlightStyle=this.highlightStyle),i.refOriginalPosition=t,i.refDataID=this.data.id,i.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&m.Util.copyAttributesWithClip(i,this.shapeOptions),this.shapes.push(i)}},{key:"updateAndAddShapes",value:function(){var e=this.getLocalXY(this.lonlat);this.location=e;for(var t=this.layer.renderer,r=0,n=this.shapes.length;r<n;r++){var i=this.shapes[r];i.refOriginalPosition=e,t.addShape(i)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}]),s}();i.SuperMap.Feature.Theme.ThemeVector=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ring=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),b=r(24),S=r(72),a=r(29);var o=t.Ring=function(e){function o(e,t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t,r,n,i));return a.CLASS_NAME="SuperMap.Feature.Theme.Ring",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a.Graph),n(o,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],t=this.setting;t.useBackground&&this.shapes.push(b.ShapeFactory.Background(this.shapeFactory,this.chartBox,t));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,i=0;i<r.length;i++)if(r[i]<n[0]||r[i]>n[1])return;for(var a=0,o=0;o<r.length;o++)a+=Math.abs(r[o]);this.DVBUnitValue=360/a;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,h=u,f=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=0<=t.innerRingRadius&&t.innerRingRadius<f,y="undefined"!=typeof t.innerRingRadius&&!isNaN(t.innerRingRadius)&&p?t.innerRingRadius:0,d=0;d<r.length;d++){var v=Math.abs(r[d]);c=0===d?u+v*s:d===v.length-1?h:u+v*s;var m=new S.Sector(l[0],l[1],f,u,c,y);if("undefined"==typeof t.sectorStyleByFields){var g=d%e.length;m.style=b.ShapeFactory.ShapeStyleTool(null,t.sectorStyle,e,null,g)}else m.style=b.ShapeFactory.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,d,r[d]);m.highlightStyle=b.ShapeFactory.ShapeStyleTool(null,t.sectorHoverStyle),"undefined"!=typeof t.sectorHoverAble&&(m.hoverable=t.sectorHoverAble),"undefined"!=typeof t.sectorClickAble&&(m.clickable=t.sectorClickAble),m.refDataID=this.data.id,m.dataInfo={field:this.fields[d],value:r[d]},this.shapes.push(this.shapeFactory.createShape(m)),u=c}this.shapesConvertToRelativeCoordinate()}}}}]),o}();i.SuperMap.Feature.Theme.Ring=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Point=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),f=r(24),p=r(74),a=r(29);var o=t.Point=function(e){function s(e,t,r,n,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,t,r,n,i,a));return o.CLASS_NAME="SuperMap.Feature.Theme.Point",o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,a.Graph),n(s,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||("undefined"==typeof e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,i=this.dataValues,a=this.calculateXShapeInfo();if(a){var o,s,l=a.xPositions;("undefined"==typeof e.useBackground||e.useBackground)&&this.shapes.push(f.ShapeFactory.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(f.ShapeFactory.GraphAxis(this.shapeFactory,t,e,a));for(var u=0,c=i.length;u<c;u++){if(i[u]<r[0]||i[u]>r[1])return null;o=l[u],s=t[1]-(i[u]-r[0])/n;var h=new p.Point(o,s);h.style=f.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,u,i[u]),h.highlightStyle=f.ShapeFactory.ShapeStyleTool(null,e.pointHoverStyle),"undefined"!=typeof e.pointHoverAble&&(h.hoverable=e.pointHoverAble),"undefined"!=typeof e.pointClickAble&&(h.clickable=e.pointClickAble),h.refDataID=this.data.id,h.dataInfo={field:this.fields[u],value:i[u]},this.shapes.push(this.shapeFactory.createShape(h))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var i=[],a=this.DVBWidth,o=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=a-((e=r.xShapeBlank)[0]+e[1]);if(s<=n)return null;o=s/(n-1)}else e=[o=a/(n+1),o,o];for(var l=0,u=0;u<n;u++)0==u?l=e[0]:l+=o,i.push(t[0]+l);return{xPositions:i,width:0}}}]),s}();i.SuperMap.Feature.Theme.Point=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pie=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),m=r(24),g=r(72),a=r(29);var o=t.Pie=function(e){function o(e,t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t,r,n,i));return a.CLASS_NAME="SuperMap.Feature.Theme.Pie",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a.Graph),n(o,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting,t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){e.useBackground&&this.shapes.push(m.ShapeFactory.Background(this.shapeFactory,this.chartBox,e));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,i=0;i<r.length;i++)if(r[i]<n[0]||r[i]>n[1])return;for(var a=0,o=0;o<r.length;o++)a+=Math.abs(r[o]);this.DVBUnitValue=360/a;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,h=u,f=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=0;p<r.length;p++){var y=Math.abs(r[p]);360<=(c=0===p?u+y*s:p===y.length-1?h:u+y*s)-u&&(c=359.9999999);var d=new g.Sector(l[0],l[1],f,u,c);if("undefined"==typeof e.sectorStyleByFields){var v=p%t.length;d.style=m.ShapeFactory.ShapeStyleTool(null,e.sectorStyle,t,null,v)}else d.style=m.ShapeFactory.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,p,r[p]);d.highlightStyle=m.ShapeFactory.ShapeStyleTool(null,e.sectorHoverStyle),"undefined"!=typeof e.sectorHoverAble&&(d.hoverable=e.sectorHoverAble),"undefined"!=typeof e.sectorClickAble&&(d.clickable=e.sectorClickAble),d.refDataID=this.data.id,d.dataInfo={field:this.fields[p],value:r[p]},this.shapes.push(this.shapeFactory.createShape(d)),u=c}this.shapesConvertToRelativeCoordinate()}}}}]),o}();i.SuperMap.Feature.Theme.Pie=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Line=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),m=r(24),g=r(74),b=r(109),a=r(29);var o=t.Line=function(e){function s(e,t,r,n,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,t,r,n,i,a));return o.CLASS_NAME="SuperMap.Feature.Theme.Line",o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,a.Graph),n(s,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||("undefined"==typeof e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,i=this.dataValues;if(!(i.length<1)){var a=this.calculateXShapeInfo();if(a){var o,s,l=a.xPositions;("undefined"==typeof e.useBackground||e.useBackground)&&this.shapes.push(m.ShapeFactory.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(m.ShapeFactory.GraphAxis(this.shapeFactory,t,e,a));for(var u=[],c=[],h=0,f=i.length;h<f;h++){if(i[h]<r[0]||i[h]>r[1])return null;o=l[h],s=t[1]-(i[h]-r[0])/n;var p=new g.Point(o,s);p.style=m.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,h,i[h]),p.highlightStyle=m.ShapeFactory.ShapeStyleTool(null,e.pointHoverStyle),"undefined"!=typeof e.pointHoverAble&&(p.hoverable=e.pointHoverAble),"undefined"!=typeof e.pointClickAble&&(p.clickable=e.pointClickAble),p.refDataID=this.data.id,p.dataInfo={field:this.fields[h],value:i[h]},c.push(this.shapeFactory.createShape(p));var y=[o,s];u.push(y)}var d=new b.Line(u);d.style=m.ShapeFactory.ShapeStyleTool({strokeColor:"#ee9900"},e.lineStyle),d.clickable=!1,d.hoverable=!1;var v=this.shapeFactory.createShape(d);this.shapes.push(v),this.shapes=this.shapes.concat(c),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var i=[],a=this.DVBWidth,o=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=a-((e=r.xShapeBlank)[0]+e[1]);if(s<=n)return null;o=s/(n-1)}else e=[o=a/(n+1),o,o];for(var l=0,u=0;u<n;u++)0==u?l=e[0]:l+=o,i.push(t[0]+l);return{xPositions:i,width:0}}}]),s}();i.SuperMap.Feature.Theme.Line=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Circle=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),u=r(66),c=r(108),h=r(24),a=r(176);var o=t.Circle=function(e){function o(e,t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t,r,n,i));return a.CLASS_NAME="SuperMap.Feature.Theme.Circle",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a.RankSymbol),n(o,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var e=this.setting;if(!e.codomain)return!1;var t="undefined"==typeof e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,r=u.Theme.getDataValues(this.data,this.fields,t);this.dataValues=r||[];var n=this.dataValues;e.maxR||(e.maxR=100),e.minR||(e.minR=0);var i=this.DVBCodomain;i&&0<i[1]-i[0]?this.DVBUnitValue=e.maxR/(i[1]-i[0]):this.DVBUnitValue=e.maxR;var a=this.DVBUnitValue,o=n[0]*a+e.minR;if(this.width=2*o,this.height=2*o,this.initBaseParameter()&&(!i||!(n[0]<i[0]||n[0]>i[1]))){var s=this.DVBCenterPoint,l=new c.Circle(s[0],s[1],o);l.style=h.ShapeFactory.ShapeStyleTool(null,e.circleStyle,null,null,0),"undefined"!=typeof e.fillColor?l.style.fillColor=e.fillColor:l.style.fillColor="#ff9277",l.highlightStyle=h.ShapeFactory.ShapeStyleTool(null,e.circleHoverStyle),"undefined"!=typeof e.circleHoverAble&&(l.hoverable=e.circleHoverAble),"undefined"!=typeof e.circleClickAble&&(l.clickable=e.circleClickAble),l.refDataID=this.data.id,l.dataInfo={field:this.fields[0],r:o,value:n[0]},this.shapes.push(this.shapeFactory.createShape(l)),this.shapesConvertToRelativeCoordinate()}}}]),o}();i.SuperMap.Feature.Theme.Circle=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bar3D=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),S=r(1),_=r(24),P=r(73),a=r(29);var o=t.Bar3D=function(e){function o(e,t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t,r,n,i));return a.CLASS_NAME="SuperMap.Feature.Theme.Bar3D",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a.Graph),n(o,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||("undefined"==typeof e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,25,20,20]:e.dataViewBoxParameter=[5,5,5,5]),e.axisUseArrow="undefined"==typeof e.axisUseArrow||e.axisUseArrow,e.axisXLabelsOffset="undefined"!=typeof e.axisXLabelsOffset?e.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var t=this.DVBCodomain;this.DVBUnitValue=(t[1]-t[0])/this.DVBHeight;var r=this.dataViewBox,n=this.dataValues;if(!(n.length<1)){for(var i=0,a=n.length;i<a;i++)if(n[i]<t[0]||n[i]>t[1])return;var o=this.calculateXShapeInfo();if(o){var s=o.xPositions,l=o.width;("undefined"==typeof e.useBackground||e.useBackground)&&this.shapes.push(_.ShapeFactory.Background(this.shapeFactory,this.chartBox,e)),(!e.axis3DParameter||isNaN(e.axis3DParameter)||e.axis3DParameter<15)&&(e.axis3DParameter=20),("undefined"==typeof e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(_.ShapeFactory.GraphAxis(this.shapeFactory,r,e,o)));for(var u=e.bar3DParameter&&!isNaN(e.bar3DParameter)?e.bar3DParameter:10,c=0;c<n.length;c++){var h=r[1]-(n[c]-t[0])/this.DVBUnitValue,f=s[c]-l/2,p=s[c]+l/2,y=[[f,h],[p,h],[p-u,h+u],[f-u,h+u]],d=[[p,h],[p-u,h+u],[p-u,r[1]+u],[p,r[1]]],v=[[f-u,r[1]+u],[p-u,r[1]+u],[p-u,h+u],[f-u,h+u]];u<=0&&(v=[[f,r[1]],[p,r[1]],[p,h],[f,h]]);var m=new P.Polygon(y),g=new P.Polygon(d),b=new P.Polygon(v);e.barSideStyle=e.barSideStyle?e.barSideStyle:e.barFaceStyle,e.barSideStyleByFields=e.barSideStyleByFields?e.barSideStyleByFields:e.barFaceStyleByFields,e.barSideStyleByCodomain=e.barSideStyleByCodomain?e.barSideStyleByCodomain:e.barFaceStyleByCodomain,e.barTopStyle=e.barTopStyle?e.barTopStyle:e.barFaceStyle,e.barTopStyleByFields=e.barTopStyleByFields?e.barTopStyleByFields:e.barFaceStyleByFields,e.barTopStyleByCodomain=e.barTopStyleByCodomain?e.barTopStyleByCodomain:e.barFaceStyleByCodomain,b.style=_.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barFaceStyle,e.barFaceStyleByFields,e.barFaceStyleByCodomain,c,n[c]),g.style=_.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barSideStyle,e.barSideStyleByFields,e.barSideStyleByCodomain,c,n[c]),m.style=_.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barTopStyle,e.barTopStyleByFields,e.barTopStyleByCodomain,c,n[c]),e.barSideHoverStyle=e.barSideHoverStyle?e.barSideHoverStyle:e.barFaceHoverStyle,e.barTopHoverStyle=e.barTopHoverStyle?e.barTopHoverStyle:e.barFaceHoverStyle,b.highlightStyle=_.ShapeFactory.ShapeStyleTool({stroke:!0},e.barFaceHoverStyle),g.highlightStyle=_.ShapeFactory.ShapeStyleTool({stroke:!0},e.barSideHoverStyle),m.highlightStyle=_.ShapeFactory.ShapeStyleTool({stroke:!0},e.barTopHoverStyle),m.refDataID=g.refDataID=b.refDataID=this.data.id,m.isHoverByRefDataID=g.isHoverByRefDataID=b.isHoverByRefDataID=!0,m.refDataHoverGroup=g.refDataHoverGroup=b.refDataHoverGroup=S.Util.createUniqueID("lr_shg"),m.dataInfo=g.dataInfo=b.dataInfo={field:this.fields[c],value:n[c]},"undefined"!=typeof e.barHoverAble&&(m.hoverable=g.hoverable=b.hoverable=e.barHoverAble),"undefined"!=typeof e.barClickAble&&(m.clickable=g.clickable=b.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(g)),this.shapes.push(this.shapeFactory.createShape(m)),this.shapes.push(this.shapeFactory.createShape(b))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var i=[],a=0,o=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=o-((e=r.xShapeBlank)[0]+e[2]+(n-1)*e[1]);if(s<=n)return null;a=s/n}else e=[a=o/(2*n+1),a,a];for(var l=0,u=0;u<n;u++)0==u?l=e[0]+a/2:l+=a+e[1],i.push(t[0]+l);return{xPositions:i,width:a}}}]),o}();i.SuperMap.Feature.Theme.Bar3D=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bar=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),d=r(24),v=r(73),h=r(106),m=r(1),a=r(29);var o=t.Bar=function(e){function o(e,t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t,r,n,i));return a.CLASS_NAME="SuperMap.Feature.Theme.Bar",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a.Graph),n(o,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},t=this.setting;if("undefined"!=typeof t.barLinearGradient&&(t.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),t.dataViewBoxParameter||("undefined"==typeof t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.dataViewBox,i=this.dataValues;if(!(i.length<1)){for(var a=0,o=i.length;a<o;a++)if(i[a]<r[0]||i[a]>r[1])return;var s=this.calculateXShapeInfo();if(s){var l=s.xPositions,u=s.width;("undefined"==typeof t.useBackground||t.useBackground)&&this.shapes.push(d.ShapeFactory.Background(this.shapeFactory,this.chartBox,t)),("undefined"==typeof t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(d.ShapeFactory.GraphAxis(this.shapeFactory,n,t,s)));for(var c=0;c<i.length;c++){var h=n[1]-(i[c]-r[0])/this.DVBUnitValue,f=[[l[c]-u/2,n[1]-1],[l[c]+u/2,n[1]-1],[l[c]+u/2,h],[l[c]-u/2,h]],p=new v.Polygon(f);if("undefined"==typeof t.showShadow||t.showShadow){if(t.barShadowStyle){var y=t.barShadowStyle;y.shadowBlur&&(e.shadowBlur=y.shadowBlur),y.shadowColor&&(e.shadowColor=y.shadowColor),y.shadowOffsetX&&(e.shadowOffsetX=y.shadowOffsetX),y.shadowOffsetY&&(e.shadowOffsetY=y.shadowOffsetY)}p.style={},m.Util.copyAttributesWithClip(p.style,e)}p.refDataID=this.data.id,p.dataInfo={field:this.fields[c],value:i[c]},"undefined"!=typeof t.barHoverAble&&(p.hoverable=t.barHoverAble),"undefined"!=typeof t.barClickAble&&(p.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(p))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var i=[],a=0,o=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=o-((e=r.xShapeBlank)[0]+e[2]+(n-1)*e[1]);if(s<=n)return null;a=s/n}else e=[a=o/(2*n+1),a,a];for(var l=0,u=0;u<n;u++)0==u?l=e[0]+a/2:l+=a+e[1],i.push(t[0]+l);return{xPositions:i,width:a}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var e=this.shapes.length,t=this.setting.barLinearGradient,r=-1,n=0;n<e;n++){var i=this.shapes[n];if("SuperMap.LevelRenderer.Shape.SmicPolygon"===i.CLASS_NAME){var a=i.style,o=this.location[0]+a.pointList[0][0],s=this.location[0]+a.pointList[1][0];++r>=t.length&&(r%=t.length);var l=t[r][0],u=t[r][1],c=(new h.Color).getLinearGradient(o,0,s,0,[[0,l],[1,u]]);i.style.color=c}}}}]),o}();i.SuperMap.Feature.Theme.Bar=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SUtil=t.LevelRendererVector=t.Util=t.Transformable=t.Storage=t.SmicText=t.SmicStar=t.SmicSector=t.SmicRing=t.SmicRectangle=t.SmicPolygon=t.SmicPoint=t.SmicIsogon=t.SmicImage=t.SmicEllipse=t.SmicCircle=t.SmicBrokenLine=t.Shape=t.PaintLayer=t.Painter=t.Matrix=t.Math=t.Log=t.Http=t.Handler=t.Group=t.Eventful=t.LevelRendererEvent=t.Env=t.Easing=t.LevelRendererCurve=t.Config=t.ComputeBoundingBox=t.Color=t.Clip=t.Area=t.Animator=t.Animation=t.Render=t.LevelRenderer=t.FeatureTheme=t.Sector=t.FeatureRectangle=t.FeaturePolygon=t.Point=t.FeatureLine=t.Label=t.Image=t.FeatureCircle=t.ShapeParameters=t.ShapeFactory=t.ThemeVector=t.Ring=t.RankSymbol=t.OverlayPoint=t.Pie=t.Line=t.Graph=t.Circle=t.Bar3D=t.Bar=undefined;var n=r(416),i=r(415),a=r(414),o=r(29),s=r(413),l=r(412),u=r(411),c=r(176),h=r(410),f=r(409),p=r(408),y=r(407);t.Bar=n.Bar,t.Bar3D=i.Bar3D,t.Circle=a.Circle,t.Graph=o.Graph,t.Line=s.Line,t.Pie=l.Pie,t.OverlayPoint=u.Point,t.RankSymbol=c.RankSymbol,t.Ring=h.Ring,t.ThemeVector=f.ThemeVector,t.ShapeFactory=p.ShapeFactory,t.ShapeParameters=p.ShapeParameters,t.FeatureCircle=p.FeatureCircle,t.Image=p.Image,t.Label=p.Label,t.FeatureLine=p.FeatureLine,t.Point=p.Point,t.FeaturePolygon=p.FeaturePolygon,t.FeatureRectangle=p.FeatureRectangle,t.Sector=p.Sector,t.FeatureTheme=p.FeatureTheme,t.LevelRenderer=y.LevelRenderer,t.Render=y.Render,t.Animation=y.Animation,t.Animator=y.Animator,t.Area=y.Area,t.Clip=y.Clip,t.Color=y.Color,t.ComputeBoundingBox=y.ComputeBoundingBox,t.Config=y.Config,t.LevelRendererCurve=y.LevelRendererCurve,t.Easing=y.Easing,t.Env=y.Env,t.LevelRendererEvent=y.LevelRendererEvent,t.Eventful=y.Eventful,t.Group=y.Group,t.Handler=y.Handler,t.Http=y.Http,t.Log=y.Log,t.Math=y.Math,t.Matrix=y.Matrix,t.Painter=y.Painter,t.PaintLayer=y.PaintLayer,t.Shape=y.Shape,t.SmicBrokenLine=y.SmicBrokenLine,t.SmicCircle=y.SmicCircle,t.SmicEllipse=y.SmicEllipse,t.SmicImage=y.SmicImage,t.SmicIsogon=y.SmicIsogon,t.SmicPoint=y.SmicPoint,t.SmicPolygon=y.SmicPolygon,t.SmicRectangle=y.SmicRectangle,t.SmicRing=y.SmicRing,t.SmicSector=y.SmicSector,t.SmicStar=y.SmicStar,t.SmicText=y.SmicText,t.Storage=y.Storage,t.Transformable=y.Transformable,t.Util=y.Util,t.LevelRendererVector=y.LevelRendererVector,t.SUtil=y.SUtil},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ThemeStyle=undefined;var i=n(0),a=n(1);var o=r.ThemeStyle=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,a.Util.extend(this,t)};i.SuperMap.ThemeStyle=o},function($,e,t){"use strict";(function(e){var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=9007199254740991,c="[object Arguments]",n="[object Function]",i="[object GeneratorFunction]",l="[object Map]",a="[object Promise]",h="[object Set]",o="[object WeakMap]",s="[object DataView]",f=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,t="object"==(void 0===e?"undefined":u(e))&&e&&e.Object===Object&&e,y="object"==("undefined"==typeof self?"undefined":u(self))&&self&&self.Object===Object&&self,d=t||y||Function("return this")();function v(t,e){return function(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}(e,function(e){return[e,t[e]]})}var m,g,b,S=Function.prototype,_=Object.prototype,P=d["__core-js_shared__"],O=(m=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",T=S.toString,w=_.hasOwnProperty,M=_.toString,C=RegExp("^"+T.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=_.propertyIsEnumerable,E=(g=Object.keys,b=Object,function(e){return g(b(e))}),A=J(d,"DataView"),L=J(d,"Map"),k=J(d,"Promise"),j=J(d,"Set"),F=J(d,"WeakMap"),I=H(A),R=H(L),N=H(k),D=H(j),G=H(F);function B(e,t){var r,n,i,a=W(e)||(i=n=r=e)&&"object"==(void 0===i?"undefined":u(i))&&Q(n)&&w.call(r,"callee")&&(!x.call(r,"callee")||M.call(r)==c)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],o=a.length,s=!!o;for(var l in e)!t&&!w.call(e,l)||s&&("length"==l||q(l,o))||a.push(l);return a}function U(e){return!(!X(e)||(t=e,O&&O in t))&&(Y(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(r){}return t}(e)?C:f).test(H(e));var t}function V(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||_,t!==n)return E(e);var t,r,n,i=[];for(var a in Object(e))w.call(e,a)&&"constructor"!=a&&i.push(a);return i}function J(e,t){var r,n,i=(n=t,null==(r=e)?undefined:r[n]);return U(i)?i:undefined}var z=function(e){return M.call(e)};function q(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||p.test(e))&&-1<e&&e%1==0&&e<t}function H(e){if(null!=e){try{return T.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(A&&z(new A(new ArrayBuffer(1)))!=s||L&&z(new L)!=l||k&&z(k.resolve())!=a||j&&z(new j)!=h||F&&z(new F)!=o)&&(z=function(e){var t=M.call(e),r="[object Object]"==t?e.constructor:undefined,n=r?H(r):undefined;if(n)switch(n){case I:return s;case R:return l;case N:return a;case D:return h;case G:return o}return t});var W=Array.isArray;function Q(e){return null!=e&&("number"==typeof(t=e.length)&&-1<t&&t%1==0&&t<=r)&&!Y(e);var t}function Y(e){var t=X(e)?M.call(e):"";return t==n||t==i}function X(e){var t=void 0===e?"undefined":u(e);return!!e&&("object"==t||"function"==t)}var K,Z=(K=function(e){return Q(e)?B(e):V(e)},function(e){var t,r,n,i,a,o,s=z(e);return s==l?(t=e,r=-1,n=Array(t.size),t.forEach(function(e,t){n[++r]=[t,e]}),n):s==h?(i=e,a=-1,o=Array(i.size),i.forEach(function(e){o[++a]=[e,e]}),o):v(e,K(e))});$.exports=Z}).call(this,t(125))},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CartoCSS=undefined;var i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),b=n(0),o=n(419),l=(i=o)&&i.__esModule?i:{"default":i};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=r.CartoCSS=function(){function t(e){u(this,t),this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"==typeof e&&(this.cartoStr=e,this.env={frames:[],errors:[],error:function(e){this.errors.push(e)}},this.parser=this.getParser(this.env),this.parse(e),this.shaders=this.toShaders())}return s(t,[{key:"getParser",value:function(a){var p,y,o,e,f,s,l,u,c,h=this;function i(){e=l[o],u=f=y}function d(){l[o]=e,u=y=f}function v(){u<y&&(l[o]=l[o].slice(y-u),u=y)}function m(e){var t,r,n,i;if(e instanceof Function)return e.call(c.parsers);if("string"==typeof e)t=p.charAt(y)===e?e:null,r=1,v();else{if(v(),!(t=e.exec(l[o])))return null;r=t[0].length}if(t){var a=y+=r;for(i=y+l[o].length-r;y<i&&(32===(n=p.charCodeAt(y))||10===n||9===n);)y++;return l[o]=l[o].slice(r+(y-a)),u=y,0===l[o].length&&o<l.length-1&&o++,"string"==typeof t?t:1===t.length?t[0]:t}}function g(e){var t,r={index:s,filename:a.filename,message:"Parse error.",line:0,column:-1};for(var n in r)0===e[n]&&(e[n]=r[n]);t=e.filename&&h.env.inputs&&h.env.inputs[e.filename]?h.env.inputs[e.filename]:p,e.line=(t.slice(0,e.index).match(/\n/g)||"").length+1;for(var i=e.index;0<=i&&"\n"!==t.charAt(i);i--)e.column++;return new Error([e.filename,e.line,e.column,e.message].join(";"))}return this.env=a=a||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},c={parse:function(e){var t,f=null;if(y=o=u=s=0,l=[],p=e.replace(/\r\n/g,"\n"),a.filename&&(h.env.inputs[a.filename]=p),l=function(e){for(var t,r,n,i,a=0,o=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,s=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,l=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,u=0,c=e[0],h=0;h<p.length;)if(o.lastIndex=h,(t=o.exec(p))&&t.index===h&&(h+=t[0].length,c.push(t[0])),n=p.charAt(h),s.lastIndex=l.lastIndex=h,(t=l.exec(p))&&t.index===h)h+=t[0].length,c.push(t[0]);else if(r||"/"!==n||"/"!==(i=p.charAt(h+1))&&"*"!==i||!(t=s.exec(p))||t.index!==h){switch(n){case"{":if(!r){u++,c.push(n);break}case"}":if(!r){u--,c.push(n),e[++a]=c=[];break}case"(":if(!r){r=!0,c.push(n);break}case")":if(r){r=!1,c.push(n);break}default:c.push(n)}h++}else h+=t[0].length,c.push(t[0]);return 0!==u&&(f={index:h-1,type:"Parse",message:0<u?"missing closing `}`":"missing opening `{`"}),e.map(function(e){return e.join("")})}([[]]),f)throw g(f);var r=function(e,t){var r=e.specificity,n=t.specificity;return r[0]!=n[0]?n[0]-r[0]:r[1]!=n[1]?n[1]-r[1]:r[2]!=n[2]?n[2]-r[2]:n[3]-r[3]};return(t=new b.SuperMap.CartoCSS.Tree.Ruleset([],m(this.parsers.primary))).root=!0,t.toList=function(t){t.error=function(e){t.errors||(t.errors=new Error("")),t.errors.message?t.errors.message+="\n"+g(e).message:t.errors.message=g(e).message},t.frames=t.frames||[];var e=this.flatten([],[],t);return e.sort(r),e},t},parsers:{primary:function(){for(var e,t=[];(e=m(this.rule)||m(this.ruleset)||m(this.comment))||m(/^[\s\n]+/)||(e=m(this.invalid));)e&&t.push(e);return t},invalid:function(){var e=m(/^[^;\n]*[;\n]/);if(e)return new b.SuperMap.CartoCSS.Tree.Invalid(e,f)},comment:function(){var e;if("/"===p.charAt(y))return"/"===p.charAt(y+1)?new b.SuperMap.CartoCSS.Tree.Comment(m(/^\/\/.*/),!0):(e=m(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new b.SuperMap.CartoCSS.Tree.Comment(e):void 0},entities:{quoted:function(){if('"'===p.charAt(y)||"'"===p.charAt(y)){var e=m(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return e?new b.SuperMap.CartoCSS.Tree.Quoted(e[1]||e[2]):void 0}},field:function(){if(m("[")){var e=m(/(^[^\]]+)/);if(m("]"))return e?new b.SuperMap.CartoCSS.Tree.Field(e[1]):void 0}},comparison:function(){var e=m(/^=~|=|!=|<=|>=|<|>/);if(e)return e},keyword:function(){var e=m(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(e)return new b.SuperMap.CartoCSS.Tree.Keyword(e)},call:function(){var e,t;if(e=/^([\w\-]+|%)\(/.exec(l[o])){if("url"===(e=e[1]))return null;y+=e.length;if(m("("),t=m(this.entities.arguments),m(")"))return e?new b.SuperMap.CartoCSS.Tree.Call(e,t,y):void 0}},arguments:function(){for(var e,t=[];e=m(this.expression);){t.push(e);if(!m(","))break}return t},literal:function(){return m(this.entities.dimension)||m(this.entities.keywordcolor)||m(this.entities.hexcolor)||m(this.entities.quoted)},url:function(){var e;if("u"===p.charAt(y)&&m(/^url\(/)){e=m(this.entities.quoted)||m(this.entities.variable)||m(/^[\-\w%@$\/.&=:;#+?~]+/)||"";return m(")")?new b.SuperMap.CartoCSS.Tree.URL("undefined"!=typeof e.value||e instanceof b.SuperMap.CartoCSS.Tree.Variable?e:new b.SuperMap.CartoCSS.Tree.Quoted(e)):new b.SuperMap.CartoCSS.Tree.Invalid(e,f,"Missing closing ) in URL.")}},variable:function(){var e,t=y;if("@"===p.charAt(y)&&(e=m(/^@[\w-]+/)))return new b.SuperMap.CartoCSS.Tree.Variable(e,t,a.filename)},hexcolor:function(){var e;if("#"===p.charAt(y)&&(e=m(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new b.SuperMap.CartoCSS.Tree.Color(e[1])},keywordcolor:function(){var e=l[o].match(/^[a-z]+/);if(e&&e[0]in b.SuperMap.CartoCSS.Tree.Reference.data.colors)return new b.SuperMap.CartoCSS.Tree.Color(b.SuperMap.CartoCSS.Tree.Reference.data.colors[m(/^[a-z]+/)])},dimension:function(){var e=p.charCodeAt(y);if(!(57<e||e<45||47===e)){var t=m(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return t?new b.SuperMap.CartoCSS.Tree.Dimension(t[1],t[2],f):void 0}}},variable:function(){var e;if("@"===p.charAt(y)&&(e=m(/^(@[\w-]+)\s*:/)))return e[1]},entity:function(){var e=m(this.entities.call)||m(this.entities.literal),t=m(this.entities.field)||m(this.entities.variable),r=m(this.entities.url)||m(this.entities.keyword);return e||t||r},end:function(){var e;return m(";")||("string"==typeof(e="}")?p.charAt(y)===e:!!e.test(l[o]))},element:function(){var e=m(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(e)return new b.SuperMap.CartoCSS.Tree.Element(e)},attachment:function(){var e=m(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(e)return e[1]},selector:function(){for(var e,t,r,n,i,a=[],o=new b.SuperMap.CartoCSS.Tree.Filterset,s=[],l=0,u=0;(r=m(this.element))||(i=m(this.zoom))||(n=m(this.filter))||(e=m(this.attachment));){if(l++,r)a.push(r);else if(i)s.push(i),u++;else if(n){var c=o.add(n);if(c)throw g({message:c,index:y-1});u++}else{if(t)throw g({message:"Encountered second attachment name.",index:y-1});t=e}var h=p.charAt(y);if("{"===h||"}"===h||";"===h||","===h)break}if(l)return new b.SuperMap.CartoCSS.Tree.Selector(o,s,a,t,u,f)},filter:function(){i();var e,t,r;if(m("[")&&(e=m(/^[a-zA-Z0-9\-_]+/)||m(this.entities.quoted)||m(this.entities.variable)||m(this.entities.keyword)||m(this.entities.field))&&(e instanceof b.SuperMap.CartoCSS.Tree.Quoted&&(e=new b.SuperMap.CartoCSS.Tree.Field(e.toString())),(t=m(this.entities.comparison))&&(r=m(this.entities.quoted)||m(this.entities.variable)||m(this.entities.dimension)||m(this.entities.keyword)||m(this.entities.field)))){if(!m("]"))throw g({message:"Missing closing ] of filter.",index:f-1});return e.is||(e=new b.SuperMap.CartoCSS.Tree.Field(e)),new b.SuperMap.CartoCSS.Tree.Filter(e,t,r,f,a.filename)}},zoom:function(){i();var e,t;if(m(/^\[\s*zoom/g)&&(e=m(this.entities.comparison))&&(t=m(this.entities.variable)||m(this.entities.dimension))&&m("]"))return new b.SuperMap.CartoCSS.Tree.Zoom(e,t,f);d()},block:function(){var e;if(m("{")&&(e=m(this.primary))&&m("}"))return e},ruleset:function(){var e,t,r=[];for(i();e=m(this.selector);){for(r.push(e);m(this.comment););if(!m(","))break;for(;m(this.comment););}if(e)for(;m(this.comment););if(0<r.length&&(t=m(this.block))){if(1===r.length&&r[0].elements.length&&"Map"===r[0].elements[0].value){var n=new b.SuperMap.CartoCSS.Tree.Ruleset(r,t);return n.isMap=!0,n}return new b.SuperMap.CartoCSS.Tree.Ruleset(r,t)}d()},rule:function(){var e,t,r=p.charAt(y);if(i(),"."!==r&&"#"!==r&&(e=m(this.variable)||m(this.property))){if((t=m(this.value))&&m(this.end))return new b.SuperMap.CartoCSS.Tree.Rule(e,t,f,a.filename);s=y,d()}},font:function(){for(var e,t=[],r=[];e=m(this.entity);)r.push(e);if(t.push(new b.SuperMap.CartoCSS.Tree.Expression(r)),m(","))for(;(e=m(this.expression))&&(t.push(e),m(",")););return new b.SuperMap.CartoCSS.Tree.Value(t)},value:function(){for(var e,t=[];(e=m(this.expression))&&(t.push(e),m(",")););return 1<t.length?new b.SuperMap.CartoCSS.Tree.Value(t.map(function(e){return e.value[0]})):1===t.length?new b.SuperMap.CartoCSS.Tree.Value(t):void 0},sub:function(){var e;if(m("(")&&(e=m(this.expression))&&m(")"))return e},multiplication:function(){var e,t,r,n;if(e=m(this.operand)){for(;(r=m("/")||m("*")||m("%"))&&(t=m(this.operand));)n=new b.SuperMap.CartoCSS.Tree.Operation(r,[n||e,t],f);return n||e}},addition:function(){var e,t,r,n;if(e=m(this.multiplication)){for(;(r=m(/^[-+]\s+/)||" "!=p.charAt(y-1)&&(m("+")||m("-")))&&(t=m(this.multiplication));)n=new b.SuperMap.CartoCSS.Tree.Operation(r,[n||e,t],f);return n||e}},operand:function(){return m(this.sub)||m(this.entity)},expression:function(){for(var e,t=[];e=m(this.addition)||m(this.entity);)t.push(e);if(0<t.length)return new b.SuperMap.CartoCSS.Tree.Expression(t)},property:function(){var e=m(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(e)return e[1]}}}}},{key:"parse",value:function(e){var t=this.parser;return this.ruleSet=t.parse(e)}},{key:"toShaders",value:function(){if(this.ruleSet){var e=this.ruleSet;if(e){var t=e.toList(this.env);t.reverse();var r={},n=[];this._toShaders(r,n,t);for(var i=[],a={},o=0,s=t.length;o<s;++o){var l=t[o],u=l.attachment,c=r[n[o]],h=[];if(!a[u]){var f=0;for(var p in c)if("zoom"!==p&&"frames"!==p&&"attachment"!==p&&"elements"!=p)if("layer-index"===p){var y=(c[p].join("\n"),null);Object.defineProperty(h,"layerIndex",{configurable:!0,enumerable:!1,value:y})}else h[f++]=function(e,t){if(!Array.isArray(e))return e;var r=e.join("\n"),n='attributes["FEATUREID"]&&attributes["FEATUREID"]',i=r.indexOf(n);if(0<=i){if(!t.featureFilter){var a=i+n.length,o=r.indexOf(")",a+1),s="featureId&&(featureId"+r.substring(a,o)+")";Object.defineProperty(t,"featureFilter",{configurable:!0,enumerable:!1,value:function(e){return!!s}})}return{property:p,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+r+";} return _value; ")}}return{property:p,getValue:Function("attributes","zoom","var _value = null;"+r+"; return _value; ")}}(c[p],h);Object.defineProperty(h,"attachment",{configurable:!0,enumerable:!1,value:u}),Object.defineProperty(h,"elements",{configurable:!0,enumerable:!1,value:l.elements}),i.push(h),a[n[o]]=!0}Object.defineProperty(h,"zoom",{configurable:!0,enumerable:!1,value:l.zoom})}return i}}return null}},{key:"_toShaders",value:function(e,t,r){for(var n=0,i=r.length;n<i;++n){for(var a=r[n],o=[],s=0,l=a.elements.length;s<l;s++)o.push(a.elements[s]);var u=a.filters.filters,c=[];for(var h in u)c.push(u[h].id);var f=o.join("/")+"::"+a.attachment+"_"+c.join("_");t.push(f);var p=e[f]=e[f]||{};p.zoom=b.SuperMap.CartoCSS.Tree.Zoom.all;var y=a.toJS(this.env);for(var d in y)(p[d]=p[d]||[]).push(y[d].join("\n"))}}},{key:"getShaders",value:function(){return this.shaders}},{key:"destroy",value:function(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null}}]),t}();b.SuperMap._mapnik_reference_latest={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}},c.mapnik_reference={version:{latest:b.SuperMap._mapnik_reference_latest,"2.1.1":b.SuperMap._mapnik_reference_latest}},b.SuperMap.CartoCSS=c,b.SuperMap.CartoCSS.Tree={},b.SuperMap.CartoCSS.Tree.operate=function(e,t,r){switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"%":return t%r;case"/":return t/r}},b.SuperMap.CartoCSS.Tree.functions={rgb:function(e,t,r){return this.rgba(e,t,r,1)},rgba:function(e,t,r,n){var i=this,a=[e,t,r].map(function(e){return i.number(e)});return n=i.number(n),a.some(isNaN)||isNaN(n)?null:new b.SuperMap.CartoCSS.Tree.Color(a,n)},stop:function(t){var r,n;return 1<arguments.length&&(r=arguments[1]),2<arguments.length&&(n=arguments[2]),{is:"tag",val:t,color:r,mode:n,toString:function(e){return'\n\t<stop value="'+t.ev(e)+'"'+(r?' color="'+r.ev(e)+'" ':"")+(n?' mode="'+n.ev(e)+'" ':"")+"/>"}}},hsl:function(e,t,r){return this.hsla(e,t,r,1)},hsla:function(e,t,r,n){if([e=this.number(e)%360/360,t=this.number(t),r=this.number(r),n=this.number(n)].some(isNaN))return null;var i=r<=.5?r*(t+1):r+t-r*t,a=2*r-i;return this.rgba(255*o(e+1/3),255*o(e),255*o(e-1/3),n);function o(e){return 6*(e=e<0?e+1:1<e?e-1:e)<1?a+(i-a)*e*6:2*e<1?i:3*e<2?a+(i-a)*(2/3-e)*6:a}},hue:function(e){return"toHSL"in e?new b.SuperMap.CartoCSS.Tree.Dimension(Math.round(e.toHSL().h)):null},saturation:function(e){return"toHSL"in e?new b.SuperMap.CartoCSS.Tree.Dimension(Math.round(100*e.toHSL().s),"%"):null},lightness:function(e){return"toHSL"in e?new b.SuperMap.CartoCSS.Tree.Dimension(Math.round(100*e.toHSL().l),"%"):null},alpha:function(e){return"toHSL"in e?new b.SuperMap.CartoCSS.Tree.Dimension(e.toHSL().a):null},saturate:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.s+=t.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},desaturate:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.s-=t.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},lighten:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.l+=t.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},darken:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.l-=t.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},fadein:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.a+=t.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},fadeout:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.a-=t.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},spin:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL(),n=(r.h+t.value)%360;return r.h=n<0?360+n:n,this.hsla_simple(r)},replace:function(e,t,r){return"field"===e.is?e.toString+".replace("+t.toString()+", "+r.toString()+")":e.replace(t,r)},mix:function(e,t,r){var n=r.value/100,i=2*n-1,a=e.toHSL().a-t.toHSL().a,o=((i*a==-1?i:(i+a)/(1+i*a))+1)/2,s=1-o,l=[e.rgb[0]*o+t.rgb[0]*s,e.rgb[1]*o+t.rgb[1]*s,e.rgb[2]*o+t.rgb[2]*s],u=e.alpha*n+t.alpha*(1-n);return new b.SuperMap.CartoCSS.Tree.Color(l,u)},greyscale:function(e){return this.desaturate(e,new b.SuperMap.CartoCSS.Tree.Dimension(100))},"%":function(e){for(var t=Array.prototype.slice.call(arguments,1),r=e.value,n=0;n<t.length;n++)r=r.replace(/%s/,t[n].value).replace(/%[da]/,t[n].toString());return r=r.replace(/%%/g,"%"),new b.SuperMap.CartoCSS.Tree.Quoted(r)},hsla_simple:function(e){return this.hsla(e.h,e.s,e.l,e.a)},number:function(e){return e instanceof b.SuperMap.CartoCSS.Tree.Dimension?parseFloat("%"===e.unit?e.value/100:e.value):"number"==typeof e?e:NaN},clamp:function(e){return Math.min(1,Math.max(0,e))}},b.SuperMap.CartoCSS.Tree.Call=function(){function n(e,t,r){u(this,n),this.is="call",this.name=e,this.args=t,this.index=r}return s(n,[{key:"ev",value:function(t){for(var e=this.args.map(function(e){return e.ev(t)}),r=0;r<e.length;r++)if("undefined"===e[r].is)return{is:"undefined",value:"undefined"};if(this.name in b.SuperMap.CartoCSS.Tree.functions){if(b.SuperMap.CartoCSS.Tree.functions[this.name].length<=e.length){var n=b.SuperMap.CartoCSS.Tree.functions[this.name].apply(b.SuperMap.CartoCSS.Tree.functions,e);return null===n?(t.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n}return t.error({message:"incorrect number of arguments for "+this.name+"(). "+b.SuperMap.CartoCSS.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var i=b.SuperMap.CartoCSS.Tree.Reference.mapnikFunctions[this.name];if(i===undefined){var a=(0,l["default"])(b.SuperMap.CartoCSS.Tree.Reference.mapnikFunctions),o=this.name,s=a.map(function(e){return[e[0],b.SuperMap.CartoCSS.Tree.Reference.editDistance(o,e[0]),e[1]]}).sort(function(e,t){return e[1]-t[1]});return t.error({message:"unknown function "+this.name+"(), did you mean "+s[0][0]+"("+s[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return i!==e.length&&-1!==i?(t.error({message:"function "+this.name+"() takes "+i+" arguments and was given "+e.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=e,this)}},{key:"toString",value:function(e,t){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}]),n}(),b.SuperMap.CartoCSS.Tree.Color=function(){function r(e,t){u(this,r),this.is="color",Array.isArray(e)?this.rgb=e.slice(0,3):6==e.length?this.rgb=e.match(/.{2}/g).map(function(e){return parseInt(e,16)}):this.rgb=e.split("").map(function(e){return parseInt(e+e,16)}),"number"==typeof t?this.alpha=t:4===e.length?this.alpha=e[3]:this.alpha=1}return s(r,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return"rgba("+this.rgb.map(function(e){return Math.round(e)}).concat(this.alpha).join(", ")+")"}},{key:"operate",value:function(e,t,r){var n=[];r instanceof b.SuperMap.CartoCSS.Tree.Color||(r=r.toColor());for(var i=0;i<3;i++)n[i]=b.SuperMap.CartoCSS.Tree.operate(t,this.rgb[i],r.rgb[i]);return new b.SuperMap.CartoCSS.Tree.Color(n)}},{key:"toHSL",value:function(){var e,t,r=this.rgb[0]/255,n=this.rgb[1]/255,i=this.rgb[2]/255,a=this.alpha,o=Math.max(r,n,i),s=Math.min(r,n,i),l=(o+s)/2,u=o-s;if(o===s)e=t=0;else{switch(t=.5<l?u/(2-o-s):u/(o+s),o){case r:e=(n-i)/u+(n<i?6:0);break;case n:e=(i-r)/u+2;break;case i:e=(r-n)/u+4}e/=6}return{h:360*e,s:t,l:l,a:a}}}]),r}(),b.SuperMap.CartoCSS.Tree.Comment=function(){function r(e,t){u(this,r),this.value=e,this.silent=!!t}return s(r,[{key:"toString",value:function(e){return"\x3c!--"+this.value+"--\x3e"}},{key:"ev",value:function(){return this}}]),r}(),b.SuperMap.CartoCSS.Tree.Definition=function(){function n(e,t){u(this,n),this.elements=e.elements,this.rules=t,this.ruleIndex={};for(var r=0;r<this.rules.length;r++)"zoom"in this.rules[r]&&(this.rules[r]=this.rules[r].clone()),this.rules[r].zoom=e.zoom,this.ruleIndex[this.rules[r].updateID()]=!0;this.filters=e.filters,this.zoom=e.zoom,this.attachment=e.attachment||"__default__",this.specificity=e.specificity()}return s(n,[{key:"toString",value:function(){for(var e=this.filters.toString(),t=0;t<this.rules.length;t++)e+="\n    "+this.rules[t];return e}},{key:"toJS",value:function(i){var a={},e=this.zoom,o=this.filters.toJS(i),t=[e];function r(e){if(e instanceof b.SuperMap.CartoCSS.Tree.Rule)a[e.name]=a[e.name]||[],o?a[e.name].push("if("+o+"){"+e.value.toJS(i)+"}"):a[e.name].push(e.value.toJS(i));else if(e instanceof b.SuperMap.CartoCSS.Tree.Ruleset){var t=e.toJS(i);for(var r in t)for(var n in a[r]=a[r]||[],t[r])a[r].push(t[r][n])}}for(var n in o&&t.push(o),o=t.join(" && "),this.rules)r(this.rules[n]);return a}}]),n}(),b.SuperMap.CartoCSS.Tree.Dimension=function(){function n(e,t,r){u(this,n),this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(e),this.unit=t||null,this.index=r}return s(n,[{key:"ev",value:function(e){if(this.unit&&this.all_units.indexOf(this.unit)<0)return e.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&0<=this.physical_units.indexOf(this.unit)){if(!e.ppi)return e.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*e.ppi,this.unit="px"}return this}},{key:"toColor",value:function(){return new b.SuperMap.CartoCSS.Tree.Color([this.value,this.value,this.value])}},{key:"round",value:function(){return this.value=Math.round(this.value),this}},{key:"toString",value:function(){return this.value.toString()}},{key:"operate",value:function(e,t,r){return"%"===this.unit&&"%"!==r.unit?(e.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===r.unit?"*"===t||"/"===t||"%"===t?(e.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new b.SuperMap.CartoCSS.Tree.Dimension(b.SuperMap.CartoCSS.Tree.operate(t,this.value,this.value*r.value*.01),this.unit):new b.SuperMap.CartoCSS.Tree.Dimension(b.SuperMap.CartoCSS.Tree.operate(t,this.value,r.value),this.unit||r.unit)}}]),n}(),b.SuperMap.CartoCSS.Tree.Element=function(){function t(e){u(this,t),this.value=e.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")}return s(t,[{key:"specificity",value:function(){return["id"===this.type?1:0,"class"===this.type?1:0]}},{key:"toString",value:function(){return this.value}}]),t}(),b.SuperMap.CartoCSS.Tree.Expression=function(){function t(e){u(this,t),this.is="expression",this.value=e}return s(t,[{key:"ev",value:function(t){return 1<this.value.length?new b.SuperMap.CartoCSS.Tree.Expression(this.value.map(function(e){return e.ev(t)})):this.value[0].ev(t)}},{key:"toString",value:function(t){return this.value.map(function(e){return e.toString(t)}).join(" ")}}]),t}(),b.SuperMap.CartoCSS.Tree.Field=function(){function t(e){u(this,t),this.is="field",this.value=e||""}return s(t,[{key:"toString",value:function(){return'["'+this.value.toUpperCase()+'"]'}},{key:"ev",value:function(){return this}}]),t}(),b.SuperMap.CartoCSS.Tree.Filter=function(){function a(e,t,r,n,i){u(this,a),this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=e,this.op=t,this.val=r,this.index=n,this.filename=i,this.id=this.key+this.op+this.val}return s(a,[{key:"ev",value:function(e){return this.key=this.key.ev(e),this.val=this.val.ev(e),this}},{key:"toString",value:function(){return"["+this.id+"]"}}]),a}(),b.SuperMap.CartoCSS.Tree.Filterset=function(){function e(){u(this,e),this.filters={}}return s(e,[{key:"toJS",value:function(e){function t(e){var t=e.op;"="===t&&(t="==");var r=e.val;e._val!==undefined&&(r=e._val.toString(!0)),e.key&&"scale"===e.key.value?r=+r:"string"!=typeof r&&"object"!==(void 0===r?"undefined":a(r))||(r="'"+r+"'");var n="attributes";return n+"&&"+n+e.key+"&&"+n+e.key+" "+t+r}var r=[];for(var n in this.filters)r.push(t(this.filters[n]));return r.join(" && ")}},{key:"toString",value:function(){var e=[];for(var t in this.filters)e.push(this.filters[t].id);return e.sort().join("\t")}},{key:"ev",value:function(e){for(var t in this.filters)this.filters[t].ev(e);return this}},{key:"clone",value:function(){var e=new b.SuperMap.CartoCSS.Tree.Filterset;for(var t in this.filters)e.filters[t]=this.filters[t];return e}},{key:"cloneWith",value:function(e){var t=[];for(var r in e.filters){var n=this.addable(e.filters[r]);if(!1===n)return!1;!0===n&&t.push(e.filters[r])}if(!t.length)return null;var i=new b.SuperMap.CartoCSS.Tree.Filterset;for(r in this.filters)i.filters[r]=this.filters[r];for(;r=t.shift();)i.add(r);return i}},{key:"addable",value:function(e){var t=e.key.toString(),r=e.val.toString();switch(r.match(/^[0-9]+(\.[0-9]*)?$/)&&(r=parseFloat(r)),e.op){case"=":return this.filters[t+"="]!==undefined?this.filters[t+"="].val.toString()==r&&null:this.filters[t+"!="+r]===undefined&&(!(this.filters[t+">"]!==undefined&&this.filters[t+">"].val>=r)&&(!(this.filters[t+"<"]!==undefined&&this.filters[t+"<"].val<=r)&&(!(this.filters[t+">="]!==undefined&&this.filters[t+">="].val>r)&&!(this.filters[t+"<="]!==undefined&&this.filters[t+"<="].val<r))));case"=~":return!0;case"!=":return this.filters[t+"="]!==undefined?this.filters[t+"="].val!==r&&null:this.filters[t+"!="+r]!==undefined?null:this.filters[t+">"]!==undefined&&this.filters[t+">"].val>=r?null:this.filters[t+"<"]!==undefined&&this.filters[t+"<"].val<=r?null:this.filters[t+">="]!==undefined&&this.filters[t+">="].val>r?null:!(this.filters[t+"<="]!==undefined&&this.filters[t+"<="].val<r)||null;case">":return t+"="in this.filters?!(this.filters[t+"="].val<=r)&&null:!(this.filters[t+"<"]!==undefined&&this.filters[t+"<"].val<=r)&&(!(this.filters[t+"<="]!==undefined&&this.filters[t+"<="].val<=r)&&(this.filters[t+">"]!==undefined&&this.filters[t+">"].val>=r?null:!(this.filters[t+">="]!==undefined&&this.filters[t+">="].val>r)||null));case">=":return this.filters[t+"="]!==undefined?!(this.filters[t+"="].val<r)&&null:!(this.filters[t+"<"]!==undefined&&this.filters[t+"<"].val<=r)&&(!(this.filters[t+"<="]!==undefined&&this.filters[t+"<="].val<r)&&(this.filters[t+">"]!==undefined&&this.filters[t+">"].val>=r?null:!(this.filters[t+">="]!==undefined&&this.filters[t+">="].val>=r)||null));case"<":return this.filters[t+"="]!==undefined?!(this.filters[t+"="].val>=r)&&null:!(this.filters[t+">"]!==undefined&&this.filters[t+">"].val>=r)&&(!(this.filters[t+">="]!==undefined&&this.filters[t+">="].val>=r)&&(this.filters[t+"<"]!==undefined&&this.filters[t+"<"].val<=r?null:!(this.filters[t+"<="]!==undefined&&this.filters[t+"<="].val<r)||null));case"<=":return this.filters[t+"="]!==undefined?!(this.filters[t+"="].val>r)&&null:!(this.filters[t+">"]!==undefined&&this.filters[t+">"].val>=r)&&(!(this.filters[t+">="]!==undefined&&this.filters[t+">="].val>r)&&(this.filters[t+"<"]!==undefined&&this.filters[t+"<"].val<=r?null:!(this.filters[t+"<="]!==undefined&&this.filters[t+"<="].val<=r)||null))}}},{key:"conflict",value:function(e){var t=e.key.toString(),r=e.val.toString();return isNaN(parseFloat(r))||(r=parseFloat(r)),("="===e.op&&this.filters[t+"="]!==undefined&&r!=this.filters[t+"="].val.toString()||"!="===e.op&&this.filters[t+"="]!==undefined&&r==this.filters[t+"="].val.toString()||"="===e.op&&this.filters[t+"!="]!==undefined&&r===this.filters[t+"!="].val.toString())&&e.toString()+" added to "+this.toString()+" produces an invalid filter"}},{key:"add",value:function(e,t){var r,n=e.key.toString(),i=e.op,a=this.conflict(e);if(a)return a;if("="===i){for(var o in this.filters)this.filters[o].key===n&&delete this.filters[o];this.filters[n+"="]=e}else if("!="===i)this.filters[n+"!="+e.val]=e;else if("=~"===i)this.filters[n+"=~"+e.val]=e;else if(">"===i){for(var s in this.filters)this.filters[s].key===n&&this.filters[s].val<=e.val&&delete this.filters[s];this.filters[n+">"]=e}else if(">="===i){for(var l in this.filters)r=+this.filters[l].val.toString(),this.filters[l].key===n&&r<e.val&&delete this.filters[l];this.filters[n+"!="+e.val]!==undefined?(delete this.filters[n+"!="+e.val],e.op=">",this.filters[n+">"]=e):this.filters[n+">="]=e}else if("<"===i){for(var u in this.filters)r=+this.filters[u].val.toString(),this.filters[u].key===n&&r>=e.val&&delete this.filters[u];this.filters[n+"<"]=e}else if("<="===i){for(var c in this.filters)r=+this.filters[c].val.toString(),this.filters[c].key===n&&r>e.val&&delete this.filters[c];this.filters[n+"!="+e.val]!==undefined?(delete this.filters[n+"!="+e.val],e.op="<",this.filters[n+"<"]=e):this.filters[n+"<="]=e}}}]),e}(),b.SuperMap.CartoCSS.Tree.Fontset=function e(t,r){u(this,e),this.fonts=r,this.name="fontset-"+t.effects.length},b.SuperMap.CartoCSS.Tree.Invalid=function(){function n(e,t,r){u(this,n),this.is="invalid",this.chunk=e,this.index=t,this.type="syntax",this.message=r||"Invalid code: "+this.chunk}return s(n,[{key:"ev",value:function(e){return e.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}}]),n}(),b.SuperMap.CartoCSS.Tree.Keyword=function(){function r(e){u(this,r),this.value=e;var t={transparent:"color","true":"boolean","false":"boolean"};this.is=t[e]?t[e]:"keyword"}return s(r,[{key:"ev",value:function(){return this}}]),s(r,[{key:"toString",value:function(){return this.value}}]),r}(),b.SuperMap.CartoCSS.Tree.Literal=function(){function t(e){u(this,t),this.value=e||"",this.is="field"}return s(t,[{key:"toString",value:function(){return this.value}},{key:"ev",value:function(){return this}}]),t}(),b.SuperMap.CartoCSS.Tree.Operation=function(){function n(e,t,r){u(this,n),this.is="operation",this.op=e.trim(),this.operands=t,this.index=r}return s(n,[{key:"ev",value:function(e){var t,r=this.operands[0].ev(e),n=this.operands[1].ev(e);return"undefined"===r.is||"undefined"===n.is?{is:"undefined",value:"undefined"}:(r instanceof b.SuperMap.CartoCSS.Tree.Dimension&&n instanceof b.SuperMap.CartoCSS.Tree.Color&&("*"===this.op||"+"===this.op?(t=n,n=r,r=t):e.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),r instanceof b.SuperMap.CartoCSS.Tree.Quoted&&n instanceof b.SuperMap.CartoCSS.Tree.Quoted&&"+"!==this.op?(e.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r instanceof b.SuperMap.CartoCSS.Tree.Field||n instanceof b.SuperMap.CartoCSS.Tree.Field||r instanceof b.SuperMap.CartoCSS.Tree.Literal||n instanceof b.SuperMap.CartoCSS.Tree.Literal?"color"===r.is||"color"===n.is?(e.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new b.SuperMap.CartoCSS.Tree.Literal(r.ev(e).toString(!0)+this.op+n.ev(e).toString(!0)):r.operate===undefined?(e.error({message:"Cannot do math with type "+r.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r.operate(e,this.op,n))}}]),n}(),b.SuperMap.CartoCSS.Tree.Quoted=function(){function t(e){u(this,t),this.is="string",this.value=e||""}return s(t,[{key:"toString",value:function(e){var t=this.value.replace(/&/g,"&amp;"),r=t.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===e?"'"+r+"'":t}},{key:"ev",value:function(){return this}},{key:"operate",value:function(e,t,r){return new b.SuperMap.CartoCSS.Tree.Quoted(b.SuperMap.CartoCSS.Tree.operate(t,this.toString(),r.toString(this.contains_field)))}}]),t}(),b.SuperMap.CartoCSS.Tree.Reference={_validateValue:{font:function(e,t){return!e.validation_data||!e.validation_data.fonts||-1!=e.validation_data.fonts.indexOf(t)}},setData:function(e){this.data=e,this.selector_cache=function(e){var t={};for(var r in e.symbolizers)for(var n in e.symbolizers[r])e.symbolizers[r][n].hasOwnProperty("css")&&(t[e.symbolizers[r][n].css]=[e.symbolizers[r][n],r,n]);return t}(e),this.mapnikFunctions=function(e){var t={};for(var r in e.symbolizers)for(var n in e.symbolizers[r])if("functions"===e.symbolizers[r][n].type)for(var i=0;i<e.symbolizers[r][n].functions.length;i++){var a=e.symbolizers[r][n].functions[i];t[a[0]]=a[1]}return t}(e),this.required_cache=function(e){var t={};for(var r in e.symbolizers)for(var n in t[r]=[],e.symbolizers[r])e.symbolizers[r][n].required&&t[r].push(e.symbolizers[r][n].css);return t}(e)},setVersion:function(e){return!!b.SuperMap.CartoCSS.mapnik_reference.version.hasOwnProperty(e)&&(this.setData(b.SuperMap.CartoCSS.mapnik_reference.version[e]),!0)},selectorData:function(e,t){if(this.selector_cache&&this.selector_cache[e])return this.selector_cache[e][t]},validSelector:function(e){return!!this.selector_cache[e]},selectorName:function(e){return this.selectorData(e,2)},selector:function(e){return this.selectorData(e,0)},symbolizer:function(e){return this.selectorData(e,1)},requiredProperties:function(e,t){var r=this.required_cache[e];for(var n in r)if(!(r[n]in t))return"Property "+r[n]+" required for defining "+e+" styles."},isFont:function(e){return"font"===this.selector(e).validate},editDistance:function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;for(var r=[],n=0;n<=t.length;n++)r[n]=[n];for(var i=0;i<=e.length;i++)r[0][i]=i;for(n=1;n<=t.length;n++)for(i=1;i<=e.length;i++)t.charAt(n-1)===e.charAt(i-1)?r[n][i]=r[n-1][i-1]:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[t.length][e.length]},validValue:function(e,t,r){var n;if(this.selector(t)){if("keyword"===r.value[0].is)return function(e,t){return"object"===a(this.selector(t).type)?-1!==this.selector(t).type.indexOf(e.value[0].value):"string"===this.selector(t).type}(r,t);if("undefined"===r.value[0].is)return!0;if("numbers"===this.selector(t).type){for(n in r.value)if("float"!==r.value[n].is)return!1;return!0}if("tags"===this.selector(t).type){if(!r.value)return!1;if(!r.value[0].value)return"tag"===r.value[0].is;for(n=0;n<r.value[0].value.length;n++)if("tag"!==r.value[0].value[n].is)return!1;return!0}if("functions"==this.selector(t).type)return function(t,e){if("string"===t.value[0].is)return!0;for(var r in t.value)for(var n in t.value[r].value){if("call"!==t.value[r].value[n].is)return!1;var i=find(this.selector(e).functions,function(e){return e[0]===t.value[r].value[n].name});if(!(i&&-1===i[1]||i&&i[1]===t.value[r].value[n].args.length))return!1}return!0}(r,t);if("expression"===this.selector(t).type)return!0;if("unsigned"===this.selector(t).type)return"float"===r.value[0].is&&(r.value[0].round(),!0);if(this.selector(t).validate){for(n=0;n<r.value.length;n++)if(this.selector(t).type===r.value[n].is&&this._validateValue[this.selector(t).validate](e,r.value[n].value))return!0;return!1}return this.selector(t).type===r.value[0].is}return!1}},b.SuperMap.CartoCSS.Tree.Reference.setVersion("latest"),b.SuperMap.CartoCSS.Tree.Rule=function(){function a(e,t,r,n){u(this,a),this.is="rule";var i=e.split("/");this.name=i.pop(),this.instance=i.length?i[0]:"__default__",this.value=t instanceof b.SuperMap.CartoCSS.Tree.Value?t:new b.SuperMap.CartoCSS.Tree.Value([t]),this.index=r,this.symbolizer=b.SuperMap.CartoCSS.Tree.Reference.symbolizer(this.name),this.filename=n,this.variable="@"===e.charAt(0)}return s(a,[{key:"clone",value:function(){var e=Object.create(b.SuperMap.CartoCSS.Tree.Rule.prototype);return e.name=this.name,e.value=this.value,e.index=this.index,e.instance=this.instance,e.symbolizer=this.symbolizer,e.filename=this.filename,e.variable=this.variable,e}},{key:"updateID",value:function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name}},{key:"toString",value:function(){return"["+b.SuperMap.CartoCSS.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value}},{key:"ev",value:function(e){return new b.SuperMap.CartoCSS.Tree.Rule(this.name,this.value.ev(e),this.index,this.filename)}}]),a}(),b.SuperMap.CartoCSS.Tree.Ruleset=function(){function r(e,t){u(this,r),this.is="ruleset",this.selectors=e,this.rules=t,this._lookups={}}return s(r,[{key:"ev",value:function(e){var t,r,n=new b.SuperMap.CartoCSS.Tree.Ruleset(this.selectors,this.rules.slice(0));for(n.root=this.root,e.frames.unshift(n),t=0;t<n.rules.length;t++)r=n.rules[t],n.rules[t]=r.ev?r.ev(e):r;return e.frames.shift(),n}},{key:"match",value:function(e){return!e||0===e.length}},{key:"variables",value:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(e,t){return t instanceof b.SuperMap.CartoCSS.Tree.Rule&&!0===t.variable&&(e[t.name]=t),e},{})}},{key:"variable",value:function(e){return this.variables()[e]}},{key:"rulesets",value:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(e){return e instanceof b.SuperMap.CartoCSS.Tree.Ruleset})}},{key:"find",value:function(r,n){n=n||this;var i=[],e=r.toString();return e in this._lookups?this._lookups[e]:(this.rulesets().forEach(function(e){if(e!==n)for(var t=0;t<e.selectors.length;t++)if(r.match(e.selectors[t])){1<r.elements.length?Array.prototype.push.apply(i,e.find(new b.SuperMap.CartoCSS.Tree.Selector(null,null,r.elements.slice(1)),n)):i.push(e);break}}),this._lookups[e]=i)}},{key:"evZooms",value:function(e){for(var t=0;t<this.selectors.length;t++){for(var r=b.SuperMap.CartoCSS.Tree.Zoom.all,n=0;n<this.selectors[t].zoom.length;n++)r=this.selectors[t].zoom[n].ev(e).zoom;this.selectors[t].zoom=r}}},{key:"flatten",value:function(e,t,r){var n,i,a=[];for(0===this.selectors.length&&(r.frames=r.frames.concat(this.rules)),this.evZooms(r),n=0;n<this.selectors.length;n++){var o=this.selectors[n];if(o.filters)if(t.length)for(i=0;i<t.length;i++){var s=t[i],l=s.filters.cloneWith(o.filters);if(null===l){if(s.zoom===o.zoom&&s.attachment===o.attachment&&s.elements.join()===o.elements.join()){a.push(s);continue}l=s.filters}else if(!l)continue;var u=Object.create(b.SuperMap.CartoCSS.Tree.Selector.prototype);u.filters=l,u.zoom=o.zoom,u.elements=s.elements.concat(o.elements),s.attachment&&o.attachment?u.attachment=s.attachment+"/"+o.attachment:u.attachment=o.attachment||s.attachment,u.conditions=s.conditions+o.conditions,u.index=o.index,a.push(u)}else a.push(o)}var c=[];for(n=0;n<this.rules.length;n++){var h=this.rules[n];h instanceof b.SuperMap.CartoCSS.Tree.Ruleset?h.flatten(e,a,r):h instanceof b.SuperMap.CartoCSS.Tree.Rule?c.push(h):h instanceof b.SuperMap.CartoCSS.Tree.Invalid&&r.error(h)}var f=!!c.length&&c[0].index;for(n=0;n<a.length;n++)!1!==f&&(a[n].index=f),e.push(new b.SuperMap.CartoCSS.Tree.Definition(a[n],c.slice()));return e}}]),r}(),b.SuperMap.CartoCSS.Tree.Selector=function(){function o(e,t,r,n,i,a){u(this,o),this.elements=r||[],this.attachment=n,this.filters=e||{},this.zoom=void 0!==t?t:b.SuperMap.CartoCSS.Tree.Zoom.all,this.conditions=i,this.index=a}return s(o,[{key:"specificity",value:function(){return this.elements.reduce(function(e,t){var r=t.specificity();return e[0]+=r[0],e[1]+=r[1],e},[0,0,this.conditions,this.index])}}]),o}(),b.SuperMap.CartoCSS.Tree.URL=function(){function r(e,t){u(this,r),this.is="uri",this.value=e,this.paths=t}return s(r,[{key:"toString",value:function(){return this.value.toString()}},{key:"ev",value:function(e){return new b.SuperMap.CartoCSS.Tree.URL(this.value.ev(e),this.paths)}}]),r}(),b.SuperMap.CartoCSS.Tree.Value=function(){function t(e){u(this,t),this.is="value",this.value=e}return s(t,[{key:"ev",value:function(t){return 1===this.value.length?this.value[0].ev(t):new b.SuperMap.CartoCSS.Tree.Value(this.value.map(function(e){return e.ev(t)}))}},{key:"toJS",value:function(e){var t=this.ev(e),r=t.toString();return"color"===t.is||"uri"===t.is||"string"===t.is||"keyword"===t.is?r="'"+r+"'":"field"===t.is?r=r.replace(/\[(.*)\]/g,"attributes['$1']"):t.value&&"object"===a(t.value)&&(r="["+r+"]"),"_value = "+r+";"}},{key:"toString",value:function(t,e,r,n){return this.value.map(function(e){return e.toString(t,n)}).join(r||", ")}},{key:"clone",value:function(){var e=Object.create(b.SuperMap.CartoCSS.Tree.Value.prototype);return Array.isArray(e)?e.value=this.value.slice():e.value=this.value,e.is=this.is,e}}]),t}(),b.SuperMap.CartoCSS.Tree.Variable=function(){function n(e,t,r){u(this,n),this.is="variable",this.name=e,this.index=t,this.filename=r}return s(n,[{key:"toString",value:function(){return this.name}},{key:"ev",value:function(e){if(this._css)return this._css;var t=e.frames.filter(function(e){return e.name===this.name}.bind(this));return t.length?t[0].value.ev(e):(e.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}]),n}(),b.SuperMap.CartoCSS.Tree.Zoom=function(){function n(e,t,r){u(this,n),this.op=e,this.value=t,this.index=r}return s(n,[{key:"setZoom",value:function(e){return this.zoom=e,this}},{key:"ev",value:function(e){var t=parseInt(this.value.ev(e).toString(),10);switch((t>b.SuperMap.CartoCSS.Tree.Zoom.maxZoom||t<0)&&e.error({message:"Only zoom levels between 0 and "+b.SuperMap.CartoCSS.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+t,this;case">":this.zoom="zoom && zoom > "+t;break;case">=":this.zoom="zoom && zoom >= "+t;break;case"<":this.zoom="zoom && zoom < "+t;break;case"<=":this.zoom="zoom && zoom <= "+t;break;default:return this}return this}},{key:"toString",value:function(){for(var e="",t=0;t<=b.SuperMap.CartoCSS.Tree.Zoom.maxZoom;t++)e+=this.zoom&1<<t?"X":".";return e}}]),n}(),b.SuperMap.CartoCSS.Tree.Zoom.all=23,b.SuperMap.CartoCSS.Tree.Zoom.maxZoom=22,b.SuperMap.CartoCSS.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeStyle=t.CartoCSS=undefined;var n=r(420),i=r(418);t.CartoCSS=n.CartoCSS,t.ThemeStyle=i.ThemeStyle},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FetchRequest=t.getRequestTimeout=t.setRequestTimeout=t.isCORS=t.setCORS=undefined;var n=r(20);t.setCORS=n.setCORS,t.isCORS=n.isCORS,t.setRequestTimeout=n.setRequestTimeout,t.getRequestTimeout=n.getRequestTimeout,t.FetchRequest=n.FetchRequest},function(e,t){e.exports=function(){try{return elasticsearch}catch(e){return{}}}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElasticSearch=undefined;var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(0),o=r(85),s=r(423),l=(n=s)&&n.__esModule?n:{"default":n},u=r(1);var c=t.ElasticSearch=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t=t||{},this.url=e,this.client=new l["default"].Client({host:this.url}),this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new o.Events(this,null,this.EVENT_TYPES),this.eventListeners=null,u.Util.extend(this,t),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}return i(r,[{key:"setGeoFence",value:function(e){this.geoFence=e}},{key:"bulk",value:function(e,t){return this.client.bulk(e,t)}},{key:"clearScroll",value:function(e,t){return this.client.clearScroll(e,t)}},{key:"count",value:function(e,t){return this.client.count(e,t)}},{key:"create",value:function(e,t){return this.client.create(e,t)}},{key:"delete",value:function(e,t){return this.client["delete"](e,t)}},{key:"deleteByQuery",value:function(e,t){return this.client.deleteByQuery(e,t)}},{key:"deleteScript",value:function(e,t){return this.client.deleteScript(e,t)}},{key:"deleteTemplate",value:function(e,t){return this.client.deleteTemplate(e,t)}},{key:"exists",value:function(e,t){return this.client.exists(e,t)}},{key:"existsSource",value:function(e,t){return this.client.existsSource(e,t)}},{key:"explain",value:function(e,t){return this.client.explain(e,t)}},{key:"fieldCaps",value:function(e,t){return this.client.fieldCaps(e,t)}},{key:"get",value:function(e,t){return this.client.get(e,t)}},{key:"getScript",value:function(e,t){return this.client.getScript(e,t)}},{key:"getSource",value:function(e,t){return this.client.getSource(e,t)}},{key:"getTemplate",value:function(e,t){return this.client.getTemplate(e,t)}},{key:"index",value:function(e,t){return this.client.index(e,t)}},{key:"info",value:function(e,t){return this.client.info(e,t)}},{key:"mget",value:function(e,t){return this.client.mget(e,t)}},{key:"msearch",value:function(e,t){var r=this;return r.client.msearch(e).then(function(e){return r._update(e.responses,t),e},function(e){return t(e),r.events.triggerEvent("error",{error:e}),e})}},{key:"msearchTemplate",value:function(e,t){return this.client.msearchTemplate(e,t)}},{key:"mtermvectors",value:function(e,t){return this.client.mtermvectors(e,t)}},{key:"ping",value:function(e,t){return this.client.ping(e,t)}},{key:"putScript",value:function(e,t){return this.client.putScript(e,t)}},{key:"putTemplate",value:function(e,t){return this.client.putTemplate(e,t)}},{key:"reindex",value:function(e,t){return this.client.reindex(e,t)}},{key:"reindexRessrottle",value:function(e,t){return this.client.reindexRessrottle(e,t)}},{key:"renderSearchTemplate",value:function(e,t){return this.client.renderSearchTemplate(e,t)}},{key:"scroll",value:function(e,t){return this.client.scroll(e,t)}},{key:"search",value:function(e,t){var r=this;return r.client.search(e).then(function(e){return r._update(e.responses,t),e},function(e){return t(e),r.events.triggerEvent("error",{error:e}),e})}},{key:"searchShards",value:function(e,t){return this.client.searchShards(e,t)}},{key:"searchTemplate",value:function(e,t){return this.client.searchTemplate(e,t)}},{key:"suggest",value:function(e,t){return this.client.suggest(e,t)}},{key:"termvectors",value:function(e,t){return this.client.termvectors(e,t)}},{key:"update",value:function(e,t){return this.client.update(e,t)}},{key:"updateByQuery",value:function(e,t){return this.client.updateByQuery(e,t)}},{key:"_update",value:function(e,t){e&&(this.data=e,this.openGeoFence&&this.geoFence&&this._validateDatas(e),this.events.triggerEvent("change",{data:this.data}),this.change?this.change&&this.change(e):t&&t(undefined,{responses:e}))}},{key:"_validateDatas",value:function(e){if(e){e instanceof Array||(e=[e]);var t,r=e.length;for(t=0;t<r;t++)this._validateData(e[t])}}},{key:"_validateData",value:function(l){var u=this;l.hits.hits.map(function(e){var t=e._source,r=u._getMeterPerMapUnit(u.geoFence.unit),n=u.geoFence.center[0]*r,i=u.geoFence.center[1]*r,a=t.x*r,o=t.y*r,s=u._distance(a,o,n,i);return u.geoFence.radius<s&&(u.outOfGeoFence&&u.outOfGeoFence(l),u.events.triggerEvent("outOfGeoFence",{data:l})),e})}},{key:"_distance",value:function(e,t,r,n){return Math.sqrt((e-r)*(e-r)+(t-n)*(t-n))}},{key:"_getMeterPerMapUnit",value:function(e){var t=void 0;return"meter"===e?t=1:"degree"===e&&(t=2*Math.PI*6378137/360),t}}]),r}();a.SuperMap.ElasticSearch=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElasticSearch=undefined;var n=r(424);t.ElasticSearch=n.ElasticSearch},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElasticSearch=undefined;var n=r(425);t.ElasticSearch=n.ElasticSearch},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenServiceParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3);var s=t.TokenServiceParameter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.userName=null,this.password=null,this.clientType=o.ClientType.NONE,this.ip=null,this.referer=null,this.expiration=60,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.TokenServiceParameter"}return n(t,[{key:"toJSON",value:function(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}]),t}();i.SuperMap.TokenServiceParameter=s},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ServerInfo=undefined;var i=n(0),a=n(1),o=n(3);var s=r.ServerInfo=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,a.Util.extend(this,r),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||o.ServerType.ISERVER,this.server||console.error("server url require is not  undefined");var n="/services/security/tokens.json";this.type===o.ServerType.ISERVER&&this.server.indexOf("iserver")<0&&(n="/iserver"+n),this.tokenServiceUrl||(this.tokenServiceUrl=this.server+n),this.keyServiceUrl||(this.type===o.ServerType.IPORTAL?this.keyServiceUrl=this.server+"/web/mycontent/keys/register.json":this.type===o.ServerType.ONLINE&&(this.keyServiceUrl=this.server+"/web/mycontent/keys.json"))};i.SuperMap.ServerInfo=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyServiceParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3);var s=t.KeyServiceParameter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=null,this.serviceIds=null,this.clientType=o.ClientType.SERVER,this.limitation=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.KeyServiceParameter"}return n(t,[{key:"toJSON",value:function(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}]),t}();i.SuperMap.KeyServiceParameter=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenServiceParameter=t.ServerInfo=t.SecurityManager=t.KeyServiceParameter=undefined;var n=r(429),i=r(37),a=r(428),o=r(427);t.KeyServiceParameter=n.KeyServiceParameter,t.SecurityManager=i.SecurityManager,t.ServerInfo=a.ServerInfo,t.TokenServiceParameter=o.TokenServiceParameter},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OnlineQueryDatasParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);r(192);var o=t.OnlineQueryDatasParameter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,a.Util.extend(this,e),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter"}return n(t,[{key:"toJSON",value:function(){var e={types:this.types,fileName:this.fileName,serviceStatuses:this.serviceStatuses,serviceId:this.serviceId,ids:this.ids,keywords:this.keywords,orderBy:this.orderBy,tags:this.tags,filterFields:this.filterFields};for(var t in e)null==e[t]&&delete e[t];return e}}]),t}();i.SuperMap.OnlineQueryDatasParameter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Online=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(37),l=r(191),o=r(20);var s=t.Online=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.rootUrl="http://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var e=this.webUrl+"/mycontent";this.mDatasUrl=e+"/datas",this.CLASS_NAME="SuperMap.Online"}return n(t,[{key:"load",value:function(){return o.FetchRequest.get(this.rootUrl).then(function(e){return e})}},{key:"login",value:function(){a.SecurityManager.loginOnline(this.rootUrl,!0)}},{key:"queryDatas",value:function(e){var s=this,t=s.mDatasUrl;return e&&(e=e.toJSON()),o.FetchRequest.get(t,e).then(function(e){if(e&&e.content&&!(e.content.length<1)){for(var t=[],r=e.content,n=r.length,i=0;i<n;i++){var a=r[i],o=new l.OnlineData(s.mDatasUrl,a);t.push(o)}return t}})}}]),t}();i.SuperMap.Online=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OnlineServiceBase=t.FilterField=t.DataItemOrderBy=t.DataItemType=t.ServiceStatus=t.OnlineQueryDatasParameter=t.OnlineData=t.Online=undefined;var n=r(192),i=r(432),a=r(191),o=r(431),s=r(190);t.Online=i.Online,t.OnlineData=a.OnlineData,t.OnlineQueryDatasParameter=o.OnlineQueryDatasParameter,t.ServiceStatus=n.ServiceStatus,t.DataItemType=n.DataItemType,t.DataItemOrderBy=n.DataItemOrderBy,t.FilterField=n.FilterField,t.OnlineServiceBase=s.OnlineServiceBase},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VectorClipJobsService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},o=n(0),s=n(17),l=n(193);var u=r.VectorClipJobsService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.url+="/spatialanalyst/vectorclip",r.CLASS_NAME="SuperMap.VectorClipJobsService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.ProcessingServiceBase),i(n,[{key:"destroy",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url)}},{key:"getVectorClipJob",value:function(e){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addVectorClipJob",value:function(e,t){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addJob",this).call(this,this.url,e,l.VectorClipJobsParameter,t)}}]),n}();o.SuperMap.VectorClipJobsService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateTurnNodeWeightService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(14),o=r(194);var s=t.UpdateTurnNodeWeightService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.UpdateTurnNodeWeightService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.NetworkAnalystServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof o.UpdateTurnNodeWeightParameters){var t=this,r=t.url.substr(t.url.length-1,1),n=t.parse(e);"/"===r&&t.url.splice(t.url.length-1,1),t.url=t.url+n+".json?";var i=e.turnNodeWeight?e.turnNodeWeight:null;t.request({method:"PUT",scope:t,data:i,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"parse",value:function(e){if(e){var t="";for(var r in e)if(""!==e[r]&&"turnNodeWeight"!==e[r])switch(r){case"nodeId":t+="/turnnodeweight/"+e[r];break;case"fromEdgeId":t+="/fromedge/"+e[r];break;case"toEdgeId":t+="/toedge/"+e[r];break;case"weightField":t+="/weightfield/"+e[r]}return t}}}]),n}();n.SuperMap.UpdateTurnNodeWeightService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateEdgeWeightService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(14),o=r(195);var s=t.UpdateEdgeWeightService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.UpdateEdgeWeightService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.NetworkAnalystServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof o.UpdateEdgeWeightParameters){var t=this,r=t.url.substr(t.url.length-1,1),n=t.parse(e);"/"===r&&t.url.splice(t.url.length-1,1),t.url=t.url+n+".json?";var i=e.edgeWeight?e.edgeWeight:null;t.request({method:"PUT",scope:t,data:i,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"parse",value:function(e){if(e){var t="";for(var r in e)if(""!==e[r]&&"edgeWeight"!==e[r])switch(r){case"edgeId":t+="/edgeweight/"+e[r];break;case"fromNodeId":t+="/fromnode/"+e[r];break;case"toNodeId":t+="/tonode/"+e[r];break;case"weightField":t+="/weightfield/"+e[r]}return t}}}]),n}();n.SuperMap.UpdateEdgeWeightService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransferSolutionService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(6),s=r(196);var l=t.TransferSolutionService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.TransferSolutionService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof s.TransferSolutionParameters){var t,r;r=this.url.substr(this.url.length-1,1),this.url+="/"===r?"":"/",this.url+="solutions.json?",t={points:a.Util.toJSON(e.points),walkingRatio:e.walkingRatio,transferTactic:e.transferTactic,solutionCount:e.solutionCount,transferPreference:e.transferPreference},e.evadeLines&&(t.evadeLines=a.Util.toJSON(e.evadeLines)),e.evadeStops&&(t.evadeStops=a.Util.toJSON(e.evadeStops)),e.priorLines&&(t.priorLines=a.Util.toJSON(e.priorLines)),e.priorStops&&(t.priorStops=a.Util.toJSON(e.priorStops)),e.travelTime&&(t.travelTime=e.travelTime),this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}]),n}();n.SuperMap.TransferSolutionService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransferPathService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(6),s=r(197);var l=t.TransferPathService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.TransferPathService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof s.TransferPathParameters){var t,r;r=this.url.substr(this.url.length-1,1),this.url+="/"===r?"":"/",this.url+="path.json?",t={points:a.Util.toJSON(e.points),transferLines:a.Util.toJSON(e.transferLines)},this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}]),n}();n.SuperMap.TransferPathService=l},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TopologyValidatorJobsService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},o=n(0),s=n(17),l=n(199);var u=r.TopologyValidatorJobsService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.url+="/spatialanalyst/topologyvalidator",r.CLASS_NAME="SuperMap.TopologyValidatorJobsService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.ProcessingServiceBase),i(n,[{key:"destroy",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getTopologyValidatorJobs",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url)}},{key:"getTopologyValidatorJob",value:function(e){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addTopologyValidatorJob",value:function(e,t){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addJob",this).call(this,this.url,e,l.TopologyValidatorJobsParameter,t)}}]),n}();o.SuperMap.TopologyValidatorJobsService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TilesetsService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(6);var o=t.TilesetsService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.TilesetsService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(){if(this.url){var e=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===e?"tilesets":"/tilesets")+".json?",this.request({method:"GET",scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}]),n}();n.SuperMap.TilesetsService=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryBatchAnalystService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(10),s=r(120),l=r(118),u=r(117),c=r(33);var h=t.GeometryBatchAnalystService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return t&&a.Util.extend(r,t),r.CLASS_NAME="SuperMap.GeometryBatchAnalystService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.SpatialAnalystBase),i(n,[{key:"processAsync",value:function(e){"/"!==this.url.substr(this.url.length-1,1)&&(this.url+="/"),this.url+="geometry/batchanalyst.json?returnContent=true&ignoreAnalystParam=true";var t=this._processParams(e),r=a.Util.toJSON(t);this.request({method:"POST",data:r,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"_processParams",value:function(e){var t=this;if(a.Util.isArray(e)){var r=[];return e.map(function(e){return r.push(t._toJSON(e)),e}),r}}},{key:"_toJSON",value:function(e){var t={};if("buffer"===e.analystName)t.analystName="buffer",t.param={},s.GeometryBufferAnalystParameters.toObject(e.param,t.param);else if("overlay"===e.analystName)t.analystName="overlay",t.param={},l.GeometryOverlayAnalystParameters.toObject(e.param,t.param);else if("interpolationDensity"===e.analystName)t.analystName="interpolationDensity",t.param={},c.InterpolationAnalystParameters.toObject(e.param,t.param);else if("interpolationidw"===e.analystName)t.analystName="interpolationidw",t.param={},c.InterpolationAnalystParameters.toObject(e.param,t.param);else if("interpolationRBF"===e.analystName)t.analystName="interpolationRBF",t.param={},c.InterpolationAnalystParameters.toObject(e.param,t.param);else if("interpolationKriging"===e.analystName)t.analystName="interpolationKriging",t.param={},c.InterpolationAnalystParameters.toObject(e.param,t.param);else{if("thiessenpolygon"!==e.analystName)return e;t.analystName="thiessenpolygon",t.param={},u.GeometryThiessenAnalystParameters.toObject(e.param,t.param)}return t}},{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}}]),n}();n.SuperMap.GeometryBatchAnalystService=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThiessenAnalystService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(10),s=r(274),l=r(117);var u=t.ThiessenAnalystService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.mode=null,t&&a.Util.extend(r,t),r.CLASS_NAME="SuperMap.ThiessenAnalystService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.SpatialAnalystBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},r=this;"/"!==r.url.substr(r.url.length-1,1)&&(r.url+="/"),e instanceof s.DatasetThiessenAnalystParameters?(r.mode="datasets",r.url+="datasets/"+e.dataset+"/thiessenpolygon",s.DatasetThiessenAnalystParameters.toObject(e,t)):e instanceof l.GeometryThiessenAnalystParameters&&(r.mode="geometry",r.url+="geometry/thiessenpolygon",l.GeometryThiessenAnalystParameters.toObject(e,t));var n=a.Util.toJSON(t);r.url+=".json?returnContent=true",r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}]),n}();n.SuperMap.ThiessenAnalystService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeService=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=r(0),h=r(1),i=r(6),s=r(200);var a=t.ThemeService=function(e){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));t&&o.SuperMap.Util.extend(r,t);var n,i=r;return n=i.url.substr(i.url.length-1,1),i.url+="/"===n?"tempLayersSet.json?":"/tempLayersSet.json?",r.CLASS_NAME="SuperMap.ThemeService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.CommonServiceBase),n(a,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof s.ThemeParameters){var t;t=this.getJsonParameters(e),this.request({method:"POST",data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,r="",n=null,i=null,a=null;r+="[{'type': 'UGC','subLayers': {'layers': [";for(var o=0;o<e.themes.length;o++){n=e.themes[o];var s=h.Util.toJSON(n);if(r+="{'theme': "+(s=s.slice(0,-1))+"},'type': 'UGC','ugcLayerType': 'THEME',",(i=e.displayFilters)&&0<i.length&&(1===i.length?r+="'displayFilter':\""+i[0]+'",':r+="'displayFilter':\""+i[o]+'",'),(a=e.displayOrderBy)&&0<a.length&&(1===a.length?r+="'displayOrderBy':'"+a[0]+"',":r+="'displayOrderBy':'"+a[o]+"',"),(t=e.fieldValuesDisplayFilter)&&(r+="'fieldValuesDisplayFilter':"+h.Util.toJSON(t)+","),e.joinItems&&0<e.joinItems.length&&e.joinItems[o]&&(r+="'joinItems':["+h.Util.toJSON(e.joinItems[o])+"],"),e.datasetNames&&e.dataSourceNames){var l=e.datasetNames[o]?o:e.datasetNames.length-1,u=e.dataSourceNames[o]?o:e.dataSourceNames.length-1;r+="'datasetInfo': {'name': '"+e.datasetNames[l]+"','dataSourceName': '"+e.dataSourceNames[u]+"'}},"}else r+="},"}e.themes&&0<e.themes.length&&(r=r.substring(0,r.length-1)),r+="]},";var c=this.url.split("/");return r+="'name': '"+c[c.length-2]+"'}]"}}]),a}();o.SuperMap.ThemeService=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeLabelUniqueItem=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(34);var s=t.ThemeLabelUniqueItem=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new o.ServerTextStyle,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem"}return n(r,[{key:"destroy",value:function(){this.unique=null,this.caption=null,this.offsetX=null,this.offsetY=null,this.style&&(this.style.destroy(),this.style=null),this.visible=null}}],[{key:"fromObj",value:function(e){if(e){var t=new r;return a.Util.copy(t,e),t}}}]),r}();i.SuperMap.ThemeLabelUniqueItem=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TerrainCurvatureCalculationService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(0),o=r(10),s=r(205);var n=t.TerrainCurvatureCalculationService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.TerrainCurvatureCalculationService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.SpatialAnalystBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){"/"!==this.url.substr(this.url.length-1,1)&&(this.url+="/");var t={};e instanceof s.TerrainCurvatureCalculationParameters&&(this.url+="datasets/"+e.dataset+"/terraincalculation/curvature"),s.TerrainCurvatureCalculationParameters.toObject(e,t);var r=a.SuperMap.Util.toJSON(t);this.url+=".json?returnContent=true",this.request({method:"POST",data:r,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}]),n}();a.SuperMap.TerrainCurvatureCalculationService=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SurfaceAnalystService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(10),o=r(1),s=r(276),l=r(256),u=r(80);var c=t.SurfaceAnalystService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.SurfaceAnalystService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.SpatialAnalystBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof u.SurfaceAnalystParameters){var t;t=this.getJsonParameters(e),this.request({method:"POST",data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,r="",n={};if(e instanceof s.DatasetSurfaceAnalystParameters)t=this.url.substr(this.url.length-1,1),this.url+="/"===t?"datasets/"+e.dataset+"/"+e.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true":"/datasets/"+e.dataset+"/"+e.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true",s.DatasetSurfaceAnalystParameters.toObject(e,n),r=o.Util.toJSON(n);else{if(!(e instanceof l.GeometrySurfaceAnalystParameters))return;t=this.url.substr(this.url.length-1,1),this.url+="/"===t?"geometry/"+e.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true":"/geometry/"+e.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true",r=o.Util.toJSON(e)}return r}}]),n}();n.SuperMap.SurfaceAnalystService=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SupplyCenter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1);var o=t.SupplyCenter=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,e&&a.Util.extend(this,e),this.CLASS_NAME="SuperMap.SupplyCenter"}return n(t,[{key:"destroy",value:function(){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null}}],[{key:"fromJson",value:function(e){if(e)return new t({maxWeight:e.maxWeight,nodeID:e.nodeID,resourceValue:e.resourceValue,type:e.type})}}]),t}();i.SuperMap.SupplyCenter=o},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SummaryRegionJobsService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},o=n(0),s=n(17),l=n(206);var u=r.SummaryRegionJobsService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.url+="/spatialanalyst/summaryregion",r.CLASS_NAME="SuperMap.SummaryRegionJobsService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.ProcessingServiceBase),i(n,[{key:"destroy",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryRegionJob",value:function(e){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addSummaryRegionJob",value:function(e,t){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addJob",this).call(this,this.url,e,l.SummaryRegionJobParameter,t)}}]),n}();o.SuperMap.SummaryRegionJobsService=u},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SummaryMeshJobsService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},o=n(0),s=n(17),l=n(207);var u=r.SummaryMeshJobsService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.url+="/spatialanalyst/aggregatepoints",r.CLASS_NAME="SuperMap.SummaryMeshJobsService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.ProcessingServiceBase),i(n,[{key:"destroy",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryMeshJob",value:function(e){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addSummaryMeshJob",value:function(e,t){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addJob",this).call(this,this.url,e,l.SummaryMeshJobParameter,t)}}]),n}();o.SuperMap.SummaryMeshJobsService=u},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SummaryAttributesJobsService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},o=n(0),s=n(17),l=n(208);var u=r.SummaryAttributesJobsService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.url+="/spatialanalyst/summaryattributes",r.CLASS_NAME="SuperMap.SummaryAttributesJobsService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.ProcessingServiceBase),i(n,[{key:"destroy",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getSummaryAttributesJobs",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryAttributesJob",value:function(e){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addSummaryAttributesJob",value:function(e,t){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addJob",this).call(this,this.url,e,l.SummaryAttributesJobsParameter,t)}}]),n}();o.SuperMap.SummaryAttributesJobsService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StopQueryService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(6),s=r(209);var l=t.StopQueryService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return t=t||{},a.Util.extend(r,t),r.CLASS_NAME="SuperMap.StopQueryService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this),a.Util.reset(this)}},{key:"processAsync",value:function(e){if(e instanceof s.StopQueryParameters){var t;t=this.url.substr(this.url.length-1,1),this.url+="/"===t?"":"/",this.url+="stops/keyword/"+e.keyWord,this.url+=".json?",this.request({method:"GET",params:{returnPosition:e.returnPosition},scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}]),n}();n.SuperMap.StopQueryService=l},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SingleObjectQueryJobsService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},o=n(0),s=n(17),l=n(210);var u=r.SingleObjectQueryJobsService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.url+="/spatialanalyst/query",r.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.ProcessingServiceBase),i(n,[{key:"destroy",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url)}},{key:"getQueryJob",value:function(e){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addQueryJob",value:function(e,t){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addJob",this).call(this,this.url,e,l.SingleObjectQueryJobsParameter,t)}}]),n}();o.SuperMap.SingleObjectQueryJobsService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetLayerStatusService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(6),s=r(211);var l=t.SetLayerStatusService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.lastparams=null,r.mapUrl=e,t&&a.Util.extend(r,t),r.CLASS_NAME="SuperMap.SetLayerStatusService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this),a.Util.reset(this)}},{key:"processAsync",value:function(e){if(e instanceof s.SetLayerStatusParameters){var t=this;t.url=t.mapUrl;var r=t.url.substr(t.url.length-1,1);if(t.url+="/"===r?"":"/",null==e.resourceID)t.url+="tempLayersSet",t.url+=".json?",t.lastparams=e,t.request({method:"POST",scope:t,success:t.createTempLayerComplete,failure:t.serviceProcessFailed});else{t.url+="tempLayersSet/"+e.resourceID,t.url+=".json?",t.url+="elementRemain=true&reference="+e.resourceID+"&holdTime="+e.holdTime.toString();var n="[{";n+='"type":"UGC",',null!=e.layerStatusList&&0<e.layerStatusList.length&&(n+='"subLayers":'+e.toJSON()),n+=',"visible":true,',n+='"name":"'+this.getMapName(this.mapUrl)+'"',n+="}]",t.request({method:"PUT",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}},{key:"createTempLayerComplete",value:function(e){(e=a.Util.transformResult(e)).succeed&&(this.lastparams.resourceID=e.newResourceID),this.processAsync(this.lastparams)}},{key:"getMapName",value:function(e){var t=e;"/"===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1));var r=t.lastIndexOf("/");return t.substring(r+1,t.length)}},{key:"serviceProcessCompleted",value:function(e){null!=(e=a.Util.transformResult(e))&&null!=this.lastparams&&(e.newResourceID=this.lastparams.resourceID),this.events.triggerEvent("processCompleted",{result:e})}}]),n}();n.SuperMap.SetLayerStatusService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetLayersInfoService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(0),y=r(1),o=r(6);r(212);var n=t.SetLayersInfoService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.resourceID=null,r.isTempLayers=!1,t&&a.SuperMap.Util.extend(r,t),r.CLASS_NAME="SuperMap.SetLayersInfoService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this),y.Util.reset(this)}},{key:"processAsync",value:function(e){if(e){var t,r,n=[],i=this,a="";r=i.url.substr(i.url.length-1,1),i.url+="/"===r?"":"/",i.isTempLayers?(i.url+="tempLayersSet/"+i.resourceID,a="PUT"):(i.url+="tempLayersSet",a="POST"),i.url+=".json?",e.subLayers||(e.subLayers={layers:[]}),e.subLayers.layers||(e.subLayers.layers=[]);var o=e.subLayers.layers,s=o.length;for(var l in o){if("GRID"===o[l].ugcLayerType){var u={},c=o[l].colorDictionarys;for(var h in c){u[c[h].elevation]=c[h].color}}o[l].colorDictionary=u,delete o[l].colorDictionarys}for(var f=0;f<s;f++)o[f].toJsonObject?n.push(o[f].toJsonObject()):n.push(o[f]);(t=y.Util.extend(t,e)).subLayers={layers:n},t.object=null;var p=y.Util.toJSON([t]);i.request({method:a,data:p,scope:i,success:i.serviceProcessCompleted,failure:i.serviceProcessFailed})}}}]),n}();a.SuperMap.SetLayersInfoService=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetLayerInfoService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(6);r(213);var s=t.SetLayerInfoService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return t&&a.Util.extend(r,t),r.CLASS_NAME="SuperMap.SetLayerInfoService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this),a.Util.reset(this)}},{key:"processAsync",value:function(e){if(e){this.url+=".json";var t=a.Util.toJSON(e);this.request({method:"PUT",data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}]),n}();n.SuperMap.SetLayerInfoService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerFeature=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),o=r(84),a=r(9),s=r(1);var l=t.ServerFeature=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.fieldNames=null,this.fieldValues=null,this.geometry=null,e&&s.Util.extend(this,e),this.CLASS_NAME="SuperMap.ServerFeature"}return n(r,[{key:"destroy",value:function(){this.fieldNames=null,this.fieldValues=null,this.geometry&&(this.geometry.destroy(),this.geometry=null)}},{key:"toFeature",value:function(){var e,t,r,n,i={};for(var a in e=this.fieldNames,t=this.fieldValues,e)i[e[a]]=t[a];return this.geometry&&(r=this.geometry.toGeometry()),n=new o.Vector(r,i),this.geometry&&this.geometry.id&&(n.fid=this.geometry.id),n}}],[{key:"fromJson",value:function(e){var t=null;if(e)return(t=e.geometry)&&(t=a.ServerGeometry.fromJson(t)),new r({fieldNames:e.fieldNames,fieldValues:e.fieldValues,geometry:t})}}]),r}();i.SuperMap.ServerFeature=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RouteLocatorService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(10),s=r(214);var l=t.RouteLocatorService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.RouteLocatorService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.SpatialAnalystBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof s.RouteLocatorParameters){var t;t=this.getJsonParameters(e),this.request({method:"POST",data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,r="geometry/routelocator";return t=this.url.substr(this.url.length-1,1),e.dataset&&(r="datasets/"+e.dataset+"/linearreferencing/routelocator",e.sourceRoute=null),this.url+="/"===t?r+".json":"/"+r+".json",this.url+="?returnContent=true",a.Util.toJSON(e)}}]),n}();n.SuperMap.RouteLocatorService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RouteCalculateMeasureService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(10),s=r(215);var l=t.RouteCalculateMeasureService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.RouteCalculateMeasureService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.SpatialAnalystBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof s.RouteCalculateMeasureParameters){var t;t=this.getJsonParameters(e),this.request({method:"POST",data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,r="geometry/calculatemeasure";return t=this.url.substr(this.url.length-1,1),this.url+="/"===t?r+".json":"/"+r+".json",this.url+="?returnContent=true",a.Util.toJSON(e)}}]),n}();n.SuperMap.RouteCalculateMeasureService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryBySQLService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(56),s=r(216);var l=t.QueryBySQLService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.QueryBySQLService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.QueryService),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof s.QueryBySQLParameters){var t,r="";return t=this.getQueryParameters(e),r+="'queryMode':'SqlQuery','queryParameters':",r="{"+(r+=a.Util.toJSON(t))+"}"}}}]),n}();n.SuperMap.QueryBySQLService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryByGeometryService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(56),s=r(217),l=r(9);var u=t.QueryByGeometryService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.QueryByGeometryService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.QueryService),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof s.QueryByGeometryParameters){var t,r="",n=e.geometry,i=l.ServerGeometry.fromGeometry(n);return t=this.getQueryParameters(e),r+="'queryMode':'SpatialQuery','queryParameters':",r="{"+(r+=a.Util.toJSON(t)+",'geometry':"+a.Util.toJSON(i)+",'spatialQueryMode':"+a.Util.toJSON(e.spatialQueryMode))+"}"}}}]),n}();n.SuperMap.QueryByGeometryService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryByDistanceService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(56),s=r(218),l=r(9);var u=t.QueryByDistanceService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.QueryByDistanceService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.QueryService),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof s.QueryByDistanceParameters){var t="",r=this.getQueryParameters(e),n=l.ServerGeometry.fromGeometry(e.geometry);return t+=e.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':",t+=a.Util.toJSON(r),t="{"+(t+=",'geometry':"+a.Util.toJSON(n)+",'distance':"+e.distance)+"}"}}}]),n}();n.SuperMap.QueryByDistanceService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryByBoundsService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(56),s=r(219);var l=t.QueryByBoundsService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.QueryByBoundsService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.QueryService),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(!(e instanceof s.QueryByBoundsParameters))return null;var t,r="",n=e.bounds;return t=this.getQueryParameters(e),r+="'queryMode':'BoundsQuery','queryParameters':",r+=a.Util.toJSON(t),r="{"+(r+=",'bounds': {'rightTop':{'y':"+n.top+",'x':"+n.right+"},'leftBottom':{'y':"+n.bottom+",'x':"+n.left+"}}")+"}"}}]),n}();n.SuperMap.QueryByBoundsService=l},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OverlayGeoJobsService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},o=n(0),s=n(17),l=n(220);var u=r.OverlayGeoJobsService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.url+="/spatialanalyst/overlay",r.CLASS_NAME="SuperMap.OverlayGeoJobsService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.ProcessingServiceBase),i(n,[{key:"destroy",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getOverlayGeoJobs",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url)}},{key:"getOverlayGeoJob",value:function(e){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addOverlayGeoJob",value:function(e,t){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addJob",this).call(this,this.url,e,l.OverlayGeoJobParameter,t)}}]),n}();o.SuperMap.OverlayGeoJobsService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayAnalystService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(10),s=r(277),l=r(118);var u=t.OverlayAnalystService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.mode=null,t&&a.Util.extend(r,t),r.CLASS_NAME="SuperMap.OverlayAnalystService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.SpatialAnalystBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},r=this;"/"!==r.url.substr(r.url.length-1,1)&&(r.url+="/"),e instanceof s.DatasetOverlayAnalystParameters?(r.mode="datasets",r.url+="datasets/"+e.sourceDataset+"/overlay.json?returnContent=true",s.DatasetOverlayAnalystParameters.toObject(e,t)):e instanceof l.GeometryOverlayAnalystParameters&&(r.mode="geometry",e.operateGeometries&&e.sourceGeometries?r.url+="geometry/overlay/batch.json?returnContent=true&ignoreAnalystParam=true":r.url+="geometry/overlay.json?returnContent=true",l.GeometryOverlayAnalystParameters.toObject(e,t));var n=a.Util.toJSON(t);r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}]),n}();n.SuperMap.OverlayAnalystService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeasureService=undefined;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),c=r(1),a=r(6),h=r(221),f=r(9),p=r(3);var o=t.MeasureService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.measureMode=p.MeasureMode.DISTANCE,t&&c.Util.extend(r,t),r.CLASS_NAME="SuperMap.MeasureService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this);this.measureMode=null}},{key:"processAsync",value:function(e){if(e instanceof h.MeasureParameters){var t,r,n,i=e.geometry;if(i){n=this.url.substr(this.url.length-1,1),this.measureMode===p.MeasureMode.AREA?this.url+="/"===n?"area.json?":"/area.json?":this.url+="/"===n?"distance.json?":"/distance.json?";var a,o,s,l=f.ServerGeometry.fromGeometry(i);if(l)t=l.parts[0],r=l.points.splice(0,t),e.prjCoordSys?("object"===u(e.prjCoordSys)?a='{"epsgCode"'+(o=e.prjCoordSys.projCode).substring(o.indexOf(":"),o.length)+"}":"string"==typeof e.prjCoordSys&&(a='{"epsgCode"'+e.prjCoordSys.substring(e.prjCoordSys.indexOf(":"),e.prjCoordSys.length)+"}"),s={point2Ds:c.Util.toJSON(r),unit:e.unit,prjCoordSys:a}):s={point2Ds:c.Util.toJSON(r),unit:e.unit},this.request({method:"GET",params:s,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}}]),n}();n.SuperMap.MeasureService=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MathExpressionAnalysisService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(10),s=r(222);var l=t.MathExpressionAnalysisService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.MathExpressionAnalysisService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.SpatialAnalystBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){"/"!==this.url.substr(this.url.length-1,1)&&(this.url+="/");var t={};e instanceof s.MathExpressionAnalysisParameters&&(this.url+="datasets/"+e.dataset+"/mathanalyst"),s.MathExpressionAnalysisParameters.toObject(e,t);var r=a.Util.toJSON(t);this.url+=".json?returnContent=true",this.request({method:"POST",data:r,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}]),n}();n.SuperMap.MathExpressionAnalysisService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapService=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),o=r(1),s=r(6);var a=t.MapService=function(e){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));r.projection=null,r.CLASS_NAME="SuperMap.MapService",t&&o.Util.extend(r,t);var n=r;if(n.projection){var i=n.projection.split(":");i instanceof Array&&(2===i.length&&(n.url+='?prjCoordSys={"epsgCode":'+i[1]+"}"),1===i.length&&(n.url+='?prjCoordSys={"epsgCode":'+i[0]+"}"))}return r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,s.CommonServiceBase),n(a,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this);this.events&&(this.events.un(this.eventListeners),this.events.listeners=null,this.events.destroy(),this.events=null,this.eventListeners=null)}},{key:"processAsync",value:function(){this.request({method:"GET",scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){var t=200<=(e=o.Util.transformResult(e)).code&&e.code<300||0==e.code||304===e.code,r=e.code&&t;!e.code||r?this.events&&this.events.triggerEvent("processCompleted",{result:e}):this.events.triggerEvent("processFailed",{error:e})}}]),a}();i.SuperMap.MapService=a},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.KernelDensityJobsService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},o=n(0),s=n(17),l=n(227);var u=r.KernelDensityJobsService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.url+="/spatialanalyst/density",r.CLASS_NAME="SuperMap.KernelDensityJobsService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.ProcessingServiceBase),i(n,[{key:"destroy",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url)}},{key:"getKernelDensityJob",value:function(e){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addKernelDensityJob",value:function(e,t){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addJob",this).call(this,this.url,e,l.KernelDensityJobParameter,t)}}]),n}();o.SuperMap.KernelDensityJobsService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterpolationDensityAnalystParameters=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(33);var s=t.InterpolationDensityAnalystParameters=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return e&&a.Util.extend(t,e),t.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.InterpolationAnalystParameters),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this)}}]),r}();i.SuperMap.InterpolationDensityAnalystParameters=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterpolationAnalystService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(10),s=r(230),l=r(469),u=r(229),c=r(228),h=r(33);var f=t.InterpolationAnalystService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.mode=null,t&&a.Util.extend(r,t),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.SpatialAnalystBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService"}},{key:"processAsync",value:function(e){var t={},r=this;"/"!==r.url.substr(r.url.length-1,1)&&(r.url+="/"),e instanceof l.InterpolationDensityAnalystParameters?(r.mode="Density","geometry"===e.InterpolationAnalystType?r.url+="geometry/interpolation/density":r.url+="datasets/"+e.dataset+"/interpolation/density"):e instanceof u.InterpolationIDWAnalystParameters?(r.mode="IDW","geometry"===e.InterpolationAnalystType?r.url+="geometry/interpolation/idw":r.url+="datasets/"+e.dataset+"/interpolation/idw"):e instanceof s.InterpolationRBFAnalystParameters?(r.mode="RBF","geometry"===e.InterpolationAnalystType?r.url+="geometry/interpolation/rbf":r.url+="datasets/"+e.dataset+"/interpolation/rbf"):e instanceof c.InterpolationKrigingAnalystParameters&&(r.mode="Kriging","geometry"===e.InterpolationAnalystType?r.url+="geometry/interpolation/kriging":r.url+="datasets/"+e.dataset+"/interpolation/kriging"),h.InterpolationAnalystParameters.toObject(e,t);var n=a.Util.toJSON(t);r.url+=".json?returnContent=true",r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}]),n}();n.SuperMap.InterpolationAnalystService=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetLayersInfoService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(6),s=r(248),l=r(233),u=r(232),c=r(231);var h=t.GetLayersInfoService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.isTempLayers=!1,t&&a.Util.extend(r,t),r.CLASS_NAME="SuperMap.GetLayersInfoService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this),a.Util.reset(this)}},{key:"processAsync",value:function(){var e=this,t=e.url.substr(e.url.length-1,1);e.isTempLayers?e.url+=".json?":(e.url+="/"===t?"":"/",e.url+="layers.json?"),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){var t,r;r=(t=!!(e=a.Util.transformResult(e))&&0<e.length?e[0].subLayers.layers:null)?t.length:0,this.handleLayers(r,t),this.events.triggerEvent("processCompleted",{result:e[0]})}},{key:"handleLayers",value:function(e,t){var r;if(e)for(var n=0;n<e;n++){if(t[n].subLayers&&t[n].subLayers.layers&&0<t[n].subLayers.layers.length)this.handleLayers(t[n].subLayers.layers.length,t[n].subLayers.layers);else switch(t[n].ugcLayerType){case"THEME":(r=new s.ServerTheme).fromJson(t[n]),t[n]=r;break;case"GRID":(r=new l.Grid).fromJson(t[n]),t[n]=r;break;case"IMAGE":(r=new u.UGCImage).fromJson(t[n]),t[n]=r;break;case"VECTOR":(r=new c.Vector).fromJson(t[n]),t[n]=r}}}}]),n}();n.SuperMap.GetLayersInfoService=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetGridCellInfosService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(6),s=r(249);var l=t.GetGridCellInfosService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.datasetName=null,r.dataSourceName=null,r.datasetType=null,r.X=null,r.Y=null,t&&a.Util.extend(r,t),r.CLASS_NAME="SuperMap.GetGridCellInfosService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this);this.X=null,this.Y=null,this.datasetName=null,this.dataSourceName=null,this.datasetType=null}},{key:"processAsync",value:function(e){if(e instanceof s.GetGridCellInfosParameters){a.Util.extend(this,e);var t=this,r=t.url.substr(t.url.length-1,1);t.url+="/"==r?"datasources/"+t.dataSourceName+"/datasets/"+t.datasetName+".json":"/datasources/"+t.dataSourceName+"/datasets/"+t.datasetName+".json",t.queryRequest(t.getDatasetInfoCompleted,t.getDatasetInfoFailed)}}},{key:"queryRequest",value:function(e,t){this.request({method:"GET",data:null,scope:this,success:e,failure:t})}},{key:"getDatasetInfoCompleted",value:function(e){e=a.Util.transformResult(e),this.datasetType=e.datasetInfo.type,this.queryGridInfos()}},{key:"queryGridInfos",value:function(){var e=this,t=/\.json/.exec(e.url).index,r=e.url.substring(t),n=e.url.substring(0,e.url.length-r.length);"GRID"==e.datasetType?e.url=n+"/gridValue"+r:e.url=n+"/imageValue"+r,null!=e.X&&null!=e.Y&&(e.url+="?x="+e.X+"&y="+e.Y),e.queryRequest(e.serviceProcessCompleted,e.serviceProcessFailed)}},{key:"getDatasetInfoFailed",value:function(e){this.serviceProcessFailed(e)}}]),n}();n.SuperMap.GetGridCellInfosService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetFieldsService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(6);var s=t.GetFieldsService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.datasource=null,r.dataset=null,t&&a.Util.extend(r,t),r.CLASS_NAME="SuperMap.GetFieldsService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"processAsync",value:function(){var e=this.url.substr(this.url.length-1,1),t="datasources/"+this.datasource+"/datasets/"+this.dataset;this.url+="/"==e?t+"/fields.json?":"/"+t+"/fields.json?",this.request({method:"GET",data:null,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}]),n}();n.SuperMap.GetFieldsService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetFeaturesBySQLService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(41),o=r(250);var s=t.GetFeaturesBySQLService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.GetFeaturesBySQLService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.GetFeaturesServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return o.GetFeaturesBySQLParameters.toJsonParameters(e)}}]),n}();n.SuperMap.GetFeaturesBySQLService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetFeaturesByIDsService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(41),o=r(251);var s=t.GetFeaturesByIDsService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.GetFeaturesByIDsService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.GetFeaturesServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return o.GetFeaturesByIDsParameters.toJsonParameters(e)}}]),n}();n.SuperMap.GetFeaturesByIDsService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetFeaturesByGeometryService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(41),o=r(252);var s=t.GetFeaturesByGeometryService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.GetFeaturesByGeometryService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.GetFeaturesServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return o.GetFeaturesByGeometryParameters.toJsonParameters(e)}}]),n}();n.SuperMap.GetFeaturesByGeometryService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetFeaturesByBufferService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(0),o=r(41),s=r(253);var n=t.GetFeaturesByBufferService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.GetFeaturesByBufferService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.GetFeaturesServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof s.GetFeaturesByBufferParameters)return a.SuperMap.GetFeaturesByBufferParameters.toJsonParameters(e)}}]),n}();a.SuperMap.GetFeaturesByBufferService=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetFeaturesByBoundsService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(41),o=r(254);var s=t.GetFeaturesByBoundsService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.GetFeaturesByBoundsService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.GetFeaturesServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return o.GetFeaturesByBoundsParameters.toJsonParameters(e)}}]),n}();n.SuperMap.GetFeaturesByBoundsService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoRelationAnalystService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(0),o=r(10),s=r(255);var n=t.GeoRelationAnalystService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.GeoRelationAnalystService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.SpatialAnalystBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof s.GeoRelationAnalystParameters){var t=this.url.substr(this.url.length-1,1);this.url+="/"===t?"datasets/"+e.dataset+"/georelation":"/datasets/"+e.dataset+"/georelation";var r=a.SuperMap.Util.toJSON(e);this.url+=".json?returnContent=true",this.request({method:"POST",data:r,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}]),n}();a.SuperMap.GeoRelationAnalystService=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoHashGridAggParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(3),o=r(1),s=r(123);var l=t.GeoHashGridAggParameter=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.precision=5,t.aggType=a.AggregationType.GEOHASH_GRID,o.Util.extend(t,e),t.CLASS_NAME="SuperMap.GeoHashGridAggParameter",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,s.AggregationParameter),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this),this.aggType=null}}],[{key:"toJsonParameters",value:function(e){var t={aggName:e.aggName,aggFieldName:e.aggFieldName,aggType:e.aggType,precision:e.precision};return e.subAgg&&(t.subAgg=e.subAgg),o.Util.toJson(t)}}]),r}();i.SuperMap.GeoHashGridAggParameter=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoBoundingBoxQueryBuilderParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(1),o=r(3),s=r(124);var l=t.GeoBoundingBoxQueryBuilderParameter=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.bounds=null,t.queryType=o.AggregationQueryBuilderType.GEO_BOUNDING_BOX,t.CLASS_NAME="SuperMap.GeoBoundingBoxQueryBuilderParameter",a.Util.extend(t,e),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,s.AggQueryBuilderParameter),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this),this.bounds=null,this.queryType=null}}]),r}();i.SuperMap.GeoBoundingBoxQueryBuilderParameter=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenerateSpatialDataService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(10),s=r(257);var l=t.GenerateSpatialDataService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.GenerateSpatialDataService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.SpatialAnalystBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof s.GenerateSpatialDataParameters){var t;t=this.getJsonParameters(e),this.request({method:"POST",data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,r="datasets/"+e.routeTable+"/linearreferencing/generatespatialdata";return t=this.url.substr(this.url.length-1,1),this.url+="/"===t?r+".json":"/"+r+".json",this.url+="?returnContent=true",a.Util.toJSON(e)}}]),n}();n.SuperMap.GenerateSpatialDataService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FindTSPPathsService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(0),o=r(14),s=r(258),l=r(16);var n=t.FindTSPPathsService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.FindTSPPathsService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.NetworkAnalystServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof s.FindTSPPathsParameters){var t,r=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===r?"tsppath":"/tsppath")+".json?",t={parameter:a.SuperMap.Util.toJSON(e.parameter),endNodeAssigned:e.endNodeAssigned,nodes:this.getNodesJson(e)},this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getNodesJson",value:function(e){var t,r,n,i,a="";if(!1===e.isAnalyzeById){for(t="[",r=0,n=(i=e.nodes).length;r<n;r++)0<r&&(t+=","),t+='{"x":'+i[r].x+',"y":'+i[r].y+"}";a+=t+="]"}else if(1==e.isAnalyzeById){for(var o="[",s=e.nodes,l=s.length,u=0;u<l;u++)0<u&&(o+=","),o+=s[u];a+=o+="]"}return a}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.tspPathList)return null;var t=new l.GeoJSON;return e.tspPathList.forEach(function(e){e.route&&(e.route=JSON.parse(t.write(e.route))),e.pathGuideItems&&(e.pathGuideItems=JSON.parse(t.write(e.pathGuideItems))),e.edgeFeatures&&(e.edgeFeatures=JSON.parse(t.write(e.edgeFeatures))),e.nodeFeatures&&(e.nodeFeatures=JSON.parse(t.write(e.nodeFeatures)))}),e}}]),n}();a.SuperMap.FindTSPPathsService=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FindServiceAreasService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(14),s=r(259),l=r(16);var u=t.FindServiceAreasService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.FindServiceAreasService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.NetworkAnalystServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof s.FindServiceAreasParameters){var t,r=this,n=r.url.substr(r.url.length-1,1);r.url=r.url+("/"===n?"servicearea":"/servicearea")+".json?",t={isFromCenter:e.isFromCenter,isCenterMutuallyExclusive:e.isCenterMutuallyExclusive,parameter:a.Util.toJSON(e.parameter),centers:r.getJson(e.isAnalyzeById,e.centers),weights:r.getJson(!0,e.weights)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var i=0;i<n;i++)0<i&&(r+=","),r+='{"x":'+t[i].x+',"y":'+t[i].y+"}";else if(1==e)for(var a=0;a<n;a++)0<a&&(r+=","),r+=t[a];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.serviceAreaList)return e;var t=new l.GeoJSON;return e.serviceAreaList.map(function(e){return e.serviceRegion&&(e.serviceRegion=JSON.parse(t.write(e.serviceRegion))),e.edgeFeatures&&(e.edgeFeatures=JSON.parse(t.write(e.edgeFeatures))),e.nodeFeatures&&(e.nodeFeatures=JSON.parse(t.write(e.nodeFeatures))),e.routes&&(e.routes=JSON.parse(t.write(e.routes))),e}),e}}]),n}();n.SuperMap.FindServiceAreasService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FindPathService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(14),s=r(260),l=r(16);var u=t.FindPathService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.FindPathService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.NetworkAnalystServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof s.FindPathParameters){var t,r=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===r?"path":"/path")+".json?",t={hasLeastEdgeCount:e.hasLeastEdgeCount,parameter:a.Util.toJSON(e.parameter),nodes:this.getJson(e.isAnalyzeById,e.nodes)},this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var i=0;i<n;i++)0<i&&(r+=","),r+='{"x":'+t[i].x+',"y":'+t[i].y+"}";else if(1==e)for(var a=0;a<n;a++)0<a&&(r+=","),r+=t[a];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList||e.pathList.length<1)return null;var t=new l.GeoJSON;return e.pathList.forEach(function(e){e.route&&(e.route=JSON.parse(t.write(e.route))),e.pathGuideItems&&(e.pathGuideItems=JSON.parse(t.write(e.pathGuideItems))),e.edgeFeatures&&(e.edgeFeatures=JSON.parse(t.write(e.edgeFeatures))),e.nodeFeatures&&(e.nodeFeatures=JSON.parse(t.write(e.nodeFeatures)))}),e}}]),n}();n.SuperMap.FindPathService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FindMTSPPathsService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(14),s=r(261),l=r(16);var u=t.FindMTSPPathsService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.FindMTSPPathsService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.NetworkAnalystServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof s.FindMTSPPathsParameters){var t,r=this.getJson(e.isAnalyzeById,e.centers),n=this.getJson(e.isAnalyzeById,e.nodes);this.url=this.url+"/mtsppath.json?",t={centers:r,nodes:n,parameter:a.Util.toJSON(e.parameter),hasLeastTotalCost:e.hasLeastTotalCost},this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var i=0;i<n;i++)0<i&&(r+=","),r+='{"x":'+t[i].x+',"y":'+t[i].y+"}";else if(1==e)for(var a=0;a<n;a++)0<a&&(r+=","),r+=t[a];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList)return null;var t=new l.GeoJSON;return e.pathList.map(function(e){return e.route&&(e.route=JSON.parse(t.write(e.route))),e.pathGuideItems&&(e.pathGuideItems=JSON.parse(t.write(e.pathGuideItems))),e.edgeFeatures&&(e.edgeFeatures=JSON.parse(t.write(e.edgeFeatures))),e.nodeFeatures&&(e.nodeFeatures=JSON.parse(t.write(e.nodeFeatures))),e}),e}}]),n}();n.SuperMap.FindMTSPPathsService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FindLocationService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(14),s=r(262),l=r(16);var u=t.FindLocationService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.FindLocationService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.NetworkAnalystServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof s.FindLocationParameters){var t,r=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===r?"location":"/location")+".json?",t={isFromCenter:e.isFromCenter,expectedSupplyCenterCount:e.expectedSupplyCenterCount,weightName:e.weightName,turnWeightField:e.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:a.Util.toJSON(e.mapParameter),supplyCenters:this.getCentersJson(e.supplyCenters)},this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getCentersJson",value:function(e){for(var t="[",r=e?e.length:0,n=0;n<r;n++)0<n&&(t+=","),t+=a.Util.toJSON(e[n]);return t+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;var t=new l.GeoJSON;return e.demandResults&&(e.demandResults=JSON.parse(t.write(e.demandResults))),e.supplyResults&&(e.supplyResults=JSON.parse(t.write(e.supplyResults))),e}}]),n}();n.SuperMap.FindLocationService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FindClosestFacilitiesService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(16),s=r(14),l=r(263);var u=t.FindClosestFacilitiesService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.FindClosestFacilitiesService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.NetworkAnalystServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof l.FindClosestFacilitiesParameters){var t,r=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===r?"closestfacility":"/closestfacility")+".json?",t={expectFacilityCount:e.expectFacilityCount,fromEvent:e.fromEvent,maxWeight:e.maxWeight,parameter:a.Util.toJSON(e.parameter),event:a.Util.toJSON(e.event),facilities:this.getJson(e.isAnalyzeById,e.facilities)},this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var i=0;i<n;i++)0<i&&(r+=","),r+='{"x":'+t[i].x+',"y":'+t[i].y+"}";else if(1==e)for(var a=0;a<n;a++)0<a&&(r+=","),r+=t[a];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.facilityPathList)return e;var t=new o.GeoJSON;return e.facilityPathList.map(function(e){return e.route&&(e.route=JSON.parse(t.write(e.route))),e.pathGuideItems&&(e.pathGuideItems=JSON.parse(t.write(e.pathGuideItems))),e.edgeFeatures&&(e.edgeFeatures=JSON.parse(t.write(e.edgeFeatures))),e.nodeFeatures&&(e.nodeFeatures=JSON.parse(t.write(e.nodeFeatures))),e}),e}}]),n}();n.SuperMap.FindClosestFacilitiesService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FieldStatisticService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(6),o=r(1);r(264);var s=t.FieldStatisticService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.datasource=null,r.dataset=null,r.field=null,r.statisticMode=null,t&&o.Util.extend(r,t),r.CLASS_NAME="SuperMap.FieldStatisticService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null}},{key:"processAsync",value:function(){var e=this,t=e.url.substr(e.url.length-1,1),r="datasources/"+e.datasource+"/datasets/"+e.dataset+"/fields/"+e.field+"/"+e.statisticMode;e.url+="/"==t?r+".json?":"/"+r+".json?",e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}]),n}();n.SuperMap.FieldStatisticService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterAggParameter=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(3),o=r(1),s=r(123);r(124);var l=t.FilterAggParameter=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.filterParam=null,t.aggType=a.AggregationType.FILTER,t.CLASS_NAME="SuperMap.FilterAggParameter",o.Util.extend(t,e),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,s.AggregationParameter),n(r,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this);this.filterParam&&(this.filterParam=null)}}]),r}();i.SuperMap.FilterAggParameter=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacilityAnalystUpstream3DService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(6),o=r(266);var s=t.FacilityAnalystUpstream3DService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof o.FacilityAnalystUpstream3DParameters){var t,r=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===r?"upstreamcirticalfaclilities":"/upstreamcirticalfaclilities")+".json?",t={sourceNodeIDs:e.sourceNodeIDs,edgeID:e.edgeID,nodeID:e.nodeID,isUncertainDirectionValid:e.isUncertainDirectionValid},this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}]),n}();n.SuperMap.FacilityAnalystUpstream3DService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacilityAnalystTraceup3DService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(6),o=r(267);var s=t.FacilityAnalystTraceup3DService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof o.FacilityAnalystTraceup3DParameters){var t,r=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===r?"traceupresult":"/traceupresult")+".json?",t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}]),n}();n.SuperMap.FacilityAnalystTraceup3DService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacilityAnalystTracedown3DService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(6),o=r(268);var s=t.FacilityAnalystTracedown3DService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof o.FacilityAnalystTracedown3DParameters){var t,r=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===r?"tracedownresult":"/tracedownresult")+".json?",t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}]),n}();n.SuperMap.FacilityAnalystTracedown3DService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacilityAnalystStreamService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(14),o=r(269);var s=t.FacilityAnalystStreamService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.FacilityAnalystStreamService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.NetworkAnalystServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof o.FacilityAnalystStreamParameters){var t,r=this,n=r.url.substr(r.url.length-1,1);if(0===e.queryType)r.url=r.url+("/"===n?"upstreamcirticalfaclilities":"/upstreamcirticalfaclilities")+".json?";else{if(1!==e.queryType)return;r.url=r.url+("/"===n?"downstreamcirticalfaclilities":"/downstreamcirticalfaclilities")+".json?"}t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID||null===e.edgeID&&null===e.nodeID||(null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed}))}}}]),n}();n.SuperMap.FacilityAnalystStreamService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacilityAnalystSources3DService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(6),o=r(270);var s=t.FacilityAnalystSources3DService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.FacilityAnalystSources3DService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof o.FacilityAnalystSources3DParameters){var t,r=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===r?"sources":"/sources")+".json?",t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}]),n}();n.SuperMap.FacilityAnalystSources3DService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacilityAnalystSinks3DService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(6),o=r(271);var s=t.FacilityAnalystSinks3DService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.FacilityAnalystSinks3DService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.CommonServiceBase),i(n,[{key:"destroy",value:function(){a.CommonServiceBase.prototype.destroy.apply(this,arguments)}},{key:"processAsync",value:function(e){if(e instanceof o.FacilityAnalystSinks3DParameters){var t,r=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===r?"sinks":"/sinks")+".json?",t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}]),n}();n.SuperMap.FacilityAnalystSinks3DService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditFeaturesService=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),o=r(1),s=r(3),l=r(6),u=r(272);var a=t.EditFeaturesService=function(e){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));r.returnContent=!1,r.isUseBatch=!1,t&&o.Util.extend(r,t);var n,i=r;return n=i.url.substr(i.url.length-1,1),i.url+="/"==n?"features.json?":"/features.json?",r.CLASS_NAME="SuperMap.EditFeaturesService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,l.CommonServiceBase),n(a,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this);this.returnContent=null,this.isUseBatch=null,this.fromIndex=null,this.toIndex=null}},{key:"processAsync",value:function(e){if(e instanceof u.EditFeaturesParameters){var t=this,r="POST",n="",i=e.editType,a=null;t.returnContent=e.returnContent,t.isUseBatch=e.isUseBatch,a=u.EditFeaturesParameters.toJsonParameters(e),i===s.EditType.DELETE?(n=o.Util.toJSON(e.IDs),t.url+="ids="+n,r="DELETE",a=n):i===s.EditType.UPDATE?r="PUT":(t.isUseBatch&&(t.url+="isUseBatch="+t.isUseBatch,t.returnContent=!1),t.returnContent&&(t.url+="returnContent="+t.returnContent,r="POST")),t.request({method:r,data:a,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}]),a}();i.SuperMap.EditFeaturesService=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DensityAnalystService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(10),s=r(273);var l=t.DensityAnalystService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.mode=null,t&&a.Util.extend(r,t),r.CLASS_NAME="SuperMap.DensityAnalystService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.SpatialAnalystBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t=this;"/"!==t.url.substr(t.url.length-1,1)&&(t.url+="/");var r=new Object;e instanceof s.DensityKernelAnalystParameters&&(t.url+="datasets/"+e.dataset+"/densityanalyst/kernel",t.mode="kernel"),s.DensityKernelAnalystParameters.toObject(e,r);var n=a.Util.toJSON(r);t.url+=".json?returnContent=true",t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}]),n}();n.SuperMap.DensityAnalystService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataFlowService=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(6),o=r(1),s=r(37);var l=t.DataFlowService=function(e){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=t||{}).EVENT_TYPES=["broadcastSocketConnected","broadcastSocketError","broadcastFailed","broadcastSuccessed","subscribeSocketConnected","subscribeSocketError","messageSuccessed","setFilterParamSuccessed"];var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t));r.geometry=null,r.prjCoordSys=null,r.excludeField=null;var n=r;return"/"!==n.url.substr(n.url.length-1,1)&&(n.url+="/"),t&&o.Util.extend(n,t),r.CLASS_NAME="SuperMap.DataFlowService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.CommonServiceBase),n(i,[{key:"initBroadcast",value:function(){var t=this;return this.broadcastWebSocket=this._connect(t.url+"broadcast"),this.broadcastWebSocket.onopen=function(e){t.broadcastWebSocket.isOpen=!0,e.eventType="broadcastSocketConnected",t.events.triggerEvent("broadcastSocketConnected",e)},this.broadcastWebSocket.onclose=function(e){t.broadcastWebSocket.isOpen=!1,e.eventType="broadcastSocketConnected",t.events.triggerEvent("broadcastSocketConnected",e)},this.broadcastWebSocket.onerror=function(e){e.eventType="broadcastSocketError",t.events.triggerEvent("broadcastSocketError",e)},this}},{key:"broadcast",value:function(e){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(e)),this.events.triggerEvent("broadcastSuccessed")):this.events.triggerEvent("broadcastFailed")}},{key:"initSubscribe",value:function(){var t=this;return this.subscribeWebSocket=this._connect(this.url+"subscribe"),this.subscribeWebSocket.onopen=function(e){t.subscribeWebSocket.send(t._getFilterParams()),e.eventType="subscribeSocketConnected",t.events.triggerEvent("subscribeSocketConnected",e)},this.subscribeWebSocket.onerror=function(e){e.eventType="subscribeSocketError",t.events.triggerEvent("subscribeSocketError",e)},this.subscribeWebSocket.onmessage=function(e){t._onMessage(e)},this}},{key:"setExcludeField",value:function(e){return this.excludeField=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"setGeometry",value:function(e){return this.geometry=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"unSubscribe",value:function(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}},{key:"unBroadcast",value:function(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}},{key:"destroy",value:function(){a.CommonServiceBase.prototype.destroy.apply(this,arguments);this.geometry=null,this.prjCoordSys=null,this.excludeField=null,this.unBroadcast(),this.unSubscribe()}},{key:"_getFilterParams",value:function(){var e={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return o.Util.toJSON(e)}},{key:"_onMessage",value:function(e){if(e.data&&0<e.data.indexOf("filterParam")){var t=JSON.parse(e.data);return e.filterParam=t,e.eventType="setFilterParamSuccessed",void this.events.triggerEvent("setFilterParamSuccessed",e)}var r=JSON.parse(e.data);e.featureResult=r,e.eventType="messageSuccessed",this.events.triggerEvent("messageSuccessed",e)}},{key:"_connect",value:function(e){return e=this._appendCredentials(e),"WebSocket"in window?new WebSocket(e):"MozWebSocket"in window?new(0,window.MozWebSocket)(e):(console.log("no WebSocket"),null)}},{key:"_appendCredentials",value:function(e){var t=s.SecurityManager.getToken(e);return t&&(e+="?token="+t),e}}]),i}();i.SuperMap.DataFlowService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComputeWeightMatrixService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(280),s=r(14);var l=t.ComputeWeightMatrixService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.ComputeWeightMatrixService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.NetworkAnalystServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof o.ComputeWeightMatrixParameters){var t,r=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===r?"weightmatrix":"/weightmatrix")+".json?",t={parameter:a.Util.toJSON(e.parameter),nodes:this.getJson(e.isAnalyzeById,e.nodes)},this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var i=0;i<n;i++)0<i&&(r+=","),r+='{"x":'+t[i].x+',"y":'+t[i].y+"}";else if(1==e)for(var a=0;a<n;a++)0<a&&(r+=","),r+=t[a];return r+="]"}}]),n}();n.SuperMap.ComputeWeightMatrixService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChartQueryService=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),o=r(1),s=r(3),l=r(6),u=r(36),c=r(283),h=r(16);function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=t.ChartQueryService=function(e){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=f(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));t=t||{},r.returnContent=null,r.format=s.DataFormat.GEOJSON,t&&o.Util.extend(r,t);var n,i=r;return t&&t.format&&(i.format=t.format.toUpperCase()),i.url?(n=i.url.substr(i.url.length-1,1),i.url+="/"===n?"queryResults.json?":"/queryResults.json?",r.CLASS_NAME="SuperMap.ChartQueryService",r):f(r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,l.CommonServiceBase),n(a,[{key:"destroy",value:function(){l.CommonServiceBase.prototype.destroy.apply(this,arguments),this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){if(e instanceof c.ChartQueryParameters){var t;this.returnContent=e.returnContent,t=e.getVariablesJson(),this.returnContent&&(this.url+="returnContent="+this.returnContent),this.request({method:"POST",data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){if((e=o.Util.transformResult(e))&&e.recordsets&&this.format===s.DataFormat.GEOJSON)for(var t=0,r=e.recordsets,n=r.length;t<n;t++)if(r[t].features){var i=new h.GeoJSON;r[t].features=JSON.parse(i.write(r[t].features))}this.events.triggerEvent("processCompleted",{result:e})}},{key:"getQueryParameters",value:function(e){return new u.QueryParameters({queryMode:e.queryMode,bounds:e.bounds,chartLayerNames:e.chartLayerNames,chartQueryFilterParameters:e.chartQueryFilterParameters,returnContent:e.returnContent})}}]),a}();i.SuperMap.ChartQueryService=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChartFeatureInfoSpecsService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(6);var s=t.ChartFeatureInfoSpecsService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.CommonServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this),a.Util.reset(this)}},{key:"processAsync",value:function(){var e=this,t=e.url.substr(e.url.length-1,1);e.isTempLayers?e.url+=".json?":(e.url+="/"===t?"":"/",e.url+="chartFeatureInfoSpecs.json?"),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}]),n}();n.SuperMap.ChartFeatureInfoSpecsService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BurstPipelineAnalystService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(14),o=r(285);var s=t.BurstPipelineAnalystService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.BurstPipelineAnalystService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.NetworkAnalystServiceBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(!(e instanceof o.BurstPipelineAnalystParameters))return null;var t,r=this.url.substr(this.url.length-1,1);if(this.url=this.url+("/"===r?"burstAnalyse":"/burstAnalyse")+".json?",t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===e.edgeID&&null===e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}]),n}();n.SuperMap.BurstPipelineAnalystService=s},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BuffersAnalystJobsService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},o=n(0),s=n(17),l=n(286);var u=r.BuffersAnalystJobsService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.url+="/spatialanalyst/buffers",r.CLASS_NAME="SuperMap.BuffersAnalystJobsService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.ProcessingServiceBase),i(n,[{key:"destroy",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"getBuffersJobs",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url)}},{key:"getBuffersJob",value:function(e){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addBuffersJob",value:function(e,t){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addJob",this).call(this,this.url,e,l.BuffersAnalystJobsParameter,t)}}]),n}();o.SuperMap.BuffersAnalystJobsService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferAnalystService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(1),o=r(10),s=r(289),l=r(120);var u=t.BufferAnalystService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.mode=null,t&&a.Util.extend(r,t),r.CLASS_NAME="SuperMap.BufferAnalystService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.SpatialAnalystBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},r=this;"/"!==r.url.substr(r.url.length-1,1)&&(r.url+="/"),e instanceof s.DatasetBufferAnalystParameters?(r.mode="datasets",r.url+="datasets/"+e.dataset+"/buffer",s.DatasetBufferAnalystParameters.toObject(e,t)):e instanceof l.GeometryBufferAnalystParameters&&(r.mode="geometry",r.url+="geometry/buffer",l.GeometryBufferAnalystParameters.toObject(e,t));var n=a.Util.toJSON(t);r.url+=".json?returnContent=true",r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}]),n}();n.SuperMap.BufferAnalystService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AreaSolarRadiationService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),n=r(0),a=r(10),o=r(292),s=r(1);var l=t.AreaSolarRadiationService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.AreaSolarRadiationService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.SpatialAnalystBase),i(n,[{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof o.AreaSolarRadiationParameters){"/"!==this.url.substr(this.url.length-1,1)&&(this.url+="/");var t={};e instanceof o.AreaSolarRadiationParameters&&(this.url+="datasets/"+e.dataset+"/solarradiation"),o.AreaSolarRadiationParameters.toObject(e,t);var r=s.Util.toJSON(t);this.url+=".json?returnContent=true",this.request({method:"POST",data:r,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}]),n}();n.SuperMap.AreaSolarRadiationService=l},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AddressMatchService=undefined;var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},o=n(0),s=n(6),l=n(20),u=n(294),c=n(293);var h=r.AddressMatchService=function(e){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.CLASS_NAME="SuperMap.AddressMatchService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.CommonServiceBase),i(n,[{key:"destroy",value:function(){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"code",value:function(e,t){t instanceof u.GeoCodingParameter&&this.processAsync(e,t)}},{key:"decode",value:function(e,t){t instanceof c.GeoDecodingParameter&&this.processAsync(e,t)}},{key:"processAsync",value:function(e,t){var r=this;l.FetchRequest.get(e,t,{proxy:r.proxy}).then(function(e){return e.json()}).then(function(e){e?r.serviceProcessCompleted(e):r.serviceProcessFailed(e)})["catch"](function(e){r.eventListeners.processFailed({error:e})})}},{key:"serviceProcessCompleted",value:function(e){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"serviceProcessCompleted",this).call(this,e)}},{key:"serviceProcessFailed",value:function(e){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"serviceProcessFailed",this).call(this,e)}}]),n}();o.SuperMap.AddressMatchService=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorClipJobsService=t.VectorClipJobsParameter=t.Vector=t.UpdateTurnNodeWeightService=t.UpdateTurnNodeWeightParameters=t.UpdateEdgeWeightService=t.UpdateEdgeWeightParameters=t.UGCSubLayer=t.UGCMapLayer=t.UGCLayer=t.TransferSolutionParameters=t.TransportationAnalystResultSetting=t.TransportationAnalystParameter=t.TransferSolutionService=t.TransferPathService=t.TransferPathParameters=t.TransferLine=t.TopologyValidatorJobsService=undefined,t.TopologyValidatorJobsParameter=t.TilesetsService=t.GeometryBatchAnalystService=t.ThiessenAnalystService=t.ThiessenAnalystParameters=t.ThemeUniqueItem=t.ThemeUnique=t.ThemeService=t.ThemeRangeItem=t.ThemeRange=t.ThemeParameters=t.ThemeOffset=t.ThemeMemoryData=t.ThemeLabelUniqueItem=t.ThemeLabelText=t.ThemeLabelItem=t.ThemeLabelBackground=t.ThemeLabelAlongLine=t.ThemeLabel=t.ThemeGridUniqueItem=t.ThemeGridUnique=t.ThemeGridRangeItem=t.ThemeGridRange=t.ThemeGraphText=t.ThemeGraphSize=t.ThemeGraphItem=t.ThemeGraphAxes=t.ThemeGraph=t.ThemeGraduatedSymbolStyle=t.ThemeGraduatedSymbol=t.ThemeFlow=t.ThemeDotDensity=t.Theme=t.TerrainCurvatureCalculationService=t.TerrainCurvatureCalculationParameters=t.SurfaceAnalystService=t.SurfaceAnalystParametersSetting=t.SurfaceAnalystParameters=t.SupplyCenter=t.SummaryRegionJobsService=t.SummaryRegionJobParameter=t.SummaryMeshJobsService=t.SummaryMeshJobParameter=t.SummaryAttributesJobsService=t.SummaryAttributesJobsParameter=t.StopQueryService=t.StopQueryParameters=t.SpatialAnalystBase=t.SingleObjectQueryJobsService=t.SingleObjectQueryJobsParameter=t.SetLayerStatusService=t.SetLayerStatusParameters=t.SetLayersInfoService=t.SetLayersInfoParameters=t.SetLayerInfoService=t.SetLayerInfoParameters=t.ServerTheme=t.ServerTextStyle=t.ServerStyle=t.ServerGeometry=t.ServerFeature=t.ServerColor=t.RouteLocatorService=t.RouteLocatorParameters=t.RouteCalculateMeasureService=t.RouteCalculateMeasureParameters=t.Route=t.QueryService=t.QueryParameters=t.QueryBySQLService=t.QueryBySQLParameters=t.QueryByGeometryService=t.QueryByGeometryParameters=t.QueryByDistanceService=t.QueryByDistanceParameters=t.QueryByBoundsService=t.QueryByBoundsParameters=t.ProcessingServiceBase=t.PointWithMeasure=t.OverlayGeoJobsService=t.OverlayGeoJobParameter=t.OverlayAnalystService=t.OverlayAnalystParameters=t.OutputSetting=t.OverlapDisplayedOptions=t.NetworkAnalystServiceBase=t.MeasureService=t.MeasureParameters=t.MathExpressionAnalysisService=t.MathExpressionAnalysisParameters=t.MapService=t.LinkItem=t.LayerStatus=t.LabelThemeCell=t.LabelSymbolCell=t.LabelMixedTextStyle=t.LabelMatrixCell=t.LabelImageCell=t.KernelDensityJobsService=t.KernelDensityJobParameter=undefined,t.JoinItem=t.InterpolationRBFAnalystParameters=t.InterpolationKrigingAnalystParameters=t.InterpolationIDWAnalystParameters=t.InterpolationAnalystService=t.InterpolationAnalystParameters=t.UGCImage=t.Grid=t.GetLayersInfoService=t.GetGridCellInfosService=t.GetGridCellInfosParameters=t.GetFieldsService=t.GetFeaturesServiceBase=t.GetFeaturesParametersBase=t.GetFeaturesBySQLService=t.GetFeaturesBySQLParameters=t.GetFeaturesByIDsService=t.GetFeaturesByIDsParameters=t.GetFeaturesByGeometryService=t.GetFeaturesByGeometryParameters=t.GetFeaturesByBufferService=t.GetFeaturesByBufferParameters=t.GetFeaturesByBoundsService=t.GetFeaturesByBoundsParameters=t.GeoRelationAnalystService=t.GeoRelationAnalystParameters=t.GeometryThiessenAnalystParameters=t.GeometrySurfaceAnalystParameters=t.GeometryOverlayAnalystParameters=t.GeometryBufferAnalystParameters=t.GeoHashGridAggParameter=t.GeoDecodingParameter=t.GeoCodingParameter=t.GeoBoundingBoxQueryBuilderParameter=t.GenerateSpatialDataService=t.GenerateSpatialDataParameters=t.FindTSPPathsService=t.FindTSPPathsParameters=t.FindServiceAreasService=t.FindServiceAreasParameters=t.FindPathService=t.FindPathParameters=t.FindMTSPPathsService=t.FindMTSPPathsParameters=t.FindLocationService=t.FindLocationParameters=t.FindClosestFacilitiesService=t.FindClosestFacilitiesParameters=t.FilterParameter=t.FieldStatisticsParameters=t.FieldStatisticService=t.FieldParameters=t.FilterAggParameter=t.FacilityAnalystUpstream3DService=t.FacilityAnalystUpstream3DParameters=t.FacilityAnalystTraceup3DService=t.FacilityAnalystTraceup3DParameters=t.FacilityAnalystTracedown3DService=t.FacilityAnalystTracedown3DParameters=t.FacilityAnalystStreamService=t.FacilityAnalystStreamParameters=t.FacilityAnalystSources3DService=t.FacilityAnalystSources3DParameters=t.FacilityAnalystSinks3DService=t.FacilityAnalystSinks3DParameters=t.FacilityAnalyst3DParameters=t.EditFeaturesService=t.EditFeaturesParameters=t.DensityKernelAnalystParameters=t.DensityAnalystService=t.DatasourceConnectionInfo=t.DatasetThiessenAnalystParameters=t.DatasetSurfaceAnalystParameters=t.DatasetOverlayAnalystParameters=t.DatasetInfo=t.DatasetBufferAnalystParameters=t.DataReturnOption=t.DataFlowService=t.ComputeWeightMatrixService=t.ComputeWeightMatrixParameters=t.CommonServiceBase=t.ColorDictionary=t.ClipParameter=t.ChartQueryService=t.ChartQueryParameters=t.ChartQueryFilterParameter=t.ChartFeatureInfoSpecsService=t.BurstPipelineAnalystService=t.BurstPipelineAnalystParameters=t.BufferSetting=t.BuffersAnalystJobsService=t.BuffersAnalystJobsParameter=t.BufferDistance=t.BufferAnalystService=t.BufferAnalystParameters=t.AreaSolarRadiationService=t.AreaSolarRadiationParameters=t.AggregationParameter=t.AggQueryBuilderParameter=t.AddressMatchService=undefined;var n=r(507),i=r(124),a=r(123),o=r(292),s=r(506),l=r(122),u=r(505),c=r(290),h=r(286),f=r(504),p=r(291),y=r(285),d=r(503),v=r(502),m=r(284),g=r(283),b=r(501),S=r(282),_=r(281),P=r(6),O=r(280),T=r(500),w=r(499),M=r(58),C=r(289),x=r(278),E=r(277),A=r(276),L=r(274),k=r(121),j=r(498),F=r(273),I=r(272),R=r(497),N=r(43),D=r(271),G=r(496),B=r(270),U=r(495),V=r(269),J=r(494),z=r(268),q=r(493),H=r(267),W=r(492),Q=r(266),Y=r(491),X=r(490),K=r(265),Z=r(489),$=r(264),ee=r(15),te=r(263),re=r(488),ne=r(262),ie=r(487),ae=r(261),oe=r(486),se=r(260),le=r(485),ue=r(259),ce=r(484),he=r(258),fe=r(483),pe=r(257),ye=r(482),de=r(481),ve=r(294),me=r(293),ge=r(480),be=r(120),Se=r(118),_e=r(256),Pe=r(117),Oe=r(255),Te=r(479),we=r(254),Me=r(478),Ce=r(253),xe=r(477),Ee=r(252),Ae=r(476),Le=r(251),ke=r(475),je=r(250),Fe=r(474),Ie=r(42),Re=r(41),Ne=r(473),De=r(249),Ge=r(472),Be=r(471),Ue=r(233),Ve=r(232),Je=r(33),ze=r(470),qe=r(229),He=r(228),We=r(230),Qe=r(82),Ye=r(227),Xe=r(468),Ke=r(226),Ze=r(75),$e=r(244),et=r(225),tt=r(224),rt=r(223),nt=r(288),it=r(467),at=r(222),ot=r(466),st=r(221),lt=r(465),ut=r(14),ct=r(18),ht=r(234),ft=r(119),pt=r(464),yt=r(220),dt=r(463),vt=r(287),mt=r(17),gt=r(219),bt=r(462),St=r(218),_t=r(461),Pt=r(217),Ot=r(460),Tt=r(216),wt=r(459),Mt=r(36),Ct=r(56),xt=r(81),Et=r(215),At=r(458),Lt=r(214),kt=r(457),jt=r(19),Ft=r(456),It=r(9),Rt=r(13),Nt=r(34),Dt=r(248),Gt=r(213),Bt=r(455),Ut=r(212),Vt=r(454),Jt=r(211),zt=r(453),qt=r(210),Ht=r(452),Wt=r(10),Qt=r(209),Yt=r(451),Xt=r(208),Kt=r(450),Zt=r(207),$t=r(449),er=r(206),tr=r(448),rr=r(447),nr=r(80),ir=r(275),ar=r(446),or=r(205),sr=r(445),lr=r(25),ur=r(113),cr=r(77),hr=r(112),fr=r(237),pr=r(114),yr=r(241),dr=r(238),vr=r(240),mr=r(239),gr=r(204),br=r(203),Sr=r(202),_r=r(201),Pr=r(78),Or=r(243),Tr=r(242),wr=r(246),Mr=r(245),Cr=r(444),xr=r(247),Er=r(76),Ar=r(200),Lr=r(111),kr=r(236),jr=r(443),Fr=r(115),Ir=r(116),Rr=r(79),Nr=r(442),Dr=r(441),Gr=r(440),Br=r(199),Ur=r(439),Vr=r(198),Jr=r(197),zr=r(438),qr=r(437),Hr=r(35),Wr=r(279),Qr=r(196),Yr=r(110),Xr=r(235),Kr=r(57),Zr=r(195),$r=r(436),en=r(194),tn=r(435),rn=r(231),nn=r(193),an=r(434);t.AddressMatchService=n.AddressMatchService,t.AggQueryBuilderParameter=i.AggQueryBuilderParameter,t.AggregationParameter=a.AggregationParameter,t.AreaSolarRadiationParameters=o.AreaSolarRadiationParameters,t.AreaSolarRadiationService=s.AreaSolarRadiationService,t.BufferAnalystParameters=l.BufferAnalystParameters,t.BufferAnalystService=u.BufferAnalystService,t.BufferDistance=c.BufferDistance,t.BuffersAnalystJobsParameter=h.BuffersAnalystJobsParameter,t.BuffersAnalystJobsService=f.BuffersAnalystJobsService,t.BufferSetting=p.BufferSetting,t.BurstPipelineAnalystParameters=y.BurstPipelineAnalystParameters,t.BurstPipelineAnalystService=d.BurstPipelineAnalystService,t.ChartFeatureInfoSpecsService=v.ChartFeatureInfoSpecsService,t.ChartQueryFilterParameter=m.ChartQueryFilterParameter,t.ChartQueryParameters=g.ChartQueryParameters,t.ChartQueryService=b.ChartQueryService,t.ClipParameter=S.ClipParameter,t.ColorDictionary=_.ColorDictionary,t.CommonServiceBase=P.CommonServiceBase,t.ComputeWeightMatrixParameters=O.ComputeWeightMatrixParameters,t.ComputeWeightMatrixService=T.ComputeWeightMatrixService,t.DataFlowService=w.DataFlowService,t.DataReturnOption=M.DataReturnOption,t.DatasetBufferAnalystParameters=C.DatasetBufferAnalystParameters,t.DatasetInfo=x.DatasetInfo,t.DatasetOverlayAnalystParameters=E.DatasetOverlayAnalystParameters,t.DatasetSurfaceAnalystParameters=A.DatasetSurfaceAnalystParameters,t.DatasetThiessenAnalystParameters=L.DatasetThiessenAnalystParameters,t.DatasourceConnectionInfo=k.DatasourceConnectionInfo,t.DensityAnalystService=j.DensityAnalystService,t.DensityKernelAnalystParameters=F.DensityKernelAnalystParameters,t.EditFeaturesParameters=I.EditFeaturesParameters,t.EditFeaturesService=R.EditFeaturesService,t.FacilityAnalyst3DParameters=N.FacilityAnalyst3DParameters,t.FacilityAnalystSinks3DParameters=D.FacilityAnalystSinks3DParameters,t.FacilityAnalystSinks3DService=G.FacilityAnalystSinks3DService,t.FacilityAnalystSources3DParameters=B.FacilityAnalystSources3DParameters,t.FacilityAnalystSources3DService=U.FacilityAnalystSources3DService,t.FacilityAnalystStreamParameters=V.FacilityAnalystStreamParameters,t.FacilityAnalystStreamService=J.FacilityAnalystStreamService,t.FacilityAnalystTracedown3DParameters=z.FacilityAnalystTracedown3DParameters,t.FacilityAnalystTracedown3DService=q.FacilityAnalystTracedown3DService,t.FacilityAnalystTraceup3DParameters=H.FacilityAnalystTraceup3DParameters,t.FacilityAnalystTraceup3DService=W.FacilityAnalystTraceup3DService,t.FacilityAnalystUpstream3DParameters=Q.FacilityAnalystUpstream3DParameters,t.FacilityAnalystUpstream3DService=Y.FacilityAnalystUpstream3DService,t.FilterAggParameter=X.FilterAggParameter,t.FieldParameters=K.FieldParameters,t.FieldStatisticService=Z.FieldStatisticService,t.FieldStatisticsParameters=$.FieldStatisticsParameters,t.FilterParameter=ee.FilterParameter,t.FindClosestFacilitiesParameters=te.FindClosestFacilitiesParameters,t.FindClosestFacilitiesService=re.FindClosestFacilitiesService,t.FindLocationParameters=ne.FindLocationParameters,t.FindLocationService=ie.FindLocationService,t.FindMTSPPathsParameters=ae.FindMTSPPathsParameters,t.FindMTSPPathsService=oe.FindMTSPPathsService,t.FindPathParameters=se.FindPathParameters,t.FindPathService=le.FindPathService,t.FindServiceAreasParameters=ue.FindServiceAreasParameters,t.FindServiceAreasService=ce.FindServiceAreasService,t.FindTSPPathsParameters=he.FindTSPPathsParameters,t.FindTSPPathsService=fe.FindTSPPathsService,t.GenerateSpatialDataParameters=pe.GenerateSpatialDataParameters,t.GenerateSpatialDataService=ye.GenerateSpatialDataService,t.GeoBoundingBoxQueryBuilderParameter=de.GeoBoundingBoxQueryBuilderParameter,t.GeoCodingParameter=ve.GeoCodingParameter,t.GeoDecodingParameter=me.GeoDecodingParameter,t.GeoHashGridAggParameter=ge.GeoHashGridAggParameter,t.GeometryBufferAnalystParameters=be.GeometryBufferAnalystParameters,t.GeometryOverlayAnalystParameters=Se.GeometryOverlayAnalystParameters,t.GeometrySurfaceAnalystParameters=_e.GeometrySurfaceAnalystParameters,t.GeometryThiessenAnalystParameters=Pe.GeometryThiessenAnalystParameters,t.GeoRelationAnalystParameters=Oe.GeoRelationAnalystParameters,t.GeoRelationAnalystService=Te.GeoRelationAnalystService,t.GetFeaturesByBoundsParameters=we.GetFeaturesByBoundsParameters,t.GetFeaturesByBoundsService=Me.GetFeaturesByBoundsService,t.GetFeaturesByBufferParameters=Ce.GetFeaturesByBufferParameters,t.GetFeaturesByBufferService=xe.GetFeaturesByBufferService,t.GetFeaturesByGeometryParameters=Ee.GetFeaturesByGeometryParameters,t.GetFeaturesByGeometryService=Ae.GetFeaturesByGeometryService,t.GetFeaturesByIDsParameters=Le.GetFeaturesByIDsParameters,t.GetFeaturesByIDsService=ke.GetFeaturesByIDsService,t.GetFeaturesBySQLParameters=je.GetFeaturesBySQLParameters,t.GetFeaturesBySQLService=Fe.GetFeaturesBySQLService,t.GetFeaturesParametersBase=Ie.GetFeaturesParametersBase,t.GetFeaturesServiceBase=Re.GetFeaturesServiceBase,t.GetFieldsService=Ne.GetFieldsService,t.GetGridCellInfosParameters=De.GetGridCellInfosParameters,t.GetGridCellInfosService=Ge.GetGridCellInfosService,t.GetLayersInfoService=Be.GetLayersInfoService,t.Grid=Ue.Grid,t.UGCImage=Ve.UGCImage,t.InterpolationAnalystParameters=Je.InterpolationAnalystParameters,t.InterpolationAnalystService=ze.InterpolationAnalystService,t.InterpolationIDWAnalystParameters=qe.InterpolationIDWAnalystParameters,t.InterpolationKrigingAnalystParameters=He.InterpolationKrigingAnalystParameters,t.InterpolationRBFAnalystParameters=We.InterpolationRBFAnalystParameters,t.JoinItem=Qe.JoinItem,t.KernelDensityJobParameter=Ye.KernelDensityJobParameter,t.KernelDensityJobsService=Xe.KernelDensityJobsService,t.LabelImageCell=Ke.LabelImageCell,t.LabelMatrixCell=Ze.LabelMatrixCell,t.LabelMixedTextStyle=$e.LabelMixedTextStyle,t.LabelSymbolCell=et.LabelSymbolCell,t.LabelThemeCell=tt.LabelThemeCell,t.LayerStatus=rt.LayerStatus,t.LinkItem=nt.LinkItem,t.MapService=it.MapService,t.MathExpressionAnalysisParameters=at.MathExpressionAnalysisParameters,t.MathExpressionAnalysisService=ot.MathExpressionAnalysisService,t.MeasureParameters=st.MeasureParameters,t.MeasureService=lt.MeasureService,t.NetworkAnalystServiceBase=ut.NetworkAnalystServiceBase,t.OverlapDisplayedOptions=ht.OverlapDisplayedOptions,t.OutputSetting=ct.OutputSetting,t.OverlayAnalystParameters=ft.OverlayAnalystParameters,t.OverlayAnalystService=pt.OverlayAnalystService,t.OverlayGeoJobParameter=yt.OverlayGeoJobParameter,t.OverlayGeoJobsService=dt.OverlayGeoJobsService,t.PointWithMeasure=vt.PointWithMeasure,t.ProcessingServiceBase=mt.ProcessingServiceBase,t.QueryByBoundsParameters=gt.QueryByBoundsParameters,t.QueryByBoundsService=bt.QueryByBoundsService,t.QueryByDistanceParameters=St.QueryByDistanceParameters,t.QueryByDistanceService=_t.QueryByDistanceService,t.QueryByGeometryParameters=Pt.QueryByGeometryParameters,t.QueryByGeometryService=Ot.QueryByGeometryService,t.QueryBySQLParameters=Tt.QueryBySQLParameters,t.QueryBySQLService=wt.QueryBySQLService,t.QueryParameters=Mt.QueryParameters,t.QueryService=Ct.QueryService,t.Route=xt.Route,t.RouteCalculateMeasureParameters=Et.RouteCalculateMeasureParameters,t.RouteCalculateMeasureService=At.RouteCalculateMeasureService,t.RouteLocatorParameters=Lt.RouteLocatorParameters,t.RouteLocatorService=kt.RouteLocatorService,t.ServerColor=jt.ServerColor,t.ServerFeature=Ft.ServerFeature,t.ServerGeometry=It.ServerGeometry,t.ServerStyle=Rt.ServerStyle,t.ServerTextStyle=Nt.ServerTextStyle,t.ServerTheme=Dt.ServerTheme,t.SetLayerInfoParameters=Gt.SetLayerInfoParameters,t.SetLayerInfoService=Bt.SetLayerInfoService,t.SetLayersInfoParameters=Ut.SetLayersInfoParameters,t.SetLayersInfoService=Vt.SetLayersInfoService,t.SetLayerStatusParameters=Jt.SetLayerStatusParameters,t.SetLayerStatusService=zt.SetLayerStatusService,t.SingleObjectQueryJobsParameter=qt.SingleObjectQueryJobsParameter,t.SingleObjectQueryJobsService=Ht.SingleObjectQueryJobsService,t.SpatialAnalystBase=Wt.SpatialAnalystBase,t.StopQueryParameters=Qt.StopQueryParameters,t.StopQueryService=Yt.StopQueryService,t.SummaryAttributesJobsParameter=Xt.SummaryAttributesJobsParameter,t.SummaryAttributesJobsService=Kt.SummaryAttributesJobsService,t.SummaryMeshJobParameter=Zt.SummaryMeshJobParameter,t.SummaryMeshJobsService=$t.SummaryMeshJobsService,t.SummaryRegionJobParameter=er.SummaryRegionJobParameter,t.SummaryRegionJobsService=tr.SummaryRegionJobsService,t.SupplyCenter=rr.SupplyCenter,t.SurfaceAnalystParameters=nr.SurfaceAnalystParameters,t.SurfaceAnalystParametersSetting=ir.SurfaceAnalystParametersSetting,t.SurfaceAnalystService=ar.SurfaceAnalystService,t.TerrainCurvatureCalculationParameters=or.TerrainCurvatureCalculationParameters,t.TerrainCurvatureCalculationService=sr.TerrainCurvatureCalculationService,t.Theme=lr.Theme,t.ThemeDotDensity=ur.ThemeDotDensity,t.ThemeFlow=cr.ThemeFlow,t.ThemeGraduatedSymbol=hr.ThemeGraduatedSymbol,t.ThemeGraduatedSymbolStyle=fr.ThemeGraduatedSymbolStyle,t.ThemeGraph=pr.ThemeGraph,t.ThemeGraphAxes=yr.ThemeGraphAxes,t.ThemeGraphItem=dr.ThemeGraphItem,t.ThemeGraphSize=vr.ThemeGraphSize,t.ThemeGraphText=mr.ThemeGraphText,t.ThemeGridRange=gr.ThemeGridRange,t.ThemeGridRangeItem=br.ThemeGridRangeItem,t.ThemeGridUnique=Sr.ThemeGridUnique,t.ThemeGridUniqueItem=_r.ThemeGridUniqueItem,t.ThemeLabel=Pr.ThemeLabel,t.ThemeLabelAlongLine=Or.ThemeLabelAlongLine,t.ThemeLabelBackground=Tr.ThemeLabelBackground,t.ThemeLabelItem=wr.ThemeLabelItem,t.ThemeLabelText=Mr.ThemeLabelText,t.ThemeLabelUniqueItem=Cr.ThemeLabelUniqueItem,t.ThemeMemoryData=xr.ThemeMemoryData,t.ThemeOffset=Er.ThemeOffset,t.ThemeParameters=Ar.ThemeParameters,t.ThemeRange=Lr.ThemeRange,t.ThemeRangeItem=kr.ThemeRangeItem,t.ThemeService=jr.ThemeService,t.ThemeUnique=Fr.ThemeUnique,t.ThemeUniqueItem=Ir.ThemeUniqueItem,t.ThiessenAnalystParameters=Rr.ThiessenAnalystParameters,t.ThiessenAnalystService=Nr.ThiessenAnalystService,t.GeometryBatchAnalystService=Dr.GeometryBatchAnalystService,t.TilesetsService=Gr.TilesetsService,t.TopologyValidatorJobsParameter=Br.TopologyValidatorJobsParameter,t.TopologyValidatorJobsService=Ur.TopologyValidatorJobsService,t.TransferLine=Vr.TransferLine,t.TransferPathParameters=Jr.TransferPathParameters,t.TransferPathService=zr.TransferPathService,t.TransferSolutionService=qr.TransferSolutionService,t.TransportationAnalystParameter=Hr.TransportationAnalystParameter,t.TransportationAnalystResultSetting=Wr.TransportationAnalystResultSetting,t.TransferSolutionParameters=Qr.TransferSolutionParameters,t.UGCLayer=Yr.UGCLayer,t.UGCMapLayer=Xr.UGCMapLayer,t.UGCSubLayer=Kr.UGCSubLayer,t.UpdateEdgeWeightParameters=Zr.UpdateEdgeWeightParameters,t.UpdateEdgeWeightService=$r.UpdateEdgeWeightService,t.UpdateTurnNodeWeightParameters=en.UpdateTurnNodeWeightParameters,t.UpdateTurnNodeWeightService=tn.UpdateTurnNodeWeightService,t.Vector=rn.Vector,t.VectorClipJobsParameter=nn.VectorClipJobsParameter,t.VectorClipJobsService=an.VectorClipJobsService},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPortal=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(298),o=r(297),s=r(20),l=r(296),u=r(295),c=r(83);var h=t.IPortal=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.iportalUrl=e,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,c.IPortalServiceBase),n(r,[{key:"load",value:function(){return s.FetchRequest.get(this.iportalUrl+"/web")}},{key:"queryServices",value:function(e){if(!(e instanceof a.IPortalServicesQueryParam))return null;var r=this.iportalUrl+"/web/services";return this.request("GET",r,e).then(function(e){var t=[];return e.content.map(function(e){return t.push(new l.IPortalService(r,e)),e}),t})}},{key:"deleteServices",value:function(e){var t=this.iportalUrl+"/web/services";return this.request("DELETE",t,{ids:e})}},{key:"queryMaps",value:function(e){if(!(e instanceof o.IPortalMapsQueryParam))return null;var n=this.iportalUrl+"/web/maps";return this.request("GET",n,e).then(function(e){var t={},r=[];return e.content.map(function(e){return r.push(new u.IPortalMap(n+"/"+e.id,e)),e}),t.content=r,t.currentPage=e.currentPage,t.pageSize=e.pageSize,t.total=e.total,t.totalPage=e.totalPage,t})}}]),r}();i.SuperMap.iPortal=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPortalServicesQueryParam=t.IPortalServiceBase=t.IPortalService=t.IPortalMapsQueryParam=t.IPortalMap=t.IPortal=undefined;var n=r(509),i=r(295),a=r(297),o=r(296),s=r(83),l=r(298);t.IPortal=n.IPortal,t.IPortalMap=i.IPortalMap,t.IPortalMapsQueryParam=a.IPortalMapsQueryParam,t.IPortalService=o.IPortalService,t.IPortalServiceBase=s.IPortalServiceBase,t.IPortalServicesQueryParam=l.IPortalServicesQueryParam},function(e,t,r){"use strict";var n,i,a;undefined,i=[t,e],(a="function"==typeof(n=function(e,t){var r={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function h(e){try{delete window[e]}catch(t){window[e]=undefined}}function f(e){var t=document.getElementById(e);document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(a){var o=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],s=a,l=o.timeout||r.timeout,u=o.jsonpCallback||r.jsonpCallback,c=undefined;return new Promise(function(t,e){var r=o.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),n=u+"_"+r;window[r]=function(e){t({ok:!0,json:function(){return Promise.resolve(e)}}),c&&clearTimeout(c),f(n),h(r)},s+=-1===s.indexOf("?")?"?":"&";var i=document.createElement("script");i.setAttribute("src",""+s+u+"="+r),i.id=n,document.getElementsByTagName("head")[0].appendChild(i),c=setTimeout(function(){e(new Error("JSONP request to "+a+" timed out")),h(r),f(n)},l)})}})?n.apply(t,i):n)===undefined||(e.exports=a)},function(y,e,t){"use strict";!function(e){if(e.__disableNativeFetch||!e.fetch){c.prototype.append=function(e,t){e=n(e),t=i(t);var r=this.map[e];r||(r=[],this.map[e]=r),r.push(t)},c.prototype["delete"]=function(e){delete this.map[n(e)]},c.prototype.get=function(e){var t=this.map[n(e)];return t?t[0]:null},c.prototype.getAll=function(e){return this.map[n(e)]||[]},c.prototype.has=function(e){return this.map.hasOwnProperty(n(e))},c.prototype.set=function(e,t){this.map[n(e)]=[i(t)]},c.prototype.forEach=function(r,n){Object.getOwnPropertyNames(this.map).forEach(function(t){this.map[t].forEach(function(e){r.call(n,e,t,this)},this)},this)};var u={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e},a=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},o.call(f.prototype),o.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},p.error=function(){var e=new p(null,{status:0,statusText:""});return e.type="error",e};var r=[301,302,303,307,308];p.redirect=function(e,t){if(-1===r.indexOf(t))throw new RangeError("Invalid status code");return new p(null,{status:t,headers:{location:e}})},e.Headers=c,e.Request=f,e.Response=p,e.fetch=function(n,i){return new Promise(function(a,o){var e;e=f.prototype.isPrototypeOf(n)&&!i?n:new f(n,i);var s=new XMLHttpRequest;var l=!1;function t(){if(4===s.readyState){var e=1223===s.status?204:s.status;if(e<100||599<e){if(l)return;return l=!0,void o(new TypeError("Network request failed"))}var t,i,r={status:e,statusText:s.statusText,headers:(t=s,i=new c,t.getAllResponseHeaders().trim().split("\n").forEach(function(e){var t=e.trim().split(":"),r=t.shift().trim(),n=t.join(":").trim();i.append(r,n)}),i),url:"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0},n="response"in s?s.response:s.responseText;l||(l=!0,a(new p(n,r)))}}s.onreadystatechange=t,s.onload=t,s.onerror=function(){l||(l=!0,o(new TypeError("Network request failed")))},s.open(e.method,e.url,!0);try{"include"===e.credentials&&("withCredentials"in s?s.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(r){console&&console.warn&&console.warn("set withCredentials error:"+r)}"responseType"in s&&u.blob&&(s.responseType="blob"),e.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send("undefined"==typeof e._bodyInit?null:e._bodyInit)})},e.fetch.polyfill=!0,void 0!==y&&y.exports&&(y.exports=e.fetch)}function n(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function c(t){this.map={},t instanceof c?t.forEach(function(e,t){this.append(t,e)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(r){return new Promise(function(e,t){r.onload=function(){e(r.result)},r.onerror=function(){t(r.error)}})}function t(e){var t=new FileReader;return t.readAsArrayBuffer(e),h(t)}function o(){return this.bodyUsed=!1,this._initBody=function(e,t){if("string"==typeof(this._bodyInit=e))this._bodyText=e;else if(u.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e,this._options=t;else if(u.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!u.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText=""},u.blob?(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(t)},this.text=function(){var e,t,r,n,i,a,o,s=l(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,t=this._options,r=new FileReader,n=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"",i=/charset\=[0-9a-zA-Z\-\_]*;?/,a=e.type.match(i)||n.match(i),o=[e],a&&o.push(a[0].replace(/^charset\=/,"").replace(/;$/,"")),r.readAsText.apply(r,o),h(r);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=l(this);return e||Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(s)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e,t){var r,n,i=(t=t||{}).body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,i||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),-1<a.indexOf(n)?n:r),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i,t)}function s(e){var i=new FormData;return e.trim().split("&").forEach(function(e){if(e){var t=e.split("="),r=t.shift().replace(/\+/g," "),n=t.join("=").replace(/\+/g," ");i.append(decodeURIComponent(r),decodeURIComponent(n))}}),i}function p(e,t){t||(t={}),this._initBody(e,t),this.type="default",this.status=t.status,this.ok=200<=this.status&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof c?t.headers:new c(t.headers),this.url=t.url||""}}("undefined"!=typeof self?self:undefined)},function(e,t,r){"use strict";var n,i,a=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var u,c=[],h=!1,f=-1;function p(){h&&u&&(h=!1,u.length?c=u.concat(c):f=-1,c.length&&y())}function y(){if(!h){var e=l(p);h=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,h=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function v(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new d(e,t)),1!==c.length||h||l(y)},d.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,r){"use strict";(function(e,y){!function(r,n){if(!r.setImmediate){var i,a,t,o,e,s=1,l={},u=!1,c=r.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(r);h=h&&h.setTimeout?h:r,"[object process]"==={}.toString.call(r.process)?i=function(e){y.nextTick(function(){p(e)})}:!function(){if(r.postMessage&&!r.importScripts){var e=!0,t=r.onmessage;return r.onmessage=function(){e=!1},r.postMessage("","*"),r.onmessage=t,e}}()?r.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){p(e.data)},i=function(e){t.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(a=c.documentElement,i=function(e){var t=c.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):i=function(e){setTimeout(p,0,e)}:(o="setImmediate$"+Math.random()+"$",e=function(e){e.source===r&&"string"==typeof e.data&&0===e.data.indexOf(o)&&p(+e.data.slice(o.length))},r.addEventListener?r.addEventListener("message",e,!1):r.attachEvent("onmessage",e),i=function(e){r.postMessage(o+e,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return l[s]=n,i(s),s++},h.clearImmediate=f}function f(e){delete l[e]}function p(e){if(u)setTimeout(p,0,e);else{var t=l[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{f(e),u=!1}}}}}("undefined"==typeof self?void 0===e?undefined:e:self)}).call(this,r(125),r(513))},function(e,i,a){"use strict";(function(e){var t=void 0!==e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function n(e,t){this._id=e,this._clearFn=t}i.setTimeout=function(){return new n(r.call(setTimeout,t,arguments),clearTimeout)},i.setInterval=function(){return new n(r.call(setInterval,t,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(t,this._id)},i.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},i.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},i._unrefActive=i.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},a(514),i.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||undefined&&undefined.setImmediate,i.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||undefined&&undefined.clearImmediate}).call(this,a(125))},function(f,e,t){"use strict";(function(r){var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t=setTimeout;function n(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],c(e,this)}function i(n,i){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,o._immediateFn(function(){var e=1===n._state?i.onFulfilled:i.onRejected;if(null!==e){var t;try{t=e(n._value)}catch(r){return void s(i.promise,r)}a(i.promise,t)}else(1===n._state?a:s)(i.promise,n._value)})):n._deferreds.push(i)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===(void 0===t?"undefined":h(t))||"function"==typeof t)){var r=t.then;if(t instanceof o)return e._state=3,e._value=t,void l(e);if("function"==typeof r)return void c((n=r,i=t,function(){n.apply(i,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(a){s(e,a)}var n,i}function s(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)i(e,e._deferreds[t]);e._deferreds=null}function u(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function c(e,t){var r=!1;try{e(function(e){r||(r=!0,a(t,e))},function(e){r||(r=!0,s(t,e))})}catch(n){if(r)return;r=!0,s(t,n)}}o.prototype["catch"]=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var r=new this.constructor(n);return i(this,new u(e,t,r)),r},o.all=function(t){return new o(function(i,a){if(!t||"undefined"==typeof t.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(t);if(0===o.length)return i([]);var s=o.length;function l(t,e){try{if(e&&("object"===(void 0===e?"undefined":h(e))||"function"==typeof e)){var r=e.then;if("function"==typeof r)return void r.call(e,function(e){l(t,e)},a)}o[t]=e,0==--s&&i(o)}catch(n){a(n)}}for(var e=0;e<o.length;e++)l(e,o[e])})},o.resolve=function(t){return t&&"object"===(void 0===t?"undefined":h(t))&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(r){return new o(function(e,t){t(r)})},o.race=function(i){return new o(function(e,t){for(var r=0,n=i.length;r<n;r++)i[r].then(e,t)})},o._immediateFn="function"==typeof r&&function(e){r(e)}||function(e){t(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},void 0!==f&&f.exports?f.exports=o:e.Promise||(e.Promise=o)}(undefined)}).call(this,t(515).setImmediate)},function(e,t,r){"use strict";var n,i=r(516),a=(n=i)&&n.__esModule?n:{"default":n};window.Promise=a["default"]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IManager=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(300),o=r(299);var s=t.IManager=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.IManagerServiceBase),n(t,[{key:"load",value:function(){return this.request("GET",this.serviceUrl+"/web/api/service.json")}},{key:"createIServer",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/server.json",new o.IManagerCreateNodeParam(e))}},{key:"createIPortal",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new o.IManagerCreateNodeParam(e))}},{key:"iServerList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/server.json")}},{key:"iPortalList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json")}},{key:"startNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/started.json",e)}},{key:"stopNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/stopped.json",e)}}]),t}();i.SuperMap.iManager=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IManagerServiceBase=t.IManagerCreateNodeParam=t.IManager=undefined;var n=r(518),i=r(299),a=r(300);t.IManager=n.IManager,t.IManagerCreateNodeParam=i.IManagerCreateNodeParam,t.IManagerServiceBase=a.IManagerServiceBase},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimeFlowControl=undefined;var a=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(i===undefined){var a=Object.getPrototypeOf(t);return null===a?undefined:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return o===undefined?undefined:o.call(n)},i=n(0),s=n(301);var l=r.TimeFlowControl=function(e){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t)),n=r;return n.callback=e,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},i=function(){return r.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,i.prototype=new n,i}),n.update=n.update.bind(n),n.oldTime=n.currentTime,n.CLASS_NAME="SuperMap.TimeFlowControl",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,s.TimeControlBase),a(i,[{key:"updateOptions",value:function(e){e=e||{},o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"updateOptions",this).call(this,e)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.reverse?e.currentTime===e.startTime&&(e.oldTime=e.endTime,e.currentTime=e.oldTime):e.oldTime===e.endTime&&(e.currentTime=e.startTime,e.oldTime=e.currentTime),e.tick())}},{key:"stop",value:function(){o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"stop",this).call(this);this.oldTime=this.currentTime,this.running&&(this.running=!1),this.intervalId&&window.clearTimeout(this.intervalId)}},{key:"destroy",value:function(){o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"destroy",this).call(this);this.oldTime=null,this.callback=null}},{key:"tick",value:function(){this.intervalId&&window.clearInterval(this.intervalId),this.intervalId=null,this.update(),this.intervalId=window.setInterval(this.update,this.frequency)}},{key:"update",value:function(){var e=this;if(e.running)if(e.callback&&e.callback(e.currentTime),e.reverse){if(e.currentTime===e.startTime){if(!e.repeat)return e.running=!1,null;e.oldTime=e.endTime,e.currentTime=e.oldTime}else e.currentTime=e.oldTime,e.oldTime-=e.speed;e.oldTime<=e.startTime&&(e.oldTime=e.startTime)}else{if(e.currentTime===e.endTime){if(!e.repeat)return e.running=!1,e.stop(),null;e.stop(),e.currentTime=e.startTime,e.oldTime=e.currentTime,e.start()}else e.oldTime=e.currentTime,e.currentTime+=e.speed;e.currentTime>=e.endTime&&(e.currentTime=e.endTime)}}}]),i}();i.SuperMap.TimeFlowControl=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeFlowControl=t.TimeControlBase=t.LogoBase64=undefined;var n=r(302),i=r(301),a=r(520);t.LogoBase64=n.LogoBase64,t.TimeControlBase=i.TimeControlBase,t.TimeFlowControl=a.TimeFlowControl},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WKT=undefined;var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(0),a=r(127),l=r(62),u=r(84),o=r(22),s=r(44),c=r(21),h=r(61),f=r(38),p=r(59),y=r(60);var d=t.WKT=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},t.CLASS_NAME="SuperMap.Format.WKT",t.extract={point:function(e){return e.x+" "+e.y},multipoint:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.point.apply(this,[e.components[r]])+")");return t.join(",")},linestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t.join(",")},multilinestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.linestring.apply(this,[e.components[r]])+")");return t.join(",")},polygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.linestring.apply(this,[e.components[r]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.polygon.apply(this,[e.components[r]])+")");return t.join(",")},collection:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extractGeometry.apply(this,[e.components[r]]));return t.join(",")}},t.parse={point:function(e){var t=l.StringExt.trim(e).split(this.regExes.spaces);return new u.Vector(new o.Point(t[0],t[1]))},multipoint:function(e){for(var t,r=l.StringExt.trim(e).split(","),n=[],i=0,a=r.length;i<a;++i)t=r[i].replace(this.regExes.trimParens,"$1"),n.push(this.parse.point.apply(this,[t]).geometry);return new u.Vector(new s.MultiPoint(n))},linestring:function(e){for(var t=l.StringExt.trim(e).split(","),r=[],n=0,i=t.length;n<i;++n)r.push(this.parse.point.apply(this,[t[n]]).geometry);return new u.Vector(new c.LineString(r))},multilinestring:function(e){for(var t,r=l.StringExt.trim(e).split(this.regExes.parenComma),n=[],i=0,a=r.length;i<a;++i)t=r[i].replace(this.regExes.trimParens,"$1"),n.push(this.parse.linestring.apply(this,[t]).geometry);return new u.Vector(new h.MultiLineString(n))},polygon:function(e){for(var t,r,n,i=l.StringExt.trim(e).split(this.regExes.parenComma),a=[],o=0,s=i.length;o<s;++o)t=i[o].replace(this.regExes.trimParens,"$1"),r=this.parse.linestring.apply(this,[t]).geometry,n=new f.LinearRing(r.components),a.push(n);return new u.Vector(new p.Polygon(a))},multipolygon:function(e){for(var t,r=l.StringExt.trim(e).split(this.regExes.doubleParenComma),n=[],i=0,a=r.length;i<a;++i)t=r[i].replace(this.regExes.trimParens,"$1"),n.push(this.parse.polygon.apply(this,[t]).geometry);return new u.Vector(new y.MultiPolygon(n))},geometrycollection:function(e){e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var t=l.StringExt.trim(e).split("|"),r=[],n=0,i=t.length;n<i;++n)r.push(this.read(t[n]));return r}},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.Format),n(r,[{key:"read",value:function(e){var t,r,n;e=e.replace(/[\n\r]/g," ");var i=this.regExes.typeStr.exec(e);return i&&(r=i[1].toLowerCase(),n=i[2],this.parse[r]&&(t=this.parse[r].apply(this,[n]))),t}},{key:"write",value:function(e){var t,r,n;e.constructor===Array?(t=e,n=!0):n=!(t=[e]);var i=[];n&&i.push("GEOMETRYCOLLECTION(");for(var a=0,o=t.length;a<o;++a)n&&0<a&&i.push(","),r=t[a].geometry,i.push(this.extractGeometry(r));return n&&i.push(")"),i.join("")}},{key:"extractGeometry",value:function(e){var t=e.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[t]?("collection"===t?"GEOMETRYCOLLECTION":t.toUpperCase())+"("+this.extract[t].apply(this,[e])+")":null}}]),r}();i.SuperMap.Format.WKT=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WKT=t.GeoJSON=t.JSONFormat=t.Format=undefined;var n=r(127),i=r(16),a=r(126),o=r(522);t.Format=n.Format,t.JSONFormat=a.JSONFormat,t.GeoJSON=i.GeoJSON,t.WKT=o.WKT},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateExt=undefined;var n=r(0);t.DateExt=n.SuperMap.Date={toISOString:function(){if("toISOString"in Date.prototype)return function(e){return e.toISOString()};var t=function(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r};return function(e){return isNaN(e.getTime())?"Invalid Date":e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1,2)+"-"+t(e.getUTCDate(),2)+"T"+t(e.getUTCHours(),2)+":"+t(e.getUTCMinutes(),2)+":"+t(e.getUTCSeconds(),2)+"."+t(e.getUTCMilliseconds(),3)+"Z"}}(),parse:function(e){var t,r=e.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);if(r&&(r[1]||r[7])){var n=parseInt(r[1],10)||0,i=parseInt(r[2],10)-1||0,a=parseInt(r[3],10)||1;t=new Date(Date.UTC(n,i,a));var o=r[7];if(o){var s=parseInt(r[4],10),l=parseInt(r[5],10),u=parseFloat(r[6]),c=0|u,h=Math.round(1e3*(u-c));if(t.setUTCHours(s,l,c,h),"Z"!==o){var f=-1e3*(60*parseInt(o,10)*60+60*(parseInt(r[8],10)||0));t=new Date(t.getTime()+f)}}}else t=new Date("invalid");return t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Rectangle=t.Polygon=t.GeometryPoint=t.MultiPolygon=t.MultiPoint=t.MultiLineString=t.LineString=t.LinearRing=t.GeoText=t.Curve=t.Collection=undefined;var n=r(31),i=r(130),a=r(129),o=r(38),s=r(21),l=r(61),u=r(44),c=r(60),h=r(22),f=r(59),p=r(305);t.Collection=n.Collection,t.Curve=i.Curve,t.GeoText=a.GeoText,t.LinearRing=o.LinearRing,t.LineString=s.LineString,t.MultiLineString=l.MultiLineString,t.MultiPoint=u.MultiPoint,t.MultiPolygon=c.MultiPolygon,t.GeometryPoint=h.Point,t.Polygon=f.Polygon,t.Rectangle=p.Rectangle},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryVector=t.CommonUtil=t.Size=t.Pixel=t.LonLat=t.Geometry=t.Feature=t.Events=t.Event=t.DateExt=t.Credential=t.Bounds=t.ArrayExt=t.FunctionExt=t.NumberExt=t.StringExt=t.Rectangle=t.Polygon=t.GeometryPoint=t.MultiPolygon=t.MultiPoint=t.MultiLineString=t.LineString=t.LinearRing=t.GeoText=t.Curve=t.Collection=undefined;var n=r(525),i=r(62),a=r(27),o=r(128),s=r(524),l=r(304),u=r(85),c=r(303),h=r(26),f=r(45),p=r(86),y=r(306),d=r(1),v=r(84);t.Collection=n.Collection,t.Curve=n.Curve,t.GeoText=n.GeoText,t.LinearRing=n.LinearRing,t.LineString=n.LineString,t.MultiLineString=n.MultiLineString,t.MultiPoint=n.MultiPoint,t.MultiPolygon=n.MultiPolygon,t.GeometryPoint=n.GeometryPoint,t.Polygon=n.Polygon,t.Rectangle=n.Rectangle,t.StringExt=i.StringExt,t.NumberExt=i.NumberExt,t.FunctionExt=i.FunctionExt,t.ArrayExt=i.ArrayExt,t.Bounds=a.Bounds,t.Credential=o.Credential,t.DateExt=s.DateExt,t.Event=l.Event,t.Events=u.Events,t.Feature=c.Feature,t.Geometry=h.Geometry,t.LonLat=f.LonLat,t.Pixel=p.Pixel,t.Size=y.Size,t.CommonUtil=d.Util,t.GeometryVector=v.Vector},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trafficTransferAnalystService=t.TrafficTransferAnalystService=t.themeService=t.ThemeService=t.spatialAnalystService=t.SpatialAnalystService=t.ServiceBase=t.queryService=t.QueryService=t.processingService=t.ProcessingService=t.networkAnalystService=t.NetworkAnalystService=t.networkAnalyst3DService=t.NetworkAnalyst3DService=t.measureService=t.MeasureService=t.mapService=t.MapService=t.layerInfoService=t.LayerInfoService=t.gridCellInfosService=t.GridCellInfosService=t.fieldService=t.FieldService=t.featureService=t.FeatureService=t.dataFlowService=t.DataFlowService=t.chartService=t.ChartService=t.addressMatchService=t.AddressMatchService=t.VectorTilePBF=t.VectorTileJSON=t.VectorTile=t.VectorGrid=t.VectorFeatureType=t.TextSymbolizer=t.PolyBase=t.Symbolizer=t.SVGRenderer=t.RegionSymbolizer=t.PointSymbolizer=t.LineSymbolizer=t.CanvasRenderer=t.ThemeLayer=t.themeFeature=t.ThemeFeature=t.GeoFeatureThemeLayer=undefined,t.MapVRenderer=t.cloverStyle=t.CloverStyle=t.graphic=t.Graphic=t.circleStyle=t.CircleStyle=t.imageStyle=t.ImageStyle=t.CompOpMap=t.ServerStyleMap=t.CartoStyleMap=t.DefaultStyle=t.CartoCSSToLeaflet=t.VectorTileFormat=t.uniqueThemeLayer=t.UniqueThemeLayer=t.unicodeMarker=t.UnicodeMarker=t.turfLayer=t.TurfLayer=t.tiledVectorLayer=t.TileVectorLayer=t.rankSymbolThemeLayer=t.RankSymbolThemeLayer=t.rangeThemeLayer=t.RangeThemeLayer=t.mapVLayer=t.MapVLayer=t.labelThemeLayer=t.LabelThemeLayer=t.graphThemeLayer=t.GraphThemeLayer=t.graphicLayer=t.GraphicLayer=t.LeafletMapCoordSys=t.echartsLayer=t.EchartsLayer=t.dataFlowLayer=t.DataFlowLayer=t.webMap=t.WebMap=t.wmtsLayer=t.WMTSLayer=t.tiledMapLayer=t.TiledMapLayer=t.tiandituTileLayer=t.TiandituTileLayer=t.imageMapLayer=t.ImageMapLayer=t.cloudTileLayer=t.CloudTileLayer=t.baiduTileLayer=t.BaiduTileLayer=t.NormalizeScale=t.GetResolutionFromScaleDpi=t.scaleToResolution=t.resolutionToScale=t.getMeterPerMapUnit=t.toSuperMapGeometry=t.toGeoJSON=t.crs=t.CRS=t.nonEarthCRS=t.NonEarthCRS=t.nonProjection=t.NonProjection=t.TianDiTu_MercatorCRS=t.TianDiTu_WGS84CRS=t.BaiduCRS=t.CommontypesConversion=t.changeTileVersion=t.ChangeTileVersion=t.logo=t.Logo=t.VectorClipJobsParameter=t.Vector=t.UpdateTurnNodeWeightParameters=t.UpdateEdgeWeightParameters=t.UGCSubLayer=t.UGCMapLayer=t.UGCLayer=t.TransportationAnalystResultSetting=t.TransportationAnalystParameter=t.TransferSolutionParameters=t.TransferPathParameters=t.TransferLine=t.TopologyValidatorJobsParameter=t.ThiessenAnalystParameters=t.ThemeUniqueItem=t.ThemeUnique=t.ThemeRangeItem=t.ThemeRange=t.ThemeParameters=t.ThemeOffset=t.ThemeMemoryData=t.ThemeLabelUniqueItem=t.ThemeLabelText=t.ThemeLabelItem=t.ThemeLabelBackground=undefined,t.ThemeLabelAlongLine=t.ThemeLabel=t.ThemeGridUniqueItem=t.ThemeGridUnique=t.ThemeGridRangeItem=t.ThemeGridRange=t.ThemeGraphText=t.ThemeGraphSize=t.ThemeGraphItem=t.ThemeGraphAxes=t.ThemeGraph=t.ThemeGraduatedSymbolStyle=t.ThemeGraduatedSymbol=t.ThemeFlow=t.ThemeDotDensity=t.Theme=t.TerrainCurvatureCalculationParameters=t.SurfaceAnalystParametersSetting=t.SurfaceAnalystParameters=t.SupplyCenter=t.SummaryRegionJobParameter=t.SummaryMeshJobParameter=t.SummaryAttributesJobsParameter=t.StopQueryParameters=t.SingleObjectQueryJobsParameter=t.SetLayerStatusParameters=t.SetLayersInfoParameters=t.SetLayerInfoParameters=t.ServerTheme=t.ServerTextStyle=t.ServerStyle=t.ServerGeometry=t.ServerFeature=t.ServerColor=t.RouteLocatorParameters=t.RouteCalculateMeasureParameters=t.Route=t.QueryParameters=t.QueryBySQLParameters=t.QueryByGeometryParameters=t.QueryByDistanceParameters=t.QueryByBoundsParameters=t.PointWithMeasure=t.OverlayGeoJobParameter=t.OverlayAnalystParameters=t.OverlapDisplayedOptions=t.OutputSetting=t.MeasureParameters=t.MathExpressionAnalysisParameters=t.LinkItem=t.LayerStatus=t.LabelThemeCell=t.LabelSymbolCell=t.LabelMixedTextStyle=t.LabelMatrixCell=t.LabelImageCell=t.KernelDensityJobParameter=t.JoinItem=t.InterpolationRBFAnalystParameters=t.InterpolationKrigingAnalystParameters=t.InterpolationIDWAnalystParameters=t.InterpolationAnalystParameters=t.Image=t.Grid=t.GetGridCellInfosParameters=t.GetFeaturesBySQLParameters=t.GetFeaturesByIDsParameters=t.GetFeaturesByGeometryParameters=t.GetFeaturesByBufferParameters=t.GetFeaturesByBoundsParameters=t.GeoRelationAnalystParameters=t.GeometryThiessenAnalystParameters=t.GeometrySurfaceAnalystParameters=t.GeometryOverlayAnalystParameters=t.GeometryBufferAnalystParameters=t.GeoHashGridAggParameter=t.GeoDecodingParameter=t.GeoCodingParameter=t.GeoBoundingBoxQueryBuilderParameter=t.GenerateSpatialDataParameters=t.FindTSPPathsParameters=t.FindServiceAreasParameters=t.FindPathParameters=t.FindMTSPPathsParameters=t.FindLocationParameters=t.FindClosestFacilitiesParameters=t.FilterParameter=t.FieldStatisticsParameters=t.FilterAggParameter=t.FieldParameters=t.FacilityAnalystUpstream3DParameters=t.FacilityAnalystTraceup3DParameters=t.FacilityAnalystTracedown3DParameters=t.FacilityAnalystStreamParameters=t.FacilityAnalystSources3DParameters=t.FacilityAnalystSinks3DParameters=t.FacilityAnalyst3DParameters=t.EditFeaturesParameters=t.DensityKernelAnalystParameters=t.DatasourceConnectionInfo=undefined,t.DatasetThiessenAnalystParameters=t.DatasetSurfaceAnalystParameters=t.DatasetOverlayAnalystParameters=t.DatasetInfo=t.DatasetBufferAnalystParameters=t.DataReturnOption=t.ComputeWeightMatrixParameters=t.ColorDictionary=t.ClipParameter=t.ChartQueryParameters=t.ChartQueryFilterParameter=t.BurstPipelineAnalystParameters=t.BufferSetting=t.BuffersAnalystJobsParameter=t.BufferDistance=t.BufferAnalystParameters=t.AggQueryBuilderParameter=t.AggregationParameter=t.AreaSolarRadiationParameters=t.FetchRequest=t.ElasticSearch=t.TokenServiceParameter=t.ServerInfo=t.SecurityManager=t.KeyServiceParameter=t.OnlineServiceBase=t.FilterField=t.DataItemOrderBy=t.DataItemType=t.ServiceStatus=t.OnlineQueryDatasParameter=t.OnlineData=t.Online=t.IPortalServicesQueryParam=t.IPortalServiceBase=t.IPortalService=t.IPortalMapsQueryParam=t.IPortalMap=t.IPortal=t.IManagerCreateNodeParam=t.IManagerServiceBase=t.IManager=t.TimeFlowControl=t.AggregationType=t.AggregationQueryBuilderType=t.OutputType=t.TopologyValidatorRule=t.StatisticAnalystMode=t.AnalystSizeUnit=t.AnalystAreaUnit=t.ClipAnalystMode=t.Exponent=t.VariogramMode=t.InterpolationAlgorithmType=t.SummaryType=t.SearchMode=t.PixelFormat=t.StatisticMode=t.UGCLayerType=t.LayerType=t.ClientType=t.GridType=t.TransferPreference=t.TransferTactic=t.EditType=t.ChartType=t.ColorSpaceType=t.SurfaceAnalystMethod=t.SmoothMethod=t.BufferEndType=t.TurnType=t.SupplyCenterType=t.OverlayOperationType=t.DirectionType=t.LabelOverLengthMode=t.LabelBackShape=t.AlongLineDirection=t.SideType=t.FillGradientMode=t.TextAlignment=t.ColorGradientType=t.ThemeType=t.RangeMode=t.GraduatedMode=t.GraphAxesTextDisplayMode=t.ThemeGraphType=t.ThemeGraphTextFormat=t.SpatialQueryMode=t.BufferRadiusUnit=t.Unit=t.DataReturnMode=t.SpatialRelationType=t.MeasureMode=t.EngineType=t.JoinType=t.QueryOption=t.GeometryType=t.ServerType=t.DataFormat=t.SuperMap=undefined;var n=r(5),i=r(401),a=r(355),o=r(354),s=r(349),l=r(322);t.SuperMap=n.SuperMap,t.DataFormat=n.DataFormat,t.ServerType=n.ServerType,t.GeometryType=n.GeometryType,t.QueryOption=n.QueryOption,t.JoinType=n.JoinType,t.EngineType=n.EngineType,t.MeasureMode=n.MeasureMode,t.SpatialRelationType=n.SpatialRelationType,t.DataReturnMode=n.DataReturnMode,t.Unit=n.Unit,t.BufferRadiusUnit=n.BufferRadiusUnit,t.SpatialQueryMode=n.SpatialQueryMode,t.ThemeGraphTextFormat=n.ThemeGraphTextFormat,t.ThemeGraphType=n.ThemeGraphType,t.GraphAxesTextDisplayMode=n.GraphAxesTextDisplayMode,t.GraduatedMode=n.GraduatedMode,t.RangeMode=n.RangeMode,t.ThemeType=n.ThemeType,t.ColorGradientType=n.ColorGradientType,t.TextAlignment=n.TextAlignment,t.FillGradientMode=n.FillGradientMode,t.SideType=n.SideType,t.AlongLineDirection=n.AlongLineDirection,t.LabelBackShape=n.LabelBackShape,t.LabelOverLengthMode=n.LabelOverLengthMode,t.DirectionType=n.DirectionType,t.OverlayOperationType=n.OverlayOperationType,t.SupplyCenterType=n.SupplyCenterType,t.TurnType=n.TurnType,t.BufferEndType=n.BufferEndType,t.SmoothMethod=n.SmoothMethod,t.SurfaceAnalystMethod=n.SurfaceAnalystMethod,t.ColorSpaceType=n.ColorSpaceType,t.ChartType=n.ChartType,t.EditType=n.EditType,t.TransferTactic=n.TransferTactic,t.TransferPreference=n.TransferPreference,t.GridType=n.GridType,t.ClientType=n.ClientType,t.LayerType=n.LayerType,t.UGCLayerType=n.UGCLayerType,t.StatisticMode=n.StatisticMode,t.PixelFormat=n.PixelFormat,t.SearchMode=n.SearchMode,t.SummaryType=n.SummaryType,t.InterpolationAlgorithmType=n.InterpolationAlgorithmType,t.VariogramMode=n.VariogramMode,t.Exponent=n.Exponent,t.ClipAnalystMode=n.ClipAnalystMode,t.AnalystAreaUnit=n.AnalystAreaUnit,t.AnalystSizeUnit=n.AnalystSizeUnit,t.StatisticAnalystMode=n.StatisticAnalystMode,t.TopologyValidatorRule=n.TopologyValidatorRule,t.OutputType=n.OutputType,t.AggregationQueryBuilderType=n.AggregationQueryBuilderType,t.AggregationType=n.AggregationType,t.TimeFlowControl=n.TimeFlowControl,t.IManager=n.IManager,t.IManagerServiceBase=n.IManagerServiceBase,t.IManagerCreateNodeParam=n.IManagerCreateNodeParam,t.IPortal=n.IPortal,t.IPortalMap=n.IPortalMap,t.IPortalMapsQueryParam=n.IPortalMapsQueryParam,t.IPortalService=n.IPortalService,t.IPortalServiceBase=n.IPortalServiceBase,t.IPortalServicesQueryParam=n.IPortalServicesQueryParam,t.Online=n.Online,t.OnlineData=n.OnlineData,t.OnlineQueryDatasParameter=n.OnlineQueryDatasParameter,t.ServiceStatus=n.ServiceStatus,t.DataItemType=n.DataItemType,t.DataItemOrderBy=n.DataItemOrderBy,t.FilterField=n.FilterField,t.OnlineServiceBase=n.OnlineServiceBase,t.KeyServiceParameter=n.KeyServiceParameter,t.SecurityManager=n.SecurityManager,t.ServerInfo=n.ServerInfo,t.TokenServiceParameter=n.TokenServiceParameter,t.ElasticSearch=n.ElasticSearch,t.FetchRequest=n.FetchRequest,t.AreaSolarRadiationParameters=n.AreaSolarRadiationParameters,t.AggregationParameter=n.AggregationParameter,t.AggQueryBuilderParameter=n.AggQueryBuilderParameter,t.BufferAnalystParameters=n.BufferAnalystParameters,t.BufferDistance=n.BufferDistance,t.BuffersAnalystJobsParameter=n.BuffersAnalystJobsParameter,t.BufferSetting=n.BufferSetting,t.BurstPipelineAnalystParameters=n.BurstPipelineAnalystParameters,t.ChartQueryFilterParameter=n.ChartQueryFilterParameter,t.ChartQueryParameters=n.ChartQueryParameters,t.ClipParameter=n.ClipParameter,t.ColorDictionary=n.ColorDictionary,t.ComputeWeightMatrixParameters=n.ComputeWeightMatrixParameters,t.DataReturnOption=n.DataReturnOption,t.DatasetBufferAnalystParameters=n.DatasetBufferAnalystParameters,t.DatasetInfo=n.DatasetInfo,t.DatasetOverlayAnalystParameters=n.DatasetOverlayAnalystParameters,t.DatasetSurfaceAnalystParameters=n.DatasetSurfaceAnalystParameters,t.DatasetThiessenAnalystParameters=n.DatasetThiessenAnalystParameters,t.DatasourceConnectionInfo=n.DatasourceConnectionInfo,t.DensityKernelAnalystParameters=n.DensityKernelAnalystParameters,t.EditFeaturesParameters=n.EditFeaturesParameters,t.FacilityAnalyst3DParameters=n.FacilityAnalyst3DParameters,t.FacilityAnalystSinks3DParameters=n.FacilityAnalystSinks3DParameters,t.FacilityAnalystSources3DParameters=n.FacilityAnalystSources3DParameters,t.FacilityAnalystStreamParameters=n.FacilityAnalystStreamParameters,t.FacilityAnalystTracedown3DParameters=n.FacilityAnalystTracedown3DParameters,t.FacilityAnalystTraceup3DParameters=n.FacilityAnalystTraceup3DParameters,t.FacilityAnalystUpstream3DParameters=n.FacilityAnalystUpstream3DParameters,t.FieldParameters=n.FieldParameters,t.FilterAggParameter=n.FilterAggParameter,t.FieldStatisticsParameters=n.FieldStatisticsParameters,t.FilterParameter=n.FilterParameter,t.FindClosestFacilitiesParameters=n.FindClosestFacilitiesParameters,t.FindLocationParameters=n.FindLocationParameters,t.FindMTSPPathsParameters=n.FindMTSPPathsParameters,t.FindPathParameters=n.FindPathParameters,t.FindServiceAreasParameters=n.FindServiceAreasParameters,t.FindTSPPathsParameters=n.FindTSPPathsParameters,t.GenerateSpatialDataParameters=n.GenerateSpatialDataParameters,t.GeoBoundingBoxQueryBuilderParameter=n.GeoBoundingBoxQueryBuilderParameter,t.GeoCodingParameter=n.GeoCodingParameter,t.GeoDecodingParameter=n.GeoDecodingParameter,t.GeoHashGridAggParameter=n.GeoHashGridAggParameter,t.GeometryBufferAnalystParameters=n.GeometryBufferAnalystParameters,t.GeometryOverlayAnalystParameters=n.GeometryOverlayAnalystParameters,t.GeometrySurfaceAnalystParameters=n.GeometrySurfaceAnalystParameters,t.GeometryThiessenAnalystParameters=n.GeometryThiessenAnalystParameters,t.GeoRelationAnalystParameters=n.GeoRelationAnalystParameters,t.GetFeaturesByBoundsParameters=n.GetFeaturesByBoundsParameters,t.GetFeaturesByBufferParameters=n.GetFeaturesByBufferParameters,t.GetFeaturesByGeometryParameters=n.GetFeaturesByGeometryParameters,t.GetFeaturesByIDsParameters=n.GetFeaturesByIDsParameters,t.GetFeaturesBySQLParameters=n.GetFeaturesBySQLParameters,t.GetGridCellInfosParameters=n.GetGridCellInfosParameters,t.Grid=n.Grid,t.Image=n.Image,t.InterpolationAnalystParameters=n.InterpolationAnalystParameters,t.InterpolationIDWAnalystParameters=n.InterpolationIDWAnalystParameters,t.InterpolationKrigingAnalystParameters=n.InterpolationKrigingAnalystParameters,t.InterpolationRBFAnalystParameters=n.InterpolationRBFAnalystParameters,t.JoinItem=n.JoinItem,t.KernelDensityJobParameter=n.KernelDensityJobParameter,t.LabelImageCell=n.LabelImageCell,t.LabelMatrixCell=n.LabelMatrixCell,t.LabelMixedTextStyle=n.LabelMixedTextStyle,t.LabelSymbolCell=n.LabelSymbolCell,t.LabelThemeCell=n.LabelThemeCell,t.LayerStatus=n.LayerStatus,t.LinkItem=n.LinkItem,t.MathExpressionAnalysisParameters=n.MathExpressionAnalysisParameters,t.MeasureParameters=n.MeasureParameters,t.OutputSetting=n.OutputSetting,t.OverlapDisplayedOptions=n.OverlapDisplayedOptions,t.OverlayAnalystParameters=n.OverlayAnalystParameters,t.OverlayGeoJobParameter=n.OverlayGeoJobParameter,t.PointWithMeasure=n.PointWithMeasure,t.QueryByBoundsParameters=n.QueryByBoundsParameters,t.QueryByDistanceParameters=n.QueryByDistanceParameters,t.QueryByGeometryParameters=n.QueryByGeometryParameters,t.QueryBySQLParameters=n.QueryBySQLParameters,t.QueryParameters=n.QueryParameters,t.Route=n.Route,t.RouteCalculateMeasureParameters=n.RouteCalculateMeasureParameters,t.RouteLocatorParameters=n.RouteLocatorParameters,t.ServerColor=n.ServerColor,t.ServerFeature=n.ServerFeature,t.ServerGeometry=n.ServerGeometry,t.ServerStyle=n.ServerStyle,t.ServerTextStyle=n.ServerTextStyle,t.ServerTheme=n.ServerTheme,t.SetLayerInfoParameters=n.SetLayerInfoParameters,t.SetLayersInfoParameters=n.SetLayersInfoParameters,t.SetLayerStatusParameters=n.SetLayerStatusParameters,t.SingleObjectQueryJobsParameter=n.SingleObjectQueryJobsParameter,t.StopQueryParameters=n.StopQueryParameters,t.SummaryAttributesJobsParameter=n.SummaryAttributesJobsParameter,t.SummaryMeshJobParameter=n.SummaryMeshJobParameter,t.SummaryRegionJobParameter=n.SummaryRegionJobParameter,t.SupplyCenter=n.SupplyCenter,t.SurfaceAnalystParameters=n.SurfaceAnalystParameters,t.SurfaceAnalystParametersSetting=n.SurfaceAnalystParametersSetting,t.TerrainCurvatureCalculationParameters=n.TerrainCurvatureCalculationParameters,t.Theme=n.Theme,t.ThemeDotDensity=n.ThemeDotDensity,t.ThemeFlow=n.ThemeFlow,t.ThemeGraduatedSymbol=n.ThemeGraduatedSymbol,t.ThemeGraduatedSymbolStyle=n.ThemeGraduatedSymbolStyle,t.ThemeGraph=n.ThemeGraph,t.ThemeGraphAxes=n.ThemeGraphAxes,t.ThemeGraphItem=n.ThemeGraphItem,t.ThemeGraphSize=n.ThemeGraphSize,t.ThemeGraphText=n.ThemeGraphText,t.ThemeGridRange=n.ThemeGridRange,t.ThemeGridRangeItem=n.ThemeGridRangeItem,t.ThemeGridUnique=n.ThemeGridUnique,t.ThemeGridUniqueItem=n.ThemeGridUniqueItem,t.ThemeLabel=n.ThemeLabel,t.ThemeLabelAlongLine=n.ThemeLabelAlongLine,t.ThemeLabelBackground=n.ThemeLabelBackground,t.ThemeLabelItem=n.ThemeLabelItem,t.ThemeLabelText=n.ThemeLabelText,t.ThemeLabelUniqueItem=n.ThemeLabelUniqueItem,t.ThemeMemoryData=n.ThemeMemoryData,t.ThemeOffset=n.ThemeOffset,t.ThemeParameters=n.ThemeParameters,t.ThemeRange=n.ThemeRange,t.ThemeRangeItem=n.ThemeRangeItem,t.ThemeUnique=n.ThemeUnique,t.ThemeUniqueItem=n.ThemeUniqueItem,t.ThiessenAnalystParameters=n.ThiessenAnalystParameters,t.TopologyValidatorJobsParameter=n.TopologyValidatorJobsParameter,t.TransferLine=n.TransferLine,t.TransferPathParameters=n.TransferPathParameters,t.TransferSolutionParameters=n.TransferSolutionParameters,t.TransportationAnalystParameter=n.TransportationAnalystParameter,t.TransportationAnalystResultSetting=n.TransportationAnalystResultSetting,t.UGCLayer=n.UGCLayer,t.UGCMapLayer=n.UGCMapLayer,t.UGCSubLayer=n.UGCSubLayer,t.UpdateEdgeWeightParameters=n.UpdateEdgeWeightParameters,t.UpdateTurnNodeWeightParameters=n.UpdateTurnNodeWeightParameters,t.Vector=n.Vector,t.VectorClipJobsParameter=n.VectorClipJobsParameter,t.Logo=i.Logo,t.logo=i.logo,t.ChangeTileVersion=i.ChangeTileVersion,t.changeTileVersion=i.changeTileVersion,t.CommontypesConversion=a.CommontypesConversion,t.BaiduCRS=a.BaiduCRS,t.TianDiTu_WGS84CRS=a.TianDiTu_WGS84CRS,t.TianDiTu_MercatorCRS=a.TianDiTu_MercatorCRS,t.NonProjection=a.NonProjection,t.nonProjection=a.nonProjection,t.NonEarthCRS=a.NonEarthCRS,t.nonEarthCRS=a.nonEarthCRS,t.CRS=a.CRS,t.crs=a.crs,t.toGeoJSON=a.toGeoJSON,t.toSuperMapGeometry=a.toSuperMapGeometry,t.getMeterPerMapUnit=a.getMeterPerMapUnit,t.resolutionToScale=a.resolutionToScale,t.scaleToResolution=a.scaleToResolution,t.GetResolutionFromScaleDpi=a.GetResolutionFromScaleDpi,t.NormalizeScale=a.NormalizeScale,t.BaiduTileLayer=o.BaiduTileLayer,t.baiduTileLayer=o.baiduTileLayer,t.CloudTileLayer=o.CloudTileLayer,t.cloudTileLayer=o.cloudTileLayer,t.ImageMapLayer=o.ImageMapLayer,t.imageMapLayer=o.imageMapLayer,t.TiandituTileLayer=o.TiandituTileLayer,t.tiandituTileLayer=o.tiandituTileLayer,t.TiledMapLayer=o.TiledMapLayer,t.tiledMapLayer=o.tiledMapLayer,t.WMTSLayer=o.WMTSLayer,t.wmtsLayer=o.wmtsLayer,t.WebMap=o.WebMap,t.webMap=o.webMap,t.DataFlowLayer=s.DataFlowLayer,t.dataFlowLayer=s.dataFlowLayer,t.EchartsLayer=s.EchartsLayer,t.echartsLayer=s.echartsLayer,t.LeafletMapCoordSys=s.LeafletMapCoordSys,t.GraphicLayer=s.GraphicLayer,t.graphicLayer=s.graphicLayer,t.GraphThemeLayer=s.GraphThemeLayer,t.graphThemeLayer=s.graphThemeLayer,t.LabelThemeLayer=s.LabelThemeLayer,t.labelThemeLayer=s.labelThemeLayer,t.MapVLayer=s.MapVLayer,t.mapVLayer=s.mapVLayer,t.RangeThemeLayer=s.RangeThemeLayer,t.rangeThemeLayer=s.rangeThemeLayer,t.RankSymbolThemeLayer=s.RankSymbolThemeLayer,t.rankSymbolThemeLayer=s.rankSymbolThemeLayer,t.TileVectorLayer=s.TileVectorLayer,t.tiledVectorLayer=s.tiledVectorLayer,t.TurfLayer=s.TurfLayer,t.turfLayer=s.turfLayer,t.UnicodeMarker=s.UnicodeMarker,t.unicodeMarker=s.unicodeMarker,t.UniqueThemeLayer=s.UniqueThemeLayer,t.uniqueThemeLayer=s.uniqueThemeLayer,t.VectorTileFormat=s.VectorTileFormat,t.CartoCSSToLeaflet=s.CartoCSSToLeaflet,t.DefaultStyle=s.DefaultStyle,t.CartoStyleMap=s.CartoStyleMap,t.ServerStyleMap=s.ServerStyleMap,t.CompOpMap=s.CompOpMap,t.ImageStyle=s.ImageStyle,t.imageStyle=s.imageStyle,t.CircleStyle=s.CircleStyle,t.circleStyle=s.circleStyle,t.Graphic=s.Graphic,t.graphic=s.graphic,t.CloverStyle=s.CloverStyle,t.cloverStyle=s.cloverStyle,t.MapVRenderer=s.MapVRenderer,t.GeoFeatureThemeLayer=s.GeoFeatureThemeLayer,t.ThemeFeature=s.ThemeFeature,t.themeFeature=s.themeFeature,t.ThemeLayer=s.ThemeLayer,t.CanvasRenderer=s.CanvasRenderer,t.LineSymbolizer=s.LineSymbolizer,t.PointSymbolizer=s.PointSymbolizer,t.RegionSymbolizer=s.RegionSymbolizer,t.SVGRenderer=s.SVGRenderer,t.Symbolizer=s.Symbolizer,t.PolyBase=s.PolyBase,t.TextSymbolizer=s.TextSymbolizer,t.VectorFeatureType=s.VectorFeatureType,t.VectorGrid=s.VectorGrid,t.VectorTile=s.VectorTile,t.VectorTileJSON=s.VectorTileJSON,t.VectorTilePBF=s.VectorTilePBF,t.AddressMatchService=l.AddressMatchService,t.addressMatchService=l.addressMatchService,t.ChartService=l.ChartService,t.chartService=l.chartService,t.DataFlowService=l.DataFlowService,t.dataFlowService=l.dataFlowService,t.FeatureService=l.FeatureService,t.featureService=l.featureService,t.FieldService=l.FieldService,t.fieldService=l.fieldService,t.GridCellInfosService=l.GridCellInfosService,t.gridCellInfosService=l.gridCellInfosService,t.LayerInfoService=l.LayerInfoService,t.layerInfoService=l.layerInfoService,t.MapService=l.MapService,t.mapService=l.mapService,t.MeasureService=l.MeasureService,t.measureService=l.measureService,t.NetworkAnalyst3DService=l.NetworkAnalyst3DService,t.networkAnalyst3DService=l.networkAnalyst3DService,t.NetworkAnalystService=l.NetworkAnalystService,t.networkAnalystService=l.networkAnalystService,t.ProcessingService=l.ProcessingService,t.processingService=l.processingService,t.QueryService=l.QueryService,t.queryService=l.queryService,t.ServiceBase=l.ServiceBase,t.SpatialAnalystService=l.SpatialAnalystService,t.spatialAnalystService=l.spatialAnalystService,t.ThemeService=l.ThemeService,t.themeService=l.themeService,t.TrafficTransferAnalystService=l.TrafficTransferAnalystService,t.trafficTransferAnalystService=l.trafficTransferAnalystService},function(e,t,r){r(527),e.exports=r(308)},function(e,t){},,,,,,,function(e,t){}]);

/***/ }),
/* 2 */
/***/ (function(module, exports) {

/*!
 * 
 *     iclient9-plot-jbalgosymbol.(http://iclient.supermapol.com)
 *     Copyright© 2000-2017 SuperMap Software Co. Ltd
 *     license: undefined
 *     version: v9.1.0
 * 
 */
!function(t){function e(o){if(l[o])return l[o].exports;var n=l[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var l={};e.m=t,e.c=l,e.i=function(t){return t},e.d=function(t,l,o){e.o(t,l)||Object.defineProperty(t,l,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var l=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(l,"a",l),l},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=226)}([function(t,e,l){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),r=(o(l(40)),o(l(227)),function(){function t(e){n(this,t),this.RTOD=57.29577951308232,this.DTOR=.017453292519943295,this.maxEditPts=0,this.minEditPts=0,this.libID=null,this.code=null,this.symbolType=null,this.symbolName=null,this.isEdit=!1,this.controlPoints=null,this.scalePoints=null,this.scaleValues=null,this.subSymbols=null,this.style=null,this.subSymbolDefaultPixelSize=30,this.map=null,this.graphicObject2D=null,this.components=[],e=e||{},this.controlPoints=[],this.scalePoints=[],this.scaleValues=[],this.subSymbols=[],this.components=[],this.textContent="",this.style=null,SuperMap.Util.extend(this,e),0===this.libID&&null===this.symbolType?this.symbolType=this.code:null===this.symbolType&&(this.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL),null===this.subSymbolScaleValue&&(this.subSymbolScaleValue=.1),0!==this.minEditPts&&0!==this.maxEditPts||this.setMinAndMaxEditPts()}return i(t,[{key:"getScaleValues",value:function(){return this.graphicObject2D?this.graphicObject2D.scaleValues:this.scaleValues}},{key:"setScaleValues",value:function(t){this.graphicObject2D?this.graphicObject2D.scaleValues=t:this.scaleValues=t}},{key:"clearScaleValues",value:function(){this.graphicObject2D?this.graphicObject2D.scaleValues=[]:this.scaleValues=[]}},{key:"getSubSymbols",value:function(){return this.graphicObject2D?this.graphicObject2D.subSymbols:this.subSymbols}},{key:"setSubSymbols",value:function(t){this.graphicObject2D?this.graphicObject2D.subSymbols=t:this.subSymbols=t}},{key:"getControlPoints",value:function(){if(this.graphicObject2D&&!this.equalControlPoints()){this.controlPoints=[];for(var t=0;t<this.graphicObject2D.getLatLngs().length;t++)this.controlPoints.push(new SuperMap.Geometry.Point(this.graphicObject2D.getLatLngs()[t].lng,this.graphicObject2D.getLatLngs()[t].lat))}return this.controlPoints}},{key:"setControlPoints",value:function(t){if(this.graphicObject2D){for(var e=[],l=0;l<t.length;l++)e.push(L.latLng(t[l].y,t[l].x));this.graphicObject2D._latLngs=e}else this.controlPoints=t}},{key:"clearControlPoints",value:function(){this.graphicObject2D?this.graphicObject2D._latLngs=[]:this.controlPoints=[]}},{key:"addControlPoints",value:function(t,e){this.graphicObject2D?e<this.graphicObject2D.getLatLngs().length?(this.graphicObject2D._latLngs[e].lat=t.y,this.graphicObject2D._latLngs[e].lng=t.x):this.graphicObject2D._latLngs.push(L.latLng(t.y,t.x)):e<this.controlPoints.length?(this.controlPoints[e].y=t.y,this.controlPoints[e].x=t.x):this.controlPoints.push(t)}},{key:"equalControlPoints",value:function(){if(this.graphicObject2D){if(this.graphicObject2D.getLatLngs().length!==this.controlPoints.length)return!1;for(var t=0;t<this.controlPoints.length;t++)if(this.graphicObject2D.getLatLngs()[t].lat!==this.controlPoints[t].y||this.graphicObject2D.getLatLngs()[t].lng!==this.controlPoints[t].x)return!1;return!0}return!0}},{key:"getIsEdit",value:function(){return this.graphicObject2D?this.graphicObject2D.isEdit:this.isEdit}},{key:"getStyle",value:function(){return this.graphicObject2D?this.graphicObject2D.style:this.style}},{key:"addScalePoint",value:function(t,e){if(t&&null!==t){void 0!==e&&null!==e||(e=this.getScalePoints().length<0?0:this.getScalePoints().length);var l=new SuperMap.Geometry.Point(t.x,t.y);l.isScalePoint=!0,l.tag=e,this.graphicObject2D?this.graphicObject2D.scalePoints.push(l):this.scalePoints.push(l)}}},{key:"clearScalePoints",value:function(){this.graphicObject2D?this.graphicObject2D.scalePoints=[]:this.scalePoints=[]}},{key:"getScalePoints",value:function(){return this.graphicObject2D?this.graphicObject2D.scalePoints:this.scalePoints}},{key:"setScalePoints",value:function(t){return this.graphicObject2D?this.graphicObject2D.scalePoints=t:this.scalePoints=t}}]),i(t,[{key:"destroy",value:function(){this.minEditPts=null,this.maxEditPts=null,this.controlPoints.length=0,this.controlPoints=null,this.scalePoints.length=0,this.scalePoints=null,this.scaleValues.length=0,this.scaleValues=null,this.subSymbols.length=0,this.subSymbols=null,this.subSymbolSize=0,this.map=null,this.symbolType=null,this.symbolName=null,this.textContent=null,this.components=[],this.radius=null,this.islocationCircle=!1,this.tipPoint=null,this.roundBox=null,this.textBoxType=null,this.style=null}},{key:"clearComponents",value:function(){if(this.components=[],this.clearScalePoints(),this.maxEditPts<this.controlPoints.length&&this.symbolType!==SuperMap.Plot.SymbolType.ELLIPSESYMBOL){var t=this.controlPoints.shift(),e=this.controlPoints.pop();this.controlPoints=[],this.controlPoints.push(t,e)}}},{key:"calculateParts",value:function(){if(this.clearComponents(),this.controlPoints=SuperMap.Plot.PlottingUtil.clearSamePts(this.controlPoints),this.controlPoints.length>=this.minEditPts){var t={textContent:this.textContent,type:this.symbolType,surroundLineFlag:!1,positionPoints:this.controlPoints,style:{}};if(t.type===SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL&&t.positionPoints.push(t.positionPoints[0]),this.symbolType===SuperMap.Plot.SymbolType.PARALLELLINE){if(this.controlPoints&&this.controlPoints.length>=3){var e=!1;void 0!==this.controlPoints[0].z&&(e=!0);var l=SuperMap.Plot.PlottingUtil.distance(this.controlPoints[0],this.controlPoints[1]);SuperMap.Plot.PlottingUtil.isRight(this.controlPoints[0],this.controlPoints[1],this.controlPoints[2])&&(l=-l);for(var o=[],n=1;n<this.controlPoints.length;n++)o.push(this.controlPoints[n].clone());var i=SuperMap.Plot.PlottingUtil.parallel(o,l);if(this.controlPoints[0].x=i[0].x,this.controlPoints[0].y=i[0].y,e)for(var r=0;r<o.length;r++)i[r].z=o[r].z;this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,o),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i)}}else this.components.push(t)}else this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine()}},{key:"setMinAndMaxEditPts",value:function(){if(0===this.libID)switch(this.code){case SuperMap.Plot.SymbolType.TEXTSYMBOL:this.minEditPts=1,this.maxEditPts=1;break;case SuperMap.Plot.SymbolType.CIRCLESYMBOL:case SuperMap.Plot.SymbolType.RECTANGLESYMBOL:this.minEditPts=2,this.maxEditPts=2;break;case SuperMap.Plot.SymbolType.ARCSYMBOL:case SuperMap.Plot.SymbolType.CHORDSYMBOL:case SuperMap.Plot.SymbolType.PIESYMBOL:case SuperMap.Plot.SymbolType.ELLIPSESYMBOL:case SuperMap.Plot.SymbolType.PARALLELOGRAM:this.minEditPts=3,this.maxEditPts=3;break;case SuperMap.Plot.SymbolType.POLYLINESYMBOL:case SuperMap.Plot.SymbolType.POLYBEZIERSYMBOL:this.minEditPts=2,this.maxEditPts=9999;break;case SuperMap.Plot.SymbolType.PARALLELLINE:case SuperMap.Plot.SymbolType.POLYBEZIERCLOSESYMBOL:case SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL:this.minEditPts=3,this.maxEditPts=9999;break;case SuperMap.Plot.SymbolType.KIDNEY:this.minEditPts=2,this.maxEditPts=3}}},{key:"addCell",value:function(t,e,l,o){if(t&&e){var n={};n.type=t,n.textContent=o,n.positionPoints=e,n.style=l&&null!==l?l:{surroundLineFlag:!1},this.components.push(n)}}},{key:"getDefaultSubSymbolSize",value:function(){var t=this.getLonLatDistanceFromPixel(this.subSymbolDefaultPixelSize);if(0===t){if(0!==this.subSymbolSize)return this.subSymbolSize;for(var e=0,l=0;l<this.controlPoints.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(this.controlPoints[l],this.controlPoints[l+1]);t=.3*e}return t}},{key:"getLonLatDistanceFromPixel",value:function(t){if(null===this.map)return 0;var e,l;if(L.Map&&this.map instanceof L.Map){var o=this.map.layerPointToLatLng(L.point(0,0)),n=this.map.layerPointToLatLng(L.point(t,0));e=new SuperMap.Geometry.Point(o.lng,o.lat),l=new SuperMap.Geometry.Point(n.lng,n.lat)}return SuperMap.Plot.PlottingUtil.distance(e,l)}},{key:"getTextBounds",value:function(t,e){" "===e&&(e="_");var l=document.createElement("span");document.body.appendChild(l),l.style.width="auto",l.style.height="auto",t.fontSize&&(l.style.fontSize=new String(t.fontSize)+"px"),t.fontFamily&&(l.style.fontFamily=t.fontFamily),t.fontWeight&&(l.style.fontWeight=t.fontWeight),l.style.position="absolute",l.style.visibility="hidden",l.innerHTML=e;var o=new SuperMap.Bounds(l.clientLeft,l.clientTop+l.clientHeight-6,l.clientLeft+l.clientWidth,l.clientTop+4),n=new SuperMap.Bounds(0,0,0,0);if(L.Map&&this.map instanceof L.Map){var i=this.map.layerPointToLatLng(L.point(o.left,o.top)),r=this.map.layerPointToLatLng(L.point(o.right,o.bottom));n.left+=i.lng,n.top+=r.lat,n.right+=r.lng,n.bottom+=i.lat,n.add(-i.lng,-i.lat)}return document.body.removeChild(l),n}},{key:"getCircleLonLat",value:function(t,e){if(null===this.map)return L.latLng(0,0);if(L.Map&&this.map instanceof L.Map){var l=this.map.latLngToLayerPoint(L.latLng(t.y,t.x));return l.x+=e,this.map.layerPointToLatLng(L.point(l.x,l.y)).lng-t.x}}},{key:"freeCurveBoundsPixelToLatLng",value:function(t){if(null===this.map)return L.latLng(0,0);if(L.Map&&this.map instanceof L.Map){var e=this.map.layerPointToLatLng(L.point(t.left,t.top)),l=this.map.layerPointToLatLng(L.point(t.right,t.bottom));return new SuperMap.Bounds(e.lng,l.lat,l.lng,e.lat)}}},{key:"calAssistantLine",value:function(){var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);this.symbolType===SuperMap.Plot.SymbolType.ANNOFRAMESYMBOL&&(t.splice(1,0,new SuperMap.Plot.Point(this.controlPoints[1].x,this.controlPoints[0].y)),t.push(new SuperMap.Plot.Point(this.controlPoints[0].x,this.controlPoints[1].y)),t.push(new SuperMap.Plot.Point(this.controlPoints[0].x,this.controlPoints[0].y)));var e={type:24,surroundLineFlag:!1,positionPoints:t,style:{color:"#0000ff",opacity:1,weight:1,dashArray:"5, 5",strokeColor:"#0000ff",strokeOpacity:1,strokeWidth:2,strokeDashstyle:"dash",lineColorLimit:!0,lineTypeLimit:!0,lineWidthLimit:!0,surroundLineFlag:!1}};this.components.push(e)}},{key:"getSubSymbolScaleValue",value:function(t){void 0===t&&(t=.3);var e=this.getControlPoints();if(!this.getIsEdit()||this.constantSize){for(var l=0,o=0;o<e.length-1;o++)l+=SuperMap.Plot.PlottingUtil.distance(e[o],e[o+1]);var n=this.getDefaultSubSymbolSize();this.subSymbolScaleValue=n/l,this.constantSize||(this.subSymbolScaleValue>t||this.subSymbolScaleValue<=0)&&(this.subSymbolScaleValue=t),this.subSymbolScaleValue<=0&&(this.subSymbolScaleValue=t)}return this.subSymbolScaleValue}},{key:"modifyPoint",value:function(t,e){if(this.controlPoints=this.getControlPoints(),0===this.libID&&31===this.code){if(0===t)return this.controlPoints[0].x=(this.controlPoints[1].x+this.controlPoints[3].x)/2,void(this.controlPoints[0].y=(this.controlPoints[1].y+this.controlPoints[3].y)/2);var l=-1;0===(l=(t+2)%4)&&(l=4);var o=SuperMap.Plot.PlottingUtil.distance(this.controlPoints[0],this.controlPoints[t]),n=SuperMap.Plot.PlottingUtil.findPointInLine(this.controlPoints[0],this.controlPoints[l],o),i=new SuperMap.Geometry.Point(2*this.controlPoints[0].x-n.x,2*this.controlPoints[0].y-n.y);if(L.Map&&this.map instanceof L.Map)var r=this.map.latLngToLayerPoint(L.latLng(n.y,n.x)),a=this.map.latLngToLayerPoint(L.latLng(i.y,i.x));var p=!1;(SuperMap.Plot.PlottingUtil.equalFuzzy(r.x-a.x,0)||SuperMap.Plot.PlottingUtil.equalFuzzy(r.y-a.y,0))&&(p=!0),p?(this.addControlPoints(i,l),this.addControlPoints(n,t)):(this.addControlPoints(i,t),this.addControlPoints(n,l))}this.calculateParts()}},{key:"computeSubSymbol",value:function(t,e,l,o,n,i){if(null===t.symbolData||null===t.symbolData.innerCells)return null;void 0===n&&(n=0),void 0===i&&(i=0);for(var r=SuperMap.Plot.AnalysisSymbol.analysisSymbolCells(t.symbolData),a=0,p=0,u=0,s=0,P=0;P<r.length;P++){var c=SuperMap.Plot.Primitives.getSpatialData(r[P].type,r[P].positionPoints,r[P].textContent,0,r[P].isCalculate);for(d=0,m=c.length;d<m;d++)a<c[d].x&&(a=c[d].x),p<c[d].y&&(p=c[d].y),u>c[d].x&&(u=c[d].x),s>c[d].y&&(s=c[d].y)}var S=new SuperMap.Geometry.Point(a,p),y=new SuperMap.Geometry.Point(u,s),h=(S.y-y.y)/l,g=(S.x-y.x)/l,f=g>h?g:h,M=new SuperMap.Geometry.Point(.5*(S.x+y.x),.5*(S.y+y.y));M.x+=n*(S.x-y.x),M.y+=i*(S.y-y.y);for(var d=0,m=r.length;d<m;d++){for(var b=0,v=r[d].positionPoints.length;b<v;b++)r[d].positionPoints[b].x-=M.x,r[d].positionPoints[b].y-=M.y,r[d].positionPoints[b].x/=f,r[d].positionPoints[b].y/=f,SuperMap.Plot.PlottingUtil.rotateAngle(new SuperMap.Geometry.Point(0,0),o*Math.PI/180,r[d].positionPoints[b]),r[d].positionPoints[b].x+=e.x,r[d].positionPoints[b].y+=e.y;r[d].type===SuperMap.Plot.SymbolType.TEXTSYMBOL&&(r[d].style.fontSize=Math.ceil(r[d].style.fontSize/2)),c.style=r[d].style,r[d].isCalculate=!1,this.components.push(r[d])}return r}},{key:"addArrow",value:function(t){if(t.length<2)return t;var e=0,l=SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints)*(e=(this.getIsEdit(),.5*this.getSubSymbolScaleValue())),o=t[t.length-1];if(t.length>2){for(var n=-1,i=t.length-2;i>=0;i--)if(l<SuperMap.Plot.PlottingUtil.distance(o,t[i])){n=i;break}t.splice(n+1,t.length-n),t.push(o)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var r=t[t.length-2],a=t[t.length-1],p=l;if(void 0===r)return t;if(!(SuperMap.Plot.PlottingUtil.distance(r,a)<l)){var u=SuperMap.Plot.PlottingUtil.radian(r,a)*this.RTOD,s=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,u+157.5),P=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,u+202.5),c={surroundLineFlag:!1,fillLimit:!0,fillColor:this.getStyle().color,lineTypeLimit:!0,fill:!0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[s,t[t.length-1],P],c,!0)}}},{key:"calculateforHead",value:function(t,e,l,o){for(var n=0,i=0;i<t.length-1;i++)n+=SuperMap.Plot.PlottingUtil.distance(t[i],t[i+1]);for(var r=n*o,a=SuperMap.Plot.PlottingUtil.clonePoints(e.arrowBodyPts);SuperMap.Plot.PlottingUtil.distance(l[0],l[1])<r&&!(a.length<3);){if(!(SuperMap.Plot.PlottingUtil.distance(l[0],a[a.length-3])<r)){var p=SuperMap.Plot.PlottingUtil.projectPoint(l[0],a[a.length-2],a[a.length-3]),u=SuperMap.Plot.PlottingUtil.distance(l[0],p),s=SuperMap.Plot.PlottingUtil.findPointInLine(p,a[a.length-3],Math.sqrt(r*r-u*u));a.splice(a.length-2,1,s),l.splice(1,1,s);break}l.splice(1,1),a.splice(a.length-2,1),l.push(a[a.length-2])}return a}},{key:"ComputeZValue",value:function(t,e,l){var o=SuperMap.Plot.PlottingUtil.pointProjectToSegment(t,e,l),n=new SuperMap.Geometry.Point(o.projectPoint.x,o.projectPoint.y),i=SuperMap.Plot.PlottingUtil.distance(e,l),r=SuperMap.Plot.PlottingUtil.distance(e,t),a=SuperMap.Plot.PlottingUtil.distance(l,t);if(!o.isOnline){if(r>=i)return l.z;if(a>=i)return e.z}return n.x!=e.x&&e.x!=l.x?e.z+(n.x-e.x)/(e.x-l.x)*(e.z-l.z):n.y!=e.y&&e.y!=l.y?e.z+(n.y-e.y)/(e.y-l.y)*(e.z-l.z):0==(r=SuperMap.Plot.PlottingUtil.distance(e,n))?e.z:e.z-(e.z-l.z)*(r/i)}},{key:"ComputeBeizerZValueByDis",value:function(t,e,l){if(t.length<2)return!1;for(var o=[],n=0;n<t.length;n++)o.push({x:t[n].x,y:t[n].y});var i=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(0==i)return!1;var r=SuperMap.Plot.PlottingUtil.polylineDistance(e),a=[];a.push(o[0]);for(var p=-1,u=0,s=e[0],n=1;n<o.length;n++){a.push(o[n]);var P=SuperMap.Plot.PlottingUtil.polylineDistance(a)/i,c=r*P,S=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(c,e),y=S.index,h=S.pts;if(S.bfind){for(var g=t[n-1].z,f=t[n].z,M=r*(P-u),d=0,m=++p;m<=y;m++){var b=g+(f-g)*((d+=m==p?SuperMap.Plot.PlottingUtil.distance(s,e[m]):SuperMap.Plot.PlottingUtil.distance(e[m-1],e[m]))/M);l.push({x:e[m].x,y:e[m].y,z:b})}p=y}u=P,s=h}for(n=p+1;n<e.length;n++)l.push({x:e[n].x,y:e[n].y,z:t[t.length-1].z});return!0}},{key:"ComputeHeight",value:function(t,e,l,o){if(l!=o)if(0==t.length);else if(1==t.length)e.push({x:t[0].x,y:t[0].y,z:l});else if(2==t.length)e.push({x:t[0].x,y:t[0].y,z:l}),e.push({x:t[1].x,y:t[1].y,z:o});else{var n=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(0!=n){var i=[];i.push(t[0]),e.push({x:t[0].x,y:t[0].y,z:l});for(a=1;a<t.length-1;a++){i.push(t[a]);var r=l+(o-l)*SuperMap.Plot.PlottingUtil.polylineDistance(i)/n;e.push({x:t[a].x,y:t[a].y,z:r})}e.push({x:t[t.length-1].x,y:t[t.length-1].y,z:o})}else for(a=0;a<t.length;a++)e.push({x:t[a].x,y:t[a].y,z:l})}else for(var a=0;a<t.length;a++)e.push({x:t[a].x,y:t[a].y,z:l})}}]),t}());e.default=r,SuperMap.Geometry.AlgoSymbol=r},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15800",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.04),l.getScaleValues().push(1),l.getScaleValues().push(.12)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=this.getScaleValues()[0],o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=l*o,i=this.getScaleValues()[2]*o*.5,r=!1;r=0===this.getScaleValues()[1];var a=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(0!==a){new SuperMap.Geometry.Point(0,0);for(var p=[],u=0;u<=a;u+=i){var s=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,u);if(!(s.index<0)){var P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[s.index+1],s.pt);if(r?p.push(P.pntRight):p.push(P.pntLeft),Math.abs(u)<=1e-6){this.clearScalePoints();var c=new SuperMap.Geometry.Point(p[0].x,p[0].y);c.isScalePoint=!0,c.tag=0,this.addScalePoint(c)}else Math.abs(2*i-u)<=1e-6&&((c=new SuperMap.Geometry.Point(s.pt.x,s.pt.y)).isScalePoint=!0,c.tag=1,this.addScalePoint(c));r=!r}}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p);for(var S=p.length,y=0,h=0;h<S-1;++h){var g=new SuperMap.Geometry.Point(p[h].x,p[h].y),f=new SuperMap.Geometry.Point(p[h+1].x,p[h+1].y);y=.3*SuperMap.Plot.PlottingUtil.distance(g,f);var M=[],d=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.5,p[h],p[h+1]);new SuperMap.Geometry.Point((p[h].x+p[h+1].x)/2,(p[h].y+p[h+1].y)/2);var m=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*y,p[h],d);M.push(m.pntLeft),M.push(m.pntRight),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l),n=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t){var i=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(1,o[1],o[0]),r=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,i.pntRight,i.pntLeft),a=SuperMap.Plot.PlottingUtil.distance(r.projectPoint,l[0]);this.getScaleValues()[0]=a/n;var p=SuperMap.Plot.PlottingUtil.pointIsRightToLine(o[0],o[1],e);this.getScaleValues()[1]=p?1:0}else{for(var u,s=-1,P=0,c=o.length-1;P<c;P++){var S=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,o[P],o[P+1]);if(S.isOnline){u=S.projectPoint,s=P;break}}var y=[];if(-1===s)y.push(o[0]);else{for(var P=0,c=s;P<=c;P++)y.push(o[P]);y.push(u);var h=SuperMap.Plot.PlottingUtil.polylineDistance(y)/n;h<.02&&(h=.02),h>.5&&(h=.5),this.getScaleValues()[2]=h}}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15800=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21600",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=99999,0===l.getScaleValues().length&&l.getScaleValues().push(.05),l.subText=" ",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!(t.length<this.minEditPts)){1!==this.getScaleValues().length&&(this.clearScaleValues(),this.getScaleValues().push(.05));var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);for(var l=this.getSubSymbolScaleValue(),o=0,n=0;n<e.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(e[n],e[n+1]);var i=.5*o,r=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,i);if(-1!==r.index){for(var a=r.pt,p=[],u=0,n=0;n<r.index+1;n++)p.push(e[n]),n>0&&(u+=SuperMap.Plot.PlottingUtil.distance(p[n],p[n-1]));var s,P,c=o*l*.5,S=[];if(i-u>=c){s=SuperMap.Plot.PlottingUtil.linePnt(a,e[r.index],c),p.push(s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),P=SuperMap.Plot.PlottingUtil.linePnt(a,e[r.index+1],c),S.push(P);for(var y=e.length,n=r.index+1;n<y;++n)S.push(e[n]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S)}else{for(var h=-1,n=p.length-1;n>=0;n--){var g=new SuperMap.Geometry.Point(p[n].x,p[n].y),f=new SuperMap.Geometry.Point(a.x,a.y);if((d=SuperMap.Plot.PlottingUtil.distance(g,f))>c){h=n;break}}if(-1==h)return;p.splice(h+1,p.length-1-h),s=SuperMap.Plot.PlottingUtil.linePnt(a,e[h],c),p.push(s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p);for(var M=-1,n=r.index;n<e.length;n++){var g=new SuperMap.Geometry.Point(e[n].x,e[n].y),f=new SuperMap.Geometry.Point(a.x,a.y),d=SuperMap.Plot.PlottingUtil.distance(g,f);if(d>c){M=n;break}}if(-1==M)return;P=SuperMap.Plot.PlottingUtil.linePnt(a,e[M],c),S.push(P);for(n=M+1;n<e.length;++n)S.push(e[n]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S)}if(!(p.length<2)){for(var m=0,n=0;n<t.length-1;n++)m+=SuperMap.Plot.PlottingUtil.distance(t[n],t[n+1]);this.getIsEdit()||(this.getScaleValues()[0]=.6*l);var b=m*this.getScaleValues()[0],v=new SuperMap.Geometry.Point(p[0].x,p[0].y),O=new SuperMap.Geometry.Point(p[1].x,p[1].y),L=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(b,O,v),U=[];if(U.push(L.pntLeft),U.push(L.pntRight),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U),!(S.length<2)){var w=new SuperMap.Geometry.Point(S[S.length-1].x,S[S.length-1].y),_=new SuperMap.Geometry.Point(S[S.length-2].x,S[S.length-2].y),T=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(b,_,w);(U=[]).push(T.pntLeft),U.push(T.pntRight),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U);var x=s,E=P,G=180*SuperMap.Plot.PlottingUtil.radian(x,E)/Math.PI,V=(SuperMap.Plot.PlottingUtil.distance(x,E),new SuperMap.Geometry.Point((s.x+P.x)/2,(s.y+P.y)/2));if((U=[]).push(V),0!==this.subText.length){var A=this.subText,C={surroundLineFlag:!1,fontSize:15,fontSizeLimit:!0};C.labelAlign="cm",C.labelRotation=-G,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,U,C,A)}this.addScalePoint(L.pntLeft)}}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.distance(e,l[0])/o;this.getScaleValues()[0]=n}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol21600=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol23500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.05),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];3>=t.length?(e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t),e=SuperMap.Plot.PlottingUtil.clearSamePts(e)):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t),e=SuperMap.Plot.PlottingUtil.clearSamePts(e));var l={fillLimit:!0,fill:!1,surroundLineFlag:!1};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e,l);var o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),n=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(!this.getIsEdit()){var i=this.getDefaultSubSymbolSize()/n;(i>.3||i<=0)&&(i=.3),this.getScaleValues()[0]=2*i}var r=this.getScaleValues()[0],a=(this.getScaleValues()[1],this.getScaleValues()[2]),p=this.getScaleValues()[3],u=n*r,s=new SuperMap.Geometry.Point(o.x+n*a,o.y+n*p);if(this.getSubSymbols()&&null!==this.getSubSymbols()&&this.getSubSymbols().length>0){if(this.getSubSymbols()[0].symbolData)for(var P in this.getSubSymbols()[0].symbolData.innerCells)this.getSubSymbols()[0].symbolData.innerCells[P].type===SuperMap.Plot.SymbolType.POLYBEZIERSYMBOL&&(this.getSubSymbols()[0].symbolData.innerCells[P].type=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL);this.computeSubSymbol(this.getSubSymbols()[0],s,u,0)}this.addScalePoint(s);var c=u,S=SuperMap.Plot.PlottingUtil.circlePoint(s,c,c,90);this.addScalePoint(S)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=[];3>=l.length?o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o),i=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t){r=(e.x-n.x)/i;this.getScaleValues()[2]=r;a=(e.y-n.y)/i;this.getScaleValues()[3]=a}else if(1===t){var r=this.getScaleValues()[2],a=this.getScaleValues()[3],p=new SuperMap.Geometry.Point(n.x+i*r,n.y+i*a),u=SuperMap.Plot.PlottingUtil.distance(p,e)/i;this.getScaleValues()[0]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol23500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol31300",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var o=this.getScaleValues()[0]*e,n=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(o,t[0],t[1]),i=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(o,t[1],t[0]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[n.pntLeft,n.pntRight]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[i.pntLeft,i.pntRight]),this.addScalePoint(i.pntRight,0)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);if(0===t){var i=l[0],r=e,a=SuperMap.Plot.PlottingUtil.distance(r,i)/o;this.getScaleValues()[0]=a}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol31300=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol39800",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,l.getScaleValues().length,0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[],l=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(this.clearScalePoints(),t.length<3)e.push(t[0]),e.push(t[1]);else{var o=SuperMap.Plot.PlottingUtil.computeBeizerPoints(this.getIsEdit(),t,this.getScaleValues());this.setScaleValues(o.scaleValues);for(var n=0;n<o.scalePoints.length;n++)this.addScalePoint(o.scalePoints[n]);e=o.beizerPoints}SuperMap.Plot.PlottingUtil.clearSamePts(e);var i=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){this.getScaleValues().push(.5),this.getScaleValues()[1]=this.getSubSymbolScaleValue();var r=this.getSubSymbolScaleValue();this.getScaleValues().push(r)}if(!(e.length<=0)){var a;a=2===t.length?0:t.length-1;var p;this.getIsEdit()?p=i*this.getScaleValues()[4*a]:(this.getScaleValues()[4*this.controlPoints.length-4]=.5,p=i*this.getScaleValues()[4*this.controlPoints.length-4]);var u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(p,e);if(u.bfind){var s=u.index,P=u.pts;this.getIsEdit()||(this.getScaleValues()[4*this.controlPoints.length-4]=.5,this.getScaleValues()[4*this.controlPoints.length-3]=this.getSubSymbolScaleValue(),p=this.getScaleValues()[4*this.controlPoints.length-4]*l);var c=l*this.getSubSymbolScaleValue()*.8,S=p-c,y=p+c;if((u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(S,e)).bfind){var h,g=u.pts,f=[];if(0===(s=u.index))f.push(e[0]);else for(h=0;h<s;h++)f.push(e[h]);if(f.push(g),(u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(y,e)).bfind){var M=u.pts;s=u.index;var d=[];for(d.push(M),h=s+1;h<e.length;h++)d.push(e[h]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d);var m=SuperMap.Plot.PlottingUtil.radian(g,M)*this.RTOD,b=SuperMap.Plot.PlottingUtil.distance(g,M),v=new SuperMap.Geometry.Point((g.x+M.x)/2,(g.y+M.y)/2);this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],v,b,m);var O=l*this.getScaleValues()[4*a+1]/1.667;if(!(f.length<2)){var L=f[0],U=f[1],w=SuperMap.Plot.PlottingUtil.radian(L,U)*this.RTOD,_=SuperMap.Plot.PlottingUtil.circlePoint(L,O,O,w+90),T=SuperMap.Plot.PlottingUtil.circlePoint(L,O,O,w+270),x=[];if(x.push(_),x.push(T),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,x),!(d.length<2)){var E=d[d.length-1],G=d[d.length-2],V=SuperMap.Plot.PlottingUtil.radian(E,G)*this.RTOD,A=SuperMap.Plot.PlottingUtil.circlePoint(E,O,O,V+90),C=SuperMap.Plot.PlottingUtil.circlePoint(E,O,O,V+270);(x=[]).push(A),x.push(C),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,x);var Y=SuperMap.Plot.PlottingUtil.paraLine(e,O,!1),I=SuperMap.Plot.PlottingUtil.polylineDistance(Y)/11,j=I;for(h=0;h<11;h++)if((u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(j-I,Y)).bfind){var B=u.index,R=u.pts;if((u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(j,Y)).bfind){var N=u.pts,D=u.index;if(h%2==0){var k=[];k.push(R);for(var z=B+1;z<=D;z++)k.push(Y[z]);k.push(N),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,k,{surroundLineLimit:!0,lineColorLimit:!0,color:"#000000",strokeColor:"#000000",strokeOpacity:1})}j+=I}}this.addScalePoint(P),this.addScalePoint(_)}}}}}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>2*this.controlPoints.length-1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(l),i=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(SuperMap.Plot.PlottingUtil.equalFuzzy(n,0)||SuperMap.Plot.PlottingUtil.equalFuzzy(i,0))return;if(2*(l.length-1)===t||2===l.length&&0===t){var r,a,p=-1,u=0;for(r=0;r<o.length-1;r++){var s=[];s.push(o[r]),s.push(o[r+1]);var P=SuperMap.Plot.PlottingUtil.projectPoint(e,o[r],o[r+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(P,s).isOnPolyLine){var c=SuperMap.Plot.PlottingUtil.distance(e,P);-1===p?(p=r,a=P,u=c):u>c&&(p=r,a=P,u=c)}}(-1===p||p>o.length-1)&&(p=0,a=o[0]);var S=0;for(r=0;r<p;r++)S+=SuperMap.Plot.PlottingUtil.distance(o[r],o[r+1]);var y=o[p],h=(S+=SuperMap.Plot.PlottingUtil.distance(y,a))/i;h>=.95&&(h=.95),h<=.05&&(h=.05),2===l.length?this.getScaleValues()[0]=h:this.getScaleValues()[2*t]=h}else if(2*l.length-1===t||2===l.length&&1===t){var g=1.667*SuperMap.Plot.PlottingUtil.distance(e,l[0])/n;2===l.length?this.getScaleValues()[1]=g:this.getScaleValues()[2*t-1]=g}else{var f=-1;f=t%2==0?Math.floor(t/2):Math.floor((t+1)/2);var M=(e.x-l[f].x)/n,d=(e.y-l[f].y)/n;this.getScaleValues()[2*t]=M,this.getScaleValues()[2*t+1]=d}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol39800=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21501",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&l.getScaleValues().push(.05),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=this._getLinePts(e,this.getScaleValues()[0]),i=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),r=SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)*this.RTOD,a=SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt);this.getSubSymbols().length>=0&&(21504===this.code||21503===this.code||5010203===this.code||5010204===this.code?1300===this.getSubSymbols()[0].code?this.computeSubSymbol(this.getSubSymbols()[0],i,.8*a,r):this.computeSubSymbol(this.getSubSymbols()[0],i,.8*a,r-90):1300===this.getSubSymbols()[0].code?this.computeSubSymbol(this.getSubSymbols()[0],i,.8*a,r):this.computeSubSymbol(this.getSubSymbols()[0],i,.8*a,r-180));for(var p=[],u=[],s=0;s<=n.startIndex;s++)p.push(e[s]);if(p.push(n.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),n.endIndex<=e.length){u.push(n.endPt);for(s=n.endIndex+1;s<=e.length-1;s++)u.push(e[s]);this.addArrow(u)}var P=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),c=SuperMap.Plot.PlottingUtil.circlePoint(P.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,r+90);this.addScalePoint(c,0)}}},{key:"_getLinePts",value:function(t,e){var l={};if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"modifyPoint",value:function(t,e){if(0===t&&!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o),r=2*SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.5?r:.5}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol21501=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(.05),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(this.getScaleValues().length<1&&(this.clearScaleValues(),this.getScaleValues().push(.5)),!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=this.getLinePts(e,this.getScaleValues()[0]),i=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),r=SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)*this.RTOD,a=SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt);0<this.getSubSymbols().length&&this.computeSubSymbol(this.getSubSymbols()[0],i,.8*a,r);for(var p=[],u=[],s=0;s<=n.startIndex;s++)p.push(e[s]);if(p.push(n.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),n.endIndex<=e.length){u.push(n.endPt);for(s=n.endIndex+1;s<=e.length-1;s++)u.push(e[s]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u)}var P=e[0],c=e[1],S=e[e.length-2],y=e[e.length-1],h=.3*a,g=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(h,c,P),f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(h,S,y),M=g.pntLeft,d=f.pntLeft,m=[];m.push(P),m.push(M),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m);var b=[];b.push(y),b.push(d),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b);var v=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),O=SuperMap.Plot.PlottingUtil.circlePoint(v.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,r);this.addScalePoint(O,0)}}},{key:"getLinePts",value:function(t,e){var l=new Object;if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"modifyPoint",value:function(t,e){if(0===t&&!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o),r=2*SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.5?r:.5}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol22000=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3010102",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<1&&(this.clearScaleValues(),this.getScaleValues().push(.05)),this.getIsEdit()||(this.getScaleValues()[0]=this.getSubSymbolScaleValue());var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=e*this.getScaleValues()[0],i=5*o/14,r=9*o/14,a=this.getLinePts(l,i,n),p=this.getLinePts(l,r,n),u=new SuperMap.Geometry.Point((a.startPt.x+a.endPt.x)/2,(a.startPt.y+a.endPt.y)/2),s=180*SuperMap.Plot.PlottingUtil.radian(a.startPt,a.endPt)/Math.PI;this.createSubSymbol1(u,n,s);var P=new SuperMap.Geometry.Point((p.startPt.x+p.endPt.x)/2,(p.startPt.y+p.endPt.y)/2),c=180*SuperMap.Plot.PlottingUtil.radian(p.startPt,p.endPt)/Math.PI;this.createSubSymbol2(P,n,c);var S=SuperMap.Plot.PlottingUtil.circlePoint(P,.5*n,.5*n,c+90);this.addScalePoint(S);for(var y=[],h=[],g=[],f=0;f<=a.startIndex;f++)y.push(l[f]);if(y.push(a.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y),a.endIndex<=p.startIndex){h.push(a.endPt);for(f=a.endIndex+1;f<=p.startIndex;f++)h.push(l[f]);h.push(p.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h)}g.push(p.endPt);for(f=p.endIndex+1;f<l.length;f++)g.push(l[f]);for(var M=this.getSubSymbolScaleValue()*e*.5,d=[],m=(d=d.concat(g))[d.length-1],b=SuperMap.Plot.PlottingUtil.distance(m,d[d.length-1]);b<1.2*M&&(d.pop(),d.length>0);)b=SuperMap.Plot.PlottingUtil.distance(m,d[d.length-1]);if(d.push(m),d.length>1){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d);var v=d[d.length-2],O=180*SuperMap.Plot.PlottingUtil.radian(m,v)/Math.PI,L=SuperMap.Plot.PlottingUtil.circlePoint(m,M,M,O+22.5),U=SuperMap.Plot.PlottingUtil.circlePoint(m,M,M,O-22.5),w=[];w.push(L),w.push(m),w.push(U);var _={surroundLineFlag:!1,fillLimit:!0,fillColor:{surroundLineFlag:!1}.strokeColor,lineTypeLimit:!0,fill:!0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,w,_)}else this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g)}}},{key:"createSubSymbol1",value:function(t,e,l){var o=this.getSubSymbolPts(e);this.createSubSymbol(t,e,l,o)}},{key:"createSubSymbol2",value:function(t,e,l){var o=this.getSubSymbolPts(e);this.createSubSymbol(t,e,l,o)}},{key:"createSubSymbol",value:function(t,e,l,o){for(var n=[],i=0;i<o.length;i++){var r=SuperMap.Plot.PlottingUtil.coordinateTrans(t,o[i],l);n.push(r)}this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,n)}},{key:"getLinePts",value:function(t,e,l){for(var o=new Object,n=!1,i=l/2,r=!1,a=!1,p=.02*i;!n;){var u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(e-i,t);if(!u.bfind){r=!0,n=!0;break}var s=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(e+i,t);if(!s.bfind){a=!0,n=!0;break}SuperMap.Plot.PlottingUtil.distance(u.pts,s.pts)>l&&(o.startIndex=u.index,o.startPt=u.pts,o.endIndex=s.index,o.endPt=s.pts,n=!0),i+=p}if(!1===r&&!1===a);else if(!0===r&&!1===a)o.startIndex=0,o.startPt=t[0],(c=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(l,t)).bfind?(o.endIndex=c.index,o.endPt=c.pts):(o.endIndex=t.length-1,o.endPt=t[t.length-1]);else if(!1===r&&!0===a){o.endIndex=t.length-1,o.endPt=t[t.length-1];var P=SuperMap.Plot.PlottingUtil.polylineDistance(t),c=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(P-l,t);c.bfind?(o.startIndex=c.index,o.startPt=c.pts):(o.startIndex=0,o.startPt=t[0])}else o.startIndex=0,o.startPt=t[0],o.endIndex=t.length-1,o.endPt=t[t.length-1];return o}},{key:"getSubSymbolPts",value:function(t){var e=t/4,l=[];return l.push(new SuperMap.Geometry.Point(-2*e,0)),l.push(new SuperMap.Geometry.Point(0,-e)),l.push(new SuperMap.Geometry.Point(2*e,0)),l.push(new SuperMap.Geometry.Point(0,e)),l}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);n=SuperMap.Plot.PlottingUtil.clearSamePts(n);var i=9*SuperMap.Plot.PlottingUtil.polylineDistance(n)/14,r=this.getLinePts(n,i,o*this.getScaleValues()[0]),a=new SuperMap.Geometry.Point((r.startPt.x+r.endPt.x)/2,(r.startPt.y+r.endPt.y)/2),p=2*SuperMap.Plot.PlottingUtil.distance(a,e)/o;p<=.3&&(this.getScaleValues()[0]=p)}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3010102=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17804",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.1)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(.1)),t.length==this.minEditPts?this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t):this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t);var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=0;if(0!=(l=t.length==this.minEditPts?2*SuperMap.Plot.PlottingUtil.distance(t[0],t[1]):SuperMap.Plot.PlottingUtil.distance(t[0],t[1])+SuperMap.Plot.PlottingUtil.distance(t[0],t[2]))){var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2],r=new SuperMap.Geometry.Point(e.x+l*o,e.y+l*n),a=l*i,p=3*a,u=new SuperMap.Geometry.Point(-.5*p,.5*a),s=new SuperMap.Geometry.Point(.5*p,.5*a),P=SuperMap.Plot.PlottingUtil.coordinateTrans(r,u,0),c=SuperMap.Plot.PlottingUtil.coordinateTrans(r,s,0),S=[];S.push(P.clone()),S.push(c.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S);var y=new SuperMap.Geometry.Point(-.5*p,-.5*a),h=new SuperMap.Geometry.Point(.5*p,-.5*a),g=SuperMap.Plot.PlottingUtil.coordinateTrans(r,y,0),f=SuperMap.Plot.PlottingUtil.coordinateTrans(r,h,0);(S=[]).push(g.clone()),S.push(f.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S);var M=new SuperMap.Geometry.Point(-.1*p,.5*a),d=new SuperMap.Geometry.Point(-.15*p,-.5*a),m=SuperMap.Plot.PlottingUtil.coordinateTrans(r,M,0),b=SuperMap.Plot.PlottingUtil.coordinateTrans(r,d,0);(S=[]).push(m.clone()),S.push(b.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S);var v=new SuperMap.Geometry.Point(.15*p,.5*a),O=new SuperMap.Geometry.Point(.1*p,-.5*a),L=SuperMap.Plot.PlottingUtil.coordinateTrans(r,v,0),U=SuperMap.Plot.PlottingUtil.coordinateTrans(r,O,0);(S=[]).push(L.clone()),S.push(U.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S),this.clearScalePoints();var w=new SuperMap.Geometry.Point(r.x+.1*p,r.y);w.isScalePoint=!0,w.tag=0,this.addScalePoint(w);var _=SuperMap.Plot.PlottingUtil.circlePoint(r,.5*p,.5*p,90);_.isScalePoint=!0,_.tag=1,this.addScalePoint(_)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=(l=SuperMap.Plot.PlottingUtil.clearSamePts(l))[0].clone(),n=0;if(0==(n=2==l.length?2*SuperMap.Plot.PlottingUtil.distance(l[0],l[1]):SuperMap.Plot.PlottingUtil.distance(l[0],l[1])+SuperMap.Plot.PlottingUtil.distance(l[0],l[2])))return;if(0==t){var i=(u=this.getScaleValues()[2])*n,r=(e.x-.1*i-o.x)/n;this.getScaleValues()[0]=r;a=(e.y-o.y)/n;this.getScaleValues()[1]=a}else if(1==t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(o.x+n*r,o.y+n*a),u=2*(i=SuperMap.Plot.PlottingUtil.distance(p,e))/n/3;this.getScaleValues()[2]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17804=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol27100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.1,l.getScaleValues()[1]=.2),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues()[0]=.1,this.getScaleValues()[1]=.2),this.getIsEdit()||(this.getScaleValues()[0]=this.getSubSymbolScaleValue());var e,l,o=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]),n=SuperMap.Plot.PlottingUtil.radian(t[0],t[1])*this.RTOD,i=this.getScaleValues()[0],r=this.getScaleValues()[1],a=i*o,p=[];for(e=90;e<=270;e+=3)l=SuperMap.Plot.PlottingUtil.circlePoint(t[0],a,a,e+n),p.push(l);var u=[];for(e=-90;e<=90;e+=3)l=SuperMap.Plot.PlottingUtil.circlePoint(t[1],a,a,e+n),u.push(l);var s=o*r,P=new SuperMap.Geometry.Point((p[0].x+u[u.length-1].x)/2,(p[0].y+u[u.length-1].y)/2),c=SuperMap.Plot.PlottingUtil.linePnt(p[0],u[u.length-1],.5*(o-1.2*s)),S=SuperMap.Plot.PlottingUtil.linePnt(u[u.length-1],p[0],.5*(o-1.2*s)),y=SuperMap.Plot.PlottingUtil.radian(S,c)*this.RTOD,h=[];h.push(c),h.push.apply(h,p),h.push.apply(h,u),h.push(S),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h),this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],P,.9*s,y-90),this.clearScalePoints(),this.addScalePoint(p[p.length-1]);var g=SuperMap.Plot.PlottingUtil.circlePoint(P,s,s,y+90);this.addScalePoint(g)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]);if(0==t){var n=(s=SuperMap.Plot.PlottingUtil.distance(e,l[0]))/o;this.getScaleValues()[0]=n}else if(1==t){var i=this.getScaleValues()[0]*o,r=SuperMap.Plot.PlottingUtil.radian(l[0],l[1])*this.RTOD,a=SuperMap.Plot.PlottingUtil.circlePoint(l[0],i,i,90+r),p=SuperMap.Plot.PlottingUtil.circlePoint(l[1],i,i,90+r),u=new SuperMap.Geometry.Point((a.x+p.x)/2,(a.y+p.y)/2),s=SuperMap.Plot.PlottingUtil.distance(u,e),P=s/o;P>=.8&&(P=.8),this.getScaleValues()[1]=P}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol27100=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol27900",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.25),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0;e<t.length-1;e++)SuperMap.Plot.PlottingUtil.distance(t[e],t[e+1]);this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t);var l=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]);this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[t[0],new SuperMap.Geometry.Point(t[0].x-l*this.getScaleValues()[0],t[0].y)],{surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!0,fillStyle:0,fillColor:"#ffff00",strokeOpacity:1,fillOpacity:1});var o=SuperMap.Plot.PlottingUtil.circlePoint(t[0],l*this.getScaleValues()[0],l*this.getScaleValues()[0],90);this.addScalePoint(o,0)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint&&0===t){var l=new SuperMap.Geometry.Point(this.controlPoints[0].x,this.controlPoints[0].y),o=new SuperMap.Geometry.Point(this.controlPoints[1].x,this.controlPoints[1].y),n=new SuperMap.Geometry.Point(e.x,e.y),i=SuperMap.Plot.PlottingUtil.distance(l,n)/SuperMap.Plot.PlottingUtil.distance(l,o);.9<i&&(i=.9),this.getScaleValues()[0]=i}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol27900=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol29100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&l.getScaleValues().push(.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());var l=[];t.length<=3?l=SuperMap.Plot.Primitives.getKendyShapePts(t):(t.push(t[0]),l=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,l);for(var o=0;o<4;o++){var n=Math.floor(o*l.length/4),i=new SuperMap.Geometry.Point(l[n].x,l[n].y),r=new SuperMap.Geometry.Point(l[n+1].x,l[n+1].y),a=new SuperMap.Geometry.Point((i.x+r.x)/2,(i.y+r.y)/2),p=SuperMap.Plot.PlottingUtil.radian(r,a)*this.RTOD,u=this.getScaleValues()[0]*e/2,s=SuperMap.Plot.PlottingUtil.circlePoint(a,u,u,p),P=SuperMap.Plot.PlottingUtil.circlePoint(a,4*u,4*u,p+270),c=SuperMap.Plot.PlottingUtil.circlePoint(a,u,u,p+180);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[s,P,c],{lineTypeLimit:!0,surroundLineLimit:!0})}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol29100=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol34900",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(-1!==SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,l/2).index){if(this.addArrow(e),!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=l*this.getScaleValues()[0],i=new SuperMap.Geometry.Point(e[0].x,e[0].y),r=new SuperMap.Geometry.Point(e[1].x,e[1].y),a=SuperMap.Plot.PlottingUtil.radian(r,i)*this.RTOD,p=new SuperMap.Geometry.Point(0,.5*n),u=new SuperMap.Geometry.Point(n,.5*n),s=new SuperMap.Geometry.Point(1.5*n,0),P=SuperMap.Plot.PlottingUtil.coordinateTrans(i,p,a),c=SuperMap.Plot.PlottingUtil.coordinateTrans(i,u,a),S=SuperMap.Plot.PlottingUtil.coordinateTrans(i,s,a);this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[e[0],P,c,S])}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol34900=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol6020400",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<1&&this.getScaleValues().push(.05);var e=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]);2===t.length&&t.splice(1,0,new SuperMap.Geometry.Point(t[0].x+e,t[0].y));var l=new SuperMap.Geometry.Point(t[0].x,t[0].y),o=new SuperMap.Geometry.Point(t[1].x,t[1].y),n=new SuperMap.Geometry.Point(t[2].x,t[2].y),i=e,r=180*SuperMap.Plot.PlottingUtil.radian(l,o)/Math.PI%360,a=180*SuperMap.Plot.PlottingUtil.radian(l,n)/Math.PI%360;if(r>a&&(a+=360),!this.getIsEdit()){var p=.5*this.getDefaultSubSymbolSize()/i;p>.1&&(p=.1),this.getScaleValues()[0]=p}var u=i*this.getScaleValues()[0],s=180*Math.atan(.5*u/i)/Math.PI,P=(a-r)/3,c=(a-r)/50,S=this.getArcPts(t[0],i,r,r+P-1.8*s,c);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S);var y=this.getArcPts(t[0],i,r+P+1.8*s,r+2*P-1.8*s,c);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y);var h=this.getArcPts(t[0],i,r+2*P+1.8*s,a,c);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h);var g=r+P+90,f=SuperMap.Plot.PlottingUtil.circlePoint(t[0],e,e,r+P);this.createSubSymbol(f,u,g);var M=SuperMap.Plot.PlottingUtil.circlePoint(t[0],e,e,r+2*P),d=r+2*P+90;this.createSubSymbol(M,u,d);var m=SuperMap.Plot.PlottingUtil.circlePoint(t[0],e+u,e+u,r+P);this.addScalePoint(m),3===this.controlPoints.length&&(this.controlPoints[2]=SuperMap.Plot.PlottingUtil.circlePoint(t[0],e,e,a))}}},{key:"getArcPts",value:function(t,e,l,o,n){void 0!==n&&null!==n||(n=1);for(var i=[],r=l;r<o;r+=n){var a=SuperMap.Plot.PlottingUtil.circlePoint(t,e,e,r);i.push(a)}var p=SuperMap.Plot.PlottingUtil.circlePoint(t,e,e,o);return i.push(p),i}},{key:"createSubSymbol",value:function(t,e,l){for(var o=this.getSubSymbolPts(e),n=0;n<o.length;n++){for(var i=o[n],r=[],a=0;a<i.length;a++){var p=SuperMap.Plot.PlottingUtil.coordinateTrans(t,i[a],l);r.push(p)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r)}}},{key:"getSubSymbolPts",value:function(t){var e=[],l=[];l.push(new SuperMap.Geometry.Point(-t/2,0)),l.push(new SuperMap.Geometry.Point(t/2,0)),e.push(l);var o=[];return o.push(new SuperMap.Geometry.Point(0,-t/2)),o.push(new SuperMap.Geometry.Point(0,0)),e.push(o),e}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]);2===this.controlPoints.length&&l.splice(1,0,new SuperMap.Geometry.Point(l[0].x+o,l[0].y));var n=new SuperMap.Geometry.Point(l[0].x,l[0].y),i=new SuperMap.Geometry.Point(l[1].x,l[1].y),r=new SuperMap.Geometry.Point(l[2].x,l[2].y),a=SuperMap.Plot.PlottingUtil.distance(n,i),p=180*SuperMap.Plot.PlottingUtil.radian(n,i)/Math.PI%360,u=180*SuperMap.Plot.PlottingUtil.radian(n,r)/Math.PI%360;p>u&&(u+=360);var s=(u-p)/3,P=SuperMap.Plot.PlottingUtil.circlePoint(l[0],o,o,p+s),c=SuperMap.Plot.PlottingUtil.distance(P,e)/a;c<=.6&&(this.getScaleValues()[0]=c)}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol6020400=p},function(t,e,l){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),p=o(l(0)),u=(o(l(43)),function(t){function e(t){n(this,e);var l=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.MAX_ARRAY_SIZE=128,l.sv1_DefaultAtLenDivAbLen=0,l.sv2_DefaultAjWidthDivAtLen=.148,l.sv3_DefaultAeWidthDivAtLen=.4,l.sv4_DefaultAeLenDivAtLen=.312,l.sv_AtScaleParameter=1.5,l.sv_AtLenDivAtWidth=1.35,l.sv_AtWidthDivAwWidth=.5,l.sv_defaultAwLenDivAbLen=.15,l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1004",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.symbolName||(l.symbolName="贝塞尔尖耳箭头"),l.minEditPts=3,l.maxEditPts=512,l.clearScalePoints(),0===l.getScaleValues().length&&(l.getScaleValues().push(l.sv1_DefaultAtLenDivAbLen),l.getScaleValues().push(l.sv2_DefaultAjWidthDivAtLen),l.getScaleValues().push(l.sv3_DefaultAeWidthDivAtLen),l.getScaleValues().push(l.sv4_DefaultAeLenDivAtLen)),l}return r(e,p["default"]),a(e,[{key:"calculateParts",value:function(){this.clearComponents(),this.applyUse()}},{key:"applyUse",value:function(){var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length>=2&&t.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){var e=this.arrowMeshs(t);SuperMap.Plot.PlottingUtil.clearSamePts(e.shapePts);var l=SuperMap.Plot.PlottingUtil.clonePoints(t),o=l.length,n=!1;if(void 0!==l[0].z&&(n=!0),n){for(var i=e.leftBodyPts,r=e.rightBodyPts,a=e.arrowHeadPts,p=e.shapePts,u=[],s=0;s<p.length;s++)u.push({x:p[s].x,y:p[s].y,z:0});if(0==p.length)return!1;U=this.updateScalePoints(t);if(this.clearScalePoints(),3!=U.length)U=[];else for(s=0;s<U.length;s++)U[s].isScalePoint=!0,U[s].tag=s,this.addScalePoint(U[s]);var P=[],c={x:(l[0].x+l[1].x)/2,y:(l[0].y+l[1].y)/2},S={x:(i[i.length-1].x+r[0].x)/2,y:(i[i.length-1].y+r[0].y)/2},y=this.ComputeZValue(S,l[o-1],l[o-2]),h=0,g=0;i[0].x==l[0].x&&i[0].y==l[0].y?(h=l[0].z,g=l[1].z):(h=l[1].z,g=l[0].z),P.push({x:c.x,y:c.y,z:h});for(s=2;s<o-1;s++)P.push(l[s]);P.push({x:S.x,y:S.y,z:y});var f=[];this.ComputeBeizerZValueByDis(P,i,f),(P=[]).push({x:S.x,y:S.y,z:y});for(s=o-2;s>=2;s--)P.push(l[s]);P.push({x:c.x,y:c.y,z:g});var M=[];this.ComputeBeizerZValueByDis(P,r,M);for(var d=[],m=0;m<a.length;m++){var b=this.ComputeZValue(a[m],l[o-1],l[o-2]);d.push({x:a[m].x,y:a[m].y,z:b})}if(f.length>0&&M.length>0&&d.length>0){u=(u=(u=(u=[]).concat(f)).concat(d)).concat(M),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,{surroundLineFlag:!1});for(var v=[],s=0;s<U.length;s++){var O=this.ComputeZValue(U[s],l[o-1],l[o-2]),L=new SuperMap.Geometry.Point(U[s].x,U[s].y);L.z=O,v.push(L)}this.clearScalePoints(),3!=U.length?U=[]:this.setScalePoints(this.getScalePoints().concat(v))}}else{if(0==e.shapePts.length)return;this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e.shapePts,{surroundLineFlag:!1});var U=this.updateScalePoints(t);if(this.clearScalePoints(),3!=U.length)U=[];else for(s=0;s<U.length;s++)U[s].isScalePoint=!0,U[s].tag=s,this.addScalePoint(U[s])}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.getControlPoints());l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.getScaleValues().length<4&&(this.getScaleValues().push(this.sv1_DefaultAtLenDivAbLen),this.getScaleValues().push(this.sv2_DefaultAjWidthDivAtLen),this.getScaleValues().push(this.sv3_DefaultAeWidthDivAtLen),this.getScaleValues().push(this.sv4_DefaultAeLenDivAtLen));var o=l.length;if(o<=2)return;var n=this.operateCtrlPts(l);o=n.length,o--;var i,r,a,p,u=this.calcScaleValueCount(l.length);if(this.getScaleValues().length<u){var s=this.calcDefaultScaleValues(o);i=s[0],r=s[1],a=s[2],p=s[3]}else i=this.getScaleValues()[0],r=this.getScaleValues()[1],a=this.getScaleValues()[2],p=this.getScaleValues()[3];for(var P=SuperMap.Plot.PlottingUtil.polylineDistance(l),c=[],S=0;S<this.getScalePoints().length;S++)c.push(this.getScalePoints()[S].clone());if(0==c.length)return;c[t]=e.clone();var y,h,S=o-1;y=o<=3?new SuperMap.Geometry.Point((n[0].x+n[1].x)/2,(n[0].y+n[1].y)/2):n[S-1].clone();var g=new SuperMap.Geometry.Point(0,0),f=new SuperMap.Geometry.Point(0,0),M=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrianglePoints(0,3,y,n[S],n[S+1],f,M),SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,n[o],n[o-1],M,g),h=g.clone();var d,m,b,v,O,L,U=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(n[o],h,c[2]);d=U.dLen1,m=U.dLen2,0==d&&(d=.1),m=d,i=(d/=p+1)/P,1==t?(v=(U=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(n[o],h,c[1])).dLen1,a=(O=U.dLen2)/d,p=(v-d)/d):0==t?(d=(U=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(n[o],h,c[0])).dLen1,r=(b=U.dLen2)/d,(L=SuperMap.Plot.PlottingUtil.distance(n[o],n[o-1]))<2*d&&(d=.5*L),v=(U=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(n[o],h,c[1])).dLen1,a=(O=U.dLen2)/d,(p=(m-d)/d)<.1&&(a=O/(d=m/(1+(p=.1))),r=b/d),i=d/P):2==t&&(i=d/P),b=d*r,(L=SuperMap.Plot.PlottingUtil.distance(n[o],n[o-1]))<2*d&&(b=(d=.5*L)*r,i=d/P),this.getScaleValues()[0]=i,this.getScaleValues()[1]=r,this.getScaleValues()[2]=a,this.getScaleValues()[3]=p}this.calculateParts()}},{key:"arrowMeshs",value:function(t){var e=[],l=[],o=[],n=[],i=SuperMap.Plot.PlottingUtil.clonePoints(t),r=SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePts(i,this.getScaleValues(),SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_MULTIPOLYBEZIER),a=r.arrowTouLen,p=r.leftBodyPts,u=r.rightBodyPts;if(!SuperMap.Plot.PlottingUtil.equalFuzzy(a,0)){var s=[];s.push(p[p.length-1]),s.push(u[u.length-1]);var P=[];P.push(this.getScaleValues()[2]),P.push(this.getScaleValues()[3]),P.push(0),P.push(0);var c=SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePts(i,s,P,a,SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_WITH_EAR),S=[];S.push(p[0]),S.push(u[0]);SuperMap.Plot.ArrowToolKit.generateArrowTailShapePts(t,S,.2,SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_COATTAIL_POLYBODY);for(y=0;y<p.length;y++)e.push(p[y]),l.push(p[y]);for(y=0;y<c.length;y++)e.push(c[y]),n.push(c[y]);for(var y=u.length-1;y>=0;y--)e.push(u[y]),o.push(u[y])}return{shapePts:e,leftBodyPts:l,rightBodyPts:o,arrowHeadPts:n}}},{key:"updateScalePoints",value:function(t){var e=t.length,l=[];if(!(e<3)){var o=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(!SuperMap.Plot.PlottingUtil.equalFuzzy(o,0)){var n=this.operateCtrlPts(t);e=n.length,e--;for(var i=[],r=0;r<this.getScaleValues().length;r++)i.push(this.getScaleValues()[r]);var a=this.genArrowBodyPts(o,n,i),p=a.ArrowBodyCenterPts,u=this.genAtPts(e,p,i,a.ArrowTouLen),s=this.calc3rdScalePt(e,p,i,a.ArrowTouLen);return l.push(new SuperMap.Geometry.Point(a.LeftBodyPtsTemp[e].x,a.LeftBodyPtsTemp[e].y)),l.push(new SuperMap.Geometry.Point(u[2].x,u[2].y)),l.push(new SuperMap.Geometry.Point(s.x,s.y)),l}}}},{key:"operateCtrlPts",value:function(t){var e=SuperMap.Plot.PlottingUtil.clonePoints(t);if(3===e.length){var l=((e[0].x+e[1].x)/2+e[2].x)/2,o=((e[0].y+e[1].y)/2+e[2].y)/2,n=new SuperMap.Geometry.Point(l,o),i=e[2];e[2]=n,e.push(i)}return e}},{key:"genArrowBodyPts",value:function(t,e,l){var o,n=[],i=[],r=[],a=[],p=[],u=[],s=e.length;s--;var P,c;if(l.length<this.calcScaleValueCount(s)){var S=this.calcDefaultScaleValues(s);P=S[0],c=S[1],S[2],S[3]}else P=l[0],c=l[1],l[2],l[3];var y=SuperMap.Plot.PlottingUtil.clonePoints(e),h=(y[0].x+y[1].x)/2,g=(y[0].y+y[1].y)/2,f=Math.abs(h-y[2].x),M=Math.abs(g-y[2].y),d=0;if(f>0&&M>0){var m=1/(h-y[2].x),b=-1/(g-y[2].y),v=1*y[2].y/(g-y[2].y)-1*y[2].x/(h-y[2].x);d=Math.abs(m*y[0].x+b*y[0].y+v)/Math.sqrt(m*m+b*b)}else M<=1e-4?d=Math.abs(g-y[1].y):f<=1e-4&&(d=Math.abs(h-y[1].x));var O=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(d,y[2],new SuperMap.Geometry.Point(h,g)),L=SuperMap.Plot.PlottingUtil.pointIsRightToLine(y[1],y[2],y[0]);L?(n[1]=y[1],i[1]=y[0]):(n[1]=y[0],i[1]=y[1]),y[1]=new SuperMap.Geometry.Point((y[0].x+y[1].x)/2,(y[0].y+y[1].y)/2);var U=Math.sqrt((O.pntLeft.x-O.pntRight.x)*(O.pntLeft.x-O.pntRight.x)+(O.pntLeft.y-O.pntRight.y)*(O.pntLeft.y-O.pntRight.y))*this.sv_AtWidthDivAwWidth,w=(o=U*this.sv_AtLenDivAtWidth)*c;SuperMap.Plot.PlottingUtil.equalFuzzy(P,0)||(w=(o=t*P)*c);var _=SuperMap.Plot.PlottingUtil.distance(y[s],y[s-1]),T=2*o;_<T&&(w=(o=_/2)*c),y.push(y[s].clone());var x,E;x=0,E=0;var G=0,V=[];for(G=2;G<=s;G++)x+=SuperMap.Plot.PlottingUtil.distance(y[G],y[G-1]);for(x-=o,G=2;G<=s-1;G++)E+=SuperMap.Plot.PlottingUtil.distance(y[G],y[G-1]),V[G]=w+(U-w)*Math.pow((x-E)/x,this.sv_AtScaleParameter);V[s]=w;var A,C=new SuperMap.Geometry.Point(0,0),Y=new SuperMap.Geometry.Point(0,0),I=new SuperMap.Geometry.Point(0,0);for(G=2;G<=s-1;G++)SuperMap.Plot.PlottingUtil.getTrianglePoints(0,3,y[G-1],y[G],y[G+1],Y,I),G==s-1&&SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,y[s],y[s-1],I,C),A=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(V[G],Y,y[G]),(L=SuperMap.Plot.PlottingUtil.pointIsRightToLine(I,Y,A.pntRight))?(n[G]=new SuperMap.Geometry.Point(A.pntRight.x,A.pntRight.y),i[G]=new SuperMap.Geometry.Point(A.pntLeft.x,A.pntLeft.y)):(n[G]=new SuperMap.Geometry.Point(A.pntLeft.x,A.pntLeft.y),i[G]=new SuperMap.Geometry.Point(A.pntRight.x,A.pntRight.y));Math.sqrt(1*(y[s].x-C.x)*(y[s].x-C.x)+1*(y[s].y-C.y)*(y[s].y-C.y))>0&&(y[s]=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(o,y[s],C)),A=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(w,y[s+1],y[s]),(L=SuperMap.Plot.PlottingUtil.pointIsRightToLine(y[s],y[s+1],A.pntLeft))?(i[s]=new SuperMap.Geometry.Point(A.pntLeft.x,A.pntLeft.y),n[s]=new SuperMap.Geometry.Point(A.pntRight.x,A.pntRight.y)):(i[s]=new SuperMap.Geometry.Point(A.pntRight.x,A.pntRight.y),n[s]=new SuperMap.Geometry.Point(A.pntLeft.x,A.pntLeft.y));var j;for(G=2;G<s;G++)SuperMap.Plot.PlottingUtil.getTrianglePoints(3,3,n[G-1],n[G],n[G+1],Y,I),r[G]=new SuperMap.Geometry.Point(Y.x,Y.y),a[G]=new SuperMap.Geometry.Point(I.x,I.y),SuperMap.Plot.PlottingUtil.getTrianglePoints(3,3,i[G-1],i[G],i[G+1],Y,I),p[G]=new SuperMap.Geometry.Point(Y.x,Y.y),u[G]=new SuperMap.Geometry.Point(I.x,I.y),2==G&&(SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,n[1],n[2],r[2],C),a[G]=new SuperMap.Geometry.Point(C.x,C.y),SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,i[1],i[2],p[2],C),u[G]=new SuperMap.Geometry.Point(C.x,C.y)),G==s-1&&(T=(_=SuperMap.Plot.PlottingUtil.distance(n[s],n[s-1]))/3,(j=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(T,y[s],y[s+1])).x+=n[s].x-y[s].x,j.y+=n[s].y-y[s].y,T=(_=U-w)*Math.pow(T/x,this.sv_AtScaleParameter),A=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(T,n[s],j),r[s]=new SuperMap.Geometry.Point(A.pntLeft.x,A.pntLeft.y),T=(_=SuperMap.Plot.PlottingUtil.distance(i[s],i[s-1]))/3,(j=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(T,y[s],y[s+1])).x+=i[s].x-y[s].x,j.y+=i[s].y-y[s].y,T=(_=U-w)*Math.pow(T/x,this.sv_AtScaleParameter),A=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(T,i[s],j),p[s]=new SuperMap.Geometry.Point(A.pntRight.x,A.pntRight.y));return{ArrowBodyCenterPts:SuperMap.Plot.PlottingUtil.clonePoints(y),LeftBodyPtsTemp:n,RightBodyPtsTemp:i,LeftBodyPtsLeftCtrlPts:r,LeftBodyPtsRightCtrlPts:a,RightBodyPtsLeftCtrlPts:p,RightBodyPtsRightCtrlPts:u,ArrowTouLen:o}}},{key:"calcScaleValueCount",value:function(t){return 4}},{key:"calcDefaultScaleValues",value:function(t){var e=[];return e.push(this.sv1_DefaultAtLenDivAbLen),e.push(this.sv2_DefaultAjWidthDivAtLen),e.push(this.sv3_DefaultAeWidthDivAtLen),e.push(this.sv4_DefaultAeLenDivAtLen),e}},{key:"genAtPts",value:function(t,e,l,o){var n=l[2],i=[],r=o*l[3],a=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(r,e[t],e[t+1]);r=o*n;var p=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r,e[t+1],a);return i.push(new SuperMap.Geometry.Point(p.pntLeft.x,p.pntLeft.y)),i.push(e[t+1]),i.push(new SuperMap.Geometry.Point(p.pntRight.x,p.pntRight.y)),i}},{key:"calc3rdScalePt",value:function(t,e,l,o){l[2];var n=o*l[3];return SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(n,e[t],e[t+1])}}]),e}());e.default=u,SuperMap.Geometry.AlgoSymbol1004=u},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol12500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(.03)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.5),this.getScaleValues().push(.03));var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=this.getScaleValues()[0];this.getIsEdit()||(this.getScaleValues()[1]=this.getSubSymbolScaleValue());var o=this.getScaleValues()[1]*e,n=l*e,i=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,n);if(-1!==i.index){var r=i.pt,a=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[r,new SuperMap.Geometry.Point(r.x+o,r.y)]);a.push(a[0]);for(var p=0;p<t.length-1;p++){var u=t[p],s=t[p+1],P=SuperMap.Plot.PlottingUtil.distance(r,u),c=SuperMap.Plot.PlottingUtil.distance(r,s);if(!(P<o&&c<o))if(P>o&&c<o||P<o&&c>o){var S;S=P>o?u:s,(h=this.getLineAddCircleIntersectPts(u,s,a)).length>0&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[h[0],S])}else{var y=SuperMap.Plot.PlottingUtil.projectPoint(r,u,s);if(SuperMap.Plot.PlottingUtil.distance(r,y)>=o)this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[u,s]);else if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(y,u,s)){var h=this.getLineAddCircleIntersectPts(u,s,a);if(h.length>0){h.unshift(u),h.push(s);for(var g=0;g<h.length-1;g++)this.isLineInCircle(h[g],h[g+1],r,o)||this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[h[g],h[g+1]])}}else this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[u,s])}}this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[r,new SuperMap.Geometry.Point(r.x+o,r.y)]),this.clearScalePoints();var f=r;f.isScalePoint=!0,f.tag=0,this.addScalePoint(f);var M=new SuperMap.Geometry.Point(r.x+o,r.y);M.isScalePoint=!0,M.tag=1,this.addScalePoint(M)}}}},{key:"isLineInCircle",value:function(t,e,l,o){var n=new SuperMap.Geometry.Point((t.x+e.x)/2,(t.y+e.y)/2);return o>SuperMap.Plot.PlottingUtil.distance(n,l)}},{key:"getLineAddCircleIntersectPts",value:function(t,e,l){for(var o=[],n=0;n<l.length-1;n++){var i=l[n],r=l[n+1],a=SuperMap.Plot.PlottingUtil.intersectLines(t,e,i,r);a.isIntersectLines&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(a.intersectPoint,t,e)&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(a.intersectPoint,i,r)&&o.push(a.intersectPoint)}for(var p=0;p<o.length-1;p++)SuperMap.Plot.PlottingUtil.isSamePt(o[p],o[p+1])&&(o.splice(p,1),p--);if(t.x>e.x){for(u=0;u<o.length&&u!=o.length-1;u++)if(o[u].x<o[u+1].x){s=o[u];o[u]=o[u+1],o[u+1]=s}}else if(t.x<e.x){for(u=0;u<o.length&&u!=o.length-1;u++)if(o[u].x>o[u+1].x){s=o[u];o[u]=o[u+1],o[u+1]=s}}else if(t.y>e.y){for(u=0;u<o.length&&u!=o.length-1;u++)if(o[u].y<o[u+1].y){s=o[u];o[u]=o[u+1],o[u+1]=s}}else if(t.y<e.y)for(var u=0;u<o.length&&u!=o.length-1;u++)if(o[u].y>o[u+1].y){var s=o[u];o[u]=o[u+1],o[u+1]=s}return o}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t){for(var n=0,i=-1,r=null,a=0;a<l.length-1;a++){var p=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,l[a],l[a+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(p.projectPoint,l[a],l[a+1])){var u=SuperMap.Plot.PlottingUtil.distance(p.projectPoint,e);0==n?(n=u,i=a,r=p.projectPoint):u<n&&(n=u,i=a,r=p.projectPoint)}}if(-1==i)return void this.calculateParts();for(var s=0,a=0;a<i;a++)s+=SuperMap.Plot.PlottingUtil.distance(l[a],l[a+1]);var P=(s+=SuperMap.Plot.PlottingUtil.distance(r,l[i]))/o;P>1&&(P=1),this.getScaleValues()[0]=P}if(1===t){var c=this.getScaleValues()[0]*o,S=SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,c);if(-1===S.index)return void this.calculateParts();var y=SuperMap.Plot.PlottingUtil.distance(S.pt,e)/o;y>.4&&(y=.4),this.getScaleValues()[1]=y}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol12500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17703",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,l.subText="加",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=[];if(this.clearScalePoints(),t.length<3)l.push(new SuperMap.Geometry.Point(t[0].x,t[0].y)),l.push(new SuperMap.Geometry.Point(t[1].x,t[1].y));else{var o=SuperMap.Plot.PlottingUtil.computeBeizerPoints(this.getIsEdit(),t,this.getScaleValues());this.setScaleValues(o.scaleValues);for(var n=0;n<o.scalePoints.length;n++)this.addScalePoint(o.scalePoints[n]);l=SuperMap.Plot.PlottingUtil.clearSamePts(o.beizerPoints)}if(!(l.length<2)){var i=e/2;if(-1!==SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,i).index){var r;r=2===t.length?0:t.length-1;var a;if(this.getIsEdit())a=this.getScaleValues()[4*r]*e,isNaN(a)&&(a=Math.abs(this.getScaleValues()[4*r-1]*e))<.5&&(a=.5);else{var p=.5*this.getSubSymbolScaleValue();a=p*e,this.getScaleValues().push(p)}var u=i-a,s=i+a,P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,u);if(-1!==P.index){var c=P.pt;this.addScalePoint(new SuperMap.Geometry.Point(c.x,c.y));var S=[];if(0===P.index)S.push(l[0]);else for(f=0;f<P.index;f++)S.push(l[f]);S.push(c);var y=SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,s);if(-1!==y.index){var h=y.pt,g=[];g.push(h);for(var f=y.index+1;f<l.length;f++)g.push(l[f]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var M=S[S.length-1],d=g[0],m=180*SuperMap.Plot.PlottingUtil.radian(M,d)/Math.PI,b=(SuperMap.Plot.PlottingUtil.distance(M,d),new SuperMap.Geometry.Point((M.x+d.x)/2,(M.y+d.y)/2)),v=this.subText,O={surroundLineFlag:!1,fontSize:15,fontSizeLimit:!0};O.labelAlign="cm",O.labelRotation=-m,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,b,O,v)}}}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),t<0||t>2*l.length-2)return;for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);if(2*(l.length-1)===t||2===l.length){for(var i=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l),r=0,n=0;n<i.length-1;n++)r+=SuperMap.Plot.PlottingUtil.distance(i[n],i[n+1]);var a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,r/2);if(-1===a.index)return;var p=SuperMap.Plot.PlottingUtil.distance(e,a.pt)/o;p>.45&&(p=.45),2==l.length?this.getScaleValues()[0]=p:this.getScaleValues()[2*t]=p}else{var u=-1;u=t%2==0?t/2:(t+1)/2;var s=(e.x-l[u].x)/o,P=(e.y-l[u].y)/o;this.getScaleValues()[2*t]=s,this.getScaleValues()[2*t+1]=P}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17703=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17800",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=new SuperMap.Geometry.Point(t[t.length-1].x,t[t.length-1].y),o=0;2==t.length?this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t):(this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t),o=SuperMap.Plot.PlottingUtil.radian(e,l)*this.RTOD);var n=SuperMap.Plot.PlottingUtil.distance(e,l),i=SuperMap.Plot.PlottingUtil.circlePoint(e,.78*n,.78*n,o+180),r=SuperMap.Plot.PlottingUtil.circlePoint(e,1.26*n,1.26*n,o+180),a=[];a.push(i.clone()),a.push(r.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a);var p=SuperMap.Plot.PlottingUtil.circlePoint(e,.1*n,.1*n,o+180),u=SuperMap.Plot.PlottingUtil.circlePoint(e,.58*n,.58*n,o+180);(a=[]).push(p.clone()),a.push(u.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a);var s=SuperMap.Plot.PlottingUtil.circlePoint(e,.1*n,.1*n,o),P=SuperMap.Plot.PlottingUtil.circlePoint(e,.58*n,.58*n,o);(a=[]).push(s.clone()),a.push(P.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a);var c=SuperMap.Plot.PlottingUtil.circlePoint(e,.78*n,.78*n,o),S=SuperMap.Plot.PlottingUtil.circlePoint(e,1.26*n,1.26*n,o);(a=[]).push(c.clone()),a.push(S.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17800=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol23400",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);(t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts||this.addCell(SuperMap.Plot.SymbolType.KIDNEY,t)}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol23400=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol23600",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(0),l.getScaleValues().push(1),l.getScaleValues().push(.1),l.getScaleValues().push(0),l.getScaleValues().push(1),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e,l=t[0].clone(),o=t[1].clone();if(2===t.length){var n=SuperMap.Plot.PlottingUtil.distance(l,o),i=new SuperMap.Geometry.Point((l.x+o.x)/2,(l.y+o.y)/2);e=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n/2.7,l,i).pntLeft,t.push(e)}else 3==t.length&&(e=t[2]);var r=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t);r=SuperMap.Plot.PlottingUtil.clearSamePts(r),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,r);var a=SuperMap.Plot.PlottingUtil.distance(l,e);if(!this.getIsEdit()){var p=this.getSubSymbolScaleValue()*SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints);this.getScaleValues()[0]=p/a*.8,this.getScaleValues()[3]=p/a*.8}var u=this.getScaleValues()[0],s=this.getScaleValues()[1],P=(this.getScaleValues()[2],this.getScaleValues()[3]),c=this.getScaleValues()[4],S=(this.getScaleValues()[5],this.getScaleValues()[6]),y=this.getScaleValues()[7],h=this.getScaleValues()[8],g=this.getScaleValues()[9],f=new SuperMap.Geometry.Point(e.x+(o.x-e.x)/2,e.y-.6*(e.y-o.y)),M=new SuperMap.Geometry.Point(e.x-(e.x-l.x)/2,e.y-.6*(e.y-l.y)),d=new SuperMap.Geometry.Point(f.x+a*S,f.y+a*y),m=new SuperMap.Geometry.Point(M.x+a*h,M.y+a*g),b=[],v=.2*SuperMap.Plot.PlottingUtil.distance(d,m),O=SuperMap.Plot.PlottingUtil.linePnt(d,m,v),L=SuperMap.Plot.PlottingUtil.linePnt(m,d,v);b.push(O),b.push(L),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b);var U=a*u/.4,w=s;this.getSubSymbols()&&null!==this.getSubSymbols()&&this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],d,U,w);var _=a*P/.4,T=c;this.getSubSymbols()&&null!==this.getSubSymbols()&&this.getSubSymbols().length>1&&this.computeSubSymbol(this.getSubSymbols()[1],m,_,T),this.addScalePoint(d);var x=SuperMap.Plot.PlottingUtil.circlePoint(d,.5*U,.5*U,w);this.addScalePoint(x),this.addScalePoint(m);var E=SuperMap.Plot.PlottingUtil.circlePoint(m,.5*_,.5*_,T);this.addScalePoint(E)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;10>this.getScaleValues().length&&(this.getScaleValues().push(.1),this.getScaleValues().push(0),this.getScaleValues().push(1),this.getScaleValues().push(.1),this.getScaleValues().push(0),this.getScaleValues().push(1),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var o,n=l[0],i=l[1];if(2==l.length){var r=SuperMap.Plot.PlottingUtil.distance(n,i),a=new SuperMap.Geometry.Point((n.x+i.x)/2,(n.y+i.y)/2);o=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r/2.7,n,a).pntLeft,l.push(o)}else 3==l.length&&(o=l[2]);var p=new SuperMap.Geometry.Point(o.x+(i.x-o.x)/2,o.y-.6*(o.y-i.y)),u=new SuperMap.Geometry.Point(o.x-(o.x-n.x)/2,o.y-.6*(o.y-n.y)),s=SuperMap.Plot.PlottingUtil.distance(n,o),P=e;if(0==t){c=(P.x-p.x)/s;this.getScaleValues()[6]=c;S=(P.y-p.y)/s;this.getScaleValues()[7]=S}else if(1==t){var c=this.getScaleValues()[6],S=this.getScaleValues()[7],y=new SuperMap.Geometry.Point(p.x+s*c,p.y+s*S),h=2*(r=SuperMap.Plot.PlottingUtil.distance(y,P))*.4/s;this.getScaleValues()[0]=h;var g=180*SuperMap.Plot.PlottingUtil.radian(y,P)/Math.PI;this.getScaleValues()[1]=g,this.getScaleValues()[2]=0<=g&&g<90?1:90<=g&&g<180?2:180<=g&&g<270?3:4}else if(2==t){f=(P.x-u.x)/s;this.getScaleValues()[8]=f;M=(P.y-u.y)/s;this.getScaleValues()[9]=M}else if(3==t){var f=this.getScaleValues()[8],M=this.getScaleValues()[9],d=new SuperMap.Geometry.Point(u.x+s*f,u.y+s*M),m=2*(r=SuperMap.Plot.PlottingUtil.distance(d,P))*.4/s;this.getScaleValues()[3]=m;var b=180*SuperMap.Plot.PlottingUtil.radian(d,P)/Math.PI;this.getScaleValues()[4]=b,this.getScaleValues()[5]=0<=b&&b<90?1:90<=b&&b<180?2:180<=b&&b<270?3:4}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol23600=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25000",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(.222222),l.getScaleValues().push(.5),l.getScaleValues().push(.5),l.getScaleValues().push(.5)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(.5),this.getScaleValues().push(.222222),this.getScaleValues().push(.5),this.getScaleValues().push(.5),this.getScaleValues().push(.5));var e=t[0].clone(),l=t[1].clone(),o=SuperMap.Plot.PlottingUtil.distance(e,l),n=this.getScaleValues()[0],i=new SuperMap.Geometry.Point(0,-o*n),r=new SuperMap.Geometry.Point(0,o*n),a=this.getScaleValues()[1],p=this.getScaleValues()[3],u=new SuperMap.Geometry.Point(o*(1-p),-o*a),s=new SuperMap.Geometry.Point(o*(1-p),o*a),P=this.getScaleValues()[2],c=this.getScaleValues()[4],S=new SuperMap.Geometry.Point(o*(1-c),-o*P),y=new SuperMap.Geometry.Point(o*(1-c),o*P),h=new SuperMap.Geometry.Point(o,0),g=SuperMap.Plot.PlottingUtil.radian(e,l),f=[];f.push(i),f.push(u),f.push(S),f.push(h),f.push(y),f.push(s),f.push(r);for(var M=[],d=0;d<f.length;d++){var m=SuperMap.Plot.PlottingUtil.coordinateTrans(e,f[d],g*this.RTOD);M.push(m)}for(var b=[],v=M.length-1;v>=0;--v)b.push(M[v]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b),this.clearScalePoints();var O=M[0].clone();O.isScalePoint=!0,O.tag=0,this.addScalePoint(O);var L=M[1].clone();L.isScalePoint=!0,L.tag=1,this.addScalePoint(L);var U=M[2].clone();U.isScalePoint=!0,U.tag=2,this.addScalePoint(U)}}},{key:"modifyPoint",value:function(t,e){if(e.isScalePoint&&(t>=0||t<3)){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]),n=l[0].clone(),i=l[1].clone(),r=e.clone();if(0==t){var a=SuperMap.Plot.PlottingUtil.distance(r,n)/o;this.getScaleValues()[0]=a}else if(1==t){var p=SuperMap.Plot.PlottingUtil.projectPoint(r,n,i),u=(P=SuperMap.Plot.PlottingUtil.distance(p,r))/o;this.getScaleValues()[1]=u;var s=(S=SuperMap.Plot.PlottingUtil.distance(p,i))/o;this.getScaleValues()[3]=s}else if(2==t){var p=SuperMap.Plot.PlottingUtil.projectPoint(r,n,i),P=SuperMap.Plot.PlottingUtil.distance(p,r),c=P/o;this.getScaleValues()[2]=c;var S=SuperMap.Plot.PlottingUtil.distance(p,i),y=S/o;this.getScaleValues()[4]=y}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25000=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.02)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clearSamePts(SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints));if(this.controlPoints.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(.02));for(var e=t[0].x,l=t[0].x,o=0;o<t.length;o++)e>t[o].x&&(e=t[o].x),l<t[o].x&&(l=t[o].x);var n=(l-e)/50,i=SuperMap.Plot.PlottingUtil.paraPolygon(t,n,!0);this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,i);var r=SuperMap.Plot.PlottingUtil.paraPolygon(t,n,!1),a={surroundLineFlag:!1,lineWidthLimit:!0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,r,a);var p=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),u=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[2]=.5*this.getSubSymbolScaleValue());var s=this.getScaleValues()[0],P=this.getScaleValues()[1],c=this.getScaleValues()[2],S=new SuperMap.Geometry.Point(p.x+u*s,p.y+u*P),y=c*u,h=new SuperMap.Geometry.Point(S.x-4*y,S.y+y/2),g=new SuperMap.Geometry.Point(S.x-4*y,S.y-y/2),f=[];f.push(h),f.push(g),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);var M=new SuperMap.Geometry.Point(S.x-4*y,S.y),d=new SuperMap.Geometry.Point(S.x-1.5*y,S.y);(f=[]).push(M),f.push(d),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);for(var m=new SuperMap.Geometry.Point(S.x,S.y-y),b=SuperMap.Plot.PlottingUtil.circlePoint(m,2*y,2*y,60),v=SuperMap.Plot.PlottingUtil.circlePoint(m,2*y,2*y,120),O=new SuperMap.Geometry.Point((b.x+v.x)/2,b.y),L=[],o=0;o<=180;o+=3)L.push(SuperMap.Plot.PlottingUtil.circlePoint(O,y,y,o));f=[];for(o=0;o<L.length;o++)f.push(L[o].clone());f.push(v.clone()),f.push(m.clone()),f.push(b.clone()),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,f);var U=new SuperMap.Geometry.Point(S.x+4*y,S.y),w=new SuperMap.Geometry.Point(S.x+1.5*y,S.y);(f=[]).push(U.clone()),f.push(w.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);var _=new SuperMap.Geometry.Point(S.x+4*y,S.y+y/2),T=new SuperMap.Geometry.Point(S.x+4*y,S.y-y/2);(f=[]).push(_.clone()),f.push(T.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f),this.clearScalePoints(),this.addScalePoint(S.clone());var x=SuperMap.Plot.PlottingUtil.circlePoint(S,y,y,90);this.addScalePoint(x.clone())}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l),n=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(SuperMap.Plot.PlottingUtil.equalFuzzy(n,0))return;if(0==t){i=(e.x-o.x)/n;this.getScaleValues()[0]=i;r=(e.y-o.y)/n;this.getScaleValues()[1]=r}else if(1==t){var i=this.getScaleValues()[0],r=this.getScaleValues()[1],a=new SuperMap.Geometry.Point(o.x+n*i,o.y+n*r),p=SuperMap.Plot.PlottingUtil.distance(a,e)/n;this.getScaleValues()[2]=p}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25600",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=9999,0===l.getScaleValues().length&&l.getScaleValues().push(.01),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){for(var e=t[0].x,l=t[0].x,o=0;o<t.length;o++)e>t[o].x&&(e=t[o].x),l<t[o].x&&(l=t[o].x);var n=(l-e)/50,i=[],r=[],a=!0;t.length>2?SuperMap.Plot.PlottingUtil.pointIsRightToLine(t[0],t[1],t[2])?(i=SuperMap.Plot.PlottingUtil.paraPolygon(t,n,!1),r=SuperMap.Plot.PlottingUtil.paraPolygon(t,n,!0)):(a=!1,i=SuperMap.Plot.PlottingUtil.paraPolygon(t,n,!0),r=SuperMap.Plot.PlottingUtil.paraPolygon(t,n,!1)):(i=SuperMap.Plot.PlottingUtil.paraPolygon(t,n,!1),r=SuperMap.Plot.PlottingUtil.paraPolygon(t,n,!0));var p={surroundLineFlag:!1,lineWidthLimit:!0,weight:1};if(this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,r,p),p={surroundLineFlag:!1,lineWidthLimit:!0,weight:1},this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,i,p),t.length>2){var u=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[0]=this.getSubSymbolScaleValue());var s=this.getScaleValues()[0]*u*.5;r.push(r[0].clone());for(o=0;o<r.length-1;o++){var P=new SuperMap.Geometry.Point((r[o].x+r[o+1].x)/2,(r[o].y+r[o+1].y)/2),c=new SuperMap.Geometry.Point(0,0),S=new SuperMap.Geometry.Point(0,0),y=new SuperMap.Geometry.Point(0,0);a?(c.x=0,c.y=1.5*s,S.x=-.5*s,S.y=0,y.x=.5*s,y.y=0):(c.x=0,c.y=-1.5*s,S.x=-.5*s,S.y=0,y.x=.5*s,y.y=0);var h=SuperMap.Plot.PlottingUtil.radian(P,r[o+1])*this.RTOD,g=SuperMap.Plot.PlottingUtil.coordinateTrans(P,c,h),f=SuperMap.Plot.PlottingUtil.coordinateTrans(P,S,h),M=SuperMap.Plot.PlottingUtil.coordinateTrans(P,y,h);(m=[]).push(g),m.push(f),m.push(M);var d={surroundLineFlag:!1,surroundLineLimit:!0,lineTypeLimit:!0,fillLimit:!0,fillStyle:0,lineWidthLimit:!0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,m,d)}i.push(i[0].clone());for(o=0;o<i.length-1;o++){var P=new SuperMap.Geometry.Point((i[o].x+i[o+1].x)/2,(i[o].y+i[o+1].y)/2),c=new SuperMap.Geometry.Point(0,0),S=new SuperMap.Geometry.Point(0,0),y=new SuperMap.Geometry.Point(0,0);a?(c.x=0,c.y=-1.5*s,S.x=-.5*s,S.y=0,y.x=.5*s,y.y=0):(c.x=0,c.y=1.5*s,S.x=-.5*s,S.y=0,y.x=.5*s,y.y=0);var h=SuperMap.Plot.PlottingUtil.radian(P,i[o+1])*this.RTOD,g=SuperMap.Plot.PlottingUtil.coordinateTrans(P,c,h),f=SuperMap.Plot.PlottingUtil.coordinateTrans(P,S,h),M=SuperMap.Plot.PlottingUtil.coordinateTrans(P,y,h),m=[];m.push(g),m.push(f),m.push(M);var b={surroundLineFlag:!1,surroundLineLimit:!0,lineTypeLimit:!0,fillLimit:!0,fillStyle:0,lineWidthLimit:!0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,m,b)}}}}},{key:"modifyPoint",value:function(t,e){this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25600=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25700",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<=this.minEditPts)t.length>=2&&this.calAssistantLine();else{for(var e=t[0].x,l=t[0].x,o=0;o<t.length;o++)e>t[o].x&&(e=t[o].x),l<t[o].x&&(l=t[o].x);var n=(l-e)/50,i=SuperMap.Plot.PlottingUtil.paraPolygon(t,n,!0),r=SuperMap.Plot.PlottingUtil.paraPolygon(t,n,!1);if(i.length>2&&r.length>0){for(var a=[],o=0;o<i.length;o++)a.push(i[o]);var p=r[0],u=[];SuperMap.Plot.PlottingUtil.ptIsInPolygon(a,p)||(u=u.concat(i),i=(i=[]).concat(r),r=(r=[]).concat(u))}this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,i);var s={surroundLineFlag:!1,lineWidthLimit:!0,color:"#FF0000",weight:.5};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,r,s,!0),r.push(r[0]);for(var P=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),c=10*n,S=!0,y=P.x,h=P.x;S;){S=!1;for(var g=[],f=new SuperMap.Geometry.Point(y,P.y),M=SuperMap.Plot.PlottingUtil.circlePoint(f,10,10,45),o=0;o<r.length-1;o++){var d=SuperMap.Plot.PlottingUtil.intersectLines(f,M,r[o],r[o+1]);if(d.isIntersectLines){O=d.intersectPoint;(u=[]).push(r[o]),u.push(r[o+1]),(v=SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(O,u)).isOnPolyLine&&g.push(O)}}if(1<g.length){this.sortPts2D(g);for(L=0;L<g.length-1;L++){p=new SuperMap.Geometry.Point((g[L].x+g[L+1].x)/2,(g[L].y+g[L+1].y)/2);SuperMap.Plot.PlottingUtil.ptIsInPolygon(r,p)&&((U=[]).push(g[L]),U.push(g[L+1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U,s,!0))}}g.length>0&&(S=!0),g=[];for(var m=new SuperMap.Geometry.Point(h,P.y),b=SuperMap.Plot.PlottingUtil.circlePoint(m,5,5,45),o=0;o<r.length-1;o++){var v=SuperMap.Plot.PlottingUtil.intersectLines(m,b,r[o],r[o+1]);if(v.isIntersectLines){var O=v.intersectPoint;(u=[]).push(r[o]),u.push(r[o+1]),(v=SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(O,u)).isOnPolyLine&&g.push(O)}}if(1<g.length){this.sortPts2D(g);for(var L=0;L<g.length-1;L++){p=new SuperMap.Geometry.Point((g[L].x+g[L+1].x)/2,(g[L].y+g[L+1].y)/2);if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(r,p)){var U=[];U.push(g[L]),U.push(g[L+1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U,s,!0)}}}g.length>0&&(S=!0),y-=c,h+=c}}}},{key:"sortPts2D",value:function(t){for(var e=0;e<t.length;e++)for(var l=0;l<t.length-1-e;l++)if(SuperMap.Plot.PlottingUtil.equalFuzzy(t[l].x,t[l+1].x)){if(t[l].y>t[l+1].y){o=t[l];t[l]=t[l+1],t[l+1]=o}}else if(t[l].x>t[l+1].x){var o=t[l];t[l]=t[l+1],t[l+1]=o}return t}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25700=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25800",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.08)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<=this.minEditPts)t.length>=2&&this.calAssistantLine();else{for(var e=t[0].x,l=t[0].x,o=0;o<t.length;o++)e>t[o].x&&(e=t[o].x),l<t[o].x&&(l=t[o].x);var n=(l-e)/50,i=SuperMap.Plot.PlottingUtil.paraPolygon(t,n,!0),r=SuperMap.Plot.PlottingUtil.paraPolygon(t,n,!1);if(i.length>2&&r.length>0){for(var a=[],p=new SuperMap.Geometry.Point(0,0),o=0;o<i.length;o++)a.push(i[o]);p=r[0];var u=[];SuperMap.Plot.PlottingUtil.ptIsInPolygon(a,p)||(u=u.concat(i),i=(i=[]).concat(r),r=(r=[]).concat(u))}this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,i);var s={surroundLineFlag:!1,lineWidthLimit:!0,weight:.5};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,r,s,!0);var P=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),c=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[2]=2*this.getSubSymbolScaleValue());var S=this.getScaleValues()[0],y=this.getScaleValues()[1],h=this.getScaleValues()[2],g=new SuperMap.Geometry.Point(P.x+c*S,P.y+c*y),f=h*c/2,M=[];M.push(new SuperMap.Geometry.Point(g.x,g.y)),M.push(new SuperMap.Geometry.Point(g.x,g.y+f));var d={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0,fill:!0,fillColor:"#FF0000"};this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,M,d,!0);var m=[];m.push(new SuperMap.Geometry.Point(g.x-1.5*f,g.y+f)),m.push(new SuperMap.Geometry.Point(g.x+1.5*f,g.y+f)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m,null,!0),this.addScalePoint(g);var b=SuperMap.Plot.PlottingUtil.circlePoint(g,f,f,90);this.addScalePoint(b)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l);if(0==o)return;if(0==t){i=(e.x-n.x)/o;this.getScaleValues()[0]=i;r=(e.y-n.y)/o;this.getScaleValues()[1]=r}else if(1==t){var i=this.getScaleValues()[0],r=this.getScaleValues()[1],a=new SuperMap.Geometry.Point(n.x+o*i,n.y+o*r),p=2*SuperMap.Plot.PlottingUtil.distance(a,e)/o;this.getScaleValues()[2]=p}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25800=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25900",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.02)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents(),2===this.controlPoints.length&&this.calAssistantLine();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=t[0].x,l=t[0].x,o=0;o<t.length;o++)e>t[o].x&&(e=t[o].x),l<t[o].x&&(l=t[o].x);var n=(l-e)/50,i=SuperMap.Plot.PlottingUtil.paraPolygon(t,n,!0),r=SuperMap.Plot.PlottingUtil.paraPolygon(t,n,!1);if(i.length>2&&r.length>0){for(var a=[],o=0;o<i.length;o++)a.push(i[o]);var p=r[0],u=[];SuperMap.Plot.PlottingUtil.ptIsInPolygon(a,p)||(u=u.concat(i),i=(i=[]).concat(r),r=(r=[]).concat(u))}this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,i);var s={surroundLineFlag:!1,lineWidthLimit:!0,weight:.4};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,r,s,!0);var P=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),c=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[2]=4*this.getSubSymbolScaleValue());var S=this.getScaleValues()[0],y=this.getScaleValues()[1],h=this.getScaleValues()[2],g=new SuperMap.Geometry.Point(P.x+c*S,P.y+c*y),f=h*c/2,M=[];M.push(new SuperMap.Geometry.Point(g.x-f,g.y)),M.push(new SuperMap.Geometry.Point(g.x+f,g.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M,null,!0);var d=.3*f,m=[];m.push(new SuperMap.Geometry.Point(g.x-f,g.y+d/2)),m.push(new SuperMap.Geometry.Point(g.x-f,g.y-d/2)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m,null,!0);var b=[];b.push(new SuperMap.Geometry.Point(g.x+f,g.y+d/2)),b.push(new SuperMap.Geometry.Point(g.x+f,g.y-d/2)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b,null,!0);var v=[];v.push(new SuperMap.Geometry.Point(g.x,g.y)),v.push(new SuperMap.Geometry.Point(g.x,g.y+1.5*d)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,v,null,!0);var O=[];O.push(new SuperMap.Geometry.Point(g.x-d/2,g.y)),O.push(new SuperMap.Geometry.Point(g.x-d,g.y+d)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,O,null,!0);var L=[];L.push(new SuperMap.Geometry.Point(g.x+d/2,g.y)),L.push(new SuperMap.Geometry.Point(g.x+d,g.y+d)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,L,null,!0),this.addScalePoint(g);var U=SuperMap.Plot.PlottingUtil.circlePoint(g,f,f,90);this.addScalePoint(U)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l),n=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(SuperMap.Plot.PlottingUtil.equalFuzzy(n,0))return;if(0==t){i=(e.x-o.x)/n;this.getScaleValues()[0]=i;r=(e.y-o.y)/n;this.getScaleValues()[1]=r}else if(1==t){var i=this.getScaleValues()[0],r=this.getScaleValues()[1],a=new SuperMap.Geometry.Point(o.x+n*i,o.y+n*r),p=2*SuperMap.Plot.PlottingUtil.distance(a,e)/n;this.getScaleValues()[2]=p}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25900=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol26600",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=99999,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);for(var l=SuperMap.Plot.PlottingUtil.polylineDistance(e)/19,o=0;o<18;o++){var n=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,l);if(-1!==n.index){if(0==o%2){for(var i=[],r=0;r<n.index+1;r++)i.push(e[r].clone());i.push(n.pt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i)}var a=[];a.push(n.pt);for(var p=n.index+1;p<e.length;p++)a.push(e[p]);e=(e=[]).concat(a)}}e.length>1&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol26600=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol29001",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=t.length,l=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]),o=SuperMap.Plot.PlottingUtil.radian(t[0],t[1])*this.RTOD,n=.3*l,i=t[1].clone(),r=SuperMap.Plot.PlottingUtil.linePnt(t[1],t[0],2*l);if(this.getSubSymbols().length,this.getSubSymbols().length>0){for(var a in this.getSubSymbols()){var p=this.getSubSymbols()[a];if(p.symbolData)for(var u in p.symbolData.innerCells)p.symbolData.innerCells[u].type===SuperMap.Plot.SymbolType.POLYBEZIERSYMBOL&&(p.symbolData.innerCells[u].type=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL)}this.computeSubSymbol(this.getSubSymbols()[0],i,n,o),this.computeSubSymbol(this.getSubSymbols()[1],r,n,o)}var s,P=[];2==e?(s=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t),P.push.apply(P,s)):3==e&&(s=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t),P=P.concat(s));var c=new SuperMap.Geometry.Point(.8*l,.1*l),S=new SuperMap.Geometry.Point(1.2*l,.1*l),y=new SuperMap.Geometry.Point(1.2*l,.1*-l),h=new SuperMap.Geometry.Point(.9*l,.1*-l),g=[];g.push(c),g.push(S),g.push(y),g.push(h);var f=[],M=0;for(M=0;M<4;M++){L=SuperMap.Plot.PlottingUtil.coordinateTrans(t[0],g[M],o);f.push(L)}var d=new SuperMap.Geometry.Point(-.8*l,.1*l),m=new SuperMap.Geometry.Point(-1.2*l,.1*l),b=new SuperMap.Geometry.Point(-1.1*l,.1*-l),v=new SuperMap.Geometry.Point(-.8*l,.1*-l);(g=[]).push(d),g.push(m),g.push(b),g.push(v);var O=[];for(M=0;M<4;M++){var L=SuperMap.Plot.PlottingUtil.coordinateTrans(t[0],g[M],o);O.push(L)}for(var U=SuperMap.Plot.PlottingUtil.linePnt(t[1],t[0],3*l),w=SuperMap.Plot.PlottingUtil.linePnt(t[0],t[1],2*l),_=[],M=0;M<P.length-1;M++){var T=SuperMap.Plot.PlottingUtil.intersectLines(P[M],P[M+1],U,w);T.isIntersectLines&&(C=SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(T.intersectPoint,P)).isOnPolyLine&&_.push(T.intersectPoint)}if(!(0>=_.length)&&(C=SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(_[0],P)).isOnPolyLine){var x=[];for(M=C.index+1;M<P.length;M++)x.push(P[M]);for(M=0;M<=C.index;M++)x.push(P[M]);var E=[],G=[];SuperMap.Plot.PlottingUtil.ptIsInPolygon(f,_[0])?(E.push.apply(E,f),G.push.apply(G,O)):(E.push.apply(E,O),G.push.apply(G,f));var V=[],A=[],C=-1;for(M=0;M<x.length;M++)if(!SuperMap.Plot.PlottingUtil.ptIsInPolygon(E,x[M])){if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(G,x[M])){C=M;break}V.push(x[M])}if(-1!=C)for(M=C;M<x.length;M++)if(!SuperMap.Plot.PlottingUtil.ptIsInPolygon(G,x[M])){if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(E,x[M]))break;A.push(x[M])}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,V),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,A)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol29001=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30000",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(Math.PI/2),l.getScaleValues().push(.2),l.getScaleValues().push(.5),l.getScaleValues().push(.05)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,l);var o=e*this.getScaleValues()[0],n=this.getScaleValues()[1]*this.RTOD;if(!this.getIsEdit()){var i=this.getSubSymbolScaleValue();this.getScaleValues()[2]=i}var r=e*this.getScaleValues()[2],a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,o);if(-1!==a.index){var p=a.pt,u=new SuperMap.Geometry.Point(l[a.index].x,l[a.index].y),s=new SuperMap.Geometry.Point(l[a.index+1].x,l[a.index+1].y),P=SuperMap.Plot.PlottingUtil.radian(u,s)*this.RTOD,c=SuperMap.Plot.PlottingUtil.circlePoint(p,r,r,P+n);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[p,c]);var S=SuperMap.Plot.PlottingUtil.radian(p,c)*this.RTOD,y=new SuperMap.Geometry.Point(-.2*r,.05*r),h=new SuperMap.Geometry.Point(-.2*r,-.05*r),g=SuperMap.Plot.PlottingUtil.coordinateTrans(c,y,S),f=SuperMap.Plot.PlottingUtil.coordinateTrans(c,h,S),M={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[c,g,f],M),this.addScalePoint(p,0),this.addScalePoint(c,1)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(0===t){for(var i=-1,r=0,a=new SuperMap.Geometry.Point(0,0),p=0;p<o.length-1;p++){var u=[];u.push(o[p]),u.push(o[p+1]);var s=SuperMap.Plot.PlottingUtil.projectPoint(e,o[p],o[p+1]);if(-1!==SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(s,u).index){var P=SuperMap.Plot.PlottingUtil.distance(e,s);-1===i?(i=p,a=s,r=P):r>P&&(i=p,a=s,r=P)}}-1===i&&Math.ceil(e.x,1)<=Math.ceil(o[0].x,1)?(i=0,a=o[0]):-1===i&&i===o[o.length-2]&&(i=0,a=o[0]),-1===i&&Math.ceil(e.x,1)>=Math.ceil(o[o.length-1].x,1)?(i=o.length-1,a=o[o.length-1]):-1===i&&(i=o.length-1,a=o[o.length-1]);for(var c=0,p=0;p<i;p++)c+=SuperMap.Plot.PlottingUtil.distance(o[p],o[p+1]);var S=(c+=SuperMap.Plot.PlottingUtil.distance(o[i],a))/n;this.getScaleValues()[0]=S}else if(1===t){var y=n*this.getScaleValues()[0],h=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,y);if(-1===h.index)return;var g=h.pt,f=o[h.index],M=o[h.index+1],d=SuperMap.Plot.PlottingUtil.radian(f,M),m=SuperMap.Plot.PlottingUtil.radian(g,e)-d;this.getScaleValues()[1]=m;var b=(c=SuperMap.Plot.PlottingUtil.distance(g,e))/n;this.getScaleValues()[2]=b}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30000=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(29)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30001",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.2||o<=0)&&(o=.2),this.getScaleValues()[2]=o,this.getScaleValues()[4]=o}var n=l*this.getScaleValues()[0],i=180*this.getScaleValues()[1]/Math.PI,r=l*this.getScaleValues()[2],a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,n);if(-1!==a.index){var p=a.pt,u=new SuperMap.Geometry.Point(e[a.index].x,e[a.index].y),s=new SuperMap.Geometry.Point(e[a.index+1].x,e[a.index+1].y),P=180*SuperMap.Plot.PlottingUtil.radian(u,s)/Math.PI,c=SuperMap.Plot.PlottingUtil.circlePoint(p,r,r,P+i);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[p,c]);var S=180*SuperMap.Plot.PlottingUtil.radian(p,c)/Math.PI,y=SuperMap.Plot.PlottingUtil.circlePoint(c,.2*r,.2*r,S-157.5),h=SuperMap.Plot.PlottingUtil.circlePoint(c,.2*r,.2*r,S+157.5),g={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[c,y,h],g);var f=new SuperMap.Geometry.Point(.4*r,0),M=SuperMap.Plot.PlottingUtil.coordinateTrans(p,f,S),d=new SuperMap.Geometry.Point(0,.1*r),m=new SuperMap.Geometry.Point(0,-.1*r),b=SuperMap.Plot.PlottingUtil.coordinateTrans(M,d,S),v=SuperMap.Plot.PlottingUtil.coordinateTrans(M,m,S);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[b,v]);var O=new SuperMap.Geometry.Point(.5*r,0),L=SuperMap.Plot.PlottingUtil.coordinateTrans(p,O,S),U=new SuperMap.Geometry.Point(0,.1*r),w=new SuperMap.Geometry.Point(0,-.1*r),_=SuperMap.Plot.PlottingUtil.coordinateTrans(L,U,S),T=SuperMap.Plot.PlottingUtil.coordinateTrans(L,w,S);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[_,T]);var x=new SuperMap.Geometry.Point(.6*r,0),E=SuperMap.Plot.PlottingUtil.coordinateTrans(p,x,S),G=new SuperMap.Geometry.Point(0,.1*r),V=new SuperMap.Geometry.Point(0,-.1*r),A=SuperMap.Plot.PlottingUtil.coordinateTrans(E,G,S),C=SuperMap.Plot.PlottingUtil.coordinateTrans(E,V,S);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[A,C]);for(var Y=4*(l*this.getScaleValues()[4])*Math.sin(Math.PI/8),I=this._getLeftSubSymbolPts(Y),j=e[0].clone(),B=-1,R=null,N=1;N<e.length;N++)if(SuperMap.Plot.PlottingUtil.distance(j,e[N])>.5*Y){B=N-1,R=SuperMap.Plot.PlottingUtil.linePnt(j,e[N],.5*Y);break}-1===B&&(B=e.length-1,R=e[e.length-1]);var D=null;if(null!==R){for(var k=180*SuperMap.Plot.PlottingUtil.radian(j,R)/Math.PI,z=[],N=0;N<I.length;N++)z.push(SuperMap.Plot.PlottingUtil.coordinateTrans(j,I[N],k));D=z[3].clone(),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,z)}for(var F=this.getRightSubSymbolPts(Y),K=e[e.length-1].clone(),W=-1,q=null,N=e.length-2;N>=0;N--)if(SuperMap.Plot.PlottingUtil.distance(K,e[N])>.5*Y){W=N,q=SuperMap.Plot.PlottingUtil.linePnt(K,e[N],.5*Y);break}if(-1===W&&(W=0,q=e[0]),null!==q){for(var H=180*SuperMap.Plot.PlottingUtil.radian(K,q)/Math.PI,Z=[],N=0;N<F.length;N++)Z.push(SuperMap.Plot.PlottingUtil.coordinateTrans(K,F[N],H));this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,Z)}if(B<=W){var X=[];X.push(R);for(N=B+1;N<=W;N++)X.push(e[N]);X.push(q),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,X)}this.addScalePoint(p),this.addScalePoint(c),null!==D&&this.addScalePoint(D)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(0===t){for(var i=-1,r=0,a=new SuperMap.Geometry.Point(0,0),p=0;p<o.length-1;p++){var u=[],s=0;u.push(o[p]),u.push(o[p+1]);var P=SuperMap.Plot.PlottingUtil.projectPoint(e,o[p],o[p+1]);-1!==SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(P,u).index&&(s=SuperMap.Plot.PlottingUtil.distance(e,P),isNaN(s)||(-1===i?(i=p,a=P,r=s):r>s&&(i=p,a=P,r=s)))}-1===i&&Math.ceil(e.x,1)<=Math.ceil(o[0].x,1)?(i=0,a=o[0]):-1===i&&i===o[o.length-2]&&(i=0,a=o[0]),-1===i&&Math.ceil(e.x,1)>=Math.ceil(o[o.length-1].x,1)?(i=o.length-1,a=o[o.length-1]):-1===i&&(i=o.length-1,a=o[o.length-1]);for(var c=0,p=0;p<i;p++)c+=SuperMap.Plot.PlottingUtil.distance(o[p],o[p+1]);var S=(c+=SuperMap.Plot.PlottingUtil.distance(o[i],a))/n;this.getScaleValues()[0]=S}else if(1===t){var y=n*this.getScaleValues()[0],h=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,y);if(-1===h.index)return;var g=h.pt,f=o[h.index],M=o[h.index+1],d=SuperMap.Plot.PlottingUtil.radian(f,M),m=SuperMap.Plot.PlottingUtil.radian(g,e)-d;this.getScaleValues()[1]=m;var b=(c=SuperMap.Plot.PlottingUtil.distance(g,e))/n;this.getScaleValues()[2]=b}else if(2===t){var v=SuperMap.Plot.PlottingUtil.distance(e,l[0])/n;v>.35&&(v=.35),this.getScaleValues()[4]=v}}this.calculateParts()}},{key:"_getLeftSubSymbolPts",value:function(t){var e=.25*t,l=[],o=new SuperMap.Geometry.Point(0,0),n=new SuperMap.Geometry.Point(e,-2*e),i=new SuperMap.Geometry.Point(2*e,0),r=new SuperMap.Geometry.Point(e,2*e);return l.push(o),l.push(n),l.push(i),l.push(r),l.push(o),l}},{key:"getRightSubSymbolPts",value:function(t){return this._getLeftSubSymbolPts(t)}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30001=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(Math.PI/2),l.getScaleValues().push(.069485),l.getScaleValues().push(.15),l.getScaleValues().push(.1),l.getScaleValues().push(1.731025),l.getScaleValues().push(2.076877)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);o=SuperMap.Plot.PlottingUtil.clearSamePts(o),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,o),this.getIsEdit()||(this.getScaleValues()[2]=this.getSubSymbolScaleValue());var n=e*this.getScaleValues()[0],i=this.getScaleValues()[1]*this.RTOD,r=e*this.getScaleValues()[2],a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,n);if(-1!==a.index){var p=a.pt,u=a.index,s=p,P=o[u],c=o[u+1],S=SuperMap.Plot.PlottingUtil.radian(P,c)*this.RTOD,y=SuperMap.Plot.PlottingUtil.circlePoint(s,1.5*r,1.5*r,S+i);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[p,y]);var h=SuperMap.Plot.PlottingUtil.radian(s,y)*this.RTOD,g=new SuperMap.Geometry.Point(-.2*r,.05*r),f=new SuperMap.Geometry.Point(-.2*r,-.05*r),M=SuperMap.Plot.PlottingUtil.coordinateTrans(y,g,h),d=SuperMap.Plot.PlottingUtil.coordinateTrans(y,f,h),m={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[y,M,d],m);var b=new SuperMap.Geometry.Point(.6*r,0),v=SuperMap.Plot.PlottingUtil.coordinateTrans(s,b,h),O=.4*r*this.getScaleValues()[5],L=.4*r*this.getScaleValues()[6],U=new SuperMap.Geometry.Point(0,-.9*(O-.25*L)),w=new SuperMap.Geometry.Point(0,.9*(O-.25*L)),_=SuperMap.Plot.PlottingUtil.coordinateTrans(v,U,h),T=SuperMap.Plot.PlottingUtil.coordinateTrans(v,w,h);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[_,T]);var x=new SuperMap.Geometry.Point(0,O),E=SuperMap.Plot.PlottingUtil.coordinateTrans(v,x,h),G=new SuperMap.Geometry.Point(0,.25*L),V=new SuperMap.Geometry.Point(.5*L,0),A=new SuperMap.Geometry.Point(0,-.25*L),C=new SuperMap.Geometry.Point(-.5*L,0),Y=SuperMap.Plot.PlottingUtil.coordinateTrans(E,G,h),I=SuperMap.Plot.PlottingUtil.coordinateTrans(E,V,h),j=SuperMap.Plot.PlottingUtil.coordinateTrans(E,A,h),B=SuperMap.Plot.PlottingUtil.coordinateTrans(E,C,h);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[Y,I,j,B,Y]);var R=new SuperMap.Geometry.Point(0,-O),N=SuperMap.Plot.PlottingUtil.coordinateTrans(v,R,h),D=SuperMap.Plot.PlottingUtil.coordinateTrans(N,G,h),k=SuperMap.Plot.PlottingUtil.coordinateTrans(N,V,h),z=SuperMap.Plot.PlottingUtil.coordinateTrans(N,A,h),F=SuperMap.Plot.PlottingUtil.coordinateTrans(N,C,h);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[D,k,z,F,D]),this.addScalePoint(p,0),this.addScalePoint(y,1);var K=new SuperMap.Geometry.Point(0,-O),W=SuperMap.Plot.PlottingUtil.coordinateTrans(v,K,h);this.addScalePoint(W,2),this.addScalePoint(B,3)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);var i=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);if(i=SuperMap.Plot.PlottingUtil.clearSamePts(i),0===t){for(var r=[],n=0;n<i.length;n++)r.push(new SuperMap.Geometry.Point(i[n].x,i[n].y));for(var a=-1,p=0,u=new SuperMap.Geometry.Point(0,0),n=0;n<r.length-1;n++){var s=[];s.push(r[n]),s.push(r[n+1]);var P=SuperMap.Plot.PlottingUtil.projectPoint(e,r[n],r[n+1]);if(-1!==SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(P,s).index){var c=SuperMap.Plot.PlottingUtil.distance(e,P);-1===a?(a=n,u=P,p=c):p>c&&(a=n,u=P,p=c)}}-1===a&&Math.ceil(e.x,1)<=Math.ceil(i[0].x,1)?(a=0,u=i[0]):-1===a&&a===i[i.length-2]&&(a=0,u=i[0]),-1===a&&Math.ceil(e.x,1)>=Math.ceil(i[i.length-1].x,1)?(a=i.length-1,u=i[i.length-1]):-1!==a&&a!==i.length-1||(a=i.length-2,u=i[i.length-2]);for(var S=0,n=0;n<a;n++)S+=SuperMap.Plot.PlottingUtil.distance(i[n],i[n+1]);var y=(S+=SuperMap.Plot.PlottingUtil.distance(i[a],u))/o;this.getScaleValues()[0]=y}else if(1===t){var h=o*this.getScaleValues()[0],g=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,h);if(-1===g.index)return;var f=g.pt,M=i[g.index],d=i[g.index+1],m=SuperMap.Plot.PlottingUtil.radian(M,d),b=(_=SuperMap.Plot.PlottingUtil.radian(f,e))-m;this.getScaleValues()[1]=b;var v=(S=SuperMap.Plot.PlottingUtil.distance(f,e))/o/1.5;this.getScaleValues()[2]=v}else if(2===t){var h=o*this.getScaleValues()[0],O=180*this.getScaleValues()[1]/Math.PI,S=o*this.getScaleValues()[2];if(-1===(f=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,h)).index)return;var L=f.pt,M=i[f.index],d=i[f.index+1],m=180*SuperMap.Plot.PlottingUtil.radian(M,d)/Math.PI,U=SuperMap.Plot.PlottingUtil.circlePoint(L,.4*S,.4*S,m+O),w=(A=SuperMap.Plot.PlottingUtil.distance(e,U))/(.4*S);this.getScaleValues()[5]=w}else if(3===t){var h=o*this.getScaleValues()[0],O=180*this.getScaleValues()[1]/Math.PI,S=o*this.getScaleValues()[2];if(-1===(f=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,h)).index)return;var L=f.pt,M=i[f.index],d=i[f.index+1],_=(m=180*SuperMap.Plot.PlottingUtil.radian(M,d)/Math.PI)+O,T=new SuperMap.Geometry.Point(.6*S,0),x=SuperMap.Plot.PlottingUtil.coordinateTrans(L,T,_),E=.4*S*this.getScaleValues()[5],G=new SuperMap.Geometry.Point(0,E),V=SuperMap.Plot.PlottingUtil.coordinateTrans(x,G,_),A=SuperMap.Plot.PlottingUtil.distance(V,e),C=2*A/(.4*S);this.getScaleValues()[6]=C}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30100=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3010107",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.05),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(0===this.getScaleValues().length&&this.getScaleValues().push(.5),!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=this.getLinePts(e,this.getScaleValues()[0]),i=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),r=180*SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)/Math.PI,a=SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt);0<this.getSubSymbols().length&&this.computeSubSymbol(this.getSubSymbols()[0],i,.8*a,r-90);for(var p=[],u=[],s=0;s<=n.startIndex;s++)p.push(e[s]);if(p.push(i),p.push(n.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),n.endIndex<=e.length){u.push(i),u.push(n.endPt);for(s=n.endIndex+1;s<=e.length-1;s++)u.push(e[s]);this.addArrow(u)}var P=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),c=SuperMap.Plot.PlottingUtil.circlePoint(P.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,r+90);this.addScalePoint(c,0)}}},{key:"getLinePts",value:function(t,e){var l=new Object;if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"modifyPoint",value:function(t,e){if(0===t&&!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o),r=2*SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.5?r:.5}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3010107=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30102",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(Math.PI/2),l.getScaleValues().push(.069485),l.getScaleValues().push(.15),l.getScaleValues().push(.1),l.getScaleValues().push(1.731025),l.getScaleValues().push(2.076877)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);o=SuperMap.Plot.PlottingUtil.clearSamePts(o),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,o),this.getIsEdit()||(this.getScaleValues()[2]=this.getSubSymbolScaleValue());var n=e*this.getScaleValues()[0],i=180*this.getScaleValues()[1]/Math.PI,r=e*this.getScaleValues()[2],a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,n);if(-1!==a.index){var p=a.index,u=a.pt,s=o[p],P=o[p+1],c=180*SuperMap.Plot.PlottingUtil.radian(s,P)/Math.PI,S=SuperMap.Plot.PlottingUtil.circlePoint(u,r/2,r/2,c+i),y=SuperMap.Plot.PlottingUtil.circlePoint(u,r,r,c+i+180);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[S,y]);var h=180*SuperMap.Plot.PlottingUtil.radian(u,S)/Math.PI,g=new SuperMap.Geometry.Point(-.2*r,.05*r),f=new SuperMap.Geometry.Point(-.2*r,-.05*r),M=SuperMap.Plot.PlottingUtil.coordinateTrans(S,g,h),d=SuperMap.Plot.PlottingUtil.coordinateTrans(S,f,h),m={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[S,M,d],m);var b=.4*r*this.getScaleValues()[5],v=.4*r*this.getScaleValues()[6],O=new SuperMap.Geometry.Point(0,-.9*(b-.25*v)),L=new SuperMap.Geometry.Point(0,.9*(b-.25*v)),U=SuperMap.Plot.PlottingUtil.coordinateTrans(y,O,h),w=SuperMap.Plot.PlottingUtil.coordinateTrans(y,L,h);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[U,w]);var _=new SuperMap.Geometry.Point(0,b),T=SuperMap.Plot.PlottingUtil.coordinateTrans(y,_,h),x=new SuperMap.Geometry.Point(.5*v,-.25*v),E=new SuperMap.Geometry.Point(-.5*v,-.25*v),G=new SuperMap.Geometry.Point(-.5*v,.25*v),V=new SuperMap.Geometry.Point(.25*v,.25*v),A=SuperMap.Plot.PlottingUtil.coordinateTrans(T,x,h),C=SuperMap.Plot.PlottingUtil.coordinateTrans(T,E,h),Y=SuperMap.Plot.PlottingUtil.coordinateTrans(T,G,h),I=SuperMap.Plot.PlottingUtil.coordinateTrans(T,V,h);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[A,C,Y,I,A]);var j=new SuperMap.Geometry.Point(0,-b),B=SuperMap.Plot.PlottingUtil.coordinateTrans(y,j,h),R=new SuperMap.Geometry.Point(0,.25*v),N=new SuperMap.Geometry.Point(.5*v,0),D=new SuperMap.Geometry.Point(0,-.25*v),k=new SuperMap.Geometry.Point(-.5*v,0),z=SuperMap.Plot.PlottingUtil.coordinateTrans(B,R,h),F=SuperMap.Plot.PlottingUtil.coordinateTrans(B,N,h),K=SuperMap.Plot.PlottingUtil.coordinateTrans(B,D,h),W=SuperMap.Plot.PlottingUtil.coordinateTrans(B,k,h);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[z,F,K,W,z]),this.addScalePoint(u,0);var q=SuperMap.Plot.PlottingUtil.circlePoint(u,r,r,c+i);this.addScalePoint(q,1);var H=new SuperMap.Geometry.Point(0,-b),Z=SuperMap.Plot.PlottingUtil.coordinateTrans(y,H,h);this.addScalePoint(Z,2);var X=new SuperMap.Geometry.Point(-.5*v,0),J=SuperMap.Plot.PlottingUtil.coordinateTrans(T,X,h);this.addScalePoint(J,3)}}}},{key:"modifyPoint",value:function(t,e){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);var i=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);if(i=SuperMap.Plot.PlottingUtil.clearSamePts(i),0===t){for(var r=[],n=0;n<i.length;n++)r.push(new SuperMap.Geometry.Point(i[n].x,i[n].y));for(var a=-1,p=0,u=new SuperMap.Geometry.Point(0,0),n=0;n<r.length-1;n++){var s=[];s.push(r[n]),s.push(r[n+1]);var P=SuperMap.Plot.PlottingUtil.projectPoint(e,r[n],r[n+1]);if(-1!==SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(P,s).index){var c=SuperMap.Plot.PlottingUtil.distance(e,P);-1===a?(a=n,u=P,p=c):p>c&&(a=n,u=P,p=c)}}-1===a&&Math.ceil(e.x,1)<=Math.ceil(i[0].x,1)?(a=0,u=i[0]):-1===a&&a===i[i.length-1]&&(a=0,u=i[0]),-1===a&&Math.ceil(e.x,1)>=Math.ceil(i[i.length-1].x,1)?(a=i.length-1,u=i[i.length-1]):-1!==a&&a!==i.length-1||(a=i.length-2,u=i[i.length-2]);for(var S=0,n=0;n<a;n++)S+=SuperMap.Plot.PlottingUtil.distance(i[n],i[n+1]);var y=(S+=SuperMap.Plot.PlottingUtil.distance(i[a],u))/o;this.getScaleValues()[0]=y}else if(1===t){var h=o*this.getScaleValues()[0],g=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,h);if(-1===g.index)return;var f=w=g.pt,M=i[g.index],d=i[g.index+1],m=SuperMap.Plot.PlottingUtil.radian(M,d),b=SuperMap.Plot.PlottingUtil.radian(f,e)-m;this.getScaleValues()[1]=b;var v=(S=SuperMap.Plot.PlottingUtil.distance(w,e))/o;this.getScaleValues()[2]=v}else if(2===t){var h=o*this.getScaleValues()[0],O=180*this.getScaleValues()[1]/Math.PI,S=o*this.getScaleValues()[2];if(-1===(w=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,h)).index)return;var f=w.pt,M=i[w.index],d=i[w.index+1],m=180*SuperMap.Plot.PlottingUtil.radian(M,d)/Math.PI,L=SuperMap.Plot.PlottingUtil.circlePoint(f,S,S,m+O-180),U=(x=SuperMap.Plot.PlottingUtil.distance(e,L))/(.4*S);this.getScaleValues()[5]=U}else if(3===t){var h=o*this.getScaleValues()[0],O=180*this.getScaleValues()[1]/Math.PI,S=o*this.getScaleValues()[2],w=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,h);if(-1===w.index)return;var f=w.pt,M=i[w.index],d=i[w.index+1],m=180*SuperMap.Plot.PlottingUtil.radian(M,d)/Math.PI,L=SuperMap.Plot.PlottingUtil.circlePoint(f,S,S,m+O-180),_=.4*S*this.getScaleValues()[5],T=SuperMap.Plot.PlottingUtil.circlePoint(L,_,_,m+O+90),x=SuperMap.Plot.PlottingUtil.distance(T,e),E=2*x/(.4*S);if(this.getScaleValues()[5]-.25*E<=0)return;this.getScaleValues()[6]=E}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30102=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30200",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,0===l.getScaleValues().length&&(l.getScaleValues().push(1e3),l.getScaleValues().push(.2),l.getScaleValues().push(.1)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);o=SuperMap.Plot.PlottingUtil.clearSamePts(o),this.getIsEdit()||(this.getScaleValues()[1]=2*this.getSubSymbolScaleValue());var n=e*this.getScaleValues()[1],i=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,n);if(-1!==i.index){var r=t[0],a=i.pt,p=SuperMap.Plot.PlottingUtil.radian(r,a)*this.RTOD,u=new SuperMap.Geometry.Point(0,.1*n),s=new SuperMap.Geometry.Point(.4*n,.1*n),P=new SuperMap.Geometry.Point(.4*n,-.1*n),c=new SuperMap.Geometry.Point(0,-.1*n),S=SuperMap.Plot.PlottingUtil.coordinateTrans(r,u,p),y=SuperMap.Plot.PlottingUtil.coordinateTrans(r,s,p),h=SuperMap.Plot.PlottingUtil.coordinateTrans(r,P,p),g=SuperMap.Plot.PlottingUtil.coordinateTrans(r,c,p),f={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[S,y,h,g,S],f);var M=this.getSubSymbolScaleValue()*n,d=new SuperMap.Geometry.Point(.3*n,0),m=SuperMap.Plot.PlottingUtil.circlePoint(d,M,M,135),b=SuperMap.Plot.PlottingUtil.circlePoint(d,M,M,225),v=SuperMap.Plot.PlottingUtil.coordinateTrans(r,d,p),O=SuperMap.Plot.PlottingUtil.coordinateTrans(r,m,p),L=SuperMap.Plot.PlottingUtil.coordinateTrans(r,b,p);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[O,v,L]);var U=new SuperMap.Geometry.Point(.9*n,0),w=SuperMap.Plot.PlottingUtil.coordinateTrans(r,U,p);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[v,w]);var _=new SuperMap.Geometry.Point(.8*n,.025*n),T=new SuperMap.Geometry.Point(.8*n,-.025*n),x=SuperMap.Plot.PlottingUtil.coordinateTrans(r,_,p),E=SuperMap.Plot.PlottingUtil.coordinateTrans(r,T,p),G={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[w,x,E],G);var V=[];V.push(i.pt);for(l=i.index+1;l<o.length;l++)V.push(o[l]);this.addArrow(V);var A=SuperMap.Plot.PlottingUtil.circlePoint(r,n,n,p+90);this.addScalePoint(A,0)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);var i=l[0],r=e,a=SuperMap.Plot.PlottingUtil.distance(r,i);if(0===t){var p=a/o;if(.06>p||.3<p)return void this.calculateParts();this.getScaleValues()[1]=p}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30200=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol31400",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,t);var e=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),l=Math.abs(t[1].x-t[0].x)*this.getSubSymbolScaleValue(),o=new SuperMap.Geometry.Point(e.x-l,e.y-l),n=new SuperMap.Geometry.Point(e.x+l,e.y+l),i={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,[o,n],i,!0)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol31400=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol31600",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,t);var e=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),l=Math.abs(t[1].x-t[0].x)*this.getSubSymbolScaleValue(),o=new SuperMap.Geometry.Point(e.x-l,e.y+l),n=new SuperMap.Geometry.Point(e.x-3*l,e.y-l);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[o,n]);var i=new SuperMap.Geometry.Point(e.x-l,e.y-l),r=new SuperMap.Geometry.Point(e.x-3*l,e.y+l);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[i,r]);var a=new SuperMap.Geometry.Point(e.x+2*l,e.y+l),p=new SuperMap.Geometry.Point(e.x+3*l,e.y+l);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[a,p]);var u=new SuperMap.Geometry.Point(e.x+l,e.y),s=new SuperMap.Geometry.Point(e.x+4*l,e.y);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[u,s]);var P=new SuperMap.Geometry.Point(e.x+2*l,e.y-l),c=new SuperMap.Geometry.Point(e.x+3*l,e.y-l);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[P,c])}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol31600=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol38600",l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.05,l.getScaleValues()[1]=.04),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(this.getScaleValues().length<1&&(this.getScaleValues()[0]=.05,this.getScaleValues()[1]=.04),!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=this.getLinePts(e,this.getScaleValues()[0]),i=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),r=180*SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)/Math.PI,a=SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt);0<this.getSubSymbols().length&&this.computeSubSymbol(this.getSubSymbols()[0],i,.7*a,r-90);for(var p=[],u=[],s=0;s<=n.startIndex;s++)p.push(e[s]);if(p.push(n.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),n.endIndex<=e.length){u.push(n.endPt);for(s=n.endIndex+1;s<=e.length-1;s++)u.push(e[s]);this.addArrow(u)}for(var P=[],s=0;s<e.length;s++)P.push(e[s]);var c=l*this.getScaleValues()[1],S=SuperMap.Plot.PlottingUtil.paraLine(P,c,!0),y=SuperMap.Plot.PlottingUtil.paraLine(P,c,!1),h=[];for(s=0;s<S.length;s++)h.push(S[s]);var g=[];for(s=0;s<y.length;s++)g.push(y[s]);h=SuperMap.Plot.PlottingUtil.clearSamePts(h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h),g=SuperMap.Plot.PlottingUtil.clearSamePts(g),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var f=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),M=SuperMap.Plot.PlottingUtil.circlePoint(f.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,r+90);this.addScalePoint(M,0),this.addScalePoint(y[0],1)}}},{key:"getLinePts",value:function(t,e){var l=new Object;if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(l.length<this.minEditPts)return;if(0===t){var i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o);if(-1===i.index)return;var r=2*SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.5?r:.5}if(1===t){var a=SuperMap.Plot.PlottingUtil.distance(e,l[0]);this.getScaleValues()[1]=a/n}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol38600=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(3)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol4010800",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){4>this.getScaleValues().length&&(this.getScaleValues().push(.05),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];3>=t.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),o=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(!this.getIsEdit()){var n=(p=1.5*this.getDefaultSubSymbolSize())/o;n>.2&&(n=.2),this.getScaleValues()[0]=n}var i=this.getScaleValues()[0],r=(this.getScaleValues()[1],this.getScaleValues()[2]),a=this.getScaleValues()[3],p=o*i,u=new SuperMap.Geometry.Point(l.x+o*r,l.y+o*a);if(this.getSubSymbols()&&null!==this.getSubSymbols()&&this.getSubSymbols().length>0){if(this.getSubSymbols()[0].symbolData)for(var s in this.getSubSymbols()[0].symbolData.innerCells)this.getSubSymbols()[0].symbolData.innerCells[s].type===SuperMap.Plot.SymbolType.POLYBEZIERSYMBOL&&(this.getSubSymbols()[0].symbolData.innerCells[s].type=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL);this.computeSubSymbol(this.getSubSymbols()[0],u,p,0)}for(var P=0;P<this.components.length;P++)this.components[P].style.color="#000",this.components[P].style.lineColorLimit=!0,this.components[P].style.strokeOpacity=1;this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e),this.addScalePoint(u);var c=p,S=SuperMap.Plot.PlottingUtil.circlePoint(u,c,c,90);this.addScalePoint(S)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol4010800=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(.125),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/e;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n);var i=.5*e,r=e*this.getSubSymbolScaleValue(),a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(n,i);if(-1!==a.index){var p=a.pt,u=n[a.index],s=n[a.index+1],P=SuperMap.Plot.PlottingUtil.radian(u,s)*this.RTOD,c=SuperMap.Plot.PlottingUtil.circlePoint(p,r,r,P+270),S=SuperMap.Plot.PlottingUtil.circlePoint(p,r,r,P+90);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[a.pt,c]);var y=SuperMap.Plot.PlottingUtil.radian(p,c)*this.RTOD,h=e*this.getScaleValues()[0];0<this.getSubSymbols().length&&this.computeSubSymbol(this.getSubSymbols()[0],S,h,P+90);var S=SuperMap.Plot.PlottingUtil.circlePoint(c,r,r,y+30),g=SuperMap.Plot.PlottingUtil.circlePoint(c,r,r,y+33),f=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt([c,S,g]);f=SuperMap.Plot.PlottingUtil.clearSamePts(f);var M=SuperMap.Plot.PlottingUtil.polylineDistance(f),d=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.9*M,f);if(-1!==d.index){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f.slice(0,d.index));var m=SuperMap.Plot.PlottingUtil.radian(c,S)*this.RTOD,b=new SuperMap.Geometry.Point(-.2*r,.05*r),v=new SuperMap.Geometry.Point(-.2*r,-.05*r),O=SuperMap.Plot.PlottingUtil.coordinateTrans(S,b,m+17),L=SuperMap.Plot.PlottingUtil.coordinateTrans(S,v,m+17),U={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[S,O,L],U);var w=SuperMap.Plot.PlottingUtil.circlePoint(c,r,r,y+330),_=SuperMap.Plot.PlottingUtil.circlePoint(c,r,r,y+327),T=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt([c,w,_]);T=SuperMap.Plot.PlottingUtil.clearSamePts(T),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,T.slice(0,d.index));var x=SuperMap.Plot.PlottingUtil.radian(c,w)*this.RTOD,E=SuperMap.Plot.PlottingUtil.coordinateTrans(w,b,x-17),G=SuperMap.Plot.PlottingUtil.coordinateTrans(w,v,x-17);this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[w,E,G],U)}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol4021101=p},function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Plot=SuperMap.Plot=SuperMap.Plot||{};SuperMap.Plot.SymbolType={DOTSYMBOL:1,ALGOSYMBOL:2,TEXTSYMBOL:34,ELLIPSESYMBOL:31,CIRCLESYMBOL:29,RECTANGLESYMBOL:26,ARBITRARYPOLYGONSYMBOL:32,POLYLINESYMBOL:24,PARALLELOGRAM:28,ARCSYMBOL:44,REGULARPOLYGON:410,CHORDSYMBOL:370,PIESYMBOL:380,KIDNEY:390,POLYBEZIERSYMBOL:590,PARALLELLINE:48,BRACESYMBOL:400,ANNOFRAMESYMBOL:320,ANNOFRAMESYMBOLM:321,TRAPEZOIDSYMBOL:350,POLYBEZIERCLOSESYMBOL:360,GROUPOBJECT:1e3,LINERELATION:1001,INTERFERENCEBEAM:1002,POLYGONREGION:1003,ARCREGION:1004,AIRROUTE:1005,NAVYROUTE:1006,MISSILEROUTE:1007,NAVYDEPLOYMENT:1008,AIRDEPLOYMENT:1009,SATELLITE:1010,SATELLITETIMEWINDOWS:1011,SYMBOLTEXT:1012,RUNWAY:1013,CURVEEIGHT:1014,ROUTENODE:1015,ARROWLINE:1016,PATHTEXT:1017,LITERATESIGN:1018,CONCENTRICCIRCLE:1019,FLAGGROUP:1020,SYMBOLTEXT1:1021,COMBINATIONALCIRCLE:1022,FREECURVE:1023,SYMBOLTEXTBOX:1024,NODECHAIN:1025,LINEMARKING:1026,AVOIDREGION:1027},SuperMap.Plot.LineRelation={SOLID:0,DASH:1,ARROW:2},SuperMap.Plot.AlgoSurroundLineType={NONE:0,INNER:1,OUT:2,ALL:3},SuperMap.Plot.RouteNodeType={RENDEZVOUS:"RENDEZVOUS",EXPANDING:"EXPANDING",VOLLEY:"VOLLEY",STANDBY:"STANDBY",SUPPLY:"SUPPLY",TAKEOFF:"TAKEOFF",INITIAL:"INITIAL",VISUALINITAL:"VISUALINITAL",LANCH:"LANCH",TURNING:"TURNING",AIMING:"AIMING",COMMONROUTE:"COMMONROUTE",WEAPONLAUNCH:"WEAPONLAUNCH",TARGET:"TARGET",ATTACK:"ATTACK",SUPPRESS:"SUPPRESS",EIGHTSPIRAL:"EIGHTSPIRAL",HAPPYVALLEY:"HAPPYVALLEY"},SuperMap.Plot.RelLineText={ONLINE:0,ONLEFTLINE:1,ONRIGHTLINE:2,ONBOTHLINE:3},SuperMap.Plot.RadiusLineType={NONE:0,SOLID:1,ARROW:2},SuperMap.Plot.AnnoPosition={LEFTTOP:0,LEFTBOTTOM:1,RIGHTTOP:2,RIGHTBOTTOM:3,TOP:4,BOTTOM:5,LEFT:6,RIGHT:7},SuperMap.Plot.ArrowLineType={DOUBLELINE:0,TRIANGLESOLID:1,NONE:2},SuperMap.Plot.TextBoxType={WITHTIPBOX:0,RECTBOX:1,LINEBOX:2,NONEBOX:3},SuperMap.Plot.PositionOffsetType={LINE:0,GRADIENTLINE:1},SuperMap.Plot.AlignType={LEFT:0,RIGHT:1,UP:2,DOWN:3,VERTICALCENTER:4,HORIZONTALCENTER:5},SuperMap.Plot.AddPoint_WayType={UNKNOWN:0,POLYLINE:1,CURVE:2},SuperMap.Plot.EditMode={ADDCONTROLPOINT:0,EDITCONTROLPOINT:1,EDITCIRCUMRECTANGLE:2}},function(t,e,l){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}o(l(16)),o(l(44)),o(l(45)),o(l(46)),o(l(47)),o(l(48)),o(l(49)),o(l(1)),o(l(50)),o(l(51)),o(l(52)),o(l(53)),o(l(54)),o(l(55)),o(l(56)),o(l(57)),o(l(58)),o(l(59)),o(l(60)),o(l(61)),o(l(62)),o(l(63)),o(l(64)),o(l(65)),o(l(66)),o(l(67)),o(l(68)),o(l(69)),o(l(70)),o(l(71)),o(l(72)),o(l(17)),o(l(73)),o(l(18)),o(l(74)),o(l(75)),o(l(76)),o(l(9)),o(l(77)),o(l(78)),o(l(79)),o(l(80)),o(l(81)),o(l(82)),o(l(83)),o(l(6)),o(l(84)),o(l(85)),o(l(86)),o(l(2)),o(l(87)),o(l(88)),o(l(7)),o(l(89)),o(l(90)),o(l(19)),o(l(3)),o(l(20)),o(l(91)),o(l(92)),o(l(93)),o(l(94)),o(l(21)),o(l(95)),o(l(96)),o(l(97)),o(l(98)),o(l(99)),o(l(100)),o(l(101)),o(l(102)),o(l(22)),o(l(103)),o(l(104)),o(l(105)),o(l(23)),o(l(106)),o(l(24)),o(l(107)),o(l(25)),o(l(108)),o(l(26)),o(l(109)),o(l(110)),o(l(111)),o(l(112)),o(l(113)),o(l(114)),o(l(27)),o(l(115)),o(l(116)),o(l(117)),o(l(10)),o(l(118)),o(l(119)),o(l(120)),o(l(11)),o(l(121)),o(l(122)),o(l(123)),o(l(124)),o(l(125)),o(l(126)),o(l(127)),o(l(128)),o(l(129)),o(l(130)),o(l(131)),o(l(28)),o(l(132)),o(l(133)),o(l(12)),o(l(134)),o(l(135)),o(l(136)),o(l(137)),o(l(138)),o(l(29)),o(l(30)),o(l(139)),o(l(31)),o(l(34)),o(l(149)),o(l(152)),o(l(33)),o(l(4)),o(l(153)),o(l(154)),o(l(155)),o(l(156)),o(l(35)),o(l(157)),o(l(36)),o(l(158)),o(l(159)),o(l(160)),o(l(161)),o(l(162)),o(l(163)),o(l(164)),o(l(165)),o(l(166)),o(l(167)),o(l(168)),o(l(169)),o(l(13)),o(l(170)),o(l(171)),o(l(172)),o(l(173)),o(l(174)),o(l(175)),o(l(176)),o(l(177)),o(l(178)),o(l(179)),o(l(180)),o(l(181)),o(l(182)),o(l(183)),o(l(184)),o(l(185)),o(l(186)),o(l(187)),o(l(37)),o(l(188)),o(l(189)),o(l(190)),o(l(191)),o(l(192)),o(l(5)),o(l(193)),o(l(194)),o(l(195)),o(l(196)),o(l(197)),o(l(208)),o(l(209)),o(l(210)),o(l(211)),o(l(212)),o(l(213)),o(l(214)),o(l(215)),o(l(216)),o(l(217)),o(l(218)),o(l(219)),o(l(220)),o(l(221)),o(l(8)),o(l(140)),o(l(141)),o(l(142)),o(l(143)),o(l(32)),o(l(144)),o(l(145)),o(l(146)),o(l(14)),o(l(222)),o(l(223)),o(l(147)),o(l(148)),o(l(150)),o(l(151)),o(l(38)),o(l(198)),o(l(199)),o(l(200)),o(l(201)),o(l(202)),o(l(203)),o(l(205)),o(l(206)),o(l(207)),o(l(224)),o(l(225)),o(l(39)),o(l(204))},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),i=(function(t){t&&t.__esModule}(l(40)),function(){function t(e,l,n){o(this,t),this.libID=null,this.code=null,this.symbolData=null,this.textContent=null,this.totalNum=null,this.CLASS_NAME="SuperMap.Plot.SubSymbol",e&&(this.libID=e),l&&(this.code=l),n&&SuperMap.Util.extend(this,n)}return n(t,[{key:"destroy",value:function(){this.libID=null,this.code=null,this.symbolData=null,this.totalNum=null}},{key:"clone",value:function(){var t=new SuperMap.Plot.SubSymbol(this.libID,this.code);return t.symbolData={},t.symbolData=SuperMap.Util.copyAttributes(t.symbolData,this.symbolData),t.textContent=this.textContent,t.totalNum=this.totalNum,t}}]),t}());e.default=i,SuperMap.Plot.SubSymbol=i},function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ArrowToolKit=SuperMap.Plot.ArrowToolKit=SuperMap.Plot.ArrowToolKit||{};SuperMap.Plot.ArrowToolKit.ConstValue={MAX_ARRAY_SIZE:128,sv_AtScaleParameter:1.5,sv_AtLenDivAtWidth:1.35,sv_AtWidthDivAwWidth:.5,DUOJIANTOU_TAIL_RATE_1:8,DUOJIANTOU_TAIL_RATE_2:3,DUOJIANTOU_TAIL_RATE_3:.6},SuperMap.Plot.ArrowToolKit.ArrowTailType={ARROWTAIL_NONE:0,ARROWTAIL_LINE:1,ARROWTAIL_CURVE:2,ARROWTAIL_COATTAIL:3,ARROWTAIL_COATTAIL_POLYBODY:4},SuperMap.Plot.ArrowToolKit.ArrowHeadType={ARROWHEAD_POLYLINE:0,ARROWHEAD_TRIANGLE:1,ARROWHEAD_COATTAIL:2,ARROWHEAD_TRIANGLE_SOLID:3,ARROWHEAD_WITH_EAR:4,ARROWHEAD_WITHOUT_EAR:5},SuperMap.Plot.ArrowToolKit.ArrowBodyType={ARROWBODY_POLYLINE:0,ARROWBODY_POLYBEZIER:1,ARROWBODY_PARALLEL:2,ARROWBODY_TRAPEZOID:3,ARROWBODY_MULTIPOLYBEZIER:4},SuperMap.Plot.ArrowToolKit.parallel=function(t,e){var l={};return l.leftParallelPts=[],l.rightParallelPts=[],1===t.length||2===t.length&&t[0].x===t[1].x&&t[0].y===t[1].y?l:(l.leftParallelPts=SuperMap.Plot.PlottingUtil.parallel(t,e),l.rightParallelPts=SuperMap.Plot.PlottingUtil.parallel(t,-e),l)},SuperMap.Plot.ArrowToolKit.trapezoid=function(t,e,l){var o={};if(o.leftParallelPts=[],o.rightParallelPts=[],1===t.length||2===t.length&&t[0].x===t[1].x&&t[0].y===t[1].y)return o;for(var n=0;n<t.length-1;n++){t[n].x===t[n+1].x&&t[n].y===t[n+1].y&&(o.leftParallelPts.push(o.leftParallelPts[o.leftParallelPts.length-1]),o.rightParallelPts.push(o.rightParallelPts[o.rightParallelPts.length-1]));var i=t[n+1];i=SuperMap.Plot.PlottingUtil.rotate(t[n],0,1,i),o.leftParallelPts.push(SuperMap.Plot.PlottingUtil.findPointInLine(t[n],i,e)),i=t[n],i=SuperMap.Plot.PlottingUtil.rotate(t[n+1],0,-1,i),o.leftParallelPts.push(SuperMap.Plot.PlottingUtil.findPointInLine(t[n+1],i,l)),i=t[n+1],i=SuperMap.Plot.PlottingUtil.rotate(t[n],0,-1,i),o.rightParallelPts.push(SuperMap.Plot.PlottingUtil.findPointInLine(t[n],i,e)),i=t[n],i=SuperMap.Plot.PlottingUtil.rotate(t[n+1],0,1,i),o.rightParallelPts.push(SuperMap.Plot.PlottingUtil.findPointInLine(t[n+1],i,l))}return o},SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePts=function(t,e,l){var o={};switch(l){case SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_PARALLEL:case SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_TRAPEZOID:var n=e[0],i=e[1],r=e[2],a=(e[3],e[4],SuperMap.Plot.PlottingUtil.equalFuzzy(r,0));if(!a&&t.length>2){var p=t.length;t.splice(2,p-2)}var u=SuperMap.Plot.PlottingUtil.polylineDistance(t);SuperMap.Plot.PlottingUtil.distance(t[t.length-2],t[t.length-1]);o.arrowTouLen=u*n;for(var s=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,u-o.arrowTouLen).pt,P=[],c=o.arrowTouLen*r,S=o.arrowTouLen*i,y=t.length-1,h=0;h<y;h++)P.push(t[h]);P.push(s);var g={};g.leftParallelPts=[],g.rightParallelPts=[],g=!0===a?SuperMap.Plot.ArrowToolKit.parallel(P,S):SuperMap.Plot.ArrowToolKit.trapezoid(P,c,S);var f=t[t.length-1];t[t.length-1]=s,t.push(f);var M=null;return o.leftBodyPts=g.leftParallelPts,o.rightBodyPts=g.rightParallelPts,o.OpectrlPoints=M,o;case SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_MULTIPOLYBEZIER:var d=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(0==d)return;var m=(M=SuperMap.Plot.ArrowToolKit.OperateCtrlPts(t)).length;m--;var b=SuperMap.Plot.ArrowToolKit.generateMultiBezier(M,m,e,d);t=[];for(h=0;h<M.length;h++)t.push(M[h]);o.arrowTouLen=b.arrowTouLen,o.leftBodyPts=b.leftBodyPts,o.rightBodyPts=b.rightBodyPts,o.OpectrlPoints=M}return o},SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePts=function(t,e,l,o,n){var i=[];switch(n){case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_WITH_EAR:case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_WITHOUT_EAR:var r=l[0],a=l[1],p=0,u=0;3==l.length&&(p=l[2]),4==l.length&&(p=l[2],u=l[3]);var s=0;if(!SuperMap.Plot.PlottingUtil.equalFuzzy(p,0)&&!SuperMap.Plot.PlottingUtil.equalFuzzy(u,0)){var P=SuperMap.Plot.PlottingUtil.clonePoints(t);P.splice(P.length-1,1),s=SuperMap.Plot.PlottingUtil.polylineDistance(P)*p*u}var c=new SuperMap.Geometry.Point((e[0].x+e[1].x)/2,(e[0].y+e[1].y)/2);if(SuperMap.Plot.PlottingUtil.equalFuzzy(a,0)){var S=o*r,y=t[t.length-1];return y=SuperMap.Plot.PlottingUtil.rotate(c,0,1,y),i.push(SuperMap.Plot.PlottingUtil.findPointInLine(c,y,S)),i.push(t[t.length-1]),y=t[t.length-1],y=SuperMap.Plot.PlottingUtil.rotate(c,0,-1,y),i.push(SuperMap.Plot.PlottingUtil.findPointInLine(c,y,S)),i}var h=o*a,g=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(h,c,t[t.length-1]);h=o*r,h+=s;var f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(h,t[t.length-1],g),M=f.pntLeft,d=f.pntRight,m=t[t.length-1];return i.push(d),i.push(m),i.push(M),i}},SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePtsBySingleLine=function(t,e,l){var o=0,n=[];if(2>t.length)return{arrowHeadLen:o,arrowBodyPts:n};for(var i=0,r=0;r<t.length-1;r++)i+=SuperMap.Plot.PlottingUtil.distance(t[r],t[r+1]);var a=SuperMap.Plot.PlottingUtil.equalFuzzy(e,0);switch(o=i*e,l){case SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_POLYLINE:if(a)n=n.concat(t);else if(-1!==(c=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,i-o)).index){for(r=0;r<c.index;r++)n.push(t[r]);n.push(c.pt)}break;case SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_POLYBEZIER:if(2==t.length)if(a)n=n.concat(t);else{var p=SuperMap.Plot.PlottingUtil.findPoint(t[1],t[0],o,0);n.push(t[0]),n.push(p)}else{var u=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);if(a)n=n.concat(u);else{for(var s=1.5*o,P=0,r=0;r<u.length-1;r++)P+=SuperMap.Plot.PlottingUtil.distance(u[r],u[r+1]);var c=SuperMap.Plot.PlottingUtil.findPointInPolyLine(u,P-s);if(-1!==c.index){for(r=0;r<c.index;r++)n.push(u[r]);n.push(c.pt)}}}}return{arrowHeadLen:o,arrowBodyPts:n}},SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePtsBySingleLine=function(t,e,l,o,n,i){var r=[];if(2>t)return r;for(var a=0,p=0;p<t.length-1;p++)a+=SuperMap.Plot.PlottingUtil.distance(t[p],t[p+1]);S=a*o;switch(i){case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_POLYLINE:var u=SuperMap.Plot.PlottingUtil.findPoint(e[e.length-1],e[e.length-2],S,22.5),s=SuperMap.Plot.PlottingUtil.findPoint(e[e.length-1],e[e.length-2],S,-22.5);r.push(u),r.push(t[t.length-1]),r.push(s);break;case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_TRIANGLE:var P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,a-n),c=SuperMap.Plot.PlottingUtil.findPoint(l[0],l[1],n,180),S=SuperMap.Plot.PlottingUtil.distance(P.pt,c);S=2*Math.sqrt(S*S/3);var u=SuperMap.Plot.PlottingUtil.findPoint(c,P.pt,S,22.5),s=SuperMap.Plot.PlottingUtil.findPoint(c,P.pt,S,-22.5);r.push(u),r.push(c),r.push(s),r.push(u);break;case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_TRIANGLE_SOLID:var y=e[e.length-1],h=e[e.length-2],g=SuperMap.Plot.PlottingUtil.findPoint(y,h,S,0),u=SuperMap.Plot.PlottingUtil.findPoint(y,g,S,22.5),s=SuperMap.Plot.PlottingUtil.findPoint(y,g,S,-22.5);r.push(u),r.push(y),r.push(s),r.push(u);break;case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_COATTAIL:var f=e.length,h=e[f-1];S=2*Math.sqrt(S*S/3);var u=SuperMap.Plot.PlottingUtil.findPoint(e[f-1],e[f-2],S,20),s=SuperMap.Plot.PlottingUtil.findPoint(e[f-1],e[f-2],S,-20),M=SuperMap.Plot.PlottingUtil.findPoint(e[f-1],e[f-2],S/2,0);r.push(h),r.push(u),r.push(M),r.push(s),r.push(h)}return r},SuperMap.Plot.ArrowToolKit.generateArrowTailShapePts=function(t,e,l,o){for(var n=e.length,i=[],r=0,a=0;a<t.length-1;a++)r+=SuperMap.Plot.PlottingUtil.distance(t[a],t[a+1]);var p=r*l;switch(o){case SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_NONE:break;case SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_LINE:var u=SuperMap.Plot.PlottingUtil.findPoint(t[0],t[1],p,90),s=SuperMap.Plot.PlottingUtil.findPoint(t[0],t[1],p,-90);i.push(u),i.push(s);break;case SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_CURVE:var P=new SuperMap.Geometry.Point(.5*(e[0].x+e[n-1].x),.5*(e[0].y+e[n-1].y)),c=SuperMap.Plot.PlottingUtil.distance(e[0],e[n-1]),S=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(c*l,P,t[t.length-1]),y=new SuperMap.Geometry.Point(0,0),h=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrianglePoints(SuperMap.Plot.ArrowToolKit.ConstValue.DUOJIANTOU_TAIL_RATE_1,SuperMap.Plot.ArrowToolKit.ConstValue.DUOJIANTOU_TAIL_RATE_2,e[0],S,e[n-1],y,h);var g=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrapezoidPoints(SuperMap.Plot.ArrowToolKit.ConstValue.DUOJIANTOU_TAIL_RATE_3,e[0],S,y,g);var f=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrapezoidPoints(SuperMap.Plot.ArrowToolKit.ConstValue.DUOJIANTOU_TAIL_RATE_3,e[n-1],S,h,f);break;case SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_COATTAIL:var M=SuperMap.Plot.PlottingUtil.findPoint(t[0],t[1],p,157.5),d=SuperMap.Plot.PlottingUtil.findPoint(t[0],t[1],p,-157.5);i.push(M),i.push(t[0]),i.push(d);break;case SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_COATTAIL_POLYBODY:var P=new SuperMap.Geometry.Point(.5*(e[0].x+e[n-1].x),.5*(e[0].y+e[n-1].y)),c=SuperMap.Plot.PlottingUtil.distance(e[0],e[n-1]),m=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(c*l,e[0],P);i.push(e[n-1]),i.push(m.pntLeft),i.push(e[0])}return i},SuperMap.Plot.ArrowToolKit.OperateCtrlPts=function(t){var e=SuperMap.Plot.PlottingUtil.clonePoints(t);if(3==e.length){var l=((e[0].x+e[1].x)/2+e[2].x)/2,o=((e[0].y+e[1].y)/2+e[2].y)/2,n=new SuperMap.Geometry.Point(l,o),i=e[2].clone();e[2]=n,e.push(i)}return e},SuperMap.Plot.ArrowToolKit.generateMultiBezier=function(t,e,l,o){var n=0,i=[],r=[],a=[],p=[],u=[],s=[],P=[],c=[],S=l[0],y=l[1],h=(l[2],l[3],(t[0].x+t[1].x)/2),g=(t[0].y+t[1].y)/2,f=Math.abs(h-t[2].x),M=Math.abs(g-t[2].y),d=0;if(f>0&&M>0){var m=1/(h-t[2].x),b=-1/(g-t[2].y),v=1*t[2].y/(g-t[2].y)-1*t[2].x/(h-t[2].x);d=Math.abs(m*t[0].x+b*t[0].y+v)/Math.sqrt(m*m+b*b)}else M<=1e-4?d=Math.abs(g-t[1].y):f<=1e-4&&(d=Math.abs(h-t[1].x));var O=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(d,t[2],new SuperMap.Geometry.Point(h,g)),L=SuperMap.Plot.PlottingUtil.pointIsRightToLine(t[1],t[2],t[0]);L?(a[1]=t[1],p[1]=t[0]):(a[1]=t[0],p[1]=t[1]),t[1]=new SuperMap.Geometry.Point((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2);var U=Math.sqrt((O.pntLeft.x-O.pntRight.x)*(O.pntLeft.x-O.pntRight.x)+(O.pntLeft.y-O.pntRight.y)*(O.pntLeft.y-O.pntRight.y))*SuperMap.Plot.ArrowToolKit.ConstValue.sv_AtWidthDivAwWidth,w=(n=U*SuperMap.Plot.ArrowToolKit.ConstValue.sv_AtLenDivAtWidth)*y;SuperMap.Plot.PlottingUtil.equalFuzzy(S,0)||(w=(n=o*S)*y);var _=SuperMap.Plot.PlottingUtil.distance(t[e],t[e-1]),T=2*n;_<T&&(w=(n=_/2)*y),t.push(t[e]);var x,E;x=0,E=0;var G=0,V=[];for(G=2;G<=e;G++)x+=SuperMap.Plot.PlottingUtil.distance(t[G],t[G-1]);for(x-=n,G=2;G<=e-1;G++)E+=SuperMap.Plot.PlottingUtil.distance(t[G],t[G-1]),V[G]=w+(U-w)*Math.pow((x-E)/x,SuperMap.Plot.ArrowToolKit.ConstValue.sv_AtScaleParameter);V[e]=w;var A,C=new SuperMap.Geometry.Point(0,0),Y=new SuperMap.Geometry.Point(0,0),I=new SuperMap.Geometry.Point(0,0);for(G=2;G<=e-1;G++)SuperMap.Plot.PlottingUtil.getTrianglePoints(0,3,t[G-1],t[G],t[G+1],Y,I),G==e-1&&SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,t[e],t[e-1],I,C),A=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(V[G],Y,t[G]),(L=SuperMap.Plot.PlottingUtil.pointIsRightToLine(I,Y,A.pntRight))?(a[G]=new SuperMap.Geometry.Point(A.pntRight.x,A.pntRight.y),p[G]=new SuperMap.Geometry.Point(A.pntLeft.x,A.pntLeft.y)):(a[G]=new SuperMap.Geometry.Point(A.pntLeft.x,A.pntLeft.y),p[G]=new SuperMap.Geometry.Point(A.pntRight.x,A.pntRight.y));Math.sqrt(1*(t[e].x-C.x)*(t[e].x-C.x)+1*(t[e].y-C.y)*(t[e].y-C.y))>0&&(t[e]=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(n,t[e],C)),A=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(w,t[e+1],t[e]),(L=SuperMap.Plot.PlottingUtil.pointIsRightToLine(t[e],t[e+1],A.pntLeft))?(p[e]=new SuperMap.Geometry.Point(A.pntLeft.x,A.pntLeft.y),a[e]=new SuperMap.Geometry.Point(A.pntRight.x,A.pntRight.y)):(p[e]=new SuperMap.Geometry.Point(A.pntRight.x,A.pntRight.y),a[e]=new SuperMap.Geometry.Point(A.pntLeft.x,A.pntLeft.y));var j;for(G=2;G<e;G++)SuperMap.Plot.PlottingUtil.getTrianglePoints(3,3,a[G-1],a[G],a[G+1],Y,I),u[G]=new SuperMap.Geometry.Point(Y.x,Y.y),s[G]=new SuperMap.Geometry.Point(I.x,I.y),SuperMap.Plot.PlottingUtil.getTrianglePoints(3,3,p[G-1],p[G],p[G+1],Y,I),P[G]=new SuperMap.Geometry.Point(Y.x,Y.y),c[G]=new SuperMap.Geometry.Point(I.x,I.y),2==G&&(SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,a[1],a[2],u[2],C),s[1]=new SuperMap.Geometry.Point(C.x,C.y),SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,p[1],p[2],P[2],C),c[1]=new SuperMap.Geometry.Point(C.x,C.y)),G==e-1&&(T=(_=SuperMap.Plot.PlottingUtil.distance(a[e],a[e-1]))/3,(j=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(T,t[e],t[e+1])).x+=a[e].x-t[e].x,j.y+=a[e].y-t[e].y,T=(_=U-w)*Math.pow(T/x,SuperMap.Plot.ArrowToolKit.ConstValue.sv_AtScaleParameter),A=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(T,a[e],j),u[e]=new SuperMap.Geometry.Point(A.pntLeft.x,A.pntLeft.y),T=(_=SuperMap.Plot.PlottingUtil.distance(p[e],p[e-1]))/3,(j=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(T,t[e],t[e+1])).x+=p[e].x-t[e].x,j.y+=p[e].y-t[e].y,T=(_=U-w)*Math.pow(T/x,SuperMap.Plot.ArrowToolKit.ConstValue.sv_AtScaleParameter),A=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(T,p[e],j),P[e]=new SuperMap.Geometry.Point(A.pntRight.x,A.pntRight.y));return i=SuperMap.Plot.ArrowToolKit.genArrowBody(e,a,u,s),r=SuperMap.Plot.ArrowToolKit.genArrowBody(e,p,P,c),{arrowTouLen:n,leftBodyPts:i,rightBodyPts:r}},SuperMap.Plot.ArrowToolKit.genArrowBody=function(t,e,l,o){var n=new SuperMap.Plot.Path2D;if(!(t<2)){n.MoveTo(e[1]);for(var i=1;i<=t-1;i++)n.CubicTo(o[i],l[i+1],e[i+1]);var r=[];return n.ToSubPathPolygons(r),r[0]}}},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol12501",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(.03),l.getScaleValues().push(.5),l.getScaleValues().push(.03)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){if(!this.getIsEdit()){var e=this.getSubSymbolScaleValue();this.getScaleValues()[0]=e,this.getScaleValues()[1]=.5*e,this.getScaleValues()[3]=.5*e}var l=this.getScaleValues()[0],o=this.getScaleValues()[1],n=this.getScaleValues()[2],i=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);i=SuperMap.Plot.PlottingUtil.clearSamePts(i);var r=this.GetCurvePts(t,l,o);if(0!==r.pt.length){for(P=0;P<r.pt.length-1;P++)SuperMap.Plot.PlottingUtil.distance(r.pt[P],r.pt[P+1]);var a=SuperMap.Plot.PlottingUtil.polylineDistance(i)*n,p=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,a);if(-1!==p.index){for(var u=SuperMap.Plot.PlottingUtil.polylineDistance(t)*this.getScaleValues()[3],s=[],P=0;P<360;P+=12)s.push(SuperMap.Plot.PlottingUtil.circlePoint(p.pt,u,u,P));s.push(s[0]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s);for(var c=[],S=[],P=0;P<r.pt.length;P++)SuperMap.Plot.PlottingUtil.ptIsInPolygon(s,r.pt[P])?S.length>1&&(c.push(S),S=[]):S.push(r.pt[P]);S.length>1&&c.push(S);for(P=0;P<c.length;P++)this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c[P]);var y=new SuperMap.Geometry.Point(r.pt[0].x,r.pt[0].y);y.isScalePoint=!0,y.tag=0,this.addScalePoint(y);var h=new SuperMap.Geometry.Point(r.scalePt.x,r.scalePt.y);h.isScalePoint=!0,h.tag=1,this.addScalePoint(h);var g=new SuperMap.Geometry.Point(p.pt.x,p.pt.y);g.isScalePoint=!0,g.tag=2,this.addScalePoint(g);var f=SuperMap.Plot.PlottingUtil.circlePoint(new SuperMap.Geometry.Point(p.pt.x,p.pt.y),u,u,0),M=new SuperMap.Geometry.Point(f.x,f.y);M.isScalePoint=!0,M.tag=3,this.addScalePoint(M)}}}}},{key:"modifyPoint",value:function(t,e){if(null!=e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;if(4>this.getScaleValues().length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l),i=new SuperMap.Geometry.Point(e.x,e.y);if(0===t){var r=new SuperMap.Geometry.Point(l[0].x,l[0].y),a=SuperMap.Plot.PlottingUtil.distance(r,i),p=2*a/o;this.getScaleValues()[1]=p}else if(1===t){r=new SuperMap.Geometry.Point(l[0].x,l[0].y);var u=(a=SuperMap.Plot.PlottingUtil.distance(r,i))/o;u>=1&&(u=1),u<.01&&(u=.01),this.getScaleValues()[0]=u}else if(2===t){var s=-1,P=0,c=new SuperMap.Geometry.Point;if(l.length===this.minEditPts){n=[];var S=this.GetCurvePts(l,this.getScaleValues()[0],this.getScaleValues()[1]);if(0===S.pt.length)return;n.push(l[0]),(n=n.concat(S.pt)).push(l[1])}for(m=0;m<n.length-1;m++){var y=n[m],h=n[m+1],g=SuperMap.Plot.PlottingUtil.projectPoint(i,y,h);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(g,y,h)){var f=SuperMap.Plot.PlottingUtil.distance(i,g);-1===s?(s=m,c=g,P=f):P>f&&(s=m,c=g,P=f)}}(-1===s||s>n.length-1)&&(s=0,c=n[0]);for(var M=SuperMap.Plot.PlottingUtil.polylineDistance(n),d=[],m=0;m<s;m++)d.push(n[m]);d.push(c);var b=SuperMap.Plot.PlottingUtil.polylineDistance(d);(v=b/M)<.05&&(v=.05),v>.95&&(v=.95),this.getScaleValues()[2]=v}else if(3===t){var v=this.getScaleValues()[2],O=(M=SuperMap.Plot.PlottingUtil.polylineDistance(n))*v;if(-1===(c=SuperMap.Plot.PlottingUtil.findPointInPolyLine(n,O)).index)return;var L=SuperMap.Plot.PlottingUtil.distance(c.pt,e)/o;this.getScaleValues()[3]=L}}this.calculateParts()}}},{key:"GetCurvePts",value:function(t,e,l){for(var o,n=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t),i=SuperMap.Plot.PlottingUtil.polylineDistance(n),r=i*e,a=i*l/2,p=[],u=[],s=n[0],P=!1,c=n[0],S=1;S<n.length;S++){var y=n[S],h=SuperMap.Plot.PlottingUtil.distance(s,y);if(!(h<r&&S!==n.length-1)){for(var g,f=parseInt(h/r),M=0;M<f;M++){g=SuperMap.Plot.PlottingUtil.linePnt(s,y,r),P||(o=g,P=!0);var d=this.GetCosPts2D(s,g,r,a);p=u.length>1&&0===M?this.ClearCurvePts2D(c,s,y,u,d,p):p.concat(d),u=(u=[]).concat(d),c=s,s=g}S===n.length-1&&(g=n[n.length-1],d=this.GetCosPts2D(s,g,r,a),p=u.length>1&&d.length>1?this.ClearCurvePts2D(c,s,y,u,d,p):p.concat(d))}}return{pt:p,scalePt:o}}},{key:"GetCosPts2D",value:function(t,e,l,o){for(var n=[],i=SuperMap.Plot.PlottingUtil.distance(t,e),r=l/30,a=0;a<i;a+=r){var p=a*(2*Math.PI/l),u=o*Math.cos(p),s=new SuperMap.Geometry.Point(a,u),P=180*SuperMap.Plot.PlottingUtil.radian(t,e)/Math.PI,c=SuperMap.Plot.PlottingUtil.coordinateTrans(t,s,P);n.push(c)}return n}},{key:"ClearCurvePts2D",value:function(t,e,l,o,n,i){for(var r=180*SuperMap.Plot.PlottingUtil.radian(e,l)/Math.PI,a=180*SuperMap.Plot.PlottingUtil.radian(e,t)/Math.PI-r;a<=0;)a+=360;var p=a/2,u=l;u=SuperMap.Plot.PlottingUtil.rotateAngle(e,p*Math.PI/180,u);for(var s=SuperMap.Plot.PlottingUtil.linePnt(e,u,1),P=0,c=0;c<o.length;c++)if(SuperMap.Plot.PlottingUtil.pointIsRightToLine(e,s,o[c])){P=c;break}if(0!=P)for(var S=0;S<o.length-P;S++)i.slice(S,i.length-1);for(c=0;c<n.length;c++)SuperMap.Plot.PlottingUtil.pointIsRightToLine(e,s,n[c])&&i.push(n[c]);return i}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol12501=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(16)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol12502",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(.03)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.5),this.getScaleValues().push(.03));for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=this.getScaleValues()[0];this.getIsEdit()||(this.getScaleValues()[1]=this.getSubSymbolScaleValue());var n=this.getScaleValues()[1]*e,i=o*e,r=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,i);if(-1!==r.index){var a=r.pt,p=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[a,new SuperMap.Geometry.Point(a.x+n,a.y)]);p.push(p[0]);for(l=0;l<t.length-1;l++){var u=t[l],s=t[l+1],P=SuperMap.Plot.PlottingUtil.distance(a,u),c=SuperMap.Plot.PlottingUtil.distance(a,s);if(!(P<n&&c<n))if(P>n&&c<n||P<n&&c>n){var S;S=P>n?u:s,(h=this.getLineAddCircleIntersectPts(u,s,p)).length>0&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[h[0],S])}else{var y=SuperMap.Plot.PlottingUtil.projectPoint(a,u,s);if(SuperMap.Plot.PlottingUtil.distance(a,y)>=n)this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[u,s]);else if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(y,u,s)){var h=this.getLineAddCircleIntersectPts(u,s,p);if(h.length>0){h.unshift(u),h.push(s);for(var g=0;g<h.length-1;g++)this.isLineInCircle(h[g],h[g+1],a,n)||this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[h[g],h[g+1]])}}else this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[u,s])}}var f=180*SuperMap.Plot.PlottingUtil.radian(h[0],h[h.length-1])/Math.PI,M=h;M=1===h.length?h[0]:h[1];v=SuperMap.Plot.PlottingUtil.circlePoint(M,.3*n,.3*n,f);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[M,v]);var d=180*SuperMap.Plot.PlottingUtil.radian(M,v)/Math.PI,m=SuperMap.Plot.PlottingUtil.circlePoint(a,.1*n,.1*n,d),b=180*SuperMap.Plot.PlottingUtil.radian(M,a)/Math.PI,s=new SuperMap.Geometry.Point(-.95*n,.15*n),v=new SuperMap.Geometry.Point(-.95*n,-.15*n),O=SuperMap.Plot.PlottingUtil.coordinateTrans(m,s,b),L=SuperMap.Plot.PlottingUtil.coordinateTrans(m,v,b),U={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[m,O,L],U),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[a,new SuperMap.Geometry.Point(a.x+n,a.y)]),this.addScalePoint(a,0),this.addScalePoint(new SuperMap.Geometry.Point(a.x+n,a.y),1)}}}},{key:"isLineInCircle",value:function(t,e,l,o){var n=new SuperMap.Geometry.Point((t.x+e.x)/2,(t.y+e.y)/2);return o>SuperMap.Plot.PlottingUtil.distance(n,l)}},{key:"getLineAddCircleIntersectPts",value:function(t,e,l){for(var o=[],n=0;n<l.length-1;n++){var i=l[n],r=l[n+1],a=SuperMap.Plot.PlottingUtil.intersectLines(t,e,i,r);a.isIntersectLines&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(a.intersectPoint,t,e)&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(a.intersectPoint,i,r)&&o.push(a.intersectPoint)}for(var p=0;p<o.length-1;p++)SuperMap.Plot.PlottingUtil.isSamePt(o[p],o[p+1])&&(o.splice(p,1),p--);if(t.x>e.x){for(u=0;u<o.length&&u!=o.length-1;u++)if(o[u].x<o[u+1].x){s=o[u];o[u]=o[u+1],o[u+1]=s}}else if(t.x<e.x){for(u=0;u<o.length&&u!=o.length-1;u++)if(o[u].x>o[u+1].x){s=o[u];o[u]=o[u+1],o[u+1]=s}}else if(t.y>e.y){for(u=0;u<o.length&&u!=o.length-1;u++)if(o[u].y<o[u+1].y){s=o[u];o[u]=o[u+1],o[u+1]=s}}else if(t.y<e.y)for(var u=0;u<o.length&&u!=o.length-1;u++)if(o[u].y>o[u+1].y){var s=o[u];o[u]=o[u+1],o[u+1]=s}return o}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol12502=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol13700",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts))if(2===t.length)this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t);else if(3===t.length){var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=new SuperMap.Geometry.Point(t[1].x,t[1].y),o=new SuperMap.Geometry.Point(t[2].x,t[2].y),n=SuperMap.Plot.PlottingUtil.distance(l,o);if(0>=n)return;var i=SuperMap.Plot.PlottingUtil.distance(e,l)/n;this.getScaleValues().push(i);var r=180*SuperMap.Plot.PlottingUtil.radian(e,l)/Math.PI;r>90?r-=90:r=270+r,this.getScaleValues().push(r*(Math.PI/180));var a=180*SuperMap.Plot.PlottingUtil.radian(e,o)/Math.PI;a>90?a-=90:a=270+a,this.getScaleValues().push(a*(Math.PI/180));var p=this.getScaleValues()[0]*n,u=this.getScaleValues()[1]*(180/Math.PI)+90,s=this.getScaleValues()[2]*(180/Math.PI)+90;u<s&&(u+=360);for(var P=[],c=u;c>=s;c-=4){S=SuperMap.Plot.PlottingUtil.circlePoint(this.controlPoints[0],p,p,c);P.push(S)}if(c!==s){var S=SuperMap.Plot.PlottingUtil.circlePoint(this.controlPoints[0],p,p,s);P.push(S)}this.controlPoints[2]=SuperMap.Plot.PlottingUtil.circlePoint(this.controlPoints[0],p,p,s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol13700=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15200",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=99999,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(.1),l.getScaleValues().push(.185)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);for(var l=0,o=0,n=e.length-1;o<n;o++)l+=SuperMap.Plot.PlottingUtil.distance(e[o],e[o+1]);for(var i=0,r=0,n=t.length-1;r<n;r++)i+=SuperMap.Plot.PlottingUtil.distance(t[r],t[r+1]);this.getIsEdit()||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());for(var a=this.getScaleValues()[0]*i,p=this.getScaleValues()[1],u=this.getScaleValues()[2]*i,s=.3*u,P=u;P<l;P+=u){var c=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(P,e);if(-1===c.index)return;var S=P+s,y=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(S,e);if(-1===y.index)return;var h=[],g=[];h.push(c.pts);var f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(a,e[c.index],c.pts);0===p?h.push(new SuperMap.Geometry.Point(f.pntLeft.x,f.pntLeft.y)):h.push(new SuperMap.Geometry.Point(f.pntRight.x,f.pntRight.y)),g.push(y.pts);var M=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(a,e[y.index],y.pts);if(0===p?g.push(new SuperMap.Geometry.Point(M.pntLeft.x,M.pntLeft.y)):g.push(new SuperMap.Geometry.Point(M.pntRight.x,M.pntRight.y)),u===P){this.clearScalePoints();var d=new SuperMap.Geometry.Point(h[1].x,h[1].y);d.isScalePoint=!0,d.tag=0,this.addScalePoint(d),(d=new SuperMap.Geometry.Point(h[0].x,h[0].y)).isScalePoint=!0,d.tag=1,this.addScalePoint(d)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;for(var o=0,n=0,i=l.length-1;n<i;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);var r=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l),a=new SuperMap.Geometry.Point(e.x,e.y);if(0===t){var p=SuperMap.Plot.PlottingUtil.findPointInPolyLine(r,o*this.getScaleValues()[2]);if(-1===p.index)return void this.calculateParts();var u=SuperMap.Plot.PlottingUtil.distance(p.pt,a)/o,s=SuperMap.Plot.PlottingUtil.pointIsRightToLine(r[0],r[1],e);this.getScaleValues()[1]=s?1:0,this.getScaleValues()[0]=u}else if(1===t){for(var P=0,c=-1,S=[],y=0,i=r.length-1;y<i;y++){var h=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,r[y],r[y+1]);if(h.isOnline){var g=SuperMap.Plot.PlottingUtil.distance(h.projectPoint,this.controlPoints[1]);0==P?(P=g,c=y,S=e):g<P&&(P=g,c=y,S=e)}}if(-1==c)return void this.calculateParts();for(var f=0,y=0,i=c-1;y<i;y++)f+=SuperMap.Plot.PlottingUtil.distance(r[y],r[y+1]);var M=(f+=SuperMap.Plot.PlottingUtil.distance(S,r[c]))/o;M>.7&&(M=.7),this.getScaleValues()[2]=M}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15200=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15201",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15201=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15202",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(parseFloat(.1732)),l.getScaleValues().push(.1),l.getScaleValues().push(1)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=new SuperMap.Geometry.Point(t[1].x,t[1].y),o=SuperMap.Plot.PlottingUtil.distance(e,l),n=this.getScaleValues()[0]*o,i=this.getScaleValues()[1]*o,r=this.getScaleValues()[2],a=null;if(1===r){var p=SuperMap.Plot.PlottingUtil.linePnt(l,e,o+n);a=new SuperMap.Geometry.Point(p.x,p.y)}else p=SuperMap.Plot.PlottingUtil.linePnt(l,e,o-n),a=new SuperMap.Geometry.Point(p.x,p.y);var u=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*i,t[0],a),s=[];s.push(u.pntRight),s.push(t[0]),s.push(u.pntLeft),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s);var P=[],c=new SuperMap.Geometry.Point((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2);if(1===r){var S=new SuperMap.Geometry.Point(2*c.x-u.pntLeft.x,2*c.y-u.pntLeft.y);P.push(S),P.push(t[1]);var y=new SuperMap.Geometry.Point(2*c.x-u.pntRight.x,2*c.y-u.pntRight.y);P.push(y)}else S=new SuperMap.Geometry.Point(2*c.x-u.pntRight.x,2*c.y-u.pntRight.y),P.push(S),P.push(t[1]),y=new SuperMap.Geometry.Point(2*c.x-u.pntLeft.x,2*c.y-u.pntLeft.y),P.push(y);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15202=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(1)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15801",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=this.getScaleValues()[0],o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=l*o,i=this.getScaleValues()[2]*o*.5,r=!1;r=0===this.getScaleValues()[1];var a=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(0!==a){for(var p=new SuperMap.Geometry.Point(0,0),u=[],s=0;s<=a;s+=i){var P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s);if(!(P.index<0)){var c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[P.index+1],P.pt);if(r?u.push(c.pntRight):u.push(c.pntLeft),Math.abs(s)<=1e-6){this.clearScalePoints();var S=new SuperMap.Geometry.Point(u[0].x,u[0].y);S.isScalePoint=!0,S.tag=0,this.addScalePoint(S)}else Math.abs(2*i-s)<=1e-6&&((S=new SuperMap.Geometry.Point(P.pt.x,P.pt.y)).isScalePoint=!0,S.tag=1,this.addScalePoint(S));r=!r}}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u);for(var y=u.length,h=0,g=0;g<y-1;++g){var f=new SuperMap.Geometry.Point(u[g].x,u[g].y),M=new SuperMap.Geometry.Point(u[g+1].x,u[g+1].y);h=.3*SuperMap.Plot.PlottingUtil.distance(f,M);var d=[],m=[],b=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.35,u[g],u[g+1]);p=new SuperMap.Geometry.Point((u[g].x+u[g+1].x)/2,(u[g].y+u[g+1].y)/2);var v=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*h,u[g],b);d.push(v.pntLeft),d.push(v.pntRight),m.push(new SuperMap.Geometry.Point(2*p.x-v.pntLeft.x,2*p.y-v.pntLeft.y)),m.push(new SuperMap.Geometry.Point(2*p.x-v.pntRight.x,2*p.y-v.pntRight.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m)}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15801=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(1)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15802",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=this.getScaleValues()[0],o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=l*o,i=this.getScaleValues()[2]*o*.5,r=!1;r=0===this.getScaleValues()[1];var a=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(0!==a){for(var p,u=[],s=0;s<=a;s+=i){var P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s);if(!(P.index<0)){var c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[P.index+1],P.pt);if(r?u.push(c.pntRight):u.push(c.pntLeft),Math.abs(s)<=1e-6){this.clearScalePoints();var S=new SuperMap.Geometry.Point(u[0].x,u[0].y);S.isScalePoint=!0,S.tag=0,this.addScalePoint(S)}else Math.abs(2*i-s)<=1e-6&&((S=new SuperMap.Geometry.Point(P.pt.x,P.pt.y)).isScalePoint=!0,S.tag=1,this.addScalePoint(S));r=!r}}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u);for(var y=u.length,h=0,g=0;g<y-1;++g){var f=new SuperMap.Geometry.Point(u[g].x,u[g].y),M=new SuperMap.Geometry.Point(u[g+1].x,u[g+1].y);h=.3*SuperMap.Plot.PlottingUtil.distance(f,M);var d=[],m=[],b=[],v=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.35,u[g],u[g+1]);p=new SuperMap.Geometry.Point((u[g].x+u[g+1].x)/2,(u[g].y+u[g+1].y)/2);var O=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*h,u[g],p);m.push(O.pntLeft,O.pntRight);var L=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*h,u[g],v);d.push(L.pntLeft,L.pntRight),b.push(new SuperMap.Geometry.Point(2*p.x-L.pntLeft.x,2*p.y-L.pntLeft.y)),b.push(new SuperMap.Geometry.Point(2*p.x-L.pntRight.x,2*p.y-L.pntRight.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b)}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15802=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(1)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15803",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=this.getScaleValues()[0],o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=l*o,i=this.getScaleValues()[2]*o*.5,r=!1;r=0===this.getScaleValues()[1];var a=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(0!==a){for(var p=[],u=0;u<=a;u+=i){var s=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,u);if(!(s.index<0)){var P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[s.index+1],s.pt);if(r?p.push(P.pntRight):p.push(P.pntLeft),Math.abs(u)<=1e-6){this.clearScalePoints();var c=new SuperMap.Geometry.Point(p[0].x,p[0].y);c.isScalePoint=!0,c.tag=0,this.addScalePoint(c)}else Math.abs(2*i-u)<=1e-6&&((c=new SuperMap.Geometry.Point(s.pt.x,s.pt.y)).isScalePoint=!0,c.tag=1,this.addScalePoint(c));r=!r}}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p);for(var S=p.length,y=0,h=0;h<S-1;++h){var g=new SuperMap.Geometry.Point(p[h].x,p[h].y),f=new SuperMap.Geometry.Point(p[h+1].x,p[h+1].y);y=.3*SuperMap.Plot.PlottingUtil.distance(g,f);var M=[],d=[];if(h!==S-2){var m=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*y,p[h],p[h+1]);M.push(m.pntLeft),M.push(m.pntRight),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M)}if(0!==h){var b=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*y,p[h+1],p[h]);d.push(b.pntLeft),d.push(b.pntRight),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d)}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15803=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(1)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15804",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=this.getScaleValues()[0],o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=l*o,i=this.getScaleValues()[2]*o*.5,r=!1;r=0===this.getScaleValues()[1];var a=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(0!==a){for(var p=new SuperMap.Geometry.Point(0,0),u=[],s=0;s<=a;s+=i){var P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s);if(!(P.index<0)){var c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[P.index+1],P.pt);if(r?u.push(c.pntRight):u.push(c.pntLeft),Math.abs(s)<=1e-6){this.clearScalePoints();var S=new SuperMap.Geometry.Point(u[0].x,u[0].y);S.isScalePoint=!0,S.tag=0,this.addScalePoint(S)}else Math.abs(2*i-s)<=1e-6&&((S=new SuperMap.Geometry.Point(P.pt.x,P.pt.y)).isScalePoint=!0,S.tag=1,this.addScalePoint(S));r=!r}}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u);for(var y=u.length,h=0,g=0;g<y-1;++g){var f=new SuperMap.Geometry.Point(u[g].x,u[g].y),M=new SuperMap.Geometry.Point(u[g+1].x,u[g+1].y);h=.3*SuperMap.Plot.PlottingUtil.distance(f,M);var d=[],m=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.35,u[g],u[g+1]),b=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*h,u[g],m);d.push(b.pntRight),p=new SuperMap.Geometry.Point((u[g].x+u[g+1].x)/2,(u[g].y+u[g+1].y)/2);var v=new SuperMap.Geometry.Point(2*p.x-b.pntLeft.x,2*p.y-b.pntLeft.y),O=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.3*h,u[g],p);d.push(O.pntLeft),d.push(v),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d)}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15804=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(1)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15805",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=this.getScaleValues()[0],o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=l*o,i=this.getScaleValues()[2]*o*.5,r=!1;r=0===this.getScaleValues()[1];var a=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(0!==a){new SuperMap.Geometry.Point(0,0);for(var p=[],u=0;u<=a;u+=i){var s=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,u);if(!(s.index<0)){var P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[s.index+1],s.pt);if(r?p.push(P.pntRight):p.push(P.pntLeft),Math.abs(u)<=1e-6){this.clearScalePoints();var c=new SuperMap.Geometry.Point(p[0].x,p[0].y);c.isScalePoint=!0,c.tag=0,this.addScalePoint(c)}else Math.abs(2*i-u)<=1e-6&&((c=new SuperMap.Geometry.Point(s.pt.x,s.pt.y)).isScalePoint=!0,c.tag=1,this.addScalePoint(c));r=!r}}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p);for(var S=p.length,y=0,h=r?45*Math.PI/180:-45*Math.PI/180,g=45*Math.PI/180,f=0;f<S-1;f+=2){var M=[],d=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.3,p[f],p[f+1]);M.push(d);var m=new SuperMap.Geometry.Point(p[f].x,p[f].y),b=new SuperMap.Geometry.Point(p[f+1].x,p[f+1].y),v=(y=SuperMap.Plot.PlottingUtil.distance(m,b),SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.6,p[f],p[f+1])),O=new SuperMap.Geometry.Point(v.x,v.y);O=SuperMap.Plot.PlottingUtil.rotateAngle(d,h,v),M.push(O);var L=.15*y;v=SuperMap.Plot.PlottingUtil.linePnt(M[1],M[0],L);var U=new SuperMap.Geometry.Point(v.x,v.y);SuperMap.Plot.PlottingUtil.rotateAngle(O,g,U),M.push(U);var w=new SuperMap.Geometry.Point(M[1].x-M[0].x+M[2].x,M[1].y-M[0].y+M[2].y);M.push(w),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M)}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15805=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15806",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.06),l.getScaleValues().push(1),l.getScaleValues().push(.1)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)&&t.length>=this.minEditPts){this.clearScalePoints();var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=this.getScaleValues()[0],o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=l*o,i=.6*n,r=this.getScaleValues()[2]*o,a=0===this.getScaleValues()[1],p=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(0===p)return;for(var u=[],s=0;s<=p;s+=r){var P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s);if(!(P.index<0)){var c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[P.index+1],P.pt);if(a?u.push(c.pntRight):u.push(c.pntLeft),!((P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s+.65*r)).index<0||(c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,e[P.index+1],P.pt),a?u.push(c.pntRight):u.push(c.pntLeft),(P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s+.8*r)).index<0||(u.push(P.pt),(P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s+.5*r)).index<0||(c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[P.index+1],P.pt),a?u.push(c.pntLeft):u.push(c.pntRight),P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s+.2*r),u.push(P.pt),(P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s+.35*r)).index<0||(c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,e[P.index+1],P.pt),a?u.push(c.pntRight):u.push(c.pntLeft),(P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s+r)).index<0||(c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[P.index+1],P.pt),a?u.push(c.pntRight):u.push(c.pntLeft),!(Math.abs(s)<=1e-6)))))))){this.clearScalePoints();var S=new SuperMap.Geometry.Point(u[0].x,u[0].y);S.isScalePoint=!0,S.tag=0,this.addScalePoint(S),(S=new SuperMap.Geometry.Point(P.pt.x,P.pt.y)).isScalePoint=!0,S.tag=1,this.addScalePoint(S)}}}var y=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(u);SuperMap.Plot.PlottingUtil.clearSamePts(y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!==t&&1!==t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(l.length<this.minEditPts)return;var n=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);if(0===t){var i=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(1,n[1],n[0]),r=SuperMap.Plot.PlottingUtil.pointProjectToSegment(new SuperMap.Geometry.Point(e.x,e.y),i.pntRight,i.pntLeft),a=SuperMap.Plot.PlottingUtil.distance(r.projectPoint,l[0])/o;this.getScaleValues()[0]=a;var p=SuperMap.Plot.PlottingUtil.pointIsRightToLine(n[0],n[1],new SuperMap.Geometry.Point(e.x,e.y));this.getScaleValues()[1]=p?1:0}else{for(var u,s=-1,P=0;P<n.length-1;P++)if((r=SuperMap.Plot.PlottingUtil.pointProjectToSegment(new SuperMap.Geometry.Point(e.x,e.y),n[P],n[P+1])).isOnline){u=r.projectPoint,s=P;break}var c=[];-1===s&&(c.push(n[0]),s=0);for(P=0;P<=s;P++)c.push(n[P]);u&&c.push(u);var S=SuperMap.Plot.PlottingUtil.polylineDistance(c)/o;S<.02&&(S=.02),S>.5&&(S=.5),this.getScaleValues()[2]=S}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15806=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(1)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15900",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.02),l.getScaleValues().push(1),l.getScaleValues().push(.05)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);for(var l=0,o=0;o<t.length-1;o++)l+=SuperMap.Plot.PlottingUtil.distance(t[o],t[o+1]);var n=l*this.getScaleValues()[0],i=l*this.getScaleValues()[2],r=!1;r=0===this.getScaleValues()[0];for(var a=0,o=0;o<e.length-1;o++)a+=SuperMap.Plot.PlottingUtil.distance(e[o],e[o+1]);if(0!==a)for(var p=0;p<=a;p+=i){var u=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,p);if(-1!==u.index){var s=[],P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[u.index+1],u.pt);r?s.push(P.pntRight):s.push(P.pntLeft);var c=p+i,S=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,c);if(-1!==S.index){var y=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[S.index+1],S.pt);r?s.push(y.pntLeft):s.push(y.pntRight),Math.abs(p)<1e-6&&(this.addScalePoint(s[0],0),this.addScalePoint(S.pt,1)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s)}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15900=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol16000",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(1),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=t[0],l=t[1],o=.05*SuperMap.Plot.PlottingUtil.distance(e,l),n=SuperMap.Plot.PlottingUtil.paraLine(t,.5*o,!0),i=SuperMap.Plot.PlottingUtil.paraLine(t,.5*o,!1);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var r=[];r=this.getScaleValues()[0]<0?r.concat(i):r.concat(n);for(var a=0,p=0;p<r.length-1;p++)a+=SuperMap.Plot.PlottingUtil.distance(r[p],r[p+1]);for(var u=this.getSubSymbolScaleValue(),s=a*u*.5,P=a*u*.125,c=.1*a,S=a*u*.5,y=0;y<=a;y+=c){var h=SuperMap.Plot.PlottingUtil.findPointInPolyLine(r,y+S);if(-1!==h.index){var g,f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(s,r[h.index],h.pt);g=this.getScaleValues()[0]>0?new SuperMap.Geometry.Point(f.pntLeft.x,f.pntLeft.y):new SuperMap.Geometry.Point(f.pntRight.x,f.pntRight.y);var M=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(P,g,h.pt),d=[];if(d.push(M.pntRight),d.push(g),d.push(M.pntLeft),0===y){var m=new SuperMap.Geometry.Point(g.x,g.y);m.isScalePoint=!0,m.tag=0,this.addScalePoint(m)}var b={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,d,b)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint&&0===t){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[0],l[1],e);this.getScaleValues()[0]=o?-1:1}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol16000=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol16001",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=t[0],l=t[1],o=.05*SuperMap.Plot.PlottingUtil.distance(e,l),n=SuperMap.Plot.PlottingUtil.paraLine(t,.5*o,!0),i=SuperMap.Plot.PlottingUtil.paraLine(t,.5*o,!1);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);for(var r=0,a=0;a<n.length-1;a++)r+=SuperMap.Plot.PlottingUtil.distance(n[a],n[a+1]);for(var p=r*this.getSubSymbolScaleValue()*.5,u=6*p,s={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0},P=p;P<=r-p/2;P+=u)if(-1!==(g=SuperMap.Plot.PlottingUtil.findPointInPolyLine(n,P)).index){var c=180*SuperMap.Plot.PlottingUtil.radian(n[g.index],n[g.index+1])/Math.PI,S=SuperMap.Plot.PlottingUtil.circlePoint(g.pt,p,p,c+90),y=SuperMap.Plot.PlottingUtil.circlePoint(g.pt,.25*p,.25*p,c),h=SuperMap.Plot.PlottingUtil.circlePoint(g.pt,.25*p,.25*p,c+180);(f=[]).push(S),f.push(y),f.push(h),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,f,s)}for(P=p;P<=r-p/2;P+=u){var g=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,P);if(-1!==g.index){var c=180*SuperMap.Plot.PlottingUtil.radian(i[g.index],i[g.index+1])/Math.PI,S=SuperMap.Plot.PlottingUtil.circlePoint(g.pt,p,p,c+270),y=SuperMap.Plot.PlottingUtil.circlePoint(g.pt,.25*p,.25*p,c),h=SuperMap.Plot.PlottingUtil.circlePoint(g.pt,.25*p,.25*p,c+180),f=[];f.push(S),f.push(y),f.push(h),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,f,s)}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol16001=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol16100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=1e3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents(),this.controlPoints.length<this.minEditPts&&this.calAssistantLine();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(SuperMap.Plot.PlottingUtil.clearSamePts(t),!(t.length<this.minEditPts)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);for(var e=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),l=0,o=0;o<t.length-1;o++)l+=SuperMap.Plot.PlottingUtil.distance(t[o],t[o+1]);t.push(t[0]);for(var n=l*this.getSubSymbolScaleValue(),i=!0,r=e.x,a=e.x+n,p={surroundLineFlag:!1,lineWidthLimit:!0,color:"#FF0000",weight:.5};i;){i=!1;for(var u=[],s=[],P=new SuperMap.Geometry.Point(r,e.y),c=SuperMap.Plot.PlottingUtil.circlePoint(P,10,10,45),S=SuperMap.Plot.PlottingUtil.circlePoint(P,10,10,135),o=0;o<t.length-1;o++)(f=SuperMap.Plot.PlottingUtil.intersectLines(P,c,t[o],t[o+1])).isIntersectLines&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(f.intersectPoint,t[o],t[o+1])&&u.push(f.intersectPoint),(M=SuperMap.Plot.PlottingUtil.intersectLines(P,S,t[o],t[o+1])).isIntersectLines&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(M.intersectPoint,t[o],t[o+1])&&s.push(M.intersectPoint);if(1<u.length){d=[];d=this.sortPts2D(u);for(b=0;b<d.length-1;b++){v=new SuperMap.Geometry.Point((d[b].x+d[b+1].x)/2,(d[b].y+d[b+1].y)/2);SuperMap.Plot.PlottingUtil.ptIsInPolygon(t,v)&&((O=[]).push(d[b]),O.push(d[b+1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,O,p,!0))}}if(1<s.length){m=[];m=this.sortPts2D(s);for(b=0;b<m.length-1;b++){v=new SuperMap.Geometry.Point((m[b].x+m[b+1].x)/2,(m[b].y+m[b+1].y)/2);SuperMap.Plot.PlottingUtil.ptIsInPolygon(t,v)&&((O=[]).push(m[b]),O.push(m[b+1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,O,p,!0))}}(u.length>0||s.length>0)&&(i=!0),u=[],s=[];for(var y=new SuperMap.Geometry.Point(a,e.y),h=SuperMap.Plot.PlottingUtil.circlePoint(y,10,10,45),g=SuperMap.Plot.PlottingUtil.circlePoint(y,10,10,135),o=0;o<t.length-1;o++){var f=SuperMap.Plot.PlottingUtil.intersectLines(y,h,t[o],t[o+1]);f.isIntersectLines&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(f.intersectPoint,t[o],t[o+1])&&u.push(f.intersectPoint);var M=SuperMap.Plot.PlottingUtil.intersectLines(y,g,t[o],t[o+1]);M.isIntersectLines&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(M.intersectPoint,t[o],t[o+1])&&s.push(M.intersectPoint)}if(1<u.length){var d=[];d=this.sortPts2D(u);for(b=0;b<d.length-1;b++){v=new SuperMap.Geometry.Point((d[b].x+d[b+1].x)/2,(d[b].y+d[b+1].y)/2);SuperMap.Plot.PlottingUtil.ptIsInPolygon(t,v)&&((O=[]).push(d[b]),O.push(d[b+1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,O,p,!0))}}if(1<s.length){var m=[];m=this.sortPts2D(s);for(var b=0;b<m.length-1;b++){var v=new SuperMap.Geometry.Point((m[b].x+m[b+1].x)/2,(m[b].y+m[b+1].y)/2);if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(t,v)){var O=[];O.push(m[b]),O.push(m[b+1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,O,p,!0)}}}(u.length>0||s.length>0)&&(i=!0),r-=n,a+=n}}}},{key:"sortPts2D",value:function(t){for(var e=0;e<t.length;e++)for(var l=0;l<t.length-1-e;l++)if(SuperMap.Plot.PlottingUtil.equalFuzzy(t[l].x,t[l+1].x)){if(t[l].y>t[l+1].y){o=t[l];t[l]=t[l+1],t[l+1]=o}}else if(t[l].x>t[l+1].x){var o=t[l];t[l]=t[l+1],t[l+1]=o}return t}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol16100=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol16200",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.02),l.getScaleValues().push(.1),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=this.getSubSymbolScaleValue();this.getIsEdit()||(this.getScaleValues()[0]=.5*o);var n=this.getScaleValues()[0]*e,i=SuperMap.Plot.PlottingUtil.paraLine(l,.5*n,!0),r=SuperMap.Plot.PlottingUtil.paraLine(l,.5*n,!1);i=SuperMap.Plot.PlottingUtil.clearSamePts(i),r=SuperMap.Plot.PlottingUtil.clearSamePts(r),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r);for(var a=e*this.getScaleValues()[1],p=.5*n,u=SuperMap.Plot.PlottingUtil.polylineDistance(l),s=p,P=0;s<u;s+=a,P++){var c=SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,s);if(-1!==c.index){var S=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,l[c.index+1],c.pt),y=[];y.push(S.pntLeft),y.push(S.pntRight),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y),0===P?this.addScalePoint(S.pntRight,0):1===P&&this.addScalePoint(c.pt,1)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);var i=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);if(i=SuperMap.Plot.PlottingUtil.clearSamePts(i),0==t){var r=.5*(u=o*this.getScaleValues()[0]),a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,r);if(-1===a.index)return;var p=SuperMap.Plot.PlottingUtil.distance(e,a.pt);this.getScaleValues()[0]=p/o}else if(1===t){var u=o*this.getScaleValues()[0],r=.5*u,s=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,r);-1===s.index&&(s.index=0);var P=SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(e,i);-1===P.index&&(P.index=0,P.pt=i[1]);for(var c=SuperMap.Plot.PlottingUtil.distance(s.pt,i[s.index+1]),n=s.index+1;n<P.index;n++)c+=SuperMap.Plot.PlottingUtil.distance(i[n],i[n+1]);var S=(c+=SuperMap.Plot.PlottingUtil.distance(i[P.index],P.pt))/o;S<.01&&(S=.01),S>.95&&(S=.95),this.getScaleValues()[1]=S}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol16200=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol16201",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.02),l.getScaleValues().push(.1),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.getIsEdit()||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());var o=this.getScaleValues()[0]*e,n=SuperMap.Plot.PlottingUtil.paraLine(l,o,!0),i=SuperMap.Plot.PlottingUtil.paraLine(l,o,!1);n=SuperMap.Plot.PlottingUtil.clearSamePts(n),i=SuperMap.Plot.PlottingUtil.clearSamePts(i),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);for(var r=e*this.getScaleValues()[1],a=e*this.getSubSymbolScaleValue(),p=SuperMap.Plot.PlottingUtil.polylineDistance(l),u=a,s=0;u<p;u+=r,s++){var P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,u);if(-1!==P.index){var c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(o,l[P.index+1],P.pt),S=[];S.push(P.pt),S.push(c.pntRight),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,S),0===s?this.addScalePoint(c.pntRight):1===s&&this.addScalePoint(P.pt)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);var i=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);if(i=SuperMap.Plot.PlottingUtil.clearSamePts(i),0===t){var r=o*this.getSubSymbolScaleValue(),a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,r);if(-1===a.index)return;var p=SuperMap.Plot.PlottingUtil.distance(e,a.pt);this.getScaleValues()[0]=p/o}else if(1===t){var r=o*this.getSubSymbolScaleValue(),u=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,r);-1===u.index&&(u.index=0);var s=SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(e,i);-1===s.index&&(s.index=0,s.pt=i[1]);for(var P=SuperMap.Plot.PlottingUtil.distance(u.pt,i[u.index+1]),n=u.index+1;n<s.index;n++)P+=SuperMap.Plot.PlottingUtil.distance(i[n],i[n+1]);var c=(P+=SuperMap.Plot.PlottingUtil.distance(i[s.index],s.pt))/o;c<.01&&(c=.01),c>.95&&(c=.95),this.getScaleValues()[1]=c}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol16201=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol16202",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=this.getScaleValues()[0]*e,n=[],i=[];n=SuperMap.Plot.PlottingUtil.paraLine(t,o,!0),i=SuperMap.Plot.PlottingUtil.paraLine(t,o,!1);var r=new SuperMap.Geometry.Point(n[0].x,n[0].y);r.isScalePoint=!0,r.tag=0,this.addScalePoint(r),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var a=new SuperMap.Geometry.Point(t[0].x,t[0].y),p=new SuperMap.Geometry.Point(t[1].x,t[1].y),u=180*SuperMap.Plot.PlottingUtil.radian(a,p)/Math.PI,s=new SuperMap.Geometry.Point(.3*e,0),P=SuperMap.Plot.PlottingUtil.coordinateTrans(a,s,u),c=new SuperMap.Geometry.Point(0,.4*o),S=new SuperMap.Geometry.Point(0,.2*o),y=SuperMap.Plot.PlottingUtil.coordinateTrans(P,c,u),h=SuperMap.Plot.PlottingUtil.coordinateTrans(P,S,u),g=[];g.push(y),g.push(h),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,g);var f=new SuperMap.Geometry.Point(0,.2*o),M=new SuperMap.Geometry.Point(0,-.4*o),d=SuperMap.Plot.PlottingUtil.coordinateTrans(P,f,u),m=SuperMap.Plot.PlottingUtil.coordinateTrans(P,M,u);(g=[]).push(d),g.push(m),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var b=new SuperMap.Geometry.Point(.2*o,-.2*o),v=new SuperMap.Geometry.Point(-.2*o,-.6*o),O=SuperMap.Plot.PlottingUtil.coordinateTrans(P,b,u),L=SuperMap.Plot.PlottingUtil.coordinateTrans(P,v,u);(g=[]).push(O),g.push(L),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var U=new SuperMap.Geometry.Point(-.2*o,-.2*o),w=new SuperMap.Geometry.Point(.2*o,-.6*o),_=SuperMap.Plot.PlottingUtil.coordinateTrans(P,U,u),T=SuperMap.Plot.PlottingUtil.coordinateTrans(P,w,u);(g=[]).push(_),g.push(T),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var x=new SuperMap.Geometry.Point(.7*e,0),E=SuperMap.Plot.PlottingUtil.coordinateTrans(a,x,u),G=SuperMap.Plot.PlottingUtil.coordinateTrans(E,c,u),V=SuperMap.Plot.PlottingUtil.coordinateTrans(E,S,u);(g=[]).push(G),g.push(V),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,g);var A=SuperMap.Plot.PlottingUtil.coordinateTrans(E,f,u),C=SuperMap.Plot.PlottingUtil.coordinateTrans(E,M,u);(g=[]).push(A),g.push(C),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var Y=SuperMap.Plot.PlottingUtil.coordinateTrans(E,b,u),I=SuperMap.Plot.PlottingUtil.coordinateTrans(E,v,u);(g=[]).push(Y),g.push(I),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var j=SuperMap.Plot.PlottingUtil.coordinateTrans(E,U,u),B=SuperMap.Plot.PlottingUtil.coordinateTrans(E,w,u);(g=[]).push(j),g.push(B),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);if(0==t){var i=SuperMap.Plot.PlottingUtil.distance(l[0],e)/o;this.getScaleValues()[0]=i}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol16202=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol16203",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.02),l.getScaleValues().push(.1),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,l);var o=this.getSubSymbolScaleValue();this.getIsEdit()||(this.getScaleValues()[0]=.3*o);for(var n=this.getScaleValues()[0]*e,i=this.getScaleValues()[1]*e,r=.05*e,a=0,p=0;p<l.length-1;p++)a+=SuperMap.Plot.PlottingUtil.distance(l[p],l[p+1]);for(var u=r,s=0;u<=a;u+=i,s++){var P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,u);if(-1===P.index)return;var c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,l[P.index],P.pt),S=[];S.push(c.pntLeft),S.push(c.pntRight),0===s?this.addScalePoint(S[0],0):1===s&&this.addScalePoint(P.pt,1);var y={surroundLineFlag:!1,lineWidthLimit:!0,weight:6*this.getStyle().weight};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S,y)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);var i=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);i=SuperMap.Plot.PlottingUtil.clearSamePts(i);var r=.05*o;if(0===t){var a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,r);if(-1===a.index)return;var p=SuperMap.Plot.PlottingUtil.distance(e,a.pt);this.getScaleValues()[0]=p/o}else if(1===t){var u=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,r);-1===u.index&&(u.index=0);var s=SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(e,i);-1===s.index&&(s.index=0,s.pt=i[1]);for(var P=SuperMap.Plot.PlottingUtil.distance(u.pt,i[u.index+1]),n=u.index+1;n<s.index;n++)P+=SuperMap.Plot.PlottingUtil.distance(i[n],i[n+1]);var c=(P+=SuperMap.Plot.PlottingUtil.distance(i[s.index],s.pt))/o;c<.01&&(c=.01),c>.95&&(c=.95),this.getScaleValues()[1]=c}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol16203=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol16500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,0===l.getScaleValues().length&&l.getScaleValues().push(.2),l.minEditPts=2,l.maxEditPts=2,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){if(this.clearComponents(),this.controlPoints.length>=this.minEditPts){for(var t=this.controlPoints[0],e=this.controlPoints[1],l=SuperMap.Plot.PlottingUtil.distance(t,e),o=this.getScaleValues()[0]*l,n=SuperMap.Plot.PlottingUtil.parallel(this.controlPoints,o/2),i=SuperMap.Plot.PlottingUtil.parallel(this.controlPoints,-o/2),r=180*SuperMap.Plot.PlottingUtil.radian(t,e)/Math.PI,a=[],p=r+90;p<=r+270;p+=10){I=SuperMap.Plot.PlottingUtil.circlePoint(t,o/2,o/2,p);a.push(I)}for(var u=[],s=r-90;s<=r+90;s+=10){I=SuperMap.Plot.PlottingUtil.circlePoint(e,o/2,o/2,s);u.push(I)}var P=[];(P=(P=(P=(P=P.concat(a)).concat(i)).concat(u)).concat(n)).push(P[0]),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,P);var c=new SuperMap.Geometry.Point(a[0].x,a[0].y);this.addScalePoint(c);var S=P,y=S[0].x,h=S[0].x,g=S[0].y,f=S[0].y;new SuperMap.Geometry.Point(S[0].x,S[0].y),new SuperMap.Geometry.Point(S[0].x,S[0].y);for(p=0;p<S.length;p++)y>S[p].x&&(y=S[p].x,new SuperMap.Geometry.Point(S[p].x,S[p].y)),h<S[p].x&&(h=S[p].x,new SuperMap.Geometry.Point(S[p].x,S[p].y)),g>S[p].y&&(g=S[p].y),f<S[p].y&&(f=S[p].y);for(var M=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(S),d=(h-y)/5,m={surroundLineFlag:!1,lineWidthLimit:!0,strokeWidth:.5,color:"#FF0000",weight:.5},b=!0,v=M.x,O=M.x;b;){b=!1;for(var L=[],U=[],w=new SuperMap.Geometry.Point(v,M.y),_=SuperMap.Plot.PlottingUtil.circlePoint(w,10,10,45),T=SuperMap.Plot.PlottingUtil.circlePoint(w,10,10,135),p=0;p<S.length-1;p++)(A=SuperMap.Plot.PlottingUtil.intersectLines(w,_,S[p],S[p+1])).isIntersectLines&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(A.intersectPoint,S[p],S[p+1])&&L.push(A.intersectPoint),(C=SuperMap.Plot.PlottingUtil.intersectLines(w,T,S[p],S[p+1])).isIntersectLines&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(C.intersectPoint,S[p],S[p+1])&&U.push(C.intersectPoint);if(1<L.length){L=this.sortPts2D(L);for(Y=0;Y<L.length-1;Y++){I=new SuperMap.Geometry.Point((L[Y].x+L[Y+1].x)/2,(L[Y].y+L[Y+1].y)/2);if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(S,I)){var x=[];x.push(L[Y]),x.push(L[Y+1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,x,m,!0)}}}if(1<U.length){U=this.sortPts2D(U);for(Y=0;Y<U.length-1;Y++){I=new SuperMap.Geometry.Point((U[Y].x+U[Y+1].x)/2,(U[Y].y+U[Y+1].y)/2);SuperMap.Plot.PlottingUtil.ptIsInPolygon(S,I)&&((j=[]).push(U[Y]),j.push(U[Y+1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,j,m,!0))}}(L.length>0||U.length>0)&&(b=!0),L=[],U=[];for(var E=new SuperMap.Geometry.Point(O,M.y),G=SuperMap.Plot.PlottingUtil.circlePoint(E,5,5,45),V=SuperMap.Plot.PlottingUtil.circlePoint(E,5,5,135),p=0;p<S.length-1;p++){var A=SuperMap.Plot.PlottingUtil.intersectLines(E,G,S[p],S[p+1]);A.isIntersectLines&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(A.intersectPoint,S[p],S[p+1])&&L.push(A.intersectPoint);var C=SuperMap.Plot.PlottingUtil.intersectLines(E,V,S[p],S[p+1]);C.isIntersectLines&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(C.intersectPoint,S[p],S[p+1])&&U.push(C.intersectPoint)}if(1<L.length){L=this.sortPts2D(L);for(Y=0;Y<L.length-1;Y+=2){I=new SuperMap.Geometry.Point((L[Y].x+L[Y+1].x)/2,(L[Y].y+L[Y+1].y)/2);SuperMap.Plot.PlottingUtil.ptIsInPolygon(S,I)&&((j=[]).push(L[Y]),j.push(L[Y+1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,j,m,!0))}}if(1<U.length){U=this.sortPts2D(U);for(var Y=0;Y<U.length-1;Y++){var I=new SuperMap.Geometry.Point((U[Y].x+U[Y+1].x)/2,(U[Y].y+U[Y+1].y)/2);if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(S,I)){var j=[];j.push(U[Y]),j.push(U[Y+1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,j,m,!0)}}}(L.length>0||U.length>0)&&(b=!0),v-=d,O+=d}}}},{key:"sortPts2D",value:function(t){for(var e=0;e<t.length;e++)for(var l=0;l<t.length-1-e;l++)if(SuperMap.Plot.PlottingUtil.equalFuzzy(t[l].x,t[l+1].x)){if(t[l].y>t[l+1].y){o=t[l];t[l]=t[l+1],t[l+1]=o}}else if(t[l].x>t[l+1].x){var o=t[l];t[l]=t[l+1],t[l+1]=o}return t}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol16500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol16700",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.2),l.getScaleValues().push(.1)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=this.getScaleValues()[0]*e,n=this.getScaleValues()[1]*e,i=new SuperMap.Geometry.Point(t[0].x,t[0].y),r=new SuperMap.Geometry.Point(t[1].x,t[1].y),a=180*SuperMap.Plot.PlottingUtil.radian(i,r)/Math.PI,p=SuperMap.Plot.PlottingUtil.circlePoint(i,o,o,a+90),u=SuperMap.Plot.PlottingUtil.circlePoint(i,n,n,a+90),s=SuperMap.Plot.PlottingUtil.circlePoint(r,o,o,a+90),P=SuperMap.Plot.PlottingUtil.circlePoint(r,n,n,a+90),c=[];c.push(u),c.push(p),c.push(s),c.push(P),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,SuperMap.Plot.PlottingUtil.clonePoints(c)),(c=[]).push(u),c.push(t[0]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,SuperMap.Plot.PlottingUtil.clonePoints(c)),(c=[]).push(P),c.push(t[1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,SuperMap.Plot.PlottingUtil.clonePoints(c));var S=new SuperMap.Geometry.Point(p.x,p.y);S.isScalePoint=!0,S.tag=0,this.addScalePoint(S);var y=new SuperMap.Geometry.Point(u.x,u.y);y.isScalePoint=!0,y.tag=1,this.addScalePoint(y)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){for(var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=0,n=0,i=(l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length-1;n<i;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);var r=SuperMap.Plot.PlottingUtil.distance(l[0],e);if(0===t){var a=r/o;a<this.getScaleValues()[1]&&(a=this.getScaleValues()[1]),this.getScaleValues()[0]=a}if(1===t){var p=r/o;this.getScaleValues()[0]<p&&(p=this.getScaleValues()[0]),this.getScaleValues()[1]=p}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol16700=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol16900",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(.1)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o,n,i=this.getScaleValues()[0]*e,r=t[0],a=t[1],p=180*SuperMap.Plot.PlottingUtil.radian(r,a)/Math.PI;SuperMap.Plot.PlottingUtil.linePnt(a,r,e+.2*e),SuperMap.Plot.PlottingUtil.linePnt(r,a,e+.2*e);o=SuperMap.Plot.PlottingUtil.paraLine(t,i,!0),n=SuperMap.Plot.PlottingUtil.paraLine(t,i,!1);var u=.1*e,s=SuperMap.Plot.PlottingUtil.circlePoint(o[0],u,u,p+135),P=SuperMap.Plot.PlottingUtil.circlePoint(n[0],u,u,p-135),c=SuperMap.Plot.PlottingUtil.circlePoint(o[o.length-1],u,u,p+45),S=SuperMap.Plot.PlottingUtil.circlePoint(n[n.length-1],u,u,p-45),y=SuperMap.Plot.PlottingUtil.linePnt(o[0],o[o.length-1],3*e/11),h=SuperMap.Plot.PlottingUtil.linePnt(o[0],o[o.length-1],4*e/11),g=SuperMap.Plot.PlottingUtil.linePnt(o[0],o[o.length-1],7*e/11),f=SuperMap.Plot.PlottingUtil.linePnt(o[0],o[o.length-1],8*e/11),M=[];M.push(s),M.push(o[0]),M.push(y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M),(M=[]).push(h),M.push(g),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M),(M=[]).push(f),M.push(o[o.length-1]),M.push(c),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M);var d=SuperMap.Plot.PlottingUtil.linePnt(n[0],n[n.length-1],3*e/11),m=SuperMap.Plot.PlottingUtil.linePnt(n[0],n[n.length-1],4*e/11),b=SuperMap.Plot.PlottingUtil.linePnt(n[0],n[n.length-1],7*e/11),v=SuperMap.Plot.PlottingUtil.linePnt(n[0],n[n.length-1],8*e/11),O=[];if(O.push(P),O.push(n[0]),O.push(d),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,O),(O=[]).push(m),O.push(b),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,O),(O=[]).push(v),O.push(n[n.length-1]),O.push(S),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,O),90<p&&p<270){var L=r;r=a,a=L,p=180*SuperMap.Plot.PlottingUtil.radian(r,a)/Math.PI}var U=new SuperMap.Geometry.Point(.25*e,i+.2*e),w=new SuperMap.Geometry.Point(.35*e,i+.2*e+.1*e),_=new SuperMap.Geometry.Point(.35*e,i+.2*e-.1*e),T=SuperMap.Plot.PlottingUtil.coordinateTrans(r,U,p),x=SuperMap.Plot.PlottingUtil.coordinateTrans(r,w,p),E=SuperMap.Plot.PlottingUtil.coordinateTrans(r,_,p),G=[];G.push(new SuperMap.Geometry.Point(x.x,x.y)),G.push(new SuperMap.Geometry.Point(T.x,T.y)),G.push(new SuperMap.Geometry.Point(E.x,E.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,G);var V=new SuperMap.Geometry.Point(.35*e,i+.2*e),A=new SuperMap.Geometry.Point(.4*e,i+.2*e+.05*e),C=new SuperMap.Geometry.Point(.4*e,i+.2*e-.05*e),Y=SuperMap.Plot.PlottingUtil.coordinateTrans(r,V,p),I=SuperMap.Plot.PlottingUtil.coordinateTrans(r,A,p),j=SuperMap.Plot.PlottingUtil.coordinateTrans(r,C,p);(G=[]).push(new SuperMap.Geometry.Point(I.x,I.y)),G.push(new SuperMap.Geometry.Point(Y.x,Y.y)),G.push(new SuperMap.Geometry.Point(j.x,j.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,G);var B=new SuperMap.Geometry.Point(.7*e,i+.2*e),R=new SuperMap.Geometry.Point(.8*e,i+.2*e+.1*e),N=new SuperMap.Geometry.Point(.8*e,i+.2*e-.1*e),D=SuperMap.Plot.PlottingUtil.coordinateTrans(r,B,p),k=SuperMap.Plot.PlottingUtil.coordinateTrans(r,R,p),z=SuperMap.Plot.PlottingUtil.coordinateTrans(r,N,p);(G=[]).push(new SuperMap.Geometry.Point(k.x,k.y)),G.push(new SuperMap.Geometry.Point(D.x,D.y)),G.push(new SuperMap.Geometry.Point(z.x,z.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,G);var F=new SuperMap.Geometry.Point(.8*e,i+.2*e),K=new SuperMap.Geometry.Point(.85*e,i+.2*e+.05*e),W=new SuperMap.Geometry.Point(.85*e,i+.2*e-.05*e),q=SuperMap.Plot.PlottingUtil.coordinateTrans(r,F,p),H=SuperMap.Plot.PlottingUtil.coordinateTrans(r,K,p),Z=SuperMap.Plot.PlottingUtil.coordinateTrans(r,W,p);(G=[]).push(new SuperMap.Geometry.Point(H.x,H.y)),G.push(new SuperMap.Geometry.Point(q.x,q.y)),G.push(new SuperMap.Geometry.Point(Z.x,Z.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,G);var X=new SuperMap.Geometry.Point(o[0].x,o[0].y);X.isScalePoint=!0,X.tag=0,this.addScalePoint(X)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);if(0==t){var i=l[0],r=l[1],a=SuperMap.Plot.PlottingUtil.projectPoint(e,i,r),p=SuperMap.Plot.PlottingUtil.distance(e,a);this.getScaleValues()[0]=p/o}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol16900=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17400",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(r=0;r<t.length-1;r++)SuperMap.Plot.PlottingUtil.distance(t[r],t[r+1]);var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(3>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e);for(var l=e[0].x,o=e[0].x,n=e[0].y,i=e[0].y,r=(new SuperMap.Geometry.Point(e[0].x,e[0].y),new SuperMap.Geometry.Point(e[0].x,e[0].y),0);r<e.length;r++)l>e[r].x&&(l=e[r].x,new SuperMap.Geometry.Point(e[r].x,e[r].y)),o<e[r].x&&(o=e[r].x,new SuperMap.Geometry.Point(e[r].x,e[r].y)),n>e[r].y&&(n=e[r].y),i<e[r].y&&(i=e[r].y);var a=(o-l)/5;a>10&&(a=10);for(var p=.2*a,u=[],r=0;r<360;r+=18){g=SuperMap.Plot.PlottingUtil.circlePoint(new SuperMap.Geometry.Point(0,0),p,p,r);u.push(g)}for(var s={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0},P=l;P<o;P+=a)for(var c=n;c<i;c+=a){var S=new SuperMap.Geometry.Point(P,c);if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(e,S)){for(var y=[],h=!1,r=0;r<u.length;r++){var g=new SuperMap.Geometry.Point(S.x+u[r].x,S.y+u[r].y);if(!SuperMap.Plot.PlottingUtil.ptIsInPolygon(e,g)){h=!0;break}y.push(g)}h||this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,y,s,!0)}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17400=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17401",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(r=0;r<t.length-1;r++)SuperMap.Plot.PlottingUtil.distance(t[r],t[r+1]);var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(3>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e);for(var l=e[0].x,o=e[0].x,n=e[0].y,i=e[0].y,r=(new SuperMap.Geometry.Point(e[0].x,e[0].y),new SuperMap.Geometry.Point(e[0].x,e[0].y),0);r<e.length;r++)l>e[r].x&&(l=e[r].x,new SuperMap.Geometry.Point(e[r].x,e[r].y)),o<e[r].x&&(o=e[r].x,new SuperMap.Geometry.Point(e[r].x,e[r].y)),n>e[r].y&&(n=e[r].y),i<e[r].y&&(i=e[r].y);var a=(o-l)/5;a>10&&(a=10);for(var p=.2*a,u=[],r=0;r<360;r+=18){f=SuperMap.Plot.PlottingUtil.circlePoint(new SuperMap.Geometry.Point(0,0),p,p,r);u.push(f)}for(var s=!0,P={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0},c=l;c<o;c+=a)for(var S=n;S<i;S+=a){var y=new SuperMap.Geometry.Point(c,S);if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(e,y)){for(var h=[],g=!1,r=0;r<u.length;r++){var f=new SuperMap.Geometry.Point(y.x+u[r].x,y.y+u[r].y);if(!SuperMap.Plot.PlottingUtil.ptIsInPolygon(e,f)){g=!0;break}h.push(f)}g||(s?this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,h,P,!0):this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,h,null,!0),s=!s)}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17401=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(r=0;r<t.length-1;r++)SuperMap.Plot.PlottingUtil.distance(t[r],t[r+1]);var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(3>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e);for(var l=e[0].x,o=e[0].x,n=e[0].y,i=e[0].y,r=(new SuperMap.Geometry.Point(e[0].x,e[0].y),new SuperMap.Geometry.Point(e[0].x,e[0].y),0);r<e.length;r++)l>e[r].x&&(l=e[r].x,new SuperMap.Geometry.Point(e[r].x,e[r].y)),o<e[r].x&&(o=e[r].x,new SuperMap.Geometry.Point(e[r].x,e[r].y)),n>e[r].y&&(n=e[r].y),i<e[r].y&&(i=e[r].y);var a={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0},p=new SuperMap.Geometry.Point((o+l)/2,(i+n)/2),u=o-l,s=i-n,P=.1*u,c=.1*s,S=new SuperMap.Geometry.Point(p.x,p.y+c),y=new SuperMap.Geometry.Point(p.x-P,p.y-c),h=new SuperMap.Geometry.Point(p.x+P,p.y-c);P=.03*u,c=.03*s;var g=new SuperMap.Geometry.Point(S.x,S.y+c),f=new SuperMap.Geometry.Point(S.x-P,S.y-c),M=new SuperMap.Geometry.Point(S.x+P,S.y-c),d=[];d.push(new SuperMap.Geometry.Point(g.x,g.y)),d.push(new SuperMap.Geometry.Point(f.x,f.y)),d.push(new SuperMap.Geometry.Point(M.x,M.y)),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,d,a);var m=new SuperMap.Geometry.Point(y.x,y.y+c),b=new SuperMap.Geometry.Point(y.x-P,y.y-c),v=new SuperMap.Geometry.Point(y.x+P,y.y-c),O=[];O.push(new SuperMap.Geometry.Point(m.x,m.y)),O.push(new SuperMap.Geometry.Point(b.x,b.y)),O.push(new SuperMap.Geometry.Point(v.x,v.y)),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,O,a);var L=new SuperMap.Geometry.Point(h.x,h.y+c),U=new SuperMap.Geometry.Point(h.x-P,h.y-c),w=new SuperMap.Geometry.Point(h.x+P,h.y-c),_=[];_.push(new SuperMap.Geometry.Point(L.x,L.y)),_.push(new SuperMap.Geometry.Point(U.x,U.y)),_.push(new SuperMap.Geometry.Point(w.x,w.y)),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,_,a)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17501",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(r=0;r<t.length-1;r++)SuperMap.Plot.PlottingUtil.distance(t[r],t[r+1]);var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(3>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e);for(var l=e[0].x,o=e[0].x,n=e[0].y,i=e[0].y,r=(new SuperMap.Geometry.Point(e[0].x,e[0].y),new SuperMap.Geometry.Point(e[0].x,e[0].y),0);r<e.length;r++)l>e[r].x&&(l=e[r].x,new SuperMap.Geometry.Point(e[r].x,e[r].y)),o<e[r].x&&(o=e[r].x,new SuperMap.Geometry.Point(e[r].x,e[r].y)),n>e[r].y&&(n=e[r].y),i<e[r].y&&(i=e[r].y);var a=new SuperMap.Geometry.Point((o+l)/2,(i+n)/2),p=.33*(o-l),u=.1*(i-n),s=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,0),P=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,180),c=[];c.push(new SuperMap.Geometry.Point(s.x,s.y)),c.push(new SuperMap.Geometry.Point(P.x,P.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c);var S=new SuperMap.Geometry.Point(a.x-3*p/7,a.y+u),y=SuperMap.Plot.PlottingUtil.circlePoint(S,u,u,60),h=SuperMap.Plot.PlottingUtil.circlePoint(S,u,u,120);(c=[]).push(new SuperMap.Geometry.Point(y.x,y.y)),c.push(new SuperMap.Geometry.Point(S.x,S.y)),c.push(new SuperMap.Geometry.Point(h.x,h.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c);var g=new SuperMap.Geometry.Point(a.x+3*p/7,a.y+u),f=SuperMap.Plot.PlottingUtil.circlePoint(g,u,u,60),M=SuperMap.Plot.PlottingUtil.circlePoint(g,u,u,120);(c=[]).push(new SuperMap.Geometry.Point(f.x,f.y)),c.push(new SuperMap.Geometry.Point(g.x,g.y)),c.push(new SuperMap.Geometry.Point(M.x,M.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17501=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17600",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0},n=this.getScaleValues()[0]*e,i=[],r=[];i=SuperMap.Plot.PlottingUtil.paraLine(t,n,!0),r=SuperMap.Plot.PlottingUtil.paraLine(t,n,!1);var a=new SuperMap.Geometry.Point(i[0].x,i[0].y);a.isScalePoint=!0,a.tag=0,this.addScalePoint(a),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r);var p=new SuperMap.Geometry.Point(t[0].x,t[0].y),u=new SuperMap.Geometry.Point(t[1].x,t[1].y),s=180*SuperMap.Plot.PlottingUtil.radian(p,u)/Math.PI,P=new SuperMap.Geometry.Point(.3*e,0),c=SuperMap.Plot.PlottingUtil.coordinateTrans(p,P,s),S=new SuperMap.Geometry.Point(0,.7*n),y=SuperMap.Plot.PlottingUtil.coordinateTrans(c,S,s),h=[];h.push(new SuperMap.Geometry.Point(c.x,c.y)),h.push(new SuperMap.Geometry.Point(y.x,y.y)),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,h,o);var g=new SuperMap.Geometry.Point(.7*n,.7*n),f=new SuperMap.Geometry.Point(-.7*n,.7*n),M=SuperMap.Plot.PlottingUtil.coordinateTrans(c,g,s),d=SuperMap.Plot.PlottingUtil.coordinateTrans(c,f,s);(h=[]).push(new SuperMap.Geometry.Point(M.x,M.y)),h.push(new SuperMap.Geometry.Point(d.x,d.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h);var m=new SuperMap.Geometry.Point(.7*e,0),b=SuperMap.Plot.PlottingUtil.coordinateTrans(p,m,s),v=new SuperMap.Geometry.Point(.7*n,.7*n),O=new SuperMap.Geometry.Point(.7*n,-.7*n),L=new SuperMap.Geometry.Point(-.7*n,-.7*n),U=new SuperMap.Geometry.Point(-.7*n,.7*n),w=SuperMap.Plot.PlottingUtil.coordinateTrans(b,v,s),_=SuperMap.Plot.PlottingUtil.coordinateTrans(b,O,s),T=SuperMap.Plot.PlottingUtil.coordinateTrans(b,L,s),x=SuperMap.Plot.PlottingUtil.coordinateTrans(b,U,s);(h=[]).push(new SuperMap.Geometry.Point(w.x,w.y)),h.push(new SuperMap.Geometry.Point(_.x,_.y)),h.push(new SuperMap.Geometry.Point(T.x,T.y)),h.push(new SuperMap.Geometry.Point(x.x,x.y)),h.push(new SuperMap.Geometry.Point(w.x,w.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h);var E=new SuperMap.Geometry.Point(.3*n,.3*n),G=new SuperMap.Geometry.Point(.3*n,-.3*n),V=new SuperMap.Geometry.Point(-.3*n,-.3*n),A=new SuperMap.Geometry.Point(-.3*n,.3*n),C=SuperMap.Plot.PlottingUtil.coordinateTrans(b,E,s),Y=SuperMap.Plot.PlottingUtil.coordinateTrans(b,G,s),I=SuperMap.Plot.PlottingUtil.coordinateTrans(b,V,s),j=SuperMap.Plot.PlottingUtil.coordinateTrans(b,A,s);(h=[]).push(new SuperMap.Geometry.Point(C.x,C.y)),h.push(new SuperMap.Geometry.Point(Y.x,Y.y)),h.push(new SuperMap.Geometry.Point(I.x,I.y)),h.push(new SuperMap.Geometry.Point(j.x,j.y)),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,h,o)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);if(0==t){var i=l[0],r=l[1],a=SuperMap.Plot.PlottingUtil.projectPoint(e,i,r),p=SuperMap.Plot.PlottingUtil.distance(e,a);this.getScaleValues()[0]=p/o}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17600=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17700",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=.02*e,n=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);n=SuperMap.Plot.PlottingUtil.clearSamePts(n);var i=[],r=[];i=SuperMap.Plot.PlottingUtil.paraLine(n,.5*o,!0),r=SuperMap.Plot.PlottingUtil.paraLine(n,.5*o,!1),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);for(var a=0,l=0;l<r.length-1;l++)a+=SuperMap.Plot.PlottingUtil.distance(r[l],r[l+1]);for(var p=a/19,l=0;l<18;l++){var u=SuperMap.Plot.PlottingUtil.findPointInPolyLine(r,p);if(-1!==u.index){if(0==l%2){for(var s=[],P=0;P<u.index+1;P++)s.push(r[P].clone());s.push(u.pt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s)}var c=[];c.push(u.pt);for(var S=u.index+1;S<r.length;S++)c.push(r[S]);r=(r=[]).concat(c)}}r.length>1&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17700=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(17)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="急",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17704",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol17704=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(18)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17801",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=new SuperMap.Geometry.Point(t[t.length-1].x,t[t.length-1].y),o=0;2==t.length?this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t):(this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t),o=SuperMap.Plot.PlottingUtil.radian(e,l)*this.RTOD);var n=SuperMap.Plot.PlottingUtil.distance(e,l),i=[],r=SuperMap.Plot.PlottingUtil.circlePoint(e,.1*n,.1*n,0);i.push(t[0].clone()),i.push(r.clone()),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,i);var a=SuperMap.Plot.PlottingUtil.circlePoint(e,.78*n,.78*n,o+180),p=SuperMap.Plot.PlottingUtil.circlePoint(e,1.26*n,1.26*n,o+180);(i=[]).push(a.clone()),i.push(p.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var u=SuperMap.Plot.PlottingUtil.circlePoint(e,.15*n,.15*n,o+180),s=SuperMap.Plot.PlottingUtil.circlePoint(e,.58*n,.58*n,o+180);(i=[]).push(u.clone()),i.push(s.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var P=SuperMap.Plot.PlottingUtil.circlePoint(e,.15*n,.15*n,o),c=SuperMap.Plot.PlottingUtil.circlePoint(e,.58*n,.58*n,o);(i=[]).push(P.clone()),i.push(c.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var S=SuperMap.Plot.PlottingUtil.circlePoint(e,.78*n,.78*n,o),y=SuperMap.Plot.PlottingUtil.circlePoint(e,1.26*n,1.26*n,o);(i=[]).push(S.clone()),i.push(y.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17801=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17802",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=new SuperMap.Geometry.Point(t[t.length-1].x,t[t.length-1].y),o=0;2==t.length?this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t):(this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t),o=SuperMap.Plot.PlottingUtil.radian(e,l)*this.RTOD);var n=SuperMap.Plot.PlottingUtil.distance(e,l),i=[],r=SuperMap.Plot.PlottingUtil.circlePoint(e,.15*n,.15*n,o),a=SuperMap.Plot.PlottingUtil.circlePoint(e,.08*n,.08*n,o+90),p=SuperMap.Plot.PlottingUtil.circlePoint(e,.15*n,.15*n,o+180),u=SuperMap.Plot.PlottingUtil.circlePoint(e,.08*n,.08*n,o+270);i.push(r.clone()),i.push(a.clone()),i.push(p.clone()),i.push(u.clone()),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,i);var s=SuperMap.Plot.PlottingUtil.circlePoint(e,.78*n,.78*n,o+180),P=SuperMap.Plot.PlottingUtil.circlePoint(e,1.26*n,1.26*n,o+180);(i=[]).push(s.clone()),i.push(P.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var c=SuperMap.Plot.PlottingUtil.circlePoint(e,.15*n,.15*n,o+180),S=SuperMap.Plot.PlottingUtil.circlePoint(e,.58*n,.58*n,o+180);(i=[]).push(c.clone()),i.push(S.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var y=SuperMap.Plot.PlottingUtil.circlePoint(e,.15*n,.15*n,o),h=SuperMap.Plot.PlottingUtil.circlePoint(e,.58*n,.58*n,o);(i=[]).push(y.clone()),i.push(h.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var g=SuperMap.Plot.PlottingUtil.circlePoint(e,.78*n,.78*n,o),f=SuperMap.Plot.PlottingUtil.circlePoint(e,1.26*n,1.26*n,o);(i=[]).push(g.clone()),i.push(f.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17802=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17803",l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.2)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(.2)),2==t.length?this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t):this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t);var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=0;if(0!=(l=2==t.length?2*SuperMap.Plot.PlottingUtil.distance(t[0],t[1]):SuperMap.Plot.PlottingUtil.distance(t[0],t[1])+SuperMap.Plot.PlottingUtil.distance(t[0],t[2]))){var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2],r=new SuperMap.Geometry.Point(e.x+l*o,e.y+l*n),a=l*i,p=new SuperMap.Geometry.Point(-.5*a,.25*a),u=new SuperMap.Geometry.Point(-.4*a,.125*a),s=new SuperMap.Geometry.Point(.4*a,.125*a),P=new SuperMap.Geometry.Point(.5*a,.25*a),c=SuperMap.Plot.PlottingUtil.coordinateTrans(r,p,0),S=SuperMap.Plot.PlottingUtil.coordinateTrans(r,u,0),y=SuperMap.Plot.PlottingUtil.coordinateTrans(r,s,0),h=SuperMap.Plot.PlottingUtil.coordinateTrans(r,P,0),g=[];g.push(c.clone()),g.push(S.clone()),g.push(y.clone()),g.push(h.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var f=new SuperMap.Geometry.Point(-.5*a,-.25*a),M=new SuperMap.Geometry.Point(-.4*a,-.125*a),d=new SuperMap.Geometry.Point(.4*a,-.125*a),m=new SuperMap.Geometry.Point(.5*a,-.25*a),b=SuperMap.Plot.PlottingUtil.coordinateTrans(r,f,0),v=SuperMap.Plot.PlottingUtil.coordinateTrans(r,M,0),O=SuperMap.Plot.PlottingUtil.coordinateTrans(r,d,0),L=SuperMap.Plot.PlottingUtil.coordinateTrans(r,m,0);(g=[]).push(b.clone()),g.push(v.clone()),g.push(O.clone()),g.push(L.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g),this.clearScalePoints();var U=new SuperMap.Geometry.Point(r.x+.1*a,r.y);U.isScalePoint=!0,U.tag=0,this.addScalePoint(U);var w=SuperMap.Plot.PlottingUtil.circlePoint(r,.25*a,.25*a,90);w.isScalePoint=!0,w.tag=1,this.addScalePoint(w)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=(l=SuperMap.Plot.PlottingUtil.clearSamePts(l))[0].clone(),n=0;if(0==(n=2==l.length?2*SuperMap.Plot.PlottingUtil.distance(l[0],l[1]):SuperMap.Plot.PlottingUtil.distance(l[0],l[1])+SuperMap.Plot.PlottingUtil.distance(l[0],l[2])))return;if(0==t){var i=(u=this.getScaleValues()[2])*n,r=(e.x-.1*i-o.x)/n;this.getScaleValues()[0]=r;a=(e.y-o.y)/n;this.getScaleValues()[1]=a}else if(1==t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(o.x+n*r,o.y+n*a),u=4*(i=SuperMap.Plot.PlottingUtil.distance(p,e))/n;this.getScaleValues()[2]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17803=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(9)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17805",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(.1)),t.length==this.minEditPts?this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t):this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t);var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=0;if(0!=(l=t.length==this.minEditPts?2*SuperMap.Plot.PlottingUtil.distance(t[0],t[1]):SuperMap.Plot.PlottingUtil.distance(t[0],t[1])+SuperMap.Plot.PlottingUtil.distance(t[0],t[2]))){var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2],r=new SuperMap.Geometry.Point(e.x+l*o,e.y+l*n),a=3*(l*i),p=new SuperMap.Geometry.Point(-.5*a,.3*a),u=new SuperMap.Geometry.Point(-.5*a,-.3*a),s=new SuperMap.Geometry.Point(.5*a,-.3*a),P=new SuperMap.Geometry.Point(.5*a,.3*a),c=SuperMap.Plot.PlottingUtil.coordinateTrans(r,p,0),S=SuperMap.Plot.PlottingUtil.coordinateTrans(r,u,0),y=SuperMap.Plot.PlottingUtil.coordinateTrans(r,s,0),h=SuperMap.Plot.PlottingUtil.coordinateTrans(r,P,0),g=[];g.push(c.clone()),g.push(S.clone()),g.push(y.clone()),g.push(h.clone()),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,g);var f=new SuperMap.Geometry.Point(-.3*a,.3*a),M=new SuperMap.Geometry.Point(-.3*a,.5*a),d=SuperMap.Plot.PlottingUtil.coordinateTrans(r,f,0),m=SuperMap.Plot.PlottingUtil.coordinateTrans(r,M,0);(g=[]).push(d.clone()),g.push(m.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var b=new SuperMap.Geometry.Point(-.3*a,-.3*a),v=new SuperMap.Geometry.Point(-.3*a,-.5*a),O=SuperMap.Plot.PlottingUtil.coordinateTrans(r,b,0),L=SuperMap.Plot.PlottingUtil.coordinateTrans(r,v,0);(g=[]).push(O.clone()),g.push(L.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var U=new SuperMap.Geometry.Point(.3*a,.3*a),w=new SuperMap.Geometry.Point(.3*a,.5*a),_=SuperMap.Plot.PlottingUtil.coordinateTrans(r,U,0),T=SuperMap.Plot.PlottingUtil.coordinateTrans(r,w,0);(g=[]).push(_.clone()),g.push(T.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var x=new SuperMap.Geometry.Point(.3*a,-.3*a),E=new SuperMap.Geometry.Point(.3*a,-.5*a),G=SuperMap.Plot.PlottingUtil.coordinateTrans(r,x,0),V=SuperMap.Plot.PlottingUtil.coordinateTrans(r,E,0);(g=[]).push(G.clone()),g.push(V.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g),this.clearScalePoints();var A=new SuperMap.Geometry.Point(r.x+.1*a,r.y);A.isScalePoint=!0,A.tag=0,this.addScalePoint(A);var C=SuperMap.Plot.PlottingUtil.circlePoint(r,.5*a,.5*a,90);C.isScalePoint=!0,C.tag=1,this.addScalePoint(C)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17805=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(9)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17806",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(.1));var e,l=this.getScaleValues()[0],o=this.getScaleValues()[1],n=this.getScaleValues()[2],i=0,r=0;if(t.length==this.minEditPts){this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t);var a=new SuperMap.Geometry.Point(t[0].x,t[0].y),p=new SuperMap.Geometry.Point(t[1].x,t[1].y),u=SuperMap.Plot.PlottingUtil.distance(a,p);i=2*u,e=new SuperMap.Geometry.Point(a.x+i*l,a.y+i*o);var s=2*u*n/.28/2;r=s;P=SuperMap.Plot.PlottingUtil.circlePoint(e,s,s,0);(g=[]).push(e.clone()),g.push(P.clone()),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,g)}else{this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t);var a=new SuperMap.Geometry.Point(t[0].x,t[0].y),p=new SuperMap.Geometry.Point(t[1].x,t[1].y),P=new SuperMap.Geometry.Point(t[2].x,t[2].y);i=SuperMap.Plot.PlottingUtil.distance(a,p)+SuperMap.Plot.PlottingUtil.distance(a,P),e=new SuperMap.Geometry.Point(a.x+i*l,a.y+i*o);var c=i*n/.21/2,S=i*n/.38/2;r=c;var y=SuperMap.Plot.PlottingUtil.circlePoint(e,c,c,0),h=SuperMap.Plot.PlottingUtil.circlePoint(e,S,S,90),g=[];g.push(e.clone()),g.push(y.clone()),g.push(h.clone()),this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,g)}this.clearScalePoints();var f=new SuperMap.Geometry.Point(e.x+.1*i,e.y);f.isScalePoint=!0,f.tag=0,this.addScalePoint(f);var M=SuperMap.Plot.PlottingUtil.circlePoint(e,r,r,90);M.isScalePoint=!0,M.tag=1,this.addScalePoint(M)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=(l=SuperMap.Plot.PlottingUtil.clearSamePts(l))[0].clone(),n=0;if(0==(n=2==l.length?2*SuperMap.Plot.PlottingUtil.distance(l[0],l[1]):SuperMap.Plot.PlottingUtil.distance(l[0],l[1])+SuperMap.Plot.PlottingUtil.distance(l[0],l[2])))return;if(0==t){var i=(u=this.getScaleValues()[2])*n,r=(e.x-.1*n-o.x)/n;this.getScaleValues()[0]=r;a=(e.y-o.y)/n;this.getScaleValues()[1]=a}else if(1==t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(o.x+n*r,o.y+n*a),i=SuperMap.Plot.PlottingUtil.distance(p,e),u=.1;u=2===l.length?.56*i/n:.42*i/n,this.getScaleValues()[2]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17806=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol20300",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(.1),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){1!==this.getScaleValues().length&&(this.clearScaleValues(),this.getScaleValues().push(.1)),this.clearComponents(),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,this.controlPoints);var e=this.getScaleValues()[0],l=SuperMap.Plot.PlottingUtil.polylineDistance(t),o=l*e,n=l*this.getSubSymbolScaleValue()*.3;o<2*n&&(n=.5*o);for(var i={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0},r=0,a=o;a<l-n;a+=o){var p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a,t);if(p.bfind){var u=p.pts,s=[];s.push(u);var P=new SuperMap.Geometry.Point(u.x+n,u.y);s.push(P),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,s,i),0===r&&this.addScalePoint(u,0),r++}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t){for(var n=-1,i=0,r=new SuperMap.Geometry.Point,a=0;a<l.length-1;a++){var p=[];p.push(l[a]),p.push(l[a+1]);var u=SuperMap.Plot.PlottingUtil.projectPoint(e,l[a],l[a+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(u,p).isOnPolyLine){var s=SuperMap.Plot.PlottingUtil.distance(e,u);-1===n?(n=a,r=u,i=s):i>s&&(n=a,r=u,i=s)}}(-1===n||n>l.length-1)&&(n=0,r=l[0]),-1===n&&Math.ceil(e.x,1)<=Math.ceil(l[0].x,1)?(n=0,r=l[0]):-1===n&&n===l[l.length-1]&&(n=0,r=l[0]),-1===n&&Math.ceil(e.x,1)>=Math.ceil(l[l.length-1].x,1)?(n=l.length-1,r=l[l.length-1]):-1!==n&&n!==l.length-1||(n=l.length-1,r=l[l.length-1]);for(var P=0,a=0;a<n;a++)P+=SuperMap.Plot.PlottingUtil.distance(l[a],l[a+1]);var c=new SuperMap.Geometry.Point(l[n].x,l[n].y),S=(P+=SuperMap.Plot.PlottingUtil.distance(c,r))/o;S>=.98&&(S=.98),S<=.02&&(S=.02),this.getScaleValues()[0]=S}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol20300=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol20301",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.2),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length!==this.minEditPts&&(this.clearScaleValues(),this.getScaleValues().push(.2),this.getScaleValues().push(0)),this.clearComponents(),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,this.controlPoints);var e,l=SuperMap.Plot.PlottingUtil.polylineDistance(t),o=new SuperMap.Geometry.Point(t[0].x,t[0].y),n=new SuperMap.Geometry.Point(t[1].x,t[1].y),i=180*SuperMap.Plot.PlottingUtil.radian(o,n)/Math.PI,r=new SuperMap.Geometry.Point((o.x+n.x)/2,(o.y+n.y)/2),a=this.getScaleValues()[0]*l;e=0==this.getScaleValues()[1]?SuperMap.Plot.PlottingUtil.circlePoint(r,a,a,i+90):SuperMap.Plot.PlottingUtil.circlePoint(r,a,a,i+270);var p={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[r,e]);var u=.02*SuperMap.Plot.PlottingUtil.distance(t[0],t[t.length-1]),s=new SuperMap.Geometry.Point((o.x+r.x)/2,(o.y+r.y)/2),P=[s,new SuperMap.Geometry.Point(s.x,s.y+u)];this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,P,p,!0);var c=new SuperMap.Geometry.Point((n.x+r.x)/2,(n.y+r.y)/2);P=[c,new SuperMap.Geometry.Point(c.x,c.y+u)],this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,P,p,!0);var S=new SuperMap.Geometry.Point(e.x,e.y);S.isScalePoint=!0,S.tag=0,this.addScalePoint(S)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;if(0!==t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=new SuperMap.Geometry.Point(l[0].x,l[0].y),n=new SuperMap.Geometry.Point(l[1].x,l[1].y),i=SuperMap.Plot.PlottingUtil.distance(o,n);if(0===i)return;var r=new SuperMap.Geometry.Point((o.x+n.x)/2,(o.y+n.y)/2);if(0===t){var a=SuperMap.Plot.PlottingUtil.distance(e,r)/i;this.getScaleValues()[0]=a,SuperMap.Plot.PlottingUtil.pointIsRightToLine(o,n,e)?this.getScaleValues()[1]=1:this.getScaleValues()[1]=0}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol20301=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21400",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=99999,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t,!1),l={surroundLineFlag:!1};[].push(e[e.length-1]);for(var o=this.getSubSymbolScaleValue()*SuperMap.Plot.PlottingUtil.polylineDistance(t),n=t[t.length-1],i=SuperMap.Plot.PlottingUtil.distance(n,e[e.length-1]);i<1.5*o;)e.pop(),i=SuperMap.Plot.PlottingUtil.distance(n,e[e.length-1]);e.push(n),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var r=e[e.length-2],a=SuperMap.Plot.PlottingUtil.radian(n,r)*this.RTOD,p=SuperMap.Plot.PlottingUtil.circlePoint(n,o,o,a+22.5),u=SuperMap.Plot.PlottingUtil.circlePoint(n,o,o,a-22.5),s=[];s.push(p),s.push(n),s.push(u);var P={surroundLineFlag:!1,fillLimit:!0,fillColor:l.strokeColor,lineTypeLimit:!0,fill:!0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,s,P)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol21400=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21401",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.03),l.getScaleValues().push(.4),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.03),this.getScaleValues().push(.4),this.getScaleValues().push(0));var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t,!1);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);this.addArrow(e);var o=this.getScaleValues()[1],n=l*(1-o)*.5,i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(n,e);if(i.bfind){this.getIsEdit()||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());var r,a=this.getScaleValues()[0],p=SuperMap.Plot.PlottingUtil.polylineDistance(t)*a,u=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(p,e[i.index],i.pts),s=this.getScaleValues()[2];0===s?r=new SuperMap.Geometry.Point(u.pntLeft.x,u.pntLeft.y):1===s&&(r=new SuperMap.Geometry.Point(u.pntRight.x,u.pntRight.y));var P=[];P.push(r),P.push(i.pts);var c={lineTypeLimit:!0};this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,P,c);var S,y=l*(.5+.5*o),h=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(y,e);if(h.bfind){var g=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(p,e[h.index],h.pts);0===s?S=new SuperMap.Geometry.Point(g.pntLeft.x,g.pntLeft.y):1===s&&(S=new SuperMap.Geometry.Point(g.pntRight.x,g.pntRight.y)),this.addScalePoint(S,0);var f=[];f.push(S),f.push(h.pts);var M={lineTypeLimit:!0};this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,f,M)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l,!1);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=n*(.5+.5*this.getScaleValues()[1]),r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(i,o);if(!r.bfind)return;var a=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(1,o[r.index],r.pts),p=SuperMap.Plot.PlottingUtil.pointIsRightToLine(o[r.index],o[r.index+1],e);this.getScaleValues()[2]=p?0:1;var u;u=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,new SuperMap.Geometry.Point(a.pntLeft.x,a.pntLeft.y),new SuperMap.Geometry.Point(a.pntRight.x,a.pntRight.y));var s=SuperMap.Plot.PlottingUtil.distance(u.projectPoint,new SuperMap.Geometry.Point(r.pts.x,r.pts.y));this.getScaleValues()[0]=s/n}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol21401=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.02),l.getScaleValues().push(.1),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.02),this.getScaleValues().push(.1),this.getScaleValues().push(0));var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t,!1);e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addArrow(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(0!==l){if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=.5*o}for(var n=this.getScaleValues()[0],i=SuperMap.Plot.PlottingUtil.polylineDistance(e),r=n*i,a=this.getScaleValues()[1]*i,p=0,u=.01*i,s=0;s<=l-a-u;s+=a){p=s+u;var P=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(p,e);if(P.bfind){var c=[],S=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r,e[P.index],P.pts);c.push(new SuperMap.Geometry.Point(S.pntLeft.x,S.pntLeft.y)),c.push(new SuperMap.Geometry.Point(S.pntRight.x,S.pntRight.y));var y=this.getScaleValues()[2];if(SuperMap.Plot.PlottingUtil.equalFuzzy(0,s)){var h;SuperMap.Plot.PlottingUtil.equalFuzzy(y,0)?((h=c[0]).isScalePoint=!0,h.tag=0,this.addScalePoint(h)):SuperMap.Plot.PlottingUtil.equalFuzzy(y,1)&&((h=c[1]).isScalePoint=!0,h.tag=0,this.addScalePoint(h))}else SuperMap.Plot.PlottingUtil.equalFuzzy(a,s)&&((h=new SuperMap.Geometry.Point(P.pts.x,P.pts.y)).isScalePoint=!0,h.tag=1,this.addScalePoint(h));this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c)}}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!==t&&1!==t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l,!1);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n,i=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t){var r=this.getScaleValues()[0]*i,a=.01*i,p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a,o);if(!p.bfind)return;var u;u=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r,o[p.index],p.pts).pntLeft;var s=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,u,p.pts),P=SuperMap.Plot.PlottingUtil.distance(s.projectPoint,p.pts),c=new SuperMap.Geometry.Point(u.x-p.pts.x,u.y-p.pts.y),S=new SuperMap.Geometry.Point(s.projectPoint.x-p.pts.x,s.projectPoint.y-p.pts.y);c.x*S.x+c.y*S.y>=0?this.getScaleValues()[2]=0:this.getScaleValues()[2]=1,this.getScaleValues()[0]=P/i}else if(1===t){for(var y,h=-1,g=0,f=o.length-1;g<f;g++){var M=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,o[g],o[g+1]);if(M.isOnline){y=M.projectPoint,h=g;break}}if(-1===h)this.getScaleValues()[1]=.02;else{for(var d=[],g=0;g<h+1;g++)d.push(o[g]);d.push(y),(n=SuperMap.Plot.PlottingUtil.polylineDistance(d)/i)>.4&&(n=.4),this.getScaleValues()[1]=n}}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol21500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(6)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return 0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21502",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol21502=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(6)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return 0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21503",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol21503=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(6)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return 0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21504",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol21504=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21800",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.2),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<1&&this.getScaleValues().push(.2);var e=SuperMap.Plot.PlottingUtil.polylineDistance(t)*this.getScaleValues()[0],l=.5*e,o=new SuperMap.Geometry.Point(t[0].x,t[0].y),n=new SuperMap.Geometry.Point(t[1].x,t[1].y),i=180*SuperMap.Plot.PlottingUtil.radian(o,n)/Math.PI,r=SuperMap.Plot.PlottingUtil.circlePoint(o,e,e,i+90),a=SuperMap.Plot.PlottingUtil.circlePoint(o,e,e,i+270),p=SuperMap.Plot.PlottingUtil.circlePoint(r,l,l,i),u=SuperMap.Plot.PlottingUtil.circlePoint(a,l,l,i),s=[];s.push(u),s.push(a),s.push(r),s.push(p),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s);var P=SuperMap.Plot.PlottingUtil.circlePoint(n,e,e,i+90),c=SuperMap.Plot.PlottingUtil.circlePoint(n,e,e,i+270),S=SuperMap.Plot.PlottingUtil.circlePoint(P,l,l,i+180),y=SuperMap.Plot.PlottingUtil.circlePoint(c,l,l,i+180);(s=[]).push(S),s.push(P),s.push(c),s.push(y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s),this.addScalePoint(r)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.distance(e,l[0])/o;this.getScaleValues()[0]=n}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol21800=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21900",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}this.getScaleValues().length<1&&this.getScaleValues().push(.5);for(var n=this.getLinePts(e,this.getScaleValues()[0]),i=[],r=[],a=0;a<=n.startIndex;a++)i.push(e[a]);if(i.push(n.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i),n.endIndex<=e.length){r.push(n.endPt);for(a=n.endIndex+1;a<=e.length-1;a++)r.push(e[a]);this.addArrow(r)}var p,u,s,P,c,S,y,h,g,f,M,d,m,b=n.startPt.clone(),v=n.endPt.clone(),O=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),L=SuperMap.Plot.PlottingUtil.distance(b,v),U=SuperMap.Plot.PlottingUtil.radian(b,v)*this.RTOD;p=new SuperMap.Geometry.Point(0,0),u=new SuperMap.Geometry.Point(0,0),s=new SuperMap.Geometry.Point(0,0),P=new SuperMap.Geometry.Point(0,0),c=new SuperMap.Geometry.Point(0,0),S=new SuperMap.Geometry.Point(0,0),y=new SuperMap.Geometry.Point(0,0),h=new SuperMap.Geometry.Point(0,0),g=new SuperMap.Geometry.Point(0,0),f=new SuperMap.Geometry.Point(0,0),M=new SuperMap.Geometry.Point(0,0),d=new SuperMap.Geometry.Point(0,0),m=new SuperMap.Geometry.Point(0,0),b.x>=v.x?(p.x=.25*L,p.y=.25*-L,u.x=.5*-L,u.y=.25*-L,s.x=.5*-L,s.y=.25*L,P.x=.5*L,P.y=.25*L,c.x=.5*L,c.y=0,S.x=.25*-L,S.y=.125*-L,y.x=0,y.y=.125*L,h.x=0,h.y=.125*-L,g.x=.25*L,g.y=.2*L,f.x=.25*-L,f.y=.25*-L,M.x=.375*-L,M.y=.5*-L,d.x=.02*-L,d.y=.25*-L,m.x=.1*L,m.y=.5*-L):(p.x=.25*L,p.y=.25*L,u.x=.5*-L,u.y=.25*L,s.x=.5*-L,s.y=.25*-L,P.x=.5*L,P.y=.25*-L,c.x=.5*L,c.y=0,S.x=.25*L,S.y=.125*-L,y.x=0,y.y=.125*L,h.x=0,h.y=.125*-L,g.x=.25*-L,g.y=.125*L,f.x=.25*-L,f.y=.25*L,M.x=.375*-L,M.y=.5*L,d.x=.02*L,d.y=.25*L,m.x=.15*L,m.y=.5*L);var w=[],_=[],T=[],x=[],E=[],G=SuperMap.Plot.PlottingUtil.coordinateTrans(O,p,U),V=SuperMap.Plot.PlottingUtil.coordinateTrans(O,u,U),A=SuperMap.Plot.PlottingUtil.coordinateTrans(O,s,U),C=SuperMap.Plot.PlottingUtil.coordinateTrans(O,P,U),Y=SuperMap.Plot.PlottingUtil.coordinateTrans(O,c,U),I=SuperMap.Plot.PlottingUtil.coordinateTrans(O,S,U),j=SuperMap.Plot.PlottingUtil.coordinateTrans(O,y,U),B=SuperMap.Plot.PlottingUtil.coordinateTrans(O,h,U),R=SuperMap.Plot.PlottingUtil.coordinateTrans(O,g,U),N=SuperMap.Plot.PlottingUtil.coordinateTrans(O,f,U),D=SuperMap.Plot.PlottingUtil.coordinateTrans(O,M,U),k=SuperMap.Plot.PlottingUtil.coordinateTrans(O,d,U),z=SuperMap.Plot.PlottingUtil.coordinateTrans(O,m,U);w.push(G),w.push(V),w.push(A),w.push(C),w.push(Y),_.push(I),_.push(j),_.push(B),_.push(R),T.push(N),T.push(D),x.push(k),x.push(z),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,w,null,!0),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,_,null,!0),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,T,null,!0),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,x,null,!0);var F=.3*SuperMap.Plot.PlottingUtil.distance(B,R),K=SuperMap.Plot.PlottingUtil.linePnt(R,B,F),W=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.3*F,R,K);E.push(W.pntLeft),E.push(R),E.push(W.pntRight);var q={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,E,q,!0);var H=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),Z=SuperMap.Plot.PlottingUtil.circlePoint(H.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,U+90);this.addScalePoint(Z,0)}}},{key:"getLinePts",value:function(t,e){var l=new Object;if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"modifyPoint",value:function(t,e){if(0===t&&!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o),r=2*SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.5?r:.5}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol21900=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(7)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol22103",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol22103=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol22200",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[];t.length<=3?e=SuperMap.Plot.Primitives.getKendyShapePts(t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e);var l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=this.getDefaultSubSymbolSize()/o;(n>.3||n<=0)&&(n=.3);var i=o*n,r=[];r.push(new SuperMap.Geometry.Point(l.x,l.y)),r.push(new SuperMap.Geometry.Point(l.x+i,l.y)),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,r);var a=[];a.push(new SuperMap.Geometry.Point(l.x,l.y+.8*i)),a.push(new SuperMap.Geometry.Point(l.x,l.y-.8*i)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a);var p=[];p.push(new SuperMap.Geometry.Point(l.x+.8*i,l.y)),p.push(new SuperMap.Geometry.Point(l.x-.8*i,l.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol22200=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol23700",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[];3>=t.length?(e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t),e=SuperMap.Plot.PlottingUtil.clearSamePts(e)):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e);var l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=this.getDefaultSubSymbolSize()/o;(n>.3||n<=0)&&(n=.3);var i=o*n*.5,r=[];r.push(new SuperMap.Geometry.Point(0,i)),r.push(new SuperMap.Geometry.Point(-i,0)),r.push(new SuperMap.Geometry.Point(0,-i));var a=[];a.push(new SuperMap.Geometry.Point(i,i)),a.push(new SuperMap.Geometry.Point(0,0)),a.push(new SuperMap.Geometry.Point(i,-i));for(var p=new SuperMap.Geometry.Point(-3*i,2*i),u=SuperMap.Plot.PlottingUtil.coordinateTrans(l,p,0),s=[],P=[],c=0;c<3;c++)s.push(new SuperMap.Geometry.Point(r[c].x+u.x,r[c].y+u.y)),P.push(new SuperMap.Geometry.Point(a[c].x+u.x,a[c].y+u.y));this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P);for(var S=new SuperMap.Geometry.Point(3*i,2*i),y=SuperMap.Plot.PlottingUtil.coordinateTrans(l,S,0),h=[],g=[],c=0;c<3;c++)h.push(new SuperMap.Geometry.Point(r[c].x+y.x,r[c].y+y.y)),g.push(new SuperMap.Geometry.Point(a[c].x+y.x,a[c].y+y.y));this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var f=new SuperMap.Geometry.Point(-4*i,-2*i),M=SuperMap.Plot.PlottingUtil.coordinateTrans(l,f,0);h=[],g=[];for(c=0;c<3;c++)h.push(new SuperMap.Geometry.Point(r[c].x+M.x,r[c].y+M.y)),g.push(new SuperMap.Geometry.Point(a[c].x+M.x,a[c].y+M.y));this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var d=new SuperMap.Geometry.Point(0,-2*i),m=SuperMap.Plot.PlottingUtil.coordinateTrans(l,d,0);h=[],g=[];for(c=0;c<3;c++)h.push(new SuperMap.Geometry.Point(r[c].x+m.x,r[c].y+m.y)),g.push(new SuperMap.Geometry.Point(a[c].x+m.x,a[c].y+m.y));this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var b=new SuperMap.Geometry.Point(4*i,-2*i),v=SuperMap.Plot.PlottingUtil.coordinateTrans(l,b,0);h=[],g=[];for(c=0;c<3;c++)h.push(new SuperMap.Geometry.Point(r[c].x+v.x,r[c].y+v.y)),g.push(new SuperMap.Geometry.Point(a[c].x+v.x,a[c].y+v.y));this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol23700=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol23901",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues().push(.333333),l.getScaleValues().push(.333333),l.getScaleValues().push(.125),l.getScaleValues().push(90)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[];if(2==t.length){var l=new SuperMap.Geometry.Point(t[0].x,t[0].y),o=new SuperMap.Geometry.Point(t[1].x,t[1].y),n=SuperMap.Plot.PlottingUtil.distance(l,o),i=180*SuperMap.Plot.PlottingUtil.radian(l,o)/Math.PI,r=SuperMap.Plot.PlottingUtil.circlePoint(l,n,n,i+60);e.push(t[0]),e.push(o),e.push(r),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e)}else{this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);for(var a=0;a<t.length;a++)e.push(t[a])}var p=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e);e.push(e[0]);var u=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var s=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getScaleValues()[2]=2*s*this.getSubSymbolScaleValue()/u}var P=this.getScaleValues()[0],c=this.getScaleValues()[1],S=this.getScaleValues()[2],y=this.getScaleValues()[3],h=this.ComputeSubSymbolPt(P,c,e,p),g=u*S,f=h,i=y-90;0<this.getSubSymbols().length&&this.computeSubSymbol(this.getSubSymbols()[0],f,g,i),this.addScalePoint(f);var M=SuperMap.Plot.PlottingUtil.circlePoint(h,g,g,y);this.addScalePoint(M)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=[];if(2==l.length){var n=l[0],i=l[1],r=SuperMap.Plot.PlottingUtil.distance(n,i),a=180*SuperMap.Plot.PlottingUtil.radian(n,i)/Math.PI,p=SuperMap.Plot.PlottingUtil.circlePoint(n,r,r,a+60);o.push(n),o.push(i),o.push(p)}else o=o.concat(l);var n=o[0],i=o[1],p=o[2],u=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);o.push(o[0]);var s=SuperMap.Plot.PlottingUtil.polylineDistance(o),P=e;if(0==t){var c=SuperMap.Plot.PlottingUtil.plumbLineLen(p,n,i),S=SuperMap.Plot.PlottingUtil.plumbLineLen(i,n,p),y=SuperMap.Plot.PlottingUtil.plumbLineLen(P,n,i)/c,h=SuperMap.Plot.PlottingUtil.plumbLineLen(P,n,p)/S;y>1&&(y=1),h>1&&(h=1),this.getScaleValues()[0]=y,this.getScaleValues()[1]=h}else if(1==t){var g=this.getScaleValues()[0],f=this.getScaleValues()[1],M=this.ComputeSubSymbolPt(g,f,o,u),d=SuperMap.Plot.PlottingUtil.distance(M,P)/s;this.getScaleValues()[2]=d;var m=180*SuperMap.Plot.PlottingUtil.radian(M,P)/Math.PI;this.getScaleValues()[3]=m}}this.calculateParts()}},{key:"ComputeSubSymbolPt",value:function(t,e,l,o){var n=l[0],i=l[1],r=l[2],a=SuperMap.Plot.PlottingUtil.plumbLineLen(r,n,i)*t,p=SuperMap.Plot.PlottingUtil.plumbLineLen(i,n,r)*e,u=[];SuperMap.Plot.PlottingUtil.pointIsRightToLine(n,i,o)?((P=[]).push(n),P.push(i),u=SuperMap.Plot.PlottingUtil.paraLine(P,a,!1)):((P=[]).push(n),P.push(i),u=SuperMap.Plot.PlottingUtil.paraLine(P,a,!0));var s;if(SuperMap.Plot.PlottingUtil.pointIsRightToLine(n,r,o))(P=[]).push(n),P.push(r),s=SuperMap.Plot.PlottingUtil.paraLine(P,p,!1);else{var P=[];P.push(n),P.push(r),s=SuperMap.Plot.PlottingUtil.paraLine(P,p,!0)}if(2>u.length||2>s.length)return o;var c=SuperMap.Plot.PlottingUtil.intersectLines(u[0],u[1],s[0],s[1]);return c.isIntersectLines?c.intersectPoint:o}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol23901=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol23902",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues().push(.2),l.getScaleValues().push(.2),l.getScaleValues().push(.5),l.getScaleValues().push(.125),l.getScaleValues().push(90)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[];if(2===t.length){var l=t[0],o=t[1],n=SuperMap.Plot.PlottingUtil.distance(l,o),i=180*SuperMap.Plot.PlottingUtil.radian(l,o)/Math.PI,r=SuperMap.Plot.PlottingUtil.circlePoint(l,n,n,i+60);e.push(l),e.push(r),e.push(o)}else e=e.concat(t);this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e),e.push(e[0]);var a,p=SuperMap.Plot.PlottingUtil.polylineDistance(e),u=this.getScaleValues()[0],s=this.getScaleValues()[1],P=this.getScaleValues()[2],c=(this.getScaleValues()[3],this.getScaleValues()[4]),S=p*u,l=e[0],o=e[1],r=e[2],y=p*s,h=180*SuperMap.Plot.PlottingUtil.InnerAngle(l,o,r)/Math.PI*P,g=180*SuperMap.Plot.PlottingUtil.radian(l,o)/Math.PI,f=g-h,M=g+h,d=SuperMap.Plot.PlottingUtil.circlePoint(l,y,y,f),m=SuperMap.Plot.PlottingUtil.circlePoint(l,y,y,M);a=SuperMap.Plot.PlottingUtil.ptIsInPolygon(e,d)?d:m,this.getIsEdit()||(this.getScaleValues()[3]=this.getDefaultSubSymbolSize()/p*2);var b=p*this.getScaleValues()[3],i=c;0<this.getSubSymbols().length&&this.computeSubSymbol(this.getSubSymbols()[0],a,b,i-90);var v=SuperMap.Plot.PlottingUtil.circlePoint(l,S,S,g+180);this.addScalePoint(v),this.addScalePoint(a);var O=SuperMap.Plot.PlottingUtil.circlePoint(a,.5*b,.5*b,i);this.addScalePoint(O),this.createArcPts(e,S)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=[];if(2==l.length){var n=l[0],i=l[1],r=SuperMap.Plot.PlottingUtil.distance(n,i),a=180*SuperMap.Plot.PlottingUtil.radian(n,i)/Math.PI,p=SuperMap.Plot.PlottingUtil.circlePoint(n,r,r,a+60);o.push(n),o.push(i),o.push(p)}else o=o.concat(l);var n=o[0],i=o[1],p=o[2];SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);o.push(o[0]);var u=SuperMap.Plot.PlottingUtil.polylineDistance(o),s=e;if(0===t){r=SuperMap.Plot.PlottingUtil.distance(s,o[0]);this.getScaleValues()[0]=r/u}else if(1===t){c=(b=SuperMap.Plot.PlottingUtil.distance(s,o[0]))/u;this.getScaleValues()[1]=c;a=180*SuperMap.Plot.PlottingUtil.InnerAngle(n,i,p)/Math.PI;0<=(S=180*SuperMap.Plot.PlottingUtil.InnerAngle(n,i,s)/Math.PI/a)&&1>=S&&(this.getScaleValues()[2]=S)}else if(2===t){var P,c=this.getScaleValues()[1],S=this.getScaleValues()[2],y=u*c,h=180*SuperMap.Plot.PlottingUtil.InnerAngle(n,i,p)/Math.PI*S,g=180*SuperMap.Plot.PlottingUtil.radian(n,i)/Math.PI,f=g-h,M=g+h,d=SuperMap.Plot.PlottingUtil.circlePoint(n,y,y,f),m=SuperMap.Plot.PlottingUtil.circlePoint(n,y,y,M);P=SuperMap.Plot.PlottingUtil.ptIsInPolygon(o,d)?d:m;var b=SuperMap.Plot.PlottingUtil.distance(s,P),v=2*b/u;this.getScaleValues()[3]=v;var O=180*SuperMap.Plot.PlottingUtil.radian(P,s)/Math.PI;this.getScaleValues()[4]=O}}this.calculateParts()}},{key:"ComputeSubSymbolPt",value:function(t,e,l,o){var n=l[0],i=l[1],r=l[2],a=SuperMap.Plot.PlottingUtil.plumbLineLen(r,n,i)*t,p=SuperMap.Plot.PlottingUtil.plumbLineLen(i,n,r)*e,u=[];SuperMap.Plot.PlottingUtil.pointIsRightToLine(n,i,o)?((P=[]).push(n),P.push(i),u=SuperMap.Plot.PlottingUtil.paraLine(P,a,!1)):((P=[]).push(n),P.push(i),u=SuperMap.Plot.PlottingUtil.paraLine(P,a,!0));var s;if(SuperMap.Plot.PlottingUtil.pointIsRightToLine(n,r,o))(P=[]).push(n),P.push(r),s=SuperMap.Plot.PlottingUtil.paraLine(P,p,!1);else{var P=[];P.push(n),P.push(r),s=SuperMap.Plot.PlottingUtil.paraLine(P,p,!0)}if(2>u.length||2>s.length)return o;var c=SuperMap.Plot.PlottingUtil.intersectLines(u[0],u[1],s[0],s[1]);return c.isIntersectLines?c.intersectPoint:o}},{key:"createArcPts",value:function(t,e){for(var l=[],o=[],n=0;n<t.length;n++)o.push(e),l.push([{Start:0,End:360}]);for(n=0;n<t.length;n++)if(0!==l[n].length&&(0!==l[n][0].Start||0!==l[n][0].End))for(var i=n+1;i<t.length;i++)if(0!==l[i].length&&(0!==l[i][0].Start||0!==l[i][0].End)){var r=SuperMap.Plot.PlottingUtil.distance(t[n],t[i]);if(r<o[n]+o[i])if(r>Math.abs(o[n]-o[i]))for(var a=0;a<2;a++){var p,u;0==a?(u=n,p=SuperMap.Plot.PlottingUtil.radian(t[n],t[i])*this.RTOD,M=Math.acos((r*r+o[n]*o[n]-o[i]*o[i])/(2*r*o[n]))*this.RTOD):(u=i,p=SuperMap.Plot.PlottingUtil.radian(t[i],t[n])*this.RTOD,M=Math.acos((r*r+o[i]*o[i]-o[n]*o[n])/(2*r*o[i]))*this.RTOD);var s=p-M,P=p+M,c=s<0&&P>0||s>360||P>360;s=this.adjustAngle(s),P=this.adjustAngle(P);for(S=l[u].length-1;S>=0;S--)if(c){if(P>l[u][S].End||SuperMap.Plot.PlottingUtil.equalFuzzy(P,l[u][S].End)){l[u].splice(S,1);continue}if(P>l[u][S].Start&&(l[u][S].Start=P),s<l[u][S].Start||SuperMap.Plot.PlottingUtil.equalFuzzy(s,l[u][S].Start)){l[u].splice(S,1);continue}s<l[u][S].End&&(l[u][S].End=s)}else if(s<l[u][S].Start&&P>l[u][S].End)l[u].splice(S,1);else if(s>l[u][S].Start&&P<l[u][S].End)l[u].push({Start:l[u][S].Start,End:s}),l[u].push({Start:P,End:l[u][S].End}),l[u].splice(S,1);else{if(s>l[u][S].End)continue;if(s>l[u][S].Start&&(l[u][S].End=s),P<l[u][S].Start)continue;P<l[u][S].End&&(l[u][S].Start=P)}}else{if(o[n]<o[i]){l[n][0].Start=0,l[n][0].End=0;break}l[i][0].Start=0,l[i][0].End=0}}for(n=0;n<t.length;n++)if(0!==l[n].length&&(0!==l[n][0].Start||0!==l[n][0].End))for(var S=l[n].length-1;S>=0;S--){for(var y=this.adjustAngle(l[n][S].Start),h=this.adjustAngle(l[n][S].End);h<y;)h+=360;for(var g=[],f=(h-y)/72,M=y;M<h+f/2;M+=f){var d=t[n].x+o[n]*Math.cos(M*this.DTOR),m=t[n].y+o[n]*Math.sin(M*this.DTOR);g.push(new SuperMap.Geometry.Point(d,m))}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g)}}},{key:"adjustAngle",value:function(t){for(;t>360;)t-=360;for(;t<0;)t+=360;return t}},{key:"GetCirclePts",value:function(t,e,l,o){var n=180*SuperMap.Plot.PlottingUtil.radian(t,e)/Math.PI,i=180*SuperMap.Plot.PlottingUtil.radian(t,l)/Math.PI,r=n;i>n&&(r=i);for(var a=[],p=r;p<360+r;p+=4)90==p&&(p=91),a.push(SuperMap.Plot.PlottingUtil.circlePoint(t,o,o,p));return a.push[0],a}},{key:"CreatArc",value:function(t,e,l){for(var o=[],n=[],i=0;i<t.length;i++){var r=t[i];SuperMap.Plot.PlottingUtil.ptIsInPolygon(e,r)||SuperMap.Plot.PlottingUtil.ptIsInPolygon(l,r)?(n.length>1&&o.push(n),n=[]):n.push(r)}n.length>1&&o.push(n);for(i=0;i<o.length;i++){var a=o[i];this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a)}}},{key:"GetArcPts3D",value:function(t,e,l){for(var o=[],n=[],i=0;i<t.length;i++){var r=t[i];SuperMap.Plot.PlottingUtil.ptIsInPolygon(e,r)||SuperMap.Plot.PlottingUtil.ptIsInPolygon(l,r)?(n.length>1&&o.push(n),n=[]):n.push(r)}n.length>1&&o.push(n);for(var a=[],i=0;i<o.length;i++)a=a.concat(o[i]);return a}},{key:"sortPts",value:function(t,e){t=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e);for(var l=0;l<e.length;l++)for(var o=e[l],n=180*SuperMap.Plot.PlottingUtil.radian(t,o)/Math.PI,i=0;i<e.length;i++){var r=e[i],a=180*SuperMap.Plot.PlottingUtil.radian(t,r)/Math.PI;if(n>a){var p=new SuperMap.Geometry.Point(o.x,o.y);o=new SuperMap.Geometry.Point(r.x,r.y),r=new SuperMap.Geometry.Point(p.x,p.y),n=a,e[l]=o,e[i]=r}}return e}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol23902=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol24700",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=255,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(.025),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.1),this.getScaleValues().push(.025),this.getScaleValues().push(0));var e;e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t),e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=new SuperMap.Geometry.Point(0,0),o=-1,n=this.getScaleValues()[0],i=SuperMap.Plot.PlottingUtil.polylineDistance(e),r=n*i;if(!this.getIsEdit()){var a=this.getDefaultSubSymbolSize()/i;(a>.3||a<=0)&&(a=.3),this.getScaleValues()[1]=a}var p=this.getScaleValues()[1]*SuperMap.Plot.PlottingUtil.polylineDistance(t),u=0,s=.3*r;this.ComputeDashLine(3*i/19,i/19,e);var P=e[1].clone(),c=e[0].clone(),S=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(p,P,c),y=S.pntRight,h=S.pntLeft,g=[];g.push(h.clone()),g.push(y.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);for(var f=3*s,M=e[0].clone(),d=0;d<=i;d+=f){u=d+2*s;var m=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(u,e);if(m.bfind){if(o=m.index,l=m.pts,m.index>=e.length)break;var b=[];if(b.push(M.clone()),b.push(l.clone()),0==d){var v=l.clone();v.isScalePoint=!0,v.tag=0,this.addScalePoint(v);var O=y.clone();O.isScalePoint=!0,O.tag=1,this.addScalePoint(O)}if(0==this.getScaleValues()[2]){var L=new SuperMap.Geometry.Point((M.x+l.x)/2,(M.y+l.y)/2),U=M.clone(),w=L.clone(),c=l.clone(),_=((S=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(p,U,w)).pntRight,S.pntLeft),T=SuperMap.Plot.PlottingUtil.linePnt(L,U,.3*p),x=SuperMap.Plot.PlottingUtil.linePnt(L,c,.3*p);0==d&&((G=_.clone()).isScalePoint=!0,G.tag=2,this.addScalePoint(G)),(V=[]).push(_.clone()),V.push(T.clone()),V.push(x.clone()),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,V)}else{var L=new SuperMap.Geometry.Point((M.x+l.x)/2,(M.y+l.y)/2),U=M.clone(),w=L.clone(),c=l.clone(),E=((S=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(p,U,w)).pntLeft,S.pntRight),T=SuperMap.Plot.PlottingUtil.linePnt(L,U,.3*s),x=SuperMap.Plot.PlottingUtil.linePnt(L,c,.3*s);if(0==d){var G=E.clone();G.isScalePoint=!0,G.tag=2,this.addScalePoint(G)}var V=[];V.push(E.clone()),V.push(T.clone()),V.push(x.clone()),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,V)}if(u=d+3*s,(m=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(u,e)).bfind){if(o=m.index,l=m.pts,!(m.index<e.length))break;o,M=l}}}P=e[e.length-2].clone(),c=e[e.length-1].clone(),S=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(p,P,c),(g=[]).push(S.pntLeft.clone()),g.push(S.pntRight.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t&&2!=t)return;var l,o=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(o),l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var n=SuperMap.Plot.PlottingUtil.polylineDistance(l),i=e.clone(),r=l[0].clone();if(0===t)(p=(a=SuperMap.Plot.PlottingUtil.distance(i,r))/.6/n)>1.6&&(p=1.6),this.getScaleValues()[0]=p;else if(1===t){var a=SuperMap.Plot.PlottingUtil.distance(i,r),p=a/n;this.getScaleValues()[1]=p}else if(2===t){var u=this.getScaleValues()[0]*n,s=.01*n,P=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(s,l);if(!P.bfind)return;var c=P.index,S=P.pts.clone();if(!(P.index<l.length))return;var y=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(u,l[c],S).pntLeft.clone(),h=SuperMap.Plot.PlottingUtil.projectPoint(e,y,S);(y.x-S.x)*(h.x-S.x)+(y.y-S.y)*(h.y-S.y)>=0?this.getScaleValues()[2]=0:this.getScaleValues()[2]=1}}this.calculateParts()}},{key:"ComputeDashLine",value:function(t,e,l){for(var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.clonePoints(l),i=o/9,r=0;r<9;r++){var a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(n,i);if(-1!==a.index){if(0==r%2){for(var p=[],u=0;u<a.index+1;u++)p.push(n[u].clone());p.push(a.pt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p)}var s=[];s.push(a.pt);for(var P=a.index+1;P<n.length;P++)s.push(n[P]);n=(n=[]).concat(s)}}n.length>1&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n)}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol24700=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(21)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.285714),l.getScaleValues().push(.285714),l.getScaleValues().push(.5),l.getScaleValues().push(.333333),l.getScaleValues().push(.333333)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.285714),this.getScaleValues().push(.285714),this.getScaleValues().push(.5),this.getScaleValues().push(.333333),this.getScaleValues().push(.333333));var e=t[0].clone(),l=t[1].clone(),o=SuperMap.Plot.PlottingUtil.distance(e,l),n=this.getScaleValues()[0],i=new SuperMap.Geometry.Point(0,-o*n),r=new SuperMap.Geometry.Point(0,o*n),a=this.getScaleValues()[1],p=this.getScaleValues()[3],u=new SuperMap.Geometry.Point(o*(1-p),-o*a),s=new SuperMap.Geometry.Point(o*(1-p),o*a),P=this.getScaleValues()[2],c=this.getScaleValues()[4],S=new SuperMap.Geometry.Point(o*(1-c),-o*P),y=new SuperMap.Geometry.Point(o*(1-c),o*P),h=new SuperMap.Geometry.Point(o,0),g=SuperMap.Plot.PlottingUtil.radian(e,l),f=[];f.push(i),f.push(u),f.push(S),f.push(h),f.push(y),f.push(s),f.push(r);for(var M=[],d=0;d<f.length;d++){I=SuperMap.Plot.PlottingUtil.coordinateTrans(e,f[d],g*this.RTOD);M.push(I)}for(var m=[],b=M.length-1;b>=0;--b)m.push(M[b]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M),this.clearScalePoints();var v=M[0].clone();v.isScalePoint=!0,v.tag=0,this.addScalePoint(v);var O=M[1].clone();O.isScalePoint=!0,O.tag=1,this.addScalePoint(O);var L=M[2].clone();L.isScalePoint=!0,L.tag=2,this.addScalePoint(L);var U=.04*o,w=.0475*o,_=new SuperMap.Geometry.Point(h.x-U,0),T=new SuperMap.Geometry.Point(S.x,S.y+w),x=SuperMap.Plot.PlottingUtil.intersectLines(u,S,_,T),E=x.intersectPoint;if(0!=x.isIntersectLines){var G=new SuperMap.Geometry.Point(y.x,y.y-w),V=(x=SuperMap.Plot.PlottingUtil.intersectLines(y,s,_,G)).intersectPoint;if(0!=x.isIntersectLines){var A=[];A.push(E),A.push(_),A.push(V);for(var C=[],Y=0;Y<A.length;Y++){var I=SuperMap.Plot.PlottingUtil.coordinateTrans(e,A[Y],g*this.RTOD);C.push(I)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,C)}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25100=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25101",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.105263),l.getScaleValues().push(.105263),l.getScaleValues().push(.181818),l.getScaleValues().push(.285714),l.getScaleValues().push(.285714)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(SuperMap.Plot.PlottingUtil.clearSamePts(t),!(t.length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.105263),this.getScaleValues().push(.105263),this.getScaleValues().push(.181818),this.getScaleValues().push(.285714),this.getScaleValues().push(.285714));var e=t[0].clone(),l=t[1].clone(),o=SuperMap.Plot.PlottingUtil.distance(e,l),n=this.getScaleValues()[0],i=new SuperMap.Geometry.Point(0,-o*n),r=new SuperMap.Geometry.Point(0,o*n),a=this.getScaleValues()[1],p=this.getScaleValues()[3],u=new SuperMap.Geometry.Point(o*(1-p),-o*a),s=new SuperMap.Geometry.Point(o*(1-p),o*a),P=this.getScaleValues()[2],c=this.getScaleValues()[4],S=new SuperMap.Geometry.Point(o*(1-c),-o*P),y=new SuperMap.Geometry.Point(o*(1-c),o*P),h=new SuperMap.Geometry.Point(o,0),g=SuperMap.Plot.PlottingUtil.radian(e,l),f=[];f.push(i),f.push(u),f.push(S),f.push(h),f.push(y),f.push(s),f.push(r);for(var M=[],d=0;d<f.length;d++){E=SuperMap.Plot.PlottingUtil.coordinateTrans(e,f[d],g*this.RTOD);M.push(E)}for(var m=[],b=M.length-1;b>=0;--b)m.push(M[b]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M),this.clearScalePoints();var v=M[0].clone();v.isScalePoint=!0,v.tag=0,this.addScalePoint(v);var O=M[1].clone();O.isScalePoint=!0,O.tag=1,this.addScalePoint(O);var L=M[2].clone();L.isScalePoint=!0,L.tag=2,this.addScalePoint(L);var U=.08125*o,w=new SuperMap.Geometry.Point(h.x-U,0),_=new SuperMap.Geometry.Point(w.x-U/2,0),T=new SuperMap.Geometry.Point(w.x+U/2,0),x=[],E=SuperMap.Plot.PlottingUtil.coordinateTrans(e,_,g*this.RTOD);x.push(E.clone()),E=SuperMap.Plot.PlottingUtil.coordinateTrans(e,T,g*this.RTOD),x.push(E.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,x);var G=new SuperMap.Geometry.Point(w.x,w.y-U/2),V=new SuperMap.Geometry.Point(w.x,w.y+U/2),A=[];E=SuperMap.Plot.PlottingUtil.coordinateTrans(e,V,g*this.RTOD),A.push(E.clone()),E=SuperMap.Plot.PlottingUtil.coordinateTrans(e,G,g*this.RTOD),A.push(E.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,A)}}},{key:"modifyPoint",value:function(t,e){if(e.isScalePoint&&(t>=0||t<3)){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]),n=l[0].clone(),i=l[1].clone(),r=e.clone();if(0==t){var a=SuperMap.Plot.PlottingUtil.distance(r,n)/o;this.getScaleValues()[0]=a}else if(1==t){var p=SuperMap.Plot.PlottingUtil.projectPoint(r,n,i),u=(P=SuperMap.Plot.PlottingUtil.distance(p,r))/o;this.getScaleValues()[1]=u;var s=(S=SuperMap.Plot.PlottingUtil.distance(p,i))/o;this.getScaleValues()[3]=s}else if(2==t){var p=SuperMap.Plot.PlottingUtil.projectPoint(r,n,i),P=SuperMap.Plot.PlottingUtil.distance(p,r),c=P/o;this.getScaleValues()[2]=c;var S=SuperMap.Plot.PlottingUtil.distance(p,i),y=S/o;this.getScaleValues()[4]=y}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25101=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(15)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25200",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=512,l.clearScalePoints(),0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(.148),l.getScaleValues().push(.4),l.getScaleValues().push(.312),l.getScaleValues().push(.2),l.getScaleValues().push(.01)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){this.getScaleValues().length<6&&(this.getScaleValues().push(.05),this.getScaleValues().push(.148),this.getScaleValues().push(.4),this.getScaleValues().push(.312),this.getScaleValues().push(.2),this.getScaleValues().push(.01)),SuperMap.Geometry.AlgoSymbol1004.prototype.applyUse.apply(this,arguments);var e=new SuperMap.Geometry.Point((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2);if(t.splice(0,2),t.unshift(e),this.getSubSymbols().length>0){var l;if(null===this.getSubSymbols()[0].symbolData)return;l=this.getSubSymbols()[0].symbolData.symbolSize.x;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=o*this.getScaleValues()[4],i=o*this.getScaleValues()[5],r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(n,t),a=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(i,t),p=SuperMap.Plot.PlottingUtil.radian(a.pts,r.pts)*this.RTOD+270,u=100*SuperMap.Plot.PlottingUtil.distance(r.pts,a.pts)/l,s=new SuperMap.Geometry.Point((a.pts.x+r.pts.x)/2,(r.pts.y+a.pts.y)/2);if(null===this.getSubSymbols().length)return;if(null!==this.getSubSymbols()[0].code){for(var P=0;P<this.getSubSymbols().length;P++)for(var c=this.getSubSymbols()[P].symbolData,S=0;S<c.innerCells.length;S++)c.innerCells[S].fillLimit=!0;this.computeSubSymbol(this.getSubSymbols()[0],s,u,p)}r.pts.isScalePoint=!0,r.pts.tag=this.getScalePoints().length,this.addScalePoint(r.pts.clone()),a.pts.isScalePoint=!0,a.pts.tag=this.getScalePoints().length,this.addScalePoint(a.pts.clone())}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<2)return;if(this.getScaleValues().length<6&&(this.getScaleValues().push(.05),this.getScaleValues().push(.148),this.getScaleValues().push(.4),this.getScaleValues().push(.312),this.getScaleValues().push(.2),this.getScaleValues().push(.01)),t<=2)SuperMap.Geometry.AlgoSymbol1004.prototype.modifyPoint.apply(this,arguments);else if(3==t||4==t){var o=new SuperMap.Geometry.Point((l[0].x+l[1].x)/2,(l[0].y+l[1].y)/2),n=SuperMap.Plot.PlottingUtil.clonePoints(l);n.splice(0,2),n.unshift(o);var i=SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(e,n),r=SuperMap.Plot.PlottingUtil.polylineDistance(n);if(3===t&&null===i.pt&&(i.pt=o.clone()),-1==i.index&&4==t)this.getScaleValues()[t+1]=.01;else{var a=SuperMap.Plot.PlottingUtil.clonePoints(n);a.splice(0,i.index+1),a.unshift(i.pt);var p=SuperMap.Plot.PlottingUtil.polylineDistance(a);r<p&&(p=r),this.getScaleValues()[t+1]=(r-p)/r,this.getScaleValues()[4]>.5&&(this.getScaleValues()[4]=.5)}}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25200=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25201",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||null!==this.symbolData||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());var o=l*this.getScaleValues()[0],n=e[e.length-1];if(e.length>2){for(var i=-1,r=e.length-2;r>=0;r--)if(o<SuperMap.Plot.PlottingUtil.distance(n,e[r])){i=r;break}e.splice(i+1,e.length-i),e.push(n)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var a=e[e.length-2],p=e[e.length-1],u=o,s=180*SuperMap.Plot.PlottingUtil.radian(a,p)/Math.PI,P=SuperMap.Plot.PlottingUtil.circlePoint(p,u,u,s+157.5),c=SuperMap.Plot.PlottingUtil.circlePoint(p,u,u,s+202.5),S=[];S.push(P),S.push(n),S.push(c);var y={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,S,y,!0);var h=SuperMap.Plot.PlottingUtil.circlePoint(p,u,u,s);this.addScalePoint(h)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.distance(e,l[l.length-1])/o;if(n>.2)return;this.getScaleValues()[0]=n}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25201=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25202",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(.025),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());var l=e*this.getScaleValues()[0],o=[];o=SuperMap.Plot.PlottingUtil.paraLine(t,l,!0);var n=[];n=SuperMap.Plot.PlottingUtil.paraLine(t,l,!1),this.addScalePoint(n[0]);var i=n[n.length-1],r=o[o.length-1],a=SuperMap.Plot.PlottingUtil.distance(i,r),p=.5*a,u=o[o.length-2],s=o[o.length-1],P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(p,u,s).pntLeft;u=n[n.length-2],s=n[n.length-1];var c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(p,u,s).pntRight,S=a;u=n[n.length-1],s=t[t.length-1];var y=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(S,u,s).pntRight,h=[];h.push(P),h.push(y),h.push(c);var g=[];g=(g=g.concat(o)).concat(h);for(var f=n.length-1;f>=0;--f)g.push(n[f]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.distance(e,l[0])/o;if(n>.5)return;this.getScaleValues()[0]=n}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25202=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25300",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.068),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=this.getScaleValues()[0],o=l*e,n=SuperMap.Plot.PlottingUtil.paraLine(t,o,!0),i=SuperMap.Plot.PlottingUtil.paraLine(t,o,!1),r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(e/2,i);if(r.bfind){var a=r.pts.clone(),p=r.index,u=(l=this.getScaleValues()[0])*e,s=[];s.push(a);for(A=p;A>=0;A--)s.push(i[A]);if((r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(u,s)).bfind){var P=r.index,c=r.pts.clone(),S=[];S.push(c);for(A=P+1;A<s.length;A++)S.push(s[A].clone());f={surroundLineFlag:!1,fillLimit:!0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S,f);var y=[];y.push(a);for(A=p+1;A<i.length;A++)y.push(i[A]);if((r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(u,y)).bfind){var h=r.index,g=r.pts.clone();(S=[]).push(g);for(A=h+1;A<y.length;A++)S.push(y[A].clone());var f={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S,f);var M=SuperMap.Plot.PlottingUtil.radian(c,g)*this.RTOD,d=new SuperMap.Geometry.Point((c.x+g.x)/2,(c.y+g.y)/2);this.getSubSymbols().length>=0&&this.computeSubSymbol(this.getSubSymbols()[0],d,u,M);var m=s[s.length-1].clone(),b=SuperMap.Plot.PlottingUtil.circlePoint(m,.3*o,.3*o,M+30),v=SuperMap.Plot.PlottingUtil.circlePoint(m,.3*o,.3*o,M+180),O=SuperMap.Plot.PlottingUtil.circlePoint(m,.3*o,.3*o,M+330);if((S=[]).push(b),S.push(v),S.push(O),f={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0},this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,S,f,!0),e=SuperMap.Plot.PlottingUtil.polylineDistance(n),(r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(e/2,n)).bfind){var L=r.index,U=r.pts.clone(),w=[];w.push(U);for(A=L;A>=0;A--)w.push(n[A]);if((r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(u,w)).bfind){var _=r.index,T=r.pts.clone(),x=[];x.push(T);for(A=_+1;A<w.length;A++)x.push(w[A]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,x);var E=[];E.push(U);for(A=L+1;A<n.length;A++)E.push(n[A]);if((r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(u,E)).bfind){var G=r.index,V=r.pts.clone();(x=[]).push(V);for(var A=G+1;A<E.length;A++)x.push(E[A]);f={surroundLineFlag:!1,fillLimit:!0},this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,x,f);var C=SuperMap.Plot.PlottingUtil.radian(T,V)*this.RTOD,Y=new SuperMap.Geometry.Point((T.x+V.x)/2,(T.y+V.y)/2);this.getSubSymbols().length>=0&&this.computeSubSymbol(this.getSubSymbols()[1],Y,u,C+90);var I=w[w.length-1].clone(),j=SuperMap.Plot.PlottingUtil.circlePoint(I,.3*o,.3*o,M+30),B=SuperMap.Plot.PlottingUtil.circlePoint(I,.3*o,.3*o,M+180),R=SuperMap.Plot.PlottingUtil.circlePoint(I,.3*o,.3*o,M+330);(S=[]).push(j),S.push(B),S.push(R),f={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0},this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,S,f,!0);var N=SuperMap.Plot.PlottingUtil.linePnt(B,v,3*o),D=SuperMap.Plot.PlottingUtil.linePnt(v,B,3*o);(x=[]).push(N),x.push(D),f={surroundLineFlag:!1,fillLimit:!0},this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,x,f);var k=SuperMap.Plot.PlottingUtil.linePnt(y[y.length-1],E[E.length-1],3*o),z=SuperMap.Plot.PlottingUtil.linePnt(E[E.length-1],y[y.length-1],3*o);(x=[]).push(k),x.push(z),f={surroundLineFlag:!1,fillLimit:!0},this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,x,f),this.clearScalePoints(),this.addScalePoint(N.clone())}}}}}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.distance(e,l[0])/o/2;this.getScaleValues()[0]=n}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25300=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25301",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.068),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&this.getScaleValues().push(.068),0==this.getSubSymbols().length&&(this.getSubSymbols().push(new SuperMap.Plot.SubSymbol(100,300)),this.getSubSymbols().push(new SuperMap.Plot.SubSymbol(100,6200)));var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=this.getScaleValues()[0],o=l*e,n=SuperMap.Plot.PlottingUtil.paraLine(t,o,!0),i=SuperMap.Plot.PlottingUtil.paraLine(t,o,!1),r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(e/2,i);if(r.bfind){var a=r.pts.clone(),p=r.index,u=(l=this.getScaleValues()[0])*e,s=[];s.push(a);for(x=p;x>=0;x--)s.push(i[x]);if((r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(u,s)).bfind){var P=r.index,c=r.pts.clone(),S=[];S.push(c);for(x=P+1;x<s.length;x++)S.push(s[x].clone());f={surroundLineFlag:!1,fillLimit:!0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S,f);var y=[];y.push(a);for(x=p+1;x<i.length;x++)y.push(i[x]);if((r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(u,y)).bfind){var h=r.index,g=r.pts.clone();(S=[]).push(g);for(x=h+1;x<y.length;x++)S.push(y[x].clone());var f={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S,f);var M=SuperMap.Plot.PlottingUtil.radian(c,g)*this.RTOD,d=new SuperMap.Geometry.Point((c.x+g.x)/2,(c.y+g.y)/2);if(this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],d,u,M+90),e=SuperMap.Plot.PlottingUtil.polylineDistance(n),(r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(e/2,n)).bfind){var m=r.index,b=r.pts.clone(),v=[];v.push(b);for(x=m;x>=0;x--)v.push(n[x]);if((r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(u,v)).bfind){var O=r.index,L=r.pts.clone(),U=[];U.push(L);for(x=O+1;x<v.length;x++)U.push(v[x]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U);var w=[];w.push(b);for(x=m+1;x<n.length;x++)w.push(n[x]);if((r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(u,w)).bfind){var _=r.index,T=r.pts.clone();(U=[]).push(T);for(var x=_+1;x<w.length;x++)U.push(w[x]);f={surroundLineFlag:!1,fillLimit:!0},this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U,f);var E=SuperMap.Plot.PlottingUtil.radian(L,T)*this.RTOD,G=new SuperMap.Geometry.Point((L.x+T.x)/2,(L.y+T.y)/2);this.getSubSymbols().length>1&&this.computeSubSymbol(this.getSubSymbols()[1],G,u,E);var V=SuperMap.Plot.PlottingUtil.linePnt(s[s.length-1],v[v.length-1],3*o),A=SuperMap.Plot.PlottingUtil.linePnt(v[v.length-1],s[s.length-1],3*o);(U=[]).push(V),U.push(A),f={surroundLineFlag:!1,fillLimit:!0},this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U,f);var C=SuperMap.Plot.PlottingUtil.linePnt(y[y.length-1],w[w.length-1],3*o),Y=SuperMap.Plot.PlottingUtil.linePnt(w[w.length-1],y[y.length-1],3*o);(U=[]).push(C),U.push(Y),f={surroundLineFlag:!1,fillLimit:!0},this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U,f),this.clearScalePoints(),this.addScalePoint(V.clone())}}}}}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.distance(e,l[0])/o/2;this.getScaleValues()[0]=n}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25301=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25400",l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}this.getScaleValues().length<1&&this.getScaleValues().push(.5);for(var n=this.getLinePts(e,this.getScaleValues()[0]),i=this.getLinePts(e,1.2*this.getScaleValues()[0]),r=SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt),a=[],p=[],u=0;u<=i.startIndex;u++)a.push(e[u]);if(a.push(i.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a),i.endIndex<=e.length){p.push(i.endPt);for(u=i.endIndex+1;u<=e.length-1;u++)p.push(e[u]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p)}var s=e[0],P=e[1],c=e[e.length-2],S=e[e.length-1],y=.3*r,h=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(y,P,s),g=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(y,c,S),f=h.pntLeft,M=g.pntLeft,d=[];d.push(s),d.push(f),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d);var m=[];m.push(S),m.push(M),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m);var b=SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)*this.RTOD,v=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),O=new SuperMap.Geometry.Point(.1*r,0),L=new SuperMap.Geometry.Point(.5*r,0),U=SuperMap.Plot.PlottingUtil.coordinateTrans(v,O,b),w=SuperMap.Plot.PlottingUtil.coordinateTrans(v,L,b),_=[];_.push(U),_.push(w);var T={surroundLineFlag:!1,lineTypeLimit:!0,fillLimit:!0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,_,T);var x=new SuperMap.Geometry.Point(.35*r,0),E=SuperMap.Plot.PlottingUtil.circlePoint(x,.2*r,.2*r,135),G=SuperMap.Plot.PlottingUtil.circlePoint(x,.2*r,.2*r,225),V=SuperMap.Plot.PlottingUtil.coordinateTrans(v,x,b),A=SuperMap.Plot.PlottingUtil.coordinateTrans(v,E,b),C=SuperMap.Plot.PlottingUtil.coordinateTrans(v,G,b);(_=[]).push(A),_.push(V),_.push(C),T={surroundLineFlag:!1,lineTypeLimit:!0,fillLimit:!0},this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,_,T);var Y=new SuperMap.Geometry.Point(-.1*r,0),I=new SuperMap.Geometry.Point(-.5*r,-.15*r),j=new SuperMap.Geometry.Point(-.5*r,.15*r),B=SuperMap.Plot.PlottingUtil.coordinateTrans(v,Y,b),R=SuperMap.Plot.PlottingUtil.coordinateTrans(v,I,b),N=SuperMap.Plot.PlottingUtil.coordinateTrans(v,j,b);(_=[]).push(B),_.push(R),_.push(N),_.push(B),T={surroundLineFlag:!1,lineTypeLimit:!0,fillLimit:!0},this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,_,T);var D=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),k=SuperMap.Plot.PlottingUtil.circlePoint(D.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,b);this.addScalePoint(k,0)}}},{key:"getLinePts",value:function(t,e){var l=new Object;if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"modifyPoint",value:function(t,e){if(0===t&&!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o),r=2*SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.5?r:.5}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25400=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(22)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25501",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.05)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(.05)),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var e=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),l=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[2]=2*this.getSubSymbolScaleValue());var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2],r=new SuperMap.Geometry.Point(e.x+l*o,e.y+l*n),a=i*l,p=.25*a,u=[];u.push(new SuperMap.Geometry.Point(r.x-a,r.y+p)),u.push(new SuperMap.Geometry.Point(r.x+a,r.y+p)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u);var s=[];s.push(new SuperMap.Geometry.Point(r.x+a,r.y-p)),s.push(new SuperMap.Geometry.Point(r.x-a,r.y-p)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s);var P=[];P.push(new SuperMap.Geometry.Point(r.x+a,r.y+2*p)),P.push(new SuperMap.Geometry.Point(r.x+a,r.y-2*p)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P);var c=[];c.push(new SuperMap.Geometry.Point(r.x-a,r.y+2*p)),c.push(new SuperMap.Geometry.Point(r.x-a,r.y-2*p)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c),this.clearScalePoints(),this.addScalePoint(r);var S=SuperMap.Plot.PlottingUtil.circlePoint(r,a,a,90);this.addScalePoint(S)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25501=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25502",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.02)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(.08)),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var e=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),l=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[2]=2*this.getSubSymbolScaleValue());var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2],r=new SuperMap.Geometry.Point(e.x+l*o,e.y+l*n),a=i*l/2.5,p=.7*a,u=[];u.push(new SuperMap.Geometry.Point(r.x,r.y)),u.push(new SuperMap.Geometry.Point(r.x+a,r.y));P={surroundLineFlag:!1,lineTypeLimit:!0};this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,u,P);var s=[];s.push(new SuperMap.Geometry.Point(r.x+p,r.y-p/2)),s.push(new SuperMap.Geometry.Point(r.x-p,r.y-p/2));var P={surroundLineFlag:!1,lineTypeLimit:!0,fillLimit:!0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s,P);var c=[];c.push(new SuperMap.Geometry.Point(r.x,r.y-p/2)),c.push(new SuperMap.Geometry.Point(r.x,r.y+p)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c,P);var S=[];S.push(new SuperMap.Geometry.Point(r.x-p/2,r.y-p/2)),S.push(new SuperMap.Geometry.Point(r.x-p,r.y+p/2)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S,P);var y=[];y.push(new SuperMap.Geometry.Point(r.x+p/2,r.y-p/2)),y.push(new SuperMap.Geometry.Point(r.x+p,r.y+p/2)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y,P),this.clearScalePoints(),this.addScalePoint(r.clone());var h=SuperMap.Plot.PlottingUtil.circlePoint(r,1.25*a,1.25*a,90);this.addScalePoint(h)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;if(0!=t&&1!=t)return;var l=this.controlPoints,o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l),n=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(SuperMap.Plot.PlottingUtil.equalFuzzy(n,0))return;if(0==t){i=(e.x-o.x)/n;this.getScaleValues()[0]=i;r=(e.y-o.y)/n;this.getScaleValues()[1]=r}else if(1==t){var i=this.getScaleValues()[0],r=this.getScaleValues()[1],a=new SuperMap.Geometry.Point(o.x+n*i,o.y+n*r),p=2*SuperMap.Plot.PlottingUtil.distance(a,e)/n;this.getScaleValues()[2]=p}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25502=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25503",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.02)),0===l.getSubSymbols().length&&l.getSubSymbols().push(new SuperMap.Plot.SubSymbol(100,8402)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(.02)),0==this.getSubSymbols().length&&this.getSubSymbols().push(new SuperMap.Plot.SubSymbol(100,8402)),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var e=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),l=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[2]=.5*this.getSubSymbolScaleValue());var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2],r=new SuperMap.Geometry.Point(e.x+l*o,e.y+l*n),a=i*l,p=[];p.push(new SuperMap.Geometry.Point(r.x-4*a,r.y+a/2)),p.push(new SuperMap.Geometry.Point(r.x-4*a,r.y-a/2));c={surroundLineFlag:!1,lineTypeLimit:!0,fillLimit:!0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p,c);var u=[];u.push(new SuperMap.Geometry.Point(r.x-4*a,r.y)),u.push(new SuperMap.Geometry.Point(r.x-a,r.y));c={surroundLineFlag:!1,surroundLineLimit:!0,lineTypeLimit:!0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,c),this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],r,2*a,0);var s=[];s.push(new SuperMap.Geometry.Point(r.x+4*a,r.y)),s.push(new SuperMap.Geometry.Point(r.x+a,r.y));c={surroundLineFlag:!1,surroundLineLimit:!0,lineTypeLimit:!0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s,c);var P=[];P.push(new SuperMap.Geometry.Point(r.x+4*a,r.y+a/2)),P.push(new SuperMap.Geometry.Point(r.x+4*a,r.y-a/2));var c={surroundLineFlag:!1,surroundLineLimit:!0,lineTypeLimit:!0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P,c),this.clearScalePoints(),this.addScalePoint(r.clone());var S=SuperMap.Plot.PlottingUtil.circlePoint(r,2*a,2*a,90);this.addScalePoint(S)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;if(0!=t&&1!=t)return;var l=this.controlPoints,o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l),n=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(SuperMap.Plot.PlottingUtil.equalFuzzy(n,0))return;if(0==t){i=(e.x-o.x)/n;this.getScaleValues()[0]=i;r=(e.y-o.y)/n;this.getScaleValues()[1]=r}else if(1==t){var i=this.getScaleValues()[0],r=this.getScaleValues()[1],a=new SuperMap.Geometry.Point(o.x+n*i,o.y+n*r),p=SuperMap.Plot.PlottingUtil.distance(a,e)/2/n;this.getScaleValues()[2]=p}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25503=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(23)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25601",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var e=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[0]=this.getSubSymbolScaleValue());var l=this.getScaleValues()[0]*e*.5,o=SuperMap.Plot.PlottingUtil.clonePoints(t);o.push(o[0].clone());for(var n=0;n<o.length-1;n++){var i=new SuperMap.Geometry.Point((o[n].x+o[n+1].x)/2,(o[n].y+o[n+1].y)/2),r=new SuperMap.Geometry.Point(0,1.5*l),a=new SuperMap.Geometry.Point(-.5*l,0),p=new SuperMap.Geometry.Point(0,-1.5*l),u=new SuperMap.Geometry.Point(.5*l,0),s=SuperMap.Plot.PlottingUtil.radian(i,o[n+1])*this.RTOD,P=SuperMap.Plot.PlottingUtil.coordinateTrans(i,r,s),c=SuperMap.Plot.PlottingUtil.coordinateTrans(i,a,s),S=SuperMap.Plot.PlottingUtil.coordinateTrans(i,p,s),y=SuperMap.Plot.PlottingUtil.coordinateTrans(i,u,s),h=[];h.push(P),h.push(c),h.push(S),h.push(y),h.push(P.clone());var g={surroundLineFlag:!1,surroundLineLimit:!0,lineTypeLimit:!0,fillLimit:!0,fillStyle:0,lineWidthLimit:!0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,h,g)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25601=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(24)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25701",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<=this.minEditPts)t.length>=2&&this.calAssistantLine();else{for(var e=t[0].x,l=t[0].x,o=0;o<t.length;o++)e>t[o].x&&(e=t[o].x),l<t[o].x&&(l=t[o].x);var n=(l-e)/50;this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var i={surroundLineFlag:!1,lineWidthLimit:!0,color:"#FF0000",weight:.5},r=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),a=10*n;t.push(t[0]);for(var p=!0,u=r.x,s=r.x;p;){p=!1;for(var P=[],c=new SuperMap.Geometry.Point(u,r.y),S=SuperMap.Plot.PlottingUtil.circlePoint(c,10,10,45),o=0;o<t.length-1;o++){var y=SuperMap.Plot.PlottingUtil.intersectLines(c,S,t[o],t[o+1]);if(y.isIntersectLines){M=y.intersectPoint;(d=[]).push(t[o]),d.push(t[o+1]),(f=SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(M,d)).isOnPolyLine&&P.push(M)}}if(1<P.length){this.sortPts2D(P);for(m=0;m<P.length-1;m++){b=new SuperMap.Geometry.Point((P[m].x+P[m+1].x)/2,(P[m].y+P[m+1].y)/2);SuperMap.Plot.PlottingUtil.ptIsInPolygon(t,b)&&((v=[]).push(P[m]),v.push(P[m+1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,v,i,!0))}}P.length>0&&(p=!0),P=[];for(var h=new SuperMap.Geometry.Point(s,r.y),g=SuperMap.Plot.PlottingUtil.circlePoint(h,5,5,45),o=0;o<t.length-1;o++){var f=SuperMap.Plot.PlottingUtil.intersectLines(h,g,t[o],t[o+1]);if(f.isIntersectLines){var M=f.intersectPoint,d=[];d.push(t[o]),d.push(t[o+1]),(f=SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(M,d)).isOnPolyLine&&P.push(M)}}if(1<P.length){this.sortPts2D(P);for(var m=0;m<P.length-1;m++){var b=new SuperMap.Geometry.Point((P[m].x+P[m+1].x)/2,(P[m].y+P[m+1].y)/2);if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(t,b)){var v=[];v.push(P[m]),v.push(P[m+1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,v,i,!0)}}}P.length>0&&(p=!0),u-=a,s+=a}}}},{key:"sortPts2D",value:function(t){for(var e=0;e<t.length;e++)for(var l=0;l<t.length-1-e;l++)if(SuperMap.Plot.PlottingUtil.equalFuzzy(t[l].x,t[l+1].x)){if(t[l].y>t[l+1].y){o=t[l];t[l]=t[l+1],t[l+1]=o}}else if(t[l].x>t[l+1].x){var o=t[l];t[l]=t[l+1],t[l+1]=o}return t}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25701=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(25)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25801",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<=this.minEditPts)t.length>=2&&this.calAssistantLine();else{this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var e=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),l=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[2]=2*this.getSubSymbolScaleValue());var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2],r=new SuperMap.Geometry.Point(e.x+l*o,e.y+l*n),a=i*l/2,p=[];p.push(new SuperMap.Geometry.Point(r.x,r.y)),p.push(new SuperMap.Geometry.Point(r.x,r.y+a));var u={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,p,u,!0);var s=[];s.push(new SuperMap.Geometry.Point(r.x-1.5*a,r.y+a)),s.push(new SuperMap.Geometry.Point(r.x+1.5*a,r.y+a)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s,null,!0),this.addScalePoint(r);var P=SuperMap.Plot.PlottingUtil.circlePoint(r,a,a,90);this.addScalePoint(P)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25801=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(26)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25901",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents(),2===this.controlPoints.length&&this.calAssistantLine();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var e=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),l=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[2]=2*this.getSubSymbolScaleValue());var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2],r=new SuperMap.Geometry.Point(e.x+l*o,e.y+l*n),a=i*l/2,p=[];p.push(new SuperMap.Geometry.Point(r.x-a,r.y)),p.push(new SuperMap.Geometry.Point(r.x+a,r.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p,null,!0);var u=.3*a,s=[];s.push(new SuperMap.Geometry.Point(r.x-a,r.y+u/2)),s.push(new SuperMap.Geometry.Point(r.x-a,r.y-u/2)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s,null,!0);var P=[];P.push(new SuperMap.Geometry.Point(r.x+a,r.y+u/2)),P.push(new SuperMap.Geometry.Point(r.x+a,r.y-u/2)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P,null,!0);var c=[];c.push(new SuperMap.Geometry.Point(r.x,r.y)),c.push(new SuperMap.Geometry.Point(r.x,r.y+1.5*u)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c,null,!0);var S=[];S.push(new SuperMap.Geometry.Point(r.x-u/2,r.y)),S.push(new SuperMap.Geometry.Point(r.x-u,r.y+u)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S,null,!0);var y=[];y.push(new SuperMap.Geometry.Point(r.x+u/2,r.y)),y.push(new SuperMap.Geometry.Point(r.x+u,r.y+u)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y,null,!0),this.addScalePoint(r);var h=SuperMap.Plot.PlottingUtil.circlePoint(r,a,a,90);this.addScalePoint(h)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25901=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol26400",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=99999,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(.05),l.getScaleValues().push(-1.5)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){if(3>this.getScaleValues().length&&(this.getScaleValues().push(.05),this.getScaleValues().push(.05),this.getScaleValues().push(-1.5)),!this.getIsEdit()||3===this.getScaleValues().length){for(a=0;a<t.length;a++)this.getScaleValues().push(0);var e=this.getSubSymbolScaleValue();this.getScaleValues().push(.8*e),this.getScaleValues().push(e),this.getScaleValues().push(-1.5)}var l=t.length,o=!1;if(void 0!==t[0].z&&(o=!0),o){for(var n=57.29577951308232,i=.017453292519943295,r=[],a=0;a<l;a++)r.push(t[a]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r);var p,u,s=SuperMap.Plot.PlottingUtil.polylineDistance(t),P=this.getScaleValues().length,c=s*(z=this.getScaleValues()[P-3]);if(0==(F=this.getScaleValues()[0]))p=(N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(c,t[1],t[0])).pntRight.x,u=N.pntRight.y;else if(1==F)p=(N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(c,t[1],t[0])).pntLeft.x,u=N.pntLeft.y;else{if(2!=F)return!0;p=t[0].x,u=t[0].y}if(this.clearScalePoints(),(r=[]).push(t[0]),r.push({x:p,y:u,z:t[0].z}),this.addScalePoint({x:p,y:u,z:t[0].z}),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r,null,!0),l>2){for(a=1;a<l-1;a++){var S;if(0==(q=this.getScaleValues()[a])){for(var y=new SuperMap.Geometry.Point(t[a].x,t[a].y),h=new SuperMap.Geometry.Point(t[a+1].x,t[a+1].y),g=new SuperMap.Geometry.Point(t[a-1].x,t[a-1].y),f=SuperMap.Plot.PlottingUtil.radian(y,h)*n,M=(H=SuperMap.Plot.PlottingUtil.radian(y,g)*n)-f;M<0;)M+=360;var d=M*i/2,m=new SuperMap.Geometry.Point(t[a+1].x,t[a+1].y);SuperMap.Plot.PlottingUtil.rotateAngle(y,d,m),S=SuperMap.Plot.PlottingUtil.linePnt(y,m,c)}else if(1==q){for(var y=new SuperMap.Geometry.Point(t[a].x,t[a].y),h=new SuperMap.Geometry.Point(t[a+1].x,t[a+1].y),g=new SuperMap.Geometry.Point(t[a-1].x,t[a-1].y),f=SuperMap.Plot.PlottingUtil.radian(y,h)*n,M=(H=SuperMap.Plot.PlottingUtil.radian(y,g)*n)-f;M<0;)M+=360;var d=3.141592653589793-M*i/2,m=new SuperMap.Geometry.Point(t[a-1].x,t[a-1].y);SuperMap.Plot.PlottingUtil.rotateAngle(y,d,m),S=SuperMap.Plot.PlottingUtil.linePnt(y,m,c)}else{if(2!=q)return!0;S.x=t[a].x,S.y=t[a].y}(r=[]).push(t[a]),r.push({x:S.x,y:S.y,z:t[a].z}),this.addScalePoint({x:S.x,y:S.y,z:t[a].z}),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r,null,!0)}var b,v,O=l;if(0==(Z=this.getScaleValues()[O-1]))Y=(N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(c,t[O-2],t[O-1])).pntLeft.x,I=N.pntLeft.y,b=(N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*c,t[O-2],t[O-1])).pntLeft.x,v=N.pntLeft.y;else if(1==Z)Y=(N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(c,t[O-2],t[O-1])).pntRight.x,I=N.pntRight.y,b=(N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*c,t[O-2],t[O-1])).pntRight.x,v=N.pntRight.y;else{if(2!=Z)return!0;Y=t[O-1].x,I=t[O-1].y,b=t[O-1].x,v=t[O-1].y}(r=[]).push(t[O-1]),r.push({x:Y,y:I,z:t[O-1].z}),this.addScalePoint({x:Y,y:I,z:t[O-1].z}),this.addScalePoint({x:b,y:v,z:t[O-1].z}),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r,null,!0)}else{if(0==(Q=this.getScaleValues()[1]))A=(N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(c,t[0],t[1])).pntLeft.x,C=N.pntLeft.y,Y=(N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*c,t[0],t[1])).pntLeft.x,I=N.pntLeft.y;else if(1==Q)A=(N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(c,t[0],t[1])).pntRight.x,C=N.pntRight.y,Y=(N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*c,t[0],t[1])).pntRight.x,I=N.pntRight.y;else{if(2!=Q)return!0;A=t[1].x,C=t[1].y,Y=t[1].x,I=t[1].y}(r=[]).push(t[1]),r.push({x:A,y:C,z:t[1].z}),this.addScalePoint({x:A,y:C,z:t[1].z}),this.addScalePoint({x:Y,y:I,z:t[1].z}),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r,null,!0)}var L,U,w=this.getScaleValues().length,_=this.getScaleValues()[w-2],T=Math.abs(s*_),x=this.getScaleValues()[w-1],E=Math.abs(c*x),G=-1,V=new SuperMap.Geometry.Point;if(G=(et=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(T,t,G)).index,V=et.pts,!et.bfind)return!0;x>=0?(L=(N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(E,t[G],V)).pntRight.x,U=N.pntRight.y):(L=(N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(E,t[G],V)).pntLeft.x,U=N.pntLeft.y);var A,C,Y,I,j=SuperMap.Plot.PlottingUtil.linePnt(V,new SuperMap.Geometry.Point(L,U),E),B=.3*E,R=SuperMap.Plot.PlottingUtil.linePnt(j,V,B),N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.3*B,j,R);A=N.pntRight.x,C=N.pntRight.y,Y=N.pntLeft.x,I=N.pntLeft.y;var D=0;return D=G==t.length-1?t[G]:this.ComputeZValue(V,t[G],t[G+1]),(r=[]).push({x:V.x,y:V.y,z:D}),r.push({x:j.x,y:j.y,z:D}),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r,null,!0),(r=[]).push({x:A,y:C,z:D}),r.push({x:Y,y:I,z:D}),r.push({x:j.x,y:j.y,z:D}),r.push({x:A,y:C,z:D}),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r,null,!0),this.addScalePoint({x:j.x,y:j.y,z:D}),!0}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var k,s=SuperMap.Plot.PlottingUtil.polylineDistance(t),P=this.getScaleValues().length,z=this.getScaleValues()[P-3],c=s*z,F=this.getScaleValues()[0];if(0==F)k=(et=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(c,t[1],t[0])).pntRight;else if(1==F)k=(et=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(c,t[1],t[0])).pntLeft;else{if(2!=F)return;k=t[0]}var K=[];if(K.push(t[0]),K.push(k),this.addScalePoint(k),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,K,null,!0),t.length>this.minEditPts){for(a=1;a<t.length-1;a++){var W,q=this.getScaleValues()[a];if(0==q){for(var y=t[a],h=t[a+1],g=t[a-1],f=180*SuperMap.Plot.PlottingUtil.radian(y,h)/Math.PI,M=(H=180*SuperMap.Plot.PlottingUtil.radian(y,g)/Math.PI)-f;M<0;)M+=360;var d=M/2,m=t[a+1].clone();SuperMap.Plot.PlottingUtil.rotateAngle(y,d*Math.PI/180,m),W=SuperMap.Plot.PlottingUtil.linePnt(y,m,c)}else if(1==q){for(var y=t[a],h=t[a+1],g=t[a-1],f=180*SuperMap.Plot.PlottingUtil.radian(y,h)/Math.PI,H=180*SuperMap.Plot.PlottingUtil.radian(y,g)/Math.PI,M=H-f;M<0;)M+=360;var d=180-M/2,m=t[a-1].clone();SuperMap.Plot.PlottingUtil.rotateAngle(y,d*Math.PI/180,m),W=SuperMap.Plot.PlottingUtil.linePnt(y,m,c)}else{if(2!=q)continue;W=t[a]}(it=[]).push(t[a]),it.push(W),this.addScalePoint(W),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,it,null,!0)}var O=t.length,Z=this.getScaleValues()[O-1];if(0==Z)X=(lt=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(c,t[O-2],t[O-1])).pntLeft,J=($=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*c,t[O-2],t[O-1])).pntLeft;else if(1==Z)X=(lt=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(c,t[O-2],t[O-1])).pntRight,J=($=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*c,t[O-2],t[O-1])).pntRight;else{if(2!=Z)return;X=t[O-1].clone(),J=t[O-1].clone()}(it=[]).push(t[O-1]),it.push(X),this.addScalePoint(X),this.addScalePoint(J),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,it,null,!0)}else{var X,J,Q=this.getScaleValues()[1];if(0==Q)X=(lt=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(c,t[0],t[1])).pntLeft,J=($=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*c,t[0],t[1])).pntLeft;else if(1==Q){X=(lt=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(c,t[0],t[1])).pntRight;var $=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*c,t[0],t[1]);J=$.pntRight}else{if(2!=Q)return;X=t[1].clone(),J=t[1].clone()}(it=[]).push(t[1]),it.push(X),this.addScalePoint(X),this.addScalePoint(J),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,it,null,!0)}var tt,w=this.getScaleValues().length;.01===(_=this.getScaleValues()[w-2])&&(_*=3);var T=Math.abs(s*_),x=this.getScaleValues()[w-1],E=Math.abs(c*x),et=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,T);if(-1!==et.index){var G=et.index,V=et.pt;tt=x>=0?(lt=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(E,t[G],V)).pntRight:(lt=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(E,t[G],V)).pntLeft;var j=SuperMap.Plot.PlottingUtil.linePnt(V,tt,E),B=.3*E,R=SuperMap.Plot.PlottingUtil.linePnt(j,V,B),lt=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.3*B,j,R),ot=lt.pntLeft,nt=lt.pntRight;tt=x>=0?(lt=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(E,t[G],V)).pntLeft:(lt=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(E,t[G],V)).pntRight;var it=[];it.push(V),it.push(j),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,it,null,!0),(it=[]).push(ot),it.push(j),it.push(nt);var rt={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,it,rt,!0),this.addScalePoint(j)}}}},{key:"getLinePts",value:function(t,e){var l=new Object;if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.2-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.2+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=l.length,i=e;if(t>=0&&t<n){var r=!1;if(0==t)r=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t],l[t+1],i);else if(t==n-1)r=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t-1],l[t],i);else{var a=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t-1],l[t],l[t+1]),p=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t-1],l[t],i);if(a!=p)r=p;else{var u=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t],l[t+1],i);r=u==p?p:u}}this.getScaleValues()[t]=r?1:0}else if(t==n){var s=SuperMap.Plot.PlottingUtil.distance(l[n-1],i),P=(s/=2)/o;this.getScaleValues()[t]=P}else if(t==n+1||t==n+2){for(var c=-1,S=0,y=new SuperMap.Geometry.Point(0,0),h=0;h<l.length-1;h++){var g=[];g.push(l[h]),g.push(l[h+1]);var f=SuperMap.Plot.PlottingUtil.projectPoint(i,l[h],l[h+1]);if(-1!==SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(f,g).index){var M=SuperMap.Plot.PlottingUtil.distance(i,f);-1===c?(c=h,y=f,S=M):S>M&&(c=h,y=f,S=M)}}-1===c&&Math.ceil(e.x,1)<=Math.ceil(l[0].x,1)?(c=0,y=l[0]):-1===c&&c===l[l.length-2]&&(c=0,y=l[0]),-1===c&&Math.ceil(e.x,1)>=Math.ceil(l[l.length-1].x,1)?(c=l.length-1,y=l[l.length-1]):-1!==c&&c!==l.length-1||(c=l.length-1,y=l[l.length-1]);for(var d=0,h=0;h<c;h++){var m=l[h],b=l[h+1];d+=SuperMap.Plot.PlottingUtil.distance(m,b)}var v=(d+=SuperMap.Plot.PlottingUtil.distance(l[c],y))/o;v<=.005&&(v=.005),v>=.99&&(v=.99),this.getScaleValues()[n+1]=v;var O,L=this.getScaleValues().length,s=o*this.getScaleValues()[L-3];(O=(void 0===l[c+1]?SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[c-1],l[c],i):SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[c],l[c+1],i))?S/s:-Math.abs(S/s))>=-1&&(O=-1),O<=-2&&(O=-2),this.getScaleValues()[n+2]=O}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol26400=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol26500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,l/2);if(-1!==o.index){var n=o.pt,i=this.getDefaultSubSymbolSize()/l;(i>.3||i<=0)&&(i=.3);var r=1.5*i*l,a=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r,e[o.index],n),p=[];p.push(a.pntLeft),p.push(n),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p,null,!0)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol26500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol26501",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.05),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(this.getScaleValues().length<1&&(this.clearScaleValues(),this.getScaleValues().push(.5)),!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=this.getLinePts(e,this.getScaleValues()[0]),i=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),r=180*SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)/Math.PI,a=SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt);0<this.getSubSymbols().length&&this.computeSubSymbol(this.getSubSymbols()[0],i,.8*a,r);for(var p=[],u=[],s=0;s<=n.startIndex;s++)p.push(e[s]);if(p.push(n.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),n.endIndex<=e.length){u.push(n.endPt);for(s=n.endIndex+1;s<=e.length-1;s++)u.push(e[s]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u)}var P=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),c=SuperMap.Plot.PlottingUtil.circlePoint(P.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,r);this.addScalePoint(c,0)}}},{key:"getLinePts",value:function(t,e){var l=new Object;if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"modifyPoint",value:function(t,e){if(0===t&&!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o),r=2*SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.5?r:.5}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol26501=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(7)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol26502",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=255,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(.05),l.getScaleValues().push(.01)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol26502=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(7)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol26503",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=99999,0===l.getScaleValues().length&&l.getScaleValues().push(.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(this.getScaleValues().length<1&&this.getScaleValues().push(.5),!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}for(var n=l*this.getScaleValues()[0],i=this.getLinePts(e,this.getScaleValues()[0]),r=[],a=[],p=0;p<=i.startIndex;p++)r.push(e[p]);if(r.push(i.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r),i.endIndex<=e.length){a.push(i.endPt);for(p=i.endIndex+1;p<=e.length-1;p++)a.push(e[p]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a)}var u=.5*n,s=new SuperMap.Geometry.Point(i.endPt.x,i.endPt.y),P=new SuperMap.Geometry.Point(i.startPt.x,i.startPt.y),c=SuperMap.Plot.PlottingUtil.distance(s,P),S=.2*c,y=SuperMap.Plot.PlottingUtil.linePnt(s,P,S),h=SuperMap.Plot.PlottingUtil.linePnt(P,s,S),g=.5*c,f=SuperMap.Plot.PlottingUtil.linePnt(s,P,g),M=new SuperMap.Geometry.Point((y.x+f.x)/2,(y.y+f.y)/2),d=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(u,h,M),m=d.pntLeft,b=d.pntRight,v=[];v.push(b),v.push(y),v.push(m),this.addCell(SuperMap.Plot.SymbolType.ARCSYMBOL,v,null,!0);var O=.1*c,L=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(O,y,f),U=L.pntLeft,w=L.pntRight,_=[];_.push(y),_.push(U),_.push(w);var T={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,_,T,!0);var x=[];x.push(f),x.push(h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,x,null,!0);var E=new SuperMap.Geometry.Point((i.startPt.x+i.endPt.x)/2,(i.startPt.y+i.endPt.y)/2),G=180*SuperMap.Plot.PlottingUtil.radian(i.startPt,i.endPt)/Math.PI,V=.5*l*this.getScaleValues()[0],A=SuperMap.Plot.PlottingUtil.circlePoint(E,V,V,G+90),C=e[0],Y=e[1],I=e[e.length-2],j=e[e.length-1],B=.5*n,R=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(B,Y,C),N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(B,I,j),D=R.pntLeft,k=N.pntLeft,z=[];z.push(C),z.push(D),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,z);var F=[];F.push(j),F.push(k),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,F),this.addScalePoint(A)}}},{key:"getLinePts",value:function(t,e){var l=new Object;if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol26503=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(27)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol26601",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=.02*e,n=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);n=SuperMap.Plot.PlottingUtil.clearSamePts(n);var i=SuperMap.Plot.PlottingUtil.paraLine(n,.5*o,!0),r=SuperMap.Plot.PlottingUtil.paraLine(n,.5*o,!1);this.createDashLine(i),this.createDashLine(r)}}},{key:"createDashLine",value:function(t){for(var e=SuperMap.Plot.PlottingUtil.polylineDistance(t)/19,l=0;l<18;l++){var o=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,e);if(-1!==o.index){if(0==l%2){for(var n=[],i=0;i<o.index+1;i++)n.push(t[i].clone());n.push(o.pt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n)}var r=[];r.push(o.pt);for(var a=o.index+1;a<t.length;a++)r.push(t[a]);t=(t=[]).concat(r)}}t.length>1&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t)}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol26601=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol26700",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=this.getScaleValues()[0]*e,n=SuperMap.Plot.PlottingUtil.paraLine(t,o,!0),i=SuperMap.Plot.PlottingUtil.paraLine(t,o,!1);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var r=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),a=2*o*.8,p=SuperMap.Plot.PlottingUtil.radian(t[0],t[1])*this.RTOD;this.getSubSymbols().length>=0&&this.computeSubSymbol(this.getSubSymbols()[0],r,a,p),0===this.getScaleValues()[1]?this.addScalePoint(n[0]):this.addScalePoint(i[0])}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===o)return;if(0===t){var n=SuperMap.Plot.PlottingUtil.distance(e,l[0])/o;this.getScaleValues()[0]=n}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol26700=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol26800",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,l.getScaleValues().length,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts))if(2===this.controlPoints.length)this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t);else if(3===this.controlPoints.length){var e=new SuperMap.Geometry.Point(this.controlPoints[0].x,this.controlPoints[0].y),l=new SuperMap.Geometry.Point(this.controlPoints[1].x,this.controlPoints[1].y),o=new SuperMap.Geometry.Point(this.controlPoints[2].x,this.controlPoints[2].y),n=SuperMap.Plot.PlottingUtil.distance(l,o);if(0>=n)return;var i=SuperMap.Plot.PlottingUtil.distance(e,l)/n;this.getScaleValues().push(i);var r=SuperMap.Plot.PlottingUtil.radian(e,l)*this.RTOD;r>90?r-=90:r=270+r,this.getScaleValues().push(r*this.DTOR);var a=SuperMap.Plot.PlottingUtil.radian(e,o)*this.RTOD;a>90?a-=90:a=270+a,this.getScaleValues().push(a*this.DTOR);var p=this.getScaleValues()[0]*n,u=this.getScaleValues()[1]*this.RTOD+90,s=this.getScaleValues()[2]*this.RTOD+90;u<s&&(u+=360);for(var P=[],c=u;c>=s;c-=4){S=SuperMap.Plot.PlottingUtil.circlePoint(this.controlPoints[0],p,p,c);P.push(S)}if(c!=s){var S=SuperMap.Plot.PlottingUtil.circlePoint(this.controlPoints[0],p,p,s);P.push(S)}P.push(t[0]),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,P)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol26800=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol27300",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=[];3>=t.length?o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t));for(var n=o[0].x,i=o[0].x,r=o[0].y,a=o[0].y,l=0;l<o.length;l++)n>o[l].x&&(n=o[l].x),i<o[l].x&&(i=o[l].x),r>o[l].y&&(r=o[l].y),a<o[l].y&&(a=o[l].y);for(var p=new SuperMap.Geometry.Point((i+n)/2,(a+r)/2),u=new SuperMap.Geometry.Point(p.x,0),s=0,P=-1,l=0;l<o.length-1;l++){var c=SuperMap.Plot.PlottingUtil.intersectLines(p,new SuperMap.Geometry.Point(p.x,p.y+1),o[l],o[l+1]);c.isIntersectLines&&(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(c.intersectPoint,o[l],o[l+1])&&u.x===c.intersectPoint.x&&(0==s?(u.y=c.intersectPoint.y,P=l):u.y<c.intersectPoint.y&&(u.y=c.intersectPoint.y,P=l),s++))}var S=this.getSubSymbolScaleValue()*e,y=[];y.push(u);for(l=P+1;l<o.length-1;l++)y.push(new SuperMap.Geometry.Point(o[l].x,o[l].y));for(l=0;l<=P;l++)y.push(new SuperMap.Geometry.Point(o[l].x,o[l].y));var h=.8*S,g=SuperMap.Plot.PlottingUtil.findPointInPolyLine(y,h);if(-1!==g.index){var f=[];f.push(g.pt);for(l=g.index+1;l<y.length-1;l++)f.push(y[l]);y=[];for(l=f.length-1;l>0;l--)y.push(f[l]);var M=SuperMap.Plot.PlottingUtil.findPointInPolyLine(y,h);if(-1!==M.index){(f=[]).push(M.pt);for(l=M.index+1;l<y.length-1;l++)f.push(y[l]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f),this.getSubSymbols()&&null!==this.getSubSymbols()&&this.getSubSymbols().length>=0&&this.computeSubSymbol(this.getSubSymbols()[0],u,S,0)}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol27300=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol27700",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.1),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=this.getScaleValues()[0]*e,n=SuperMap.Plot.PlottingUtil.paraLine(t,o,!0),i=SuperMap.Plot.PlottingUtil.paraLine(t,o,!1);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var r=new SuperMap.Geometry.Point(t[0].x,t[0].y),a=new SuperMap.Geometry.Point(t[1].x,t[1].y),p=180*SuperMap.Plot.PlottingUtil.radian(r,a)/Math.PI;if(90<p&&p<270){var u=r;r=a,a=u,p=180*SuperMap.Plot.PlottingUtil.radian(r,a)/Math.PI}var s=new SuperMap.Geometry.Point(.25*e,0),P=new SuperMap.Geometry.Point(.25*e+.2*o,.3*o),c=new SuperMap.Geometry.Point(.25*e+.2*o,-.3*o),S=SuperMap.Plot.PlottingUtil.coordinateTrans(r,s,p),y=SuperMap.Plot.PlottingUtil.coordinateTrans(r,P,p),h=SuperMap.Plot.PlottingUtil.coordinateTrans(r,c,p),g=[];g.push(new SuperMap.Geometry.Point(y.x,y.y)),g.push(new SuperMap.Geometry.Point(S.x,S.y)),g.push(new SuperMap.Geometry.Point(h.x,h.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var f=new SuperMap.Geometry.Point(.3*e,0),M=new SuperMap.Geometry.Point(.3*e+.2*o,.3*o),d=new SuperMap.Geometry.Point(.3*e+.2*o,-.3*o),m=SuperMap.Plot.PlottingUtil.coordinateTrans(r,f,p),b=SuperMap.Plot.PlottingUtil.coordinateTrans(r,M,p),v=SuperMap.Plot.PlottingUtil.coordinateTrans(r,d,p);(g=[]).push(new SuperMap.Geometry.Point(b.x,b.y)),g.push(new SuperMap.Geometry.Point(m.x,m.y)),g.push(new SuperMap.Geometry.Point(v.x,v.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var O=new SuperMap.Geometry.Point(.7*e,0),L=new SuperMap.Geometry.Point(.7*e+.2*o,.3*o),U=new SuperMap.Geometry.Point(.7*e+.2*o,-.3*o),w=SuperMap.Plot.PlottingUtil.coordinateTrans(r,O,p),_=SuperMap.Plot.PlottingUtil.coordinateTrans(r,L,p),T=SuperMap.Plot.PlottingUtil.coordinateTrans(r,U,p);(g=[]).push(new SuperMap.Geometry.Point(_.x,_.y)),g.push(new SuperMap.Geometry.Point(w.x,w.y)),g.push(new SuperMap.Geometry.Point(T.x,T.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var x=new SuperMap.Geometry.Point(.75*e,0),E=new SuperMap.Geometry.Point(.75*e+.2*o,.3*o),G=new SuperMap.Geometry.Point(.75*e+.2*o,-.3*o),V=SuperMap.Plot.PlottingUtil.coordinateTrans(r,x,p),A=SuperMap.Plot.PlottingUtil.coordinateTrans(r,E,p),C=SuperMap.Plot.PlottingUtil.coordinateTrans(r,G,p);(g=[]).push(new SuperMap.Geometry.Point(A.x,A.y)),g.push(new SuperMap.Geometry.Point(V.x,V.y)),g.push(new SuperMap.Geometry.Point(C.x,C.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g),this.addScalePoint(n[0],0)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint&&0===t){for(var l=0,o=0;o<this.controlPoints.length-1;o++)l+=SuperMap.Plot.PlottingUtil.distance(this.controlPoints[o],this.controlPoints[o+1]);var n=SuperMap.Plot.PlottingUtil.distance(this.controlPoints[0],e)/l;this.getScaleValues()[0]=n}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol27700=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol27701",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=[];3>=t.length?(o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t),o=SuperMap.Plot.PlottingUtil.clearSamePts(o)):(t.push(t[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,o);var n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o),i=this.getSubSymbolScaleValue()*e,r=this.getSubSymbolScaleValue()*e,a=new SuperMap.Geometry.Point(n.x-i-r,n.y),p=new SuperMap.Geometry.Point(n.x-i,n.y),u=new SuperMap.Geometry.Point(n.x-i+r,n.y),s=new SuperMap.Geometry.Point(n.x+i,n.y),P=new SuperMap.Geometry.Point(n.x+i+r,n.y),c=new SuperMap.Geometry.Point(n.x+i+2*r,n.y),S=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r,a,p),y=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r,p,u),h=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r,s,P),g=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r,P,c),f=[];f.push(new SuperMap.Geometry.Point(S.pntLeft.x,S.pntLeft.y)),f.push(new SuperMap.Geometry.Point(a.x,a.y)),f.push(new SuperMap.Geometry.Point(S.pntRight.x,S.pntRight.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f),(f=[]).push(new SuperMap.Geometry.Point(y.pntLeft.x,y.pntLeft.y)),f.push(new SuperMap.Geometry.Point(p.x,p.y)),f.push(new SuperMap.Geometry.Point(y.pntRight.x,y.pntRight.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f),(f=[]).push(new SuperMap.Geometry.Point(h.pntLeft.x,h.pntLeft.y)),f.push(new SuperMap.Geometry.Point(s.x,s.y)),f.push(new SuperMap.Geometry.Point(h.pntRight.x,h.pntRight.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f),(f=[]).push(new SuperMap.Geometry.Point(g.pntLeft.x,g.pntLeft.y)),f.push(new SuperMap.Geometry.Point(P.x,P.y)),f.push(new SuperMap.Geometry.Point(g.pntRight.x,g.pntRight.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol27701=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(11)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol27901",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0;e<t.length-1;e++)SuperMap.Plot.PlottingUtil.distance(t[e],t[e+1]);this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t);var l=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]),o={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!0,fillStyle:0,fillColor:"#ffff00",fillOpacity:1};this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[t[0],new SuperMap.Geometry.Point(t[0].x-l*this.getScaleValues()[0],t[0].y)],o),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[new SuperMap.Geometry.Point(t[0].x+l*(this.getScaleValues()[0]+.1),t[0].y-l*this.getScaleValues()[0]),new SuperMap.Geometry.Point(t[0].x-l*(this.getScaleValues()[0]+.1),t[0].y-l*this.getScaleValues()[0])]);var n=SuperMap.Plot.PlottingUtil.circlePoint(t[0],l*this.getScaleValues()[0],l*this.getScaleValues()[0],90);this.addScalePoint(n,0)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol27901=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(11)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol27902",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0;e<t.length-1;e++)SuperMap.Plot.PlottingUtil.distance(t[e],t[e+1]);this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t);var l=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]),o={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!0,fillStyle:0,fillColor:"#ffff00",fillOpacity:1};this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[t[0],new SuperMap.Geometry.Point(t[0].x-l*this.getScaleValues()[0],t[0].y)],o),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[new SuperMap.Geometry.Point(t[0].x+l*(this.getScaleValues()[0]+.1),t[0].y+l*this.getScaleValues()[0]),new SuperMap.Geometry.Point(t[0].x-l*(this.getScaleValues()[0]+.1),t[0].y+l*this.getScaleValues()[0])]);var n=SuperMap.Plot.PlottingUtil.circlePoint(t[0],l*this.getScaleValues()[0],l*this.getScaleValues()[0],90);this.addScalePoint(n,0)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol27902=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol28000",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=4,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(.349066)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=(v=this.getScaleValues()[1])*this.RTOD,l=new SuperMap.Geometry.Point(t[0].x,t[0].y),o=new SuperMap.Geometry.Point(t[t.length-1].x,t[t.length-1].y),n=SuperMap.Plot.PlottingUtil.radian(l,o)*this.RTOD,i=new SuperMap.Geometry.Point(0,0);if(2<=t.length){var r=[],a=new SuperMap.Geometry.Point(t[1].x,t[1].y),p=SuperMap.Plot.PlottingUtil.distance(l,a),u=0;for(u=n-e;u<n+e;u+=3)r.push(SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,u));SuperMap.Plot.PlottingUtil.equalFuzzy(u,n+e)&&(u=n+e,r.push(SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,u))),(f=[]).push(t[0]);for(u=0;u<r.length;u++)f.push(new SuperMap.Geometry.Point(r[u].x,r[u].y));f.push(t[0]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);y=SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,n);i=new SuperMap.Geometry.Point(y.x,y.y),(M=[]).push(t[0]),M.push(i),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M)}h=new SuperMap.Geometry.Point(0,0);if(3<=t.length){var r=[],a=new SuperMap.Geometry.Point(t[2].x,t[2].y),p=SuperMap.Plot.PlottingUtil.distance(l,a),u=0;for(u=n-e;u<n+e;u+=3)r.push(SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,u));SuperMap.Plot.PlottingUtil.equalFuzzy(u,n+e)&&(u=n+e,r.push(SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,u)));var s=[];if(0==r.length)return void(s.length>0&&(s=[]));(f=[]).push(t[0]);for(u=0;u<r.length;u++)f.push(new SuperMap.Geometry.Point(r[u].x,r[u].y));f.push(t[0]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);for(var P=new SuperMap.Geometry.Point(t[1].x,t[1].y),c=SuperMap.Plot.PlottingUtil.distance(l,P)*this.getScaleValues()[0],S=[],u=90;u<=270;u+=3)S.push(SuperMap.Plot.PlottingUtil.circlePoint(l,c,c,n+u));f=[];for(u=S.length-1;u>=0;u--)f.push(new SuperMap.Geometry.Point(S[u].x,S[u].y));this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f),(f=[]).push(new SuperMap.Geometry.Point(S[0].x,S[0].y)),f.push(new SuperMap.Geometry.Point(r[r.length-1].x,r[r.length-1].y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f),(f=[]).push(new SuperMap.Geometry.Point(r[0].x,r[0].y)),f.push(new SuperMap.Geometry.Point(S[S.length-1].x,S[S.length-1].y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);var y=SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,n),h=new SuperMap.Geometry.Point(y.x,y.y);(M=[]).push(i),M.push(h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M)}var g=new SuperMap.Geometry.Point(0,0);if(4<=t.length){var r=[],a=new SuperMap.Geometry.Point(t[3].x,t[3].y),p=SuperMap.Plot.PlottingUtil.distance(l,a),u=0;for(u=n-e;u<=n+e;u+=3)r.push(SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,u));SuperMap.Plot.PlottingUtil.equalFuzzy(u,n+e)&&(u=n+e,r.push(SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,u)));var f=[];f.push(t[0]);for(u=0;u<r.length;u++)f.push(new SuperMap.Geometry.Point(r[u].x,r[u].y));f.push(t[0]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);y=SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,n);g=new SuperMap.Geometry.Point(y.x,y.y);var M=[];M.push(h),M.push(g),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M)}if(2<=t.length){var d=new SuperMap.Geometry.Point((t[0].x+i.x)/2,(t[0].y+i.y)/2),m=t[0],b=i,v=SuperMap.Plot.PlottingUtil.radian(m,b)*this.RTOD,O=.2*SuperMap.Plot.PlottingUtil.distance(m,b);d=SuperMap.Plot.PlottingUtil.circlePoint(d,O/4,O/4,90),(L={surroundLineFlag:!1,fontSize:15,fontSizeLimit:!0}).labelAlign="cm",L.labelRotation=-v,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,d,L,"危")}if(3<=t.length){var d=new SuperMap.Geometry.Point((h.x+i.x)/2,(h.y+i.y)/2),m=i,b=h,v=SuperMap.Plot.PlottingUtil.radian(m,b)*this.RTOD,O=.2*SuperMap.Plot.PlottingUtil.distance(m,b);d=SuperMap.Plot.PlottingUtil.circlePoint(d,O/4,O/4,90),(L={surroundLineFlag:!1,fontSize:15,fontSizeLimit:!0}).labelAlign="cm",L.labelRotation=-v,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,d,L,"中")}if(4<=t.length){var d=new SuperMap.Geometry.Point((h.x+g.x)/2,(h.y+g.y)/2),m=h,b=g,v=SuperMap.Plot.PlottingUtil.radian(m,b)*this.RTOD,O=.2*SuperMap.Plot.PlottingUtil.distance(m,b);d=SuperMap.Plot.PlottingUtil.circlePoint(d,O/4,O/4,90);var L={surroundLineFlag:!1,fontSize:15,fontSizeLimit:!0};L.labelAlign="cm",L.labelRotation=-v,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,d,L,"轻")}if(3>t.length)this.addScalePoint(t[0]);else{var U=SuperMap.Plot.PlottingUtil.distance(t[0],t[1])*this.getScaleValues()[0],w=SuperMap.Plot.PlottingUtil.circlePoint(l,U,U,n+180);this.addScalePoint(w,0)}var _=SuperMap.Plot.PlottingUtil.distance(t[0],t[t.length-1]),T=SuperMap.Plot.PlottingUtil.circlePoint(l,_,_,n+e);this.addScalePoint(T,1)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),0==t){if(3>l.length)return;var o=new SuperMap.Geometry.Point(l[0].x,l[0].y),n=new SuperMap.Geometry.Point(e.x,e.y),i=SuperMap.Plot.PlottingUtil.distance(o,n),r=new SuperMap.Geometry.Point(l[1].x,l[1].y);if((P=i/SuperMap.Plot.PlottingUtil.distance(o,r))>=2.5)return;this.getScaleValues()[0]=P}else if(1==t){var a=new SuperMap.Geometry.Point(l[0].x,l[0].y),p=new SuperMap.Geometry.Point(l[l.length-1].x,l[l.length-1].y),u=SuperMap.Plot.PlottingUtil.radian(a,p),s=new SuperMap.Geometry.Point(e.x,e.y),P=SuperMap.Plot.PlottingUtil.radian(a,s)-u;if((P=Math.abs(P))>Math.PI/2&&P<3*Math.PI/2)return;P>3*Math.PI/2&&P<=2*Math.PI&&(P=2*Math.PI-P),this.getScaleValues()[1]=Math.abs(P)}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol28000=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol28100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.2),l.getScaleValues().push(.349066)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=new SuperMap.Geometry.Point(t[1].x,t[1].y),o=180*SuperMap.Plot.PlottingUtil.radian(e,l)/Math.PI,n=0,i=0;i<t.length-1;i++)n+=SuperMap.Plot.PlottingUtil.distance(e,l);var r=this.getScaleValues()[0]*n;this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[e,new SuperMap.Geometry.Point(e.x+r,e.y)]);var a=180*this.getScaleValues()[1]/Math.PI,p=SuperMap.Plot.PlottingUtil.circlePoint(e,n,n,o-a),u=SuperMap.Plot.PlottingUtil.circlePoint(e,n,n,o+a);this.addCell(SuperMap.Plot.SymbolType.ARCSYMBOL,[p,l,u]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[t[0],t[1]]);var s=SuperMap.Plot.PlottingUtil.circlePoint(e,r,r,o-90);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[s,p]);var P=SuperMap.Plot.PlottingUtil.circlePoint(e,r,r,o+90);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[P,u]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[s,P]);var c=SuperMap.Plot.PlottingUtil.circlePoint(e,r,r,o+180);this.addScalePoint(new SuperMap.Geometry.Point(c.x,c.y),0),this.addScalePoint(u,1)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=new SuperMap.Geometry.Point(l[0].x,l[0].y),n=new SuperMap.Geometry.Point(l[1].x,l[1].y),i=180*SuperMap.Plot.PlottingUtil.radian(o,n)/Math.PI,r=SuperMap.Plot.PlottingUtil.distance(o,n);if(0===t){var a=SuperMap.Plot.PlottingUtil.distance(o,e)/r;this.getScaleValues()[0]=a}if(1===t){var p=180*SuperMap.Plot.PlottingUtil.radian(o,e)/Math.PI,u=Math.abs(p-i);if(u>270&&u<360&&(u=360-u),u>90)return;this.getScaleValues()[1]=u*Math.PI/180}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol28100=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(19)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol28200",null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol28200=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol28201",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(1),null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]),l=e*this.getScaleValues()[0],o=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l/2,t[0],t[1]),n=o.pntRight,i=o.pntLeft,r=SuperMap.Plot.PlottingUtil.radian(n,i)*this.RTOD,a=SuperMap.Plot.PlottingUtil.circlePoint(n,l/6,l/6,r-170),p=SuperMap.Plot.PlottingUtil.circlePoint(i,l/6,l/6,r+10),u=[];u.push(a),u.push(n),u.push(i),u.push(p),this.clearScalePoints(),this.addScalePoint(n);var s=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(u);s=SuperMap.Plot.PlottingUtil.clearSamePts(s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s);var P=SuperMap.Plot.PlottingUtil.paraLine(u,e,!0),c=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(P);c=SuperMap.Plot.PlottingUtil.clearSamePts(c),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]);if(0==t){var n=2*SuperMap.Plot.PlottingUtil.distance(e,l[1])/o;this.getScaleValues()[0]=n}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol28201=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol28300",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&l.getScaleValues().push(.1),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0;e<t.length-1;e++)SuperMap.Plot.PlottingUtil.distance(t[e],t[e+1]);var l=[];if(3>=this.controlPoints.length?l=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),l=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(3>(l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,l);var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l);this.getIsEdit()||(this.getScaleValues()[0]=this.getSubSymbolScaleValue());var i=o*this.getScaleValues()[0];this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],n,i,0),this.clearScalePoints();var r=SuperMap.Plot.PlottingUtil.circlePoint(n,i,i,0);this.addScalePoint(r)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=[];3>=this.controlPoints.length?o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(l),i=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);if(0===t){var r=SuperMap.Plot.PlottingUtil.distance(e,i)/n;this.getScaleValues()[0]=r}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol28300=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol28301",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.3),l.getScaleValues().push(1)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.3),this.getScaleValues().push(1)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var e,l=t[0].clone(),o=t[1].clone(),n=SuperMap.Plot.PlottingUtil.distance(l,o),i=this.getScaleValues()[0],r=this.getScaleValues()[1];if(SuperMap.Plot.PlottingUtil.equalFuzzy(1,r))e=SuperMap.Plot.PlottingUtil.radian(l,o)+270*this.DTOR;else{e=SuperMap.Plot.PlottingUtil.radian(l,o)+90*this.DTOR;var a;a=l,l=o,o=a}var p=n*i*.67,u=SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,e*this.RTOD);this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],u,n*i,e*this.RTOD);var s=SuperMap.Plot.PlottingUtil.circlePoint(o,p,p,e*this.RTOD);this.getSubSymbols().length>1&&this.computeSubSymbol(this.getSubSymbols()[1],s,n*i,e*this.RTOD),this.clearScalePoints();var P=e*this.RTOD,c=n*i,S=t[0].clone(),y=SuperMap.Plot.PlottingUtil.circlePoint(S,c,c,P);this.addScalePoint(y)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=(l=SuperMap.Plot.PlottingUtil.clearSamePts(l))[0].clone(),n=l[1].clone(),i=e.clone(),r=SuperMap.Plot.PlottingUtil.distance(o,n),a=SuperMap.Plot.PlottingUtil.plumbLineLen(i,o,n)/r;if(a<0||SuperMap.Plot.PlottingUtil.equalFuzzy(a,0))return;this.getScaleValues()[0]=a,SuperMap.Plot.PlottingUtil.pointIsRightToLine(o,n,i)?this.getScaleValues()[1]=1:this.getScaleValues()[1]=0}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol28301=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol28400",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.087081),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.087081),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];3>=t.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e);var l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),o=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(!this.getIsEdit()){var n=this.getDefaultSubSymbolSize()/o;(n>.3||n<=0)&&(n=.3),this.getScaleValues()[0]=2*n}var i=this.getScaleValues()[0],r=(this.getScaleValues()[1],this.getScaleValues()[2]),a=this.getScaleValues()[3],p=o*i,u=new SuperMap.Geometry.Point(l.x+o*r,l.y+o*a);this.getSubSymbols()&&null!==this.getSubSymbols()&&this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],u,p,180),this.addScalePoint(u);var s=p,P=SuperMap.Plot.PlottingUtil.circlePoint(u,s,s,0);this.addScalePoint(P)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=[];3>=l.length?o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o),i=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t){r=(e.x-n.x)/i;this.getScaleValues()[2]=r;a=(e.y-n.y)/i;this.getScaleValues()[3]=a}else if(1===t){var r=this.getScaleValues()[2],a=this.getScaleValues()[3],p=new SuperMap.Geometry.Point(n.x+i*r,n.y+i*a),u=SuperMap.Plot.PlottingUtil.distance(p,e)/i;this.getScaleValues()[0]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol28400=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol28900",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=255,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(.05),l.getScaleValues().push(180)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=this.GetGoPts();if(!(t.length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.5),this.getScaleValues().push(.05),this.getScaleValues().push(180));var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[1]=o}var n=this.getScaleValues()[0],i=this.getScaleValues()[1],r=this.getScaleValues()[2],a=l*n,p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a,e);if(p.bfind){var u=p.index,s=p.pts,P=i*l*.5,c=new SuperMap.Geometry.Point(0,0),S=new SuperMap.Geometry.Point(.5*P,0),y=new SuperMap.Geometry.Point(0,P),h=[],g=SuperMap.Plot.PlottingUtil.coordinateTrans(s,c,r);h.push(g);var f=SuperMap.Plot.PlottingUtil.coordinateTrans(s,S,r);h.push(f);var M=SuperMap.Plot.PlottingUtil.coordinateTrans(s,y,r);h.push(M),this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,h);var d=new SuperMap.Geometry.Point(0,-2*P),m=new SuperMap.Geometry.Point(.15*P,-1.6*P),b=new SuperMap.Geometry.Point(-.15*P,-1.6*P),v=SuperMap.Plot.PlottingUtil.coordinateTrans(s,d,r),O=SuperMap.Plot.PlottingUtil.coordinateTrans(s,m,r),L=SuperMap.Plot.PlottingUtil.coordinateTrans(s,b,r),U=[];U.push(v),U.push(O),U.push(L);var w={surroundLineFlag:!1,fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,U,w);var _=new SuperMap.Geometry.Point(0,-P),T=SuperMap.Plot.PlottingUtil.coordinateTrans(s,_,r);(U=[]).push(T),U.push(v.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U,w);var x,E=[],G=[];for(x=0;x<=u;x++)E.push(e[x]);for(E.push(s),G.push(s),x=u+1;x<e.length;x++)G.push(e[x]);var V=1.2*P;if(a>V){var A=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a-V,E);if(A.bfind){var C=A.pts,Y=A.index,I=[];for(x=0;x<=Y;x++)I.push(E[x]);I.push(C),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,I)}}if(l-a>V){var j=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(V,G);if(j.bfind){var B=j.pts,R=j.index;for((I=[]).push(B),x=R+1;x<G.length;x++)I.push(G[x]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,I)}}this.clearScalePoints(),this.addScalePoint(s),this.addScalePoint(v)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(0===t){for(var i=e.clone(),r=-1,a=0,p=(new SuperMap.Geometry.Point(0,0),0);p<o.length-1;p++){var u=[];u.push(o[p]),u.push(o[p+1]);var s=SuperMap.Plot.PlottingUtil.projectPoint(i,o[p],o[p+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(s,u).isOnPolyLine){var P=SuperMap.Plot.PlottingUtil.distance(i,s);-1==r?(r=p,s,a=P):a>P&&(r=p,s,a=P)}}if(-1==r)return SuperMap.Plot.PlottingUtil.distance(i,o[0])>SuperMap.Plot.PlottingUtil.distance(i,o[o.length-1])?(r=o.length-1,this.calculateParts()):(r=0,this.calculateParts());S=0;if(0===r)S=SuperMap.Plot.PlottingUtil.distance(o[0],s);else for(p=0;p<r;p++)S+=SuperMap.Plot.PlottingUtil.distance(o[p],o[p+1]);if(S<0||S>n)return;var c=S/n;this.getScaleValues()[0]=c}else if(1==t){var S=this.getScaleValues()[0]*n,y=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(S,o);if(!y.bfind)return;var h=y.pts;(c=SuperMap.Plot.PlottingUtil.distance(h,e)/n)>.5&&(c=.5),this.getScaleValues()[1]=c;var g=SuperMap.Plot.PlottingUtil.radian(h,e)*this.RTOD;this.getScaleValues()[2]=g+90}}this.calculateParts()}},{key:"GetGoPts",value:function(){var t=[];return this.controlPoints.length<this.minEditPts?t:(t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),1===(t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length&&(t=[]),t)}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol28900=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&l.getScaleValues().push(.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e,l=t.length,o=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]),n=SuperMap.Plot.PlottingUtil.radian(t[0],t[1])*this.RTOD,i=[];2==l?(e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t),i.push.apply(i,e)):3==l&&(e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t),i=i.concat(e));var r=new SuperMap.Geometry.Point(.8*o,.1*o),a=new SuperMap.Geometry.Point(1.2*o,.1*o),p=new SuperMap.Geometry.Point(1.2*o,.1*-o),u=new SuperMap.Geometry.Point(.9*o,.1*-o),s=[];s.push(r),s.push(a),s.push(p),s.push(u);var P=[],c=0;for(c=0;c<4;c++){M=SuperMap.Plot.PlottingUtil.coordinateTrans(t[0],s[c],n);P.push(M)}var S=new SuperMap.Geometry.Point(-.8*o,.1*o),y=new SuperMap.Geometry.Point(-1.2*o,.1*o),h=new SuperMap.Geometry.Point(-1.1*o,.1*-o),g=new SuperMap.Geometry.Point(-.8*o,.1*-o);(s=[]).push(S),s.push(y),s.push(h),s.push(g);var f=[];for(c=0;c<4;c++){var M=SuperMap.Plot.PlottingUtil.coordinateTrans(t[0],s[c],n);f.push(M)}for(var d=SuperMap.Plot.PlottingUtil.linePnt(t[1],t[0],3*o),m=SuperMap.Plot.PlottingUtil.linePnt(t[0],t[1],2*o),b=[],c=0;c<i.length-1;c++){var v=SuperMap.Plot.PlottingUtil.intersectLines(i[c],i[c+1],d,m);v.isIntersectLines&&(T=SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(v.intersectPoint,i)).isOnPolyLine&&b.push(v.intersectPoint)}if(!(0>=b.length)&&(T=SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(b[0],i)).isOnPolyLine){var O=[];for(c=T.index+1;c<i.length;c++)O.push(i[c]);for(c=0;c<=T.index;c++)O.push(i[c]);var L=[],U=[];SuperMap.Plot.PlottingUtil.ptIsInPolygon(P,b[0])?(L.push.apply(L,P),U.push.apply(U,f)):(L.push.apply(L,f),U.push.apply(U,P));var w=[],_=[],T=-1;for(c=0;c<O.length;c++)if(!SuperMap.Plot.PlottingUtil.ptIsInPolygon(L,O[c])){if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(U,O[c])){T=c;break}w.push(O[c])}if(-1!==T)for(c=T;c<O.length;c++)if(!SuperMap.Plot.PlottingUtil.ptIsInPolygon(U,O[c])){if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(L,O[c]))break;_.push(O[c])}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,w),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,_),this.addLine(w),this.addLine(_)}}}},{key:"addLine",value:function(t){for(var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=0;l<t.length-2;l++){var o=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.02*e,t);if(-1!==o.index){var n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*e,t);if(-1!==n.index){var i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.92*e,t);if(-1!==i.index&&(l===o.index||l===o.index+1||l===i.index||l===i.index+1||l===n.index||l===n.index+1)){var r=SuperMap.Plot.PlottingUtil.radian(t[l+1],t[l])*this.RTOD,a=SuperMap.Plot.PlottingUtil.circlePoint(t[l+1],.02*e,.02*e,r+90);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[t[l+1],a])}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol29000=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function t(e,l,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,l);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,l,o)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(o)},p=function(t){return t&&t.__esModule?t:{default:t}}(l(28)),u=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol29002",0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,p["default"]),r(e,[{key:"calculateParts",value:function(){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"calculateParts",this).call(this)}}]),e}();e.default=u,SuperMap.Geometry.AlgoSymbol29002=u},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.clearScaleValues(),l.getScaleValues().push(.05),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e,l=t.length,o=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]),n=SuperMap.Plot.PlottingUtil.radian(t[0],t[1])*this.RTOD,i=[];2==l?(e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t),i.push.apply(i,e)):3==l&&(e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t),i=i.concat(e));var r=new SuperMap.Geometry.Point(.8*o,.1*o),a=new SuperMap.Geometry.Point(1.2*o,.1*o),p=new SuperMap.Geometry.Point(1.2*o,.1*-o),u=new SuperMap.Geometry.Point(.9*o,.1*-o),s=[];s.push(r),s.push(a),s.push(p),s.push(u);var P=[],c=0;for(c=0;c<4;c++){M=SuperMap.Plot.PlottingUtil.coordinateTrans(t[0],s[c],n);P.push(M)}var S=new SuperMap.Geometry.Point(-.8*o,.1*o),y=new SuperMap.Geometry.Point(-1.2*o,.1*o),h=new SuperMap.Geometry.Point(-1.1*o,.1*-o),g=new SuperMap.Geometry.Point(-.8*o,.1*-o);(s=[]).push(S),s.push(y),s.push(h),s.push(g);var f=[];for(c=0;c<4;c++){var M=SuperMap.Plot.PlottingUtil.coordinateTrans(t[0],s[c],n);f.push(M)}for(var d=SuperMap.Plot.PlottingUtil.linePnt(t[1],t[0],3*o),m=SuperMap.Plot.PlottingUtil.linePnt(t[0],t[1],2*o),b=[],c=0;c<i.length-1;c++){var v=SuperMap.Plot.PlottingUtil.intersectLines(i[c],i[c+1],d,m);v.isIntersectLines&&(T=SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(v.intersectPoint,i)).isOnPolyLine&&b.push(v.intersectPoint)}if(!(0>=b.length)&&(T=SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(b[0],i)).isOnPolyLine){var O=[];for(c=T.index+1;c<i.length;c++)O.push(i[c]);for(c=0;c<=T.index;c++)O.push(i[c]);var L=[],U=[];SuperMap.Plot.PlottingUtil.ptIsInPolygon(P,b[0])?(L.push.apply(L,P),U.push.apply(U,f)):(L.push.apply(L,f),U.push.apply(U,P));var w=[],_=[],T=-1;for(c=0;c<O.length;c++)if(!SuperMap.Plot.PlottingUtil.ptIsInPolygon(L,O[c])){if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(U,O[c])){T=c;break}w.push(O[c])}if(-1!==T)for(c=T;c<O.length;c++)if(!SuperMap.Plot.PlottingUtil.ptIsInPolygon(U,O[c])){if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(L,O[c]))break;_.push(O[c])}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,w),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,_);var x=SuperMap.Plot.PlottingUtil.polylineDistance(w),E=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*x,w);if(-1!==E.index)for(var G=0;G<w.length-1;G++)0!==G&&G!==E.index&&G!==w.length-2||(this.createRec(w,.02),this.createRec(w,.5),this.createRec(w,1),this.createRec(_,.02),this.createRec(_,.5),this.createRec(_,1))}}}},{key:"createRec",value:function(t,e){var l=SuperMap.Plot.PlottingUtil.polylineDistance(t),o=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(l*e,t);if(-1!==o.index){var n=[],i=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.02*l,t[o.index],o.pts);0===this.getScaleValues()[1]?n.push(i.pntRight):n.push(i.pntLeft),n.push(o.pts);var r=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.02*l,n[0],n[1]),a=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.02*l,n[1],n[0]),p=[];p.push(r.pntLeft,r.pntRight,a.pntLeft,a.pntRight,r.pntLeft.clone());var u={SurroundLineLimit:!0,lineTypeLimit:!0,fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,p,u)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol29003=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(12)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol29101",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());var l=[];t.length<=3?l=SuperMap.Plot.Primitives.getKendyShapePts(t):(t.push(t[0]),l=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,l);for(var o=0;o<4;o++){var n=o*(l.length-1)/4,i=new SuperMap.Geometry.Point(l[n].x,l[n].y),r=new SuperMap.Geometry.Point(l[n+1].x,l[n+1].y),a=new SuperMap.Geometry.Point((i.x+r.x)/2,(i.y+r.y)/2),p=SuperMap.Plot.PlottingUtil.radian(a,r)*this.RTOD,u=this.getScaleValues()[0]*e/2,s=SuperMap.Plot.PlottingUtil.circlePoint(a,u,u,p),P=SuperMap.Plot.PlottingUtil.circlePoint(a,4*u,4*u,p+270),c=SuperMap.Plot.PlottingUtil.circlePoint(a,u,u,p+180);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[s,P,c])}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol29101=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(12)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol29103",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);this.getIsEdit()||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());var o=[];t.length<=3?o=SuperMap.Plot.Primitives.getKendyShapePts(t):(t.push(t[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),o=SuperMap.Plot.PlottingUtil.clearSamePts(o),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,o);for(l=0;l<4;l++){var n=l*(o.length-1)/4,i=new SuperMap.Geometry.Point(o[n].x,o[n].y),r=new SuperMap.Geometry.Point(o[n+1].x,o[n+1].y),a=new SuperMap.Geometry.Point((i.x+r.x)/2,(i.y+r.y)/2),p=SuperMap.Plot.PlottingUtil.radian(a,r)*this.RTOD,u=e*this.getScaleValues()[0]/2,s=SuperMap.Plot.PlottingUtil.circlePoint(a,u,u,p),P=SuperMap.Plot.PlottingUtil.circlePoint(a,4*u,4*u,p+270),c=SuperMap.Plot.PlottingUtil.circlePoint(a,u,u,p+180),S={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[s,P,c],S)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol29103=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol29401",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.1),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=this.getScaleValues()[0]*e,n=SuperMap.Plot.PlottingUtil.paraLine(t,o,!0),i=SuperMap.Plot.PlottingUtil.paraLine(t,o,!1);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var r=new SuperMap.Geometry.Point(t[0].x,t[0].y),a=new SuperMap.Geometry.Point(t[1].x,t[1].y),p=180*SuperMap.Plot.PlottingUtil.radian(r,a)/Math.PI,u=r,s=n[0],P=[];P.push(u),P.push(s),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,P);var c=new SuperMap.Geometry.Point(0,.8*o),S=new SuperMap.Geometry.Point(0,-.8*o),y=SuperMap.Plot.PlottingUtil.coordinateTrans(u,c,p),h=SuperMap.Plot.PlottingUtil.coordinateTrans(u,S,p);(P=[]).push(y),P.push(h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P);var g=new SuperMap.Geometry.Point(-.3*o,.4*o),f=new SuperMap.Geometry.Point(-.3*o,-.4*o),M=SuperMap.Plot.PlottingUtil.coordinateTrans(u,g,p),d=SuperMap.Plot.PlottingUtil.coordinateTrans(u,f,p);(P=[]).push(M),P.push(d),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P);var m=new SuperMap.Geometry.Point(.3*o,.4*o),b=new SuperMap.Geometry.Point(.3*o,-.4*o),v=SuperMap.Plot.PlottingUtil.coordinateTrans(u,m,p),O=SuperMap.Plot.PlottingUtil.coordinateTrans(u,b,p);(P=[]).push(v),P.push(O),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P);var L=new SuperMap.Geometry.Point((r.x+a.x)/2,(r.y+a.y)/2),U=new SuperMap.Geometry.Point((n[0].x+n[n.length-1].x)/2,(n[n.length-1].y+n[0].y)/2);(P=[]).push(L),P.push(U),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,P);var w=SuperMap.Plot.PlottingUtil.coordinateTrans(L,c,p),_=SuperMap.Plot.PlottingUtil.coordinateTrans(L,S,p);(P=[]).push(w),P.push(_),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P);var T=SuperMap.Plot.PlottingUtil.coordinateTrans(L,g,p),x=SuperMap.Plot.PlottingUtil.coordinateTrans(L,f,p);(P=[]).push(T),P.push(x),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P);var E=SuperMap.Plot.PlottingUtil.coordinateTrans(L,m,p),G=SuperMap.Plot.PlottingUtil.coordinateTrans(L,b,p);(P=[]).push(E),P.push(G),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P);var V=a,A=n[n.length-1];(P=[]).push(V),P.push(A),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,P);var C=SuperMap.Plot.PlottingUtil.coordinateTrans(V,c,p),Y=SuperMap.Plot.PlottingUtil.coordinateTrans(V,S,p);(P=[]).push(C),P.push(Y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P);var I=SuperMap.Plot.PlottingUtil.coordinateTrans(V,g,p),j=SuperMap.Plot.PlottingUtil.coordinateTrans(V,f,p);(P=[]).push(I),P.push(j),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P);var B=SuperMap.Plot.PlottingUtil.coordinateTrans(V,m,p),R=SuperMap.Plot.PlottingUtil.coordinateTrans(V,b,p);(P=[]).push(B),P.push(R),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P),this.addScalePoint(n[0],0)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint&&0===t){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);var i=new SuperMap.Geometry.Point(l[0].x,l[0].y),r=new SuperMap.Geometry.Point(e.x,e.y),a=SuperMap.Plot.PlottingUtil.distance(i,r)/o;this.getScaleValues()[0]=a}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol29401=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function t(e,l,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,l);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,l,o)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(o)},p=function(t){return t&&t.__esModule?t:{default:t}}(l(15)),u=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol29800",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=30,0===l.getScaleValues().length&&(l.getScaleValues().push(.2),l.getScaleValues().push(.2),l.getScaleValues().push(.4),l.getScaleValues().push(.4),l.getScaleValues().push(.1),l.getScaleValues().push(.2),l.getScaleValues().push(.1),l.getScaleValues().push(.2),l.getScaleValues().push(1),l.getScaleValues().push(1)),l}return i(e,p["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length>=2&&t.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);this.getScaleValues()[0];SuperMap.Geometry.AlgoSymbol1004.prototype.applyUse.apply(this,arguments),this.getScaleValues().length<9&&(this.getScaleValues().push(.2),this.getScaleValues().push(.2),this.getScaleValues().push(.4),this.getScaleValues().push(.4),this.getScaleValues().push(.1),this.getScaleValues().push(.2),this.getScaleValues().push(.1),this.getScaleValues().push(.2),this.getScaleValues().push(1),this.getScaleValues().push(1));var o,n=e*this.getScaleValues()[4],i=e*this.getScaleValues()[5],r=SuperMap.Plot.PlottingUtil.distance(t[1],t[0]),a=SuperMap.Plot.PlottingUtil.linePnt(t[1],t[0],r+i);o=(this.getScaleValues()[8],SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,t[1],a));var p,u=e*this.getScaleValues()[6],s=e*this.getScaleValues()[7],P=SuperMap.Plot.PlottingUtil.linePnt(t[0],t[1],r+s);p=(this.getScaleValues()[9],SuperMap.Plot.PlottingUtil.getSidePointsOfLine(u,t[0],P));var c=[];c.push(new SuperMap.Geometry.Point(o.pntLeft.x,o.pntLeft.y)),c.push(new SuperMap.Geometry.Point(t[0].x,t[0].y)),c.push(new SuperMap.Geometry.Point(t[1].x,t[1].y)),c.push(new SuperMap.Geometry.Point(p.pntRight.x,p.pntRight.y));var S=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(c);S=SuperMap.Plot.PlottingUtil.clearSamePts(S),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S),this.addScalePoint(o.pntLeft,3),this.addScalePoint(p.pntRight,4)}}},{key:"modifyPoint",value:function(t,l){if(!0===l.isScalePoint){var o=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.projectPoint(l,o[0],o[1]);if(t<=2&&a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"modifyPoint",this).call(this,t,l),3===t){var r=(u=SuperMap.Plot.PlottingUtil.distance(l,i))/n,p=(P=SuperMap.Plot.PlottingUtil.distance(i,o[0]))/n;this.getScaleValues()[4]=r,this.getScaleValues()[5]=p,SuperMap.Plot.PlottingUtil.pointIsRightToLine(o[0],o[1],l)?this.getScaleValues()[8]=1:this.getScaleValues()[8]=0}if(4===t){var u=SuperMap.Plot.PlottingUtil.distance(l,i),s=u/n,P=SuperMap.Plot.PlottingUtil.distance(i,o[1]),c=P/n;this.getScaleValues()[6]=s,this.getScaleValues()[7]=c,SuperMap.Plot.PlottingUtil.pointIsRightToLine(o[0],o[1],l)?this.getScaleValues()[9]=1:this.getScaleValues()[9]=0}}this.calculateParts()}}]),e}();e.default=u,SuperMap.Geometry.AlgoSymbol29800=u},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol29903",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.05),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<1&&(this.clearScaleValues(),this.getScaleValues().push(.5));var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=this.getLinePts(e,this.getScaleValues()[0]),i=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),r=SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)*this.RTOD,a=SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt);this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],i,a,r);for(var p=[],u=[],s=0;s<=n.startIndex;s++)p.push(e[s]);if(p.push(n.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),n.endIndex<=e.length){u.push(n.endPt);for(var s=n.endIndex+1,P=e.length-1;s<=P;s++)u.push(e[s]);if(this.addArrow(u),e.length>=2){var c=l*this.getSubSymbolScaleValue(),S=.3*c,y=.8*c,h=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,l-y),g=1.1*c,f=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,l-g),r=SuperMap.Plot.PlottingUtil.radian(h.pt,f.pt)*this.RTOD,M=SuperMap.Plot.PlottingUtil.circlePoint(h.pt,S,S,r+90),d=SuperMap.Plot.PlottingUtil.circlePoint(h.pt,S,S,r-90),m=SuperMap.Plot.PlottingUtil.circlePoint(f.pt,S,S,r+90),b=SuperMap.Plot.PlottingUtil.circlePoint(f.pt,S,S,r-90);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[M,d]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[m,b])}var v=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,.5*l),O=SuperMap.Plot.PlottingUtil.circlePoint(v.pt,l*this.getScaleValues()[0],l*this.getScaleValues()[0],r);this.addScalePoint(O,0)}}}},{key:"getLinePts",value:function(t,e){var l={};e>.5&&(l.startIndex=0,l.startPt=t[0],l.endIndex=0,l.endPt=t[0]);var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,o*(.5-e)),i=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,o*(.5+e));return l.startIndex=n.index,l.startPt=n.pt,l.endIndex=i.index,l.endPt=i.pt,l}},{key:"modifyPoint",value:function(t,e){if(0===t&&!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o),r=2*SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.4?r:.4}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol29903=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(30)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30002",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.2||o<=0)&&(o=.2),this.getScaleValues()[2]=o,this.getScaleValues()[4]=o}var n=l*this.getScaleValues()[0],i=180*this.getScaleValues()[1]/Math.PI,r=l*this.getScaleValues()[2],a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,n);if(-1!==a.index){var p=a.pt,u=new SuperMap.Geometry.Point(e[a.index].x,e[a.index].y),s=new SuperMap.Geometry.Point(e[a.index+1].x,e[a.index+1].y),P=180*SuperMap.Plot.PlottingUtil.radian(u,s)/Math.PI,c=SuperMap.Plot.PlottingUtil.circlePoint(p,r,r,P+i);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[p,c]);var S=180*SuperMap.Plot.PlottingUtil.radian(p,c)/Math.PI,y=SuperMap.Plot.PlottingUtil.circlePoint(c,.2*r,.2*r,S-157.5),h=SuperMap.Plot.PlottingUtil.circlePoint(c,.2*r,.2*r,S+157.5),g={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[c,y,h],g);for(var f=4*(l*this.getScaleValues()[4])*Math.sin(Math.PI/8),M=this._getLeftSubSymbolPts(f),d=e[0].clone(),m=-1,b=null,v=1;v<e.length;v++)if(SuperMap.Plot.PlottingUtil.distance(d,e[v])>.5*f){m=v-1,b=SuperMap.Plot.PlottingUtil.linePnt(d,e[v],.5*f);break}-1===m&&(m=e.length-1,b=e[e.length-1]);var O=null;if(null!==b){for(var L=180*SuperMap.Plot.PlottingUtil.radian(d,b)/Math.PI,U=[],v=0;v<M.length;v++)U.push(SuperMap.Plot.PlottingUtil.coordinateTrans(d,M[v],L));O=U[3].clone(),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U)}for(var w=this._getRightSubSymbolPts(f),_=e[e.length-1].clone(),T=-1,x=null,v=e.length-2;v>=0;v--)if(SuperMap.Plot.PlottingUtil.distance(_,e[v])>.5*f){T=v,x=SuperMap.Plot.PlottingUtil.linePnt(_,e[v],.5*f);break}if(-1===T&&(T=0,x=e[0]),null!==x){for(var E=180*SuperMap.Plot.PlottingUtil.radian(_,x)/Math.PI,G=[],v=0;v<w.length;v++)G.push(SuperMap.Plot.PlottingUtil.coordinateTrans(_,w[v],E));this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,G)}if(m<=T){var V=[];V.push(b);for(v=m+1;v<=T;v++)V.push(e[v]);V.push(x),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,V)}this.addScalePoint(p),this.addScalePoint(c),null!==O&&this.addScalePoint(O)}}}},{key:"_getRightSubSymbolPts",value:function(t){var e=.25*t,l=[];return l.push(new SuperMap.Geometry.Point(0,2*e)),l.push(new SuperMap.Geometry.Point(2*e,2*e)),l.push(new SuperMap.Geometry.Point(2*e,-e)),l.push(new SuperMap.Geometry.Point(0,-2*e)),l.push(new SuperMap.Geometry.Point(0,2*e)),l}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30002=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(8)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3010103",l}return i(e,a["default"]),r(e,[{key:"createSubSymbol1",value:function(t,e,l){var o=this.getSubSymbolPts1(e);this.createSubSymbol(t,e,l,o)}},{key:"createSubSymbol2",value:function(t,e,l){var o=this.getSubSymbolPts2(e);this.createSubSymbol(t,e,l,o)}},{key:"getSubSymbolPts1",value:function(t){var e=t/4,l=[];return l.push(new SuperMap.Geometry.Point(-2*e,-e)),l.push(new SuperMap.Geometry.Point(2*e,-e)),l.push(new SuperMap.Geometry.Point(e,e)),l.push(new SuperMap.Geometry.Point(-2*e,e)),l}},{key:"getSubSymbolPts2",value:function(t){var e=t/4,l=[];return l.push(new SuperMap.Geometry.Point(-2*e,0)),l.push(new SuperMap.Geometry.Point(0,-e)),l.push(new SuperMap.Geometry.Point(2*e,0)),l.push(new SuperMap.Geometry.Point(0,e)),l}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3010103=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(8)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3010104",l}return i(e,a["default"]),r(e,[{key:"getSubSymbolPts",value:function(t){var e=t/4,l=[];return l.push(new SuperMap.Geometry.Point(2*e,0)),l.push(new SuperMap.Geometry.Point(0,e)),l.push(new SuperMap.Geometry.Point(-2*e,0)),l.push(new SuperMap.Geometry.Point(0,-e)),l.push(new SuperMap.Geometry.Point(-e,-e)),l.push(new SuperMap.Geometry.Point(e,-e)),l.push(new SuperMap.Geometry.Point(0,-e)),l}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3010104=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(8)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3010105",l}return i(e,a["default"]),r(e,[{key:"getSubSymbolPts",value:function(t){var e=t/4,l=[];l.push(new SuperMap.Geometry.Point(-2*e,-e)),l.push(new SuperMap.Geometry.Point(e,-e));for(var o=-90;o<=90;o+=5)l.push(SuperMap.Plot.PlottingUtil.circlePoint(new SuperMap.Geometry.Point(e,0),e,e,o));return l.push(new SuperMap.Geometry.Point(e,e)),l.push(new SuperMap.Geometry.Point(-2*e,e)),l}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3010105=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3010106",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){1!==this.getScaleValues().length&&(this.clearScaleValues(),this.getScaleValues().push(.05));var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t,!1);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,.3*l);if(-1!==o.index){var n=o.pt,i=o.index;if(!this.getIsEdit()){var r=this.getDefaultSubSymbolSize()/l;(r>.3||r<=0)&&(r=.3),this.getScaleValues()[0]=.8*r}var a=l*this.getScaleValues()[0]*.5,p=SuperMap.Plot.PlottingUtil.radian(n,e[i+1])*this.RTOD,u=SuperMap.Plot.PlottingUtil.circlePoint(n,a,a,p+90),s=SuperMap.Plot.PlottingUtil.circlePoint(n,a,a,p-90),P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(a,n,u),c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(a,n,s);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[P.pntLeft,P.pntRight]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[c.pntLeft,c.pntRight]);var S=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,.6*l);if(-1!==S.index){var y=S.pt,h=S.index,g=SuperMap.Plot.PlottingUtil.radian(y,e[h+1])*this.RTOD,f=SuperMap.Plot.PlottingUtil.circlePoint(y,a,a,g+90),M=SuperMap.Plot.PlottingUtil.circlePoint(y,a,a,g-90),d=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(a,y,f),m=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(a,y,M);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[d.pntLeft,d.pntRight]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[m.pntLeft,m.pntRight]),this.addArrow(e),this.addScalePoint(M,0)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l,!1);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.6*n,o);if(!i.bfind)return;var r=2*SuperMap.Plot.PlottingUtil.distance(e,i.pts);this.getScaleValues()[0]=r/n}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3010106=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(32)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return 0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3010108",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3010108=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(2)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="调",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3010301=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(2)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="冲",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3010302=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(2)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="出",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3010303=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(2)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="协",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3010304=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(34)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30201",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);o=SuperMap.Plot.PlottingUtil.clearSamePts(o),this.getIsEdit()||(this.getScaleValues()[1]=2*this.getSubSymbolScaleValue());var n=e*this.getScaleValues()[1],i=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,n);if(-1!==i.index){var r=t[0],a=i.pt,p=SuperMap.Plot.PlottingUtil.radian(r,a)*this.RTOD,u=new SuperMap.Geometry.Point(0,.1*n),s=new SuperMap.Geometry.Point(.4*n,.1*n),P=new SuperMap.Geometry.Point(.4*n,-.1*n),c=new SuperMap.Geometry.Point(0,-.1*n),S=SuperMap.Plot.PlottingUtil.coordinateTrans(r,u,p),y=SuperMap.Plot.PlottingUtil.coordinateTrans(r,s,p),h=SuperMap.Plot.PlottingUtil.coordinateTrans(r,P,p),g=SuperMap.Plot.PlottingUtil.coordinateTrans(r,c,p),f={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[S,y,h,g,S],f);var M=new SuperMap.Geometry.Point(.3*n,.1*n),d=new SuperMap.Geometry.Point(.3*n,-.1*n),m=SuperMap.Plot.PlottingUtil.coordinateTrans(r,M,p),b=SuperMap.Plot.PlottingUtil.coordinateTrans(r,d,p);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[m,b]);var v=new SuperMap.Geometry.Point(.4*n,0),O=new SuperMap.Geometry.Point(.8*n,0),L=SuperMap.Plot.PlottingUtil.coordinateTrans(r,v,p),U=SuperMap.Plot.PlottingUtil.coordinateTrans(r,O,p);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[L,U]);var w=new SuperMap.Geometry.Point(.7*n,.025*n),_=new SuperMap.Geometry.Point(.7*n,-.025*n),T=SuperMap.Plot.PlottingUtil.coordinateTrans(r,w,p),x=SuperMap.Plot.PlottingUtil.coordinateTrans(r,_,p);this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[U,T,x],f);var E=[];E.push(i.pt);for(l=i.index+1;l<o.length;l++)E.push(o[l]);this.addArrow(E);var G=SuperMap.Plot.PlottingUtil.circlePoint(r,n,n,p+90);this.addScalePoint(G,0)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30201=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3020901",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.125)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[];if(2==t.length){var l=new SuperMap.Geometry.Point(t[0].x,t[0].y),o=new SuperMap.Geometry.Point(t[1].x,t[1].y),n=SuperMap.Plot.PlottingUtil.distance(l,o),i=180*SuperMap.Plot.PlottingUtil.radian(l,o)/Math.PI,r=SuperMap.Plot.PlottingUtil.circlePoint(l,n,n,i+60);e.push(t[0]),e.push(o),e.push(r),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e)}else{this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);for(var a=0;a<t.length;a++)e.push(t[a])}var p=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),u=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[2]=u*this.getSubSymbolScaleValue()/u);var s=this.getScaleValues()[0],P=this.getScaleValues()[1],c=this.getScaleValues()[2],S=new SuperMap.Geometry.Point(p.x+u*s,p.y+u*P),y=u*c;0<this.getSubSymbols().length&&this.computeSubSymbol(this.getSubSymbols()[0],S,y,0),this.addScalePoint(S.clone());var h=SuperMap.Plot.PlottingUtil.circlePoint(S,.5*y,.5*y,90);this.addScalePoint(h)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=[];if(2==l.length){var n=new SuperMap.Geometry.Point(l[0].x,l[0].y),i=new SuperMap.Geometry.Point(l[1].x,l[1].y),r=SuperMap.Plot.PlottingUtil.distance(n,i),a=180*SuperMap.Plot.PlottingUtil.radian(n,i)/Math.PI,p=SuperMap.Plot.PlottingUtil.circlePoint(n,r,r,a+60);o.push(l[0]),o.push(i),o.push(p),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,o)}else{this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,l);for(var u=0;u<l.length;u++)o.push(l[u])}var s=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o),P=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t)this.getScaleValues()[0]=(e.x-s.x)/P,this.getScaleValues()[1]=(e.y-s.y)/P;else if(1===t){var c=new SuperMap.Geometry.Point(s.x+P*this.getScaleValues()[0],s.y+P*this.getScaleValues()[1]),S=2*(r=SuperMap.Plot.PlottingUtil.distance(e,c))/P;S<.5&&(this.getScaleValues()[2]=S)}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3020901=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3032000",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(0),l.getScaleValues().push(1),l.getScaleValues().push(.1),l.getScaleValues().push(0),l.getScaleValues().push(1),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e,l=t[0].clone(),o=t[1].clone();if(2==t.length){var n=SuperMap.Plot.PlottingUtil.distance(l,o),i=new SuperMap.Geometry.Point((l.x+o.x)/2,(l.y+o.y)/2);e=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n/2.7,l,i).pntLeft,t.push(e)}else 3==t.length&&(e=t[2]);var r=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t);r=SuperMap.Plot.PlottingUtil.clearSamePts(r),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,r);var a=SuperMap.Plot.PlottingUtil.distance(l,e);if(!this.getIsEdit()){var p=this.getSubSymbolScaleValue()*SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints);this.getScaleValues()[0]=p/a*.6,this.getScaleValues()[3]=p/a*.6}var u=this.getScaleValues()[0],s=this.getScaleValues()[1],P=(this.getScaleValues()[2],this.getScaleValues()[3]),c=this.getScaleValues()[4],S=(this.getScaleValues()[5],this.getScaleValues()[6]),y=this.getScaleValues()[7],h=this.getScaleValues()[8],g=this.getScaleValues()[9],f=new SuperMap.Geometry.Point(e.x+(o.x-e.x)/2,e.y-.6*(e.y-o.y)),M=new SuperMap.Geometry.Point(e.x-(e.x-l.x)/2,e.y-.6*(e.y-l.y)),d=new SuperMap.Geometry.Point(f.x+a*S,f.y+a*y),m=new SuperMap.Geometry.Point(M.x+a*h,M.y+a*g),b=[],v=.2*SuperMap.Plot.PlottingUtil.distance(d,m),O=SuperMap.Plot.PlottingUtil.linePnt(d,m,v),L=SuperMap.Plot.PlottingUtil.linePnt(m,d,v);b.push(O),b.push(L),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b);var U=a*u/.4,w=s;this.getSubSymbols()&&null!==this.getSubSymbols()&&this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],d,U,w);var _=a*P/.4,T=c;this.getSubSymbols()&&null!==this.getSubSymbols()&&this.getSubSymbols().length>1&&this.computeSubSymbol(this.getSubSymbols()[1],m,_,T),this.addScalePoint(d);var x=SuperMap.Plot.PlottingUtil.circlePoint(d,.5*U,.5*U,w);this.addScalePoint(x),this.addScalePoint(m);var E=SuperMap.Plot.PlottingUtil.circlePoint(m,.5*_,.5*_,T);this.addScalePoint(E)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;10>this.getScaleValues().length&&(this.clearScaleValues(),this.getScaleValues().push(.1),this.getScaleValues().push(0),this.getScaleValues().push(1),this.getScaleValues().push(.1),this.getScaleValues().push(0),this.getScaleValues().push(1),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var o,n=l[0],i=l[1];if(2==l.length){var r=SuperMap.Plot.PlottingUtil.distance(n,i),a=new SuperMap.Geometry.Point((n.x+i.x)/2,(n.y+i.y)/2);o=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r/2.7,n,a).pntLeft,l.push(o)}else 3==l.length&&(o=l[2]);var p=new SuperMap.Geometry.Point(o.x+(i.x-o.x)/2,o.y-.6*(o.y-i.y)),u=new SuperMap.Geometry.Point(o.x-(o.x-n.x)/2,o.y-.6*(o.y-n.y)),s=SuperMap.Plot.PlottingUtil.distance(n,o),P=e;if(0==t){c=(P.x-p.x)/s;this.getScaleValues()[6]=c;S=(P.y-p.y)/s;this.getScaleValues()[7]=S}else if(1==t){var c=this.getScaleValues()[6],S=this.getScaleValues()[7],y=new SuperMap.Geometry.Point(p.x+s*c,p.y+s*S),h=2*(r=SuperMap.Plot.PlottingUtil.distance(y,P))*.4/s;this.getScaleValues()[0]=h;var g=180*SuperMap.Plot.PlottingUtil.radian(y,P)/Math.PI;this.getScaleValues()[1]=g,this.getScaleValues()[2]=0<=g&&g<90?1:90<=g&&g<180?2:180<=g&&g<270?3:4}else if(2==t){f=(P.x-u.x)/s;this.getScaleValues()[8]=f;M=(P.y-u.y)/s;this.getScaleValues()[9]=M}else if(3==t){var f=this.getScaleValues()[8],M=this.getScaleValues()[9],d=new SuperMap.Geometry.Point(u.x+s*f,u.y+s*M),m=2*(r=SuperMap.Plot.PlottingUtil.distance(d,P))*.4/s;this.getScaleValues()[3]=m;var b=180*SuperMap.Plot.PlottingUtil.radian(d,P)/Math.PI;this.getScaleValues()[4]=b,this.getScaleValues()[5]=0<=b&&b<90?1:90<=b&&b<180?2:180<=b&&b<270?3:4}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3032000=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30800",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,o);var n=.5*e,i=e*this.getSubSymbolScaleValue(),r=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,n);if(-1!==r.index){var a=r.pt,p=o[r.index],u=o[r.index+1],s=SuperMap.Plot.PlottingUtil.radian(p,u)*this.RTOD,P=SuperMap.Plot.PlottingUtil.circlePoint(a,i,i,s+90);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[r.pt,P]);var c=SuperMap.Plot.PlottingUtil.radian(a,P)*this.RTOD,S=SuperMap.Plot.PlottingUtil.circlePoint(P,i,i,c+30),y=SuperMap.Plot.PlottingUtil.circlePoint(P,i,i,c+33),h=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt([P,S,y]);h=SuperMap.Plot.PlottingUtil.clearSamePts(h);var g=SuperMap.Plot.PlottingUtil.polylineDistance(h),f=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.9*g,h);if(-1!==f.index){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h.slice(0,f.index));var M=SuperMap.Plot.PlottingUtil.radian(P,S)*this.RTOD,d=new SuperMap.Geometry.Point(-.2*i,.05*i),m=new SuperMap.Geometry.Point(-.2*i,-.05*i),b=SuperMap.Plot.PlottingUtil.coordinateTrans(S,d,M+17),v=SuperMap.Plot.PlottingUtil.coordinateTrans(S,m,M+17),O={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[S,b,v],O);var L=SuperMap.Plot.PlottingUtil.circlePoint(P,i,i,c+330),U=SuperMap.Plot.PlottingUtil.circlePoint(P,i,i,c+327),w=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt([P,L,U]);w=SuperMap.Plot.PlottingUtil.clearSamePts(w),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,w.slice(0,f.index));var _=SuperMap.Plot.PlottingUtil.radian(P,L)*this.RTOD,T=SuperMap.Plot.PlottingUtil.coordinateTrans(L,d,_-17),x=SuperMap.Plot.PlottingUtil.coordinateTrans(L,m,_-17);this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[L,T,x],O)}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30800=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(4)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol31301",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var l=this.getScaleValues()[0]*e,o=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,t[0],t[1]),n=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,t[1],t[0]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[o.pntLeft,o.pntRight]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[n.pntLeft,n.pntRight]);var i=[],r=3*l;i.push(t[0]),i.push(t[1]);for(var a=SuperMap.Plot.PlottingUtil.paraLine(i,r,!0),p=SuperMap.Plot.PlottingUtil.paraLine(i,r,!1),u=[],s=0;s<a.length;s++)u.push(a[s]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u);var P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,a[1],a[0]),c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,a[0],a[1]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[P.pntLeft,P.pntRight]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[c.pntLeft,c.pntRight]);for(var S=[],y=0;y<p.length;y++)S.push(p[y]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S);var h=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,p[1],p[0]),g=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,p[0],p[1]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[h.pntLeft,h.pntRight]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[g.pntLeft,g.pntRight]),this.addScalePoint(n.pntRight,0)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol31301=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(4)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol31302",0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=this.getScaleValues()[0]*e,o=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,.5*e);if(-1!==o.index){var n=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,t[0],t[1]),i=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,t[1],t[0]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[n.pntLeft,n.pntRight]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[i.pntLeft,i.pntRight]);var r=SuperMap.Plot.PlottingUtil.linePnt(o.pt,t[0],l),a=SuperMap.Plot.PlottingUtil.linePnt(o.pt,t[1],l);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[t[0],r]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[a,t[1]]);var p=SuperMap.Plot.PlottingUtil.radian(t[0],t[1])*this.RTOD;this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],o.pt,2*l,p),this.addScalePoint(i.pntRight)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol31302=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(4)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol31303",0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=this.getScaleValues()[0]*e,n=SuperMap.Plot.PlottingUtil.linePnt(t[0],t[1],.5*e),i=SuperMap.Plot.PlottingUtil.linePnt(n,t[0],o),r=SuperMap.Plot.PlottingUtil.linePnt(n,t[1],o);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[t[0],i]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[r,t[1]]);var a=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(o,t[1],t[0]),p=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(o,t[0],t[1]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[a.pntLeft,a.pntRight]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[p.pntLeft,p.pntRight]);var u=[],s=[];u.push(t[0]),u.push(i),s.push(r),s.push(t[1]);for(var P=SuperMap.Plot.PlottingUtil.paraLine(u,o,!0),c=SuperMap.Plot.PlottingUtil.paraLine(u,o,!1),S=SuperMap.Plot.PlottingUtil.paraLine(s,o,!0),y=SuperMap.Plot.PlottingUtil.paraLine(s,o,!1),h=[],g=[],f=0;f<P.length;f++)h.push(P[f]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h);for(var M=0;M<c.length;M++)g.push(c[M]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);for(var d=[],m=[],b=0;b<S.length;b++)d.push(S[b]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d);for(var v=0;v<y.length;v++)m.push(y[v]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m);var O=SuperMap.Plot.PlottingUtil.radian(t[0],t[1])*this.RTOD;this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],n,2*o,O),this.addScalePoint(a.pntRight,0)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol31303=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(4)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol31304",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=this.getScaleValues()[0]*e,n=SuperMap.Plot.PlottingUtil.linePnt(t[0],t[1],.5*e),i=SuperMap.Plot.PlottingUtil.linePnt(n,t[0],o),r=SuperMap.Plot.PlottingUtil.linePnt(n,t[1],o),a=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*o,t[1],t[0]),p=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*o,t[0],t[1]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[a.pntLeft,a.pntRight]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[p.pntLeft,p.pntRight]);var u=[],s=[];u.push(new SuperMap.Geometry.Point(t[0].x,t[0].y)),u.push(new SuperMap.Geometry.Point(i.x,i.y)),s.push(new SuperMap.Geometry.Point(r.x,r.y)),s.push(new SuperMap.Geometry.Point(t[1].x,t[1].y));for(var P=SuperMap.Plot.PlottingUtil.paraLine(u,o,!0),c=SuperMap.Plot.PlottingUtil.paraLine(u,o,!1),S=SuperMap.Plot.PlottingUtil.paraLine(s,o,!0),y=SuperMap.Plot.PlottingUtil.paraLine(s,o,!1),h=[],g=[],l=0;l<P.length;l++)h.push(P[l]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h);for(var f=0;f<c.length;f++)g.push(c[f]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);for(var M=[],d=[],m=0;m<S.length;m++)M.push(S[m]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M);for(var b=0;b<y.length;b++)d.push(y[b]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d);var v=i,O=r,L=SuperMap.Plot.PlottingUtil.radian(v,O)*this.RTOD,U=(SuperMap.Plot.PlottingUtil.distance(v,O),{surroundLineFlag:!1,fontSize:15,fontSizeLimit:!0});U.labelAlign="cm",U.labelRotation=-L,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,n,U,"慑阻"),this.addScalePoint(a.pntRight,0)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol31304=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(35)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol31401",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,t);var e=Math.abs(t[1].x-t[0].x)*this.getSubSymbolScaleValue(),l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),o=new SuperMap.Geometry.Point(l.x-e,l.y-e),n=new SuperMap.Geometry.Point(l.x+e,l.y-3*e),i={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,[o,n],i,!0);var r=new SuperMap.Geometry.Point(l.x-e,l.y+e),a=new SuperMap.Geometry.Point(l.x-3*e,l.y+3*e);this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,[r,a],i,!0);var p=new SuperMap.Geometry.Point(l.x+e,l.y+e),u=new SuperMap.Geometry.Point(l.x+3*e,l.y+3*e);this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,[p,u],i,!0)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol31401=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(36)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol31601",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,t);var e=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),l=Math.abs(t[1].x-t[0].x)*this.getSubSymbolScaleValue(),o=new SuperMap.Geometry.Point(e.x-l,e.y+l),n=new SuperMap.Geometry.Point(e.x+l,e.y+l);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[o,n]);var i=new SuperMap.Geometry.Point(e.x-2*l,e.y),r=new SuperMap.Geometry.Point(e.x+2*l,e.y);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[i,r]);var a=new SuperMap.Geometry.Point(e.x-l,e.y-l),p=new SuperMap.Geometry.Point(e.x+l,e.y-l);if(this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[a,p]),t[0].y>t[1].y){var u=new SuperMap.Geometry.Point(e.x,t[0].y),s=new SuperMap.Geometry.Point(e.x,t[0].y-l);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[u,s]);var P=new SuperMap.Geometry.Point(e.x,t[1].y),c=new SuperMap.Geometry.Point(e.x,t[1].y+l);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[P,c])}else{var S=new SuperMap.Geometry.Point(e.x,t[1].y),y=new SuperMap.Geometry.Point(e.x,t[1].y-l);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[S,y]);var h=new SuperMap.Geometry.Point(e.x,t[0].y),g=new SuperMap.Geometry.Point(e.x,t[0].y+l);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[h,g])}if(t[0].x>t[1].x){var f=new SuperMap.Geometry.Point(t[0].x,e.y),M=new SuperMap.Geometry.Point(t[0].x-l,e.y);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[f,M]);var d=new SuperMap.Geometry.Point(t[1].x,e.y),m=new SuperMap.Geometry.Point(t[1].x+l,e.y);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[d,m])}else{var b=new SuperMap.Geometry.Point(t[1].x,e.y),v=new SuperMap.Geometry.Point(t[1].x-l,e.y);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[b,v]);var O=new SuperMap.Geometry.Point(t[0].x,e.y),L=new SuperMap.Geometry.Point(t[0].x+l,e.y);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[O,L])}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol31601=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol31803",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);o=SuperMap.Plot.PlottingUtil.clearSamePts(o),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,o);var n=.5*e,i=e*this.getSubSymbolScaleValue(),r=i,a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,n);if(-1!==a.index){var p=a.pt,u=new SuperMap.Geometry.Point(o[a.index].x,o[a.index].y),s=new SuperMap.Geometry.Point(o[a.index+1].x,o[a.index+1].y),P=180*SuperMap.Plot.PlottingUtil.radian(u,s)/Math.PI,c=SuperMap.Plot.PlottingUtil.circlePoint(p,i,i,P+90);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[p,c]);var S=180*SuperMap.Plot.PlottingUtil.radian(p,c)/Math.PI,y=new SuperMap.Geometry.Point(-.2*i,.05*i),h=new SuperMap.Geometry.Point(-.2*i,-.05*i),g=SuperMap.Plot.PlottingUtil.coordinateTrans(c,y,S),f=SuperMap.Plot.PlottingUtil.coordinateTrans(c,h,S),M={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[c,g,f],M);var d=new SuperMap.Geometry.Point(0,-.6*r);d=SuperMap.Plot.PlottingUtil.coordinateTrans(p,d,P),this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],d,r,P-90)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol31803=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol32300",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,l.getScaleValues().length,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e,l=t[0],o=t[1];e=2==t.length?o:t[2];var n=new SuperMap.Geometry.Point((l.x+o.x)/2,(l.y+o.y)/2),i=SuperMap.Plot.PlottingUtil.distance(n,e),r=.5*i,a=(g=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r,n,e)).pntLeft,p=g.pntRight,u=!(n.x>e.x),s=[];u?(s.push(l),s.push(a)):(s.push(l),s.push(p)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s);var P=[];u?(P.push(o),P.push(p)):(P.push(o),P.push(a)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P);var c=.37*i,S=SuperMap.Plot.PlottingUtil.linePnt(n,e,c),y=.09*i,h=[];h.push(S),h.push(new SuperMap.Geometry.Point(S.x,S.y+y)),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,h);var g,f,M,d,m;u?((g=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(y,n,S)).pntRight,f=g.pntLeft,(g=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*y,n,S)).pntRight,M=g.pntLeft,d=(g=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(y,f,M)).pntRight,m=g.pntLeft):(f=(g=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(y,n,S)).pntRight,g.pntLeft,M=(g=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*y,n,S)).pntRight,g.pntLeft,d=(g=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(y,f,M)).pntRight,m=g.pntLeft);var b=[];b.push(f),b.push(M),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b,{lineTypeLimit:!0});var v=[];v.push(d),v.push(m),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,v,{lineTypeLimit:!0})}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol32300=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol32900",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=100,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);2===t.length?this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t):this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),n=o;this.getIsEdit()||(this.getScaleValues()[0]=this.getSubSymbolScaleValue());var i=e*this.getScaleValues()[0],r=this.getScaleValues()[1],a=r,p=this.getScaleValues()[3],u=this.getScaleValues()[4];n.x=o.x+p*e,n.y=o.y+u*e,this.computeSubSymbol(this.getSubSymbols()[0],o,i,a),this.addScalePoint(n,0);var s=new SuperMap.Geometry.Point(n.x,n.y),P=SuperMap.Plot.PlottingUtil.circlePoint(s,i,i,0);this.addScalePoint(P,1);var c=SuperMap.Plot.PlottingUtil.circlePoint(s,2*i,2*i,r);this.addScalePoint(c,2)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l),n=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t){i=(e.x-o.x)/n;this.getScaleValues()[3]=i;r=(e.y-o.y)/n;this.getScaleValues()[4]=r}if(1===t){var i=this.getScaleValues()[3],r=this.getScaleValues()[4],a=new SuperMap.Geometry.Point(o.x+i*n,o.y+r*n),p=SuperMap.Plot.PlottingUtil.distance(a,e)/n;this.getScaleValues()[0]=p}if(2===t){var i=this.getScaleValues()[3],r=this.getScaleValues()[4],a=new SuperMap.Geometry.Point(o.x+i*n,o.y+r*n),u=SuperMap.Plot.PlottingUtil.radian(a,e)*this.RTOD;this.getScaleValues()[1]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol32900=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol33400",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=99999,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.125),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(.125),this.getScaleValues().push(0));var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l,o,n=SuperMap.Plot.PlottingUtil.polylineDistance(e),i=this.getDefaultSubSymbolSize()/n;(i>.3||i<=0)&&(i=.3);var r=1.5*i;2==t.length?(this.getIsEdit()||(this.getScaleValues()[3]=this.getScaleValues()[2]+r),l=this.getScaleValues()[2],o=this.getScaleValues()[3]):(SuperMap.Plot.PlottingUtil.equalFuzzy(this.getScaleValues()[4],0)&&(this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(.125)),this.getIsEdit()||(this.getScaleValues()[4]=this.getScaleValues()[3]+r),l=this.getScaleValues()[3],o=this.getScaleValues()[4]);var a=n*l,p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a,e);if(p.bfind){var u=p.index,s=p.pts,P=n*o;if((p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(P,e)).bfind){for(var c=p.index,S=p.pts,y=new SuperMap.Geometry.Point(s.x,s.y),h=new SuperMap.Geometry.Point(S.x,S.y),g=SuperMap.Plot.PlottingUtil.radian(y,h)*this.RTOD,f=[],M=0;M<=u;M++)f.push(e[M]);for(f.push(s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f),(f=[]).push(S),M=c+1;M<e.length;M++)f.push(e[M]);this.addArrow(f);var d=SuperMap.Plot.PlottingUtil.distance(y,h),m=new SuperMap.Geometry.Point(2/3*d,.5/3*d),b=new SuperMap.Geometry.Point(0,.5/3*d),v=new SuperMap.Geometry.Point(0,-.5/3*d),O=new SuperMap.Geometry.Point(2/3*d,-.5/3*d),L=SuperMap.Plot.PlottingUtil.coordinateTrans(y,m,g),U=SuperMap.Plot.PlottingUtil.coordinateTrans(y,b,g),w=SuperMap.Plot.PlottingUtil.coordinateTrans(y,v,g),_=SuperMap.Plot.PlottingUtil.coordinateTrans(y,O,g);(f=[]).push(L),f.push(U),f.push(w),f.push(_),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);var T=d/3*2,x=SuperMap.Plot.PlottingUtil.radian(h,L)*this.RTOD,E=SuperMap.Plot.PlottingUtil.circlePoint(h,T,T,x),G=SuperMap.Plot.PlottingUtil.radian(h,_)*this.RTOD,V=SuperMap.Plot.PlottingUtil.circlePoint(h,T,T,G);(f=[]).push(E),f.push(S),f.push(V),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f),this.clearScalePoints(),this.addScalePoint(S);var A=SuperMap.Plot.PlottingUtil.circlePoint(y,d/2,d/2,g+90);this.addScalePoint(A)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l,!1);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=0,r=0;if(2==l.length?(i=this.getScaleValues()[2],r=this.getScaleValues()[3]):(i=this.getScaleValues()[3],r=this.getScaleValues()[4]),0===t){for(var a=r-i,p=e.clone(),u=[],s=0;s<o.length;s++)u.push(o[s].clone());for(var P,c=-1,S=0,s=0;s<u.length-1;s++){var y=[];y.push(u[s]),y.push(u[s+1]);var h=SuperMap.Plot.PlottingUtil.projectPoint(p,u[s],u[s+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(h,y).isOnPolyLine){var g=SuperMap.Plot.PlottingUtil.distance(p,h);-1==c?(c=s,P=h,S=g):S>g&&(c=s,P=h,S=g)}}(-1===c||c>u.length-1)&&(c=0,P=o[0]);f=0;for(s=0;s<c;s++)f+=SuperMap.Plot.PlottingUtil.distance(o[s],o[s+1]);((m=(f+=SuperMap.Plot.PlottingUtil.distance(o[c],P))/n)>.9||m-a<.1)&&(m>.9&&(m=.9),m<.1&&(m=.1)),2===l.length?(this.getScaleValues()[2]=m-a,this.getScaleValues()[3]=m):(this.getScaleValues()[3]=m-a,this.getScaleValues()[4]=m)}else if(1===t){var f=n*i,M=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(f,o);if(!M.bfind)return;var d=M.pts,m=(2*SuperMap.Plot.PlottingUtil.distance(d,e)+f)/n;.7<m&&(m=.7),2==l.length?this.getScaleValues()[3]=m:this.getScaleValues()[4]=m}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol33400=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol34300",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,l.getScaleValues().length,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e,l=SuperMap.Plot.PlottingUtil.polylineDistance(t),o=new SuperMap.Geometry.Point(t[0].x,t[0].y),n=new SuperMap.Geometry.Point(t[1].x,t[1].y),i=SuperMap.Plot.PlottingUtil.radian(o,n)*this.RTOD,r=.02*l,a=[];for(e=0;e<360;e+=10)a.push(SuperMap.Plot.PlottingUtil.circlePoint(new SuperMap.Geometry.Point(0,0),r,r,e));a.push(a[0]);var p=[],u=new SuperMap.Geometry.Point(.1*l,0),s=SuperMap.Plot.PlottingUtil.coordinateTrans(o,u,i);for(e=0;e<a.length;e++)p.push(new SuperMap.Geometry.Point(a[e].x+s.x,a[e].y+s.y));var P={lineTypeLimit:!0,surroundLineLimit:!0,fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,p,P);var c=new SuperMap.Geometry.Point(.25*l,0),S=SuperMap.Plot.PlottingUtil.coordinateTrans(o,c,i);for(p=[],e=0;e<a.length;e++)p.push(new SuperMap.Geometry.Point(a[e].x+S.x,a[e].y+S.y));this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,p,P);var y=new SuperMap.Geometry.Point(.4*l,0),h=SuperMap.Plot.PlottingUtil.coordinateTrans(o,y,i);for(p=[],e=0;e<a.length;e++)p.push(new SuperMap.Geometry.Point(a[e].x+h.x,a[e].y+h.y));this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,p,P);var g=new SuperMap.Geometry.Point(.6*l,0),f=SuperMap.Plot.PlottingUtil.coordinateTrans(o,g,i);for(p=[],e=0;e<a.length;e++)p.push(new SuperMap.Geometry.Point(a[e].x+f.x,a[e].y+f.y));this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,p,P);var M=new SuperMap.Geometry.Point(.5*l,.05*l),d=new SuperMap.Geometry.Point(.7*l,.05*l),m=new SuperMap.Geometry.Point(.75*l,0),b=new SuperMap.Geometry.Point(.7*l,-.05*l),v=new SuperMap.Geometry.Point(.5*l,-.05*l),O=SuperMap.Plot.PlottingUtil.coordinateTrans(o,M,i),L=SuperMap.Plot.PlottingUtil.coordinateTrans(o,d,i),U=SuperMap.Plot.PlottingUtil.coordinateTrans(o,m,i),w=SuperMap.Plot.PlottingUtil.coordinateTrans(o,b,i),_=SuperMap.Plot.PlottingUtil.coordinateTrans(o,v,i);(p=[]).push(O),p.push(L),p.push(U),p.push(w),p.push(_),p.push(O),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol34300=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol34400",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.1,l.getScaleValues()[1]=.2),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<2&&(this.clearScaleValues(),this.getScaleValues()[0]=.1,this.getScaleValues()[1]=.2);var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=new SuperMap.Geometry.Point(t[0].x,t[0].y),o=new SuperMap.Geometry.Point(t[1].x,t[1].y),n=SuperMap.Plot.PlottingUtil.radian(l,o)*this.RTOD,i=this.getScaleValues()[0],r=this.getScaleValues()[1];if(!(i<0||r<0)){var a=i*e,p=1-r*(5/4);p<0&&(p=0),p>1&&(p=1);var u=e*p,s=SuperMap.Plot.PlottingUtil.circlePoint(l,u,u,n),P=[],c=[],S=[];P.push(t[0].clone()),P.push(s),c=SuperMap.Plot.PlottingUtil.paraLine(P,a,!0),S=SuperMap.Plot.PlottingUtil.paraLine(P,a,!1);var y=[];for(b=0;b<c.length;b++)y.push(c[b]);var h=[];for(b=0;b<S.length;b++)h.push(S[b]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h);var g=r*e,f=SuperMap.Plot.PlottingUtil.circlePoint(o,g/2,g/2,n);this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],f,g/2,n+180);for(var M=[],d=.1*u,m=[],b=0;b<y.length;b++)m.push(y[b].clone());var v=[];for(b=0;b<h.length;b++)v.push(h[b].clone());var O=SuperMap.Plot.PlottingUtil.distance(v[0],v[1]);if(!(d>=O)){for(var L=d;L<u-a;L+=d){var U=SuperMap.Plot.PlottingUtil.circlePoint(v[0],L,L,n),w=SuperMap.Plot.PlottingUtil.circlePoint(U,O,O,n+45),_=SuperMap.Plot.PlottingUtil.intersectLines(U,w,m[0],m[1]);_.isIntersectLines;var T=_.intersectPoint;if(!SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(T,m).isOnPolyLine)break;(M=[]).push(U),M.push(T),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M,{lineTypeLimit:!0,surroundLineLimit:!0})}this.clearScalePoints();var x=SuperMap.Plot.PlottingUtil.circlePoint(l,a,a,n+90);this.addScalePoint(x);var E=g/2,G=SuperMap.Plot.PlottingUtil.circlePoint(o,E,E,n+90);this.addScalePoint(G)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!==t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0==t){i=(n=SuperMap.Plot.PlottingUtil.distance(l[0],e))/o;this.getScaleValues()[0]=i}else if(1==t){var n=SuperMap.Plot.PlottingUtil.distance(l[1],e),i=2*n/o;this.getScaleValues()[1]=i}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol34400=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol34500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,l.getScaleValues().length,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=new SuperMap.Geometry.Point(t[0].x,t[0].y),o=new SuperMap.Geometry.Point(t[1].x,t[1].y),n=SuperMap.Plot.PlottingUtil.radian(l,o)*this.RTOD,i=new SuperMap.Geometry.Point(0,0),r=new SuperMap.Geometry.Point(.475*e,0),a=SuperMap.Plot.PlottingUtil.coordinateTrans(l,i,n),p=SuperMap.Plot.PlottingUtil.coordinateTrans(l,r,n),u=[];u.push(a),u.push(p),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,{lineTypeLimit:!0});var s=new SuperMap.Geometry.Point(.525*e,0),P=new SuperMap.Geometry.Point(.725*e,0),c=SuperMap.Plot.PlottingUtil.coordinateTrans(l,s,n),S=SuperMap.Plot.PlottingUtil.coordinateTrans(l,P,n);(u=[]).push(c),u.push(S),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,{lineTypeLimit:!0});var y=new SuperMap.Geometry.Point(.775*e,0),h=new SuperMap.Geometry.Point(.95*e,0),g=SuperMap.Plot.PlottingUtil.coordinateTrans(l,y,n),f=SuperMap.Plot.PlottingUtil.coordinateTrans(l,h,n);(u=[]).push(g),u.push(f),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,{lineTypeLimit:!0});var M=new SuperMap.Geometry.Point(e,.0125*e),d=new SuperMap.Geometry.Point(e,-.0125*e),m=new SuperMap.Geometry.Point(.75*e+.2*e,0),b=SuperMap.Plot.PlottingUtil.coordinateTrans(l,M,n),v=SuperMap.Plot.PlottingUtil.coordinateTrans(l,d,n),O=SuperMap.Plot.PlottingUtil.coordinateTrans(l,m,n);(u=[]).push(b),u.push(O),u.push(v),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,{lineTypeLimit:!0});var L=new SuperMap.Geometry.Point(.75*e+.025*e,0),U=SuperMap.Plot.PlottingUtil.coordinateTrans(l,L,n);(u=[]).push(O),u.push(U),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,{lineTypeLimit:!0});var w=new SuperMap.Geometry.Point(.75*e+.15*e,0),_=SuperMap.Plot.PlottingUtil.circlePoint(w,.075*e,.1*e,150),T=SuperMap.Plot.PlottingUtil.circlePoint(w,.075*e,.1*e,210),x=SuperMap.Plot.PlottingUtil.coordinateTrans(l,w,n),E=SuperMap.Plot.PlottingUtil.coordinateTrans(l,_,n),G=SuperMap.Plot.PlottingUtil.coordinateTrans(l,T,n);(u=[]).push(E),u.push(x),u.push(G),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,{lineTypeLimit:!0});var V=new SuperMap.Geometry.Point(.75*e+.05*e,.025*e),A=new SuperMap.Geometry.Point(.75*e+.05*e,-.025*e),C=SuperMap.Plot.PlottingUtil.coordinateTrans(l,V,n),Y=SuperMap.Plot.PlottingUtil.coordinateTrans(l,A,n);(u=[]).push(C),u.push(Y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,{lineTypeLimit:!0});var I=new SuperMap.Geometry.Point(.75*e+.0125*e,0),j=new SuperMap.Geometry.Point(.75*e+.0125*e,.0125*e),B=SuperMap.Plot.PlottingUtil.coordinateTrans(l,I,n),R=SuperMap.Plot.PlottingUtil.coordinateTrans(l,j,n);(u=[]).push(B),u.push(R),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,u,{lineTypeLimit:!0})}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol34500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol34501",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,l.getScaleValues().length,0===l.getSubSymbols().length&&l.getSubSymbols().push(new SuperMap.Plot.SubSymbol(100,8406)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=new SuperMap.Geometry.Point(t[0].x,t[0].y),o=new SuperMap.Geometry.Point(t[1].x,t[1].y),n=SuperMap.Plot.PlottingUtil.radian(l,o)*this.RTOD,i=new SuperMap.Geometry.Point(0,0),r=new SuperMap.Geometry.Point(.475*e,0),a=SuperMap.Plot.PlottingUtil.coordinateTrans(l,i,n),p=SuperMap.Plot.PlottingUtil.coordinateTrans(l,r,n),u=[];u.push(a),u.push(p),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,{lineTypeLimit:!0});var s=new SuperMap.Geometry.Point(.525*e,0),P=new SuperMap.Geometry.Point(.725*e,0),c=SuperMap.Plot.PlottingUtil.coordinateTrans(l,s,n),S=SuperMap.Plot.PlottingUtil.coordinateTrans(l,P,n);(u=[]).push(c),u.push(S),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,{lineTypeLimit:!0});var y=new SuperMap.Geometry.Point(.775*e,0),h=new SuperMap.Geometry.Point(.95*e,0),g=SuperMap.Plot.PlottingUtil.coordinateTrans(l,y,n),f=SuperMap.Plot.PlottingUtil.coordinateTrans(l,h,n);if((u=[]).push(g),u.push(f),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,{lineTypeLimit:!0}),this.getSubSymbols().length>0){var M=.2*e,d=new SuperMap.Geometry.Point(e,.4*M);d=SuperMap.Plot.PlottingUtil.coordinateTrans(l,d,n),this.computeSubSymbol(this.getSubSymbols()[0],d,M,n)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol34501=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol34700",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.08,l.getScaleValues()[1]=.03),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<1&&(this.clearScaleValues(),this.getScaleValues()[0]=.08),this.getIsEdit()||(this.getScaleValues()[0]=this.getSubSymbolScaleValue());var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=.5*e,o=e*this.getScaleValues()[0],n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(l,t),i=n.pts,r=n.index,a=(n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(l+o,t)).index;n.pts;if(!(r<0||a<0)){if(r!=a){var p=new SuperMap.Geometry.Point(t[r+1].x,t[r+1].y),u=new SuperMap.Geometry.Point(t[r].x,t[r].y);(s=SuperMap.Plot.PlottingUtil.distance(p,u))<=2*o?(o=s/2,i.x=(t[r+1].x+t[r].x)/2,i.y=(t[r+1].y+t[r].y)/2):i=SuperMap.Plot.PlottingUtil.linePnt(t[r+1],t[r],o)}else{var p=new SuperMap.Geometry.Point(t[r+1].x,t[r+1].y),u=new SuperMap.Geometry.Point(t[r].x,t[r].y),s=SuperMap.Plot.PlottingUtil.distance(p,u);if(s<=2*o)o=s/2,i.x=(t[r+1].x+t[r].x)/2,i.y=(t[r+1].y+t[r].y)/2;else{var p=new SuperMap.Geometry.Point(t[r].x,t[r].y),u=new SuperMap.Geometry.Point(i.x,i.y);SuperMap.Plot.PlottingUtil.distance(p,u)<o&&(i=SuperMap.Plot.PlottingUtil.linePnt(t[r],t[r],o))}}var P,c=[];for(P=0;P<r+1;P++)c.push(t[P]);var S,y;S=SuperMap.Plot.PlottingUtil.linePnt(i,t[r],o),c.push(S),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c),y=SuperMap.Plot.PlottingUtil.linePnt(i,t[r+1],o);var h=[];h.push(y);var g=t.length;for(P=r+1;P<g;++P)h.push(t[P]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h);var f=[],M=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(o/2,S,y);f.push(S),f.push(M.pntRight),f.push(M.pntLeft);var d=(M=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(o,S,i)).pntRight;this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,f,{lineTypeLimit:!0});var m,b,v,O,L=t[0].clone(),U=t[1].clone(),w=t[t.length-2].clone(),_=t[t.length-1].clone();this.getIsEdit()||(this.getScaleValues()[1]=this.getSubSymbolScaleValue());var T=e*this.getScaleValues()[1];b=(M=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(T,U,L)).pntRight,m=M.pntLeft,O=(M=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(T,w,_)).pntRight,v=M.pntLeft;var x=[];x.push(b),x.push(m),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,x,{lineTypeLimit:!0});var E=[];E.push(O),E.push(v),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,E,{lineTypeLimit:!0}),this.clearScalePoints(),this.addScalePoint(d)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!==t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0==t){var n=.5*o,i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(n,l).pts,r=SuperMap.Plot.PlottingUtil.distance(e,i)/o;r>.5&&(r=.5),this.getScaleValues()[0]=r}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol34700=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol34800",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,l.getScaleValues().length,null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[],l=t[0].clone(),o=t[1].clone(),n=SuperMap.Plot.PlottingUtil.distance(l,o),i=0;for(i=15;i<=165;i+=4)e.push(SuperMap.Plot.PlottingUtil.circlePoint(l,n,n,i));SuperMap.Plot.PlottingUtil.equalFuzzy(i,165)&&(i=165,e.push(SuperMap.Plot.PlottingUtil.circlePoint(l,n,n,i)));var r=[];for(i=e.length-1;i>=0;i--)r.push(e[i]);for(this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r),e=[],i=195;i<=345;i+=4)e.push(SuperMap.Plot.PlottingUtil.circlePoint(l,n,n,i));for(SuperMap.Plot.PlottingUtil.equalFuzzy(i,345)&&(i=345,e.push(SuperMap.Plot.PlottingUtil.circlePoint(l,n,n,i))),r=[],i=e.length-1;i>=0;i--)r.push(e[i]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r);var a=.8*n;(e=[]).push(new SuperMap.Geometry.Point(l.x-a,l.y)),e.push(new SuperMap.Geometry.Point(l.x+a,l.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e,{lineTypeLimit:!0}),(e=[]).push(new SuperMap.Geometry.Point(l.x-.4*n,l.y)),e.push(new SuperMap.Geometry.Point(l.x-.4*n,l.y+.4*n)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e,{lineTypeLimit:!0})}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol34800=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol34801",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.4),null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[],l=t[0].clone(),o=t[1].clone(),n=SuperMap.Plot.PlottingUtil.distance(l,o),i=0;for(i=15;i<=165;i+=4)e.push(SuperMap.Plot.PlottingUtil.circlePoint(l,n,n,i));SuperMap.Plot.PlottingUtil.equalFuzzy(i,165)&&(i=165,e.push(SuperMap.Plot.PlottingUtil.circlePoint(l,n,n,i)));var r=[];for(i=e.length-1;i>=0;i--)r.push(e[i]);for(this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r),e=[],i=195;i<=345;i+=4)e.push(SuperMap.Plot.PlottingUtil.circlePoint(l,n,n,i));for(SuperMap.Plot.PlottingUtil.equalFuzzy(i,345)&&(i=345,e.push(SuperMap.Plot.PlottingUtil.circlePoint(l,n,n,i))),r=[],i=e.length-1;i>=0;i--)r.push(e[i]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r);var a=2*this.getScaleValues()[0]*n;(e=[]).push(new SuperMap.Geometry.Point(l.x-a,l.y)),e.push(new SuperMap.Geometry.Point(l.x-.4*a,l.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e,{lineTypeLimit:!0}),(e=[]).push(new SuperMap.Geometry.Point(l.x-.2*a,l.y)),e.push(new SuperMap.Geometry.Point(l.x+.4*a,l.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e,{lineTypeLimit:!0}),(e=[]).push(new SuperMap.Geometry.Point(l.x+.6*a,l.y)),e.push(new SuperMap.Geometry.Point(l.x+a,l.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e,{lineTypeLimit:!0}),(e=[]).push(new SuperMap.Geometry.Point(l.x-this.getScaleValues()[0]*n,l.y)),e.push(new SuperMap.Geometry.Point(l.x-this.getScaleValues()[0]*n,l.y+this.getScaleValues()[0]*n)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e,{lineTypeLimit:!0})}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol34801=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(13)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol34901",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(l/2,e);if(o.bfind){var n=o.index,i=o.pts;if(!this.getIsEdit()){var r=this.getDefaultSubSymbolSize()/l;(r>.3||r<=0)&&(r=.3),this.getScaleValues()[0]=r}var a,p=l*this.getScaleValues()[0],u=[];for(u.push(i),a=n;a>=0;a--)u.push(e[a]);if((o=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(p,u)).bfind){var s=o.index,P=o.pts,c=[];for(a=u.length-1;a>s;a--)c.push(u[a]);c.push(P),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c);var S=[];for(S.push(i),a=n+1;a<e.length;a++)S.push(e[a]);if((o=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(p,S)).bfind){var y=o.index,h=o.pts;for((c=[]).push(h),a=y+1;a<S.length;a++)c.push(S[a]);this.addArrow(c);var g=.1*p,f=SuperMap.Plot.PlottingUtil.circlePoint(i,g,g,0);(c=[]).push(i),c.push(f);var M={surroundLineLimit:!0,lineTypeLimit:!0,fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,c,M);var d=e[0].clone(),m=e[1].clone(),b=SuperMap.Plot.PlottingUtil.radian(m,d)*this.RTOD,v=new SuperMap.Geometry.Point(0,.5*p),O=new SuperMap.Geometry.Point(p,.5*p),L=new SuperMap.Geometry.Point(1.5*p,0),U=SuperMap.Plot.PlottingUtil.coordinateTrans(d,v,b),w=SuperMap.Plot.PlottingUtil.coordinateTrans(d,O,b),_=SuperMap.Plot.PlottingUtil.coordinateTrans(d,L,b);(c=[]).push(e[0]),c.push(U),c.push(w),c.push(_),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,c)}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol34901=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(13)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol34902",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(l/2,e);if(o.bfind){var n=o.index,i=o.pts;if(!this.getIsEdit()){var r=this.getDefaultSubSymbolSize()/l;(r>.3||r<=0)&&(r=.3),this.getScaleValues()[0]=r}var a,p=l*this.getScaleValues()[0],u=[];for(u.push(i),a=n;a>=0;a--)u.push(e[a]);if((o=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(p,u)).bfind){var s=o.index,P=o.pts,c=[];for(a=u.length-1;a>s;a--)c.push(u[a]);c.push(P),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c);var S=[];for(S.push(i),a=n+1;a<e.length;a++)S.push(e[a]);if((o=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(p,S)).bfind){var y=o.index,h=o.pts;for((c=[]).push(h),a=y+1;a<S.length;a++)c.push(S[a]);this.addArrow(c);var g=.1*p,f=P,M=h,d=SuperMap.Plot.PlottingUtil.radian(f,M)*this.RTOD,m=new SuperMap.Geometry.Point((f.x+M.x)/2,(f.y+M.y)/2),b=SuperMap.Plot.PlottingUtil.circlePoint(m,2*g,2*g,d),v=SuperMap.Plot.PlottingUtil.circlePoint(m,2*g,2*g,d+180),O=SuperMap.Plot.PlottingUtil.circlePoint(b,g,g,0);(c=[]).push(b),c.push(O);var L={surroundLineLimit:!0,lineTypeLimit:!0,fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,c,L);var U=SuperMap.Plot.PlottingUtil.circlePoint(v,g,g,0);(c=[]).push(v),c.push(U),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,c,L);var w=e[0].clone(),_=e[1].clone(),T=SuperMap.Plot.PlottingUtil.radian(_,w)*this.RTOD,x=new SuperMap.Geometry.Point(0,.5*p),E=new SuperMap.Geometry.Point(p,.5*p),G=new SuperMap.Geometry.Point(1.5*p,0),V=SuperMap.Plot.PlottingUtil.coordinateTrans(w,x,T),A=SuperMap.Plot.PlottingUtil.coordinateTrans(w,E,T),C=SuperMap.Plot.PlottingUtil.coordinateTrans(w,G,T);(c=[]).push(e[0]),c.push(V),c.push(A),c.push(C),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,c)}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol34902=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol35000",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.03),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(this.getScaleValues().length<1&&(this.clearScaleValues(),this.getScaleValues()[0]=.03),!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=e[0],i=e[1],r=e[e.length-1],a=e[e.length-2],p=SuperMap.Plot.PlottingUtil.radian(n,i)*this.RTOD,u=SuperMap.Plot.PlottingUtil.radian(a,r)*this.RTOD,s=this.getScaleValues()[0],P=l*s,c=SuperMap.Plot.PlottingUtil.circlePoint(n,P,P,p+90),S=SuperMap.Plot.PlottingUtil.circlePoint(n,P,P,p+270),y=[];y.push(c),y.push(S),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y,{lineTypeLimit:!0}),this.clearScalePoints(),this.addScalePoint(S);var h=SuperMap.Plot.PlottingUtil.circlePoint(r,P,P,u+90),g=SuperMap.Plot.PlottingUtil.circlePoint(r,P,P,u+270);(y=[]).push(h),y.push(g),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y,{lineTypeLimit:!0});var f,M=t.length;if(this.getScaleValues().length!=M){this.getScaleValues().push(s);var d=1/M;for(f=0;f<M-1;f++)this.getScaleValues().push(d*(f+1))}for(f=0;f<M-1;f++){var m=(d=this.getScaleValues()[f+1])*l,b=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(m,e);if(!b.bfind)return;var v=b.pts,O=b.index,L=l*this.getSubSymbolScaleValue(),U=.3*L,w=SuperMap.Plot.PlottingUtil.radian(e[O],e[O+1])*this.RTOD,_=new SuperMap.Geometry.Point(L,-U),T=new SuperMap.Geometry.Point(-L,-U),x=new SuperMap.Geometry.Point(-L,0),E=new SuperMap.Geometry.Point(L,0),G=SuperMap.Plot.PlottingUtil.coordinateTrans(v,_,w),V=SuperMap.Plot.PlottingUtil.coordinateTrans(v,T,w),A=SuperMap.Plot.PlottingUtil.coordinateTrans(v,x,w),C=SuperMap.Plot.PlottingUtil.coordinateTrans(v,E,w);(y=[]).push(G),y.push(V),y.push(A),y.push(C),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,y,{lineTypeLimit:!0,fillLimit:!0,fillStyle:0}),this.addScalePoint(v)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>=this.getScalePoints().length)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(0==t){var i=(h=SuperMap.Plot.PlottingUtil.distance(e,l[0]))/n;this.getScaleValues()[0]=i}else{var r,a=e,p=[];for(r=0;r<o.length;r++)p.push(o[r]);var u=-1,s=0,P=new SuperMap.Geometry.Point(0,0);for(r=0;r<p.length-1;r++){var c=[];c.push(p[r]),c.push(p[r+1]);var S=SuperMap.Plot.PlottingUtil.projectPoint(a,p[r],p[r+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(S,c).isOnPolyLine){var y=SuperMap.Plot.PlottingUtil.distance(a,S);-1==u?(u=r,P=S,s=y):s>y&&(u=r,P=S,s=y)}}-1===u&&Math.ceil(e.x,1)<=Math.ceil(o[0].x,1)?(u=0,P=o[0]):-1===u&&u===o[o.length-2]&&(u=0,P=o[0]),-1===u&&Math.ceil(e.x,1)>=Math.ceil(o[o.length-1].x,1)?(u=o.length-1,P=o[o.length-1]):-1!==u&&u!==o.length-1||(u=o.length-1,P=o[o.length-1]);var h=0;for(r=0;r<u;r++)h+=SuperMap.Plot.PlottingUtil.distance(o[r],o[r+1]);var g=(h+=SuperMap.Plot.PlottingUtil.distance(o[u],P))/n;this.getScaleValues()[t]=g}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol35000=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol35200",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.05),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<1&&(this.clearScaleValues(),this.getScaleValues()[0]=.05),this.getIsEdit()||(this.getScaleValues()[0]=this.getSubSymbolScaleValue()),2==t.length?this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t):this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),o=e*this.getScaleValues()[0];this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],l,o,0),this.clearScalePoints();var n=SuperMap.Plot.PlottingUtil.circlePoint(l,o,o,90);this.addScalePoint(n)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l);if(0==t){var i=SuperMap.Plot.PlottingUtil.distance(e,n)/o;this.getScaleValues()[0]=i}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol35200=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol35304",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.05,l.getScaleValues()[1]=0),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<1&&(this.clearScaleValues(),this.getScaleValues()[0]=.05,this.getScaleValues()[1]=0),this.getIsEdit()||(this.getScaleValues()[0]=this.getSubSymbolScaleValue());var e,l=SuperMap.Plot.PlottingUtil.polylineDistance(t)*this.getScaleValues()[0],o=[];for(e=0;e<t.length;e++)o.push(t[e]);for(o.push(o[0]),e=0;e<o.length-1;e++){var n=o[e],i=o[e+1],r=SuperMap.Plot.PlottingUtil.radian(n,i)*this.RTOD;r+=90;var a=.5*l,p=SuperMap.Plot.PlottingUtil.circlePoint(n,a,a,r),u=SuperMap.Plot.PlottingUtil.circlePoint(i,a,a,r);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[p,u])}this.clearScalePoints();var s=SuperMap.Plot.PlottingUtil.circlePoint(t[0],1.2*l,1.2*l,270);for(this.addScalePoint(s),e=0;e<t.length;e++){var P=o[e];2*(e+1)>=this.getScaleValues().length&&this.getScaleValues().push(0);var c=this.getScaleValues()[2*(e+1)];2*(e+1)+1>=this.getScaleValues().length&&this.getScaleValues().push(1);var S=this.getScaleValues()[2*(e+1)+1],y=c,h=Math.floor(S);if(!(0>h||h>7)){var g=this.GetCodeByScaleValue(S);0==this.getSubSymbols().length&&this.getSubSymbols().push(new SuperMap.Plot.SubSymbol(100,g)),this.getSubSymbols().length>=0&&this.computeSubSymbol(this.getSubSymbols()[0],P,l,y);var f=SuperMap.Plot.PlottingUtil.circlePoint(P,1.5*l,1.5*l,y+90);this.addScalePoint(f)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>this.getScalePoints().length)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;if(0==t){for(var o=[],n=0;n<l.length;n++)o.push(l[n]);var i=SuperMap.Plot.PlottingUtil.polylineDistance(o),r=SuperMap.Plot.PlottingUtil.distance(o[0],e)/1.2;this.getScaleValues()[0]=r/i}else{var a=l[t-1],p=SuperMap.Plot.PlottingUtil.radian(a,e)*this.RTOD;0>(p-=90)&&(p+=360),this.getScaleValues()[2*t]=p}}this.calculateParts()}},{key:"GetCodeByScaleValue",value:function(t){switch(Math.floor(t)){case 0:return 35300;case 1:return 35301;case 2:return 35302;case 3:return 35303;case 4:return 35400;case 5:return 35401;case 6:return 35402;case 7:return 35403;default:return-1}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol35304=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol35500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,l.getScaleValues().length,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=t[0],l=t[1],o=SuperMap.Plot.PlottingUtil.distance(e,l),n=.1*o,i=SuperMap.Plot.PlottingUtil.linePnt(e,l,.5*o),r=SuperMap.Plot.PlottingUtil.linePnt(i,e,n),a=SuperMap.Plot.PlottingUtil.linePnt(i,l,n),p=[],u=[];p.push(t[0]),p.push(r),u.push(a),u.push(t[1]);var s=SuperMap.Plot.PlottingUtil.paraLine(p,.5*n,!0),P=SuperMap.Plot.PlottingUtil.paraLine(u,.5*n,!0),c=[],S=[];c.push(s[0]),c.push(s[1]),S.push(P[0]),S.push(P[1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c,{lineColorLimit:!0,color:"#000000",strokeColor:"#000000",strokeOpacity:1},!1),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S,{lineColorLimit:!0,color:"#000000",strokeColor:"#000000",strokeOpacity:1});var y=[],h=[],g=SuperMap.Plot.PlottingUtil.paraLine(p,.5*n,!1),f=SuperMap.Plot.PlottingUtil.paraLine(u,.5*n,!1);y.push(g[0]),y.push(g[1]),h.push(f[0]),h.push(f[1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y,{lineColorLimit:!0,color:"#000000",strokeColor:"#000000",strokeOpacity:1}),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h,{lineColorLimit:!0,color:"#000000",strokeColor:"#000000",strokeOpacity:1});var M=SuperMap.Plot.PlottingUtil.linePnt(c[1],S[0],.2*n),d=SuperMap.Plot.PlottingUtil.linePnt(S[0],c[1],.2*n),m=SuperMap.Plot.PlottingUtil.linePnt(y[1],h[0],.2*n),b=SuperMap.Plot.PlottingUtil.linePnt(h[0],y[1],.2*n),v=[];v.push(M),v.push(d),v.push(b),v.push(m),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,v,{fillLimit:!0,fillStyle:0});var O=SuperMap.Plot.PlottingUtil.linePnt(m,M,1.2*n),L=SuperMap.Plot.PlottingUtil.linePnt(M,m,1.2*n),U=[];U.push(O),U.push(L),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U);var w=SuperMap.Plot.PlottingUtil.linePnt(b,d,1.2*n),_=SuperMap.Plot.PlottingUtil.linePnt(d,b,1.2*n),T=[];T.push(w),T.push(_),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,T)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol35500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol36400",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,l.getScaleValues().length,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol36400=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol36401",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.1),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<1&&(this.getScaleValues()[0]=.1),this.getIsEdit()||(this.getScaleValues()[0]=this.getSubSymbolScaleValue());var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=.5*e,o=e*this.getScaleValues()[0],n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(l,t),i=n.index,r=n.pts,a=(n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(l+o,t)).index;n.pts;if(!(i<0||a<0)){if(i!=a)(p=SuperMap.Plot.PlottingUtil.distance(t[i+1],t[i]))<=2*o?(o=p/2,r.x=(t[i+1].x+t[i].x)/2,r.y=(t[i+1].y+t[i].y)/2):r=SuperMap.Plot.PlottingUtil.linePnt(t[i+1],t[i],o);else{var p=SuperMap.Plot.PlottingUtil.distance(t[i+1],t[i]);p<=2*o?(o=p/2,r.x=(t[i+1].x+t[i].x)/2,r.y=(t[i+1].y+t[i].y)/2):SuperMap.Plot.PlottingUtil.distance(t[i],r)<o&&(r=SuperMap.Plot.PlottingUtil.linePnt(t[i],t[i+1],o))}var u,s=[];for(u=0;u<i+1;u++)s.push(t[u]);var P=SuperMap.Plot.PlottingUtil.linePnt(r,t[i],o);s.push(P),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s);var c=SuperMap.Plot.PlottingUtil.linePnt(r,t[i+1],o),S=[];S.push(c);var y=t.length;for(u=i+1;u<y;++u)S.push(t[u]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S);var h=t[0],g=t[1],f=t[t.length-2],M=t[t.length-1],d=.03*e,m=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(d,g,h),b=m.pntRight,v=m.pntLeft,O=(m=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(d,f,M)).pntRight,L=m.pntLeft,U=[];U.push(b),U.push(v),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U,{lineTypeLimit:!0});var w=[];w.push(O),w.push(L),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,w,{lineTypeLimit:!0});var _=SuperMap.Plot.PlottingUtil.radian(c,P)*this.RTOD;this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],r,.8*o,_-90),this.clearScalePoints();var T=SuperMap.Plot.PlottingUtil.circlePoint(r,o,o,_-90);this.addScalePoint(T)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;if(0==t){var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=e,i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*o,l).pts,r=SuperMap.Plot.PlottingUtil.distance(n,i)/o;this.getScaleValues()[0]=r<.5?r:.5}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol36401=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(10)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol36600",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.1,l.getScaleValues()[1]=.2),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<1&&(this.getScaleValues()[0]=.1,this.getScaleValues()[1]=.2),this.getIsEdit()||(this.getScaleValues()[0]=this.getSubSymbolScaleValue());var e,l,o=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]),n=SuperMap.Plot.PlottingUtil.radian(t[0],t[1])*this.RTOD,i=this.getScaleValues()[0],r=this.getScaleValues()[1],a=i*o,p=[];for(e=90;e<=270;e+=3)l=SuperMap.Plot.PlottingUtil.circlePoint(t[0],a,a,e+n),p.push(l);var u=[];for(e=-90;e<=90;e+=3)l=SuperMap.Plot.PlottingUtil.circlePoint(t[1],a,a,e+n),u.push(l);var s=o*r,P=new SuperMap.Geometry.Point((p[0].x+u[u.length-1].x)/2,(p[0].y+u[u.length-1].y)/2),c=SuperMap.Plot.PlottingUtil.linePnt(p[0],u[u.length-1],.5*(o-1.2*s)),S=SuperMap.Plot.PlottingUtil.linePnt(u[u.length-1],p[0],.5*(o-1.2*s)),y=[];y.push(c),y.push.apply(y,p),y.push.apply(y,u),y.push(S),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y);var h=SuperMap.Plot.PlottingUtil.radian(S,c)*this.RTOD;this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],P,s,h-90),this.clearScalePoints(),this.addScalePoint(p[p.length-1]);var g=SuperMap.Plot.PlottingUtil.circlePoint(P,s,s,h+90);this.addScalePoint(g)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol36600=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol36700",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.05,l.getScaleValues()[1]=.04),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(this.getScaleValues().length<1&&(this.getScaleValues()[0]=.05,this.getScaleValues()[1]=.04),!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=this.getLinePts(e,this.getScaleValues()[0]),i=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),r=180*SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)/Math.PI,a=SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt);0<this.getSubSymbols().length&&this.computeSubSymbol(this.getSubSymbols()[0],i,.7*a,r-90);for(var p=[],u=[],s=0;s<=n.startIndex;s++)p.push(e[s]);if(p.push(n.startPt),this.addStartPtArrow(p),n.endIndex<=e.length){u.push(n.endPt);for(s=n.endIndex+1;s<=e.length-1;s++)u.push(e[s]);this.addArrow(u)}for(var P=[],s=0;s<e.length;s++)P.push(e[s]);var c=l*this.getScaleValues()[1],S=SuperMap.Plot.PlottingUtil.paraLine(P,c,!0),y=SuperMap.Plot.PlottingUtil.paraLine(P,c,!1),h=[];for(s=0;s<S.length;s++)h.push(S[s]);var g=[];for(s=0;s<y.length;s++)g.push(y[s]);h=SuperMap.Plot.PlottingUtil.clearSamePts(h),g=SuperMap.Plot.PlottingUtil.clearSamePts(g),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var f=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),M=SuperMap.Plot.PlottingUtil.circlePoint(f.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,r+90);this.addScalePoint(M,0),this.addScalePoint(y[0],1)}}},{key:"getLinePts",value:function(t,e){var l=new Object;if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"addStartPtArrow",value:function(t){if(t.length<2)return t;var e,l=SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints)*(e=(this.getIsEdit(),.5*this.getSubSymbolScaleValue())),o=t[0];if(t.length>=2){for(var n=-1,i=0;i<t.length-1;i++)if(l<SuperMap.Plot.PlottingUtil.distance(o,t[i])){n=i;break}t.splice(1,n)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var r=t[1],a=t[0],p=l,u=SuperMap.Plot.PlottingUtil.radian(a,r)*this.RTOD,s=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,u+22.5),P=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,u-22.5),c={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[s,t[0],P],c,!0)}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(l.length<this.minEditPts)return;if(0===t){var i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o);if(-1===i.index)return;var r=2*SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.4?r:.4}if(1===t){var a=SuperMap.Plot.PlottingUtil.distance(e,l[0]);this.getScaleValues()[1]=a/n}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol36700=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol36800",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,l.getScaleValues().length,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<1&&(this.getScaleValues()[0]=.05),this.getIsEdit()||(this.getScaleValues()[0]=this.getSubSymbolScaleValue());var e=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var l=.1*e,o=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,t[1],t[0]),n=o.pntRight,i=o.pntLeft,r=(o=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,t[0],t[1])).pntRight,a=o.pntLeft,p=[];p.push(n),p.push(i),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p);var u=[];u.push(r),u.push(a),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u);var s=[];s.push(n),s.push(a);for(var P=SuperMap.Plot.PlottingUtil.polylineDistance(s)/11,c=P,S=0;S<11;S++){var y=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(c-P,s);if(y.bfind){var h=y.index,g=y.pts;if((y=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(c,s)).bfind){var f=y.index,M=y.pts;if(S%2==0){var d=[];d.push(g);for(var m=h+1;m<=f;m++)d.push(s[m]);d.push(M),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d,{lineColorLimit:!0,strokeColor:"#0000ff",strokeOpacity:1,color:"#0000FF",surroundLineLimit:!0})}c+=P}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol36800=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol37100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.1,l.getScaleValues()[1]=.2),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<1&&(this.clearScaleValues(),this.getScaleValues()[0]=.1,this.getScaleValues()[1]=.2),this.getIsEdit()||(this.getScaleValues()[0]=this.getSubSymbolScaleValue());var e,l,o=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]),n=SuperMap.Plot.PlottingUtil.radian(t[0],t[1])*this.RTOD,i=this.getScaleValues()[0],r=this.getScaleValues()[1],a=i*o,p=[];for(e=90;e<=270;e+=3)l=SuperMap.Plot.PlottingUtil.circlePoint(t[0],a,a,e+n),p.push(l);var u=[];for(e=-90;e<=90;e+=3)l=SuperMap.Plot.PlottingUtil.circlePoint(t[1],a,a,e+n),u.push(l);var s=o*r,P=new SuperMap.Geometry.Point((p[0].x+u[u.length-1].x)/2,(p[0].y+u[u.length-1].y)/2),c=SuperMap.Plot.PlottingUtil.linePnt(p[0],u[u.length-1],.5*(o-1.2*s)),S=SuperMap.Plot.PlottingUtil.linePnt(u[u.length-1],p[0],.5*(o-1.2*s)),y=[];y.push(c),y.push.apply(y,p),y.push.apply(y,u),y.push(S),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y);var h=SuperMap.Plot.PlottingUtil.radian(S,c)*this.RTOD,g=new SuperMap.Geometry.Point(.2*s,0),f=new SuperMap.Geometry.Point(-.4*s,0),M=SuperMap.Plot.PlottingUtil.coordinateTrans(P,g,h),d=SuperMap.Plot.PlottingUtil.coordinateTrans(P,f,h),m=[];m.push(M),m.push(d),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m,{fillLimit:!0,lineTypeLimit:!0,surroundLineLimit:!0});var b=new SuperMap.Geometry.Point(-.2*s,0),v=SuperMap.Plot.PlottingUtil.circlePoint(b,.3*s,.3*s,45),O=SuperMap.Plot.PlottingUtil.circlePoint(b,.3*s,.3*s,315),L=SuperMap.Plot.PlottingUtil.coordinateTrans(P,b,h),U=SuperMap.Plot.PlottingUtil.coordinateTrans(P,v,h),w=SuperMap.Plot.PlottingUtil.coordinateTrans(P,O,h);(m=[]).push(U),m.push(L),m.push(w),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m,{fillLimit:!0,lineTypeLimit:!0,surroundLineLimit:!0});var _=new SuperMap.Geometry.Point(.3*s,0),T=new SuperMap.Geometry.Point(.4*s,0),x=SuperMap.Plot.PlottingUtil.coordinateTrans(P,_,h),E=SuperMap.Plot.PlottingUtil.coordinateTrans(P,T,h);(m=[]).push(x),m.push(E),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,m,{fill:!1,fillLimit:!0,lineTypeLimit:!0,surroundLineLimit:!0});var G=new SuperMap.Geometry.Point(.3*s,-.13*s),V=SuperMap.Plot.PlottingUtil.coordinateTrans(P,G,h);(m=[]).push(x),m.push(V),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m,{fillLimit:!0,lineTypeLimit:!0,surroundLineLimit:!0}),this.clearScalePoints(),this.addScalePoint(p[p.length-1]);var A=SuperMap.Plot.PlottingUtil.circlePoint(P,s,s,h+90);this.addScalePoint(A)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]);if(0==t){var n=(u=SuperMap.Plot.PlottingUtil.distance(e,l[0]))/o;this.getScaleValues()[0]=n}else if(1==t){var i=this.getScaleValues()[0]*o,r=SuperMap.Plot.PlottingUtil.circlePoint(l[0],i,i,90),a=SuperMap.Plot.PlottingUtil.circlePoint(l[1],i,i,90),p=new SuperMap.Geometry.Point((r.x+a.x)/2,(r.y+a.y)/2),u=SuperMap.Plot.PlottingUtil.distance(p,e),s=u/o;s>=.8&&(s=.8),this.getScaleValues()[1]=s}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol37100=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function t(e,l,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,l);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,l,o)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(o)},p=function(t){return t&&t.__esModule?t:{default:t}}(l(10)),u=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol37200",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.1,l.getScaleValues()[1]=.2),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,p["default"]),r(e,[{key:"calculateParts",value:function(){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"calculateParts",this).call(this)}}]),e}();e.default=u,SuperMap.Geometry.AlgoSymbol37200=u},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol37300",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.125,l.getScaleValues()[1]=.02),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getIsEdit()||(this.getScaleValues()[0]=this.getSubSymbolScaleValue()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var e=SuperMap.Plot.PlottingUtil.distance(t[1],t[0]),l=SuperMap.Plot.PlottingUtil.radian(t[1],t[0])*this.RTOD,o=SuperMap.Plot.PlottingUtil.linePnt(t[1],t[0],.35*e),n=SuperMap.Plot.PlottingUtil.circlePoint(o,.05*e,.05*e,l+90);this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[n,o],{fill:!1,fillLimit:!0,lineTypeLimit:!0,surroundLineLimit:!0});var i=this.getScaleValues()[0],r=this.getScaleValues()[1],a=new SuperMap.Geometry.Point(i*e,r*e),p=new SuperMap.Geometry.Point(i*e,-r*e),u=SuperMap.Plot.PlottingUtil.coordinateTrans(t[1],a,l),s=SuperMap.Plot.PlottingUtil.coordinateTrans(t[1],p,l),P=[];P.push(u),P.push(s),P.push(t[1]),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,P,{fillLimit:!0,fillStyle:0}),this.clearScalePoints(),this.addScalePoint(s)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.distance(l[1],l[0]);if(0==t){var n=SuperMap.Plot.PlottingUtil.projectPoint(e,l[1],l[0]),i=SuperMap.Plot.PlottingUtil.distance(n,l[1]);90>SuperMap.Plot.PlottingUtil.radian(l[1],n)*this.RTOD&&(i=-i);var r=i/o;this.getScaleValues()[0]=r;var a=SuperMap.Plot.PlottingUtil.distance(e,n)/o;this.getScaleValues()[1]=a}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol37300=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol37301",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.125,l.getScaleValues()[1]=.02,l.getScaleValues()[2]=.25,l.getScaleValues()[3]=.8),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<4&&(this.getScaleValues()[0]=.125,this.getScaleValues()[1]=.02,this.getScaleValues()[2]=.25,this.getScaleValues()[3]=.8),this.getIsEdit()||(this.getScaleValues()[0]=this.getSubSymbolScaleValue()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var e=SuperMap.Plot.PlottingUtil.distance(t[1],t[0]),l=SuperMap.Plot.PlottingUtil.radian(t[1],t[0])*this.RTOD,o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2],r=this.getScaleValues()[3],a=new SuperMap.Geometry.Point(o*e,n*e),p=new SuperMap.Geometry.Point(o*e,-n*e),u=SuperMap.Plot.PlottingUtil.coordinateTrans(t[1],a,l),s=SuperMap.Plot.PlottingUtil.coordinateTrans(t[1],p,l),P=[];P.push(u),P.push(s),P.push(t[1]),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,P,{fillLimit:!0,fillStyle:0});var c=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(i*e,t);if(c.bfind){var S=.05*e,y=c.pts,h=SuperMap.Plot.PlottingUtil.circlePoint(y,S,S,l+90),g=SuperMap.Plot.PlottingUtil.circlePoint(y,S,S,l+270);if((P=[]).push(h),P.push(g),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P,{lineTypeLimit:!0,surroundLineLimit:!0}),(c=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(r*e,t)).bfind){var f=c.pts,M=SuperMap.Plot.PlottingUtil.circlePoint(f,S,S,l+90),d=SuperMap.Plot.PlottingUtil.circlePoint(f,S,S,l+270);(P=[]).push(M),P.push(d),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P,{lineTypeLimit:!0,surroundLineLimit:!0}),this.clearScalePoints(),this.addScalePoint(s),this.addScalePoint(y),this.addScalePoint(f)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>2)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.distance(l[1],l[0]);if(0==t){var n=SuperMap.Plot.PlottingUtil.projectPoint(e,l[1],l[0]),i=SuperMap.Plot.PlottingUtil.distance(n,l[1]);90>SuperMap.Plot.PlottingUtil.radian(l[1],n)*this.RTOD&&(i=-i);var r=i/o;this.getScaleValues()[0]=r;var a=(p=SuperMap.Plot.PlottingUtil.distance(e,n))/o;this.getScaleValues()[1]=a}else if(1==t){var p=SuperMap.Plot.PlottingUtil.distance(l[0],e),u=p/o;if(.1>u||u>.95)return;this.getScaleValues()[2]=u}else if(2==t){var s=SuperMap.Plot.PlottingUtil.distance(l[0],e)/o;if(.1>s||s>.95)return;this.getScaleValues()[3]=s}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol37301=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol37600",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.1),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(0>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),o=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var n=this.getDefaultSubSymbolSize()/o;(n>.3||n<=0)&&(n=.3),this.getScaleValues()[0]=2*n}this.getScaleValues()[0],this.getScaleValues()[1];var i=o*this.getScaleValues()[2],r=o*this.getScaleValues()[3],a=new SuperMap.Geometry.Point(l.x+i,l.y+r),p=o*this.getScaleValues()[0];this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],a,p,0),this.clearScalePoints();var u=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,180);this.addScalePoint(u),this.addScalePoint(a)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=[];if(3>=this.controlPoints.length?o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),0>(o=SuperMap.Plot.PlottingUtil.clearSamePts(o)).length)return;var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);if(0==t){var r=n*this.getScaleValues()[2],a=n*this.getScaleValues()[3],p=new SuperMap.Geometry.Point(i.x+r,i.y+a),u=SuperMap.Plot.PlottingUtil.distance(e,p)/n;this.getScaleValues()[0]=u}else if(1==t){var s=(e.x-i.x)/n,P=(e.y-i.y)/n;this.getScaleValues()[2]=s,this.getScaleValues()[3]=P}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol37600=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol37601",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.1),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(0>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),n=(this.getScaleValues()[0],this.getScaleValues()[1],l*this.getScaleValues()[2]),i=l*this.getScaleValues()[3],r=new SuperMap.Geometry.Point(o.x+n,o.y+i);if(!this.getIsEdit()){var a=this.getDefaultSubSymbolSize()/l;(a>.3||a<=0)&&(a=.3),this.getScaleValues()[0]=2*a}var p=l*this.getScaleValues()[0];this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],r,p,90),this.clearScalePoints();var u=SuperMap.Plot.PlottingUtil.circlePoint(r,p,p,180);this.addScalePoint(u),this.addScalePoint(r)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=[];if(3>=this.controlPoints.length?o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),0>(o=SuperMap.Plot.PlottingUtil.clearSamePts(o)).length)return;var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);if(0==t){var r=n*this.getScaleValues()[2],a=n*this.getScaleValues()[3],p=new SuperMap.Geometry.Point(i.x+r,i.y+a),u=SuperMap.Plot.PlottingUtil.distance(e,p)/n;this.getScaleValues()[0]=u}else if(1==t){var s=(e.x-i.x)/n,P=(e.y-i.y)/n;this.getScaleValues()[2]=s,this.getScaleValues()[3]=P}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol37601=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol37700",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&l.getScaleValues().push(.2),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getKendyShapePts(t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),e=SuperMap.Plot.PlottingUtil.clearSamePts(e),!(this.minEditPts>e.length)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e);if(!this.getIsEdit()){var n=this.getDefaultSubSymbolSize()/l;(n>.3||n<=0)&&(n=.3),this.getScaleValues()[0]=2*n}var i=l*this.getScaleValues()[0];this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],o,i,0)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol37700=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol38700",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues()[0]=Math.PI/4,l.getScaleValues()[1]=Math.PI/4,l.getScaleValues()[2]=.3,l.getScaleValues()[3]=.1),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<4&&(this.getScaleValues()[0]=Math.PI/4,this.getScaleValues()[1]=Math.PI/4,this.getScaleValues()[2]=.3,this.getScaleValues()[3]=.1);var e=t[0],l=t[1],o=SuperMap.Plot.PlottingUtil.distance(e,l),n=SuperMap.Plot.PlottingUtil.radian(e,l)*this.RTOD;if(!this.getIsEdit()){var i=this.getDefaultSubSymbolSize()/o;(i>.3||i<=0)&&(i=.3),this.getScaleValues()[2]=i}var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=this.getScaleValues()[2],u=this.getScaleValues()[3],s=r*this.RTOD,P=n-s,c=n+s,S=this.GetArcPts(P,c,e,o);if(!(2>S.length)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S);var y=o*p,h=n-90,g=o*u,f=SuperMap.Plot.PlottingUtil.linePnt(e,l,g),M=null;if(!(this.getSubSymbols().length>0&&null===(M=this.computeSubSymbol(this.getSubSymbols()[0],f,y,h,0,-.5)))){for(var d=SuperMap.Plot.PlottingUtil.radian(f,l)*this.RTOD-30,m=SuperMap.Plot.PlottingUtil.distance(f,l),b=0,v=t[0].clone(),O=SuperMap.Plot.PlottingUtil.circlePoint(f,m,m,d),L=0;L<M.length;L++){if(!(2>M[L].positionPoints))for(var U=0;U<M[L].positionPoints.length-1;U++){var w=M[L].positionPoints[U],_=M[L].positionPoints[U+1],T=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.intersectLineSegs(f,O,w,_,T)&&(0==b?v=T:SuperMap.Plot.PlottingUtil.distance(f,T)>SuperMap.Plot.PlottingUtil.distance(f,v)&&(v=T),b++)}}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[v,O]);var x=SuperMap.Plot.PlottingUtil.radian(O,v)*this.RTOD,E=SuperMap.Plot.PlottingUtil.distance(v,O),G=SuperMap.Plot.PlottingUtil.circlePoint(O,.1*E,.1*E,x-15),V=SuperMap.Plot.PlottingUtil.circlePoint(O,.1*E,.1*E,x+15),A=[];A.push(O),A.push(G),A.push(V),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,A,{fillLimit:!0,fillStyle:0}),this.clearScalePoints();var C=SuperMap.Plot.PlottingUtil.circlePoint(e,o,o,c);this.addScalePoint(C);var Y=SuperMap.Plot.PlottingUtil.linePnt(f,l,o*p);if(this.addScalePoint(Y),this.addScalePoint(f),3==t.length){var I=t[2],j=SuperMap.Plot.PlottingUtil.distance(e,I),B=a*this.RTOD,R=n-B,N=n+B,D=this.GetArcPts(R,N,e,j);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,D);var k=SuperMap.Plot.PlottingUtil.circlePoint(e,j,j,N);this.addScalePoint(k);var z=O,F=SuperMap.Plot.PlottingUtil.distance(e,I)-o,K=SuperMap.Plot.PlottingUtil.circlePoint(z,F,F,d);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[z,K]);var W=SuperMap.Plot.PlottingUtil.circlePoint(K,.1*F,.1*F,x-15),q=SuperMap.Plot.PlottingUtil.circlePoint(K,.1*F,.1*F,x+15),H=[];H.push(K),H.push(W),H.push(q),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,H,{fillLimit:!0,fillStyle:0})}}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>3)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=e,n=l[0],i=l[1],r=SuperMap.Plot.PlottingUtil.distance(n,i),a=SuperMap.Plot.PlottingUtil.radian(n,i);if(0===t){var p=SuperMap.Plot.PlottingUtil.radian(n,o),u=Math.abs(p-a);this.getScaleValues()[0]=u}else if(1===t){var s=r*this.getScaleValues()[3],P=SuperMap.Plot.PlottingUtil.linePnt(n,i,s),c=SuperMap.Plot.PlottingUtil.distance(o,P)/r;this.getScaleValues()[2]=c}else if(2===t){var S=SuperMap.Plot.PlottingUtil.distance(o,n)/r;S>=.98&&(S=.98),this.getScaleValues()[3]=S}else if(3===t){var y=SuperMap.Plot.PlottingUtil.radian(n,o),h=Math.abs(y-a);this.getScaleValues()[1]=h}}this.calculateParts()}},{key:"GetArcPts",value:function(t,e,l,o){var n,i=[],r=0;for(r=t;r<e;r+=4)n=SuperMap.Plot.PlottingUtil.circlePoint(l,o,o,r),i.push(n);return r!==e&&(n=SuperMap.Plot.PlottingUtil.circlePoint(l,o,o,e),i.push(n)),i}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol38700=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol39000",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.05,l.getScaleValues()[1]=.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getKendyShapePts(t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),e=SuperMap.Plot.PlottingUtil.clearSamePts(e),!(this.minEditPts>e.length)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);for(var l=e[0].x,o=e[0].x,n=e[0].y,i=e[0].y,r=0;r<e.length;r++)l>e[r].x&&(l=e[r].x),o<e[r].x&&(o=e[r].x),n>e[r].y&&(n=e[r].y),i<e[r].y&&(i=e[r].y);var a=new SuperMap.Geometry.Point((o+l)/2,(i+n)/2),p=o-l,u=i-n,s=.2*p,P=.2*u,c=new SuperMap.Geometry.Point(a.x,a.y+P),S=new SuperMap.Geometry.Point(a.x-s,a.y-P),y=new SuperMap.Geometry.Point(a.x+s,a.y-P);if(!this.getIsEdit()){var h=.6*this.getDefaultSubSymbolSize();this.getScaleValues()[0]=h>=p/4?.1:h/p,this.getScaleValues()[1]=h>=u/4?.1:h/u}this.getScaleValues().length<2&&(this.getScaleValues()[0]=.1,this.getScaleValues()[1]=.1),s=p*this.getScaleValues()[0],P=u*this.getScaleValues()[1];var g=new SuperMap.Geometry.Point(c.x,c.y+P),f=new SuperMap.Geometry.Point(c.x-s,c.y-P),M=new SuperMap.Geometry.Point(c.x+s,c.y-P),d=new SuperMap.Geometry.Point((g.x+f.x)/2,(g.y+f.y)/2),m=new SuperMap.Geometry.Point((g.x+M.x)/2,(g.y+M.y)/2),b=[];b.push(g),b.push(d),b.push(m),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,b,{lineTypeLimit:!0,surroundLineLimit:!0}),(b=[]).push(d),b.push(m),b.push(M),b.push(f),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,b,{fillLimit:!0,fillStyle:0,lineTypeLimit:!0,surroundLineLimit:!0});var v=new SuperMap.Geometry.Point(S.x,S.y+P),O=new SuperMap.Geometry.Point(S.x-s,S.y-P),L=new SuperMap.Geometry.Point(S.x+s,S.y-P),U=new SuperMap.Geometry.Point((v.x+O.x)/2,(v.y+O.y)/2),w=new SuperMap.Geometry.Point((v.x+L.x)/2,(v.y+L.y)/2);(b=[]).push(v),b.push(U),b.push(w),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,b,{lineTypeLimit:!0,surroundLineLimit:!0}),(b=[]).push(U),b.push(w),b.push(L),b.push(O),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,b,{fillLimit:!0,fillStyle:0,lineTypeLimit:!0,surroundLineLimit:!0});var _=new SuperMap.Geometry.Point(y.x,y.y+P),T=new SuperMap.Geometry.Point(y.x-s,y.y-P),x=new SuperMap.Geometry.Point(y.x+s,y.y-P),E=new SuperMap.Geometry.Point((_.x+T.x)/2,(_.y+T.y)/2),G=new SuperMap.Geometry.Point((_.x+x.x)/2,(_.y+x.y)/2);(b=[]).push(_),b.push(E),b.push(G),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,b,{lineTypeLimit:!0,surroundLineLimit:!0}),(b=[]).push(E),b.push(G),b.push(x),b.push(T),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,b,{fillLimit:!0,fillStyle:0,lineTypeLimit:!0,surroundLineLimit:!0})}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol39000=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol39101",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(.1),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getKendyShapePts(t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(0>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e);if(!this.getIsEdit()){var n=this.getDefaultSubSymbolSize()/l;(n>.3||n<=0)&&(n=.3),this.getScaleValues()[0]=2*n}this.getScaleValues()[0],this.getScaleValues()[1];var i=l*this.getScaleValues()[2],r=l*this.getScaleValues()[3],a=new SuperMap.Geometry.Point(o.x+i,o.y+r),p=l*this.getScaleValues()[0];this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],a,p,0),this.clearScalePoints();var u=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,180);this.addScalePoint(u),this.addScalePoint(a)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=[];if(3>=this.controlPoints.length?o=SuperMap.Plot.Primitives.getKendyShapePts(l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),0>(o=SuperMap.Plot.PlottingUtil.clearSamePts(o)).length)return;var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);if(0==t){var r=n*this.getScaleValues()[2],a=n*this.getScaleValues()[3],p=new SuperMap.Geometry.Point(i.x+r,i.y+a),u=SuperMap.Plot.PlottingUtil.distance(e,p)/n;this.getScaleValues()[0]=u}else if(1==t){var s=(e.x-i.x)/n,P=(e.y-i.y)/n;this.getScaleValues()[2]=s,this.getScaleValues()[3]=P}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol39101=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol39500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.285714),l.getScaleValues().push(.08),l.getScaleValues().push(.181818),l.getScaleValues().push(.285714),l.getScaleValues().push(.285714)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(.285714),this.getScaleValues().push(.08),this.getScaleValues().push(.181818),this.getScaleValues().push(.285714),this.getScaleValues().push(.285714));var e=t[0],l=t[1],o=SuperMap.Plot.PlottingUtil.distance(e,l),n=this.getScaleValues()[0],i=new SuperMap.Geometry.Point(0,-o*n),r=new SuperMap.Geometry.Point(0,o*n),a=this.getScaleValues()[1],p=this.getScaleValues()[3],u=new SuperMap.Geometry.Point(o*(1-p),-o*a),s=new SuperMap.Geometry.Point(o*(1-p),o*a),P=this.getScaleValues()[2],c=this.getScaleValues()[4],S=new SuperMap.Geometry.Point(o*(1-c),-o*P),y=new SuperMap.Geometry.Point(o*(1-c),o*P),h=new SuperMap.Geometry.Point(o,0),g=SuperMap.Plot.PlottingUtil.radian(e,l)*this.RTOD,f=[];f.push(i),f.push(u),f.push(S),f.push(h),f.push(y),f.push(s),f.push(r);for(var M=[],d=0;d<f.length;d++){var m=SuperMap.Plot.PlottingUtil.coordinateTrans(e,f[d],g);M.push(m)}for(var b=[],v=M.length-1;v>=0;--v)b.push(M[v]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b);var O=t[0],L=t[0],U=t[1],w=SuperMap.Plot.PlottingUtil.radian(L,U)*this.RTOD+270,_=.2*o;this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],O,_,w),this.clearScalePoints(),this.addScalePoint(M[0]),this.addScalePoint(M[1]),this.addScalePoint(M[2])}}},{key:"modifyPoint",value:function(t,e){if(e.isScalePoint&&(t>=0||t<3)){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]),n=l[0].clone(),i=l[1].clone(),r=e.clone();if(0==t){var a=SuperMap.Plot.PlottingUtil.distance(r,n)/o;this.getScaleValues()[0]=a}else if(1==t){var p=SuperMap.Plot.PlottingUtil.projectPoint(r,n,i),u=(P=SuperMap.Plot.PlottingUtil.distance(p,r))/o;this.getScaleValues()[1]=u;var s=(S=SuperMap.Plot.PlottingUtil.distance(p,i))/o;this.getScaleValues()[3]=s}else if(2==t){var p=SuperMap.Plot.PlottingUtil.projectPoint(r,n,i),P=SuperMap.Plot.PlottingUtil.distance(p,r),c=P/o;this.getScaleValues()[2]=c;var S=SuperMap.Plot.PlottingUtil.distance(p,i),y=S/o;this.getScaleValues()[4]=y}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol39500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(37)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol39600",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.03,l.getScaleValues()[1]=.05),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol39600=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(5)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol39801",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[],l=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(this.clearScalePoints(),t.length<3)e.push(t[0]),e.push(t[1]);else{var o=SuperMap.Plot.PlottingUtil.computeBeizerPoints(this.getIsEdit(),t,this.getScaleValues());this.setScaleValues(o.scaleValues);for(var n=0;n<o.scalePoints.length;n++)this.addScalePoint(o.scalePoints[n]);e=o.beizerPoints}SuperMap.Plot.PlottingUtil.clearSamePts(e);var i=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){this.getScaleValues().push(.5),this.getScaleValues()[1]=this.getSubSymbolScaleValue();var r=this.getSubSymbolScaleValue();this.getScaleValues().push(r)}if(!(e.length<=0)){var a;a=2==t.length?0:t.length-1;var p;this.getIsEdit()?p=i*this.getScaleValues()[4*a]:(this.getScaleValues()[4*this.controlPoints.length-4]=.5,p=i*this.getScaleValues()[4*this.controlPoints.length-4]);var u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(p,e);if(u.bfind){var s=u.index,P=u.pts;this.getIsEdit()||(this.getScaleValues()[4*this.controlPoints.length-4]=.5,this.getScaleValues()[4*this.controlPoints.length-3]=this.getSubSymbolScaleValue(),p=this.getScaleValues()[4*this.controlPoints.length-4]*l);var c=l*this.getSubSymbolScaleValue()*.8,S=p-c,y=p+c;if((u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(S,e)).bfind){var h,g=u.pts,f=[];if(0==(s=u.index))f.push(e[0]);else for(h=0;h<s;h++)f.push(e[h]);if(f.push(g),(u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(y,e)).bfind){var M=u.pts;s=u.index;var d=[];for(d.push(M),h=s+1;h<e.length;h++)d.push(e[h]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d);var m=SuperMap.Plot.PlottingUtil.radian(g,M)*this.RTOD,b=SuperMap.Plot.PlottingUtil.distance(g,M),v=new SuperMap.Geometry.Point((g.x+M.x)/2,(g.y+M.y)/2);this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],v,.8*b,m);var O=l*this.getScaleValues()[4*a+1]/1.667;if(!(f.length<2)){var L=f[0],U=f[1],w=SuperMap.Plot.PlottingUtil.radian(L,U)*this.RTOD,_=SuperMap.Plot.PlottingUtil.circlePoint(L,O,O,w+90),T=SuperMap.Plot.PlottingUtil.circlePoint(L,O,O,w+270),x=[];if(x.push(_),x.push(T),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,x),!(d.length<2)){var E=d[d.length-1],G=d[d.length-2],V=SuperMap.Plot.PlottingUtil.radian(E,G)*this.RTOD,A=SuperMap.Plot.PlottingUtil.circlePoint(E,O,O,V+90),C=SuperMap.Plot.PlottingUtil.circlePoint(E,O,O,V+270);(x=[]).push(A),x.push(C),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,x),this.addScalePoint(P),this.addScalePoint(_)}}}}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol39801=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(5)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol39802",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[],l=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(this.clearScalePoints(),t.length<3)e.push(t[0]),e.push(t[1]);else{var o=SuperMap.Plot.PlottingUtil.computeBeizerPoints(this.getIsEdit(),t,this.getScaleValues());this.setScaleValues(o.scaleValues);for(var n=0;n<o.scalePoints.length;n++)this.addScalePoint(o.scalePoints[n]);e=o.beizerPoints}SuperMap.Plot.PlottingUtil.clearSamePts(e);var i=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){this.getScaleValues().push(.5),this.getScaleValues()[1]=this.getSubSymbolScaleValue();K=this.getSubSymbolScaleValue();this.getScaleValues().push(K)}if(!(e.length<=0)){var r;r=2==t.length?0:t.length-1;var a;this.getIsEdit()?a=i*this.getScaleValues()[4*r]:(this.getScaleValues()[4*this.controlPoints.length-4]=.5,a=i*this.getScaleValues()[4*this.controlPoints.length-4]);var p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a,e);if(p.bfind){var u=p.index,s=p.pts;this.getIsEdit()||(this.getScaleValues()[4*this.controlPoints.length-4]=.5,this.getScaleValues()[4*this.controlPoints.length-3]=this.getSubSymbolScaleValue(),a=this.getScaleValues()[4*this.controlPoints.length-4]*l);var P=l*this.getSubSymbolScaleValue()*.8,c=a-P,S=a+P;if((p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(c,e)).bfind){var y,h=p.pts,g=[];if(0==(u=p.index))g.push(e[0]);else for(y=0;y<u;y++)g.push(e[y]);if(g.push(h),(p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(S,e)).bfind){var f=p.pts;u=p.index;var M=[];for(M.push(f),y=u+1;y<e.length;y++)M.push(e[y]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M);var d=SuperMap.Plot.PlottingUtil.radian(h,f)*this.RTOD,m=SuperMap.Plot.PlottingUtil.distance(h,f),b=new SuperMap.Geometry.Point((h.x+f.x)/2,(h.y+f.y)/2);this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],b,.8*m,d);var v=l*this.getScaleValues()[4*r+1]/1.667;if(!(g.length<2)){var O=g[0],L=g[1],U=SuperMap.Plot.PlottingUtil.radian(O,L)*this.RTOD,w=SuperMap.Plot.PlottingUtil.circlePoint(O,v,v,U+90),_=SuperMap.Plot.PlottingUtil.circlePoint(O,v,v,U+270),T=[];if(T.push(w),T.push(_),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,T),!(M.length<2)){var x=M[M.length-1],E=M[M.length-2],G=SuperMap.Plot.PlottingUtil.radian(x,E)*this.RTOD,V=SuperMap.Plot.PlottingUtil.circlePoint(x,v,v,G+90),A=SuperMap.Plot.PlottingUtil.circlePoint(x,v,v,G+270);(T=[]).push(V),T.push(A),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,T);var C=SuperMap.Plot.PlottingUtil.paraLine(e,v,!1),Y=SuperMap.Plot.PlottingUtil.polylineDistance(C)/11,I=Y;for(y=0;y<11;y++)if((p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(I-Y,C)).bfind){var j=p.index,B=p.pts;if((p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(I,C)).bfind){var R=p.pts,N=p.index;if(y%2==0){var D=[];D.push(B);for(var k=j+1;k<=N;k++)D.push(C[k]);D.push(R),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,D,{surroundLineLimit:!0,lineColorLimit:!0,color:"#000000",strokeColor:"#000000",strokeOpacity:1})}I+=Y}}var z=[];z=SuperMap.Plot.PlottingUtil.paraLine(e,2*v,!1),SuperMap.Plot.PlottingUtil.clearSamePts(z),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,z);var F=[];if(F=SuperMap.Plot.PlottingUtil.paraLine(e,2*v,!0),SuperMap.Plot.PlottingUtil.clearSamePts(F),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,F),!this.getIsEdit()){this.getScaleValues().push(.5);var K=1.667*v/l;this.getScaleValues().push(K)}this.addScalePoint(s),this.addScalePoint(w)}}}}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol39802=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(5)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol40000",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[],l=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(this.clearScalePoints(),t.length<3)e.push(t[0]),e.push(t[1]);else{var o=SuperMap.Plot.PlottingUtil.computeBeizerPoints(this.getIsEdit(),t,this.getScaleValues());this.setScaleValues(o.scaleValues);for(var n=0;n<o.scalePoints.length;n++)this.addScalePoint(o.scalePoints[n]);e=o.beizerPoints}SuperMap.Plot.PlottingUtil.clearSamePts(e);var i=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){this.getScaleValues().push(.5),this.getScaleValues()[1]=this.getSubSymbolScaleValue();var r=this.getSubSymbolScaleValue();this.getScaleValues().push(r)}if(!(e.length<=0)){var a;a=2==t.length?0:t.length-1;var p;this.getIsEdit()?p=i*this.getScaleValues()[4*a]:(this.getScaleValues()[4*this.controlPoints.length-4]=.5,p=i*this.getScaleValues()[4*this.controlPoints.length-4]);var u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(p,e);if(u.bfind){var s=u.index,P=u.pts;this.getIsEdit()||(this.getScaleValues()[4*this.controlPoints.length-4]=.5,this.getScaleValues()[4*this.controlPoints.length-3]=this.getSubSymbolScaleValue(),p=this.getScaleValues()[4*this.controlPoints.length-4]*l);var c=l*this.getSubSymbolScaleValue()*.8,S=p-c,y=p+c;if((u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(S,e)).bfind){var h,g=u.pts,f=[];if(0==(s=u.index))f.push(e[0]);else for(h=0;h<s;h++)f.push(e[h]);if(f.push(g),(u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(y,e)).bfind){var M=u.pts;s=u.index;var d=[];for(d.push(M),h=s+1;h<e.length;h++)d.push(e[h]);var m={lineColorLimit:!0,strokeColor:"#0000FF",strokeOpacity:1,color:"#0000FF"};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f,m),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d,m);var b=SuperMap.Plot.PlottingUtil.radian(g,M)*this.RTOD,v=SuperMap.Plot.PlottingUtil.distance(g,M),O=new SuperMap.Geometry.Point((g.x+M.x)/2,(g.y+M.y)/2),L=[];L.push(O),L.push(new SuperMap.Geometry.Point(O.x+v/2,O.y)),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,L,m);var U=SuperMap.Plot.PlottingUtil.circlePoint(O,v/2,v/2,b+90),w=SuperMap.Plot.PlottingUtil.circlePoint(U,v,v,b);(L=[]).push(U),L.push(w),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,L,m);var _=SuperMap.Plot.PlottingUtil.circlePoint(O,v/2,v/2,b+270),T=SuperMap.Plot.PlottingUtil.circlePoint(_,v,v,b);(L=[]).push(_),L.push(T),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,L,m);var x=l*this.getScaleValues()[4*a+1]/1.667;if(!(f.length<2)){var E=f[0],G=f[1],V=SuperMap.Plot.PlottingUtil.radian(E,G)*this.RTOD,A=SuperMap.Plot.PlottingUtil.circlePoint(E,x,x,V+90),C=SuperMap.Plot.PlottingUtil.circlePoint(E,x,x,V+270);if((L=[]).push(A),L.push(C),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,L,m),!(d.length<2)){var Y=d[d.length-1],I=d[d.length-2],j=SuperMap.Plot.PlottingUtil.radian(Y,I)*this.RTOD,B=SuperMap.Plot.PlottingUtil.circlePoint(Y,x,x,j+90),R=SuperMap.Plot.PlottingUtil.circlePoint(Y,x,x,j+270);(L=[]).push(B),L.push(R),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,L,m);var N=SuperMap.Plot.PlottingUtil.circlePoint(O,v/2,v/2,b),D=SuperMap.Plot.PlottingUtil.circlePoint(N,2*v,2*v,b+150),k=SuperMap.Plot.PlottingUtil.circlePoint(N,2*v,2*v,b+330);(L=[]).push(D),L.push(k),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,L);var z=SuperMap.Plot.PlottingUtil.circlePoint(N,1.5*v,1.5*v,b+330),F=SuperMap.Plot.PlottingUtil.circlePoint(z,.125*v,.125*v,b+330+90),K=SuperMap.Plot.PlottingUtil.circlePoint(z,.125*v,.125*v,b+330+270);(L=[]).push(k),L.push(F),L.push(K),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,L,{fillLimit:!0,fillStyle:0}),this.addScalePoint(P),this.addScalePoint(A)}}}}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol40000=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol40100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.05),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(0>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e);if(!this.getIsEdit()){var n=this.getDefaultSubSymbolSize()/l;(n>.3||n<=0)&&(n=.3),this.getScaleValues()[0]=.5*n}var i=this.getScaleValues()[0],r=(this.getScaleValues()[1],l*i),a=l*this.getScaleValues()[2],p=l*this.getScaleValues()[3],u=new SuperMap.Geometry.Point(o.x+a,o.y+p),s=.6*r,P=new SuperMap.Geometry.Point(u.x+r,u.y),c=SuperMap.Plot.PlottingUtil.circlePoint(P,s,s,0),S=SuperMap.Plot.PlottingUtil.circlePoint(P,s,s,180),y=[];y.push(c),y.push(S),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y,{lineTypeLimit:!0});var h=SuperMap.Plot.PlottingUtil.circlePoint(P,s,s,90),g=SuperMap.Plot.PlottingUtil.circlePoint(P,s,s,270);(y=[]).push(h),y.push(g),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y,{lineTypeLimit:!0});var f=new SuperMap.Geometry.Point(u.x-r,u.y),M=SuperMap.Plot.PlottingUtil.circlePoint(f,.5*r,.5*r,270),d=SuperMap.Plot.PlottingUtil.circlePoint(f,r,r,240),m=SuperMap.Plot.PlottingUtil.circlePoint(f,r,r,90),b=SuperMap.Plot.PlottingUtil.circlePoint(f,r,r,300);(y=[]).push(M),y.push(d),y.push(m),y.push(b),y.push(M),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y,{lineTypeLimit:!0}),this.clearScalePoints();var v=SuperMap.Plot.PlottingUtil.circlePoint(u,r,r,0);this.addScalePoint(v),this.addScalePoint(u)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=[];if(3>=this.controlPoints.length?o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),0>(o=SuperMap.Plot.PlottingUtil.clearSamePts(o)).length)return;var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);if(0===t){var r=n*this.getScaleValues()[2],a=n*this.getScaleValues()[3],p=new SuperMap.Geometry.Point(i.x+r,i.y+a),u=SuperMap.Plot.PlottingUtil.distance(e,p)/n;this.getScaleValues()[0]=u}else if(1===t){var s=(e.x-i.x)/n,P=(e.y-i.y)/n;this.getScaleValues()[2]=s,this.getScaleValues()[3]=P}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol40100=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol40101",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.05),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(0>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e);if(!this.getIsEdit()){var n=this.getDefaultSubSymbolSize()/l;(n>.3||n<=0)&&(n=.3),this.getScaleValues()[0]=.5*n}var i=this.getScaleValues()[0],r=(this.getScaleValues()[1],l*i),a=l*this.getScaleValues()[2],p=l*this.getScaleValues()[3],u=new SuperMap.Geometry.Point(o.x+a,o.y+p),s=[];s.push(u),s.push(new SuperMap.Geometry.Point(u.x+r,u.y)),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,s,{fillLimit:!0,fillStyle:0,lineTypeLimit:!0,surroundLineLimit:!0});for(var P=5*r,c=new SuperMap.Geometry.Point(u.x+P,u.y),S=[],y=135;y<180;y+=3)S.push(SuperMap.Plot.PlottingUtil.circlePoint(c,P,P,y));S.push(SuperMap.Plot.PlottingUtil.circlePoint(c,P,P,180)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S,{lineTypeLimit:!0,surroundLineLimit:!0}),this.clearScalePoints();var h=SuperMap.Plot.PlottingUtil.circlePoint(u,r,r,0);this.addScalePoint(h),this.addScalePoint(u)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=[];if(3>=this.controlPoints.length?o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),0>(o=SuperMap.Plot.PlottingUtil.clearSamePts(o)).length)return;var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);if(0===t){var r=n*this.getScaleValues()[2],a=n*this.getScaleValues()[3],p=new SuperMap.Geometry.Point(i.x+r,i.y+a),u=SuperMap.Plot.PlottingUtil.distance(e,p)/n;this.getScaleValues()[0]=u}else if(1===t){var s=(e.x-i.x)/n,P=(e.y-i.y)/n;this.getScaleValues()[2]=s,this.getScaleValues()[3]=P}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol40101=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(38)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol4010801",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol4010801=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues().push(.333333),l.getScaleValues().push(.333333),l.getScaleValues().push(.125),l.getScaleValues().push(90)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[];if(2==t.length){var l=new SuperMap.Geometry.Point(t[0].x,t[0].y),o=new SuperMap.Geometry.Point(t[1].x,t[1].y),n=SuperMap.Plot.PlottingUtil.distance(l,o),i=180*SuperMap.Plot.PlottingUtil.radian(l,o)/Math.PI,r=SuperMap.Plot.PlottingUtil.circlePoint(l,n,n,i+60);e.push(t[0]),e.push(o),e.push(r),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e)}else{this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);for(var a=0;a<t.length;a++)e.push(t[a])}var p=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e);e.push(e[0]);var u=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var s=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getScaleValues()[2]=2*s*this.getSubSymbolScaleValue()/u}var P=this.getScaleValues()[0],c=this.getScaleValues()[1],S=this.getScaleValues()[2],y=this.getScaleValues()[3],h=this.ComputeSubSymbolPt(P,c,e,p),g=u*S,f=h,i=y-90;0<this.getSubSymbols().length&&this.computeSubSymbol(this.getSubSymbols()[0],f,g,i),this.addScalePoint(f);var M=SuperMap.Plot.PlottingUtil.circlePoint(h,g,g,y);this.addScalePoint(M)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=[];if(2==l.length){var n=l[0],i=l[1],r=SuperMap.Plot.PlottingUtil.distance(n,i),a=180*SuperMap.Plot.PlottingUtil.radian(n,i)/Math.PI,p=SuperMap.Plot.PlottingUtil.circlePoint(n,r,r,a+60);o.push(n),o.push(i),o.push(p)}else o=o.concat(l);var n=o[0],i=o[1],p=o[2],u=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);o.push(o[0]);var s=SuperMap.Plot.PlottingUtil.polylineDistance(o),P=e;if(0==t){var c=SuperMap.Plot.PlottingUtil.plumbLineLen(p,n,i),S=SuperMap.Plot.PlottingUtil.plumbLineLen(i,n,p),y=SuperMap.Plot.PlottingUtil.plumbLineLen(P,n,i)/c,h=SuperMap.Plot.PlottingUtil.plumbLineLen(P,n,p)/S;y>1&&(y=1),h>1&&(h=1),this.getScaleValues()[0]=y,this.getScaleValues()[1]=h}else if(1==t){var g=this.getScaleValues()[0],f=this.getScaleValues()[1],M=this.ComputeSubSymbolPt(g,f,o,u),d=SuperMap.Plot.PlottingUtil.distance(M,P)/s;this.getScaleValues()[2]=d;var m=180*SuperMap.Plot.PlottingUtil.radian(M,P)/Math.PI;this.getScaleValues()[3]=m}}this.calculateParts()}},{key:"ComputeSubSymbolPt",value:function(t,e,l,o){var n=l[0],i=l[1],r=l[2],a=SuperMap.Plot.PlottingUtil.plumbLineLen(r,n,i)*t,p=SuperMap.Plot.PlottingUtil.plumbLineLen(i,n,r)*e,u=[];SuperMap.Plot.PlottingUtil.pointIsRightToLine(n,i,o)?((P=[]).push(n),P.push(i),u=SuperMap.Plot.PlottingUtil.paraLine(P,a,!1)):((P=[]).push(n),P.push(i),u=SuperMap.Plot.PlottingUtil.paraLine(P,a,!0));var s;if(SuperMap.Plot.PlottingUtil.pointIsRightToLine(n,r,o))(P=[]).push(n),P.push(r),s=SuperMap.Plot.PlottingUtil.paraLine(P,p,!1);else{var P=[];P.push(n),P.push(r),s=SuperMap.Plot.PlottingUtil.paraLine(P,p,!0)}if(2>u.length||2>s.length)return o;var c=SuperMap.Plot.PlottingUtil.intersectLines(u[0],u[1],s[0],s[1]);return c.isIntersectLines?c.intersectPoint:o}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol4010905=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(20)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol4011100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(0),l.getScaleValues().push(1),l.getScaleValues().push(.1),l.getScaleValues().push(0),l.getScaleValues().push(1),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(SuperMap.Plot.PlottingUtil.clearSamePts(t),!(t.length<this.minEditPts)){10>this.getScaleValues().length&&(this.clearScaleValues(),this.getScaleValues().push(.1),this.getScaleValues().push(0),this.getScaleValues().push(1),this.getScaleValues().push(.1),this.getScaleValues().push(0),this.getScaleValues().push(1),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e,l=t[0],o=t[1];if(2==t.length){var n=SuperMap.Plot.PlottingUtil.distance(l,o),i=new SuperMap.Geometry.Point((l.x+o.x)/2,(l.y+o.y)/2);e=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n/2.7,l,i).pntLeft,t.push(e)}else 3==t.length&&(e=t[2]);var r=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t);r=SuperMap.Plot.PlottingUtil.clearSamePts(r),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,r);var a=SuperMap.Plot.PlottingUtil.distance(l,e);if(!this.getIsEdit()){var p=this.getSubSymbolScaleValue()*SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints);this.getScaleValues()[0]=p/a*.6,this.getScaleValues()[3]=p/a*.6}var u=this.getScaleValues()[0],s=this.getScaleValues()[1],P=(this.getScaleValues()[2],this.getScaleValues()[3]),c=this.getScaleValues()[4],S=(this.getScaleValues()[5],this.getScaleValues()[6]),y=this.getScaleValues()[7],h=this.getScaleValues()[8],g=this.getScaleValues()[9],f=new SuperMap.Geometry.Point(e.x+(o.x-e.x)/2,e.y-.6*(e.y-o.y)),M=new SuperMap.Geometry.Point(e.x-(e.x-l.x)/2,e.y-.6*(e.y-l.y)),d=new SuperMap.Geometry.Point(f.x+a*S,f.y+a*y),m=new SuperMap.Geometry.Point(M.x+a*h,M.y+a*g),b=[],n=.1*SuperMap.Plot.PlottingUtil.distance(d,m),v=SuperMap.Plot.PlottingUtil.linePnt(d,m,n),O=SuperMap.Plot.PlottingUtil.linePnt(m,d,n);b.push(v),b.push(O),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b);var L=a*u/.4,U=s;this.getSubSymbols()&&null!==this.getSubSymbols()&&this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],d,L,U-90);var w=a*P/.4,_=c;this.getSubSymbols()&&null!==this.getSubSymbols()&&this.getSubSymbols().length>1&&this.computeSubSymbol(this.getSubSymbols()[1],m,w,_-90),this.addScalePoint(d);var T=SuperMap.Plot.PlottingUtil.circlePoint(d,.5*L,.5*L,U);this.addScalePoint(T),this.addScalePoint(m);var x=SuperMap.Plot.PlottingUtil.circlePoint(m,.5*w,.5*w,_);this.addScalePoint(x)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol4011100=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol4020303",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(Math.PI/2),l.getScaleValues().push(.069485),l.getScaleValues().push(.14),l.getScaleValues().push(.1)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(!this.getIsEdit()){var n=this.getDefaultSubSymbolSize()/o;(n>.3||n<=0)&&(n=.3),this.getScaleValues()[2]=1.5*n,this.getScaleValues()[4]=n}var i=o*this.getScaleValues()[4],r=this.getScaleValues()[0]-this.getScaleValues()[3];r<0&&(r=0);var a=o*r,p=this.getScaleValues()[0]+this.getScaleValues()[3];p>1&&(p=1);var u=o*p,s=this.getLinePts(l,a,i),P=this.getLinePts(l,u,i),c=new SuperMap.Geometry.Point((s.startPt.x+s.endPt.x)/2,(s.startPt.y+s.endPt.y)/2),S=SuperMap.Plot.PlottingUtil.radian(s.startPt,s.endPt)*this.RTOD;this.createSubSymbol1(c,i,S);var y=new SuperMap.Geometry.Point((P.startPt.x+P.endPt.x)/2,(P.startPt.y+P.endPt.y)/2),h=SuperMap.Plot.PlottingUtil.radian(P.startPt,P.endPt)*this.RTOD;this.createSubSymbol2(y,i,h);for(var g=[],f=[],M=[],d=0;d<=s.startIndex;d++)g.push(l[d]);if(g.push(s.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g),s.endIndex<=P.startIndex){f.push(s.endPt);for(d=s.endIndex+1;d<=P.startIndex;d++)f.push(l[d]);f.push(P.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f)}M.push(P.endPt);for(d=P.endIndex+1;d<l.length;d++)M.push(l[d]);var m=this.getSubSymbolScaleValue()*e*.5,b=o*this.getScaleValues()[0],v=this.getScaleValues()[1]*this.RTOD,O=o*this.getScaleValues()[2],L=SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,b);if(-1!==L.index){var U=L.pt,w=new SuperMap.Geometry.Point(l[L.index].x,l[L.index].y),_=new SuperMap.Geometry.Point(l[L.index+1].x,l[L.index+1].y),T=SuperMap.Plot.PlottingUtil.radian(w,_)*this.RTOD,x=SuperMap.Plot.PlottingUtil.circlePoint(U,O,O,T+v-180);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[U,x]);var E=SuperMap.Plot.PlottingUtil.radian(U,x)*this.RTOD,G=new SuperMap.Geometry.Point(-.2*O,.05*O),V=new SuperMap.Geometry.Point(-.2*O,-.05*O),A=SuperMap.Plot.PlottingUtil.coordinateTrans(x,G,E),C=SuperMap.Plot.PlottingUtil.coordinateTrans(x,V,E),Y={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[x,A,C],Y);for(var I=[],j=(I=I.concat(M))[I.length-1],B=SuperMap.Plot.PlottingUtil.distance(j,I[I.length-1]);B<1.2*m&&(I.pop(),I.length>0);)B=SuperMap.Plot.PlottingUtil.distance(j,I[I.length-1]);I.push(j),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,I),this.addScalePoint(L.pt,0),this.addScalePoint(x,1),this.addScalePoint(c,2),this.addScalePoint(s.startPt,3)}}}},{key:"createSubSymbol1",value:function(t,e,l){var o=this.getSubSymbolPts(e);this.createSubSymbol(t,e,l,o)}},{key:"createSubSymbol2",value:function(t,e,l){var o=this.getSubSymbolPts1(e);this.createSubSymbol(t,e,l,o)}},{key:"createSubSymbol",value:function(t,e,l,o){for(var n=[],i=0;i<o.length;i++){var r=SuperMap.Plot.PlottingUtil.coordinateTrans(t,o[i],l);n.push(r)}this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,n)}},{key:"getLinePts",value:function(t,e,l){for(var o={},n=!1,i=l/2,r=!1,a=!1,p=.02*i;!n;){var u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(e-i,t);if(!u.bfind){r=!0,n=!0;break}var s=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(e+i,t);if(!s.bfind){a=!0,n=!0;break}SuperMap.Plot.PlottingUtil.distance(u.pts,s.pts)>l&&(o.startIndex=u.index,o.startPt=u.pts,o.endIndex=s.index,o.endPt=s.pts,n=!0),i+=p}if(!1===r&&!1===a);else if(!0===r&&!1===a)o.startIndex=0,o.startPt=t[0],(c=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(l,t)).bfind?(o.endIndex=c.index,o.endPt=c.pts):(o.endIndex=t.length-1,o.endPt=t[t.length-1]);else if(!1===r&&!0===a){o.endIndex=t.length-1,o.endPt=t[t.length-1];var P=SuperMap.Plot.PlottingUtil.polylineDistance(t),c=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(P-l,t);c.bfind?(o.startIndex=c.index,o.startPt=c.pts):(o.startIndex=0,o.startPt=t[0])}else o.startIndex=0,o.startPt=t[0],o.endIndex=t.length-1,o.endPt=t[t.length-1];return o}},{key:"getSubSymbolPts",value:function(t){var e=t/2,l=[];return l.push(new SuperMap.Geometry.Point(0,2*e)),l.push(new SuperMap.Geometry.Point(-e,0)),l.push(new SuperMap.Geometry.Point(0,-2*e)),l.push(new SuperMap.Geometry.Point(e,0)),l}},{key:"getSubSymbolPts1",value:function(t){var e=t/2,l=[];return l.push(new SuperMap.Geometry.Point(e,2*e)),l.push(new SuperMap.Geometry.Point(-e,2*e)),l.push(new SuperMap.Geometry.Point(-e,-2*e)),l.push(new SuperMap.Geometry.Point(e,-e)),l}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(0===t){for(var i=-1,r=0,a=new SuperMap.Geometry.Point(0,0),p=0;p<o.length-1;p++){(M=[]).push(o[p]),M.push(o[p+1]);d=SuperMap.Plot.PlottingUtil.projectPoint(e,o[p],o[p+1]);if(-1!==(O=SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(d,M)).index){m=SuperMap.Plot.PlottingUtil.distance(e,d);-1==i?(i=p,a=d,r=m):r>m&&(i=p,a=d,r=m)}}if(-1==i||i>o.length-1)return void this.calculateParts();for(var u=0,p=0;p<i;p++)u+=SuperMap.Plot.PlottingUtil.distance(o[p],o[p+1]);if((u+=SuperMap.Plot.PlottingUtil.distance(o[i],a))<0||u>n)return void this.calculateParts();var s=u/n;this.getScaleValues()[0]=s}else if(1===t){var P=n*this.getScaleValues()[0],c=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,P);if(-1===c.index)return void this.calculateParts();var S=o[c.index],y=o[c.index+1],h=SuperMap.Plot.PlottingUtil.radian(S,y),g=SuperMap.Plot.PlottingUtil.radian(c.pt,e);this.getScaleValues()[1]=g-h;var f=SuperMap.Plot.PlottingUtil.distance(c.pt,e);this.getScaleValues()[2]=f/n}else if(2===t){for(var i=-1,r=0,a=new SuperMap.Geometry.Point(0,0),p=0;p<o.length-1;p++){var M=[];M.push(o[p]),M.push(o[p+1]);var d=SuperMap.Plot.PlottingUtil.projectPoint(e,o[p],o[p+1]);if(-1!==(O=SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(d,M)).index){var m=SuperMap.Plot.PlottingUtil.distance(e,d);-1==i?(i=p,a=d,r=m):r>m&&(i=p,a=d,r=m)}}if(-1!==i&&i<=o.length-1){for(var u=0,p=0;p<i;p++)u+=SuperMap.Plot.PlottingUtil.distance(o[p],o[p+1]);if((u+=SuperMap.Plot.PlottingUtil.distance(o[i],a))>0&&u<n){var b=u/n;this.getScaleValues()[3]=Math.abs(b-this.getScaleValues()[0])}}}else if(3===t){var v=n*(this.getScaleValues()[0]-this.getScaleValues()[3]),O=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,v);if(-1!==O.index){var L=2*SuperMap.Plot.PlottingUtil.distance(O.pt,e)/n;L>=.5&&(L=.5),this.getScaleValues()[4]=L}}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol4020303=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(31)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol4020401",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(Math.PI/2),l.getScaleValues().push(.069485),l.getScaleValues().push(.15),l.getScaleValues().push(.1),l.getScaleValues().push(1.731025),l.getScaleValues().push(2.076877)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);o=SuperMap.Plot.PlottingUtil.clearSamePts(o),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,o),this.getIsEdit()||(this.getScaleValues()[2]=this.getSubSymbolScaleValue());var n=e*this.getScaleValues()[0],i=this.getScaleValues()[1]*this.RTOD,r=e*this.getScaleValues()[2],a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,n);if(-1!==a.index){var p=a.pt,u=a.index,s=new SuperMap.Geometry.Point(p.x,p.y),P=new SuperMap.Geometry.Point(o[u].x,o[u].y),c=new SuperMap.Geometry.Point(o[u+1].x,o[u+1].y),S=SuperMap.Plot.PlottingUtil.radian(P,c)*this.RTOD,y=SuperMap.Plot.PlottingUtil.circlePoint(s,1.5*r,1.5*r,S+i);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[p,y]);var h=SuperMap.Plot.PlottingUtil.radian(s,y)*this.RTOD,g=new SuperMap.Geometry.Point(-.2*r,.05*r),f=new SuperMap.Geometry.Point(-.2*r,-.05*r),M=SuperMap.Plot.PlottingUtil.coordinateTrans(y,g,h),d=SuperMap.Plot.PlottingUtil.coordinateTrans(y,f,h),m={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[y,M,d],m);var b=new SuperMap.Geometry.Point(.6*r,0),v=SuperMap.Plot.PlottingUtil.coordinateTrans(s,b,h),O=.4*r*this.getScaleValues()[5],L=.4*r*this.getScaleValues()[6],U=new SuperMap.Geometry.Point(0,-.9*(O-.25*L)),w=new SuperMap.Geometry.Point(0,.9*(O-.25*L)),_=SuperMap.Plot.PlottingUtil.coordinateTrans(v,U,h),T=SuperMap.Plot.PlottingUtil.coordinateTrans(v,w,h);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[_,T]);var x=new SuperMap.Geometry.Point(0,O),E=SuperMap.Plot.PlottingUtil.coordinateTrans(v,x,h),G=new SuperMap.Geometry.Point(.5*L,-.25*L),V=new SuperMap.Geometry.Point(-.5*L,-.25*L),A=new SuperMap.Geometry.Point(-.5*L,.25*L),C=new SuperMap.Geometry.Point(.25*L,.25*L),Y=new SuperMap.Geometry.Point(.5*L,0),I=SuperMap.Plot.PlottingUtil.coordinateTrans(E,G,h+180),j=SuperMap.Plot.PlottingUtil.coordinateTrans(E,V,h+180),B=SuperMap.Plot.PlottingUtil.coordinateTrans(E,A,h+180),R=SuperMap.Plot.PlottingUtil.coordinateTrans(E,C,h+180),N=SuperMap.Plot.PlottingUtil.coordinateTrans(E,Y,h+180);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[I,j,B,R,I]);var D=new SuperMap.Geometry.Point(0,-O),k=SuperMap.Plot.PlottingUtil.coordinateTrans(v,D,h),z=SuperMap.Plot.PlottingUtil.coordinateTrans(k,G,h+180),F=SuperMap.Plot.PlottingUtil.coordinateTrans(k,V,h+180),K=SuperMap.Plot.PlottingUtil.coordinateTrans(k,A,h+180),W=SuperMap.Plot.PlottingUtil.coordinateTrans(k,C,h+180);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[z,F,K,W,z]),this.addScalePoint(p,0),this.addScalePoint(y,1);var q=new SuperMap.Geometry.Point(0,-O),H=SuperMap.Plot.PlottingUtil.coordinateTrans(v,q,h);this.addScalePoint(H,2),this.addScalePoint(N,3)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol4020401=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(33)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol4020402",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(Math.PI/2),l.getScaleValues().push(.069485),l.getScaleValues().push(.15),l.getScaleValues().push(.1),l.getScaleValues().push(1.731025),l.getScaleValues().push(2.076877)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);o=SuperMap.Plot.PlottingUtil.clearSamePts(o),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,o),this.getIsEdit()||(this.getScaleValues()[2]=this.getSubSymbolScaleValue());var n=e*this.getScaleValues()[0],i=180*this.getScaleValues()[1]/Math.PI,r=e*this.getScaleValues()[2],a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,n);if(-1!==a.index){var p=a.index,u=a.pt,s=new SuperMap.Geometry.Point(o[p].x,o[p].y),P=new SuperMap.Geometry.Point(o[p+1].x,o[p+1].y),c=180*SuperMap.Plot.PlottingUtil.radian(s,P)/Math.PI,S=SuperMap.Plot.PlottingUtil.circlePoint(u,r/2,r/2,c+i),y=SuperMap.Plot.PlottingUtil.circlePoint(u,r,r,c+i+180);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[S,y]);var h=180*SuperMap.Plot.PlottingUtil.radian(u,S)/Math.PI,g=new SuperMap.Geometry.Point(-.2*r,.05*r),f=new SuperMap.Geometry.Point(-.2*r,-.05*r),M=SuperMap.Plot.PlottingUtil.coordinateTrans(S,g,h),d=SuperMap.Plot.PlottingUtil.coordinateTrans(S,f,h),m={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[S,M,d],m);var b=.4*r*this.getScaleValues()[5],v=.4*r*this.getScaleValues()[6],O=new SuperMap.Geometry.Point(0,-.9*(b-.25*v)),L=new SuperMap.Geometry.Point(0,.9*(b-.25*v)),U=SuperMap.Plot.PlottingUtil.coordinateTrans(y,O,h),w=SuperMap.Plot.PlottingUtil.coordinateTrans(y,L,h);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[U,w]);var _=new SuperMap.Geometry.Point(0,-b),T=SuperMap.Plot.PlottingUtil.coordinateTrans(y,_,h),x=new SuperMap.Geometry.Point(.5*v,-.25*v),E=new SuperMap.Geometry.Point(-.25*v,-.25*v),G=new SuperMap.Geometry.Point(-.5*v,.25*v),V=new SuperMap.Geometry.Point(.5*v,.25*v),A=SuperMap.Plot.PlottingUtil.coordinateTrans(T,x,h),C=SuperMap.Plot.PlottingUtil.coordinateTrans(T,E,h),Y=SuperMap.Plot.PlottingUtil.coordinateTrans(T,G,h),I=SuperMap.Plot.PlottingUtil.coordinateTrans(T,V,h);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[A,C,Y,I,A]);var j=new SuperMap.Geometry.Point(0,b),B=SuperMap.Plot.PlottingUtil.coordinateTrans(y,j,h),R=new SuperMap.Geometry.Point(0,.25*v),N=new SuperMap.Geometry.Point(.5*v,0),D=new SuperMap.Geometry.Point(0,-.25*v),k=new SuperMap.Geometry.Point(-.5*v,0),z=SuperMap.Plot.PlottingUtil.coordinateTrans(B,R,h),F=SuperMap.Plot.PlottingUtil.coordinateTrans(B,N,h),K=SuperMap.Plot.PlottingUtil.coordinateTrans(B,D,h),W=SuperMap.Plot.PlottingUtil.coordinateTrans(B,k,h);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[z,F,K,W,z]),this.addScalePoint(u,0);var q=SuperMap.Plot.PlottingUtil.circlePoint(u,r,r,c+i);this.addScalePoint(q,1);var H=new SuperMap.Geometry.Point(0,-b),Z=SuperMap.Plot.PlottingUtil.coordinateTrans(y,H,h);this.addScalePoint(Z,2);var X=new SuperMap.Geometry.Point(-.5*v,0),J=SuperMap.Plot.PlottingUtil.coordinateTrans(B,X,h);this.addScalePoint(J,3)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol4020402=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(39)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(.125),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol4021102=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(3)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol4022100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol4022100=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(3)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol4022101",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(SuperMap.Plot.PlottingUtil.clearSamePts(t),!(t.length<this.minEditPts)){4>this.getScaleValues().length&&(this.getScaleValues().push(.05),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];3>=t.length?e=e.concat(SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t)):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e);var l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),o=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[0]=2*this.getSubSymbolScaleValue());var n=this.getScaleValues()[0],i=(this.getScaleValues()[1],this.getScaleValues()[2]),r=this.getScaleValues()[3],a=o*n,p=new SuperMap.Geometry.Point(l.x+o*i,l.y+o*r);this.getSubSymbols()&&null!==this.getSubSymbols()&&this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],p,a,0);var u=o*this.getScaleValues()[0]*.5,s=new SuperMap.Geometry.Point(p.x+2*u,p.y+u),P=new SuperMap.Geometry.Point(p.x+2*u,p.y-u),c=[];c.push(s),c.push(P),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c),this.addArrow1(c),this.addScalePoint(p);var S=a,y=SuperMap.Plot.PlottingUtil.circlePoint(p,S,S,90);this.addScalePoint(y)}}},{key:"addArrow1",value:function(t){if(0!==t.length){var e=.5,l=SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints)*(e=(this.getIsEdit(),.6*this.getSubSymbolScaleValue())),o=t[t.length-2],n=t[t.length-1],i=l,r=SuperMap.Plot.PlottingUtil.radian(o,n)*this.RTOD,a=SuperMap.Plot.PlottingUtil.circlePoint(n,i,i,r+157.5),p=SuperMap.Plot.PlottingUtil.circlePoint(n,i,i,r+202.5),u={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[a,t[t.length-1],p],u,!0)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol4022101=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(3)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol4022102",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(SuperMap.Plot.PlottingUtil.clearSamePts(t),!(t.length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.05),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];3>=t.length?e=e.concat(SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t)):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e);var l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),o=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[0]=2*this.getSubSymbolScaleValue());var n=this.getScaleValues()[0],i=(this.getScaleValues()[1],this.getScaleValues()[2]),r=this.getScaleValues()[3],a=o*n,p=new SuperMap.Geometry.Point(l.x+o*i,l.y+o*r);this.getSubSymbols()&&null!==this.getSubSymbols()&&this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],p,a,0);var u=o*this.getScaleValues()[0]*.5,s=new SuperMap.Geometry.Point(p.x+2*u,p.y+u),P=new SuperMap.Geometry.Point(p.x+2*u,p.y-u),c=[];c.push(P),c.push(s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c),this.addArrow1(c),this.addScalePoint(p);var S=a,y=SuperMap.Plot.PlottingUtil.circlePoint(p,S,S,90);this.addScalePoint(y)}}},{key:"addArrow1",value:function(t){if(0!==t.length){var e=.5,l=SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints)*(e=(this.getIsEdit(),.6*this.getSubSymbolScaleValue())),o=t[t.length-2],n=t[t.length-1],i=l,r=SuperMap.Plot.PlottingUtil.radian(o,n)*this.RTOD,a=SuperMap.Plot.PlottingUtil.circlePoint(n,i,i,r+157.5),p=SuperMap.Plot.PlottingUtil.circlePoint(n,i,i,r+202.5),u={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[a,t[t.length-1],p],u,!0)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol4022102=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(5)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol40900",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[],l=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(this.clearScalePoints(),t.length<3)e.push(t[0]),e.push(t[1]);else{var o=SuperMap.Plot.PlottingUtil.computeBeizerPoints(this.getIsEdit(),t,this.getScaleValues());this.setScaleValues(o.scaleValues);for(var n=0;n<o.scalePoints.length;n++)this.addScalePoint(o.scalePoints[n]);e=o.beizerPoints}SuperMap.Plot.PlottingUtil.clearSamePts(e);var i=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){this.getScaleValues().push(.5),this.getScaleValues()[1]=this.getSubSymbolScaleValue();G=this.getSubSymbolScaleValue();this.getScaleValues().push(G)}if(!(e.length<=0)){var r;r=2===t.length?0:t.length-1;var a;this.getIsEdit()?a=i*this.getScaleValues()[4*r]:(this.getScaleValues()[4*this.controlPoints.length-4]=.5,a=i*this.getScaleValues()[4*this.controlPoints.length-4]);var p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a,e);if(p.bfind){var u=p.index,s=p.pts;this.getIsEdit()||(this.getScaleValues()[4*this.controlPoints.length-4]=.5,this.getScaleValues()[4*this.controlPoints.length-3]=this.getSubSymbolScaleValue(),a=this.getScaleValues()[4*this.controlPoints.length-4]*i);var P=l*this.getSubSymbolScaleValue()*.8,c=a-P,S=a+P;if((p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(c,e)).bfind){var y,h=p.pts,g=[];if(0==(u=p.index))g.push(e[0]);else for(y=0;y<u;y++)g.push(e[y]);if(g.push(h),(p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(S,e)).bfind){var f=p.pts;u=p.index;var M=[];for(M.push(f),y=u+1;y<e.length;y++)M.push(e[y]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[s,f]);var d=l*this.getScaleValues()[4*r+1]/1.667;if(!(g.length<2)){var m=g[0],b=g[1],v=SuperMap.Plot.PlottingUtil.radian(m,b)*this.RTOD,O=SuperMap.Plot.PlottingUtil.circlePoint(m,d,d,v+90),L=SuperMap.Plot.PlottingUtil.circlePoint(m,d,d,v+270),U=[];if(U.push(O),U.push(L),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U),!(M.length<2)){var w=M[M.length-1],_=M[M.length-2],T=SuperMap.Plot.PlottingUtil.radian(w,_)*this.RTOD,x=SuperMap.Plot.PlottingUtil.circlePoint(w,d,d,T+90),E=SuperMap.Plot.PlottingUtil.circlePoint(w,d,d,T+270);if((U=[]).push(x),U.push(E),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U),!this.getIsEdit()){this.getScaleValues().push(.5);var G=1.667*d/l;this.getScaleValues().push(G)}this.addScalePoint(s),this.addScalePoint(O)}}}}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol40900=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol41100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=99999,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(.05),l.getScaleValues().push(-2.5)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){if(3>this.getScaleValues().length&&(this.getScaleValues().push(.05),this.getScaleValues().push(.05),this.getScaleValues().push(-2.5)),!this.getIsEdit()||3==this.getScaleValues().length){for(p=0;p<t.length;p++)this.getScaleValues().push(0);var e=this.getSubSymbolScaleValue();this.getScaleValues().push(.8*e),this.getScaleValues().push(e),this.getScaleValues().push(-1.5)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var l,o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=this.getScaleValues().length,i=o*this.getScaleValues()[n-3],r=this.getScaleValues()[0];if(0==r)l=(G=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,t[1],t[0])).pntRight;else if(1==r)l=(G=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,t[1],t[0])).pntLeft;else{if(2!=r)return;l=t[0]}var a=[];if(a.push(t[0]),a.push(l),this.addScalePoint(l),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a),t.length>this.minEditPts){for(var p=1;p<t.length-1;p++){var u,s=this.getScaleValues()[p];if(0==s){for(var P=t[p],c=t[p+1],S=t[p-1],y=180*SuperMap.Plot.PlottingUtil.radian(P,c)/Math.PI,h=(M=180*SuperMap.Plot.PlottingUtil.radian(P,S)/Math.PI)-y;h<0;)h+=360;var g=h/2,f=t[p+1].clone();this._rotate(g,f,P),u=SuperMap.Plot.PlottingUtil.linePnt(P,f,i)}else if(1==s){for(var P=t[p],c=t[p+1],S=t[p-1],y=180*SuperMap.Plot.PlottingUtil.radian(P,c)/Math.PI,M=180*SuperMap.Plot.PlottingUtil.radian(P,S)/Math.PI,h=M-y;h<0;)h+=360;var g=180-h/2,f=t[p-1].clone();this._rotate(g,f,P),u=SuperMap.Plot.PlottingUtil.linePnt(P,f,i)}else{if(2!=s)continue;u=t[p]}(j=[]).push(t[p]),j.push(u),this.addScalePoint(u),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,j)}var d=t.length,m=this.getScaleValues()[d-1];if(0==m)b=(C=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,t[d-2],t[d-1])).pntLeft,v=(L=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*i,t[d-2],t[d-1])).pntLeft;else if(1==m)b=(C=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,t[d-2],t[d-1])).pntRight,v=(L=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*i,t[d-2],t[d-1])).pntRight;else{if(2!=m)return;b=t[d-1].clone(),v=t[d-1].clone()}(j=[]).push(t[d-1]),j.push(b),this.addScalePoint(b),this.addScalePoint(v),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,j)}else{var b,v,O=this.getScaleValues()[1];if(0==O)b=(C=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,t[0],t[1])).pntLeft,v=(L=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*i,t[0],t[1])).pntLeft;else if(1==O){b=(C=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,t[0],t[1])).pntRight;var L=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*i,t[0],t[1]);v=L.pntRight}else{if(2!=O)return;b=t[1].clone(),v=t[1].clone()}(j=[]).push(t[1]),j.push(b),this.addScalePoint(b),this.addScalePoint(v),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,j)}var U,w=this.getScaleValues().length,_=this.getScaleValues()[w-2],T=Math.abs(o*_),x=this.getScaleValues()[w-1],E=Math.abs(i*x),G=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,T);if(-1!==G.index){var V=G.index,A=G.pt;if(x>=0)U=(C=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(E,t[V],A)).pntRight;else{var C=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(E,t[V],A);U=C.pntLeft}var Y=SuperMap.Plot.PlottingUtil.linePnt(A,U,E),I=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,A,Y).pntRight,j=[];j.push(A),j.push(Y),j.push(I),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,j),this.addScalePoint(Y)}}}},{key:"_rotate",value:function(t,e,l){t*=Math.PI/180;var o=SuperMap.Plot.PlottingUtil.distance(e,l),n=t+Math.atan2(e.y-l.y,e.x-l.x);return e.x=l.x+o*Math.cos(n),e.y=l.y+o*Math.sin(n),e}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=l.length,i=e;if(t>=0&&t<n){var r=!1;if(0==t)r=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t],l[t+1],i);else if(t==n-1)r=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t-1],l[t],i);else{var a=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t-1],l[t],l[t+1]),p=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t-1],l[t],i);if(a!=p)r=p;else{var u=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t],l[t+1],i);r=u==p?p:u}}this.getScaleValues()[t]=r?1:0}else if(t==n){var s=SuperMap.Plot.PlottingUtil.distance(l[n-1],i),P=(s/=2)/o;this.getScaleValues()[t]=P}else if(t===n+1||t===n+2){for(var c=-1,S=0,y=new SuperMap.Geometry.Point(0,0),h=0;h<l.length-1;h++){var g=[];g.push(l[h]),g.push(l[h+1]);var f=SuperMap.Plot.PlottingUtil.projectPoint(i,l[h],l[h+1]);if(-1!==SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(f,g).index){var M=SuperMap.Plot.PlottingUtil.distance(i,f);-1===c?(c=h,y=f,S=M):S>M&&(c=h,y=f,S=M)}}-1===c&&Math.ceil(e.x,1)<=Math.ceil(l[0].x,1)?(c=0,y=l[0]):-1===c&&c===l[l.length-2]&&(c=0,y=l[0]),-1===c&&Math.ceil(e.x,1)>=Math.ceil(l[l.length-1].x,1)?(c=l.length-1,y=l[l.length-1]):-1!==c&&c!==l.length-1||(c=l.length-1,y=l[l.length-1]);for(var d=0,h=0;h<c;h++){var m=l[h],b=l[h+1];d+=SuperMap.Plot.PlottingUtil.distance(m,b)}var v=(d+=SuperMap.Plot.PlottingUtil.distance(l[c],y))/o;this.getScaleValues()[n+1]=v;var O,L=this.getScaleValues().length,s=o*this.getScaleValues()[L-3];O=(void 0===l[c+1]?SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[c-1],l[c],i):SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[c],l[c+1],i))?S/s:-Math.abs(S/s),this.getScaleValues()[n+2]=O}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol41100=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol41200",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=0,l.getScaleValues()[1]=0,l.getScaleValues()[2]=.1),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues()[0]=0,this.getScaleValues()[1]=0,this.getScaleValues()[2]=.1);var e=SuperMap.Plot.PlottingUtil.getOutRectangleDis(t);if(!this.getIsEdit()){var l=this.getSubSymbolScaleValue()*SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints);this.getScaleValues()[2]=l/e}var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2];2==t.length?this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t):this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t,{fill:!1});var r=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),a=new SuperMap.Geometry.Point(r.x+o*e,r.y+n*e),p=i*e,u=new SuperMap.Geometry.Point(a.x,a.y),s=new SuperMap.Geometry.Point(a.x-p,a.y-p),P=new SuperMap.Geometry.Point(a.x+p,a.y-p),c=new SuperMap.Geometry.Point(a.x-p,a.y+p),S=new SuperMap.Geometry.Point(a.x+p,a.y+p),y=[];y.push(u),y.push(s),y.push(P),y.push(u),y.push(c),y.push(S),y.push(u),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y,{lineTypeLimit:!0,surroundLineLimit:!0}),this.clearScalePoints(),this.addScalePoint(a);var h=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,90);this.addScalePoint(h)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.getOutRectangleDis(l);if(0==o)return;var n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l),i=e;if(0==t){r=(i.x-n.x)/o;this.getScaleValues()[0]=r;a=(i.y-n.y)/o;this.getScaleValues()[1]=a}else if(1==t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(n.x+r*o,n.y+a*o),u=SuperMap.Plot.PlottingUtil.distance(i,p)/o;this.getScaleValues()[2]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol41200=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol41201",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=0,l.getScaleValues()[1]=0,l.getScaleValues()[2]=.1),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<3&&(this.getScaleValues()[0]=0,this.getScaleValues()[1]=0,this.getScaleValues()[2]=.1);var e=SuperMap.Plot.PlottingUtil.getOutRectangleDis(t);if(0!=e){if(!this.getIsEdit()){var l=this.getSubSymbolScaleValue()*SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints);this.getScaleValues()[2]=l/e}var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2];2==t.length?this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t):this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t,{fill:!1});var r=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),a=new SuperMap.Geometry.Point(r.x+o*e,r.y+n*e),p=i*e,u=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,90),s=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,210),P=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,330),c=[];c.push(u),c.push(s),c.push(P),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,c,{fill:!1,lineTypeLimit:!0,surroundLineLimit:!0}),this.clearScalePoints(),this.addScalePoint(a);var S=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,90);this.addScalePoint(S)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.getOutRectangleDis(l);if(0==o)return;var n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l),i=e;if(0==t){r=(i.x-n.x)/o;this.getScaleValues()[0]=r;a=(i.y-n.y)/o;this.getScaleValues()[1]=a}else if(1==t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(n.x+r*o,n.y+a*o),u=SuperMap.Plot.PlottingUtil.distance(i,p)/o;this.getScaleValues()[2]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol41201=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol41202",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=0,l.getScaleValues()[1]=0,l.getScaleValues()[2]=.1),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<3&&(this.getScaleValues()[0]=0,this.getScaleValues()[1]=0,this.getScaleValues()[2]=.1);var e=SuperMap.Plot.PlottingUtil.getOutRectangleDis(t);if(0!=e){if(!this.getIsEdit()){var l=this.getSubSymbolScaleValue()*SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints);this.getScaleValues()[2]=l/e}var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2];2==t.length?this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t):this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t,{fill:!1});var r=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),a=new SuperMap.Geometry.Point(r.x+o*e,r.y+n*e),p=i*e,u=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,270),s=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,30),P=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,150),c=[];c.push(u),c.push(s),c.push(P),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,c,{fill:!1,lineTypeLimit:!0,surroundLineLimit:!0}),this.clearScalePoints(),this.addScalePoint(a);var S=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,90);this.addScalePoint(S)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.getOutRectangleDis(l);if(0==o)return;var n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l),i=e;if(0==t){r=(i.x-n.x)/o;this.getScaleValues()[0]=r;a=(i.y-n.y)/o;this.getScaleValues()[1]=a}else if(1==t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(n.x+r*o,n.y+a*o),u=SuperMap.Plot.PlottingUtil.distance(i,p)/o;this.getScaleValues()[2]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol41202=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol42200",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(.1),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(0>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e);if(!this.getIsEdit()){var n=this.getDefaultSubSymbolSize()/l;(n>.3||n<=0)&&(n=.3),this.getScaleValues()[0]=n}var i=this.getScaleValues()[0],r=(this.getScaleValues()[1],l*this.getScaleValues()[2]),a=l*this.getScaleValues()[3],p=new SuperMap.Geometry.Point(o.x+r,o.y+a),u=l*i;this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],p,u,0),this.clearScalePoints(),this.addScalePoint(new SuperMap.Geometry.Point(o.x+r+u,o.y+a)),this.addScalePoint(new SuperMap.Geometry.Point(o.x+r,o.y+a))}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=[];if(3>=this.controlPoints.length?o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),0>(o=SuperMap.Plot.PlottingUtil.clearSamePts(o)).length)return;var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);if(0==t){var r=n*this.getScaleValues()[2],a=n*this.getScaleValues()[3],p=new SuperMap.Geometry.Point(i.x+r,i.y+a),u=SuperMap.Plot.PlottingUtil.distance(e,p)/n;this.getScaleValues()[0]=u}else if(1==t){var s=(e.x-i.x)/n,P=(e.y-i.y)/n;this.getScaleValues()[2]=s,this.getScaleValues()[3]=P}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol42200=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol42400",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),l.getStyle()&&!l.getIsEdit()&&(l.getStyle().color="#006600"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(.05),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getKendyShapePts(t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(0>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e);if(!this.getIsEdit()){var n=this.getDefaultSubSymbolSize()/l;(n>.3||n<=0)&&(n=.3),this.getScaleValues()[0]=n}var i=this.getScaleValues()[0],r=(this.getScaleValues()[1],l*i),a=l*this.getScaleValues()[2],p=l*this.getScaleValues()[3],u=[];u.push(new SuperMap.Geometry.Point(o.x+a,o.y+p)),u.push(new SuperMap.Geometry.Point(o.x+a+r,o.y+p)),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,u,{fill:!1}),this.clearScalePoints(),this.addScalePoint(new SuperMap.Geometry.Point(o.x+a+r,o.y+p)),this.addScalePoint(new SuperMap.Geometry.Point(o.x+a,o.y+p))}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=[];if(3>=this.controlPoints.length?o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),0>(o=SuperMap.Plot.PlottingUtil.clearSamePts(o)).length)return;var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);if(0==t){var r=n*this.getScaleValues()[2],a=n*this.getScaleValues()[3],p=new SuperMap.Geometry.Point(i.x+r,i.y+a),u=SuperMap.Plot.PlottingUtil.distance(e,p)/n;this.getScaleValues()[0]=u}else if(1==t){var s=(e.x-i.x)/n,P=(e.y-i.y)/n;this.getScaleValues()[2]=s,this.getScaleValues()[3]=P}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol42400=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol42500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.285714),l.getScaleValues().push(.285714),l.getScaleValues().push(.5),l.getScaleValues().push(.333333),l.getScaleValues().push(.333333)),l.getStyle()&&!l.getIsEdit()&&(l.getStyle().color="#00ff00"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(.285714),this.getScaleValues().push(.285714),this.getScaleValues().push(.5),this.getScaleValues().push(.333333));var e=t[0].clone(),l=t[1].clone(),o=SuperMap.Plot.PlottingUtil.distance(e,l),n=this.getScaleValues()[0],i=new SuperMap.Geometry.Point(0,-o*n),r=new SuperMap.Geometry.Point(0,o*n),a=this.getScaleValues()[1],p=this.getScaleValues()[3],u=new SuperMap.Geometry.Point(o*(1-p),-o*a),s=new SuperMap.Geometry.Point(o*(1-p),o*a),P=this.getScaleValues()[2],c=this.getScaleValues()[4],S=new SuperMap.Geometry.Point(o*(1-c),-o*P),y=new SuperMap.Geometry.Point(o*(1-c),o*P),h=new SuperMap.Geometry.Point(o,0),g=SuperMap.Plot.PlottingUtil.radian(e,l)*this.RTOD,f=[];f.push(r),f.push(s),f.push(y),f.push(h),f.push(S),f.push(u),f.push(i);for(var M=[],d=0;d<f.length;d++){var m=SuperMap.Plot.PlottingUtil.coordinateTrans(e,f[d],g);M.push(m)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M);var b=!0;e.x>l.x&&(b=!1);var v,O,L,U,w=(L=.1*o)+(O=.12*o/2);1==b?(v=(U=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(w,l,e)).pntRight,U.pntLeft):(v=(U=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(w,l,e)).pntLeft,U.pntRight);var _=[];_.push(v),_.push(new SuperMap.Geometry.Point(v.x+O,v.y)),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,_);var T,x,E,G;1==b?(T=(U=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.85*L,l,e)).pntRight,G=U.pntLeft,x=(U=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(L,T,G)).pntRight,E=U.pntLeft):(T=(U=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.85*L,l,e)).pntLeft,G=U.pntRight,x=(U=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(L,T,G)).pntLeft,E=U.pntRight),(_=[]).push(T),_.push(x),_.push(E),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,_,{fillLimit:!0,fillStyle:0});var V,A,C,Y;U=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*O,x,E),Y=1==b?U.pntRight:U.pntLeft,U=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*O,E,x),A=1==b?U.pntLeft:U.pntRight;var I=SuperMap.Plot.PlottingUtil.intersectLines(T,A,E,x);I.isIntersectLines&&(V=I.intersectPoint,(I=SuperMap.Plot.PlottingUtil.intersectLines(T,Y,E,x)).isIntersectLines&&(C=I.intersectPoint,(_=[]).push(V),_.push(A),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,_),(_=[]).push(C),_.push(Y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,_),this.clearScalePoints(),this.addScalePoint(M[0]),this.addScalePoint(M[1]),this.addScalePoint(M[2])))}}},{key:"modifyPoint",value:function(t,e){if(e.isScalePoint&&(t>=0||t<3)){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]),n=l[0].clone(),i=l[1].clone(),r=e.clone();if(0==t){var a=SuperMap.Plot.PlottingUtil.distance(r,n)/o;this.getScaleValues()[0]=a}else if(1==t){var p=SuperMap.Plot.PlottingUtil.projectPoint(r,n,i),u=(P=SuperMap.Plot.PlottingUtil.distance(p,r))/o;this.getScaleValues()[1]=u;var s=(S=SuperMap.Plot.PlottingUtil.distance(p,i))/o;this.getScaleValues()[3]=s}else if(2==t){var p=SuperMap.Plot.PlottingUtil.projectPoint(r,n,i),P=SuperMap.Plot.PlottingUtil.distance(p,r),c=P/o;this.getScaleValues()[2]=c;var S=SuperMap.Plot.PlottingUtil.distance(p,i),y=S/o;this.getScaleValues()[4]=y}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol42500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol42700",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.04),l.getStyle()&&!l.getIsEdit()&&(l.getStyle().color="#00ff00"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){2==t.length?this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t):this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t,{fill:!1});var e,l,o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),n=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue()),l=n*this.getScaleValues()[0];var i=n*this.getScaleValues()[0],r=i+l;e=new SuperMap.Geometry.Point(o.x,o.y+r);var a=[];a.push(e),a.push(new SuperMap.Geometry.Point(e.x+l,e.y)),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,a);var p=new SuperMap.Geometry.Point(o.x,o.y+.8*i),u=new SuperMap.Geometry.Point(o.x-i,o.y-i),s=new SuperMap.Geometry.Point(o.x+i,o.y-i);(a=[]).push(p),a.push(u),a.push(s),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,a,{fillLimit:!0,fillStyle:0});var P=new SuperMap.Geometry.Point(o.x-.5*i,o.y-i),c=new SuperMap.Geometry.Point(u.x,u.y-2*l),S=new SuperMap.Geometry.Point(o.x+.5*i,o.y-i),y=new SuperMap.Geometry.Point(s.x,s.y-2*l);(a=[]).push(P),a.push(c),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a),(a=[]).push(S),a.push(y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol42700=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol43500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,l.getScaleValues().length,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e,l=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]),o=[];for(e=15;e<=75;e+=5)o.push(SuperMap.Plot.PlottingUtil.circlePoint(t[0],l,l,e));for(this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,o),o=[],e=105;e<=165;e+=5)o.push(SuperMap.Plot.PlottingUtil.circlePoint(t[0],l,l,e));for(this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,o),o=[],e=195;e<=255;e+=5)o.push(SuperMap.Plot.PlottingUtil.circlePoint(t[0],l,l,e));for(this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,o),o=[],e=285;e<=345;e+=5)o.push(SuperMap.Plot.PlottingUtil.circlePoint(t[0],l,l,e));this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,o);var n,i,r,a=.2*l,p=new SuperMap.Geometry.Point(t[0].x-a,t[0].y),u=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(a,t[0],p);n=u.pntRight,i=u.pntLeft,(u=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*a,n,i)).pntRight,r=u.pntLeft;var s,P,c=new SuperMap.Geometry.Point(n.x+2*a,n.y);s=(u=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(a,n,c)).pntRight,P=u.pntLeft,(o=[]).push(r),o.push(i),o.push(n),o.push(P),o.push(s),o.push(n),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,o,{fillLimit:!0,lineTypeLimit:!0,surroundLineLimit:!0})}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol43500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol44100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.285714),l.getScaleValues().push(.105263),l.getScaleValues().push(.181818),l.getScaleValues().push(.285714),l.getScaleValues().push(.285714)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<5&&(this.getScaleValues().push(.285714),this.getScaleValues().push(.105263),this.getScaleValues().push(.181818),this.getScaleValues().push(.285714),this.getScaleValues().push(.285714));var e=t[0],l=t[1],o=SuperMap.Plot.PlottingUtil.distance(e,l),n=this.getScaleValues()[0],i=new SuperMap.Geometry.Point(0,-o*n),r=new SuperMap.Geometry.Point(0,o*n),a=this.getScaleValues()[1],p=this.getScaleValues()[3],u=new SuperMap.Geometry.Point(o*(1-p),-o*a),s=new SuperMap.Geometry.Point(o*(1-p),o*a),P=this.getScaleValues()[2],c=this.getScaleValues()[4],S=new SuperMap.Geometry.Point(o*(1-c),-o*P),y=new SuperMap.Geometry.Point(o*(1-c),o*P),h=new SuperMap.Geometry.Point(o,0),g=SuperMap.Plot.PlottingUtil.radian(e,l)*this.RTOD,f=[];f.push(r),f.push(u),f.push(S),f.push(h),f.push(y),f.push(s),f.push(i);for(var M=[],d=0;d<f.length;d++){var m=SuperMap.Plot.PlottingUtil.coordinateTrans(e,f[d],g);M.push(m)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M);var b=[],v=.06*o,O=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(v,l,e),L=O.pntRight,U=O.pntLeft;b.push(L),b.push(U),v=.15*o;var w=new SuperMap.Geometry.Point(v,0),_=SuperMap.Plot.PlottingUtil.coordinateTrans(e,w,g);b.push(_),b.push(L),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,b,{lineColorLimit:!0,color:"#0000FF",strokeOpacity:1,fillLimit:!0,fillStyle:0,fillColor:"#0000FF"}),this.clearScalePoints(),this.addScalePoint(M[0]),this.addScalePoint(M[1]),this.addScalePoint(M[2])}}},{key:"modifyPoint",value:function(t,e){if(e.isScalePoint&&(t>=0||t<3)){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]),n=l[0].clone(),i=l[1].clone(),r=e.clone();if(0==t){var a=SuperMap.Plot.PlottingUtil.distance(r,n)/o;this.getScaleValues()[0]=a}else if(1==t){var p=SuperMap.Plot.PlottingUtil.projectPoint(r,n,i),u=(P=SuperMap.Plot.PlottingUtil.distance(p,r))/o;this.getScaleValues()[1]=u;var s=(S=SuperMap.Plot.PlottingUtil.distance(p,i))/o;this.getScaleValues()[3]=s}else if(2==t){var p=SuperMap.Plot.PlottingUtil.projectPoint(r,n,i),P=SuperMap.Plot.PlottingUtil.distance(p,r),c=P/o;this.getScaleValues()[2]=c;var S=SuperMap.Plot.PlottingUtil.distance(p,i),y=S/o;this.getScaleValues()[4]=y}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol44100=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol44200",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=255,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(.05),l.getScaleValues().push(90)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=this.GetGoPts();if(!(t.length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.5),this.getScaleValues().push(.05),this.getScaleValues().push(90));var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[1]=o}var n=this.getScaleValues()[0],i=this.getScaleValues()[1],r=this.getScaleValues()[2],a=l*n,p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a,e);if(p.bfind){var u=p.index,s=p.pts,P=s,c=i*l,S=new SuperMap.Geometry.Point(c,-.5*c),y=new SuperMap.Geometry.Point(c,.5*c),h=new SuperMap.Geometry.Point(-c,.5*c),g=new SuperMap.Geometry.Point(-c,-.5*c),f=SuperMap.Plot.PlottingUtil.coordinateTrans(P,S,r),M=SuperMap.Plot.PlottingUtil.coordinateTrans(P,y,r),d=SuperMap.Plot.PlottingUtil.coordinateTrans(P,h,r),m=SuperMap.Plot.PlottingUtil.coordinateTrans(P,g,r),b=[];b.push(f),b.push(M),b.push(d),b.push(m),b.push(f),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,b);var v=new SuperMap.Geometry.Point(.5*c,-.3*c),O=new SuperMap.Geometry.Point(.65*c,.3*c),L=new SuperMap.Geometry.Point(.35*c,.3*c),U=SuperMap.Plot.PlottingUtil.coordinateTrans(P,v,r),w=SuperMap.Plot.PlottingUtil.coordinateTrans(P,L,r),_=SuperMap.Plot.PlottingUtil.coordinateTrans(P,O,r),T=[];T.push(U),T.push(w),T.push(_),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,T,{lineColorLimit:!0,strokeColor:"#0000FF",strokeOpacity:1,fillLimit:!0,fillStyle:0,fillColor:"#0000FF",color:"#0000FF"});var x=new SuperMap.Geometry.Point(c,0),E=new SuperMap.Geometry.Point(2*c,0),G=SuperMap.Plot.PlottingUtil.coordinateTrans(P,x,r),V=SuperMap.Plot.PlottingUtil.coordinateTrans(P,E,r);(T=[]).push(G),T.push(V),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,T);var A=new SuperMap.Geometry.Point(2*c,.15*c),C=new SuperMap.Geometry.Point(2*c,-.15*c),Y=new SuperMap.Geometry.Point(2.6*c,0),I=SuperMap.Plot.PlottingUtil.coordinateTrans(P,A,r),j=SuperMap.Plot.PlottingUtil.coordinateTrans(P,C,r),B=SuperMap.Plot.PlottingUtil.coordinateTrans(P,Y,r);(T=[]).push(I),T.push(j),T.push(B),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,T,{fillLimit:!0,fillStyle:0});var R,N=[],D=[];for(R=0;R<=u;R++)N.push(e[R]);for(N.push(P),D.push(P),R=u+1;R<e.length;R++)D.push(e[R]);var k=1.2*c;if(a>k){var z=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a-k,N);if(z.bfind){var F=z.pts,K=z.index;for(T=[],R=0;R<=K;R++)T.push(N[R]);T.push(F),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,T)}}if(l-a>k){var W=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(k,D);if(W.bfind){var q=W.pts,H=W.index;for((T=[]).push(q),R=H+1;R<D.length;R++)T.push(D[R]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,T)}}this.clearScalePoints(),this.addScalePoint(s),this.addScalePoint(V)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(0==t){for(var i=e,r=-1,a=0,p=(new SuperMap.Geometry.Point(0,0),0);p<o.length-1;p++){var u=[];u.push(o[p]),u.push(o[p+1]);var s=SuperMap.Plot.PlottingUtil.projectPoint(i,o[p],o[p+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(s,u).isOnPolyLine){var P=SuperMap.Plot.PlottingUtil.distance(i,s);-1==r?(r=p,s,a=P):a>P&&(r=p,s,a=P)}}if(-1==r)return SuperMap.Plot.PlottingUtil.distance(i,o[0])>SuperMap.Plot.PlottingUtil.distance(i,o[o.length-1])?(r=o.length-1,this.calculateParts()):(r=0,this.calculateParts());S=0;if(0===r)S=SuperMap.Plot.PlottingUtil.distance(o[0],s);else for(p=0;p<r;p++)S+=SuperMap.Plot.PlottingUtil.distance(o[p],o[p+1]);if(S<0||S>n)return;var c=S/n;this.getScaleValues()[0]=c}else if(1==t){var S=this.getScaleValues()[0]*n,y=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(S,o);if(!y.bfind)return;var h=y.pts;(c=.5*SuperMap.Plot.PlottingUtil.distance(h,e)/n)>.3&&(c=.3),this.getScaleValues()[1]=c;var g=SuperMap.Plot.PlottingUtil.radian(h,e)*this.RTOD;this.getScaleValues()[2]=g}}this.calculateParts()}},{key:"GetGoPts",value:function(){var t=[];return this.controlPoints.length<this.minEditPts?t:(t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),1==(t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length&&(t=[]),t)}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol44200=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol44300",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,0===l.getScaleValues().length&&(l.getScaleValues().push(.08),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.08),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t),e=SuperMap.Plot.PlottingUtil.clearSamePts(e)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t);this.getIsEdit()||(this.getScaleValues()[0]=this.getDefaultSubSymbolSize()/l,(this.getScaleValues()[0]>.3||this.getScaleValues()[0]<=0)&&(this.getScaleValues()[0]=.3));this.getScaleValues()[0],this.getScaleValues()[1];var n=this.getScaleValues()[2],i=this.getScaleValues()[3];o.x=o.x+n*l,o.y=o.y+i*l;var r=l*this.getScaleValues()[0],a=SuperMap.Plot.PlottingUtil.circlePoint(o,r,r,90),p=SuperMap.Plot.PlottingUtil.circlePoint(o,r,r,210),u=SuperMap.Plot.PlottingUtil.circlePoint(o,r,r,330),s=[];s.push(a),s.push(p),s.push(u),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,s,{lineTypeLimit:!0,lineColorLimit:!0,strokeColor:"#0000FF",strokeOpacity:1,surroundLineLimit:!0,fillLimit:!0,fillStyle:0,fillColor:"#0000FF",color:"#0000FF"}),this.clearScalePoints(),this.addScalePoint(a),this.addScalePoint(o)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=[];if(3>=this.controlPoints.length?o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),0>(o=SuperMap.Plot.PlottingUtil.clearSamePts(o)).length)return;var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l);if(0==t){var r=n*this.getScaleValues()[2],a=n*this.getScaleValues()[3],p=new SuperMap.Geometry.Point(i.x+r,i.y+a),u=SuperMap.Plot.PlottingUtil.distance(e,p)/n;this.getScaleValues()[0]=u}else if(1==t){var s=(e.x-i.x)/n,P=(e.y-i.y)/n;this.getScaleValues()[2]=s,this.getScaleValues()[3]=P}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol44300=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol44400",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues()[0]=0,l.getScaleValues()[1]=0,l.getScaleValues()[2]=.1),null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents(),2===this.controlPoints.length&&this.calAssistantLine();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues()[0]=0,this.getScaleValues()[1]=0,this.getScaleValues()[2]=.1),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t,{fill:!1});var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=e*this.getScaleValues()[2],r=new SuperMap.Geometry.Point(l.x+e*o,l.y+e*n),a=new SuperMap.Geometry.Point(r.x+1,r.y),p=[];t.push(t[0].clone());for(var u=0;u<t.length-1;u++){var s=SuperMap.Plot.PlottingUtil.intersectLines(r,a,t[u],t[u+1]);s.isIntersectLines&&(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(s.intersectPoint,t[u],t[u+1])&&p.push(s.intersectPoint))}if(!(0>=p.length)){var P=p[0].clone(),c=p[0].clone();for(u=0;u<p.length;u++)P.x>p[u].x&&(P=p[u].clone()),c.x<p[u].x&&(c=p[u].clone());var S=[],y=new SuperMap.Geometry.Point(r.x-i/2,P.y);y.x<=c.x&&y.x>=P.x&&((S=[]).push(P),S.push(y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S));var h=new SuperMap.Geometry.Point(r.x+i/2,c.y);h.x<=c.x&&h.x>=P.x&&((S=[]).push(c),S.push(h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S)),this.clearScalePoints();var g=SuperMap.Plot.PlottingUtil.circlePoint(r,i/2,i/2,90);if(!SuperMap.Plot.PlottingUtil.ptIsInPolygon(t,r))return this.addScalePoint(r,0),this.addScalePoint(g,1),void(r.x<P.x?this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[P,r]):this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[c,r]));this.addScalePoint(r,0),this.addScalePoint(g,1)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;if(0===SuperMap.Plot.PlottingUtil.getOutRectangleDis(l))return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l),i=e;if(0==t){r=(i.x-n.x)/o;this.getScaleValues()[0]=r;a=(i.y-n.y)/o;this.getScaleValues()[1]=a}if(1==t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(n.x+r*o,n.y+a*o),u=2*SuperMap.Plot.PlottingUtil.distance(i,p)/o;this.getScaleValues()[2]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol44400=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(14)),p=function(t){function e(){var t,l,i,r;o(this,e);for(var a=arguments.length,p=Array(a),u=0;u<a;u++)p[u]=arguments[u];return l=i=n(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(p))),i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol6020401",r=l,n(i,r)}return i(e,a["default"]),r(e,[{key:"getSubSymbolPts",value:function(t){var e=[],l=[];l.push(new SuperMap.Geometry.Point(-t/2,0)),l.push(new SuperMap.Geometry.Point(t/2,0)),e.push(l);var o=[];return o.push(new SuperMap.Geometry.Point(0,-t/2)),o.push(new SuperMap.Geometry.Point(0,t/2)),e.push(o),e}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol6020401=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(14)),p=function(t){function e(){var t,l,i,r;o(this,e);for(var a=arguments.length,p=Array(a),u=0;u<a;u++)p[u]=arguments[u];return l=i=n(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(p))),i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol6020402",r=l,n(i,r)}return i(e,a["default"]),r(e,[{key:"getSubSymbolPts",value:function(t){var e=[],l=[];l.push(new SuperMap.Geometry.Point(-t/2,0)),l.push(new SuperMap.Geometry.Point(t/2,0)),e.push(l);var o=[];return o.push(new SuperMap.Geometry.Point(0,0)),o.push(new SuperMap.Geometry.Point(0,t/2)),e.push(o),e}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol6020402=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol6020403",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues()[0]=1.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&this.getScaleValues().push(1.05);var e=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]);2===t.length&&t.splice(1,0,new SuperMap.Geometry.Point(t[0].x+e,t[0].y));var l=new SuperMap.Geometry.Point(t[0].x,t[0].y),o=new SuperMap.Geometry.Point(t[1].x,t[1].y),n=new SuperMap.Geometry.Point(t[2].x,t[2].y),i=SuperMap.Plot.PlottingUtil.distance(l,o),r=i*this.getScaleValues()[0],a=180*SuperMap.Plot.PlottingUtil.radian(l,o)/Math.PI%360,p=180*SuperMap.Plot.PlottingUtil.radian(l,n)/Math.PI%360;a>p&&(p+=360);var u=(p-a)/50,s=this.getArcPts(t[0],i,a,p,u),P=this.getArcPts(t[0],r,a,p,u);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P,{surroundLineFlag:!1,lineColorLimit:!0,strokeColor:"#0000FF",strokeOpacity:1,surroundLineLimit:!0,color:"#0000FF"}),3===this.controlPoints.length&&(this.controlPoints[2]=SuperMap.Plot.PlottingUtil.circlePoint(t[0],e,e,p)),this.addScalePoint(new SuperMap.Geometry.Point(P[P.length-1].x,P[P.length-1].y),0)}}},{key:"getArcPts",value:function(t,e,l,o,n){void 0!==n&&null!==n||(n=1);for(var i=[],r=l;r<o;r+=n){var a=SuperMap.Plot.PlottingUtil.circlePoint(t,e,e,r);i.push(a)}var p=SuperMap.Plot.PlottingUtil.circlePoint(t,e,e,o);return i.push(p),i}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]),n=SuperMap.Plot.PlottingUtil.distance(l[0],e)/o;n>=1.01&&(this.getScaleValues()[0]=n)}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol6020403=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol6020404",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=255,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.1),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){if(!this.getIsEdit()){var e=.3*this.getSubSymbolScaleValue();e>.05&&(e=.05),this.getScaleValues()[0]=e}for(var l=SuperMap.Plot.PlottingUtil.polylineDistance(t),o=Math.abs(l*this.getScaleValues()[0]),n=this.getDashLinePts(t,o),i={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0},r=1,a=0;a<n.length;a++){var p=n[a];if(0==r%2)if(2===p.length&&a!==n.length-1){var u=new SuperMap.Geometry.Point((p[0].x+p[1].x)/2,(p[0].y+p[1].y)/2),s=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*o,p[0],u),P=null;P=this.getScaleValues()[0]>0?s.pntLeft:s.pntRight,this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[P,p[0],p[1]],i)}else r--;n[a].length>1&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),r++}var c=180*SuperMap.Plot.PlottingUtil.radian(t[0],t[1])/Math.PI;this.getScaleValues()[0]>0?c+=90:c-=90;var S=SuperMap.Plot.PlottingUtil.circlePoint(t[0],2*o,2*o,c);this.addScalePoint(S)}}},{key:"getDashLinePts",value:function(t,e){var l=[],o=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(e>o)return l;for(var n=SuperMap.Plot.PlottingUtil.clonePoints(t),i=2*parseInt(o/(1.5*e)),r=0;r<i;r++){var a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(n,e);if(-1!==a.index){if(0==r%2){for(var p=[],u=0;u<a.index+1;u++)p.push(n[u].clone());p.push(a.pt),l.push(p)}else.5*e;var s=[];s.push(a.pt);for(var P=a.index+1;P<n.length;P++)s.push(n[P]);n=(n=[]).concat(s)}}return n.length>0&&l.push(n),l}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=.5*SuperMap.Plot.PlottingUtil.distance(l[0],e)/o;n>=.05&&(n=.05),SuperMap.Plot.PlottingUtil.isRight(e,l[0],l[1])&&(n=-n),this.getScaleValues()[0]=n}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol6020404=p},function(t,e,l){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.JBAlgoSymbolFactory=void 0;o(l(42)),o(l(41)),e.JBAlgoSymbolFactory=SuperMap.Geometry.JBAlgoSymbolFactory=SuperMap.Geometry.JBAlgoSymbolFactory||{};SuperMap.Geometry.JBAlgoSymbolFactory.getAlgoSymbol=function(t,e,l){if(100===t)switch(e){case 12500:return new SuperMap.Geometry.AlgoSymbol12500(l);case 12501:return new SuperMap.Geometry.AlgoSymbol12501(l);case 12502:return new SuperMap.Geometry.AlgoSymbol12502(l);case 13700:return new SuperMap.Geometry.AlgoSymbol13700(l);case 15200:return new SuperMap.Geometry.AlgoSymbol15200(l);case 15201:case 23800:return new SuperMap.Geometry.AlgoSymbol15201(l);case 15202:return new SuperMap.Geometry.AlgoSymbol15202(l);case 15800:return new SuperMap.Geometry.AlgoSymbol15800(l);case 15801:return new SuperMap.Geometry.AlgoSymbol15801(l);case 15802:return new SuperMap.Geometry.AlgoSymbol15802(l);case 15803:return new SuperMap.Geometry.AlgoSymbol15803(l);case 15804:return new SuperMap.Geometry.AlgoSymbol15804(l);case 15805:return new SuperMap.Geometry.AlgoSymbol15805(l);case 15806:return new SuperMap.Geometry.AlgoSymbol15806(l);case 15900:return new SuperMap.Geometry.AlgoSymbol15900(l);case 16e3:return new SuperMap.Geometry.AlgoSymbol16000(l);case 16001:return new SuperMap.Geometry.AlgoSymbol16001(l);case 16100:return new SuperMap.Geometry.AlgoSymbol16100(l);case 16200:return new SuperMap.Geometry.AlgoSymbol16200(l);case 16201:return new SuperMap.Geometry.AlgoSymbol16201(l);case 16202:return new SuperMap.Geometry.AlgoSymbol16202(l);case 16203:return new SuperMap.Geometry.AlgoSymbol16203(l);case 16500:return new SuperMap.Geometry.AlgoSymbol16500(l);case 16700:return new SuperMap.Geometry.AlgoSymbol16700(l);case 16900:return new SuperMap.Geometry.AlgoSymbol16900(l);case 17400:return new SuperMap.Geometry.AlgoSymbol17400(l);case 17401:return new SuperMap.Geometry.AlgoSymbol17401(l);case 17500:return new SuperMap.Geometry.AlgoSymbol17500(l);case 17501:return new SuperMap.Geometry.AlgoSymbol17501(l);case 17600:return new SuperMap.Geometry.AlgoSymbol17600(l);case 17700:return new SuperMap.Geometry.AlgoSymbol17700(l);case 17703:return new SuperMap.Geometry.AlgoSymbol17703(l);case 17704:return new SuperMap.Geometry.AlgoSymbol17704(l);case 17800:return new SuperMap.Geometry.AlgoSymbol17800(l);case 17801:return new SuperMap.Geometry.AlgoSymbol17801(l);case 17802:return new SuperMap.Geometry.AlgoSymbol17802(l);case 17803:return new SuperMap.Geometry.AlgoSymbol17803(l);case 17804:return new SuperMap.Geometry.AlgoSymbol17804(l);case 17805:return new SuperMap.Geometry.AlgoSymbol17805(l);case 17806:return new SuperMap.Geometry.AlgoSymbol17806(l);case 20300:return new SuperMap.Geometry.AlgoSymbol20300(l);case 20301:return new SuperMap.Geometry.AlgoSymbol20301(l);case 21401:return new SuperMap.Geometry.AlgoSymbol21401(l);case 21500:return new SuperMap.Geometry.AlgoSymbol21500(l);case 21501:return new SuperMap.Geometry.AlgoSymbol21501(l);case 21502:return new SuperMap.Geometry.AlgoSymbol21502(l);case 21503:return new SuperMap.Geometry.AlgoSymbol21503(l);case 21504:return new SuperMap.Geometry.AlgoSymbol21504(l);case 21600:return new SuperMap.Geometry.AlgoSymbol21600(l);case 3010302:return new SuperMap.Geometry.AlgoSymbol3010302(l);case 21800:return new SuperMap.Geometry.AlgoSymbol21800(l);case 21900:return new SuperMap.Geometry.AlgoSymbol21900(l);case 22103:case 22e3:return new SuperMap.Geometry.AlgoSymbol22000(l);case 22200:return new SuperMap.Geometry.AlgoSymbol22200(l);case 23400:return new SuperMap.Geometry.AlgoSymbol23400(l);case 23500:return new SuperMap.Geometry.AlgoSymbol23500(l);case 23600:return new SuperMap.Geometry.AlgoSymbol23600(l);case 23700:return new SuperMap.Geometry.AlgoSymbol23700(l);case 23901:return new SuperMap.Geometry.AlgoSymbol23901(l);case 23902:return new SuperMap.Geometry.AlgoSymbol23902(l);case 24700:return new SuperMap.Geometry.AlgoSymbol24700(l);case 25e3:return new SuperMap.Geometry.AlgoSymbol25000(l);case 25100:return new SuperMap.Geometry.AlgoSymbol25100(l);case 25101:return new SuperMap.Geometry.AlgoSymbol25101(l);case 25200:return new SuperMap.Geometry.AlgoSymbol25200(l);case 21400:return new SuperMap.Geometry.AlgoSymbol21400(l);case 25201:return new SuperMap.Geometry.AlgoSymbol25201(l);case 25202:return new SuperMap.Geometry.AlgoSymbol25202(l);case 25300:return new SuperMap.Geometry.AlgoSymbol25300(l);case 25301:return new SuperMap.Geometry.AlgoSymbol25301(l);case 25400:return new SuperMap.Geometry.AlgoSymbol25400(l);case 25500:return new SuperMap.Geometry.AlgoSymbol25500(l);case 25501:return new SuperMap.Geometry.AlgoSymbol25501(l);case 25502:return new SuperMap.Geometry.AlgoSymbol25502(l);case 25503:return new SuperMap.Geometry.AlgoSymbol25503(l);case 25600:return new SuperMap.Geometry.AlgoSymbol25600(l);case 25601:return new SuperMap.Geometry.AlgoSymbol25601(l);case 25700:return new SuperMap.Geometry.AlgoSymbol25700(l);case 25701:return new SuperMap.Geometry.AlgoSymbol25701(l);case 25800:return new SuperMap.Geometry.AlgoSymbol25800(l);case 25801:return new SuperMap.Geometry.AlgoSymbol25801(l);case 25900:return new SuperMap.Geometry.AlgoSymbol25900(l);case 25901:return new SuperMap.Geometry.AlgoSymbol25901(l);case 26400:return new SuperMap.Geometry.AlgoSymbol26400(l);case 26500:return new SuperMap.Geometry.AlgoSymbol26500(l);case 26501:return new SuperMap.Geometry.AlgoSymbol26501(l);case 26502:return new SuperMap.Geometry.AlgoSymbol26502(l);case 26503:return new SuperMap.Geometry.AlgoSymbol26503(l);case 26600:return new SuperMap.Geometry.AlgoSymbol26600(l);case 26601:return new SuperMap.Geometry.AlgoSymbol26601(l);case 26700:return new SuperMap.Geometry.AlgoSymbol26700(l);case 26800:return new SuperMap.Geometry.AlgoSymbol26800(l);case 27100:return new SuperMap.Geometry.AlgoSymbol27100(l);case 27300:return new SuperMap.Geometry.AlgoSymbol27300(l);case 27700:return new SuperMap.Geometry.AlgoSymbol27700(l);case 27701:return new SuperMap.Geometry.AlgoSymbol27701(l);case 27900:return new SuperMap.Geometry.AlgoSymbol27900(l);case 27901:return new SuperMap.Geometry.AlgoSymbol27901(l);case 27902:return new SuperMap.Geometry.AlgoSymbol27902(l);case 28e3:return new SuperMap.Geometry.AlgoSymbol28000(l);case 28100:return new SuperMap.Geometry.AlgoSymbol28100(l);case 28200:return new SuperMap.Geometry.AlgoSymbol28200(l);case 28201:return new SuperMap.Geometry.AlgoSymbol28201(l);case 28300:return new SuperMap.Geometry.AlgoSymbol28300(l);case 28301:return new SuperMap.Geometry.AlgoSymbol28301(l);case 28400:return new SuperMap.Geometry.AlgoSymbol28400(l);case 28900:return new SuperMap.Geometry.AlgoSymbol28900(l);case 29e3:return new SuperMap.Geometry.AlgoSymbol29000(l);case 29001:return new SuperMap.Geometry.AlgoSymbol29001(l);case 29002:return new SuperMap.Geometry.AlgoSymbol29002(l);case 29003:return new SuperMap.Geometry.AlgoSymbol29003(l);case 29100:return new SuperMap.Geometry.AlgoSymbol29100(l);case 29101:return new SuperMap.Geometry.AlgoSymbol29101(l);case 29103:return new SuperMap.Geometry.AlgoSymbol29103(l);case 29401:return new SuperMap.Geometry.AlgoSymbol29401(l);case 29800:return new SuperMap.Geometry.AlgoSymbol29800(l);case 29903:return new SuperMap.Geometry.AlgoSymbol29903(l);case 3e4:return new SuperMap.Geometry.AlgoSymbol30000(l);case 30001:return new SuperMap.Geometry.AlgoSymbol30001(l);case 30002:return new SuperMap.Geometry.AlgoSymbol30002(l);case 30100:case 4020400:return new SuperMap.Geometry.AlgoSymbol30100(l);case 30200:return new SuperMap.Geometry.AlgoSymbol30200(l);case 30201:return new SuperMap.Geometry.AlgoSymbol30201(l);case 30800:return new SuperMap.Geometry.AlgoSymbol30800(l);case 30102:return new SuperMap.Geometry.AlgoSymbol30102(l);case 31300:return new SuperMap.Geometry.AlgoSymbol31300(l);case 31301:return new SuperMap.Geometry.AlgoSymbol31301(l);case 31302:return new SuperMap.Geometry.AlgoSymbol31302(l);case 31303:return new SuperMap.Geometry.AlgoSymbol31303(l);case 31304:return new SuperMap.Geometry.AlgoSymbol31304(l);case 31400:return new SuperMap.Geometry.AlgoSymbol31400(l);case 31401:return new SuperMap.Geometry.AlgoSymbol31401(l);case 31600:return new SuperMap.Geometry.AlgoSymbol31600(l);case 31601:return new SuperMap.Geometry.AlgoSymbol31601(l);case 31803:return new SuperMap.Geometry.AlgoSymbol31803(l);case 32300:return new SuperMap.Geometry.AlgoSymbol32300(l);case 32900:return new SuperMap.Geometry.AlgoSymbol32900(l);case 33400:return new SuperMap.Geometry.AlgoSymbol33400(l);case 34300:return new SuperMap.Geometry.AlgoSymbol34300(l);case 34400:return new SuperMap.Geometry.AlgoSymbol34400(l);case 34500:return new SuperMap.Geometry.AlgoSymbol34500(l);case 34501:return new SuperMap.Geometry.AlgoSymbol34501(l);case 34700:return new SuperMap.Geometry.AlgoSymbol34700(l);case 34800:return new SuperMap.Geometry.AlgoSymbol34800(l);case 34801:return new SuperMap.Geometry.AlgoSymbol34801(l);case 34900:return new SuperMap.Geometry.AlgoSymbol34900(l);case 34901:return new SuperMap.Geometry.AlgoSymbol34901(l);case 34902:return new SuperMap.Geometry.AlgoSymbol34902(l);case 35e3:return new SuperMap.Geometry.AlgoSymbol35000(l);case 35200:return new SuperMap.Geometry.AlgoSymbol35200(l);case 35304:return new SuperMap.Geometry.AlgoSymbol35304(l);case 35500:return new SuperMap.Geometry.AlgoSymbol35500(l);case 36400:return new SuperMap.Geometry.AlgoSymbol36400(l);case 36401:return new SuperMap.Geometry.AlgoSymbol36401(l);case 36600:return new SuperMap.Geometry.AlgoSymbol36600(l);case 36700:return new SuperMap.Geometry.AlgoSymbol36700(l);case 36800:return new SuperMap.Geometry.AlgoSymbol36800(l);case 37100:return new SuperMap.Geometry.AlgoSymbol37100(l);case 37200:return new SuperMap.Geometry.AlgoSymbol37200(l);case 37300:return new SuperMap.Geometry.AlgoSymbol37300(l);case 37301:return new SuperMap.Geometry.AlgoSymbol37301(l);case 37600:return new SuperMap.Geometry.AlgoSymbol37600(l);case 37601:return new SuperMap.Geometry.AlgoSymbol37601(l);case 37700:return new SuperMap.Geometry.AlgoSymbol37700(l);case 38600:return new SuperMap.Geometry.AlgoSymbol38600(l);case 38700:return new SuperMap.Geometry.AlgoSymbol38700(l);case 39e3:return new SuperMap.Geometry.AlgoSymbol39000(l);case 39101:return new SuperMap.Geometry.AlgoSymbol39101(l);case 39500:return new SuperMap.Geometry.AlgoSymbol39500(l);case 39600:return new SuperMap.Geometry.AlgoSymbol39600(l);case 39800:return new SuperMap.Geometry.AlgoSymbol39800(l);case 39801:return new SuperMap.Geometry.AlgoSymbol39801(l);case 39802:return new SuperMap.Geometry.AlgoSymbol39802(l);case 4e4:return new SuperMap.Geometry.AlgoSymbol40000(l);case 40100:return new SuperMap.Geometry.AlgoSymbol40100(l);case 40101:return new SuperMap.Geometry.AlgoSymbol40101(l);case 40900:return new SuperMap.Geometry.AlgoSymbol40900(l);case 41100:return new SuperMap.Geometry.AlgoSymbol41100(l);case 41200:return new SuperMap.Geometry.AlgoSymbol41200(l);case 41201:return new SuperMap.Geometry.AlgoSymbol41201(l);case 41202:return new SuperMap.Geometry.AlgoSymbol41202(l);case 42200:return new SuperMap.Geometry.AlgoSymbol42200(l);case 42400:return new SuperMap.Geometry.AlgoSymbol42400(l);case 42500:return new SuperMap.Geometry.AlgoSymbol42500(l);case 42700:return new SuperMap.Geometry.AlgoSymbol42700(l);case 43500:return new SuperMap.Geometry.AlgoSymbol43500(l);case 44100:return new SuperMap.Geometry.AlgoSymbol44100(l);case 44200:return new SuperMap.Geometry.AlgoSymbol44200(l);case 44300:return new SuperMap.Geometry.AlgoSymbol44300(l);case 44400:return new SuperMap.Geometry.AlgoSymbol44400(l);case 3010301:return new SuperMap.Geometry.AlgoSymbol3010301(l);case 3010303:return new SuperMap.Geometry.AlgoSymbol3010303(l);case 3010304:return new SuperMap.Geometry.AlgoSymbol3010304(l);case 3010102:return new SuperMap.Geometry.AlgoSymbol3010102(l);case 3010103:return new SuperMap.Geometry.AlgoSymbol3010103(l);case 3010104:return new SuperMap.Geometry.AlgoSymbol3010104(l);case 3010105:return new SuperMap.Geometry.AlgoSymbol3010105(l);case 3010106:return new SuperMap.Geometry.AlgoSymbol3010106(l);case 3010107:return new SuperMap.Geometry.AlgoSymbol3010107(l);case 3010108:return new SuperMap.Geometry.AlgoSymbol3010108(l);case 3020901:return new SuperMap.Geometry.AlgoSymbol3020901(l);case 3032e3:return new SuperMap.Geometry.AlgoSymbol3032000(l);case 4010800:return new SuperMap.Geometry.AlgoSymbol4010800(l);case 4010801:return new SuperMap.Geometry.AlgoSymbol4010801(l);case 4010905:return new SuperMap.Geometry.AlgoSymbol4010905(l);case 4011100:return new SuperMap.Geometry.AlgoSymbol4011100(l);case 4020303:return new SuperMap.Geometry.AlgoSymbol4020303(l);case 4020401:return new SuperMap.Geometry.AlgoSymbol4020401(l);case 4020402:return new SuperMap.Geometry.AlgoSymbol4020402(l);case 4022100:return new SuperMap.Geometry.AlgoSymbol4022100(l);case 4022101:return new SuperMap.Geometry.AlgoSymbol4022101(l);case 4022102:return new SuperMap.Geometry.AlgoSymbol4022102(l);case 6020400:return new SuperMap.Geometry.AlgoSymbol6020400(l);case 6020401:return new SuperMap.Geometry.AlgoSymbol6020401(l);case 6020402:return new SuperMap.Geometry.AlgoSymbol6020402(l);case 6020403:return new SuperMap.Geometry.AlgoSymbol6020403(l);case 6020404:return new SuperMap.Geometry.AlgoSymbol6020404(l);case 4021101:return new SuperMap.Geometry.AlgoSymbol4021101(l);case 4021102:return new SuperMap.Geometry.AlgoSymbol4021102(l);default:return new SuperMap.Geometry.AlgoSymbol(l)}},SuperMap.Geometry.JBAlgoSymbolFactory.isAccessServer=function(t,e){if(100!==t)return!0;switch(e){case 12500:case 12501:case 12502:case 13700:case 15200:case 15201:case 15202:case 15800:case 15801:case 15802:case 15803:case 15804:case 15805:case 15806:case 15900:case 16e3:case 16001:case 16100:case 16200:case 16201:case 16202:case 16203:case 16500:case 16700:case 16900:case 17400:case 17401:case 17500:case 17501:case 17600:case 17700:case 17703:case 17704:case 17800:case 17801:case 17802:case 17803:case 17804:case 17805:case 17806:case 20300:case 20301:case 21400:case 21401:case 21500:case 21501:case 21502:case 21503:case 21504:case 21600:case 21800:case 21900:case 22e3:case 22103:case 22200:case 23400:case 23500:case 23600:case 23700:case 23800:case 23901:case 23902:case 24700:case 25e3:case 25100:case 25101:case 25200:case 25201:case 25202:case 25300:case 25301:case 25400:case 25500:case 25501:case 25502:case 25503:case 25600:case 25601:case 25700:case 25701:case 25800:case 25801:case 25900:case 25901:case 26400:case 26500:case 26501:case 26502:case 26503:case 26600:case 26601:case 26700:case 26800:case 27100:case 27300:case 27700:case 27701:case 27900:case 27901:case 27902:case 28e3:case 28100:case 28200:case 28201:case 28300:case 28301:case 28400:case 28900:case 29e3:case 29001:case 29002:case 29003:case 29100:case 29101:case 29103:case 29401:case 29800:case 29903:case 3e4:case 30001:case 30002:case 30100:case 30200:case 30201:case 30800:case 30102:case 31300:case 31301:case 31302:case 31303:case 31304:case 31400:case 31401:case 31600:case 31601:case 31803:case 32300:case 32900:case 33400:case 34300:case 34400:case 34500:case 34501:case 34700:case 34800:case 34801:case 34900:case 34901:case 34902:case 35e3:case 35200:case 35304:case 35500:case 36400:case 36401:case 36600:case 36700:case 36800:case 37100:case 37200:case 37300:case 37301:case 37600:case 37601:case 37700:case 38600:case 38700:case 39e3:case 39101:case 39500:case 39600:case 39800:case 39801:case 39802:case 3010102:case 3010103:case 3010104:case 3010105:case 3010106:case 3010107:case 3010108:case 4e4:case 40100:case 40101:case 40900:case 41100:case 41200:case 41201:case 41202:case 42200:case 42400:case 42500:case 42700:case 43500:case 44100:case 44200:case 44300:case 44400:case 3010301:case 3010302:case 3010303:case 3010304:case 3020901:case 3032e3:case 4010800:case 4010801:case 4010905:case 4011100:case 4020303:case 4020400:case 4020401:case 4020402:case 4022100:case 4022101:case 4022102:case 6020400:case 6020401:case 6020402:case 6020403:case 6020404:case 4021101:case 4021102:return!1;default:return!0}},SuperMap.Geometry.JBAlgoSymbolFactory.getSymbolWayType=function(t,e){if(100!==t)return SuperMap.Plot.AddPoint_WayType.UNKNOWN;switch(e){case 15200:case 15201:case 16203:case 17703:case 17704:case 21400:case 21401:case 21500:case 21501:case 21502:case 21503:case 21504:case 21600:case 21900:case 22e3:case 22103:case 23800:case 24700:case 25201:case 25400:case 26500:case 26501:case 26502:case 26600:case 28900:case 29e3:case 29003:case 29903:case 3e4:case 30001:case 30002:case 30100:case 30102:case 30200:case 30201:case 30800:case 31803:case 33400:case 34900:case 34901:case 34902:case 35e3:case 36400:case 44200:case 3010102:case 3010103:case 3010104:case 3010105:case 3010106:case 3010107:case 3010108:case 3010301:case 3010302:case 3010303:case 3010304:return SuperMap.Plot.AddPoint_WayType.CURVE;case 12500:case 12502:case 16100:case 20300:case 25501:case 25502:case 26503:case 25503:case 25601:case 25801:case 25901:case 32900:case 34700:case 35200:case 36401:case 41200:case 41201:case 41202:case 42700:case 44400:return SuperMap.Plot.AddPoint_WayType.POLYLINE;default:return SuperMap.Plot.AddPoint_WayType.UNKNOWN}},SuperMap.Geometry.JBAlgoSymbolFactory.getDefaultSubSymbols=function(t,e){var l=[];if(100!==t)return l;switch(e){case 21501:case 26502:return l.push(new SuperMap.Plot.SubSymbol(100,19700)),l;case 21502:return l.push(new SuperMap.Plot.SubSymbol(100,6803)),l;case 22103:case 26501:return l.push(new SuperMap.Plot.SubSymbol(100,22100)),l;case 21503:return l.push(new SuperMap.Plot.SubSymbol(100,7900)),l;case 21504:return l.push(new SuperMap.Plot.SubSymbol(100,8404)),l;case 22e3:return l.push(new SuperMap.Plot.SubSymbol(100,1e3)),l;case 23500:return l.push(new SuperMap.Plot.SubSymbol(100,1300)),l;case 23600:return l.push(new SuperMap.Plot.SubSymbol(100,800)),l.push(new SuperMap.Plot.SubSymbol(100,800)),l;case 25300:return l.push(new SuperMap.Plot.SubSymbol(100,6302)),l.push(new SuperMap.Plot.SubSymbol(100,7900)),l;case 25301:return l.push(new SuperMap.Plot.SubSymbol(100,300)),l.push(new SuperMap.Plot.SubSymbol(100,6200)),l;case 25503:return l.push(new SuperMap.Plot.SubSymbol(100,8402)),l;case 26700:return l.push(new SuperMap.Plot.SubSymbol(100,4500)),l;case 27100:return l.push(new SuperMap.Plot.SubSymbol(100,7700)),l;case 27300:return l.push(new SuperMap.Plot.SubSymbol(100,1500)),l;case 3032e3:return l.push(new SuperMap.Plot.SubSymbol(100,1500)),l.push(new SuperMap.Plot.SubSymbol(100,1500)),l;case 28300:return l.push(new SuperMap.Plot.SubSymbol(100,18600)),l;case 28301:return l.push(new SuperMap.Plot.SubSymbol(100,18600)),l.push(new SuperMap.Plot.SubSymbol(100,18600)),l;case 28400:return l.push(new SuperMap.Plot.SubSymbol(100,4801)),l;case 29001:return l.push(new SuperMap.Plot.SubSymbol(100,5200)),l.push(new SuperMap.Plot.SubSymbol(100,5200)),l;case 29002:return l.push(new SuperMap.Plot.SubSymbol(100,600)),l.push(new SuperMap.Plot.SubSymbol(100,5300)),l;case 23901:case 23902:return l.push(new SuperMap.Plot.SubSymbol(100,4800)),l;case 29903:case 4021101:return l.push(new SuperMap.Plot.SubSymbol(100,600)),l;case 32900:return l.push(new SuperMap.Plot.SubSymbol(100,6700)),l;case 35200:return l.push(new SuperMap.Plot.SubSymbol(100,6803)),l;case 37700:return l.push(new SuperMap.Plot.SubSymbol(100,37800)),l;case 3010107:return l.push(new SuperMap.Plot.SubSymbol(100,800)),l;case 3010108:return l.push(new SuperMap.Plot.SubSymbol(100,4600)),l;case 4010800:return l.push(new SuperMap.Plot.SubSymbol(100,1300)),l;case 4010801:case 4022100:case 4022101:case 4022102:case 4021102:return l.push(new SuperMap.Plot.SubSymbol(100,8400)),l;case 31303:case 31302:return l.push(new SuperMap.Plot.SubSymbol(100,4400)),l;case 4010905:return l.push(new SuperMap.Plot.SubSymbol(100,700)),l;case 31803:return l.push(new SuperMap.Plot.SubSymbol(100,8402)),l;case 34400:return l.push(new SuperMap.Plot.SubSymbol(100,6202)),l;case 34501:return l.push(new SuperMap.Plot.SubSymbol(100,8406)),l;case 35304:return l.push(new SuperMap.Plot.SubSymbol(100,35301)),l;case 36401:return l.push(new SuperMap.Plot.SubSymbol(100,7200)),l;case 36600:return l.push(new SuperMap.Plot.SubSymbol(100,7300)),l;case 37200:return l.push(new SuperMap.Plot.SubSymbol(100,7101)),l;case 37600:case 37601:case 38600:case 38700:return l.push(new SuperMap.Plot.SubSymbol(100,4600)),l;case 39101:return l.push(new SuperMap.Plot.SubSymbol(100,39100)),l;case 39500:case 39600:return l.push(new SuperMap.Plot.SubSymbol(100,8700)),l;case 39800:case 39801:case 39802:return l.push(new SuperMap.Plot.SubSymbol(100,8900)),l;case 36700:return l.push(new SuperMap.Plot.SubSymbol(100,7600)),l;case 42200:return l.push(new SuperMap.Plot.SubSymbol(100,20901)),l;case 4011100:return l.push(new SuperMap.Plot.SubSymbol(100,4e3)),l.push(new SuperMap.Plot.SubSymbol(100,4001)),l;default:return l}}},function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PlottingUtil=SuperMap.Plot.PlottingUtil=SuperMap.Plot.PlottingUtil||{};SuperMap.Plot.PlottingUtil.getSurroundLinePts=function(t,e){for(var l=[],o=[],n=0;n<t.length-1;n++){var i,r,a=[];if(!SuperMap.Plot.PlottingUtil.equalFuzzy(t[n].x,t[n+1].x)||!SuperMap.Plot.PlottingUtil.equalFuzzy(t[n].y,t[n+1].y)){a.push(t[n]),a.push(t[n+1]);var p=SuperMap.Plot.PlottingUtil.parallel(a,e);if(i=p[0],r=p[1],0!=l.length){var u=SuperMap.Plot.PlottingUtil.intersectLines(i,r,l[0],l[1]);if(u.isIntersectLines){var s=u.intersectPoint,P=SuperMap.Plot.PlottingUtil.distance(i,r);SuperMap.Plot.PlottingUtil.distance(s,r)>2*P?o.push(r):(o[o.length-1]=s,o.push(r))}else o.push(r)}else o.push(i),o.push(r);(l=[]).push(o[o.length-2]),l.push(o[o.length-1])}}if(t[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y&&1<o.length){var c=SuperMap.Plot.PlottingUtil.intersectLines(o[0],o[1],o[o.length-2],o[o.length-1]);if(c.isIntersectLines){var S=c.intersectPoint;o[o.length-1]=S,o[0]=S}}return o},SuperMap.Plot.PlottingUtil.getDataFromServer=function(t,e,l,o,n,i,r,a){var p;void 0!==i&&(p=i);var u=new SuperMap.GetSymbolInfoService(t);u.events.on({processCompleted:r,processFailed:a,scope:p});var s=new SuperMap.GetSymbolInfoParameters;s.libID=e,s.code=l,n&&SuperMap.Util.extend(s,n),o&&null!==o&&(SuperMap.Util.isArray(o)||(o=[o]),s.inputPoints=o),u.processAsync(s)},SuperMap.Plot.PlottingUtil.innerOutlineDir=function(t){function e(t,e){function l(t){var e=Math.atan2(t.y,t.x);return e<0&&(e+=2*Math.PI),e}var o=l(e)-l(t);return o<-Math.PI&&(o+=2*Math.PI),o>Math.PI&&(o-=2*Math.PI),o}if(t.length<3)return 1;for(var l=0,o={x:0,y:0},n={x:0,y:0},i=2;i<t.length;i++)n.x=t[i].x-t[i-1].x,n.y=t[i].y-t[i-1].y,o.x=t[i-1].x-t[i-2].x,o.y=t[i-1].y-t[i-2].y,l+=e(o,n);return n.x=t[1].x-t[0].x,n.y=t[1].y-t[0].y,o.x=t[0].x-t[t.length-1].x,o.y=t[0].y-t[t.length-1].y,(l+=e(o,n))>=0?-1:1},SuperMap.Plot.PlottingUtil.isNear=function(t,e){return e||(e=1e-18),t<e&&t>-e},SuperMap.Plot.PlottingUtil.equalFuzzy=function(t,e,l){return l||(l=1e-18),Math.abs(t-e)<=l},SuperMap.Plot.PlottingUtil.intersectLines=function(t,e,l,o){var n={};if(n.isIntersectLines=!1,t.x===e.x&&t.y===e.y||l.x===o.x&&l.y===o.y)return n;var i=e.x-t.x,r=e.y-t.y,a=o.x-l.x,p=o.y-l.y,u=i*p-a*r;if(this.isNear(u))return n;var s=(i*(t.y-l.y)-r*(t.x-l.x))/u,P=new SuperMap.Geometry.Point(0,0);return P.x=s*a+l.x,P.y=s*p+l.y,n.isIntersectLines=!0,n.intersectPoint=P,n},SuperMap.Plot.PlottingUtil.getEnvelopePoints=function(t){function e(t,e,l){for(var o=t.components[0].components,n=new SuperMap.Geometry.Point(0,0),i=0;i<o.length-1;i++)if(this.intersectLineSegs(e,l,o[i],o[i+1],n))return n;return null}function l(t,e){if(0===t.length||this.equalFuzzy(e[0].x,e[e.length-1].x,.5)&&this.equalFuzzy(e[0].y,e[e.length-1].y,.5))return e;for(var o=e[e.length-1],n=0;n<t.length;n++)if(this.equalFuzzy(t[n][0].x,o.x,.5)&&this.equalFuzzy(t[n][0].y,o.y,.5)){if(e=e.concat(t[n]),t.splice(n,1),void 0!==(r=l(t,e))&&0!==r.length)return r}else if(this.equalFuzzy(t[n][t[n].length-1].x,o.x,.5)&&this.equalFuzzy(t[n][t[n].length-1].y,o.y,.5)){for(var i=t[n].length-1;i>=0;i--)e.push(t[n][i]);t.splice(n,1);var r=l(t,e);if(void 0!==r&&0!==r.length)return r}return e}if(SuperMap.Util.isArray(t)||(t=[t]),0===t.length)return[];if(1===t.length)return t[0];for(n=0;n<t.length;n++)for(c=n+1;c<t.length;)!function(t,e){if(t.length!==e.length)return!1;for(var l=0;l<t.length;l++)if(t[l].x!==e[l].x||t[l].y!==e[l].y)return!1;return!0}(t[n],t[c])?c++:t.splice(c,1);for(var o=[],n=0;n<t.length;n++)o.push(new SuperMap.Geometry.Polygon([new SuperMap.Geometry.LinearRing(t[n])]));for(var i=[],n=0;n<t.length;n++){var r=[],a=[],p=-1,u=-1,s=o.slice();s.splice(n,1);for(var P={},c=0;c<t[n].length;c++)if(function(t,e,l){for(var o=0;o<t.length;o++)if(t[o].containsPoint(e))return l.index=o,!0;return!1}(s,t[n][c],P)){if(0!==a.length){var S=e(o[P.index],t[n][c-1],t[n][c]);S&&S!==t[n][c-1]&&S!==t[n][c]&&a.push(S),r.push(a),a=[]}}else 0===c&&(p=r.length),c===t[n].length-1&&(u=r.length),0===a.length&&void 0!==P.index&&(S=e(o[P.index],t[n][c-1],t[n][c]))&&S!==t[n][c-1]&&S!==t[n][c]&&a.push(S),a.push(t[n][c].clone());if(0!==a.length&&r.push(a),p<r.length&&u<r.length&&p!==u){for(var y=0;y<r[p].length;y++)r[u].push(r[p][y]);r.splice(p,1)}i=i.concat(r)}for(var h=[];0!==i.length;){var g=i[0];i.splice(0,1);var f=l(i,g);void 0!==f&&(g=f),g.length>2&&h.push(g)}return h},SuperMap.Plot.PlottingUtil.isRight=function(t,e,l){var o=e,n=l,i=e,r=t;return(n.x-o.x)*(r.y-i.y)-(r.x-i.x)*(n.y-o.y)<0},SuperMap.Plot.PlottingUtil.radian=function(t,e){var l,o,n=0;return t instanceof L.LatLng&&e instanceof L.LatLng?(l=e.lng-t.lng,o=e.lat-t.lat):(l=e.x-t.x,o=e.y-t.y),(n=Math.atan2(o,l))<0&&(n+=2*Math.PI),n},SuperMap.Plot.PlottingUtil.findBisectorPoint=function(t,e,l,o){var n=this.radian(e,t),i=(n+this.radian(e,l))/2,r=Math.cos(i-n+Math.PI/2),a=o;this.isNear(r,.15)||(a=o/r);var p=e.x+a*Math.cos(i),u=e.y+a*Math.sin(i);return new SuperMap.Geometry.Point(p,u)},SuperMap.Plot.PlottingUtil.findPoint=function(t,e,l,o){if(t===e||Math.abs(l)<1e-18)return t;var n=this.radian(t,e)+o*Math.PI/180,i=t.x+l*Math.cos(n),r=t.y+l*Math.sin(n);return new SuperMap.Geometry.Point(i,r)},SuperMap.Plot.PlottingUtil.isSameQuadrant=function(t,e,l,o){var n=(e.x-t.x)*(o.x-l.x),i=(e.y-t.y)*(o.y-l.y);return!(Math.abs(n)<1e-18&&Math.abs(i)<1e-18)&&((n>0||Math.abs(n)<1e-18)&&(i>0||Math.abs(i)<1e-18))},SuperMap.Plot.PlottingUtil.isCross=function(t,e,l,o){var n=new SuperMap.Geometry.Point(0,0);return!(!this.intersectLineSegs(t,e,l,o,n)||n==t||n===e||n===l||n==o)},SuperMap.Plot.PlottingUtil.intersectLineSegs=function(t,e,l,o,n){if(this.equalFuzzy(t.x,e.x)&&SuperMap.Plot.PlottingUtil.equalFuzzy(t.y,e.y))return n.x=t.x,n.y=t.y,!1;if(this.equalFuzzy(l.x,o.x)&&this.equalFuzzy(l.y,o.y))return n.x=l.x,n.y=l.y,!1;var i=0,r=0;if(i=t.x>e.x?t.x:e.x,r=t.x<e.x?t.x:e.x,l.x-i>1e-16&&o.x-i>1e-16||l.x-r<-1e-16&&o.x-r<-1e-16)return!1;if(i=t.y>e.y?t.y:e.y,r=t.y<e.y?t.y:e.y,l.y-i>1e-16&&o.y-i>1e-16||l.y-r<-1e-16&&o.y-r<-1e-16)return!1;var a=e.x-t.x,p=e.y-t.y,u=o.x-l.x,s=o.y-l.y,P=t.x-l.x,c=t.y-l.y,S=a*s-u*p,y=S;if(Math.abs(a)>1e-18&&Math.abs(u)>1e-18&&(y/=a*u),Math.abs(y)<1e-18)return t===l?(n.x=t.x,n.y=t.y,!this.isSameQuadrant(t,e,l,o)):e===o?(n.x=e.x,n.y=e.y,!this.isSameQuadrant(t,e,l,o)):t===o?(n.x=t.x,n.y=t.y,this.isSameQuadrant(t,e,l,o)):e===l&&(n.x=e.x,n.y=e.y,this.isSameQuadrant(t,e,l,o));var h=(a*c-p*P)/S,g=(u*c-s*P)/S;return!(h<0&&(Math.abs(h*u)>1e-16||Math.abs(h*s)>1e-16))&&(!(h>1&&(Math.abs((h-1)*u)>1e-16||Math.abs((h-1)*s)>1e-16))&&(!(g<0&&(Math.abs(g*a)>1e-16||Math.abs(g*p)>1e-16))&&(!(g>1&&(Math.abs((g-1)*a)>1e-16||Math.abs((g-1)*p)>1e-16))&&(Math.abs(h)<1e-18?(n.x=l.x,n.y=l.y,!0):Math.abs(h-1)<1e-18?(n.x=o.x,n.y=o.y,!0):Math.abs(g)<1e-18?(n.x=t.x,n.y=t.y,!0):Math.abs(g-1)<1e-18?(n.x=e.x,n.y=e.y,!0):!(h<0&&(Math.abs(h*u)>1e-16||Math.abs(h*s)>1e-16))&&(!(h>1&&(Math.abs((h-1)*u)>1e-16||Math.abs((h-1)*s)>1e-16))&&(!(g<0&&(Math.abs(g*a)>1e-16||Math.abs(g*p)>1e-16))&&(!(g>1&&(Math.abs((g-1)*a)>1e-16||Math.abs((g-1)*p)>1e-16))&&(n.x=h*u+l.x,n.y=h*s+l.y,!0))))))))},SuperMap.Plot.PlottingUtil.parallel=function(t,e){var l=[];if(!t||null===t||t.length<2)return l;var o=!1;t.length>3&&t[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y&&(o=!0),o?(l[0]=this.findBisectorPoint(t[t.length-2],t[0],t[1],e),l[t.length-1]=l[0]):(l[0]=this.findPoint(t[0],t[1],e,90),l[t.length-1]=this.findPoint(t[t.length-1],t[t.length-2],-e,90));for(var n=t[0],i=t[1],r=t[1],a=1;a<t.length-1;a++)if(i=t[a],t[a]!==t[a-1]&&(n=t[a-1]),t[a]!==t[a+1]){r=t[a+1];u=this.findBisectorPoint(n,i,r,e);this.isCross(n,l[a-1],i,u)&&(u=l[a-1]),l[a]=u}else{for(var p=a;p<nPntCount-1;){if(pSrc[p]!==pSrc[p+1]){r=pSrc[p+1];break}p++}if(p<nPntCount-1){var u=this.FindBisectorPoint(n,i,r,e);for(this.isCross(n,pntResults[a-1],i,u)&&(u=pntResults[a-1]);a<p;)pntResults[a]=u,a++;a=p-1}}return l},SuperMap.Plot.PlottingUtil.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},SuperMap.Plot.PlottingUtil.projectPoint=function(t,e,l){if(e===l)return e;var o=new SuperMap.Geometry.Point(0,0),n=l.x-e.x,i=e.y-l.y,r=n*n,a=i*i,p=n*i,u=n*n+i*i;return o.x=(p*(e.y-t.y)+e.x*a+t.x*r)/u,o.y=(p*(e.x-t.x)+e.y*r+t.y*a)/u,o},SuperMap.Plot.PlottingUtil.pointToLineDis=function(t,e,l){var o=this.projectPoint(t,e,l);return this.distance(t,o)},SuperMap.Plot.PlottingUtil.pointToPloyLineDis=function(t,e,l){if(e===l)return this.distance(t,e);var o=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y),n=(l.x-t.x)*(l.x-t.x)+(l.y-t.y)*(l.y-t.y),i=(e.x-l.x)*(e.x-l.x)+(e.y-l.y)*(e.y-l.y),r=(o+i-n)/(2*i);r<0?r=0:r>1&&(r=1);var a=(l.x-e.x)*r+e.x,p=(l.y-e.y)*r+e.y,u=(a-t.x)*(a-t.x)+(p-t.y)*(p-t.y);return Math.sqrt(u)},SuperMap.Plot.PlottingUtil.isCounterClockwise=function(t,e,l){return(l.x-e.x)*(t.y-e.y)-(t.x-e.x)*(l.y-e.y)>0},SuperMap.Plot.PlottingUtil.clearSamePts=function(t){for(var e=t.length,l=0;l<e-1;)this.equalFuzzy(t[l].x,t[l+1].x)&&this.equalFuzzy(t[l].y,t[l+1].y)?(t.splice(l,1),e--):l++;return t},SuperMap.Plot.PlottingUtil.getBeizerCtrlPt=function(t){var e=[],l=t.length;if(l<3)for(n=0;n!=l;++n)e[n]=t[n].clone();else{for(var o=0,n=0;n<3*l-2;n+=3)e[n]=t[o].clone(),e[n+1]=new SuperMap.Geometry.Point(0,0),e[n+2]=new SuperMap.Geometry.Point(0,0),o++;for(n=1;n<l-1;n++)SuperMap.Plot.PlottingUtil.getTrianglePoints(8,3,t[n-1],t[n],t[n+1],e[3*n-1],e[3*n+1]);SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.6,e[0],e[3],e[2],e[1]),SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.6,e[3*l-3],e[3*l-6],e[3*l-5],e[3*l-4]),e[3*l-1]=e[3*l-2]=t[l-1].clone()}return e},SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt=function(t){var e=SuperMap.Plot.PlottingUtil.getBeizerCtrlPt(t);return SuperMap.Plot.PlottingUtil.generateBeizerPointsWithCtrlPt(e)},SuperMap.Plot.PlottingUtil.generateBeizerPointsWithCtrlPt=function(t){var e=t.length,l=[];if(t.length<3)for(o=0;o<e;o++)l[o]=t[o].clone();else{e/=3;for(var o=0;o<3*e&&!(o+4>=3*e);o+=3){var n=t[o].x,i=t[o].y,r=t[o+1].x,a=t[o+1].y,p=t[o+2].x,u=t[o+2].y,s=t[o+3].x,P=t[o+3].y;if(SuperMap.Plot.PlottingUtil.equalFuzzy(n,r,1e-10)&&SuperMap.Plot.PlottingUtil.equalFuzzy(i,a,1e-10)&&SuperMap.Plot.PlottingUtil.equalFuzzy(p,s,1e-10)&&SuperMap.Plot.PlottingUtil.equalFuzzy(u,P,1e-10))l.push(new SuperMap.Geometry.Point(n,i)),l.push(new SuperMap.Geometry.Point(p,u));else for(var c=0;c<=1;c+=.03125){var S,y,h,g,f=c*c,M=f*c;S=1-3*c+3*f-M,y=3*(c-2*f+M),h=3*(f-M),g=M;var d=new SuperMap.Geometry.Point(S*n+y*r+h*p+g*s,S*i+y*a+h*u+g*P);l.push(d)}}}return l},SuperMap.Plot.PlottingUtil.computeBeizerPoints=function(t,e,l){var o=SuperMap.Plot.PlottingUtil.polylineDistance(e),n=[],i=[],r=[];if(t){i.push(e[0]);var a=l[0],p=l[1],u=e[0].x+o*a,s=e[0].y+o*p;i.push(new SuperMap.Geometry.Point(u,s)),n.push(new SuperMap.Geometry.Point(u,s));for(g=1;g<e.length-1;g++){var a=l[4*g-2],p=l[4*g-1],u=e[g].x+o*a,s=e[g].y+o*p;i.push(new SuperMap.Geometry.Point(u,s)),n.push(new SuperMap.Geometry.Point(u,s)),i.push(new SuperMap.Geometry.Point(e[g].x,e[g].y)),a=l[4*g],p=l[4*g+1],u=e[g].x+o*a,s=e[g].y+o*p,i.push(new SuperMap.Geometry.Point(u,s)),n.push(new SuperMap.Geometry.Point(u,s))}var P=e.length-1;a=l[4*P-2],p=l[4*P-1],u=e[P].x+o*a,s=e[P].y+o*p,i.push(new SuperMap.Geometry.Point(u,s)),n.push(new SuperMap.Geometry.Point(u,s)),i.push(new SuperMap.Geometry.Point(e[P].x,e[P].y)),i.push(new SuperMap.Geometry.Point(e[P].x,e[P].y)),i.push(new SuperMap.Geometry.Point(e[P].x,e[P].y)),r=SuperMap.Plot.PlottingUtil.generateBeizerPointsWithCtrlPt(i)}else{l=[];var c=(i=SuperMap.Plot.PlottingUtil.getBeizerCtrlPt(e))[1].x-i[0].x,S=i[1].y-i[0].y,y=c/o,h=S/o;l.push(y),l.push(h),n.push(i[1]);for(var g=1;g<e.length-1;g++){var y=(c=i[3*g-1].x-i[3*g].x)/o,h=(S=i[3*g-1].y-i[3*g].y)/o;l.push(y),l.push(h),n.push(i[3*g-1]);var f=(i[3*g+1].x-i[3*g].x)/o,M=(i[3*g+1].y-i[3*g].y)/o;l.push(f),l.push(M),n.push(i[3*g+1])}y=(c=i[3*(e.length-1)-1].x-i[3*(e.length-1)].x)/o,h=(S=i[3*(e.length-1)-1].y-i[3*(e.length-1)].y)/o,l.push(y),l.push(h),n.push(i[3*(e.length-1)-1]),r=SuperMap.Plot.PlottingUtil.generateBeizerPointsWithCtrlPt(i)}return{scalePoints:n,scaleValues:l,beizerPoints:r}},SuperMap.Plot.PlottingUtil.getTrianglePoints=function(t,e,l,o,n,i,r){var a=l.x,p=l.y,u=o.x,s=o.y,P=n.x,c=n.y;SuperMap.Plot.PlottingUtil.getPointsByTriangle(t,e,a,p,u,s,P,c,i,r)},SuperMap.Plot.PlottingUtil.getPointsByTriangle=function(t,e,l,o,n,i,r,a,p,u){var s=n+(r-l),P=i+(a-o),c=0,S=0;if(l==r)c=l,S=P;else if(o==a)c=s,S=o;else{var y=1*(a-o)/(r-l),h=o-l*y;S=y*(c=(P+s/y-h)/(y+1/y))+h}var g=Math.sqrt(1*(n-s)*(n-s)+1*(i-P)*(i-P)),f=Math.sqrt(1*(l-n)*(l-n)+1*(o-i)*(o-i)),M=Math.sqrt(1*(n-r)*(n-r)+1*(i-a)*(i-a)),d=0;s=c+(s-c)*(d=f+M?1+(M-f)*t/(M+f):1),P=S+(P-S)*d,0==g&&(g=1),p.x=n+(n-s)*f/(e*g),p.y=i+(i-P)*f/(e*g),u.x=n+(s-n)*M/(e*g),u.y=i+(P-i)*M/(e*g)},SuperMap.Plot.PlottingUtil.getTrapezoidPoints=function(t,e,l,o,n){var i=e.x,r=e.y,a=l.x,p=l.y,u=o.x,s=o.y;return SuperMap.Plot.PlottingUtil.getPointsByTrapezoid(t,i,r,a,p,u,s,n)},SuperMap.Plot.PlottingUtil.getPointsByTrapezoid=function(t,e,l,o,n,i,r,a){var p=0,u=0,s=0,P=0;if(0==Math.abs(l-n))p=e+o-i,u=r;else if(0==Math.abs(e-o))p=i,u=l+n-r;else{var c=1*(l-n)/(e-o),S=r-c*i;u=c*(p=((n+l)/2+(e+o)/(2*c)-S)/(c+1/c))+S,p=2*p-i,u=2*u-r}var y=Math.sqrt(1*(e-o)*(e-o)+1*(l-n)*(l-n)),h=Math.sqrt(1*(e-p)*(e-p)+1*(l-u)*(l-u));return y>0?(s=e+(o-e)*h/y,P=l+(n-l)*h/y):(s=e,P=l),a.x=s+(p-s)*t,a.y=P+(u-P)*t,a},SuperMap.Plot.PlottingUtil.pointIsOnPolyLine=function(t,e,l){if(SuperMap.Plot.PlottingUtil.equalFuzzy(t.x,e.x)&&SuperMap.Plot.PlottingUtil.equalFuzzy(t.y,e.y)||SuperMap.Plot.PlottingUtil.equalFuzzy(t.x,l.x)&&SuperMap.Plot.PlottingUtil.equalFuzzy(t.y,l.y))return!0;var o=t.x-e.x,n=t.y-e.y,i=t.x-l.x,r=t.y-l.y,a=(o*i+n*r)/(Math.sqrt(o*o+n*n)*Math.sqrt(i*i+r*r));return!!SuperMap.Plot.PlottingUtil.equalFuzzy(a,-1,.1)},SuperMap.Plot.PlottingUtil.pointIsOnPolyLines=function(t,e){if(!e||null===e||0===e.length)return{isOnPolyLine:!1,index:-1};for(var l=!1,o=-1,n=0;n<e.length-1;n++)if(l=SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(t,e[n],e[n+1])){o=n;break}return{isOnPolyLine:l,index:o}},SuperMap.Plot.PlottingUtil.computePointToLineMinDis=function(t,e){for(var l=-1,o=-1,n=0;n<e.length-1;n++){var i=e[n],r=e[n+1],a=SuperMap.Plot.PlottingUtil.projectPoint(t,i,r);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(a,i,r)){var p=SuperMap.Plot.PlottingUtil.distance(t,a);l<0?(l=p,o&&(o=n)):l>p&&(l=p,o=n)}}return o&&l<0&&(o=-1),{minDis:l,index:o}},SuperMap.Plot.PlottingUtil.findPointInLine=function(t,e,l){if(t===e||Math.abs(l)<1e-18)return t;var o=e.x-t.x,n=e.y-t.y,i=l/Math.sqrt(o*o+n*n),r=t.x+o*i,a=t.y+n*i;return new SuperMap.Geometry.Point(r,a)},SuperMap.Plot.PlottingUtil.operateControlPoints=function(t){var e=t,l=e.length;if(3==l){var o=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrapezoidPoints(1,t[0],t[1],t[2],o),e.push(o)}if(l>4&&(e.splice(4,l-4),l=e.length),SuperMap.Plot.PlottingUtil.pointIsRightToLine(t[0],t[1],e[2])){n=e[0];e[0]=e[1],e[1]=n}if(!SuperMap.Plot.PlottingUtil.pointIsRightToVerticle(e[0],e[1],e[2])){var n=e[2];e[2]=e[3],e[3]=n}return e},SuperMap.Plot.PlottingUtil.pointIsRightToLine=function(t,e,l){return(e.x-t.x)*(l.y-t.y)-(l.x-t.x)*(e.y-t.y)<0},SuperMap.Plot.PlottingUtil.pointIsRightToVerticle=function(t,e,l){var o=new SuperMap.Geometry.Point(.5*(e.x+t.x),.5*(e.y+t.y)),n=new SuperMap.Geometry.Point(e.x-t.x,e.y-t.y),i=new SuperMap.Geometry.Point(l.x-o.x,l.y-o.y);return n.x*i.x+n.y*i.y>0},SuperMap.Plot.PlottingUtil.linePnt=function(t,e,l){var o=SuperMap.Plot.PlottingUtil.distance(t,e);if(0==o)return t;var n=l/o;return SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(n,t,e)},SuperMap.Plot.PlottingUtil.findPointOnLineByRatio=function(t,e,l){var o=new SuperMap.Geometry.Point(0,0);return o.x=e.x+(l.x-e.x)*t,o.y=e.y+(l.y-e.y)*t,o},SuperMap.Plot.PlottingUtil.rotateAngle=function(t,e,l){var o=e,n=Math.cos(o),i=Math.sin(o),r=l.x-t.x,a=l.y-t.y;return l.x=r*n-a*i+t.x,l.y=r*i+a*n+t.y,l},SuperMap.Plot.PlottingUtil.resize=function(t,e,l){return l.x=t.x+e*(l.x-t.x),l.y=t.y+e*(l.y-t.y),l},SuperMap.Plot.PlottingUtil.findPointInPolyLine=function(t,e){if(e<0||t.length<2)return{index:-1,pt:null};if(Math.abs(e)<1e-18)return{index:0,pt:t[0]};for(var l=0,o=0;o<t.length-1;o++)if((l+=SuperMap.Plot.PlottingUtil.distance(t[o],t[o+1]))>e||SuperMap.Plot.PlottingUtil.equalFuzzy(l,e)){var n=l-e,i=t[o+1],r=t[o],a=n/SuperMap.Plot.PlottingUtil.distance(i,r),p=new SuperMap.Geometry.Point(0,0);return p.x=i.x+(r.x-i.x)*a,p.y=i.y+(r.y-i.y)*a,{index:o,pt:p}}return{index:-1,pt:null}},SuperMap.Plot.PlottingUtil.polylineDistance=function(t){if(0===t.length)return 0;for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);return e},SuperMap.Plot.PlottingUtil.rotate=function(t,e,l,o){var n=o.x-t.x,i=o.y-t.y,r=n*e-i*l+t.x,a=n*l+i*e+t.y;return new SuperMap.Geometry.Point(r,a)},SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale=function(t,e,l){var o=e.x,n=e.y,i=l.x,r=l.y,a=Math.sqrt(1*(o-i)*(o-i)+1*(n-r)*(n-r)),p=0,u=0;return 0==a?(p=o,u=n):(p=o+(i-o)*t/a,u=n+(r-n)*t/a),new SuperMap.Geometry.Point(p,u)},SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale=function(t,e,l){var o=e.x,n=e.y,i=l.x,r=l.y,a=0,p=0,u=Math.sqrt(1*(o-i)*(o-i)+1*(n-r)*(n-r));return 0===u?(a=o,p=n):(a=o+(o-i)*t/u,p=n+(n-r)*t/u),new SuperMap.Geometry.Point(a,p)},SuperMap.Plot.PlottingUtil.getSidePointsOfLine=function(t,e,l){var o=e.x,n=e.y,i=l.x,r=l.y,a=Math.sqrt(1*(o-i)*(o-i)+1*(n-r)*(n-r)),p=0,u=0;0==a?(u=0,p=t):(p=t*(o-i)/a,u=t*(n-r)/a);var s=-u+i,P=+p+r,c=+u+i,S=-p+r;return{pntLeft:new SuperMap.Geometry.Point(c,S),pntRight:new SuperMap.Geometry.Point(s,P)}},SuperMap.Plot.PlottingUtil.pointProjectToSegment=function(t,e,l){var o,n,i=0,r=0,a=0,p=1;if(r=e.x!==t.x?(e.y-t.y)/(e.x-t.x):1.7976931348623157e308,a=l.x!==t.x?(l.y-t.y)/(l.x-t.x):1.7976931348623157e308,i=l.y!==e.y?(l.x-e.x)/(e.y-l.y):1.7976931348623157e308,o=e.x>=t.x&&e.y>=t.y?1:e.x<t.x&&e.y>t.y?2:e.x<=t.x&&e.y<=t.y?3:4,n=l.x>t.x&&l.y>t.y?1:l.x<t.x&&l.y>t.y?2:l.x<t.x&&l.y<t.y?3:4,o==n)(r<i&&a<i||r>i&&a>i)&&(p=0);else switch(o){case 1:(4==n&&r<i||2==n&&r>i)&&(p=0);break;case 2:(1==n&&r<i||3==n&&r>i)&&(p=0);break;case 3:(2==n&&r<i||4==n&&r>i)&&(p=0);break;case 4:(3==n&&r<i||1==n&&r>i)&&(p=0)}var u=new SuperMap.Geometry.Point(0,0);return SuperMap.Plot.PlottingUtil.equalFuzzy(i-1.7976931348623157e308,0)?(u.x=t.x,u.y=e.y):SuperMap.Plot.PlottingUtil.equalFuzzy(i,0)?(u.x=e.x,u.y=t.y):(u.x=(i*(e.y-t.y)+i*i*t.x+e.x)/(i*i+1),u.y=t.y+i*(u.x-t.x)),{isOnline:1===p,projectPoint:u}},SuperMap.Plot.PlottingUtil.coordinateTrans=function(t,e,l){var o=SuperMap.Plot.PlottingUtil.distance(new SuperMap.Geometry.Point(0,0),e),n=SuperMap.Plot.PlottingUtil.radian(new SuperMap.Geometry.Point(0,0),e)+l*Math.PI/180,i=o*Math.cos(n)+t.x,r=o*Math.sin(n)+t.y;return new SuperMap.Geometry.Point(i,r)},SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen=function(t,e,l){var o,n,i=(l.x-e.x)*(l.x-e.x)+(l.y-e.y)*(l.y-e.y),r=Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)),a=Math.sqrt((t.x-l.x)*(t.x-l.x)+(t.y-l.y)*(t.y-l.y));if(0==a||0==r)o=0,n=0;else if(0==i)o=r,n=0;else{var p=(r*r+a*a-i)/2/r/a,u=0;p>=1?(p=1,u=0):u=Math.sqrt(1-p*p),o=a*p,n=a*u}return{dLen1:o,dLen2:n}},SuperMap.Plot.PlottingUtil.paraLine=function(t,e,l){var o=[];if(2>t.length)return o;if(l){p=t[1].clone();p=SuperMap.Plot.PlottingUtil.rotateAngle(t[0],Math.PI/2,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[0],p,e));for(u=1;u<t.length-1;u++)if(!SuperMap.Plot.PlottingUtil.equalFuzzy(t[u].x,t[u+1].x)||!SuperMap.Plot.PlottingUtil.equalFuzzy(t[u].y,t[u+1].y)){for(var n=SuperMap.Plot.PlottingUtil.radian(t[u],t[u+1]),i=(s=SuperMap.Plot.PlottingUtil.radian(t[u],t[u-1]))-n;i<0;)i+=2*Math.PI;var r,a=i/2;r=a>Math.PI/2?a-Math.PI/2:Math.PI/2-a;S=e/Math.cos(r);p=t[u+1].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(t[u],a,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[u],p,S))}p=t[t.length-2].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(t[t.length-1],-1*Math.PI/2,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[t.length-1],p,e))}else{var p=t[1].clone();p=SuperMap.Plot.PlottingUtil.rotateAngle(t[0],-Math.PI/2,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[0],p,e));for(var u=1;u<t.length-1;u++)if(!SuperMap.Plot.PlottingUtil.equalFuzzy(t[u].x,t[u+1].x)||!SuperMap.Plot.PlottingUtil.equalFuzzy(t[u].y,t[u+1].y)){for(var n=SuperMap.Plot.PlottingUtil.radian(t[u],t[u+1]),s=SuperMap.Plot.PlottingUtil.radian(t[u],t[u-1]),i=s-n;i<0;)i+=2*Math.PI;var P,c=Math.PI-i/2;P=c>Math.PI/2?c-Math.PI/2:Math.PI/2-c;var S=e/Math.cos(P);p=t[u-1].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(t[u],c,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[u],p,S))}p=t[t.length-2].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(t[t.length-1],Math.PI/2,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[t.length-1],p,e))}return o},SuperMap.Plot.PlottingUtil.circlePoint=function(t,e,l,o){o*=Math.PI/180;var n=t.x+e*Math.cos(o),i=t.y+l*Math.sin(o);return new SuperMap.Geometry.Point(n,i)},SuperMap.Plot.PlottingUtil.getPolygonCenterPt=function(t){if(!t||null===t||0===t.length)return null;for(var e=0,l=0,o=0;o<t.length;o++)e+=t[o].x,l+=t[o].y;return new SuperMap.Geometry.Point(e/t.length,l/t.length)},SuperMap.Plot.PlottingUtil.ptIsInPolygon=function(t,e){if(!t||null===t||0===t.length)return!1;for(var l=0,o=t.length,n=0;n<o;n++){var i=t[n],r=t[(n+1)%o];if(i.y!==r.y){var a=i.y<r.y?i.y:r.y,p=i.y>r.y?i.y:r.y;e.y<a||e.y>p||(e.y-i.y)*(r.x-i.x)/(r.y-i.y)+i.x>e.x&&l++}}return l%2==1},SuperMap.Plot.PlottingUtil.projectPtOnPolyLine=function(t,e){if(2>e.length)return{index:-1,pt:null};for(var l=0;l<e.length-1;l++){var o=SuperMap.Plot.PlottingUtil.pointProjectToSegment(t,e[l],e[l+1]);if(o.isOnline)return{index:l,pt:o.projectPoint}}return{index:-1,pt:null}},SuperMap.Plot.PlottingUtil.isPloyClockwise=function(t){var e=SuperMap.Plot.PlottingUtil.clonePoints(t),l=e.length;if(!(l<3)){var o=e[0].y*(e[l-1].x-e[1].x);e.push(e[0].clone());for(var n=1;n<l;++n)o+=e[n].y*(e[n-1].x-e[n+1].x);return o>0?0:1}},SuperMap.Plot.PlottingUtil.isSamePt=function(t,e){return!(!SuperMap.Plot.PlottingUtil.equalFuzzy(t.x,e.x)||!SuperMap.Plot.PlottingUtil.equalFuzzy(t.y,e.y))},SuperMap.Plot.PlottingUtil.getPtsIndexByDistance=function(t,e){var l=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,t);return{index:l.index,pts:l.pt,bfind:-1!==l.index}},SuperMap.Plot.PlottingUtil.ptInBounds=function(t,e){return t.x>e.left&&t.x<e.right&&t.y<e.top&&t.y>e.bottom},SuperMap.Plot.PlottingUtil.InnerAngle=function(t,e,l){if(t==e||t==l)return 0;var o=SuperMap.Plot.PlottingUtil.distance(t,e),n=SuperMap.Plot.PlottingUtil.distance(t,l),i=SuperMap.Plot.PlottingUtil.distance(e,l),r=(o*o+n*n-i*i)/(2*o*n);return r>1&&SuperMap.Plot.PlottingUtil.equalFuzzy(r,1)?r=1:r<1&&SuperMap.Plot.PlottingUtil.equalFuzzy(r,-1)&&(r=-1),Math.acos(r)},SuperMap.Plot.PlottingUtil.plumbLineLen=function(t,e,l){return SuperMap.Plot.PlottingUtil.distance(t,e)*Math.sin(SuperMap.Plot.PlottingUtil.InnerAngle(e,t,l))},SuperMap.Plot.PlottingUtil.paraPolygon=function(t,e,l){var o=[],n=SuperMap.Plot.PlottingUtil.clonePoints(t),i=n.length;if(i<2)return o;p=new SuperMap.Geometry.Point(0,0);if(l){if(i<3)p=n[1].clone(),SuperMap.Plot.PlottingUtil.rotateAngle(n[0],Math.PI,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[0],p,e));else{for(var r=SuperMap.Plot.PlottingUtil.radian(n[0],n[1]),a=(s=SuperMap.Plot.PlottingUtil.radian(n[0],n[n.length-1]))-r;a<0;)a+=2*Math.PI;P=(c=a/2)>Math.PI/2?c-Math.PI/2:Math.PI/2-c;S=e/Math.cos(P);p=n[1].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(n[0],c,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[0],p,S))}for(u=1;u<i-1;u++){for(var r=SuperMap.Plot.PlottingUtil.radian(n[u],n[u+1]),a=(s=SuperMap.Plot.PlottingUtil.radian(n[u],n[u-1]))-r;a<0;)a+=2*Math.PI;P=(c=a/2)>Math.PI/2?c-Math.PI/2:Math.PI/2-c;S=e/Math.cos(P);p=n[u+1].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(n[u],c,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[u],p,S))}if(i<3)p=n[i-2].clone(),SuperMap.Plot.PlottingUtil.rotateAngle(n[i-1],0,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[i-1],p,e));else{for(var r=SuperMap.Plot.PlottingUtil.radian(n[i-1],n[0]),a=(s=SuperMap.Plot.PlottingUtil.radian(n[i-1],n[i-2]))-r;a<0;)a+=2*Math.PI;P=(c=a/2)>Math.PI/2?c-Math.PI/2:Math.PI/2-c;S=e/Math.cos(P);p=n[0].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(n[i-1],c,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[i-1],p,S))}}else{if(i<3){var p=n[1].clone();SuperMap.Plot.PlottingUtil.rotateAngle(n[0],0,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[0],p,e))}else{for(var r=SuperMap.Plot.PlottingUtil.radian(n[0],n[1]),a=(s=SuperMap.Plot.PlottingUtil.radian(n[0],n[i-1]))-r;a<0;)a+=2*Math.PI;P=(c=Math.PI-a/2)>Math.PI/2?c-Math.PI/2:Math.PI/2-c;S=e/Math.cos(P);p=n[i-1].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(n[0],c,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[0],p,S))}for(var u=1;u<i-1;u++){for(var r=SuperMap.Plot.PlottingUtil.radian(n[u],n[u+1]),a=(s=SuperMap.Plot.PlottingUtil.radian(n[u],n[u-1]))-r;a<0;)a+=2*Math.PI;P=(c=Math.PI-a/2)>Math.PI/2?c-Math.PI/2:Math.PI/2-c;S=e/Math.cos(P);p=n[u-1].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(n[u],c,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[u],p,S))}if(i<3)p=n[i-2].clone(),SuperMap.Plot.PlottingUtil.rotateAngle(n[i-1],Math.PI,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[i-1],p,e));else{for(var r=SuperMap.Plot.PlottingUtil.radian(n[i-1],n[0]),s=SuperMap.Plot.PlottingUtil.radian(n[i-1],n[i-2]),a=s-r;a<0;)a+=2*Math.PI;var P,c=Math.PI-a/2;P=c>Math.PI/2?c-Math.PI/2:Math.PI/2-c;var S=e/Math.cos(P);p=n[i-2].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(n[i-1],c,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[i-1],p,S))}}return o},SuperMap.Plot.PlottingUtil.getOutRectangleDis=function(t){if(2>t.length)return 0;for(var e=t[0].x,l=t[0].x,o=t[0].y,n=t[0].y,i=1;i<t.length;i++)e<t[i].x&&(e=t[i].x),l>t[i].x&&(l=t[i].x),o<t[i].y&&(o=t[i].y),n>t[i].y&&(n=t[i].y);return SuperMap.Plot.PlottingUtil.distance(new SuperMap.Geometry.Point(e,o),new SuperMap.Geometry.Point(l,n))},SuperMap.Plot.PlottingUtil.clonePoints=function(t){var e=[];if(void 0===t||null===t)return e;if(SuperMap.Util.isArray(t)||(t=[t]),t&&null!==t)for(var l=0;l<t.length;l++)void 0!==t[l]&&null!==t[l]&&e.push(t[l].clone());return e}}]);

/***/ }),
/* 3 */
/***/ (function(module, exports) {

/*!
 * 
 *     iclient9-plot-leaflet.(http://iclient.supermapol.com)
 *     Copyright© 2000-2017 SuperMap Software Co. Ltd
 *     license: undefined
 *     version: v9.1.0
 * 
 */
!function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=139)}([function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),a=(o(i(11)),o(i(12)),function(){function t(e){n(this,t),this.RTOD=57.29577951308232,this.DTOR=.017453292519943295,this.maxEditPts=0,this.minEditPts=0,this.libID=null,this.code=null,this.symbolType=null,this.symbolName=null,this.isEdit=!1,this.controlPoints=null,this.scalePoints=null,this.scaleValues=null,this.subSymbols=null,this.style=null,this.subSymbolDefaultPixelSize=30,this.map=null,this.graphicObject2D=null,this.components=[],e=e||{},this.controlPoints=[],this.scalePoints=[],this.scaleValues=[],this.subSymbols=[],this.components=[],this.textContent="",this.style=null,SuperMap.Util.extend(this,e),0===this.libID&&null===this.symbolType?this.symbolType=this.code:null===this.symbolType&&(this.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL),null===this.subSymbolScaleValue&&(this.subSymbolScaleValue=.1),0!==this.minEditPts&&0!==this.maxEditPts||this.setMinAndMaxEditPts()}return s(t,[{key:"getScaleValues",value:function(){return this.graphicObject2D?this.graphicObject2D.scaleValues:this.scaleValues}},{key:"setScaleValues",value:function(t){this.graphicObject2D?this.graphicObject2D.scaleValues=t:this.scaleValues=t}},{key:"clearScaleValues",value:function(){this.graphicObject2D?this.graphicObject2D.scaleValues=[]:this.scaleValues=[]}},{key:"getSubSymbols",value:function(){return this.graphicObject2D?this.graphicObject2D.subSymbols:this.subSymbols}},{key:"setSubSymbols",value:function(t){this.graphicObject2D?this.graphicObject2D.subSymbols=t:this.subSymbols=t}},{key:"getControlPoints",value:function(){if(this.graphicObject2D&&!this.equalControlPoints()){this.controlPoints=[];for(var t=0;t<this.graphicObject2D.getLatLngs().length;t++)this.controlPoints.push(new SuperMap.Geometry.Point(this.graphicObject2D.getLatLngs()[t].lng,this.graphicObject2D.getLatLngs()[t].lat))}return this.controlPoints}},{key:"setControlPoints",value:function(t){if(this.graphicObject2D){for(var e=[],i=0;i<t.length;i++)e.push(L.latLng(t[i].y,t[i].x));this.graphicObject2D._latLngs=e}else this.controlPoints=t}},{key:"clearControlPoints",value:function(){this.graphicObject2D?this.graphicObject2D._latLngs=[]:this.controlPoints=[]}},{key:"addControlPoints",value:function(t,e){this.graphicObject2D?e<this.graphicObject2D.getLatLngs().length?(this.graphicObject2D._latLngs[e].lat=t.y,this.graphicObject2D._latLngs[e].lng=t.x):this.graphicObject2D._latLngs.push(L.latLng(t.y,t.x)):e<this.controlPoints.length?(this.controlPoints[e].y=t.y,this.controlPoints[e].x=t.x):this.controlPoints.push(t)}},{key:"equalControlPoints",value:function(){if(this.graphicObject2D){if(this.graphicObject2D.getLatLngs().length!==this.controlPoints.length)return!1;for(var t=0;t<this.controlPoints.length;t++)if(this.graphicObject2D.getLatLngs()[t].lat!==this.controlPoints[t].y||this.graphicObject2D.getLatLngs()[t].lng!==this.controlPoints[t].x)return!1;return!0}return!0}},{key:"getIsEdit",value:function(){return this.graphicObject2D?this.graphicObject2D.isEdit:this.isEdit}},{key:"getStyle",value:function(){return this.graphicObject2D?this.graphicObject2D.style:this.style}},{key:"addScalePoint",value:function(t,e){if(t&&null!==t){void 0!==e&&null!==e||(e=this.getScalePoints().length<0?0:this.getScalePoints().length);var i=new SuperMap.Geometry.Point(t.x,t.y);i.isScalePoint=!0,i.tag=e,this.graphicObject2D?this.graphicObject2D.scalePoints.push(i):this.scalePoints.push(i)}}},{key:"clearScalePoints",value:function(){this.graphicObject2D?this.graphicObject2D.scalePoints=[]:this.scalePoints=[]}},{key:"getScalePoints",value:function(){return this.graphicObject2D?this.graphicObject2D.scalePoints:this.scalePoints}},{key:"setScalePoints",value:function(t){return this.graphicObject2D?this.graphicObject2D.scalePoints=t:this.scalePoints=t}}]),s(t,[{key:"destroy",value:function(){this.minEditPts=null,this.maxEditPts=null,this.controlPoints.length=0,this.controlPoints=null,this.scalePoints.length=0,this.scalePoints=null,this.scaleValues.length=0,this.scaleValues=null,this.subSymbols.length=0,this.subSymbols=null,this.subSymbolSize=0,this.map=null,this.symbolType=null,this.symbolName=null,this.textContent=null,this.components=[],this.radius=null,this.islocationCircle=!1,this.tipPoint=null,this.roundBox=null,this.textBoxType=null,this.style=null}},{key:"clearComponents",value:function(){if(this.components=[],this.clearScalePoints(),this.maxEditPts<this.controlPoints.length&&this.symbolType!==SuperMap.Plot.SymbolType.ELLIPSESYMBOL){var t=this.controlPoints.shift(),e=this.controlPoints.pop();this.controlPoints=[],this.controlPoints.push(t,e)}}},{key:"calculateParts",value:function(){if(this.clearComponents(),this.controlPoints=SuperMap.Plot.PlottingUtil.clearSamePts(this.controlPoints),this.controlPoints.length>=this.minEditPts){var t={textContent:this.textContent,type:this.symbolType,surroundLineFlag:!1,positionPoints:this.controlPoints,style:{}};if(t.type===SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL&&t.positionPoints.push(t.positionPoints[0]),this.symbolType===SuperMap.Plot.SymbolType.PARALLELLINE){if(this.controlPoints&&this.controlPoints.length>=3){var e=!1;void 0!==this.controlPoints[0].z&&(e=!0);var i=SuperMap.Plot.PlottingUtil.distance(this.controlPoints[0],this.controlPoints[1]);SuperMap.Plot.PlottingUtil.isRight(this.controlPoints[0],this.controlPoints[1],this.controlPoints[2])&&(i=-i);for(var o=[],n=1;n<this.controlPoints.length;n++)o.push(this.controlPoints[n].clone());var s=SuperMap.Plot.PlottingUtil.parallel(o,i);if(this.controlPoints[0].x=s[0].x,this.controlPoints[0].y=s[0].y,e)for(var a=0;a<o.length;a++)s[a].z=o[a].z;this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,o),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s)}}else this.components.push(t)}else this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine()}},{key:"setMinAndMaxEditPts",value:function(){if(0===this.libID)switch(this.code){case SuperMap.Plot.SymbolType.TEXTSYMBOL:this.minEditPts=1,this.maxEditPts=1;break;case SuperMap.Plot.SymbolType.CIRCLESYMBOL:case SuperMap.Plot.SymbolType.RECTANGLESYMBOL:this.minEditPts=2,this.maxEditPts=2;break;case SuperMap.Plot.SymbolType.ARCSYMBOL:case SuperMap.Plot.SymbolType.CHORDSYMBOL:case SuperMap.Plot.SymbolType.PIESYMBOL:case SuperMap.Plot.SymbolType.ELLIPSESYMBOL:case SuperMap.Plot.SymbolType.PARALLELOGRAM:this.minEditPts=3,this.maxEditPts=3;break;case SuperMap.Plot.SymbolType.POLYLINESYMBOL:case SuperMap.Plot.SymbolType.POLYBEZIERSYMBOL:this.minEditPts=2,this.maxEditPts=9999;break;case SuperMap.Plot.SymbolType.PARALLELLINE:case SuperMap.Plot.SymbolType.POLYBEZIERCLOSESYMBOL:case SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL:this.minEditPts=3,this.maxEditPts=9999;break;case SuperMap.Plot.SymbolType.KIDNEY:this.minEditPts=2,this.maxEditPts=3}}},{key:"addCell",value:function(t,e,i,o){if(t&&e){var n={};n.type=t,n.textContent=o,n.positionPoints=e,n.style=i&&null!==i?i:{surroundLineFlag:!1},this.components.push(n)}}},{key:"getDefaultSubSymbolSize",value:function(){var t=this.getLonLatDistanceFromPixel(this.subSymbolDefaultPixelSize);if(0===t){if(0!==this.subSymbolSize)return this.subSymbolSize;for(var e=0,i=0;i<this.controlPoints.length-1;i++)e+=SuperMap.Plot.PlottingUtil.distance(this.controlPoints[i],this.controlPoints[i+1]);t=.3*e}return t}},{key:"getLonLatDistanceFromPixel",value:function(t){if(null===this.map)return 0;var e,i;if(L.Map&&this.map instanceof L.Map){var o=this.map.layerPointToLatLng(L.point(0,0)),n=this.map.layerPointToLatLng(L.point(t,0));e=new SuperMap.Geometry.Point(o.lng,o.lat),i=new SuperMap.Geometry.Point(n.lng,n.lat)}return SuperMap.Plot.PlottingUtil.distance(e,i)}},{key:"getTextBounds",value:function(t,e){" "===e&&(e="_");var i=document.createElement("span");document.body.appendChild(i),i.style.width="auto",i.style.height="auto",t.fontSize&&(i.style.fontSize=new String(t.fontSize)+"px"),t.fontFamily&&(i.style.fontFamily=t.fontFamily),t.fontWeight&&(i.style.fontWeight=t.fontWeight),i.style.position="absolute",i.style.visibility="hidden",i.innerHTML=e;var o=new SuperMap.Bounds(i.clientLeft,i.clientTop+i.clientHeight-6,i.clientLeft+i.clientWidth,i.clientTop+4),n=new SuperMap.Bounds(0,0,0,0);if(L.Map&&this.map instanceof L.Map){var s=this.map.layerPointToLatLng(L.point(o.left,o.top)),a=this.map.layerPointToLatLng(L.point(o.right,o.bottom));n.left+=s.lng,n.top+=a.lat,n.right+=a.lng,n.bottom+=s.lat,n.add(-s.lng,-s.lat)}return document.body.removeChild(i),n}},{key:"getCircleLonLat",value:function(t,e){if(null===this.map)return L.latLng(0,0);if(L.Map&&this.map instanceof L.Map){var i=this.map.latLngToLayerPoint(L.latLng(t.y,t.x));return i.x+=e,this.map.layerPointToLatLng(L.point(i.x,i.y)).lng-t.x}}},{key:"freeCurveBoundsPixelToLatLng",value:function(t){if(null===this.map)return L.latLng(0,0);if(L.Map&&this.map instanceof L.Map){var e=this.map.layerPointToLatLng(L.point(t.left,t.top)),i=this.map.layerPointToLatLng(L.point(t.right,t.bottom));return new SuperMap.Bounds(e.lng,i.lat,i.lng,e.lat)}}},{key:"calAssistantLine",value:function(){var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);this.symbolType===SuperMap.Plot.SymbolType.ANNOFRAMESYMBOL&&(t.splice(1,0,new SuperMap.Plot.Point(this.controlPoints[1].x,this.controlPoints[0].y)),t.push(new SuperMap.Plot.Point(this.controlPoints[0].x,this.controlPoints[1].y)),t.push(new SuperMap.Plot.Point(this.controlPoints[0].x,this.controlPoints[0].y)));var e={type:24,surroundLineFlag:!1,positionPoints:t,style:{color:"#0000ff",opacity:1,weight:1,dashArray:"5, 5",strokeColor:"#0000ff",strokeOpacity:1,strokeWidth:2,strokeDashstyle:"dash",lineColorLimit:!0,lineTypeLimit:!0,lineWidthLimit:!0,surroundLineFlag:!1}};this.components.push(e)}},{key:"getSubSymbolScaleValue",value:function(t){void 0===t&&(t=.3);var e=this.getControlPoints();if(!this.getIsEdit()||this.constantSize){for(var i=0,o=0;o<e.length-1;o++)i+=SuperMap.Plot.PlottingUtil.distance(e[o],e[o+1]);var n=this.getDefaultSubSymbolSize();this.subSymbolScaleValue=n/i,this.constantSize||(this.subSymbolScaleValue>t||this.subSymbolScaleValue<=0)&&(this.subSymbolScaleValue=t),this.subSymbolScaleValue<=0&&(this.subSymbolScaleValue=t)}return this.subSymbolScaleValue}},{key:"modifyPoint",value:function(t,e){if(this.controlPoints=this.getControlPoints(),0===this.libID&&31===this.code){if(0===t)return this.controlPoints[0].x=(this.controlPoints[1].x+this.controlPoints[3].x)/2,void(this.controlPoints[0].y=(this.controlPoints[1].y+this.controlPoints[3].y)/2);var i=-1;0===(i=(t+2)%4)&&(i=4);var o=SuperMap.Plot.PlottingUtil.distance(this.controlPoints[0],this.controlPoints[t]),n=SuperMap.Plot.PlottingUtil.findPointInLine(this.controlPoints[0],this.controlPoints[i],o),s=new SuperMap.Geometry.Point(2*this.controlPoints[0].x-n.x,2*this.controlPoints[0].y-n.y);if(L.Map&&this.map instanceof L.Map)var a=this.map.latLngToLayerPoint(L.latLng(n.y,n.x)),l=this.map.latLngToLayerPoint(L.latLng(s.y,s.x));var r=!1;(SuperMap.Plot.PlottingUtil.equalFuzzy(a.x-l.x,0)||SuperMap.Plot.PlottingUtil.equalFuzzy(a.y-l.y,0))&&(r=!0),r?(this.addControlPoints(s,i),this.addControlPoints(n,t)):(this.addControlPoints(s,t),this.addControlPoints(n,i))}this.calculateParts()}},{key:"computeSubSymbol",value:function(t,e,i,o,n,s){if(null===t.symbolData||null===t.symbolData.innerCells)return null;void 0===n&&(n=0),void 0===s&&(s=0);for(var a=SuperMap.Plot.AnalysisSymbol.analysisSymbolCells(t.symbolData),l=0,r=0,u=0,p=0,h=0;h<a.length;h++){var c=SuperMap.Plot.Primitives.getSpatialData(a[h].type,a[h].positionPoints,a[h].textContent,0,a[h].isCalculate);for(m=0,b=c.length;m<b;m++)l<c[m].x&&(l=c[m].x),r<c[m].y&&(r=c[m].y),u>c[m].x&&(u=c[m].x),p>c[m].y&&(p=c[m].y)}var y=new SuperMap.Geometry.Point(l,r),g=new SuperMap.Geometry.Point(u,p),d=(y.y-g.y)/i,f=(y.x-g.x)/i,S=f>d?f:d,P=new SuperMap.Geometry.Point(.5*(y.x+g.x),.5*(y.y+g.y));P.x+=n*(y.x-g.x),P.y+=s*(y.y-g.y);for(var m=0,b=a.length;m<b;m++){for(var L=0,M=a[m].positionPoints.length;L<M;L++)a[m].positionPoints[L].x-=P.x,a[m].positionPoints[L].y-=P.y,a[m].positionPoints[L].x/=S,a[m].positionPoints[L].y/=S,SuperMap.Plot.PlottingUtil.rotateAngle(new SuperMap.Geometry.Point(0,0),o*Math.PI/180,a[m].positionPoints[L]),a[m].positionPoints[L].x+=e.x,a[m].positionPoints[L].y+=e.y;a[m].type===SuperMap.Plot.SymbolType.TEXTSYMBOL&&(a[m].style.fontSize=Math.ceil(a[m].style.fontSize/2)),c.style=a[m].style,a[m].isCalculate=!1,this.components.push(a[m])}return a}},{key:"addArrow",value:function(t){if(t.length<2)return t;var e=0,i=SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints)*(e=(this.getIsEdit(),.5*this.getSubSymbolScaleValue())),o=t[t.length-1];if(t.length>2){for(var n=-1,s=t.length-2;s>=0;s--)if(i<SuperMap.Plot.PlottingUtil.distance(o,t[s])){n=s;break}t.splice(n+1,t.length-n),t.push(o)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var a=t[t.length-2],l=t[t.length-1],r=i;if(void 0===a)return t;if(!(SuperMap.Plot.PlottingUtil.distance(a,l)<i)){var u=SuperMap.Plot.PlottingUtil.radian(a,l)*this.RTOD,p=SuperMap.Plot.PlottingUtil.circlePoint(l,r,r,u+157.5),h=SuperMap.Plot.PlottingUtil.circlePoint(l,r,r,u+202.5),c={surroundLineFlag:!1,fillLimit:!0,fillColor:this.getStyle().color,lineTypeLimit:!0,fill:!0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[p,t[t.length-1],h],c,!0)}}},{key:"calculateforHead",value:function(t,e,i,o){for(var n=0,s=0;s<t.length-1;s++)n+=SuperMap.Plot.PlottingUtil.distance(t[s],t[s+1]);for(var a=n*o,l=SuperMap.Plot.PlottingUtil.clonePoints(e.arrowBodyPts);SuperMap.Plot.PlottingUtil.distance(i[0],i[1])<a&&!(l.length<3);){if(!(SuperMap.Plot.PlottingUtil.distance(i[0],l[l.length-3])<a)){var r=SuperMap.Plot.PlottingUtil.projectPoint(i[0],l[l.length-2],l[l.length-3]),u=SuperMap.Plot.PlottingUtil.distance(i[0],r),p=SuperMap.Plot.PlottingUtil.findPointInLine(r,l[l.length-3],Math.sqrt(a*a-u*u));l.splice(l.length-2,1,p),i.splice(1,1,p);break}i.splice(1,1),l.splice(l.length-2,1),i.push(l[l.length-2])}return l}},{key:"ComputeZValue",value:function(t,e,i){var o=SuperMap.Plot.PlottingUtil.pointProjectToSegment(t,e,i),n=new SuperMap.Geometry.Point(o.projectPoint.x,o.projectPoint.y),s=SuperMap.Plot.PlottingUtil.distance(e,i),a=SuperMap.Plot.PlottingUtil.distance(e,t),l=SuperMap.Plot.PlottingUtil.distance(i,t);if(!o.isOnline){if(a>=s)return i.z;if(l>=s)return e.z}return n.x!=e.x&&e.x!=i.x?e.z+(n.x-e.x)/(e.x-i.x)*(e.z-i.z):n.y!=e.y&&e.y!=i.y?e.z+(n.y-e.y)/(e.y-i.y)*(e.z-i.z):0==(a=SuperMap.Plot.PlottingUtil.distance(e,n))?e.z:e.z-(e.z-i.z)*(a/s)}},{key:"ComputeBeizerZValueByDis",value:function(t,e,i){if(t.length<2)return!1;for(var o=[],n=0;n<t.length;n++)o.push({x:t[n].x,y:t[n].y});var s=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(0==s)return!1;var a=SuperMap.Plot.PlottingUtil.polylineDistance(e),l=[];l.push(o[0]);for(var r=-1,u=0,p=e[0],n=1;n<o.length;n++){l.push(o[n]);var h=SuperMap.Plot.PlottingUtil.polylineDistance(l)/s,c=a*h,y=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(c,e),g=y.index,d=y.pts;if(y.bfind){for(var f=t[n-1].z,S=t[n].z,P=a*(h-u),m=0,b=++r;b<=g;b++){var L=f+(S-f)*((m+=b==r?SuperMap.Plot.PlottingUtil.distance(p,e[b]):SuperMap.Plot.PlottingUtil.distance(e[b-1],e[b]))/P);i.push({x:e[b].x,y:e[b].y,z:L})}r=g}u=h,p=d}for(n=r+1;n<e.length;n++)i.push({x:e[n].x,y:e[n].y,z:t[t.length-1].z});return!0}},{key:"ComputeHeight",value:function(t,e,i,o){if(i!=o)if(0==t.length);else if(1==t.length)e.push({x:t[0].x,y:t[0].y,z:i});else if(2==t.length)e.push({x:t[0].x,y:t[0].y,z:i}),e.push({x:t[1].x,y:t[1].y,z:o});else{var n=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(0!=n){var s=[];s.push(t[0]),e.push({x:t[0].x,y:t[0].y,z:i});for(l=1;l<t.length-1;l++){s.push(t[l]);var a=i+(o-i)*SuperMap.Plot.PlottingUtil.polylineDistance(s)/n;e.push({x:t[l].x,y:t[l].y,z:a})}e.push({x:t[t.length-1].x,y:t[t.length-1].y,z:o})}else for(l=0;l<t.length;l++)e.push({x:t[l].x,y:t[l].y,z:i})}else for(var l=0;l<t.length;l++)e.push({x:t[l].x,y:t[l].y,z:i})}}]),t}());e.default=a,SuperMap.Geometry.AlgoSymbol=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.algoSymbol=e.AlgoSymbol=void 0;var o=i(2),n=i(8),s=e.AlgoSymbol=o.GraphicObject.extend({superMapAlgoSymbol:null,scalePoints:null,scaleValues:null,subSymbolScaleValue:null,constantSize:!1,arrowHeadType:0,arrowBodyType:0,arrowTailType:0,initialize:function(t,e,i,n){this.scalePoints=[],this.scaleValues=[],this.symbolType=0===t?e:SuperMap.Plot.SymbolType.ALGOSYMBOL,o.GraphicObject.prototype.initialize.call(this,t,e,i,n),this._setDefaultOptions(n),this._setBasicSymbolName(),this.superMapAlgoSymbol=SuperMap.AlgoSymbolFactory.createAlgo(n),this.superMapAlgoSymbol&&(this.minEditPts=this.superMapAlgoSymbol.minEditPts,this.maxEditPts=this.superMapAlgoSymbol.maxEditPts,this.subSymbols=this.superMapAlgoSymbol.subSymbols,this.scaleValues=this.superMapAlgoSymbol.scaleValues,this.subSymbolScaleValue=this.superMapAlgoSymbol.subSymbolScaleValue,this.superMapAlgoSymbol.style&&(this.style=this.superMapAlgoSymbol.style))},onAdd:function(t){this.superMapAlgoSymbol&&(this.superMapAlgoSymbol.map=t._map),o.GraphicObject.prototype.onAdd.call(this,t)},getArrowHeadType:function(){return this.arrowHeadType},setArrowHeadType:function(t){1016===this.code&&this.arrowHeadType!==t&&(this.arrowHeadType=t,this.redraw())},getArrowTailType:function(){return this.arrowTailType},setArrowTailType:function(t){1016===this.code&&this.arrowTailType!==t&&(this.arrowTailType=t,this.redraw())},getArrowBodyType:function(){return this.arrowBodyType},setArrowBodyType:function(t){1016===this.code&&this.arrowBodyType!==t&&(this.arrowBodyType=t,this.redraw())},setRotate:function(t){this.dRotate=t,0!==this.textContent.length&&(void 0===this.style.labelRotation?this.style.labelRotation=-t:this.style.labelRotation+=-t),null===this.anchorPoint&&(this.anchorPoint=this.getBounds().getCenter()),this._rotate(t,this.anchorPoint),this.symbolType===SuperMap.Plot.SymbolType.CONCENTRICCIRCLE&&this.superMapAlgoSymbol&&(this.superMapAlgoSymbol.startAngle+=t,this.superMapAlgoSymbol.endAngle+=t);for(var e=0,i=this.avoidRegions.length;e<i;e++)L.Util.rotateLatLngs(this.avoidRegions[e].getLatLngs(),this.anchorPoint,t)},getScaleByMap:function(){return this.scaleByMap},setScaleByMap:function(t){this.scaleByMap=t},setSurroundLineType:function(t){this.surroundLineType=t,this.redraw()},setSubSymbol:function(t,e,i){if(null!==i&&void 0!==i||(i=this.libID),e<this.subSymbols.length)this.subSymbols[e].libID=i,this.subSymbols[e].code=t;else{if(this.subSymbols.length!==e)return;this.subSymbols.push(new SuperMap.Plot.SubSymbol(i,t))}if(this.superMapAlgoSymbol){var o=new SuperMap.GetSymbolInfoParameters;o.libID=this.subSymbols[e].libID,o.code=this.subSymbols[e].code,L.supermap.symbolInfoService(this.serverUrl).getSymbolInfo(o,function(t){this.subSymbols[e].symbolData=t.result,this.redraw()},this)}else{var n=new SuperMap.GetSymbolInfoParameters;n.libID=this.libID,n.code=this.code,n.inputPoints=L.Util.latLngsToSuperMapPoints(this.getLatLngs()),n.subSymbols=this.subSymbols,L.supermap.symbolInfoService(this.serverUrl).getSymbolInfo(n,function(t){this.symbolData.innerCells=t.result.innerCells,this.redraw()},this)}},move:function(t,e){if(o.GraphicObject.prototype._move.call(this,t,e),0!==this.scalePoints.length&&L.Util.moveLatLngs(this.scalePoints,t,e),null!==this.symbolData&&this.symbolData.innerCells)for(var i=0;i<this.symbolData.innerCells.length;i++)for(var n=0;n<this.symbolData.innerCells[i].positionPoints.length;n++)this.symbolData.innerCells[i].positionPoints[n].x+=e,this.symbolData.innerCells[i].positionPoints[n].y+=t;if(null!==this.symbolData&&this.symbolData.innerCells)for(s=0;s<this.symbolData.scalePoints.length;s++)this.symbolData.scalePoints[s].x+=e,this.symbolData.scalePoints[s].y+=t;for(var s=0,a=this.avoidRegions.length;s<a;s++)L.Util.moveLatLngs(this.avoidRegions[s].getLatLngs(),t,e);this._updateSymbolTexts()},_parseSymbolData:function(){if(o.GraphicObject.prototype._parseSymbolData.call(this),null!==this.symbolData){if(void 0!==this.symbolData.subSymbolScaleValue&&null!==this.symbolData.subSymbolScaleValue&&(this.subSymbolScaleValue=this.symbolData.subSymbolScaleValue),void 0!==this.symbolData.strokeWidth&&null!==this.symbolData.strokeWidth&&(this.strokeWidth=this.symbolData.strokeWidth),void 0!==this.symbolData.constantSize&&null!==this.symbolData.constantSize&&(this.constantSize=this.symbolData.constantSize),void 0!==this.symbolData.baseScale&&null!==this.symbolData.baseScale&&(this.baseScale=this.symbolData.baseScale),this.symbolData.scaleValues&&0!==this.symbolData.scaleValues.length){this.scaleValues=[];for(var t=0;t<this.symbolData.scaleValues.length;t++)this.scaleValues.push(this.symbolData.scaleValues[t])}this.symbolData.hasOwnProperty("arrowTailType")&&(this.arrowTailType=this.symbolData.arrowTailType),this.symbolData.hasOwnProperty("arrowBodyType")&&(this.arrowBodyType=this.symbolData.arrowBodyType),this.symbolData.hasOwnProperty("arrowHeadType")&&(this.arrowHeadType=this.symbolData.arrowHeadType)}},_setSymbolData:function(t){if(o.GraphicObject.prototype._setSymbolData.call(this,t),null!==this.symbolData&&this.superMapAlgoSymbol){if(this.symbolData.subSymbolScaleValue=this.subSymbolScaleValue,this.symbolData.baseScale=this.baseScale,this.symbolData.strokeWidth=this.strokeWidth,this.symbolData.constantSize=this.constantSize,null!==this.annotationPosition&&void 0!==this.annotationPosition&&(this.symbolData.annotationPosition=this.annotationPosition),this.symbolData.hasOwnProperty("scaleValues")&&null!==this.symbolData.scaleValues)for(var e=0;e<this.scaleValues.length;e++)this.symbolData.scaleValues.length>e?this.symbolData.scaleValues[e]=this.scaleValues[e]:this.symbolData.scaleValues.push(this.scaleValues[e]);else this.symbolData.scaleValues=[],this.symbolData.scaleValues=this.scaleValues;1016===this.code&&(this.symbolData.arrowTailType=this.arrowTailType,this.symbolData.arrowBodyType=this.arrowBodyType,this.symbolData.arrowHeadType=this.arrowHeadType)}},_calculateParts:function(){if("none"!==this.style.display)if(this.textContent&&""!==this.textContent&&"???"!==this.textContent||this.symbolType!==SuperMap.Plot.SymbolType.TEXTSYMBOL||(this.textContent="Test"),0!==this.textContent.length&&0!==this.dRotate&&(void 0===this.style.labelRotation?this.style.labelRotation=-this.dRotate:this.style.labelRotation+=-this.dRotate),this.superMapAlgoSymbol&&0!==this.getLatLngs().length){if(this._sendDataToAlgo(),this.superMapAlgoSymbol.calculateParts(),this._getDatafromAlgo(),this._transSymbolCellsToLayers(this.superMapAlgoSymbol.components),this._setBasicSymbolText(),this.symbolType===SuperMap.Plot.SymbolType.ELLIPSESYMBOL){if(3===this.superMapAlgoSymbol.controlPoints.length){var t=new SuperMap.Geometry.Point(2*this.superMapAlgoSymbol.controlPoints[0].x-this.superMapAlgoSymbol.controlPoints[1].x,2*this.superMapAlgoSymbol.controlPoints[0].y-this.superMapAlgoSymbol.controlPoints[1].y);this.superMapAlgoSymbol.controlPoints.push(t);e=new SuperMap.Geometry.Point(2*this.superMapAlgoSymbol.controlPoints[0].x-this.superMapAlgoSymbol.controlPoints[2].x,2*this.superMapAlgoSymbol.controlPoints[0].y-this.superMapAlgoSymbol.controlPoints[2].y);this.superMapAlgoSymbol.controlPoints.push(e)}else if(5===this.superMapAlgoSymbol.controlPoints.length){var e=new SuperMap.Geometry.Point(2*this.superMapAlgoSymbol.controlPoints[0].x-this.superMapAlgoSymbol.controlPoints[2].x,2*this.superMapAlgoSymbol.controlPoints[0].y-this.superMapAlgoSymbol.controlPoints[2].y);this.superMapAlgoSymbol.controlPoints[4].x=e.x,this.superMapAlgoSymbol.controlPoints[4].y=e.y}this.latLngs=L.Util.superMapPointsToLatLngs(this.superMapAlgoSymbol.controlPoints)}}else!this.superMapAlgoSymbol&&this.getLatLngs().length>=this.minEditPts&&(this._calAccessServerSymbol(),this._setBasicSymbolText())},_calAccessServerSymbol:function(){for(var t=SuperMap.Plot.AnalysisSymbol.analysisSymbolCells(this.symbolData),e=0;e<t.length;e++)t[e].type===SuperMap.Plot.SymbolType.TEXTSYMBOL&&(t[e].style.fontSize*=2);this._transSymbolCellsToLayers(t),this._analysisAlgoBasicInfo(!1),0!==this.symbolData.subSymbols.length&&0===this.subSymbols.length&&this._analysisAlgoBasicInfo(!0)},_analysisAlgoBasicInfo:function(t){if(this.symbolData.scaleValues&&0!==this.symbolData.scaleValues.length){this.scaleValues=[];for(i=0;i<this.symbolData.scaleValues.length;i++)this.scaleValues.push(this.symbolData.scaleValues[i])}if(t&&this.symbolData.subSymbols)for(var e=0;e<this.symbolData.subSymbols.length;e++)this.subSymbols.push(new SuperMap.Plot.SubSymbol(this.symbolData.libID,this.symbolData.subSymbols[e]));if(this.symbolData.scalePoints&&0!==this.symbolData.scalePoints.length){this.scalePoints=[];for(var i=0;i<this.symbolData.scalePoints.length;i++)this.scalePoints.push(L.latLng(this.symbolData.scalePoints[i].y,this.symbolData.scalePoints[i].x))}},_modifyPoint:function(t,e){if(e=new SuperMap.Geometry.Point(e.lng,e.lat),e.isScalePoint=!0,this._isSubSymbolWithinPolygon(e)){if(this._clearComponents(),this._sendDataToAlgo(),this.superMapAlgoSymbol.isEdit=this.isEdit,this.superMapAlgoSymbol.modifyPoint(t,e),this._getDatafromAlgo(),this.symbolType===SuperMap.Plot.SymbolType.ELLIPSESYMBOL){if(this.isCalculate=!1,this.superMapAlgoSymbol.calculateParts(),this._transSymbolCellsToLayers(this.superMapAlgoSymbol.components),this.symbolType===SuperMap.Plot.SymbolType.ELLIPSESYMBOL)for(var i=0;i<this.superMapAlgoSymbol.components.length;i++)this.superMapAlgoSymbol.components[i].isCalculate=this.isCalculate;if(3===this.superMapAlgoSymbol.controlPoints.length){var o=new SuperMap.Geometry.Point(2*this.superMapAlgoSymbol.controlPoints[0].x-this.superMapAlgoSymbol.controlPoints[1].x,2*this.superMapAlgoSymbol.controlPoints[0].y-this.superMapAlgoSymbol.controlPoints[1].y);this.superMapAlgoSymbol.controlPoints.push(o);n=new SuperMap.Geometry.Point(2*this.superMapAlgoSymbol.controlPoints[0].x-this.superMapAlgoSymbol.controlPoints[2].x,2*this.superMapAlgoSymbol.controlPoints[0].y-this.superMapAlgoSymbol.controlPoints[2].y);this.superMapAlgoSymbol.controlPoints.push(n)}else if(5===this.superMapAlgoSymbol.controlPoints.length){var n=new SuperMap.Geometry.Point(2*this.superMapAlgoSymbol.controlPoints[0].x-this.superMapAlgoSymbol.controlPoints[2].x,2*this.superMapAlgoSymbol.controlPoints[0].y-this.superMapAlgoSymbol.controlPoints[2].y);this.superMapAlgoSymbol.controlPoints[4].x=n.x,this.superMapAlgoSymbol.controlPoints[4].y=n.y}this.latLngs=L.Util.superMapPointsToLatLngs(this.superMapAlgoSymbol.controlPoints)}else this._transSymbolCellsToLayers(this.superMapAlgoSymbol.components);this._calculateAvoidRegions()}},_isSubSymbolWithinPolygon:function(t){if(123!==this.libID)return!0;switch(this.code){case 3002002:case 3002004:case 3002005:return SuperMap.Plot.PlottingUtil.ptIsInPolygon(this.superMapAlgoSymbol.controlPoints,t)}},_reView:function(){if(void 0!==this.prevStrokeWidth&&this.prevStrokeWidth!==this.style.weight&&(this.strokeWidth=this.style.weight),this.fromZoom!==this._map.getZoom()){var t=this.getBounds();if(!0===this.isEdit&&t.isValid()){var e=this._map.getZoomScale(this._map.getZoom(),this.fromZoom);if(this.dScale*=e,void 0!==this.strokeWidth&&null!==this.strokeWidth||(this.strokeWidth=this.style.weight),void 0===this.baseScale){var i=Math.abs(t.getEast()-t.getWest()),o=Math.abs(t.getNorth()-t.getSouth());i<o&&(i=o);var s=this.strokeWidth/.5*5,a=this._map.layerPointToLatLng(L.point(0,0)),l=this._map.layerPointToLatLng(L.point(s,0)),r=Math.sqrt((a.lat-l.lat)*(a.lat-l.lat)+(a.lng-l.lng)*(a.lng-l.lng));this.baseScale=r/i}if(this.dScale<=this.baseScale){this.scaleStrokeWidth=!0;var s=this.strokeWidth/.5*5,u=this.dScale*s/this.baseScale;this.style.weight=Math.round(u/10),this.style.weight>=this.strokeWidth&&(this.style.weight=this.strokeWidth),this.style.weight<=.5&&(this.style.weight=.5)}else!0===this.scaleStrokeWidth&&(this.style.weight=this.strokeWidth,this.scaleStrokeWidth=!1),this.strokeWidth=this.style.weight;this.prevStrokeWidth=this.style.weight,this.textContent.length>0&&(this.style.fontSize*=e);for(var p in this.components)this.components[p]instanceof n.Text&&(this.components[p].options.fontSize*=e),this.layer._map.getRenderer(this.layer)instanceof L.Canvas&&(!0!==this.components[p].options.fill||"LINEAR"!==this.style.fillGradientMode&&"RADIAL"!==this.style.fillGradientMode||this._computeGradientInCanvas(this.components[p],this.components[p].options,this.style));22!==this.libID||1012!==this.code&&1013!==this.code&&1014!==this.code&&1015!==this.code||(this.dScale>=1?(this.constantSize=!0,this.redraw()):this.constantSize=!1),this._updateSymbolTexts(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)}this.fromZoom=this._map.getZoom(),1!==this.surroundLineType&&2!==this.surroundLineType||this.redraw(),0!==this.avoidRegions.length&&this.redraw(),this.symbolType===SuperMap.Plot.SymbolType.TEXTSYMBOL&&this.isSelected&&this._map.getPlotEditControl()&&this._map.getPlotEditControl().fire(SuperMap.Plot.Event.featuresmodified,{features:[this]})}},_rotate:function(t,e){if(this.symbolType===SuperMap.Plot.SymbolType.TEXTSYMBOL)for(var i in this.components)this.components[i].options.labelRotation=this.style.labelRotation,this.components[i].redraw();else{L.Util.rotateLatLngs(this.getLatLngs(),e,t),L.Util.rotateLatLngs(this.scalePoints,e,t);Math.PI;var o=new SuperMap.Geometry.Point(e.lng,e.lat);if(SuperMap.AlgoSymbolFactory.isAccessServer(this.libID,this.code)){var n=new SuperMap.GetSymbolInfoParameters;n.libID=this.libID,n.code=this.code,n.inputPoints=L.Util.latLngsToSuperMapPoints(this.getLatLngs()),n.scaleValues=this.scaleValues,n.subSymbols=this.subSymbols,L.supermap.symbolInfoService(this.serverUrl).getSymbolInfo(n,function(t){this.symbolData.innerCells=t.result.innerCells,this.symbolData.scalePoints=t.result.scalePoints,this.symbolData.scaleValues=t.result.scaleValues,this.redraw(),this._updateSymbolTexts()},this)}else if(this.superMapAlgoSymbol){for(var s=0;s<this.superMapAlgoSymbol.controlPoints.length;s++)this.superMapAlgoSymbol.controlPoints[s]=SuperMap.Plot.PlottingUtil.rotateAngle(o,t,this.superMapAlgoSymbol.controlPoints[s]);for(var a=0;a<this.superMapAlgoSymbol.scalePoints.length;a++)this.superMapAlgoSymbol.scalePoints[a]=SuperMap.Plot.PlottingUtil.rotateAngle(o,t,this.superMapAlgoSymbol.scalePoints[a])}this.redraw(),this._updateSymbolTexts()}},_resize:function(t,e){o.GraphicObject.prototype._resize.call(this,t,e);var i=new SuperMap.Geometry.Point(e.lng,e.lat);if(this.superMapAlgoSymbol){for(var n=0;n<this.superMapAlgoSymbol.controlPoints.length;n++)SuperMap.Plot.PlottingUtil.resize(i,t,this.superMapAlgoSymbol.controlPoints[n]);for(a=0;a<this.superMapAlgoSymbol.scalePoints.length;a++)SuperMap.Plot.PlottingUtil.resize(i,t,this.superMapAlgoSymbol.scalePoints[a]);this._getDatafromAlgo()}else{for(var s=0;s<this.symbolData.innerCells.length;s++)for(var a=0;a<this.symbolData.innerCells[s].positionPoints.length;a++){var l=new SuperMap.Geometry.Point(this.symbolData.innerCells[s].positionPoints[a].x,this.symbolData.innerCells[s].positionPoints[a].y);SuperMap.Plot.PlottingUtil.resize(i,t,l),this.symbolData.innerCells[s].positionPoints[a].x=l.x,this.symbolData.innerCells[s].positionPoints[a].y=l.y}for(var r=0;r<this.symbolData.scalePoints.length;r++){var u=new SuperMap.Geometry.Point(this.symbolData.scalePoints[r].x,this.symbolData.scalePoints[r].y);SuperMap.Plot.PlottingUtil.resize(i,t,u),this.symbolData.scalePoints[r].x=u.x,this.symbolData.scalePoints[r].y=u.y}}},_setDefaultOptions:function(t){t.libID=this.libID,t.code=this.code,t.controlPoints=L.Util.latLngsToSuperMapPoints(this.latLngs),t.surroundLineType=this.surroundLineType,t.subSymbols=this.subSymbols,t.scaleValues=this.scaleValues,t.textContent=this.textContent,t.subSymbolScaleValue=this.subSymbolScaleValue,t.constantSize=this.constantSize,t.isEdit=this.isEdit,t.style=this.style,t.symbolName=this.symbolName,1016===this.code&&(t.arrowHeadType=this.arrowHeadType,t.arrowBodyType=this.arrowBodyType,t.arrowTailType=this.arrowTailType)},_sendDataToAlgo:function(){this.superMapAlgoSymbol.controlPoints=L.Util.latLngsToSuperMapPoints(this.getLatLngs()),this.superMapAlgoSymbol.subSymbols=this.subSymbols,this.superMapAlgoSymbol.scaleValues=this.scaleValues,this.superMapAlgoSymbol.textContent=this.textContent,this.superMapAlgoSymbol.subSymbolScaleValue=this.subSymbolScaleValue,this.superMapAlgoSymbol.constantSize=this.constantSize,1016===this.code&&(this.superMapAlgoSymbol.arrowHeadType=this.arrowHeadType,this.superMapAlgoSymbol.arrowBodyType=this.arrowBodyType,this.superMapAlgoSymbol.arrowTailType=this.arrowTailType)},_getDatafromAlgo:function(){this.subSymbols=this.superMapAlgoSymbol.subSymbols,this.scalePoints=L.Util.superMapPointsToLatLngs(this.superMapAlgoSymbol.scalePoints),this.scaleValues=this.superMapAlgoSymbol.scaleValues,this.subSymbolScaleValue=this.superMapAlgoSymbol.subSymbolScaleValue,this.superMapAlgoSymbol.annotationPosition&&(this.annotationPosition=this.superMapAlgoSymbol.annotationPosition)},_setBasicSymbolName:function(){if(0===this.libID)switch(this.code){case SuperMap.Plot.SymbolType.TEXTSYMBOL:this.symbolName="文本";break;case SuperMap.Plot.SymbolType.CIRCLESYMBOL:this.symbolName="圆";break;case SuperMap.Plot.SymbolType.RECTANGLESYMBOL:this.symbolName="矩形";break;case SuperMap.Plot.SymbolType.ARCSYMBOL:this.symbolName="弧线";break;case SuperMap.Plot.SymbolType.CHORDSYMBOL:this.symbolName="弓形";break;case SuperMap.Plot.SymbolType.PIESYMBOL:this.symbolName="扇形";break;case SuperMap.Plot.SymbolType.ELLIPSESYMBOL:this.symbolName="椭圆";break;case SuperMap.Plot.SymbolType.PARALLELOGRAM:this.symbolName="平行四边形";break;case SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL:this.symbolName="多边形";break;case SuperMap.Plot.SymbolType.POLYLINESYMBOL:this.symbolName="折线";break;case SuperMap.Plot.SymbolType.POLYBEZIERSYMBOL:this.symbolName="贝赛尔曲线";break;case SuperMap.Plot.SymbolType.POLYBEZIERCLOSESYMBOL:this.symbolName="闭合贝塞尔曲线";break;case SuperMap.Plot.SymbolType.PARALLELLINE:this.symbolName="平行线";break;case SuperMap.Plot.SymbolType.KIDNEY:this.symbolName="集结地";break;case SuperMap.Plot.SymbolType.ANNOFRAMESYMBOL:this.symbolName="注记指示框";break;case SuperMap.Plot.SymbolType.ARROWLINE:this.symbolName="箭头线";break;case SuperMap.Plot.SymbolType.COMBINATIONALCIRCLE:this.symbolName="组合圆";break;case SuperMap.Plot.SymbolType.CONCENTRICCIRCLE:this.symbolName="同心圆";break;case SuperMap.Plot.SymbolType.CURVEEIGHT:this.symbolName="八字形";break;case SuperMap.Plot.SymbolType.FREECURVE:this.symbolName="自由线";break;case SuperMap.Plot.SymbolType.ANNOFRAMESYMBOLM:this.symbolName="多角标注框";break;case SuperMap.Plot.SymbolType.LINEMARKING:this.symbolName="线型标注";break;case SuperMap.Plot.SymbolType.LINERELATION:this.symbolName="对象间连线";break;case SuperMap.Plot.SymbolType.NODECHAIN:this.symbolName="节点链";break;case SuperMap.Plot.SymbolType.PATHTEXT:this.symbolName="沿线注记";break;case SuperMap.Plot.SymbolType.POLYGONREGION:this.symbolName="多边形区域管理";break;case SuperMap.Plot.SymbolType.RUNWAY:this.symbolName="跑道线";break;case SuperMap.Plot.SymbolType.SYMBOLTEXTBOX:this.symbolName="标注框";break;case SuperMap.Plot.SymbolType.REGULARPOLYGON:this.symbolName="正多边形";break;case SuperMap.Plot.SymbolType.BRACESYMBOL:this.symbolName="大括号";break;case SuperMap.Plot.SymbolType.TRAPEZOIDSYMBOL:this.symbolName="梯形"}else if(421===this.libID)switch(this.code){case 311:this.symbolName="进攻方向";break;case 315:this.symbolName="突击";break;case 317:this.symbolName="钳击"}else{var t=L.supermap.plotting.getControl(this._map,this.serverUrl).getSymbolLibManager();this.symbolName=t.getSymbolName(this.libID,this.code)}},getTextContent:function(){return this.textContent},_setBasicSymbolText:function(){if(0===this.libID&&this.code===SuperMap.Plot.SymbolType.CIRCLESYMBOL||this.code===SuperMap.Plot.SymbolType.RECTANGLESYMBOL||this.code===SuperMap.Plot.SymbolType.ARCSYMBOL||this.code===SuperMap.Plot.SymbolType.CHORDSYMBOL||this.code===SuperMap.Plot.SymbolType.PIESYMBOL||this.code===SuperMap.Plot.SymbolType.ELLIPSESYMBOL||this.code===SuperMap.Plot.SymbolType.PARALLELOGRAM||this.code===SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL||this.code===SuperMap.Plot.SymbolType.POLYLINESYMBOL||this.code===SuperMap.Plot.SymbolType.POLYBEZIERSYMBOL||this.code===SuperMap.Plot.SymbolType.POLYBEZIERCLOSESYMBOL||this.code===SuperMap.Plot.SymbolType.PARALLELLINE||this.code===SuperMap.Plot.SymbolType.KIDNEY||this.code===SuperMap.Plot.SymbolType.REGULARPOLYGON||this.code===SuperMap.Plot.SymbolType.TRAPEZOIDSYMBOL){this.textContent=SuperMap.PlotUtil.trim(this.textContent);var t=this.getBounds();if(this.textContent&&null!==this.textContent&&0!==this.textContent.length&&null!==t&&t.isValid()){var e=L.latLng((t.getSouth()+t.getNorth())/2,(t.getEast()+t.getWest())/2),i=SuperMap.PlotUtil.cloneObject(this.style);i.surroundLineFlag=!1,i.labelAlign="cm",i.fontSize=this.style.fontSize,i.fontSizeLimit=!1;this._createAndDrawLayer(34,[e],i,this.textContent)}}}}),a=e.algoSymbol=function(t,e,i,o){return new s(t,e,i,o)};L.supermap.plotting.algoSymbol=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GraphicObject=void 0;var o=i(4),n=i(8),s=i(39),a=e.GraphicObject=o.PlottingObject.extend({surroundLineType:null,scaleByMap:null,latLngs:[],initialize:function(t,e,i,n){this.geoSymbolTexts=[],this.subAssociatedUuids=[],this.latLngs=i||[],o.PlottingObject.prototype.initialize.call(this,t,e,i,n),null===this.surroundLineType&&(this.surroundLineType=SuperMap.Plot.AlgoSurroundLineType.NONE)},destroy:function(){o.PlottingObject.prototype.destroy.call(this),this.surroundLineType=null,this.scaleByMap=null,this.latLngs=[]},setLatLngs:function(t){return this.latLngs=t,this.redraw()},getLatLngs:function(){return this.latLngs},addLatLng:function(t){if(this.latLngs[this.latLngs.length-1].lat!==t.lat||this.latLngs[this.latLngs.length-1].lng!==t.lng)return this.latLngs.push(t),this.redraw()},setScaleByMap:function(t){this.scaleByMap=t},getScaleByMap:function(){return this.scaleByMap},getSurroundLineType:function(){return this.surroundLineType},setSurroundLineType:function(t){},_resizeLatLngs:function(t,e,i,o){if(this.symbolType!==SuperMap.Plot.SymbolType.SATELLITETIMEWINDOWS){var n=this._resizeBounds(t,e,i);if(!(SuperMap.Plot.PlottingUtil.equalFuzzy(n.getWest(),n.getEast())&&SuperMap.Plot.PlottingUtil.equalFuzzy(n.getNorth(),n.getSouth())||SuperMap.Plot.PlottingUtil.equalFuzzy(i.getWest(),i.getEast())&&SuperMap.Plot.PlottingUtil.equalFuzzy(i.getNorth(),i.getSouth()))){var s=SuperMap.Plot.PlottingUtil.equalFuzzy(i.getWest(),i.getEast())?0:(n.getEast()-n.getWest())/(i.getEast()-i.getWest()),a=SuperMap.Plot.PlottingUtil.equalFuzzy(i.getNorth(),i.getSouth())?0:(n.getNorth()-n.getSouth())/(i.getNorth()-i.getSouth()),l=L.latLng((i.getNorth()+i.getSouth())/2,(i.getWest()+i.getEast())/2),r=L.latLng((n.getNorth()+n.getSouth())/2,(n.getWest()+n.getEast())/2);if(this.symbolType===SuperMap.Plot.SymbolType.ANNOFRAMESYMBOL||this.symbolType===SuperMap.Plot.SymbolType.ANNOFRAMESYMBOLM||this.symbolType===SuperMap.Plot.SymbolType.SYMBOLTEXTBOX||this.symbolType===SuperMap.Plot.SymbolType.LINEMARKING)this.latLngs[0].lng=r.lng+(o[0].lng-l.lng)*s,this.latLngs[0].lat=r.lat+(o[0].lat-l.lat)*a,this.latLngs[1].lng=r.lng+(o[1].lng-l.lng)*s,this.latLngs[1].lat=r.lat+(o[1].lat-l.lat)*a;else for(var u=0;u<o.length;u++)this.latLngs[u].lng=r.lng+(o[u].lng-l.lng)*s,this.latLngs[u].lat=r.lat+(o[u].lat-l.lat)*a}}},_getLatLng:function(t,e,i){var o=0,n=0;switch(t){case 1:o=e.getWest()+i.lng,n=e.getNorth()+i.lat;break;case 3:o=e.getEast()+i.lng,n=e.getNorth()+i.lat;break;case 6:o=e.getWest()+i.lng,n=e.getSouth()+i.lat;break;case 8:o=e.getEast()+i.lng,n=e.getSouth()+i.lat;break;case 2:o=(e.getEast()+e.getWest())/2,n=e.getNorth()+i.lat;break;case 4:o=e.getWest()+i.lng,n=(e.getNorth()+e.getSouth())/2;break;case 5:o=e.getEast()+i.lng,n=(e.getNorth()+e.getSouth())/2;break;case 7:o=(e.getEast()+e.getWest())/2,n=e.getSouth()+i.lat}return L.latLng(n,o)},_setSymbolData:function(t){if(o.PlottingObject.prototype._setSymbolData.call(this,t),this.symbolData){SuperMap.Plot.AnalysisSymbol.setStyle(this.style,this.symbolData),this.symbolData.scaleByMap=this.scaleByMap,this.symbolData.surroundLineType=this.surroundLineType,this.symbolData.algoMaxEditPts=this.maxEditPts,this.symbolData.algoMinEditPts=this.minEditPts,this.symbolData.hasOwnProperty("localePoints")||(this.symbolData.localePoints=[]);var e=this.getLatLngs().length;this.symbolType===SuperMap.Plot.SymbolType.ELLIPSESYMBOL&&(e=3);for(var i=0;i<e;i++)this.symbolData.localePoints.length>i?(this.symbolData.localePoints[i].x=this.getLatLngs()[i].lng,this.symbolData.localePoints[i].y=this.getLatLngs()[i].lat):this.symbolData.localePoints.push({x:this.getLatLngs()[i].lng,y:this.getLatLngs()[i].lat,z:0})}},_parseSymbolData:function(){if(o.PlottingObject.prototype._parseSymbolData.call(this),null!==this.symbolData&&(this.style=SuperMap.Plot.AnalysisSymbol.getStyle(this.symbolData),this.maxEditPts=this.symbolData.algoMaxEditPts,this.minEditPts=this.symbolData.algoMinEditPts,void 0!==this.symbolData.isEdit&&(this.isEdit=this.symbolData.isEdit),void 0!==this.symbolData.scaleByMap&&(this.scaleByMap=this.symbolData.scaleByMap),this.surroundLineType=this.symbolData.surroundLineType,this.symbolData.localePoints)){this.latLngs=[];for(var t=0;t<this.symbolData.localePoints.length;t++)this.latLngs.push(L.latLng(this.symbolData.localePoints[t].y,this.symbolData.localePoints[t].x))}},_modifyPoint:function(){},_transSymbolCellsToLayers:function(t){for(e=0;e<t.length;e++)1===this.symbolType?t[e].positionPoints=SuperMap.Plot.Primitives.getSpatialData(t[e].type,t[e].positionPoints,t[e].angle,!1):t[e].positionPoints=SuperMap.Plot.Primitives.getSpatialData(t[e].type,t[e].positionPoints,t[e].angle,t[e].isCalculate);0!==t.length&&(this._addFillCells(t),this._addSurroundLineCells(t));for(var e=0;e<t.length;e++)t[e].positionPoints=L.Util.superMapPointsToLatLngs(t[e].positionPoints),this._createAndDrawLayer(t[e].type,t[e].positionPoints,t[e].style,t[e].textContent)},_isPolylineType:function(t){switch(t){case 24:case 44:case 48:case 290:case 400:case 590:return!0;default:return!1}},_createAndDrawLayer:function(t,e,i,o,n){var s=this._createLayer(t,e,o,n);return this._isPolylineType(t)&&(i.fillLimit=!0,i.fill=!1),this._copyStyleForCell(i,this.style,s),L.setOptions(s,i),this._addComponents(s),s},_createLayer:function(t,e,i,o){var n=null;switch(t){case 24:case 44:case 48:case 290:case 400:case 590:n=L.polyline(e,{smoothFactor:0});break;case 29:case 31:case 32:case 28:case 410:case 370:case 380:case 390:case 320:case 321:case 350:case 360:n=L.polygon(e,{smoothFactor:0});break;case 26:n=L.rectangle(e);break;case 34:n=L.supermap.plotting.text(e,{text:i});break;case 2e3:n=L.circle(e[0],o)}return n},_addFillCells:function(t){if(this._isCanFill()){var e=SuperMap.PlotUtil.cloneObject(t[0]);e.type=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e.style?(e.style.weight=0,e.style.lineWidthLimit=!0):e.style={surroundLineFlag:!1,weight:0,lineWidthLimit:!0},t.push(e)}},_addSurroundLineCells:function(t){if(this.symbolType!==SuperMap.Plot.SymbolType.DOTSYMBOL){if(this.symbolType===SuperMap.Plot.SymbolType.TEXTSYMBOL)return null;if(this.surroundLineType===SuperMap.Plot.AlgoSurroundLineType.NONE)return null;if(this.style.lineWidthLimit&&0===this.style.weight)return null;var e=[],i=0,o=[],n={},s={},a={},l={};if(this.surroundLineType===SuperMap.Plot.AlgoSurroundLineType.INNER||this.surroundLineType===SuperMap.Plot.AlgoSurroundLineType.OUT){var r=this.surroundLineType===SuperMap.Plot.AlgoSurroundLineType.OUT?1:-1,u=this.style.surroundLineWidth/2+this.style.weight/2,p=this._map.layerPointToLatLng(L.point(0,0)),h=this._map.layerPointToLatLng(L.point(u,0)),c=new SuperMap.Geometry.Point(p.lng,p.lat),y=new SuperMap.Geometry.Point(h.lng,h.lat);i=SuperMap.Plot.PlottingUtil.distance(c,y)}n={surroundLineFlag:!0,fill:!1,fillLimit:!0,fillColorLimit:!0};for(var g=0,d=t.length;g<d;g++)if(0!==t[g].style.weight&&t[g].type!==SuperMap.Plot.SymbolType.TEXTSYMBOL){if(this.surroundLineType===SuperMap.Plot.AlgoSurroundLineType.INNER||this.surroundLineType===SuperMap.Plot.AlgoSurroundLineType.OUT){var f=SuperMap.Plot.PlottingUtil.innerOutlineDir(t[g].positionPoints)*r*i;if(this._isPolylineType(t[g].type)||t[g].positionPoints.push(t[g].positionPoints[0]),0===(e=SuperMap.Plot.PlottingUtil.getSurroundLinePts(t[g].positionPoints,f)).length)continue;s={type:t[g].type,positionPoints:e,style:n},t.splice(++g,0,s),++d}if(this.surroundLineType===SuperMap.Plot.AlgoSurroundLineType.ALL){if(0===(e=SuperMap.Plot.PlottingUtil.clonePoints(t[g].positionPoints)).length)continue;if(s={type:t[g].type,positionPoints:e,style:n},t.splice(++g,0,s),++d,0===(o=SuperMap.Plot.PlottingUtil.clonePoints(t[g].positionPoints)).length)continue;l={surroundLineFlag:!1,fill:!1,fillLimit:!0,fillColorLimit:!0},a={type:t[g].type,positionPoints:o,style:l},t.splice(++g,0,a),++d}}}},_isCanFill:function(){if(22===this.libID)switch(this.code){case 1001:case 1002:case 1004:case 1006:case 1011:return!0;default:return!1}else if(100===this.libID)switch(this.code){case 25200:return!0;default:return!1}else if(421===this.libID)switch(this.code){case 311:case 317:case 318:return!0;default:return!1}else{if(123!==this.libID)return!1;switch(this.code){case 30025:case 3002501:case 30026:return!0;default:return!1}}},_updateSymbolTexts:function(){for(var t=0;t<this.geoSymbolTexts.length;t++){var e=this.geoSymbolTexts[t];if(null===e||void 0===e)return;e.style.display=this.style.display,e.redraw()}},_rotate:function(t,e){for(var i in this.components)this.components[i]instanceof a?this.components[i]._rotate(t,e):(this.components[i]instanceof s.PointImage&&(this.components[i].options.rotation+=-t),this.components[i]instanceof n.Text&&(this.components[i].options.labelRotation?(this.components[i].options.labelRotation+=-t,this.symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL&&0===this.components[i].options.labelRotation&&(this.components[i].options.labelRotation=360)):this.components[i].options.labelRotation=-t),L.Util.rotateLatLngs(this.components[i].getLatLngs(),e,t),this.components[i].setLatLngs(this.components[i].getLatLngs()));L.Util.rotateLatLngs(this.getLatLngs(),e,t)},_move:function(t,e){for(var i=0,o=this.components.length;i<o;i++)L.Util.moveLatLngs(this.components[i].getLatLngs(),t,e),this.components[i].setLatLngs(this.components[i].getLatLngs()),this._renderer instanceof L.Canvas&&(!0!==this.components[i].options.fill||"LINEAR"!==this.style.fillGradientMode&&"RADIAL"!==this.style.fillGradientMode||this._computeGradientInCanvas(this.components[i],this.components[i].options,this.style));L.Util.moveLatLngs(this.getLatLngs(),t,e)},_resize:function(t,e){isNaN(t)&&(t=1),this.symbolType===SuperMap.Plot.SymbolType.TEXTSYMBOL&&(this.style.fontSize*=t);for(var i in this.components)this.components[i]instanceof a?this.components[i]._resize(t,e):(this.components[i]instanceof s.PointImage&&(this.components[i].options.graphicWidth*=t,this.components[i].options.graphicHeight*=t),this.components[i]instanceof n.Text&&(this.components[i].options.fontSize*=t),L.Util.resizeLatLngs(this.components[i].getLatLngs(),e,t),this.components[i].setLatLngs(this.components[i].getLatLngs()));L.Util.resizeLatLngs(this.getLatLngs(),e,t)},_computeGradientInCanvas:function(t,e,i){if(t.getBounds().isValid()){var o=t.getBounds(),n=this._map.latLngToLayerPoint(L.latLng(o.getNorth(),o.getWest())),s=this._map.latLngToLayerPoint(L.latLng(o.getSouth(),o.getEast())),a=this._map.latLngToLayerPoint(o.getCenter()),l=Math.abs(n.x-s.x)>Math.abs(n.y-s.y)?Math.abs(n.x-s.x):Math.abs(n.y-s.y);e.fill=!0,e.fillOpacity=1,"LINEAR"===i.fillGradientMode&&(e.fillColor=this._map.getRenderer(t)._ctx.createLinearGradient(n.x,n.y,s.x,n.y)),"RADIAL"===i.fillGradientMode&&(e.fillColor=this._map.getRenderer(t)._ctx.createRadialGradient(a.x,a.y,0,a.x,a.y,l)),e.fillColor.addColorStop(0,SuperMap.PlotUtil.colorRGBA(i.fillColor,i.fillOpacity)),e.fillColor.addColorStop(1,SuperMap.PlotUtil.colorRGBA(i.fillBackColor,i.fillBackOpacity))}},_computeGradientInSVG:function(t,e,i){this.layer._renderer._container.defs||(this.layer._renderer._container.defs=L.SVG.create("defs"));var o,n,s;"LINEAR"===i.fillGradientMode&&(o=document.getElementById("linearGradient_"+this._leaflet_id)),"RADIAL"===i.fillGradientMode&&(o=document.getElementById("radialGradient_"+this._leaflet_id)),null===o?("LINEAR"===i.fillGradientMode&&((o=L.SVG.create("linearGradient")).setAttributeNS(null,"x1",0),o.setAttributeNS(null,"y1",0),o.setAttributeNS(null,"x2",1),o.setAttributeNS(null,"y2",0),o.setAttributeNS(null,"id","linearGradient_"+this._leaflet_id)),"RADIAL"===i.fillGradientMode&&((o=L.SVG.create("radialGradient")).setAttributeNS(null,"cx",.5),o.setAttributeNS(null,"cy",.5),o.setAttributeNS(null,"fx",.5),o.setAttributeNS(null,"fy",.5),o.setAttributeNS(null,"r",1),o.setAttributeNS(null,"id","radialGradient_"+this._leaflet_id)),(n=L.SVG.create("stop")).setAttributeNS(null,"offset",0),n.setAttributeNS(null,"style","stop-color:"+SuperMap.PlotUtil.colorRGBA(i.fillColor,i.fillOpacity)),(s=L.SVG.create("stop")).setAttributeNS(null,"offset",1),s.setAttributeNS(null,"style","stop-color:"+SuperMap.PlotUtil.colorRGBA(i.fillBackColor,i.fillBackOpacity)),o.appendChild(n),o.appendChild(s),this.layer._renderer._container.defs.appendChild(o),this.layer._renderer._container.appendChild(this.layer._renderer._container.defs)):(o.firstChild.setAttributeNS(null,"style","stop-color:"+SuperMap.PlotUtil.colorRGBA(i.fillColor,i.fillOpacity)),o.lastChild.setAttributeNS(null,"style","stop-color:"+SuperMap.PlotUtil.colorRGBA(i.fillBackColor,i.fillBackOpacity))),e.fill=!0,e.fillOpacity=1,e.fillColor="url(#"+o.id+")"},_copyStyleForCell:function(t,e,i){if(e.display&&"none"===e.display)t.display=e.display;else{if(!0===t.surroundLineFlag)this.surroundLineType===SuperMap.Plot.AlgoSurroundLineType.ALL?t.weight=2*e.surroundLineWidth+e.weight:t.weight=e.surroundLineWidth,t.color=e.surroundLineColor,t.opacity=e.surroundLineColorOpacity,t.dashArray=null;else if(t.lineWidthLimit||(t.weight=e.weight),t.lineColorLimit||(t.color=e.color,t.opacity=e.opacity),!t.lineTypeLimit){if(e.lineSymbolID){e.lineSymbolID=parseInt(e.lineSymbolID);var o=2*e.weight,s=3*e.weight;1===e.lineSymbolID?e.dashArray=[s,o].join(","):2===e.lineSymbolID?e.dashArray=[0,o].join(","):3===e.lineSymbolID?e.dashArray=[s,o,0,o].join(","):4===e.lineSymbolID?e.dashArray=[s,o,0,o,0,o].join(","):e.dashArray=null}t.dashArray=e.dashArray}t.strokeLinecap||void 0===e.strokeLinecap||(t.strokeLinecap=e.strokeLinecap),t.fillLimit||i instanceof n.Text?t.fillColorLimit||(t.fillColor=t.strokeColor,t.fillOpacity=t.strokeOpacity):"LINEAR"===e.fillGradientMode||"RADIAL"===e.fillGradientMode?(this.layer._map.getRenderer(this.layer)instanceof L.Canvas&&this._computeGradientInCanvas(i,t,e),this.layer._map.getRenderer(this.layer)instanceof L.SVG&&this._computeGradientInSVG(i,t,e)):(this._removeGradientNodeInSVG(),t.fill=e.fill,t.fillColor=e.fillColor,t.fillOpacity=e.fillOpacity),t.fontSizeLimit&&!1!==t.fontSizeLimit||(t.fontSize=e.fontSize),t.fontColorLimit&&!1!==t.fontColorLimit||(t.fontColor=e.fontColor),void 0===t.labelAlign&&void 0!==e.labelAlign&&(t.labelAlign=e.labelAlign),void 0===t.labelRotation&&void 0!==e.labelRotation&&(t.labelRotation=e.labelRotation),!0!==t.fontSizeLimit&&!0!==t.fontColorLimit&&(void 0!==e.fontWeight&&(t.fontWeight=e.fontWeight),void 0!==e.fontStyle&&(t.fontStyle=e.fontStyle),void 0!==e.fontStroke&&(t.fontStroke=e.fontStroke),void 0!==!e.fontStrokeColor&&(t.fontStrokeColor=e.fontStrokeColor),void 0!==e.fontStrokeWidth&&(t.fontStrokeWidth=e.fontStrokeWidth),void 0!==e.fontBackground&&(t.fontBackground=e.fontBackground),void 0!==e.fontBackgroundColor&&(t.fontBackgroundColor=e.fontBackgroundColor),void 0!==e.fontShadow&&(t.fontShadow=e.fontShadow),void 0!==e.fontShadowColor&&(t.fontShadowColor=e.fontShadowColor),void 0!==e.fontShadowOffsetX&&(t.fontShadowOffsetX=e.fontShadowOffsetX),void 0!==e.fontShadowOffsetY&&(t.fontShadowOffsetY=e.fontShadowOffsetY),void 0!==e.fontSpace&&(t.fontSpace=e.fontSpace),void 0!==e.fontPercent&&(t.fontPercent=e.fontPercent),void 0!==e.fontFamily&&(t.fontFamily=e.fontFamily),void 0!==e.fontOpacity&&(t.fontOpacity=e.fontOpacity)),"none"===e.display?t.display=e.display:t.display="display",t.graphicWidth<0&&(t.graphicWidth=Math.abs(t.graphicWidth)),t.graphicHeight<0&&(t.graphicHeight=Math.abs(t.graphicHeight)),t.fontSize<0&&(t.fontSize=Math.abs(t.fontSize))}}});L.supermap.plotting.GraphicObject=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ArrowToolKit=SuperMap.Plot.ArrowToolKit=SuperMap.Plot.ArrowToolKit||{};SuperMap.Plot.ArrowToolKit.ConstValue={MAX_ARRAY_SIZE:128,sv_AtScaleParameter:1.5,sv_AtLenDivAtWidth:1.35,sv_AtWidthDivAwWidth:.5,DUOJIANTOU_TAIL_RATE_1:8,DUOJIANTOU_TAIL_RATE_2:3,DUOJIANTOU_TAIL_RATE_3:.6},SuperMap.Plot.ArrowToolKit.ArrowTailType={ARROWTAIL_NONE:0,ARROWTAIL_LINE:1,ARROWTAIL_CURVE:2,ARROWTAIL_COATTAIL:3,ARROWTAIL_COATTAIL_POLYBODY:4},SuperMap.Plot.ArrowToolKit.ArrowHeadType={ARROWHEAD_POLYLINE:0,ARROWHEAD_TRIANGLE:1,ARROWHEAD_COATTAIL:2,ARROWHEAD_TRIANGLE_SOLID:3,ARROWHEAD_WITH_EAR:4,ARROWHEAD_WITHOUT_EAR:5},SuperMap.Plot.ArrowToolKit.ArrowBodyType={ARROWBODY_POLYLINE:0,ARROWBODY_POLYBEZIER:1,ARROWBODY_PARALLEL:2,ARROWBODY_TRAPEZOID:3,ARROWBODY_MULTIPOLYBEZIER:4},SuperMap.Plot.ArrowToolKit.parallel=function(t,e){var i={};return i.leftParallelPts=[],i.rightParallelPts=[],1===t.length||2===t.length&&t[0].x===t[1].x&&t[0].y===t[1].y?i:(i.leftParallelPts=SuperMap.Plot.PlottingUtil.parallel(t,e),i.rightParallelPts=SuperMap.Plot.PlottingUtil.parallel(t,-e),i)},SuperMap.Plot.ArrowToolKit.trapezoid=function(t,e,i){var o={};if(o.leftParallelPts=[],o.rightParallelPts=[],1===t.length||2===t.length&&t[0].x===t[1].x&&t[0].y===t[1].y)return o;for(var n=0;n<t.length-1;n++){t[n].x===t[n+1].x&&t[n].y===t[n+1].y&&(o.leftParallelPts.push(o.leftParallelPts[o.leftParallelPts.length-1]),o.rightParallelPts.push(o.rightParallelPts[o.rightParallelPts.length-1]));var s=t[n+1];s=SuperMap.Plot.PlottingUtil.rotate(t[n],0,1,s),o.leftParallelPts.push(SuperMap.Plot.PlottingUtil.findPointInLine(t[n],s,e)),s=t[n],s=SuperMap.Plot.PlottingUtil.rotate(t[n+1],0,-1,s),o.leftParallelPts.push(SuperMap.Plot.PlottingUtil.findPointInLine(t[n+1],s,i)),s=t[n+1],s=SuperMap.Plot.PlottingUtil.rotate(t[n],0,-1,s),o.rightParallelPts.push(SuperMap.Plot.PlottingUtil.findPointInLine(t[n],s,e)),s=t[n],s=SuperMap.Plot.PlottingUtil.rotate(t[n+1],0,1,s),o.rightParallelPts.push(SuperMap.Plot.PlottingUtil.findPointInLine(t[n+1],s,i))}return o},SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePts=function(t,e,i){var o={};switch(i){case SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_PARALLEL:case SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_TRAPEZOID:var n=e[0],s=e[1],a=e[2],l=(e[3],e[4],SuperMap.Plot.PlottingUtil.equalFuzzy(a,0));if(!l&&t.length>2){var r=t.length;t.splice(2,r-2)}var u=SuperMap.Plot.PlottingUtil.polylineDistance(t);SuperMap.Plot.PlottingUtil.distance(t[t.length-2],t[t.length-1]);o.arrowTouLen=u*n;for(var p=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,u-o.arrowTouLen).pt,h=[],c=o.arrowTouLen*a,y=o.arrowTouLen*s,g=t.length-1,d=0;d<g;d++)h.push(t[d]);h.push(p);var f={};f.leftParallelPts=[],f.rightParallelPts=[],f=!0===l?SuperMap.Plot.ArrowToolKit.parallel(h,y):SuperMap.Plot.ArrowToolKit.trapezoid(h,c,y);var S=t[t.length-1];t[t.length-1]=p,t.push(S);var P=null;return o.leftBodyPts=f.leftParallelPts,o.rightBodyPts=f.rightParallelPts,o.OpectrlPoints=P,o;case SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_MULTIPOLYBEZIER:var m=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(0==m)return;var b=(P=SuperMap.Plot.ArrowToolKit.OperateCtrlPts(t)).length;b--;var L=SuperMap.Plot.ArrowToolKit.generateMultiBezier(P,b,e,m);t=[];for(d=0;d<P.length;d++)t.push(P[d]);o.arrowTouLen=L.arrowTouLen,o.leftBodyPts=L.leftBodyPts,o.rightBodyPts=L.rightBodyPts,o.OpectrlPoints=P}return o},SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePts=function(t,e,i,o,n){var s=[];switch(n){case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_WITH_EAR:case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_WITHOUT_EAR:var a=i[0],l=i[1],r=0,u=0;3==i.length&&(r=i[2]),4==i.length&&(r=i[2],u=i[3]);var p=0;if(!SuperMap.Plot.PlottingUtil.equalFuzzy(r,0)&&!SuperMap.Plot.PlottingUtil.equalFuzzy(u,0)){var h=SuperMap.Plot.PlottingUtil.clonePoints(t);h.splice(h.length-1,1),p=SuperMap.Plot.PlottingUtil.polylineDistance(h)*r*u}var c=new SuperMap.Geometry.Point((e[0].x+e[1].x)/2,(e[0].y+e[1].y)/2);if(SuperMap.Plot.PlottingUtil.equalFuzzy(l,0)){var y=o*a,g=t[t.length-1];return g=SuperMap.Plot.PlottingUtil.rotate(c,0,1,g),s.push(SuperMap.Plot.PlottingUtil.findPointInLine(c,g,y)),s.push(t[t.length-1]),g=t[t.length-1],g=SuperMap.Plot.PlottingUtil.rotate(c,0,-1,g),s.push(SuperMap.Plot.PlottingUtil.findPointInLine(c,g,y)),s}var d=o*l,f=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(d,c,t[t.length-1]);d=o*a,d+=p;var S=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(d,t[t.length-1],f),P=S.pntLeft,m=S.pntRight,b=t[t.length-1];return s.push(m),s.push(b),s.push(P),s}},SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePtsBySingleLine=function(t,e,i){var o=0,n=[];if(2>t.length)return{arrowHeadLen:o,arrowBodyPts:n};for(var s=0,a=0;a<t.length-1;a++)s+=SuperMap.Plot.PlottingUtil.distance(t[a],t[a+1]);var l=SuperMap.Plot.PlottingUtil.equalFuzzy(e,0);switch(o=s*e,i){case SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_POLYLINE:if(l)n=n.concat(t);else if(-1!==(c=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,s-o)).index){for(a=0;a<c.index;a++)n.push(t[a]);n.push(c.pt)}break;case SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_POLYBEZIER:if(2==t.length)if(l)n=n.concat(t);else{var r=SuperMap.Plot.PlottingUtil.findPoint(t[1],t[0],o,0);n.push(t[0]),n.push(r)}else{var u=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);if(l)n=n.concat(u);else{for(var p=1.5*o,h=0,a=0;a<u.length-1;a++)h+=SuperMap.Plot.PlottingUtil.distance(u[a],u[a+1]);var c=SuperMap.Plot.PlottingUtil.findPointInPolyLine(u,h-p);if(-1!==c.index){for(a=0;a<c.index;a++)n.push(u[a]);n.push(c.pt)}}}}return{arrowHeadLen:o,arrowBodyPts:n}},SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePtsBySingleLine=function(t,e,i,o,n,s){var a=[];if(2>t)return a;for(var l=0,r=0;r<t.length-1;r++)l+=SuperMap.Plot.PlottingUtil.distance(t[r],t[r+1]);y=l*o;switch(s){case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_POLYLINE:var u=SuperMap.Plot.PlottingUtil.findPoint(e[e.length-1],e[e.length-2],y,22.5),p=SuperMap.Plot.PlottingUtil.findPoint(e[e.length-1],e[e.length-2],y,-22.5);a.push(u),a.push(t[t.length-1]),a.push(p);break;case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_TRIANGLE:var h=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,l-n),c=SuperMap.Plot.PlottingUtil.findPoint(i[0],i[1],n,180),y=SuperMap.Plot.PlottingUtil.distance(h.pt,c);y=2*Math.sqrt(y*y/3);var u=SuperMap.Plot.PlottingUtil.findPoint(c,h.pt,y,22.5),p=SuperMap.Plot.PlottingUtil.findPoint(c,h.pt,y,-22.5);a.push(u),a.push(c),a.push(p),a.push(u);break;case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_TRIANGLE_SOLID:var g=e[e.length-1],d=e[e.length-2],f=SuperMap.Plot.PlottingUtil.findPoint(g,d,y,0),u=SuperMap.Plot.PlottingUtil.findPoint(g,f,y,22.5),p=SuperMap.Plot.PlottingUtil.findPoint(g,f,y,-22.5);a.push(u),a.push(g),a.push(p),a.push(u);break;case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_COATTAIL:var S=e.length,d=e[S-1];y=2*Math.sqrt(y*y/3);var u=SuperMap.Plot.PlottingUtil.findPoint(e[S-1],e[S-2],y,20),p=SuperMap.Plot.PlottingUtil.findPoint(e[S-1],e[S-2],y,-20),P=SuperMap.Plot.PlottingUtil.findPoint(e[S-1],e[S-2],y/2,0);a.push(d),a.push(u),a.push(P),a.push(p),a.push(d)}return a},SuperMap.Plot.ArrowToolKit.generateArrowTailShapePts=function(t,e,i,o){for(var n=e.length,s=[],a=0,l=0;l<t.length-1;l++)a+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var r=a*i;switch(o){case SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_NONE:break;case SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_LINE:var u=SuperMap.Plot.PlottingUtil.findPoint(t[0],t[1],r,90),p=SuperMap.Plot.PlottingUtil.findPoint(t[0],t[1],r,-90);s.push(u),s.push(p);break;case SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_CURVE:var h=new SuperMap.Geometry.Point(.5*(e[0].x+e[n-1].x),.5*(e[0].y+e[n-1].y)),c=SuperMap.Plot.PlottingUtil.distance(e[0],e[n-1]),y=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(c*i,h,t[t.length-1]),g=new SuperMap.Geometry.Point(0,0),d=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrianglePoints(SuperMap.Plot.ArrowToolKit.ConstValue.DUOJIANTOU_TAIL_RATE_1,SuperMap.Plot.ArrowToolKit.ConstValue.DUOJIANTOU_TAIL_RATE_2,e[0],y,e[n-1],g,d);var f=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrapezoidPoints(SuperMap.Plot.ArrowToolKit.ConstValue.DUOJIANTOU_TAIL_RATE_3,e[0],y,g,f);var S=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrapezoidPoints(SuperMap.Plot.ArrowToolKit.ConstValue.DUOJIANTOU_TAIL_RATE_3,e[n-1],y,d,S);break;case SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_COATTAIL:var P=SuperMap.Plot.PlottingUtil.findPoint(t[0],t[1],r,157.5),m=SuperMap.Plot.PlottingUtil.findPoint(t[0],t[1],r,-157.5);s.push(P),s.push(t[0]),s.push(m);break;case SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_COATTAIL_POLYBODY:var h=new SuperMap.Geometry.Point(.5*(e[0].x+e[n-1].x),.5*(e[0].y+e[n-1].y)),c=SuperMap.Plot.PlottingUtil.distance(e[0],e[n-1]),b=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(c*i,e[0],h);s.push(e[n-1]),s.push(b.pntLeft),s.push(e[0])}return s},SuperMap.Plot.ArrowToolKit.OperateCtrlPts=function(t){var e=SuperMap.Plot.PlottingUtil.clonePoints(t);if(3==e.length){var i=((e[0].x+e[1].x)/2+e[2].x)/2,o=((e[0].y+e[1].y)/2+e[2].y)/2,n=new SuperMap.Geometry.Point(i,o),s=e[2].clone();e[2]=n,e.push(s)}return e},SuperMap.Plot.ArrowToolKit.generateMultiBezier=function(t,e,i,o){var n=0,s=[],a=[],l=[],r=[],u=[],p=[],h=[],c=[],y=i[0],g=i[1],d=(i[2],i[3],(t[0].x+t[1].x)/2),f=(t[0].y+t[1].y)/2,S=Math.abs(d-t[2].x),P=Math.abs(f-t[2].y),m=0;if(S>0&&P>0){var b=1/(d-t[2].x),L=-1/(f-t[2].y),M=1*t[2].y/(f-t[2].y)-1*t[2].x/(d-t[2].x);m=Math.abs(b*t[0].x+L*t[0].y+M)/Math.sqrt(b*b+L*L)}else P<=1e-4?m=Math.abs(f-t[1].y):S<=1e-4&&(m=Math.abs(d-t[1].x));var v=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(m,t[2],new SuperMap.Geometry.Point(d,f)),_=SuperMap.Plot.PlottingUtil.pointIsRightToLine(t[1],t[2],t[0]);_?(l[1]=t[1],r[1]=t[0]):(l[1]=t[0],r[1]=t[1]),t[1]=new SuperMap.Geometry.Point((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2);var T=Math.sqrt((v.pntLeft.x-v.pntRight.x)*(v.pntLeft.x-v.pntRight.x)+(v.pntLeft.y-v.pntRight.y)*(v.pntLeft.y-v.pntRight.y))*SuperMap.Plot.ArrowToolKit.ConstValue.sv_AtWidthDivAwWidth,x=(n=T*SuperMap.Plot.ArrowToolKit.ConstValue.sv_AtLenDivAtWidth)*g;SuperMap.Plot.PlottingUtil.equalFuzzy(y,0)||(x=(n=o*y)*g);var O=SuperMap.Plot.PlottingUtil.distance(t[e],t[e-1]),A=2*n;O<A&&(x=(n=O/2)*g),t.push(t[e]);var w,D;w=0,D=0;var E=0,I=[];for(E=2;E<=e;E++)w+=SuperMap.Plot.PlottingUtil.distance(t[E],t[E-1]);for(w-=n,E=2;E<=e-1;E++)D+=SuperMap.Plot.PlottingUtil.distance(t[E],t[E-1]),I[E]=x+(T-x)*Math.pow((w-D)/w,SuperMap.Plot.ArrowToolKit.ConstValue.sv_AtScaleParameter);I[e]=x;var N,C=new SuperMap.Geometry.Point(0,0),R=new SuperMap.Geometry.Point(0,0),U=new SuperMap.Geometry.Point(0,0);for(E=2;E<=e-1;E++)SuperMap.Plot.PlottingUtil.getTrianglePoints(0,3,t[E-1],t[E],t[E+1],R,U),E==e-1&&SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,t[e],t[e-1],U,C),N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(I[E],R,t[E]),(_=SuperMap.Plot.PlottingUtil.pointIsRightToLine(U,R,N.pntRight))?(l[E]=new SuperMap.Geometry.Point(N.pntRight.x,N.pntRight.y),r[E]=new SuperMap.Geometry.Point(N.pntLeft.x,N.pntLeft.y)):(l[E]=new SuperMap.Geometry.Point(N.pntLeft.x,N.pntLeft.y),r[E]=new SuperMap.Geometry.Point(N.pntRight.x,N.pntRight.y));Math.sqrt(1*(t[e].x-C.x)*(t[e].x-C.x)+1*(t[e].y-C.y)*(t[e].y-C.y))>0&&(t[e]=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(n,t[e],C)),N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(x,t[e+1],t[e]),(_=SuperMap.Plot.PlottingUtil.pointIsRightToLine(t[e],t[e+1],N.pntLeft))?(r[e]=new SuperMap.Geometry.Point(N.pntLeft.x,N.pntLeft.y),l[e]=new SuperMap.Geometry.Point(N.pntRight.x,N.pntRight.y)):(r[e]=new SuperMap.Geometry.Point(N.pntRight.x,N.pntRight.y),l[e]=new SuperMap.Geometry.Point(N.pntLeft.x,N.pntLeft.y));var G;for(E=2;E<e;E++)SuperMap.Plot.PlottingUtil.getTrianglePoints(3,3,l[E-1],l[E],l[E+1],R,U),u[E]=new SuperMap.Geometry.Point(R.x,R.y),p[E]=new SuperMap.Geometry.Point(U.x,U.y),SuperMap.Plot.PlottingUtil.getTrianglePoints(3,3,r[E-1],r[E],r[E+1],R,U),h[E]=new SuperMap.Geometry.Point(R.x,R.y),c[E]=new SuperMap.Geometry.Point(U.x,U.y),2==E&&(SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,l[1],l[2],u[2],C),p[1]=new SuperMap.Geometry.Point(C.x,C.y),SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,r[1],r[2],h[2],C),c[1]=new SuperMap.Geometry.Point(C.x,C.y)),E==e-1&&(A=(O=SuperMap.Plot.PlottingUtil.distance(l[e],l[e-1]))/3,(G=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(A,t[e],t[e+1])).x+=l[e].x-t[e].x,G.y+=l[e].y-t[e].y,A=(O=T-x)*Math.pow(A/w,SuperMap.Plot.ArrowToolKit.ConstValue.sv_AtScaleParameter),N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(A,l[e],G),u[e]=new SuperMap.Geometry.Point(N.pntLeft.x,N.pntLeft.y),A=(O=SuperMap.Plot.PlottingUtil.distance(r[e],r[e-1]))/3,(G=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(A,t[e],t[e+1])).x+=r[e].x-t[e].x,G.y+=r[e].y-t[e].y,A=(O=T-x)*Math.pow(A/w,SuperMap.Plot.ArrowToolKit.ConstValue.sv_AtScaleParameter),N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(A,r[e],G),h[e]=new SuperMap.Geometry.Point(N.pntRight.x,N.pntRight.y));return s=SuperMap.Plot.ArrowToolKit.genArrowBody(e,l,u,p),a=SuperMap.Plot.ArrowToolKit.genArrowBody(e,r,h,c),{arrowTouLen:n,leftBodyPts:s,rightBodyPts:a}},SuperMap.Plot.ArrowToolKit.genArrowBody=function(t,e,i,o){var n=new SuperMap.Plot.Path2D;if(!(t<2)){n.MoveTo(e[1]);for(var s=1;s<=t-1;s++)n.CubicTo(o[s],i[s+1],e[s+1]);var a=[];return n.ToSubPathPolygons(a),a[0]}}},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.PlottingObject=void 0;var n=i(19),s=i(8),a=(o(i(105)),o(i(28)),e.PlottingObject=L.Evented.extend({dragging:null,uuid:null,libID:null,code:null,minEditPts:1,maxEditPts:1,symbolType:null,symbolName:null,isSelected:!1,enableEdit:!0,note:"",extendProperty:null,custom:null,symbolData:null,dRotate:null,dScale:null,textContent:null,annotationPosition:4,subSymbols:null,fromZoom:null,style:null,isLocked:!1,anchorPoint:null,avoidRegions:null,ownerGroup:null,geoSymbolTexts:null,isEdit:!1,components:null,options:{},_defaultStyle:{display:"display",color:"#ff0000",dashArray:"",opacity:"1.00",weight:2,surroundLineColor:"#ffff00",surroundLineColorOpacity:"1.00",surroundLineWidth:4,fill:!1,fillColor:"#ff0000",fillOpacity:"0.31",fillBackColor:"#ff0000",fillBackOpacity:"1.00",fillGradientMode:"NONE",fontColor:"#000000",fontFamily:"Microsoft YaHei",fontSize:"12",labelAlign:"lt",labelRotation:-0,labelXOffset:0,labelYOffset:0},initialize:function(t,e,i,o){this.components=[],this.libID=t,this.code=e,this.extendProperty=new SuperMap.Plot.ExtendProperty,this.avoidRegions=[],this.subSymbols=[],this.geoSymbolTexts=[],this.dRotate=0,this.dScale=1,this.textContent="",this.associatedUuid="",o&&o.symbolData&&(this._removeRedundancySymbolData(o.symbolData),this.symbolData=SuperMap.PlotUtil.cloneObject(o.symbolData),this._parseSymbolData(),delete o.symbolData),this._mergeDefaultStyle(),SuperMap.Util.extend(this,o),null===this.uuid&&(this.uuid=SuperMap.PlotUtil.generateUuid()),null===this.style&&(this.style=SuperMap.PlotUtil.cloneObject(this._defaultStyle));for(var n=0;n<this.avoidRegions.length;n++)this.avoidRegions[n].associatedUuid=this.uuid},onAdd:function(t){this.layer=t,this._renderer=t._renderer,this._map=t._map,this.redraw(),this.isEdit=!0,n.PlottingObjectDrag&&(this.dragging||(this.dragging=new n.PlottingObjectDrag(this))),null===this.fromZoom&&(this.fromZoom=this._map.getZoom())},_clearComponents:function(){for(var t=0;t<this.components.length;t++)this.components[t].removeEventParent(this),this.components[t]instanceof a?(this.components[t]._clearComponents(),this.components[t]._removeGradientNodeInSVG()):(this.components[t].onRemove(),delete this.components[t]);this.components=[]},_removeGradientNodeInSVG:function(){if(this.layer._renderer._container.defs){var t=document.getElementById("linearGradient_"+this._leaflet_id);null!==t&&this.layer._renderer._container.defs.removeChild(t),null!==(t=document.getElementById("radialGradient_"+this._leaflet_id))&&this.layer._renderer._container.defs.removeChild(t)}},_addComponents:function(t){t._map=this._map,t._renderer=this._renderer,t.addEventParent(this),t instanceof a?t.onAdd(this.layer):t.onAdd(),this.components.push(t)},_project:function(){var t=this;t._pxBounds=new L.Bounds,t.components.map(function(e){e instanceof a&&e._project(),e._pxBounds&&e._pxBounds.isValid()&&(t._pxBounds.extend(e._pxBounds.min),t._pxBounds.extend(e._pxBounds.max))})},getBounds:function(){var t=this;return t._bounds=new L.LatLngBounds,t.components.map(function(e){t._bounds.extend(e.getBounds())}),t._bounds},clone:function(){var t=SuperMap.PlotUtil.cloneObject(this.getSymbolData());t.uuid=SuperMap.PlotUtil.generateUuid();var e=SuperMap.PlotUtil.cloneObject(this.style);return L.supermap.plotting.PlottingObject.createSymbol(this.libID,this.code,null,{symbolData:t,serverUrl:this.serverUrl},e)},setStyle:function(t){SuperMap.Util.extend(this.style,t),this.redraw(),this.symbolType===SuperMap.Plot.SymbolType.TEXTSYMBOL&&this.isSelected&&"none"!==this.style.display&&this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)},setScale:function(t){},setRotate:function(t){},setTextPosition:function(t){},setTextContent:function(t){this.textContent=t,this.redraw(),this.symbolType===SuperMap.Plot.SymbolType.TEXTSYMBOL&&this.isSelected&&this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)},getLocked:function(){return this.isLocked},setLocked:function(t){if(this.isLocked!==t){if(this.isLocked=t,this.symbolType===SuperMap.Plot.SymbolType.GROUPOBJECT)for(var e=0;e<this.components.length;e++)this.components[e].isLocked=t;this.fire(SuperMap.Plot.Event.reseteditmarkers)}},getScale:function(){return this.dScale},getRotate:function(){return this.dRotate},getSubSymbols:function(){return this.subSymbols},getTextPosition:function(){return this.annotationPosition},getTextContent:function(){return this.textContent},getExtendProperty:function(){return this.extendProperty},addAvoidRegion:function(t){t.symbolType===SuperMap.Plot.SymbolType.AVOIDREGION&&(this.avoidRegions.push(t),t.associatedUuid=this.uuid,this.redraw())},removeAvoidRegions:function(t){void 0===t&&(t=this.avoidRegions.slice()),SuperMap.Util.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];if(i.symbolType===SuperMap.Plot.SymbolType.AVOIDREGION)for(var o=0;o<this.avoidRegions.length;o++)if(this.avoidRegions[o]===i){this.avoidRegions.splice(o,1);break}}this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)},getSymbolData:function(){return this._setSymbolData(),this.symbolData},redraw:function(){this._clearComponents(),this._redrawComponents()},_redrawComponents:function(){"none"!==this.style.display&&(this._calculateParts(),this._calculateAvoidRegions())},_calculateAvoidRegions:function(){if(0!==this.avoidRegions.length){for(var t=this.components.slice(),e=0;e<this.components.length;e++)this.components[e].removeEventParent(this),this.components[e]instanceof a||(this.components[e].onRemove(),delete this.components[e]);this.components=[];for(var i=0;i<this.avoidRegions.length;i++)if(0!==this.avoidRegions[i].getLatLngs().length){var o=this.avoidRegions[i];t=this._layersWithoutAvoidRegion(o,t)}for(e=0;e<t.length;e++)this._addComponents(t[e])}},_layersWithoutAvoidRegion:function(t,e){for(var i=[],o=0;o<e.length;o++){var n=e[o];if(n instanceof a)i=i.concat(this._layersWithoutAvoidRegion(t,n.components)),n._clearComponents();else{if(1===t._relationToLayer(n))continue;if(n instanceof s.Text||0!==t._relationToLayer(n))i.push(n);else if(n instanceof L.Polygon){c={};c=SuperMap.Util.copyAttributes(c,n.options);var l=L.Util.latLngsToSuperMapPoints(n.getLatLngs()[0][0]),r=L.Util.latLngsToSuperMapPoints(n.getLatLngs()[0][n.getLatLngs()[0].length-1]);SuperMap.Plot.PlottingUtil.isSamePt(l[0],r[0])||n.getLatLngs()[0].push(n.getLatLngs()[0][0]);var l=L.Util.latLngsToSuperMapPoints(n.getLatLngs()[0][0]),r=L.Util.latLngsToSuperMapPoints(n.getLatLngs()[0][n.getLatLngs()[0].length-1]);SuperMap.Plot.PlottingUtil.isSamePt(l[0],r[0])||n.getLatLngs()[0].push(n.getLatLngs()[0][0]);for(var u=0;u<n.getLatLngs().length;u++)for(var p=t._getWithoutPts(n.getLatLngs()[u],!0),h=0;h<p.length;h++){y=L.polyline(L.Util.superMapPointsToLatLngs(p[h]),c);i.push(y)}}else if(n instanceof L.Polyline){var c={};c=SuperMap.Util.copyAttributes(c,n.options),!0===this._isCanFill()&&0===this.components.length&&(n.options.weight=0,this._addComponents(n));for(var p=t._getWithoutPts(n.getLatLngs(),!1),h=0;h<p.length;h++){c.fill=!1;var y=L.polyline(L.Util.superMapPointsToLatLngs(p[h]),c);i.push(y)}}}}return i},_isDot:function(){return this.symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL||this.symbolType===SuperMap.Plot.SymbolType.GROUPOBJECT||this.symbolType===SuperMap.Plot.SymbolType.FLAGGROUP||this.symbolType===SuperMap.Plot.SymbolType.ROUTENODE||this.symbolType===SuperMap.Plot.SymbolType.AIRDEPLOYMENT||this.symbolType===SuperMap.Plot.SymbolType.NAVYDEPLOYMENT},_resizeOffset:function(t,e,i){var o=L.latLng(0,0);switch(e){case 1:o.lng=t.lng-i.getWest(),o.lat=t.lat-i.getNorth();break;case 3:o.lng=t.lng-i.getEast(),o.lat=t.lat-i.getNorth();break;case 6:o.lng=t.lng-i.getWest(),o.lat=t.lat-i.getSouth();break;case 8:o.lng=t.lng-i.getEast(),o.lat=t.lat-i.getSouth();break;case 2:o.lng=0,o.lat=t.lat-i.getNorth();break;case 4:o.lng=t.lng-i.getWest(),o.lat=0;break;case 5:o.lng=t.lng-i.getEast(),o.lat=0;break;case 7:o.lng=0,o.lat=t.lat-i.getSouth()}return o},_resizeBounds:function(t,e,i){var o=i.getWest(),n=i.getEast(),s=i.getNorth(),a=i.getSouth();switch(e){case 1:s=t.lat,o=t.lng;break;case 3:s=t.lat,n=t.lng;break;case 6:o=t.lng,a=t.lat;break;case 8:n=t.lng,a=t.lat;break;case 2:s=t.lat;break;case 4:o=t.lng;break;case 5:n=t.lng;break;case 7:a=t.lat}var l=new L.LatLngBounds;return l._southWest=L.latLng(a,o),l._northEast=L.latLng(s,n),l},_getHandleCount:function(){switch(this.symbolType){case SuperMap.Plot.SymbolType.ELLIPSESYMBOL:case SuperMap.Plot.SymbolType.CIRCLESYMBOL:case SuperMap.Plot.SymbolType.ARCSYMBOL:case SuperMap.Plot.SymbolType.CHORDSYMBOL:case SuperMap.Plot.SymbolType.PIESYMBOL:case SuperMap.Plot.SymbolType.AVOIDREGION:case SuperMap.Plot.SymbolType.LINERELATION:case SuperMap.Plot.SymbolType.SYMBOLTEXT:case SuperMap.Plot.SymbolType.SYMBOLTEXT1:return this.getLatLngs().length+9;default:return 9}},_getHandlePointsByBounds:function(t){if(void 0!==t&&null!==t||(t=this.getBounds()),null!==t){var e=this._map.latLngToLayerPoint(L.latLng(t.getNorth(),t.getEast()));e.x+=5,e.y-=5;var i=this._map.latLngToLayerPoint(L.latLng(t.getNorth(),t.getWest()));i.x-=5,i.y-=5;var o=this._map.latLngToLayerPoint(L.latLng(t.getSouth(),t.getEast()));o.x+=5,o.y+=5;var n=this._map.latLngToLayerPoint(L.latLng(t.getSouth(),t.getWest()));n.x-=5,n.y+=5;for(var s=L.point((e.x+i.x)/2,e.y),a=L.point(e.x,(e.y+o.y)/2),l=L.point((o.x+n.x)/2,o.y),r=L.point(i.x,(i.y+n.y)/2),u=this._map.layerPointToLatLng(e),p=this._map.layerPointToLatLng(i),h=this._map.layerPointToLatLng(o),c=this._map.layerPointToLatLng(n),y=this._map.layerPointToLatLng(a),g=this._map.layerPointToLatLng(l),d=this._map.layerPointToLatLng(r),f=this._map.layerPointToLatLng(s),S=[p.clone(),f.clone(),u.clone(),d.clone(),y.clone(),c.clone(),g.clone(),h.clone()],P=1,m=0;m<S.length;m++)S[m].nHandle=P++;return S}},_getHandleAndRotatePoints:function(){var t={};t.handlePoints=[],t.rotatePoints=[];var e=this.getBounds();if(!e.isValid())return t;this._getHandleCount()>9?this.symbolType===SuperMap.Plot.SymbolType.REGULARPOLYGON?(t.handlePoints.push(this.getLatLngs()[0].clone()),t.handlePoints.push(this.getLatLngs()[this.getLatLngs().length-1].clone())):t.handlePoints=L.Util.cloneLatLngs(this.getLatLngs()):t.handlePoints=this._getHandlePointsByBounds(e);for(var i=0;i<t.handlePoints.length;i++)t.handlePoints[i].tag=i;if(!0===this.getLocked())return t;if(this.symbolType!==SuperMap.Plot.SymbolType.ANNOFRAMESYMBOL&&this.symbolType!==SuperMap.Plot.SymbolType.LINERELATION&&this.symbolType!==SuperMap.Plot.SymbolType.SYMBOLTEXT&&this.symbolType!==SuperMap.Plot.SymbolType.SYMBOLTEXT1&&this.symbolType!==SuperMap.Plot.SymbolType.SYMBOLTEXTBOX&&this.symbolType!==SuperMap.Plot.SymbolType.LINEMARKING&&this.symbolType!==SuperMap.Plot.SymbolType.ANNOFRAMESYMBOLM&&this.symbolType!==SuperMap.Plot.SymbolType.ROUTENODE&&this.symbolType!==SuperMap.Plot.SymbolType.LITERATESIGN&&this.symbolType!==SuperMap.Plot.SymbolType.SATELLITETIMEWINDOWS&&this.symbolType!==SuperMap.Plot.SymbolType.AVOIDREGION&&this.symbolType!==SuperMap.Plot.SymbolType.NAVYDEPLOYMENT&&this.symbolType!==SuperMap.Plot.SymbolType.RECTANGLESYMBOL&&this.symbolType!==SuperMap.Plot.SymbolType.AIRDEPLOYMENT){var o=this._map.latLngToLayerPoint(L.latLng(e.getNorth(),e.getEast())),n=L.point(o.x+15,o.y-15),s=this._map.layerPointToLatLng(n);s.isRotatePoint=!0,t.rotatePoints=[s]}return t},_parseSymbolData:function(){if(null!==this.symbolData){if(this.libID=parseInt(this.symbolData.libID),this.code=parseInt(this.symbolData.code),this.symbolType=this.symbolData.symbolType,this.symbolName=this.symbolData.symbolName,this.textContent=this.symbolData.textContent,void 0!==this.symbolData.dScale?this.dScale=this.symbolData.dScale:this.dScale=this.symbolData.scale2D.x,void 0!==this.symbolData.dRotate?this.dRotate=this.symbolData.dRotate:this.dRotate=this.symbolData.rotate2D.x,void 0!==this.symbolData.uuid&&(this.uuid=this.symbolData.uuid),void 0!==this.symbolData.associatedUuid&&(this.associatedUuid=this.symbolData.associatedUuid),void 0!==this.symbolData.annotationPosition&&(this.annotationPosition=this.symbolData.annotationPosition),void 0!==this.symbolData.isLocked&&(this.isLocked=this.symbolData.isLocked),void 0!==this.symbolData.note&&(this.note=this.symbolData.note),void 0!==this.symbolData.custom&&(this.custom=this.symbolData.custom),this.symbolData.extendProperty)for(var t=0;t<this.symbolData.extendProperty.length;t++){var e=this.symbolData.extendProperty[t];this.extendProperty.addProperty(e.key,e.value)}if(this.symbolData.hasOwnProperty("subSymbols")&&this.symbolData.subSymbols&&0!==this.symbolData.subSymbols.length){this.subSymbols=[];for(n=0;n<this.symbolData.subSymbols.length;n++){var i=this.symbolData.subSymbols[n].libID;void 0===i&&(i=this.libID);var o=this.symbolData.subSymbols[n].code;if(void 0!==o){s={};void 0!==this.symbolData.subSymbols[n]&&(s.symbolData=this.symbolData.subSymbols[n].symbolData),void 0!==this.symbolData.subSymbols[n].textContent&&(s.textContent=this.symbolData.subSymbols[n].textContent),void 0!==this.symbolData.subSymbols[n].totalNum&&(s.totalNum=this.symbolData.subSymbols[n].totalNum),this.subSymbols.push(new SuperMap.Plot.SubSymbol(i,o,s))}}}if(this.symbolData.avoidRegions&&0!==this.symbolData.avoidRegions.length)for(var n=0;n<this.symbolData.avoidRegions.length;n++){var s={libID:0,code:SuperMap.Plot.SymbolType.AVOIDREGION,map:this._map,symbolData:this.symbolData.avoidRegions[n][0]},a=L.supermap.plotting.avoidRegion(0,SuperMap.Plot.SymbolType.AVOIDREGION,[],s);a.style=SuperMap.Plot.AnalysisSymbol.getStyle(this.symbolData.avoidRegions[n][1]),this.avoidRegions.push(a)}}},_setSymbolData:function(t){if(void 0===t&&(t=!0),null===this.symbolData&&(this.symbolData={}),this.symbolData.hasOwnProperty("type")||(this.symbolData.type="GRAPHICOBJECT"),this.symbolData.hasOwnProperty("rotate2D")?this.symbolData.rotate2D.x=this.dRotate:this.symbolData.rotate2D={x:this.dRotate,y:0,z:0},this.symbolData.hasOwnProperty("scale2D")?this.symbolData.scale2D.x=this.dScale:this.symbolData.scale2D={x:this.dScale,y:0,z:0},this.symbolData.libID=this.libID,this.symbolData.code=this.code,this.symbolData.isEdit=!0,this.symbolData.uuid=this.uuid,this.symbolData.symbolType=this.symbolType,this.symbolData.symbolName=this.symbolName,this.symbolData.associatedUuid=this.associatedUuid,this.symbolData.annotationPosition=this.annotationPosition,this.symbolData.textContent=this.textContent,this.symbolData.isLocked=this.isLocked,this.symbolData.note=this.note,this.symbolData.custom=this.custom,this.symbolType!==SuperMap.Plot.SymbolType.DOTSYMBOL&&this.symbolType!==SuperMap.Plot.SymbolType.GROUPOBJECT){this.symbolData.subSymbols=[];for(s=0;s<this.getSubSymbols().length;s++){var e=this.getSubSymbols()[s];t?this.symbolData.subSymbols.push({libID:e.libID,code:e.code,symbolData:e.symbolData,textContent:e.textContent,totalNum:e.totalNum}):this.symbolData.subSymbols.push({libID:e.libID,code:e.code,textContent:e.textContent,totalNum:e.totalNum})}}this.symbolData.extendProperty=[];for(var i=this.getExtendProperty().getPropertyCount(),o=0;o<i;o++){var n=this.getExtendProperty().getPropertyByIndex(o);this.symbolData.extendProperty.push({key:n.key,value:n.value})}this.symbolData.avoidRegions=[];for(var s=0;s<this.avoidRegions.length;s++){var a={};SuperMap.Plot.AnalysisSymbol.setStyle(this.avoidRegions[s].style,a),this.symbolData.avoidRegions.push([this.avoidRegions[s].getSymbolData(),a])}},_getSymbolWayType:function(){return 22===this.libID&&1016===this.code?0===this.getArrowBodyType()?SuperMap.Plot.AddPoint_WayType.POLYLINE:SuperMap.Plot.AddPoint_WayType.CURVE:SuperMap.AlgoSymbolFactory.getSymbolWayType(this.libID,this.code)},_reView:function(){},_mergeDefaultStyle:function(){var t=L.supermap.plotting.getControl(this._map,this.serverUrl).getDefaultStyle();if(t&&!0===t.defaultFlag&&!1===this.isEdit){if(this.symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL){if(-1!==t.dotSymbolSize){var e=this.symbolSizeInLib.w;if(this.symbolSizeInLib.h>this.symbolSizeInLib.w&&(e=this.symbolSizeInLib.h),0===e||0===t.dotSymbolSize)0!==this.symbolSize.w&&0!==this.symbolSize.h||(this.symbolSize.w=this.symbolSizeInLib.w,this.symbolSize.h=this.symbolSizeInLib.h);else{var i=t.dotSymbolSize/e;this.symbolSize.w=i*this.symbolSizeInLib.w,this.symbolSize.h=i*this.symbolSizeInLib.h}}-1!==t.dotTextSpace&&(this.space=t.dotTextSpace),-1!==t.flagTextSize&&(this.flagTextSize=t.flagTextSize)}this.symbolType!==SuperMap.Plot.SymbolType.DOTSYMBOL&&this.symbolType!==SuperMap.Plot.SymbolType.ALGOSYMBOL||(-1!==t.maxScale&&(this.maxScale=t.maxScale),-1!==t.minScale&&(this.minScale=t.minScale)),-1!==t.scaleByMap&&(this.scaleByMap=t.scaleByMap)}},_removeRedundancySymbolData:function(t){null!==t&&(t.hasOwnProperty("center")&&delete t.center,t.hasOwnProperty("id")&&delete t.id,t.hasOwnProperty("parts")&&delete t.parts,t.hasOwnProperty("points")&&delete t.points,t.hasOwnProperty("position")&&delete t.position,t.hasOwnProperty("prjCoordSys")&&delete t.prjCoordSys,t.hasOwnProperty("rotationX")&&delete t.rotationX,t.hasOwnProperty("rotationY")&&delete t.rotationY,t.hasOwnProperty("rotationZ")&&delete t.rotationZ,t.hasOwnProperty("scaleX")&&delete t.scaleX,t.hasOwnProperty("scaleY")&&delete t.scaleY,t.hasOwnProperty("scaleZ")&&delete t.scaleZ)},destroy:function(){this.dragging=null,this.uuid=null,this.libID=null,this.code=null,this.minEditPts=0,this.maxEditPts=0,this.symbolType=null,this.symbolName=null,this.isSelected=!1,this.enableEdit=!1,this.note="",this.extendProperty=null,this.custom=null,this.symbolData=null,this.dScale=null,this.textContent=null,this.annotationPosition=null,this.subSymbols=null,this.fromZoom=null,this.style=null,this.isLocked=!1,this.anchorPoint=null,this.avoidRegions=null,this.ownerGroup=null,this.geoSymbolTexts=null,this.isEdit=null,this.layer.removeFeatures(this),this._render=null,this.layer=null},toGeoJsonStr:function(){return this.getSymbolData(),SuperMap.PlotUtil.toJSON(this.symbolData)}}));L.supermap.plotting.PlottingObject=a,a.prototype._containsPoint=function(t){if(this.symbolType!==SuperMap.Plot.SymbolType.TEXTSYMBOL)return!1;for(var e in this.components)if(this.components[e]._containsPoint(t))return!0;return!1}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Route=void 0;var o=i(4),n=i(7),s=i(1),a=i(17),l=i(38),r=i(18),u=e.Route=o.PlottingObject.extend({routeNodes:[],nextRouteNodeType:SuperMap.Plot.RouteNodeType.TURNING,arrRoutePts:[],initialize:function(t,e,i,n){this.scaleByMap=!0,this.minEditPts=1,this.maxEditPts=9999,this.routeNodes=[],this.arrRoutePts=[],o.PlottingObject.prototype.initialize.call(this,t,e,i,n)},destroy:function(){this.routeNodes=null,this.arrRoutePts=null,o.PlottingObject.prototype.destroy.apply(this,arguments)},highlight:function(t){this.highlightFlag=!0,this.highlightStyle=t;for(var e in this.components)if(this.components[e]instanceof s.AlgoSymbol){var i=SuperMap.Util.copyAttributes(this.components[e].style,t);this.components[e].setStyle(i)}},unhighlight:function(){for(var t in this.components)if(this.components[t]instanceof s.AlgoSymbol){var e=SuperMap.Util.copyAttributes(this.components[t].style,this.style);this.components[t].setStyle(e)}this.highlightFlag=!1,this.highlightStyle=null},blinkRoute:function(t,e,i,o){void 0===i&&(i=2),void 0===t&&(t={color:"#ff0000"}),void 0===e&&(e={color:"#0000ff"}),void 0===o&&(o=300);for(var n=[],a=0;a<i;a++)n.push(t),n.push(e);!0===this.highlightFlag&&this.highlightStyle&&null!==this.highlightStyle?n.push(this.highlightStyle):n.push(this.lineStyle);for(var l=this,r=n.length,u=0;u<r;u++)setTimeout(function(){for(var t in l.components)if(l.components[t]instanceof s.AlgoSymbol){var e=SuperMap.Util.copyAttributes(l.components[t].style,n[0]);l.components[t].setStyle(e)}n.splice(0,1)},o*u)},applyTextStyle:function(t){for(var e in this.components)(this.components[e]instanceof a.LiterateSign||this.components[e]instanceof l.PathText)&&this.components[e].setStyle(SuperMap.Util.copyAttributes(this.components[e].style,t));for(var i=0;i<this.routeNodes.length;i++)for(var o=0;o<this.routeNodes[i].towardNodes.length;o++)this.routeNodes[i].towardNodes[o].style=SuperMap.Util.copyAttributes(this.routeNodes[i].towardNodes[o].style,t)},applyLineStyle:function(t){for(var e in this.components)this.components[e]instanceof a.LiterateSign||this.components[e]instanceof l.PathText||this.components[e]instanceof r.RouteNode||this.components[e].setStyle(SuperMap.Util.copyAttributes(this.components[e].style,t));this.style=SuperMap.Util.copyAttributes(this.style,t)},applyNodeStyle:function(t){for(var e in this.components)this.components[e]instanceof r.RouteNode&&this.components[e].setStyle(SuperMap.Util.copyAttributes(this.components[e].style,t));for(var i=0;i<this.routeNodes.length;i++)this.routeNodes[i].style=SuperMap.Util.copyAttributes(this.routeNodes[i].style,t)},deleteRouteNode:function(t){if(null!==this._getNodeByUuid(t.id)){var e=this._getNodeFeature(t);e.isSelected&&null!==this._map.getPlotEditControl()&&this._map.getPlotEditControl().unselectFeatures(e),this.arrRoutePts=[];for(var i=0;i<this.routeNodes.length;i++)for(var o=0;o<this.routeNodes[i].towardNodes.length;o++)if(this.routeNodes[i].towardNodes[o].routeNodeId!==t.id);else{this.routeNodes[i].towardNodes.splice(o,1);for(n=0;n<t.towardNodes.length;n++)t.towardNodes[n].routeNodeId!==this.routeNodes[i].id&&this.routeNodes[i].towardNodes.push(t.towardNodes[n])}for(var n=0;n<this.routeNodes.length;n++)this.routeNodes[n].id===t.id&&this.routeNodes.splice(n,1);this.redraw()}},updateRouteNode:function(t){if(0!==this.arrRoutePts.length){this.arrRoutePts=[];var e=this._getNodeByUuid(t.id);if(null!==e?e=t:this.routeNodes.push(t),this.redraw(),this.highlightFlag){var i=SuperMap.Util.cloneObject(this.highlightStyle);this.highlightStyle&&SuperMap.Util.copyAttributes(i,this.highlightStyle),this.highlight(i)}}else{var o=this._getNodeFeature(t);if(null!==o){o.routeNode=t,o.redraw();for(var n=this._getFeatureStartWith(t),s=0;s<n.length;s++)n[s].latLngs[0]=L.latLng(t.y,t.x),n[s].redraw();for(var a=this._getFeatureEndWith(t),l=0;l<a.length;l++)a[l].latLngs[1]=L.latLng(t.y,t.x),a[l].redraw();return}}},insertRouteNode:function(t,e,i,o,n,s,a,l){if(void 0===o&&(o=!0),this.arrRoutePts=[],o&&i)for(var r=0;r<e.towardNodes.length;r++)e.towardNodes[r].routeNodeId===i.id&&e.towardNodes.splice(r,1);if(null===this._getNodeByUuid(t.id)&&this.routeNodes.push(t),e){for(var u=!1,p=0;p<e.towardNodes.length;p++)e.towardNodes[p].routeNodeId===t.id&&(u=!0);!1===u&&((c=new SuperMap.Plot.TowardNode).routeNodeId=t.id,void 0!==n&&(c.textContent=n),void 0!==s&&(c.relLineText=s),e.towardNodes.push(c))}if(i){for(var h=!1,p=0;p<t.towardNodes.length;p++)t.towardNodes[p].routeNodeId===i.id&&(h=!0);if(!1===h){var c=new SuperMap.Plot.TowardNode;c.routeNodeId=i.id,void 0!==a&&(c.textContent=a),void 0!==l&&(c.relLineText=l),t.towardNodes.push(c)}}this.redraw()},addRouteNode:function(t,e,i,o){if(null===this._getNodeByUuid(t.id)&&(this.arrRoutePts=[],this.routeNodes.push(t)),e){for(var n=!1,s=0;s<e.towardNodes.length;s++)e.towardNodes[s].routeNodeId===t.id&&(n=!0);if(!1===n){var a=new SuperMap.Plot.TowardNode;a.routeNodeId=t.id,void 0!==i&&(a.textContent=i),void 0!==o&&(a.relLineText=o),e.towardNodes.push(a)}}this.redraw()},_addRouteNodeByNode:function(t,e,i){if(null===this._getNodeByUuid(t.id))return null;var o=new SuperMap.Plot.RouteNode;if(o.x=t.x,o.y=t.y,o.name="",o.type=this.nextRouteNodeType,!0===e)(n=new SuperMap.Plot.TowardNode).routeNodeId=t.id,o.towardNodes.push(n);else if(!0===i){var n=new SuperMap.Plot.TowardNode;n.routeNodeId=o.id,t.towardNodes.push(n)}return this.routeNodes.push(o),this.redraw(),this._getNodeFeature(o)},_addRouteNodeByPosWithoutLast:function(t,e){for(var i=0;i<this.routeNodes.length;i++){var o=this.routeNodes[i];if(null!==o&&(o.towardNodes&&null!==o.towardNodes))for(var n=0;n<o.towardNodes.length;n++){var s=this._getNodeByUuid(o.towardNodes[n].routeNodeId);if(null!==s){var a=SuperMap.Plot.PlottingUtil.computePointToLineMinDis({x:t.lng,y:t.lat},[{x:o.x,y:o.y},{x:s.x,y:s.y}]);if(-1!==a.index&&a.minDis<e){var l=new SuperMap.Plot.RouteNode;l.x=t.lng,l.y=t.lat,l.type=this.nextRouteNodeType,l.name="",l.towardNodes.push(o.towardNodes[n]),o.towardNodes.splice(n,1);var r=new SuperMap.Plot.TowardNode;return r.routeNodeId=l.id,o.towardNodes.push(r),this.arrRoutePts=[],this.routeNodes.push(l),this.redraw(),this._getNodeFeature(l)}}}}return null},_addRouteNodeByPos:function(t,e){for(var i=[],o=0;o<this.routeNodes.length;o++){var n=this.routeNodes[o];if(null!==n&&(n.towardNodes&&null!==n.towardNodes)){0===n.towardNodes.length&&i.push(n);for(var s=0;s<n.towardNodes.length;s++){var a=this._getNodeByUuid(n.towardNodes[s].routeNodeId);if(null!==a){var l=SuperMap.Plot.PlottingUtil.computePointToLineMinDis({x:t.lng,y:t.lat},[{x:n.x,y:n.y},{x:a.x,y:a.y}]);if(-1!==l.index&&l.minDis<e)return(r=new SuperMap.Plot.RouteNode).x=t.lng,r.y=t.lat,r.type=this.nextRouteNodeType,r.name=(this.routeNodes.length+1).toString(),r.towardNodes.push(n.towardNodes[s]),n.towardNodes.splice(s,1),(u=new SuperMap.Plot.TowardNode).routeNodeId=r.id,n.towardNodes.push(u),this.arrRoutePts=[],this.routeNodes.push(r),void this.redraw()}}}}var r=new SuperMap.Plot.RouteNode;if(r.x=t.lng,r.y=t.lat,0!==this.routeNodes.length?r.type=this.nextRouteNodeType:r.type=SuperMap.Plot.RouteNodeType.AIMING,r.name=(this.routeNodes.length+1).toString(),0!==i.length){var u=new SuperMap.Plot.TowardNode;u.routeNodeId=r.id,i[0].towardNodes.push(u)}this.routeNodes.push(r),this.redraw()},setNextRouteNodeType:function(t){this.nextRouteNodeType=t},_getNodeFeature:function(t){for(var e in this.components)if(this.components[e]instanceof r.RouteNode&&this.components[e].routeNode.id===t.id)return this.components[e];return null},_getFeatureStartWith:function(t){var e=[];for(var i in this.components)this.components[i]._startRouteNode&&this.components[i]._startRouteNode===t.id&&e.push(this.components[i]);return e},_getFeatureEndWith:function(t){var e=[];for(var i in this.components)this.components[i]._endRouteNode&&this.components[i]._endRouteNode===t.id&&e.push(this.components[i]);return e},_selectNodeLayer:function(t,e){L.Util.isArray(t)||(t=[t]);for(var i in this.components)if((this.components[i]instanceof r.RouteNode||this.components[i]instanceof a.LiterateSign)&&this.components[i].getBounds().contains(t))return this.components[i];return null},redraw:function(){if(this._initRoute(),this.arrRoutePts&&0!==this.arrRoutePts.length)for(e=0;e<this.arrRoutePts.length;e++){var t=this.arrRoutePts[e];t.length<2||((a=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.POLYLINESYMBOL,t,{enableEdit:!1},this.style)).route=this,this._addComponents(a))}for(var e=0;e<this.routeNodes.length;e++){var i=this.routeNodes[e];if(null!==i&&(i.towardNodes&&null!==i.towardNodes)){for(var o=0;o<i.towardNodes.length;o++){var n=this._getNodeByUuid(i.towardNodes[o].routeNodeId);if(null!==n){var s=[];if(s.push(L.latLng(i.y,i.x)),s.push(L.latLng(n.y,n.x)),0===this.arrRoutePts.length){var a=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.POLYLINESYMBOL,s,{enableEdit:!1},this.style);this._addComponents(a),a._startRouteNode=i.id,a._endRouteNode=n.id}var l=i.towardNodes[o].textContent;if(null!==l){var r=i.towardNodes[o].relLineText;void 0!==r&&null!==r||(r=SuperMap.Plot.RelLineText.ONLEFTLINE);var u=SuperMap.Util.copyAttributes(SuperMap.PlotUtil.cloneObject(this.style),i.towardNodes[o].style),p=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.PATHTEXT,s,{relLineText:r,showPathLine:!1,textContent:l,enableEdit:!1},u);this._addComponents(p),p._startRouteNode=i.id,p._endRouteNode=n.id}}}this._createRouteNode(i)}}this._finishRoute()},_initRoute:function(){this.prevRouteNode=[],this.prevLiterateSign=[];for(var t=0;t<this.components.length;t++)this.components[t]instanceof r.RouteNode?this.prevRouteNode.push(this.components[t]):this.components[t]instanceof a.LiterateSign?this.prevLiterateSign.push(this.components[t]):this.components[t]._clearComponents();this.components=[]},_finishRoute:function(){for(t=0;t<this.prevRouteNode.length;t++)this.prevRouteNode[t]._clearComponents();for(var t=0;t<this.prevLiterateSign.length;t++)this.prevLiterateSign[t]._clearComponents();this.prevRouteNode=[],this.prevLiterateSign=[]},_createRouteNode:function(t){if(null!==t){for(var e=0;e<this.prevRouteNode.length;){if(this.prevRouteNode[e].routeNode.id===t.id)return this.prevRouteNode[e].routeNode=t,this.prevRouteNode[e].redraw(),this.components.push(this.prevRouteNode[e]),void this.prevRouteNode.splice(e,1);e++}var i=SuperMap.Util.copyAttributes(SuperMap.PlotUtil.cloneObject(this.style),t.style),o=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.ROUTENODE,[L.latLng(t.y,t.x)],{routeNode:t,route:this},i);this._addComponents(o)}},_addComponents:function(t){n.GroupObject.prototype._addComponents.call(this,t)},_clearComponents:function(){n.GroupObject.prototype._clearComponents.call(this)},clone:function(){var t=SuperMap.PlotUtil.cloneObject(this.getSymbolData());return t.uuid=SuperMap.PlotUtil.generateUuid(),L.supermap.plotting.PlottingObject.createSymbol(this.libID,this.code,null,{symbolData:t,serverUrl:this.serverUrl})},_parseSymbolData:function(){if(o.PlottingObject.prototype._parseSymbolData.call(this),this.symbolData){this.routeNodes=this.symbolData.routeNodes,this.routeNodes=[];for(i=0;i<this.symbolData.routeNodes.length;i++){var t=new SuperMap.Plot.RouteNode;null===this.symbolData.routeNodes[i].id&&void 0===this.symbolData.routeNodes[i].id||(t.id=this.symbolData.routeNodes[i].id),t.type=this.symbolData.routeNodes[i].type,t.name=this.symbolData.routeNodes[i].name,t.rotate=this.symbolData.routeNodes[i].rotate,this.symbolData.routeNodes[i].hasOwnProperty("positionPoint")?(t.x=this.symbolData.routeNodes[i].positionPoint.x,t.y=this.symbolData.routeNodes[i].positionPoint.y):(t.x=this.symbolData.routeNodes[i].x,t.y=this.symbolData.routeNodes[i].y),t.towardNodes=[];for(s=0;s<this.symbolData.routeNodes[i].towardNodes.length;s++){var e=new SuperMap.Plot.TowardNode;e.routeNodeId=this.symbolData.routeNodes[i].towardNodes[s].routeNodeId,e.relLineText=this.symbolData.routeNodes[i].towardNodes[s].relLineText,e.textContent=this.symbolData.routeNodes[i].towardNodes[s].textContent,e.offsetX=this.symbolData.routeNodes[i].towardNodes[s].offsetX,e.offsetY=this.symbolData.routeNodes[i].towardNodes[s].offsetY,e.style=this.symbolData.routeNodes[i].towardNodes[s].style,t.towardNodes.push(e)}t.style=this.symbolData.routeNodes[i].style,this.routeNodes.push(t)}this.arrRoutePts=[];for(var i=0;i<this.symbolData.arrRoutePts.length;i++){for(var n=[],s=0;s<this.symbolData.arrRoutePts[i].length;s++)this.symbolData.arrRoutePts[i][s].hasOwnProperty("x")&&this.symbolData.arrRoutePts[i][s].hasOwnProperty("y")?n.push(L.latLng(this.symbolData.arrRoutePts[i][s].y,this.symbolData.arrRoutePts[i][s].x)):n.push(L.latLng(this.symbolData.arrRoutePts[i][s].lat,this.symbolData.arrRoutePts[i][s].lng));this.arrRoutePts.push(n)}this.lineStyle=this.symbolData.lineStyle}},_setSymbolData:function(){o.PlottingObject.prototype._setSymbolData.call(this),this.symbolData&&(this.symbolData.routeNodes=this.routeNodes,this.symbolData.arrRoutePts=this.arrRoutePts,this.symbolData.lineStyle=this.lineStyle)},_getNodeByUuid:function(t){for(var e=0;e<this.routeNodes.length;e++)if(this.routeNodes[e].id===t)return this.routeNodes[e];return null},_reView:function(){if(this.fromZoom!==this._map.getZoom())for(var t in this.components)this.components[t].symbolType!==SuperMap.Plot.SymbolType.POLYLINESYMBOL&&this.components[t]._reView();this.fromZoom=this._map.getZoom(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)}});L.supermap.plotting.Route=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=e.GOAnimation=L.Evented.extend({startTime:0,duration:5,repeat:!1,name:null,animationState:SuperMap.Plot.GOAnimationState.UNKNOWN,goFeature:null,animationGOFeature:null,innerStartTime:0,lastExecute:!1,pauseTime:0,ratio:0,symbolTexts:[],initialize:function(t){SuperMap.Util.extend(this,t)},destroy:function(){this.showAnimationFeature(!1),this.removeAnimationFeature(),this.goFeature=null,this.animationGOFeature=null,this.name=null,this.animationState=SuperMap.Plot.GOAnimationState.UNKNOWN;for(var t=0;t<this.symbolTexts.length;t++)this.symbolTexts[t]=null;this.symbolTexts=[]},setGOFeature:function(t){if(void 0===t||null===t||null===t.layer)return!1;var e=L.supermap.plotting.getControl().getGOAnimationManager();if(null===e.goAnimationLayer)return!1;if(this.goFeature=t,this.animationGOFeature=this.cloneGOFeature(t),null===this.animationGOFeature)return!1;if(e.goAnimationLayer.addFeatures(this.animationGOFeature),this.getGOAnimationType()===SuperMap.Plot.GOAnimationType.ANIMATION_WAY&&0!==t.geoSymbolTexts.length)for(var i=0;i<t.geoSymbolTexts.length;i++)if(null!==(s=t.geoSymbolTexts[i])){var o=s.getSymbolData();o.associatedUuid=this.animationGOFeature.uuid;var n={symbolData:o,map:s.map,serverUrl:s.serverUrl},s=L.supermap.plotting.PlottingObject.createSymbol(s.libID,s.code,null,n,null);this.symbolTexts.push(s),e.goAnimationLayer.addFeatures(s)}return this.showAnimationFeature(!1),!0},getGOFeature:function(){return this.goFeature},play:function(){var t=new Date;this.animationState===SuperMap.Plot.GOAnimationState.PAUSE?this.innerStartTime+=t.getTime()/1e3-this.pauseTime:this.innerStartTime=t.getTime()/1e3,this.lastExecute=!1,this.animationState=SuperMap.Plot.GOAnimationState.PLAYING;var e=L.supermap.plotting.getControl().getGOAnimationManager();this.goFeature.isSelected&&e.map.getPlotEditControl()&&e.map.getPlotEditControl().unselectFeatures(this.goFeature),this.showAnimationFeature(!0)},stop:function(){this.animationState=SuperMap.Plot.GOAnimationState.STOP},pause:function(){this.animationState=SuperMap.Plot.GOAnimationState.PAUSE;var t=new Date;this.pauseTime=t.getTime()/1e3},reset:function(){this.animationState=SuperMap.Plot.GOAnimationState.RESET,this.showAnimationFeature(!1)},execute:function(){return!1},canExecute:function(){if(this.animationState!==SuperMap.Plot.GOAnimationState.PLAYING)return!1;var t=(new Date).getTime()/1e3;if(this.innerStartTime+this.startTime>t)return!1;var e=this.getRatioByTime();return!(e>1&&this.lastExecute||e<0)},getRatioByTime:function(){if(this.animationState!==SuperMap.Plot.GOAnimationState.PLAYING)return 0;var t=(new Date).getTime()/1e3;if(this.innerStartTime+this.startTime>t)return 0;var e=(t-this.innerStartTime-this.startTime)/this.duration;return e>=1&&!this.lastExecute?this.repeat?(this.innerStartTime=(new Date).getTime()/1e3,e=0,this.lastExecute=!1,this.animationState=SuperMap.Plot.GOAnimationState.PLAYING):(e=1,this.lastExecute=!0,this.animationState=SuperMap.Plot.GOAnimationState.STOP):e<0&&(e=0),this.ratio=e,e},showAnimationFeature:function(t){if(null!==this.animationGOFeature&&null!==this.animationGOFeature.style&&(this.resetAnimationFeature(t),this.animationGOFeature.redraw()),null!==this.goFeature&&null!==this.goFeature.style){if(t){this.goFeature.style.display="none";for(e=0;e<this.goFeature.geoSymbolTexts.length;e++)this.goFeature.geoSymbolTexts[e].style.display="none"}else{this.goFeature.style.display="display";for(e=0;e<this.goFeature.geoSymbolTexts.length;e++)this.goFeature.geoSymbolTexts[e].style.display="display"}this.goFeature.redraw();for(var e=0;e<this.goFeature.geoSymbolTexts.length;e++)this.goFeature.geoSymbolTexts[e].redraw()}},resetAnimationFeature:function(t){if(this.animationGOFeature.symbolData=SuperMap.PlotUtil.cloneObject(this.goFeature.getSymbolData()),this.animationGOFeature.symbolData.uuid=this.animationGOFeature.uuid,this.animationGOFeature._parseSymbolData(),t){this.animationGOFeature.style.display="display";for(e=0;e<this.symbolTexts.length;e++)this.symbolTexts[e].style.display="display",this.symbolTexts[e].redraw()}else{this.animationGOFeature.style.display="none";for(var e=0;e<this.symbolTexts.length;e++)this.symbolTexts[e].style.display="none",this.symbolTexts[e].redraw();this.getGOAnimationType()===SuperMap.Plot.GOAnimationType.ANIMATION_WAY&&null!==this.pathFeature&&(this.pathFeature.options.opacity=0,this.pathFeature.redraw())}},cloneGOFeature:function(t){var e=null,i=L.supermap.plotting.getControl().getGOAnimationManager().goAnimations;if(null!==i)for(var o=0;o<i.length;o++){var n=i[o];if(n.goFeature===t){e=n.animationGOFeature;break}}return null===e&&((e=t.clone()).enableEdit=!1),e},removeAnimationFeature:function(){if(null!==this.animationGOFeature){var t=L.supermap.plotting.getControl().getGOAnimationManager(),e=t.goAnimations,i=!1;if(null!==e)for(n=0;n<e.length;n++){var o=e[n];if(o!==this&&o.animationGOFeature===this.animationGOFeature){i=!0;break}}if(!i){t.goAnimationLayer.removeFeatures(this.animationGOFeature);for(var n=0;n<this.symbolTexts.length;)t.goAnimationLayer.removeFeatures(symbolTexts[n])}}},getJSONData:function(){var t={};return t.goFeatureUuid=this.goFeature.uuid,t.name=this.name,t.startTime=this.startTime,t.duration=this.duration,t.repeat=this.repeat,t.type=this.getGOAnimationType(),t},fromJSONData:function(t){this.startTime=t.startTime,this.duration=t.duration,this.repeat=t.repeat}});L.supermap.plotting.GOAnimation=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.groupObject=e.GroupObject=void 0;var o=i(4),n=i(19),s=e.GroupObject=o.PlottingObject.extend({subObjects:[],initialize:function(t,e,i,n){this.subObjects=[],this.symbolName="组合对象",this.libID=0,this.code=SuperMap.Plot.SymbolType.GROUPOBJECT,this.symbolType=SuperMap.Plot.SymbolType.GROUPOBJECT,o.PlottingObject.prototype.initialize.call(this,t,e,i,n)},_addComponents:function(t){o.PlottingObject.prototype._addComponents.call(this,t),t.layer=this.layer,t.isEdit=!0,n.PlottingObjectDrag&&(t.dragging||(t.dragging=new n.PlottingObjectDrag(t))),null===t.fromZoom&&(t.fromZoom=this._map.getZoom()),this._map&&this._map.getPlotEditControl()&&t.enableEdit&&this._map.getPlotEditControl().enableEditFeatures(t)},_clearComponents:function(){this._map&&this._map.getPlotEditControl()&&this._map.getPlotEditControl().disableEditFeatures(this.components),o.PlottingObject.prototype._clearComponents.call(this)},_reView:function(){for(var t in this.components)this.components[t]._reView();this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)},move:function(t,e){for(var i in this.subObjects)this.subObjects[i].move(t,e)},redraw:function(){if("none"!==this.style.display){if(0!==this.subObjects.length&&0===this.components.length)for(var t=0,e=this.subObjects.length;t<e;t++)void 0!==this.subObjects[t].layer&&this.subObjects[t].layer.removeFeatures(this.subObjects[t]),this.subObjects[t].ownerGroup=this,this.subObjects[t].enableEdit=!0,this._addComponents(this.subObjects[t])}else this._clearComponents()},setRotate:function(t){null===this.anchorPoint&&(this.anchorPoint=this.getBounds().getCenter()),this._rotate(t,this.anchorPoint),this.dRotate=t,this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)},setScale:function(t){null===this.anchorPoint&&(this.anchorPoint=this.getBounds().getCenter()),this._resize(t/this.dScale,this.anchorPoint),this.dScale=t,this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)},_unGroupObject:function(){var t=null;if(0!==this.subObjects.length){t=this.subObjects.slice(),this._clearComponents();for(var e=0,i=t.length;e<i;e++)this.layer.addFeatures(t[e]),t[e].ownerGroup=null}return t},removeComponents:function(t){SuperMap.Util.isArray(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++){this.subObjects.splice(SuperMap.Util.indexOf(this.subObjects,t[i]),1);var o=SuperMap.Util.indexOf(this.components,t[i]);-1!==o&&(this.components[o]._clearComponents(),this.components.splice(o,1)),e.push(t[i])}for(var n=0;n<e.length;n++)e[n].addTo(this._map),e[n].ownerGroup=null;return e},setStyle:function(t){SuperMap.Util.extend(this.style,t);for(var e in this.components)this.components[e].symbolType===SuperMap.Plot.SymbolType.TEXTSYMBOL&&(t.labelAlign=this.components[e].style.labelAlign),this.components[e].setStyle(t)},_parseSymbolData:function(){if(null!==this.symbolData&&(o.PlottingObject.prototype._parseSymbolData.call(this),this.symbolData&&this.symbolData.subFeatures)){for(var t=[],e=0;e<this.symbolData.subFeatures.length;e++){var i=this.symbolData.subFeatures[e];i.uuid=SuperMap.PlotUtil.generateUuid();var n=L.supermap.plotting.PlottingObject.createSymbol(i.libID,i.code,null,{symbolData:i});t.push(n)}this.subObjects=t}},_setSymbolData:function(){if(o.PlottingObject.prototype._setSymbolData.call(this),this.symbolData){this.symbolData.subFeatures=[];for(var t=0;t<this.subObjects.length;t++)this.symbolData.subFeatures.push(this.subObjects[t].getSymbolData())}},_rotate:function(t,e){for(var i=0;i<this.components.length;i++)this.components[i].symbolType===SuperMap.Plot.SymbolType.TEXTSYMBOL?(void 0===this.components[i].style.labelRotation?this.components[i].style.labelRotation=-t:this.components[i].style.labelRotation+=-t,this.components[i].components[0].options.labelRotation=this.components[i].style.labelRotation,L.Util.rotateLatLngs(this.components[i].getLatLngs(),e,t),this.components[i].setLatLngs(this.components[i].getLatLngs())):this.components[i]._rotate(t,e)},_resize:function(t,e){for(var i=0;i<this.components.length;i++)this.components[i]instanceof s?this.components[i]._resize(t,e):0!==this.components[i].avoidRegions.length?(this.components[i]._resize(t,this.anchorPoint),this.components[i].redraw()):this.components[i]._resize(t,this.anchorPoint)},destroy:function(){o.PlottingObject.prototype.destroy.call(this),this.subObjects=[]}}),a=e.groupObject=function(t,e,i,o){return new s(t,e,i,o)};L.supermap.plotting.groupObject=a,L.supermap.plotting.GroupObject=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=e.Text=L.Path.extend({options:{text:"",labelAlign:"cm",labelRotation:0,fontColor:"#000000",fontSize:14,fontOpacity:1,fontFamily:"微软雅黑",fontWeight:"bold",fontStyle:"",fontSpace:0,fontPercent:100,fontStroke:!1,fontStrokeColor:"#ff0000",fontStrokeWidth:2,fontBackground:!1,fontBackgroundColor:"#ff0000",fontShadow:!1,fontShadowColor:"#ff0000",fontShadowOffsetX:0,fontShadowOffsetY:0,interactive:!0},_textNode:null,_backgroundTextNode:null,_shadowTextNode:null,_tspanNodeObj:null,initialize:function(t,e){L.setOptions(this,e),this._latlng=L.latLng(t[0]),this._text=this.options.text,this._tspanNodeObj={}},onAdd:function(){L.Path.prototype.onAdd.call(this)},onRemove:function(){this._removeNode(),L.Path.prototype.onRemove.call(this)},_removeNode:function(){this._textNode&&this._textNode.parentNode&&(L.DomUtil.remove(this._textNode),this.removeInteractiveTarget(this._textNode),delete this._textNode,this._textNode=null),this._backgroundTextNode&&this._backgroundTextNode.parentNode&&(this._renderer._rootGroup.removeChild(this._backgroundTextNode),delete this._backgroundTextNode,this._backgroundTextNode=null),this._shadowTextNode&&this._shadowTextNode.parentNode&&(this._renderer._rootGroup.removeChild(this._shadowTextNode),delete this._shadowTextNode,this._shadowTextNode=null),this._tspanNodeObj={},this._textNode&&(L.DomUtil.remove(this._textNode),this.removeInteractiveTarget(this._textNode),delete this._textNode,this._textNode=null),this._backgroundTextNode&&(delete this._backgroundTextNode,this._backgroundTextNode=null),this._shadowTextNode&&(delete this._shadowTextNode,this._shadowTextNode=null)},setLatLngs:function(t){return this._latlng=L.latLng(t[0]),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLngs:function(){return[this._latlng]},setText:function(t){return this.options.text=this._text=t,this.redraw()},getText:function(){return this._text},setStyle:function(t){var e=t&&t.text||this._text;return L.Path.prototype.setStyle.call(this,t),this.setText(e),this},getBounds:function(){return this._updateBounds(),this._bounds},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},getPxBounds:function(t){var e=1;this.options.fontPercent&&100!==this.options.fontPercent&&(e=this.options.fontPercent/100);var i=0,o=0,n=this.options.text.split("\n"),s=n.length;if(this._renderer instanceof L.Canvas){var a=[this.options.fontStyle?this.options.fontStyle:"normal","normal",this.options.fontWeight?this.options.fontWeight:"normal",this.options.fontSize?this.options.fontSize+"px":"1em",this.options.fontFamily?this.options.fontFamily:"sans-serif"].join(" ");this._renderer._ctx.font=a,this.options.fontSize=parseFloat(this.options.fontSize),null==(l=L.Canvas.LABEL_FACTOR[this.options.labelAlign[1]])&&(l=-.5),o=(r=this._renderer._ctx.measureText("Mg").height||this._renderer._ctx.measureText("xx").width)*l*(s-1)+r*s;for(M=0;M<s;M++)this.options.fontSpace&&0!=this.options.fontSpace||this.options.fontPercent&&100!=this.options.fontPercent?i<(u=(this._renderer._ctx.measureText(n[M]).width+this.options.fontSpace*(n[M].length-1))*e)&&(i=u):i<(u=this._renderer._ctx.measureText(n[M]).width)&&(i=u)}else if(this._renderer instanceof L.SVG){var l=L.SVG.LABEL_VFACTOR[this.options.labelAlign[1]];null==l&&(l=-.5);var r=this.options.fontSize;o=r*l*(s-1)+r*s;for(M=0;M<s;M++){var u=SuperMap.PlotUtil.getTextWidth(this.options,n[M]);i<u&&(i=u)}}this.options.fontSize<=7&&(i=0);var p=0,h=0,c=0,y=0,g=this.options.labelAlign||"cm";"lt"===g?(p=this._point.x,h=this._point.y,c=this._point.x+i,y=this._point.y+o):"ct"===g?(p=this._point.x-i/2,h=this._point.y,c=this._point.x+i/2,y=this._point.y+o):"rt"===g?(p=this._point.x-i,h=this._point.y,c=this._point.x,y=this._point.y+o):"lb"===g?(p=this._point.x,h=this._point.y-o,c=this._point.x+i,y=this._point.y):"cb"===g?(p=this._point.x-i/2,h=this._point.y-o,c=this._point.x+i/2,y=this._point.y):"rb"===g?(p=this._point.x-i,h=this._point.y-o,c=this._point.x,y=this._point.y):"lm"===g?(p=this._point.x,h=this._point.y-o/2,c=this._point.x+i,y=this._point.y+o/2):"cm"===g?(p=this._point.x-i/2,h=this._point.y-o/2,c=this._point.x+i/2,y=this._point.y+o/2):"rm"===g&&(p=this._point.x-i,h=this._point.y-o/2,c=this._point.x,y=this._point.y+o/2),t&&this.options.fontShadow&&(0!==this.options.fontShadowOffsetX||0!==this.options.fontShadowOffsetY)&&(this.options.fontShadowOffsetX>0?c+=this.options.fontShadowOffsetX:p+=this.options.fontShadowOffsetX,this.options.fontShadowOffsetY>0?y+=this.options.fontShadowOffsetY:h+=this.options.fontShadowOffsetY);for(var d in this._eventParents)if(this._eventParents[d].symbolType===SuperMap.Plot.SymbolType.TEXTSYMBOL&&0===this.options.fontPercent&&0===this.options.fontPercent){var f=c-p,S=(f+this.options.fontSpace*(this.options.text.length-1))*this.options.fontPercent/100-f;switch(g){case"lt":case"lm":case"lb":c+=S;break;case"rt":case"rm":case"rb":p-=S;break;case"ct":case"cm":case"cb":p-=S/2,c+=S/2}}var P=new L.Bounds;if(this.options.labelRotation&&0!==this.options.labelRotation){var m=[];m.push(L.point(p,h)),m.push(L.point(p,y)),m.push(L.point(c,h)),m.push(L.point(c,y));for(var b=this.options.labelRotation*(Math.PI/180),M=0;M<m.length;M++)SuperMap.Plot.PlottingUtil.rotateAngle(this._point,b,m[M]),P.extend(m[M])}else P=L.bounds(L.point(p,h),L.point(c,y));return P},_updateBounds:function(){this._pxBounds=this.getPxBounds(!0);var t=this._map.layerPointToLatLng(this._pxBounds.min),e=this._map.layerPointToLatLng(this._pxBounds.max);this._bounds=L.latLngBounds(t,e)},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateText(this)},_empty:function(){return this._text&&!this._renderer._bounds.intersects(this._pxBounds)}});L.supermap.plotting.text=function(t,e){return new o(t,e)},L.supermap.plotting.Text=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.plottingLayer=e.PlottingLayer=void 0;var o=i(7),n=i(2),s=i(16),a=i(10),l=i(34),r=i(4),u=i(5),p=e.PlottingLayer=a.PlottingLayerBase.extend({tolerancePixel:5,isLocked:!1,isEditable:!0,isSelected:!0,visibility:!0,getSelected:function(){return this.isSelected},setSelected:function(t){this.isSelected!==t&&(this.isSelected=t,this._map&&this._map.getPlotEditControl()&&(this.isSelected?this._map.getPlotEditControl().enableEditFeatures(this.features):this._map.getPlotEditControl().disableEditFeatures(this.features)))},getEditable:function(){return this.isEditable},setEditable:function(t){if(this.isEditable!==t&&(this.isEditable=t,this._map&&this._map.getPlotEditControl())){var e=this._map.getPlotEditControl().getSelectedFeatures();this._map.getPlotEditControl().unselectFeatures(this.features),this._map.getPlotEditControl().selectFeatures(e)}},getLocked:function(){return this.isLocked},setLocked:function(t){if(this.isLocked!==t&&(this.isLocked=t,this._map&&this._map.getPlotEditControl())){var e=this._map.getPlotEditControl().getSelectedFeatures();this._map.getPlotEditControl().unselectFeatures(this.features),this._map.getPlotEditControl().selectFeatures(e)}},getVisibility:function(){return this.visibility},setVisibility:function(t){this.visibility!==t&&(this.visibility=t,this.visibility?this._renderer._container.style.display="block":this._renderer._container.style.display="none")},initialize:function(t,e,i){a.PlottingLayerBase.prototype.initialize.call(this,t,e,i),this.setVisibility(this.visibility)},getFeatureByUuid:function(t){for(var e=0;e<this.features.length;e++)if(this.features[e].uuid===t)return this.features[e];return null},addFeatures:function(t){SuperMap.Util.isArray(t)||(t=[t]),a.PlottingLayerBase.prototype.addFeatures.call(this,t),this._map.getPlotEditControl()&&this.isSelected&&this._map.getPlotEditControl().enableEditFeatures(t)},createSymbol:function(t,e,i,o,n,s,a,l){if(s||(s={}),s.uuid=o,s.serverUrl=this.serverUrl,void 0!==s.symbolData&&null!==s.symbolData||!SuperMap.AlgoSymbolFactory.isAccessServer(t,e)){if(!(f=L.supermap.plotting.PlottingObject.createSymbol(t,e,i,s,n,l)).subSymbols||0===f.subSymbols.length||SuperMap.AlgoSymbolFactory.isAccessServer(t,e))return this.addFeatures(f),"function"==typeof a&&a({feature:f}),f;for(var r=[],u=0,p=f.subSymbols.length;u<p;u++)null===f.subSymbols[u].symbolData&&(f.subSymbols[u].symbolData=this._getSymbolDataFromCache(f.subSymbols[u].libID,f.subSymbols[u].code),null===f.subSymbols[u].symbolData&&-1===SuperMap.Util.indexOf(r,f.subSymbols[u])&&r.push(f.subSymbols[u]));for(var h=r.slice(),c=0;c<r.length;c++){d=new SuperMap.GetSymbolInfoParameters({libID:r[c].libID,code:r[c].code});L.supermap.symbolInfoService(this.serverUrl).getSymbolInfo(d,function(t){this._cacheSymbolData(t.result);for(var e=0,i=f.subSymbols.length;e<i;e++)if(null===f.subSymbols[e].symbolData&&f.subSymbols[e].libID===t.result.libID&&f.subSymbols[e].code===t.result.code){var o=SuperMap.Util.indexOf(h,f.subSymbols[e]);-1!==o&&h.splice(o,1),f.subSymbols[e].symbolData=SuperMap.PlotUtil.cloneObject(t.result)}0===h.length&&(f.isEdit=!1,this.addFeatures(f),"function"==typeof a&&a({feature:f}))},this)}if(0===r.length)return this.addFeatures(f),"function"==typeof a&&a({feature:f}),f}else{var y=null,g=!1;if(s.hasOwnProperty("negativeImage")||s.hasOwnProperty("symbolRank")||s.hasOwnProperty("surroundLineType")?g=!0:y=this._getSymbolDataFromCache(t,e),!y||g){var d=new SuperMap.GetSymbolInfoParameters({libID:t,code:e});i&&(d.inputPoints=L.Util.latLngsToSuperMapPoints(i)),s.hasOwnProperty("negativeImage")&&(d.negativeImage=s.negativeImage),s.hasOwnProperty("symbolRank")&&(d.symbolRank=s.symbolRank),s.hasOwnProperty("surroundLineType")&&(d.surroundLineType=s.surroundLineType),L.supermap.symbolInfoService(this.serverUrl).getSymbolInfo(d,function(o){g||o.result.symbolType!==SuperMap.Plot.SymbolType.DOTSYMBOL||this._cacheSymbolData(o.result),s.symbolData=SuperMap.PlotUtil.cloneObject(o.result);var r=L.supermap.plotting.PlottingObject.createSymbol(t,e,i,s,n,l);this.addFeatures(r),"function"==typeof a&&a({feature:r})},this)}else{s.symbolData=y;var f=L.supermap.plotting.PlottingObject.createSymbol(t,e,i,s,n,l);this.addFeatures(f),"function"==typeof a&&a({feature:f})}}},createGroupObject:function(t,e){var i=[];for(var s in t)t[s]&&t[s]instanceof n.GraphicObject&&i.push(t[s]);if(i.length>1){var a=new o.GroupObject(0,SuperMap.Plot.SymbolType.GROUPOBJECT,[],{subObjects:i,uuid:e});return this.addFeatures(a),a}return null},unGroupObject:function(t){var e=[];return t.symbolType===SuperMap.Plot.SymbolType.GROUPOBJECT||t.symbolType===SuperMap.Plot.SymbolType.FLAGGROUP?(e=t._unGroupObject(),this.removeFeatures(t),t.destroy()):e.push(t),e},createInterferenceBeam:function(t,e,i,o,n,s){n||(n={}),n.associatedUuid=t,n.uuid=i,n.custom=s;var a=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.INTERFERENCEBEAM,e,n,o,s);return this.addFeatures(a),a},createSatellite:function(t,e,i,o,n,s,a,l,r){var u=this._getSymbolDataFromCache(t,e);if(null===u){var p=new SuperMap.GetSymbolInfoParameters({libID:t,code:e});L.supermap.symbolInfoService(this.serverUrl).getSymbolInfo(p,function(u){this._cacheSymbolData(u.result),a||(a={}),a.serverUrl=this.serverUrl,a.orbitPoints=i,a.textContent=o,a.uuid=n,a.custom=r,a.subSymbol={libID:t,code:e,symbolData:SuperMap.PlotUtil.cloneObject(u.result),textContent:o};var p=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.SATELLITE,[],a,s,r);this.addFeatures(p),"function"==typeof l&&l({feature:p})},this)}else{a||(a={}),a.serverUrl=this.serverUrl,a.orbitPoints=i,a.textContent=o,a.uuid=n,a.custom=r,a.subSymbol={libID:t,code:e,symbolData:u,textContent:o};var h=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.SATELLITE,[],a,s,r);this.addFeatures(h),"function"==typeof l&&l({feature:h})}},createSatelliteTimeWindows1:function(t,e,i,o,n,s){n||(n={}),n.associatedUuid=t,n.timeWindows=e,n.custom=s,n.type="Number",n.uuid=i;var a=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.SATELLITETIMEWINDOWS,[],n,o,s);return this.addFeatures(a),a},createSatelliteTimeWindows2:function(t,e,i,o,n,s){n||(n={}),n.associatedUuid=t,n.timeWindows=e,n.custom=s,n.type="Time",n.uuid=i;var a=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.SATELLITETIMEWINDOWS,[],n,o,s);return this.addFeatures(a),a},createSymbolText:function(t,e,i,o,n,s){n||(n={}),n.associatedUuid=t,n.symbolTexts=e,n.custom=s,n.uuid=i;var a=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.SYMBOLTEXT,[],n,o,s);return SuperMap.Plot.AnalysisSymbol.mergeDefaultStyleToLayer(a),o&&SuperMap.Util.extend(a.style,o),this.addFeatures(a),a},createSymbolText1:function(t,e,i,o,n,s){n||(n={}),n.associatedUuid=t,n.textContent=e,n.custom=s,n.uuid=i;var a=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.SYMBOLTEXT1,[],n,o,s);return this.addFeatures(a),a},createNavyDeployment:function(t,e,i,o,n,s,a){if(n||(n={}),n.associatedUuid=t,n.custom=a,n.serverUrl=this.serverUrl,e&&0!==e.length){for(var l=[],r=0,u=e.length;r<u;r++)null===e[r].symbolData&&(e[r].symbolData=this._getSymbolDataFromCache(e[r].libID,e[r].code),null===e[r].symbolData&&-1===SuperMap.Util.indexOf(l,e[r])&&l.push(e[r]));if(0!==l.length)for(var p=l.slice(),h=0;h<l.length;h++){var c=new SuperMap.GetSymbolInfoParameters({libID:l[h].libID,code:l[h].code});L.supermap.symbolInfoService(this.serverUrl).getSymbolInfo(c,function(t){this._cacheSymbolData(t.result);for(var i=0,l=e.length;i<l;i++)if(null===e[i].symbolData&&e[i].libID===t.result.libID&&e[i].code===t.result.code){var r=SuperMap.Util.indexOf(p,e[i]);-1!==r&&p.splice(r,1),e[i].symbolData=SuperMap.PlotUtil.cloneObject(t.result)}if(0===p.length){n.subSymbols=e;var u=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.NAVYDEPLOYMENT,[],n,o,a);this.addFeatures(u),"function"==typeof s&&s({feature:u})}},this)}else{n.subSymbols=e;var y=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.NAVYDEPLOYMENT,[],n,o,a);this.addFeatures(y),"function"==typeof s&&s({feature:y})}}},createAirDeployment:function(t,e,i,o,n,s,a){if(n||(n={}),n.associatedUuid=t,n.custom=a,n.serverUrl=this.serverUrl,e&&0!==e.length){for(var l=[],r=0,u=e.length;r<u;r++)null===e[r].symbolData&&(e[r].symbolData=this._getSymbolDataFromCache(e[r].libID,e[r].code),null===e[r].symbolData&&-1===SuperMap.Util.indexOf(l,e[r])&&l.push(e[r]));if(0!==l.length)for(var p=l.slice(),h=0;h<l.length;h++){var c=new SuperMap.GetSymbolInfoParameters({libID:l[h].libID,code:l[h].code});L.supermap.symbolInfoService(this.serverUrl).getSymbolInfo(c,function(t){this._cacheSymbolData(t.result);for(var i=0,l=e.length;i<l;i++)if(null===e[i].symbolData&&e[i].libID===t.result.libID&&e[i].code===t.result.code){var r=SuperMap.Util.indexOf(p,e[i]);-1!==r&&p.splice(r,1),e[i].symbolData=SuperMap.PlotUtil.cloneObject(t.result)}if(0===p.length){n.subSymbols=e;var u=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.AIRDEPLOYMENT,[],n,o,a);this.addFeatures(u),"function"==typeof s&&s({feature:u})}},this)}else{n.subSymbols=e;var y=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.AIRDEPLOYMENT,[],n,o,a);this.addFeatures(y),"function"==typeof s&&s({feature:y})}}},createNavyRoute:function(t,e,i,o,n,s){n||(n={}),n.routeNodes=e,n.uuid=i,n.custom=s,n.arrRoutePts=t;var a=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.NAVYROUTE,[],n,o,s);return this.addFeatures(a),a},createMissileRoute:function(t,e,i,o,n,s){n||(n={}),n.routeNodes=e,n.uuid=i,n.custom=s,n.arrRoutePts=t;var a=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.MISSILEROUTE,[],n,o,s);return this.addFeatures(a),a},createAirRoute:function(t,e,i,o,n,s){n||(n={}),n.routeNodes=e,n.uuid=i,n.custom=s,n.arrRoutePts=t;var a=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.AIRROUTE,[],n,o,s);return this.addFeatures(a),a},createFlags:function(t,e,i){for(var o=[],n=0;n<t.length;n++)100===t[n].libID&&t[n].code>=2800&&t[n].code<=2900&&o.push(t[n]);var a=null;return o.length>1&&(a=new s.FlagGroup(0,SuperMap.Plot.SymbolType.FLAGGROUP,[],{subObjects:o,ratio:e,uuid:i}),this.addFeatures(a)),a},createArcRegion:function(t,e,i,o,n,s,a,l,r,u,p){r||(r={}),r.centerPoint=t,r.radius=e,r.startAngle=i,r.endAngle=o,r.textContent=n,r.textPosition=s,r.uuid=a,r.custom=p,r.spatialAnalystUrl=this.spatialAnalystUrl;var h=new SuperMap.BufferDistance({value:1e3*r.radius}),c=new SuperMap.BufferSetting({endType:SuperMap.BufferEndType.ROUND,leftDistance:h,rightDistance:h,semicircleLineSegment:36}),y=new SuperMap.GeometryBufferAnalystParameters({sourceGeometry:L.marker(r.centerPoint),sourceGeometrySRID:parseInt(this._map.options.crs.code.split(":")[1]),bufferSetting:c}),g=this;L.supermap.spatialAnalystService(this.spatialAnalystUrl).bufferAnalysis(y,function(t){r.circlePts=[];for(var e=t.result.resultGeometry.points,i=0,o=e.length;i<o;i++)r.circlePts.push(new SuperMap.Geometry.Point(e[i].x,e[i].y));var n=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.ARCREGION,[],r,l,p);g.addFeatures(n),"function"==typeof u&&u({feature:n})},SuperMap.DataFormat.ISERVER)},geoJsonToFeature:function(t,e){var i=JSON.parse(t),o=parseInt(i.libID),n=parseInt(i.code);if(i.isEdit=!0,SuperMap.AlgoSymbolFactory.isAccessServer(o,n)){(l={}).negativeImage=i.negativeImage,l.symbolRank=parseInt(i.symbolRank),l.surroundLineType=parseInt(i.surroundLineType);var s=!1;(l.negativeImage||0!==l.surroundLineType||0!==l.symbolRank)&&(s=!0);var a=this._getSymbolDataFromCache(o,n);if(s||null===a){d=new SuperMap.GetSymbolInfoParameters({libID:o,code:n,negativeImage:l.negativeImage,symbolRank:l.symbolRank,surroundLineType:l.surroundLineType,inputPoints:i.localePoints,subSymbols:i.subSymbols});L.supermap.symbolInfoService(this.serverUrl).getSymbolInfo(d,function(t){if(t.result.libID&&t.result.code){t.result.symbolType!==SuperMap.Plot.SymbolType.DOTSYMBOL||s||this._cacheSymbolData(t.result),a=SuperMap.Util.cloneObject(t.result),SuperMap.Plot.AnalysisSymbol.mergeSymbolDataAndServerData(i,a);var l={symbolData:i,serverUrl:this.serverUrl},r=L.supermap.plotting.PlottingObject.createSymbol(o,n,null,l);this.addFeatures(r),"function"==typeof e&&e({feature:r})}},this)}else{SuperMap.Plot.AnalysisSymbol.mergeSymbolDataAndServerData(i,a);var l={symbolData:i,serverUrl:this.serverUrl},r=L.supermap.plotting.PlottingObject.createSymbol(o,n,null,l);this.addFeatures(r),"function"==typeof e&&e({feature:r})}}else if(i.subSymbols&&0!==i.subSymbols.length){for(var u=[],p=0,h=i.subSymbols.length;p<h;p++)if(!i.subSymbols[p].symbolData){var c=L.supermap.plotting.getControl(this._map,this.serverUrl).getSymbolLibManager().getSymbolLibByLibId(i.subSymbols[p].libID);c&&c.querySymbolbyKey(n.toString()).length>0&&(i.subSymbols[p].symbolData=this._getSymbolDataFromCache(i.subSymbols[p].libID,i.subSymbols[p].code),null===i.subSymbols[p].symbolData&&-1===SuperMap.Util.indexOf(u,i.subSymbols[p])&&u.push(i.subSymbols[p]))}for(var y=u.slice(),g=0;g<u.length;g++){var d=new SuperMap.GetSymbolInfoParameters({libID:u[g].libID,code:u[g].code});L.supermap.symbolInfoService(this.serverUrl).getSymbolInfo(d,function(t){this._cacheSymbolData(t.result);for(var s=0,a=i.subSymbols.length;s<a;s++)if(null===i.subSymbols[s].symbolData&&i.subSymbols[s].libID===t.result.libID&&i.subSymbols[s].code===t.result.code){var l=SuperMap.Util.indexOf(y,i.subSymbols[s]);-1!==l&&y.splice(l,1),i.subSymbols[s].symbolData=SuperMap.PlotUtil.cloneObject(t.result)}if(0===y.length){var r={symbolData:i,serverUrl:this.serverUrl,symbolType:i.symbolType},u=L.supermap.plotting.PlottingObject.createSymbol(o,n,null,r);this.addFeatures(u),"function"==typeof e&&e({feature:u})}},this)}if(0===u.length){var l={symbolData:i,serverUrl:this.serverUrl,symbolType:i.symbolType},r=L.supermap.plotting.PlottingObject.createSymbol(o,n,null,l);this.addFeatures(r),"function"==typeof e&&e({feature:r})}}else{var l={symbolData:i,serverUrl:this.serverUrl,symbolType:i.symbolType},r=L.supermap.plotting.PlottingObject.createSymbol(o,n,null,l);this.addFeatures(r),"function"==typeof e&&e({feature:r})}},_getFeatureFromEvent:function(t){var e=null;if(!this._map)return e;if(this.isSelected)for(var i=this._map.layerPointToLatLng(L.point(0,0)),o=this._map.layerPointToLatLng(L.point(this._clickTolerance(),0)),n=new SuperMap.Geometry.Point(i.lng,i.lat),s=new SuperMap.Geometry.Point(o.lng,o.lat),a=SuperMap.Plot.PlottingUtil.distance(n,s),l=this.features.length-1;l>=0&&null===(e=this._selectFeature(this.features[l],t.latlng,a));l--);return e},_getSymbolDataFromCache:function(t,e){var i=L.supermap.plotting.getControl(this._map,this.serverUrl).getSymbolLibManager().getSymbolLibByLibId(t);return null!==i?i.getSymbolData(e):null},_cacheSymbolData:function(t){var e=L.supermap.plotting.getControl(this._map,this.serverUrl).getSymbolLibManager().getSymbolLibByLibId(t.libID);null!==e&&e.cacheSymbolData(t)},_isAvoidRegion:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];if(0!==e.length){var o=null;if(0===e[0].avoidRegions.length)return e[0];if(o=new l.AvoidRegionControl(e[0]),this._map.addControl(o),!0){for(var n=0,s=e[0].avoidRegions.length;n<s;n++)this.removeFeatures(e[0].avoidRegions[n]);return this._map.removeControl(o),!1,e[0]}}},_selectFeature:function(t,e,i){if(null==t)return null;if(void 0!==t.style&&null!==t.style&&"none"===t.style.display)return null;if(!(t instanceof r.PlottingObject))return null;if(t instanceof o.GroupObject){for(a=0;a<t.components.length;a++)if(this._selectFeature(t.components[a],e,i))return t.isSelected?t.components[a]:t}else if(t instanceof u.Route){for(a=0;a<t.components.length;a++)if(this._selectFeature(t.components[a],e,i))return t.components[a]===SuperMap.Plot.SymbolType.ROUTENODE||t.components[a]===SuperMap.Plot.SymbolType.LITERATESIGN?t.components[a]:t}else if(t.symbolType===SuperMap.Plot.SymbolType.SYMBOLTEXT){for(a=0;a<t.components.length;a++)if(this._selectFeature(e,i,t.components[a]))return t}else if(t.symbolType===SuperMap.Plot.SymbolType.ROUTENODE||t.symbolType===SuperMap.Plot.SymbolType.LITERATESIGN){var n=t.getBounds();if(n&&n.isValid()&&e.lng>=n.getWest()&&e.lng<=n.getEast()&&e.lat>=n.getSouth()&&e.lat<=n.getNorth())return t}else for(var s=this._map.latLngToLayerPoint(e),a=0,l=t.components.length;a<l;a++)if(t.components[a]._containsPoint&&t.components[a]._containsPoint(s))return t;return null}}),h=e.plottingLayer=function(t,e,i){return new p(t,e,i)};L.supermap.plotting.plottingLayer=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlottingLayerBase=void 0;var o=i(7),n=i(4),s=i(14),a=i(5);e.PlottingLayerBase=L.Path.extend({name:"",serverUrl:null,features:null,initialize:function(t,e,i){i=i||{},L.setOptions(this,i),this.name=t,this.serverUrl=e,this.features=[]},destroy:function(){this.name="",this.serverUrl=null,this.features=null},beforeAdd:function(t){L.Path.prototype.beforeAdd.call(this,t)},onAdd:function(t){L.Path.prototype.onAdd.call(this,t),this._map=t;var e=this;this._map.on("zoomend",function(){for(var t=0;t<e.features.length;t++)e.features[t]._reView()})},onRemove:function(){L.Path.prototype.onRemove.call(this),this.removeAllFeatures()},addFeatures:function(t){SuperMap.Util.isArray(t)||(t=[t]);for(var e=0;e<t.length;)t[e]instanceof n.PlottingObject||t[e]instanceof s.AvoidRegion?(this.features.push(t[e]),t[e].onAdd(this),e++):t.splice(e,1)},removeFeatures:function(t){SuperMap.Util.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var l=t[e];if(l instanceof n.PlottingObject||t[e]instanceof s.AvoidRegion){(l instanceof o.GroupObject||l instanceof a.Route)&&this._map&&this._map.getPlotEditControl()&&this._map.getPlotEditControl().disableEditFeatures(l.components),this._map&&this._map.getPlotEditControl()&&this._map.getPlotEditControl().disableEditFeatures(l),l.symbolType===SuperMap.Plot.SymbolType.ROUTENODE&&l.route&&l.route.deleteRouteNode(l.routeNode),l.symbolType!==SuperMap.Plot.SymbolType.SYMBOLTEXT&&l.symbolType!==SuperMap.Plot.SymbolType.SYMBOLTEXT1||l.removeSymbolTextsFromDotSymbol(l.associatedUuid),l.symbolType===SuperMap.Plot.SymbolType.LINERELATION&&(l.startAssociatedUuid&&l.removeJoinLineFromDotSymbol(l.startAssociatedUuid),l.endAssociatedUuid&&l.removeJoinLineFromDotSymbol(l.endAssociatedUuid)),l.ownerGroup?(l.ownerGroup.removeComponents(),this.removeFeatures(l)):(l._clearComponents(),l.geoSymbolTexts&&l.geoSymbolTexts.length>0&&this.removeFeatures(l.geoSymbolTexts));var r=SuperMap.Util.indexOf(this.features,l);-1!==r&&this.features.splice(r,1)}}this._update()},getFeatures:function(){return this.features.slice()},removeAllFeatures:function(){this.removeFeatures(this.features.slice()),this.features=[]},_setCursorStyle:function(t){void 0===t&&(t="");var e=!1;if(this._map.getPlottingLayers().length>1){var i=this._map.getPlottingLayers();for(var o in i)i[o]._renderer instanceof L.Canvas?i[o]._renderer._container.style.cursor=t:i[o]._renderer instanceof L.SVG&&(i[o]._renderer._rootGroup.style.cursor=t);e=!0}e||(this._renderer instanceof L.Canvas?this._renderer._container.style.cursor=t:this._renderer instanceof L.SVG&&(this._renderer._rootGroup.style.cursor=t,this._map._panes.overlayPane.style.cursor=t,this._map._panes.overlayPane.style.width=this._renderer._svgSize.x+"px",this._map._panes.overlayPane.style.height=this._renderer._svgSize.y+"px"))},_update:function(){this._map&&this._updatePath()},_containsPoint:function(t){return!1},_updatePath:function(){this._renderer._drawPlottingLayers(this._getLayersInBounds())},_project:function(){var t=this;t._pxBounds=L.bounds(L.point(0,0),L.point(0,0)),t._getLayersInBounds().map(function(e){e._project(),t._pxBounds.extend(e._pxBounds.min),t._pxBounds.extend(e._pxBounds.max)})},_getLayersInBounds:function(){var t=[],e=this._map.getBounds();return this.features.map(function(i){var o=i.getBounds();o.isValid()&&e.contains(o)&&t.push(i)}),t},bringToBack:function(){return L.Path.prototype.beforeAdd.call(this),this._map&&(L.DomUtil.toBack(this._getContainer()),this._setAutoZIndex(Math.max)),this},bringToFront:function(){return L.Path.prototype.bringToFront.call(this),this._map&&(L.DomUtil.toFront(this._getContainer()),this._setAutoZIndex(Math.min)),this},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,o=-t(-1/0,1/0),n=0,s=i.length;n<s;n++)e=i[n].style.zIndex,i[n]!==this._container&&e&&(o=t(o,+e));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_getContainer:function(){return this._renderer._container}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Plot=SuperMap.Plot=SuperMap.Plot||{};SuperMap.Plot.SymbolType={DOTSYMBOL:1,ALGOSYMBOL:2,TEXTSYMBOL:34,ELLIPSESYMBOL:31,CIRCLESYMBOL:29,RECTANGLESYMBOL:26,ARBITRARYPOLYGONSYMBOL:32,POLYLINESYMBOL:24,PARALLELOGRAM:28,ARCSYMBOL:44,REGULARPOLYGON:410,CHORDSYMBOL:370,PIESYMBOL:380,KIDNEY:390,POLYBEZIERSYMBOL:590,PARALLELLINE:48,BRACESYMBOL:400,ANNOFRAMESYMBOL:320,ANNOFRAMESYMBOLM:321,TRAPEZOIDSYMBOL:350,POLYBEZIERCLOSESYMBOL:360,GROUPOBJECT:1e3,LINERELATION:1001,INTERFERENCEBEAM:1002,POLYGONREGION:1003,ARCREGION:1004,AIRROUTE:1005,NAVYROUTE:1006,MISSILEROUTE:1007,NAVYDEPLOYMENT:1008,AIRDEPLOYMENT:1009,SATELLITE:1010,SATELLITETIMEWINDOWS:1011,SYMBOLTEXT:1012,RUNWAY:1013,CURVEEIGHT:1014,ROUTENODE:1015,ARROWLINE:1016,PATHTEXT:1017,LITERATESIGN:1018,CONCENTRICCIRCLE:1019,FLAGGROUP:1020,SYMBOLTEXT1:1021,COMBINATIONALCIRCLE:1022,FREECURVE:1023,SYMBOLTEXTBOX:1024,NODECHAIN:1025,LINEMARKING:1026,AVOIDREGION:1027},SuperMap.Plot.LineRelation={SOLID:0,DASH:1,ARROW:2},SuperMap.Plot.AlgoSurroundLineType={NONE:0,INNER:1,OUT:2,ALL:3},SuperMap.Plot.RouteNodeType={RENDEZVOUS:"RENDEZVOUS",EXPANDING:"EXPANDING",VOLLEY:"VOLLEY",STANDBY:"STANDBY",SUPPLY:"SUPPLY",TAKEOFF:"TAKEOFF",INITIAL:"INITIAL",VISUALINITAL:"VISUALINITAL",LANCH:"LANCH",TURNING:"TURNING",AIMING:"AIMING",COMMONROUTE:"COMMONROUTE",WEAPONLAUNCH:"WEAPONLAUNCH",TARGET:"TARGET",ATTACK:"ATTACK",SUPPRESS:"SUPPRESS",EIGHTSPIRAL:"EIGHTSPIRAL",HAPPYVALLEY:"HAPPYVALLEY"},SuperMap.Plot.RelLineText={ONLINE:0,ONLEFTLINE:1,ONRIGHTLINE:2,ONBOTHLINE:3},SuperMap.Plot.RadiusLineType={NONE:0,SOLID:1,ARROW:2},SuperMap.Plot.AnnoPosition={LEFTTOP:0,LEFTBOTTOM:1,RIGHTTOP:2,RIGHTBOTTOM:3,TOP:4,BOTTOM:5,LEFT:6,RIGHT:7},SuperMap.Plot.ArrowLineType={DOUBLELINE:0,TRIANGLESOLID:1,NONE:2},SuperMap.Plot.TextBoxType={WITHTIPBOX:0,RECTBOX:1,LINEBOX:2,NONEBOX:3},SuperMap.Plot.PositionOffsetType={LINE:0,GRADIENTLINE:1},SuperMap.Plot.AlignType={LEFT:0,RIGHT:1,UP:2,DOWN:3,VERTICALCENTER:4,HORIZONTALCENTER:5},SuperMap.Plot.AddPoint_WayType={UNKNOWN:0,POLYLINE:1,CURVE:2},SuperMap.Plot.EditMode={ADDCONTROLPOINT:0,EDITCONTROLPOINT:1,EDITCIRCUMRECTANGLE:2}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PlottingUtil=SuperMap.Plot.PlottingUtil=SuperMap.Plot.PlottingUtil||{};SuperMap.Plot.PlottingUtil.getSurroundLinePts=function(t,e){for(var i=[],o=[],n=0;n<t.length-1;n++){var s,a,l=[];if(!SuperMap.Plot.PlottingUtil.equalFuzzy(t[n].x,t[n+1].x)||!SuperMap.Plot.PlottingUtil.equalFuzzy(t[n].y,t[n+1].y)){l.push(t[n]),l.push(t[n+1]);var r=SuperMap.Plot.PlottingUtil.parallel(l,e);if(s=r[0],a=r[1],0!=i.length){var u=SuperMap.Plot.PlottingUtil.intersectLines(s,a,i[0],i[1]);if(u.isIntersectLines){var p=u.intersectPoint,h=SuperMap.Plot.PlottingUtil.distance(s,a);SuperMap.Plot.PlottingUtil.distance(p,a)>2*h?o.push(a):(o[o.length-1]=p,o.push(a))}else o.push(a)}else o.push(s),o.push(a);(i=[]).push(o[o.length-2]),i.push(o[o.length-1])}}if(t[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y&&1<o.length){var c=SuperMap.Plot.PlottingUtil.intersectLines(o[0],o[1],o[o.length-2],o[o.length-1]);if(c.isIntersectLines){var y=c.intersectPoint;o[o.length-1]=y,o[0]=y}}return o},SuperMap.Plot.PlottingUtil.getDataFromServer=function(t,e,i,o,n,s,a,l){var r;void 0!==s&&(r=s);var u=new SuperMap.GetSymbolInfoService(t);u.events.on({processCompleted:a,processFailed:l,scope:r});var p=new SuperMap.GetSymbolInfoParameters;p.libID=e,p.code=i,n&&SuperMap.Util.extend(p,n),o&&null!==o&&(SuperMap.Util.isArray(o)||(o=[o]),p.inputPoints=o),u.processAsync(p)},SuperMap.Plot.PlottingUtil.innerOutlineDir=function(t){function e(t,e){function i(t){var e=Math.atan2(t.y,t.x);return e<0&&(e+=2*Math.PI),e}var o=i(e)-i(t);return o<-Math.PI&&(o+=2*Math.PI),o>Math.PI&&(o-=2*Math.PI),o}if(t.length<3)return 1;for(var i=0,o={x:0,y:0},n={x:0,y:0},s=2;s<t.length;s++)n.x=t[s].x-t[s-1].x,n.y=t[s].y-t[s-1].y,o.x=t[s-1].x-t[s-2].x,o.y=t[s-1].y-t[s-2].y,i+=e(o,n);return n.x=t[1].x-t[0].x,n.y=t[1].y-t[0].y,o.x=t[0].x-t[t.length-1].x,o.y=t[0].y-t[t.length-1].y,(i+=e(o,n))>=0?-1:1},SuperMap.Plot.PlottingUtil.isNear=function(t,e){return e||(e=1e-18),t<e&&t>-e},SuperMap.Plot.PlottingUtil.equalFuzzy=function(t,e,i){return i||(i=1e-18),Math.abs(t-e)<=i},SuperMap.Plot.PlottingUtil.intersectLines=function(t,e,i,o){var n={};if(n.isIntersectLines=!1,t.x===e.x&&t.y===e.y||i.x===o.x&&i.y===o.y)return n;var s=e.x-t.x,a=e.y-t.y,l=o.x-i.x,r=o.y-i.y,u=s*r-l*a;if(this.isNear(u))return n;var p=(s*(t.y-i.y)-a*(t.x-i.x))/u,h=new SuperMap.Geometry.Point(0,0);return h.x=p*l+i.x,h.y=p*r+i.y,n.isIntersectLines=!0,n.intersectPoint=h,n},SuperMap.Plot.PlottingUtil.getEnvelopePoints=function(t){function e(t,e,i){for(var o=t.components[0].components,n=new SuperMap.Geometry.Point(0,0),s=0;s<o.length-1;s++)if(this.intersectLineSegs(e,i,o[s],o[s+1],n))return n;return null}function i(t,e){if(0===t.length||this.equalFuzzy(e[0].x,e[e.length-1].x,.5)&&this.equalFuzzy(e[0].y,e[e.length-1].y,.5))return e;for(var o=e[e.length-1],n=0;n<t.length;n++)if(this.equalFuzzy(t[n][0].x,o.x,.5)&&this.equalFuzzy(t[n][0].y,o.y,.5)){if(e=e.concat(t[n]),t.splice(n,1),void 0!==(a=i(t,e))&&0!==a.length)return a}else if(this.equalFuzzy(t[n][t[n].length-1].x,o.x,.5)&&this.equalFuzzy(t[n][t[n].length-1].y,o.y,.5)){for(var s=t[n].length-1;s>=0;s--)e.push(t[n][s]);t.splice(n,1);var a=i(t,e);if(void 0!==a&&0!==a.length)return a}return e}if(SuperMap.Util.isArray(t)||(t=[t]),0===t.length)return[];if(1===t.length)return t[0];for(n=0;n<t.length;n++)for(c=n+1;c<t.length;)!function(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i].x!==e[i].x||t[i].y!==e[i].y)return!1;return!0}(t[n],t[c])?c++:t.splice(c,1);for(var o=[],n=0;n<t.length;n++)o.push(new SuperMap.Geometry.Polygon([new SuperMap.Geometry.LinearRing(t[n])]));for(var s=[],n=0;n<t.length;n++){var a=[],l=[],r=-1,u=-1,p=o.slice();p.splice(n,1);for(var h={},c=0;c<t[n].length;c++)if(function(t,e,i){for(var o=0;o<t.length;o++)if(t[o].containsPoint(e))return i.index=o,!0;return!1}(p,t[n][c],h)){if(0!==l.length){var y=e(o[h.index],t[n][c-1],t[n][c]);y&&y!==t[n][c-1]&&y!==t[n][c]&&l.push(y),a.push(l),l=[]}}else 0===c&&(r=a.length),c===t[n].length-1&&(u=a.length),0===l.length&&void 0!==h.index&&(y=e(o[h.index],t[n][c-1],t[n][c]))&&y!==t[n][c-1]&&y!==t[n][c]&&l.push(y),l.push(t[n][c].clone());if(0!==l.length&&a.push(l),r<a.length&&u<a.length&&r!==u){for(var g=0;g<a[r].length;g++)a[u].push(a[r][g]);a.splice(r,1)}s=s.concat(a)}for(var d=[];0!==s.length;){var f=s[0];s.splice(0,1);var S=i(s,f);void 0!==S&&(f=S),f.length>2&&d.push(f)}return d},SuperMap.Plot.PlottingUtil.isRight=function(t,e,i){var o=e,n=i,s=e,a=t;return(n.x-o.x)*(a.y-s.y)-(a.x-s.x)*(n.y-o.y)<0},SuperMap.Plot.PlottingUtil.radian=function(t,e){var i,o,n=0;return t instanceof L.LatLng&&e instanceof L.LatLng?(i=e.lng-t.lng,o=e.lat-t.lat):(i=e.x-t.x,o=e.y-t.y),(n=Math.atan2(o,i))<0&&(n+=2*Math.PI),n},SuperMap.Plot.PlottingUtil.findBisectorPoint=function(t,e,i,o){var n=this.radian(e,t),s=(n+this.radian(e,i))/2,a=Math.cos(s-n+Math.PI/2),l=o;this.isNear(a,.15)||(l=o/a);var r=e.x+l*Math.cos(s),u=e.y+l*Math.sin(s);return new SuperMap.Geometry.Point(r,u)},SuperMap.Plot.PlottingUtil.findPoint=function(t,e,i,o){if(t===e||Math.abs(i)<1e-18)return t;var n=this.radian(t,e)+o*Math.PI/180,s=t.x+i*Math.cos(n),a=t.y+i*Math.sin(n);return new SuperMap.Geometry.Point(s,a)},SuperMap.Plot.PlottingUtil.isSameQuadrant=function(t,e,i,o){var n=(e.x-t.x)*(o.x-i.x),s=(e.y-t.y)*(o.y-i.y);return!(Math.abs(n)<1e-18&&Math.abs(s)<1e-18)&&((n>0||Math.abs(n)<1e-18)&&(s>0||Math.abs(s)<1e-18))},SuperMap.Plot.PlottingUtil.isCross=function(t,e,i,o){var n=new SuperMap.Geometry.Point(0,0);return!(!this.intersectLineSegs(t,e,i,o,n)||n==t||n===e||n===i||n==o)},SuperMap.Plot.PlottingUtil.intersectLineSegs=function(t,e,i,o,n){if(this.equalFuzzy(t.x,e.x)&&SuperMap.Plot.PlottingUtil.equalFuzzy(t.y,e.y))return n.x=t.x,n.y=t.y,!1;if(this.equalFuzzy(i.x,o.x)&&this.equalFuzzy(i.y,o.y))return n.x=i.x,n.y=i.y,!1;var s=0,a=0;if(s=t.x>e.x?t.x:e.x,a=t.x<e.x?t.x:e.x,i.x-s>1e-16&&o.x-s>1e-16||i.x-a<-1e-16&&o.x-a<-1e-16)return!1;if(s=t.y>e.y?t.y:e.y,a=t.y<e.y?t.y:e.y,i.y-s>1e-16&&o.y-s>1e-16||i.y-a<-1e-16&&o.y-a<-1e-16)return!1;var l=e.x-t.x,r=e.y-t.y,u=o.x-i.x,p=o.y-i.y,h=t.x-i.x,c=t.y-i.y,y=l*p-u*r,g=y;if(Math.abs(l)>1e-18&&Math.abs(u)>1e-18&&(g/=l*u),Math.abs(g)<1e-18)return t===i?(n.x=t.x,n.y=t.y,!this.isSameQuadrant(t,e,i,o)):e===o?(n.x=e.x,n.y=e.y,!this.isSameQuadrant(t,e,i,o)):t===o?(n.x=t.x,n.y=t.y,this.isSameQuadrant(t,e,i,o)):e===i&&(n.x=e.x,n.y=e.y,this.isSameQuadrant(t,e,i,o));var d=(l*c-r*h)/y,f=(u*c-p*h)/y;return!(d<0&&(Math.abs(d*u)>1e-16||Math.abs(d*p)>1e-16))&&(!(d>1&&(Math.abs((d-1)*u)>1e-16||Math.abs((d-1)*p)>1e-16))&&(!(f<0&&(Math.abs(f*l)>1e-16||Math.abs(f*r)>1e-16))&&(!(f>1&&(Math.abs((f-1)*l)>1e-16||Math.abs((f-1)*r)>1e-16))&&(Math.abs(d)<1e-18?(n.x=i.x,n.y=i.y,!0):Math.abs(d-1)<1e-18?(n.x=o.x,n.y=o.y,!0):Math.abs(f)<1e-18?(n.x=t.x,n.y=t.y,!0):Math.abs(f-1)<1e-18?(n.x=e.x,n.y=e.y,!0):!(d<0&&(Math.abs(d*u)>1e-16||Math.abs(d*p)>1e-16))&&(!(d>1&&(Math.abs((d-1)*u)>1e-16||Math.abs((d-1)*p)>1e-16))&&(!(f<0&&(Math.abs(f*l)>1e-16||Math.abs(f*r)>1e-16))&&(!(f>1&&(Math.abs((f-1)*l)>1e-16||Math.abs((f-1)*r)>1e-16))&&(n.x=d*u+i.x,n.y=d*p+i.y,!0))))))))},SuperMap.Plot.PlottingUtil.parallel=function(t,e){var i=[];if(!t||null===t||t.length<2)return i;var o=!1;t.length>3&&t[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y&&(o=!0),o?(i[0]=this.findBisectorPoint(t[t.length-2],t[0],t[1],e),i[t.length-1]=i[0]):(i[0]=this.findPoint(t[0],t[1],e,90),i[t.length-1]=this.findPoint(t[t.length-1],t[t.length-2],-e,90));for(var n=t[0],s=t[1],a=t[1],l=1;l<t.length-1;l++)if(s=t[l],t[l]!==t[l-1]&&(n=t[l-1]),t[l]!==t[l+1]){a=t[l+1];u=this.findBisectorPoint(n,s,a,e);this.isCross(n,i[l-1],s,u)&&(u=i[l-1]),i[l]=u}else{for(var r=l;r<nPntCount-1;){if(pSrc[r]!==pSrc[r+1]){a=pSrc[r+1];break}r++}if(r<nPntCount-1){var u=this.FindBisectorPoint(n,s,a,e);for(this.isCross(n,pntResults[l-1],s,u)&&(u=pntResults[l-1]);l<r;)pntResults[l]=u,l++;l=r-1}}return i},SuperMap.Plot.PlottingUtil.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},SuperMap.Plot.PlottingUtil.projectPoint=function(t,e,i){if(e===i)return e;var o=new SuperMap.Geometry.Point(0,0),n=i.x-e.x,s=e.y-i.y,a=n*n,l=s*s,r=n*s,u=n*n+s*s;return o.x=(r*(e.y-t.y)+e.x*l+t.x*a)/u,o.y=(r*(e.x-t.x)+e.y*a+t.y*l)/u,o},SuperMap.Plot.PlottingUtil.pointToLineDis=function(t,e,i){var o=this.projectPoint(t,e,i);return this.distance(t,o)},SuperMap.Plot.PlottingUtil.pointToPloyLineDis=function(t,e,i){if(e===i)return this.distance(t,e);var o=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y),n=(i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y),s=(e.x-i.x)*(e.x-i.x)+(e.y-i.y)*(e.y-i.y),a=(o+s-n)/(2*s);a<0?a=0:a>1&&(a=1);var l=(i.x-e.x)*a+e.x,r=(i.y-e.y)*a+e.y,u=(l-t.x)*(l-t.x)+(r-t.y)*(r-t.y);return Math.sqrt(u)},SuperMap.Plot.PlottingUtil.isCounterClockwise=function(t,e,i){return(i.x-e.x)*(t.y-e.y)-(t.x-e.x)*(i.y-e.y)>0},SuperMap.Plot.PlottingUtil.clearSamePts=function(t){for(var e=t.length,i=0;i<e-1;)this.equalFuzzy(t[i].x,t[i+1].x)&&this.equalFuzzy(t[i].y,t[i+1].y)?(t.splice(i,1),e--):i++;return t},SuperMap.Plot.PlottingUtil.getBeizerCtrlPt=function(t){var e=[],i=t.length;if(i<3)for(n=0;n!=i;++n)e[n]=t[n].clone();else{for(var o=0,n=0;n<3*i-2;n+=3)e[n]=t[o].clone(),e[n+1]=new SuperMap.Geometry.Point(0,0),e[n+2]=new SuperMap.Geometry.Point(0,0),o++;for(n=1;n<i-1;n++)SuperMap.Plot.PlottingUtil.getTrianglePoints(8,3,t[n-1],t[n],t[n+1],e[3*n-1],e[3*n+1]);SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.6,e[0],e[3],e[2],e[1]),SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.6,e[3*i-3],e[3*i-6],e[3*i-5],e[3*i-4]),e[3*i-1]=e[3*i-2]=t[i-1].clone()}return e},SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt=function(t){var e=SuperMap.Plot.PlottingUtil.getBeizerCtrlPt(t);return SuperMap.Plot.PlottingUtil.generateBeizerPointsWithCtrlPt(e)},SuperMap.Plot.PlottingUtil.generateBeizerPointsWithCtrlPt=function(t){var e=t.length,i=[];if(t.length<3)for(o=0;o<e;o++)i[o]=t[o].clone();else{e/=3;for(var o=0;o<3*e&&!(o+4>=3*e);o+=3){var n=t[o].x,s=t[o].y,a=t[o+1].x,l=t[o+1].y,r=t[o+2].x,u=t[o+2].y,p=t[o+3].x,h=t[o+3].y;if(SuperMap.Plot.PlottingUtil.equalFuzzy(n,a,1e-10)&&SuperMap.Plot.PlottingUtil.equalFuzzy(s,l,1e-10)&&SuperMap.Plot.PlottingUtil.equalFuzzy(r,p,1e-10)&&SuperMap.Plot.PlottingUtil.equalFuzzy(u,h,1e-10))i.push(new SuperMap.Geometry.Point(n,s)),i.push(new SuperMap.Geometry.Point(r,u));else for(var c=0;c<=1;c+=.03125){var y,g,d,f,S=c*c,P=S*c;y=1-3*c+3*S-P,g=3*(c-2*S+P),d=3*(S-P),f=P;var m=new SuperMap.Geometry.Point(y*n+g*a+d*r+f*p,y*s+g*l+d*u+f*h);i.push(m)}}}return i},SuperMap.Plot.PlottingUtil.computeBeizerPoints=function(t,e,i){var o=SuperMap.Plot.PlottingUtil.polylineDistance(e),n=[],s=[],a=[];if(t){s.push(e[0]);var l=i[0],r=i[1],u=e[0].x+o*l,p=e[0].y+o*r;s.push(new SuperMap.Geometry.Point(u,p)),n.push(new SuperMap.Geometry.Point(u,p));for(f=1;f<e.length-1;f++){var l=i[4*f-2],r=i[4*f-1],u=e[f].x+o*l,p=e[f].y+o*r;s.push(new SuperMap.Geometry.Point(u,p)),n.push(new SuperMap.Geometry.Point(u,p)),s.push(new SuperMap.Geometry.Point(e[f].x,e[f].y)),l=i[4*f],r=i[4*f+1],u=e[f].x+o*l,p=e[f].y+o*r,s.push(new SuperMap.Geometry.Point(u,p)),n.push(new SuperMap.Geometry.Point(u,p))}var h=e.length-1;l=i[4*h-2],r=i[4*h-1],u=e[h].x+o*l,p=e[h].y+o*r,s.push(new SuperMap.Geometry.Point(u,p)),n.push(new SuperMap.Geometry.Point(u,p)),s.push(new SuperMap.Geometry.Point(e[h].x,e[h].y)),s.push(new SuperMap.Geometry.Point(e[h].x,e[h].y)),s.push(new SuperMap.Geometry.Point(e[h].x,e[h].y)),a=SuperMap.Plot.PlottingUtil.generateBeizerPointsWithCtrlPt(s)}else{i=[];var c=(s=SuperMap.Plot.PlottingUtil.getBeizerCtrlPt(e))[1].x-s[0].x,y=s[1].y-s[0].y,g=c/o,d=y/o;i.push(g),i.push(d),n.push(s[1]);for(var f=1;f<e.length-1;f++){var g=(c=s[3*f-1].x-s[3*f].x)/o,d=(y=s[3*f-1].y-s[3*f].y)/o;i.push(g),i.push(d),n.push(s[3*f-1]);var S=(s[3*f+1].x-s[3*f].x)/o,P=(s[3*f+1].y-s[3*f].y)/o;i.push(S),i.push(P),n.push(s[3*f+1])}g=(c=s[3*(e.length-1)-1].x-s[3*(e.length-1)].x)/o,d=(y=s[3*(e.length-1)-1].y-s[3*(e.length-1)].y)/o,i.push(g),i.push(d),n.push(s[3*(e.length-1)-1]),a=SuperMap.Plot.PlottingUtil.generateBeizerPointsWithCtrlPt(s)}return{scalePoints:n,scaleValues:i,beizerPoints:a}},SuperMap.Plot.PlottingUtil.getTrianglePoints=function(t,e,i,o,n,s,a){var l=i.x,r=i.y,u=o.x,p=o.y,h=n.x,c=n.y;SuperMap.Plot.PlottingUtil.getPointsByTriangle(t,e,l,r,u,p,h,c,s,a)},SuperMap.Plot.PlottingUtil.getPointsByTriangle=function(t,e,i,o,n,s,a,l,r,u){var p=n+(a-i),h=s+(l-o),c=0,y=0;if(i==a)c=i,y=h;else if(o==l)c=p,y=o;else{var g=1*(l-o)/(a-i),d=o-i*g;y=g*(c=(h+p/g-d)/(g+1/g))+d}var f=Math.sqrt(1*(n-p)*(n-p)+1*(s-h)*(s-h)),S=Math.sqrt(1*(i-n)*(i-n)+1*(o-s)*(o-s)),P=Math.sqrt(1*(n-a)*(n-a)+1*(s-l)*(s-l)),m=0;p=c+(p-c)*(m=S+P?1+(P-S)*t/(P+S):1),h=y+(h-y)*m,0==f&&(f=1),r.x=n+(n-p)*S/(e*f),r.y=s+(s-h)*S/(e*f),u.x=n+(p-n)*P/(e*f),u.y=s+(h-s)*P/(e*f)},SuperMap.Plot.PlottingUtil.getTrapezoidPoints=function(t,e,i,o,n){var s=e.x,a=e.y,l=i.x,r=i.y,u=o.x,p=o.y;return SuperMap.Plot.PlottingUtil.getPointsByTrapezoid(t,s,a,l,r,u,p,n)},SuperMap.Plot.PlottingUtil.getPointsByTrapezoid=function(t,e,i,o,n,s,a,l){var r=0,u=0,p=0,h=0;if(0==Math.abs(i-n))r=e+o-s,u=a;else if(0==Math.abs(e-o))r=s,u=i+n-a;else{var c=1*(i-n)/(e-o),y=a-c*s;u=c*(r=((n+i)/2+(e+o)/(2*c)-y)/(c+1/c))+y,r=2*r-s,u=2*u-a}var g=Math.sqrt(1*(e-o)*(e-o)+1*(i-n)*(i-n)),d=Math.sqrt(1*(e-r)*(e-r)+1*(i-u)*(i-u));return g>0?(p=e+(o-e)*d/g,h=i+(n-i)*d/g):(p=e,h=i),l.x=p+(r-p)*t,l.y=h+(u-h)*t,l},SuperMap.Plot.PlottingUtil.pointIsOnPolyLine=function(t,e,i){if(SuperMap.Plot.PlottingUtil.equalFuzzy(t.x,e.x)&&SuperMap.Plot.PlottingUtil.equalFuzzy(t.y,e.y)||SuperMap.Plot.PlottingUtil.equalFuzzy(t.x,i.x)&&SuperMap.Plot.PlottingUtil.equalFuzzy(t.y,i.y))return!0;var o=t.x-e.x,n=t.y-e.y,s=t.x-i.x,a=t.y-i.y,l=(o*s+n*a)/(Math.sqrt(o*o+n*n)*Math.sqrt(s*s+a*a));return!!SuperMap.Plot.PlottingUtil.equalFuzzy(l,-1,.1)},SuperMap.Plot.PlottingUtil.pointIsOnPolyLines=function(t,e){if(!e||null===e||0===e.length)return{isOnPolyLine:!1,index:-1};for(var i=!1,o=-1,n=0;n<e.length-1;n++)if(i=SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(t,e[n],e[n+1])){o=n;break}return{isOnPolyLine:i,index:o}},SuperMap.Plot.PlottingUtil.computePointToLineMinDis=function(t,e){for(var i=-1,o=-1,n=0;n<e.length-1;n++){var s=e[n],a=e[n+1],l=SuperMap.Plot.PlottingUtil.projectPoint(t,s,a);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(l,s,a)){var r=SuperMap.Plot.PlottingUtil.distance(t,l);i<0?(i=r,o&&(o=n)):i>r&&(i=r,o=n)}}return o&&i<0&&(o=-1),{minDis:i,index:o}},SuperMap.Plot.PlottingUtil.findPointInLine=function(t,e,i){if(t===e||Math.abs(i)<1e-18)return t;var o=e.x-t.x,n=e.y-t.y,s=i/Math.sqrt(o*o+n*n),a=t.x+o*s,l=t.y+n*s;return new SuperMap.Geometry.Point(a,l)},SuperMap.Plot.PlottingUtil.operateControlPoints=function(t){var e=t,i=e.length;if(3==i){var o=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrapezoidPoints(1,t[0],t[1],t[2],o),e.push(o)}if(i>4&&(e.splice(4,i-4),i=e.length),SuperMap.Plot.PlottingUtil.pointIsRightToLine(t[0],t[1],e[2])){n=e[0];e[0]=e[1],e[1]=n}if(!SuperMap.Plot.PlottingUtil.pointIsRightToVerticle(e[0],e[1],e[2])){var n=e[2];e[2]=e[3],e[3]=n}return e},SuperMap.Plot.PlottingUtil.pointIsRightToLine=function(t,e,i){return(e.x-t.x)*(i.y-t.y)-(i.x-t.x)*(e.y-t.y)<0},SuperMap.Plot.PlottingUtil.pointIsRightToVerticle=function(t,e,i){var o=new SuperMap.Geometry.Point(.5*(e.x+t.x),.5*(e.y+t.y)),n=new SuperMap.Geometry.Point(e.x-t.x,e.y-t.y),s=new SuperMap.Geometry.Point(i.x-o.x,i.y-o.y);return n.x*s.x+n.y*s.y>0},SuperMap.Plot.PlottingUtil.linePnt=function(t,e,i){var o=SuperMap.Plot.PlottingUtil.distance(t,e);if(0==o)return t;var n=i/o;return SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(n,t,e)},SuperMap.Plot.PlottingUtil.findPointOnLineByRatio=function(t,e,i){var o=new SuperMap.Geometry.Point(0,0);return o.x=e.x+(i.x-e.x)*t,o.y=e.y+(i.y-e.y)*t,o},SuperMap.Plot.PlottingUtil.rotateAngle=function(t,e,i){var o=e,n=Math.cos(o),s=Math.sin(o),a=i.x-t.x,l=i.y-t.y;return i.x=a*n-l*s+t.x,i.y=a*s+l*n+t.y,i},SuperMap.Plot.PlottingUtil.resize=function(t,e,i){return i.x=t.x+e*(i.x-t.x),i.y=t.y+e*(i.y-t.y),i},SuperMap.Plot.PlottingUtil.findPointInPolyLine=function(t,e){if(e<0||t.length<2)return{index:-1,pt:null};if(Math.abs(e)<1e-18)return{index:0,pt:t[0]};for(var i=0,o=0;o<t.length-1;o++)if((i+=SuperMap.Plot.PlottingUtil.distance(t[o],t[o+1]))>e||SuperMap.Plot.PlottingUtil.equalFuzzy(i,e)){var n=i-e,s=t[o+1],a=t[o],l=n/SuperMap.Plot.PlottingUtil.distance(s,a),r=new SuperMap.Geometry.Point(0,0);return r.x=s.x+(a.x-s.x)*l,r.y=s.y+(a.y-s.y)*l,{index:o,pt:r}}return{index:-1,pt:null}},SuperMap.Plot.PlottingUtil.polylineDistance=function(t){if(0===t.length)return 0;for(var e=0,i=0;i<t.length-1;i++)e+=SuperMap.Plot.PlottingUtil.distance(t[i],t[i+1]);return e},SuperMap.Plot.PlottingUtil.rotate=function(t,e,i,o){var n=o.x-t.x,s=o.y-t.y,a=n*e-s*i+t.x,l=n*i+s*e+t.y;return new SuperMap.Geometry.Point(a,l)},SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale=function(t,e,i){var o=e.x,n=e.y,s=i.x,a=i.y,l=Math.sqrt(1*(o-s)*(o-s)+1*(n-a)*(n-a)),r=0,u=0;return 0==l?(r=o,u=n):(r=o+(s-o)*t/l,u=n+(a-n)*t/l),new SuperMap.Geometry.Point(r,u)},SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale=function(t,e,i){var o=e.x,n=e.y,s=i.x,a=i.y,l=0,r=0,u=Math.sqrt(1*(o-s)*(o-s)+1*(n-a)*(n-a));return 0===u?(l=o,r=n):(l=o+(o-s)*t/u,r=n+(n-a)*t/u),new SuperMap.Geometry.Point(l,r)},SuperMap.Plot.PlottingUtil.getSidePointsOfLine=function(t,e,i){var o=e.x,n=e.y,s=i.x,a=i.y,l=Math.sqrt(1*(o-s)*(o-s)+1*(n-a)*(n-a)),r=0,u=0;0==l?(u=0,r=t):(r=t*(o-s)/l,u=t*(n-a)/l);var p=-u+s,h=+r+a,c=+u+s,y=-r+a;return{pntLeft:new SuperMap.Geometry.Point(c,y),pntRight:new SuperMap.Geometry.Point(p,h)}},SuperMap.Plot.PlottingUtil.pointProjectToSegment=function(t,e,i){var o,n,s=0,a=0,l=0,r=1;if(a=e.x!==t.x?(e.y-t.y)/(e.x-t.x):1.7976931348623157e308,l=i.x!==t.x?(i.y-t.y)/(i.x-t.x):1.7976931348623157e308,s=i.y!==e.y?(i.x-e.x)/(e.y-i.y):1.7976931348623157e308,o=e.x>=t.x&&e.y>=t.y?1:e.x<t.x&&e.y>t.y?2:e.x<=t.x&&e.y<=t.y?3:4,n=i.x>t.x&&i.y>t.y?1:i.x<t.x&&i.y>t.y?2:i.x<t.x&&i.y<t.y?3:4,o==n)(a<s&&l<s||a>s&&l>s)&&(r=0);else switch(o){case 1:(4==n&&a<s||2==n&&a>s)&&(r=0);break;case 2:(1==n&&a<s||3==n&&a>s)&&(r=0);break;case 3:(2==n&&a<s||4==n&&a>s)&&(r=0);break;case 4:(3==n&&a<s||1==n&&a>s)&&(r=0)}var u=new SuperMap.Geometry.Point(0,0);return SuperMap.Plot.PlottingUtil.equalFuzzy(s-1.7976931348623157e308,0)?(u.x=t.x,u.y=e.y):SuperMap.Plot.PlottingUtil.equalFuzzy(s,0)?(u.x=e.x,u.y=t.y):(u.x=(s*(e.y-t.y)+s*s*t.x+e.x)/(s*s+1),u.y=t.y+s*(u.x-t.x)),{isOnline:1===r,projectPoint:u}},SuperMap.Plot.PlottingUtil.coordinateTrans=function(t,e,i){var o=SuperMap.Plot.PlottingUtil.distance(new SuperMap.Geometry.Point(0,0),e),n=SuperMap.Plot.PlottingUtil.radian(new SuperMap.Geometry.Point(0,0),e)+i*Math.PI/180,s=o*Math.cos(n)+t.x,a=o*Math.sin(n)+t.y;return new SuperMap.Geometry.Point(s,a)},SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen=function(t,e,i){var o,n,s=(i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y),a=Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)),l=Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y));if(0==l||0==a)o=0,n=0;else if(0==s)o=a,n=0;else{var r=(a*a+l*l-s)/2/a/l,u=0;r>=1?(r=1,u=0):u=Math.sqrt(1-r*r),o=l*r,n=l*u}return{dLen1:o,dLen2:n}},SuperMap.Plot.PlottingUtil.paraLine=function(t,e,i){var o=[];if(2>t.length)return o;if(i){r=t[1].clone();r=SuperMap.Plot.PlottingUtil.rotateAngle(t[0],Math.PI/2,r),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[0],r,e));for(u=1;u<t.length-1;u++)if(!SuperMap.Plot.PlottingUtil.equalFuzzy(t[u].x,t[u+1].x)||!SuperMap.Plot.PlottingUtil.equalFuzzy(t[u].y,t[u+1].y)){for(var n=SuperMap.Plot.PlottingUtil.radian(t[u],t[u+1]),s=(p=SuperMap.Plot.PlottingUtil.radian(t[u],t[u-1]))-n;s<0;)s+=2*Math.PI;var a,l=s/2;a=l>Math.PI/2?l-Math.PI/2:Math.PI/2-l;y=e/Math.cos(a);r=t[u+1].clone(),r=SuperMap.Plot.PlottingUtil.rotateAngle(t[u],l,r),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[u],r,y))}r=t[t.length-2].clone(),r=SuperMap.Plot.PlottingUtil.rotateAngle(t[t.length-1],-1*Math.PI/2,r),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[t.length-1],r,e))}else{var r=t[1].clone();r=SuperMap.Plot.PlottingUtil.rotateAngle(t[0],-Math.PI/2,r),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[0],r,e));for(var u=1;u<t.length-1;u++)if(!SuperMap.Plot.PlottingUtil.equalFuzzy(t[u].x,t[u+1].x)||!SuperMap.Plot.PlottingUtil.equalFuzzy(t[u].y,t[u+1].y)){for(var n=SuperMap.Plot.PlottingUtil.radian(t[u],t[u+1]),p=SuperMap.Plot.PlottingUtil.radian(t[u],t[u-1]),s=p-n;s<0;)s+=2*Math.PI;var h,c=Math.PI-s/2;h=c>Math.PI/2?c-Math.PI/2:Math.PI/2-c;var y=e/Math.cos(h);r=t[u-1].clone(),r=SuperMap.Plot.PlottingUtil.rotateAngle(t[u],c,r),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[u],r,y))}r=t[t.length-2].clone(),r=SuperMap.Plot.PlottingUtil.rotateAngle(t[t.length-1],Math.PI/2,r),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[t.length-1],r,e))}return o},SuperMap.Plot.PlottingUtil.circlePoint=function(t,e,i,o){o*=Math.PI/180;var n=t.x+e*Math.cos(o),s=t.y+i*Math.sin(o);return new SuperMap.Geometry.Point(n,s)},SuperMap.Plot.PlottingUtil.getPolygonCenterPt=function(t){if(!t||null===t||0===t.length)return null;for(var e=0,i=0,o=0;o<t.length;o++)e+=t[o].x,i+=t[o].y;return new SuperMap.Geometry.Point(e/t.length,i/t.length)},SuperMap.Plot.PlottingUtil.ptIsInPolygon=function(t,e){if(!t||null===t||0===t.length)return!1;for(var i=0,o=t.length,n=0;n<o;n++){var s=t[n],a=t[(n+1)%o];if(s.y!==a.y){var l=s.y<a.y?s.y:a.y,r=s.y>a.y?s.y:a.y;e.y<l||e.y>r||(e.y-s.y)*(a.x-s.x)/(a.y-s.y)+s.x>e.x&&i++}}return i%2==1},SuperMap.Plot.PlottingUtil.projectPtOnPolyLine=function(t,e){if(2>e.length)return{index:-1,pt:null};for(var i=0;i<e.length-1;i++){var o=SuperMap.Plot.PlottingUtil.pointProjectToSegment(t,e[i],e[i+1]);if(o.isOnline)return{index:i,pt:o.projectPoint}}return{index:-1,pt:null}},SuperMap.Plot.PlottingUtil.isPloyClockwise=function(t){var e=SuperMap.Plot.PlottingUtil.clonePoints(t),i=e.length;if(!(i<3)){var o=e[0].y*(e[i-1].x-e[1].x);e.push(e[0].clone());for(var n=1;n<i;++n)o+=e[n].y*(e[n-1].x-e[n+1].x);return o>0?0:1}},SuperMap.Plot.PlottingUtil.isSamePt=function(t,e){return!(!SuperMap.Plot.PlottingUtil.equalFuzzy(t.x,e.x)||!SuperMap.Plot.PlottingUtil.equalFuzzy(t.y,e.y))},SuperMap.Plot.PlottingUtil.getPtsIndexByDistance=function(t,e){var i=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,t);return{index:i.index,pts:i.pt,bfind:-1!==i.index}},SuperMap.Plot.PlottingUtil.ptInBounds=function(t,e){return t.x>e.left&&t.x<e.right&&t.y<e.top&&t.y>e.bottom},SuperMap.Plot.PlottingUtil.InnerAngle=function(t,e,i){if(t==e||t==i)return 0;var o=SuperMap.Plot.PlottingUtil.distance(t,e),n=SuperMap.Plot.PlottingUtil.distance(t,i),s=SuperMap.Plot.PlottingUtil.distance(e,i),a=(o*o+n*n-s*s)/(2*o*n);return a>1&&SuperMap.Plot.PlottingUtil.equalFuzzy(a,1)?a=1:a<1&&SuperMap.Plot.PlottingUtil.equalFuzzy(a,-1)&&(a=-1),Math.acos(a)},SuperMap.Plot.PlottingUtil.plumbLineLen=function(t,e,i){return SuperMap.Plot.PlottingUtil.distance(t,e)*Math.sin(SuperMap.Plot.PlottingUtil.InnerAngle(e,t,i))},SuperMap.Plot.PlottingUtil.paraPolygon=function(t,e,i){var o=[],n=SuperMap.Plot.PlottingUtil.clonePoints(t),s=n.length;if(s<2)return o;r=new SuperMap.Geometry.Point(0,0);if(i){if(s<3)r=n[1].clone(),SuperMap.Plot.PlottingUtil.rotateAngle(n[0],Math.PI,r),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[0],r,e));else{for(var a=SuperMap.Plot.PlottingUtil.radian(n[0],n[1]),l=(p=SuperMap.Plot.PlottingUtil.radian(n[0],n[n.length-1]))-a;l<0;)l+=2*Math.PI;h=(c=l/2)>Math.PI/2?c-Math.PI/2:Math.PI/2-c;y=e/Math.cos(h);r=n[1].clone(),r=SuperMap.Plot.PlottingUtil.rotateAngle(n[0],c,r),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[0],r,y))}for(u=1;u<s-1;u++){for(var a=SuperMap.Plot.PlottingUtil.radian(n[u],n[u+1]),l=(p=SuperMap.Plot.PlottingUtil.radian(n[u],n[u-1]))-a;l<0;)l+=2*Math.PI;h=(c=l/2)>Math.PI/2?c-Math.PI/2:Math.PI/2-c;y=e/Math.cos(h);r=n[u+1].clone(),r=SuperMap.Plot.PlottingUtil.rotateAngle(n[u],c,r),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[u],r,y))}if(s<3)r=n[s-2].clone(),SuperMap.Plot.PlottingUtil.rotateAngle(n[s-1],0,r),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[s-1],r,e));else{for(var a=SuperMap.Plot.PlottingUtil.radian(n[s-1],n[0]),l=(p=SuperMap.Plot.PlottingUtil.radian(n[s-1],n[s-2]))-a;l<0;)l+=2*Math.PI;h=(c=l/2)>Math.PI/2?c-Math.PI/2:Math.PI/2-c;y=e/Math.cos(h);r=n[0].clone(),r=SuperMap.Plot.PlottingUtil.rotateAngle(n[s-1],c,r),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[s-1],r,y))}}else{if(s<3){var r=n[1].clone();SuperMap.Plot.PlottingUtil.rotateAngle(n[0],0,r),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[0],r,e))}else{for(var a=SuperMap.Plot.PlottingUtil.radian(n[0],n[1]),l=(p=SuperMap.Plot.PlottingUtil.radian(n[0],n[s-1]))-a;l<0;)l+=2*Math.PI;h=(c=Math.PI-l/2)>Math.PI/2?c-Math.PI/2:Math.PI/2-c;y=e/Math.cos(h);r=n[s-1].clone(),r=SuperMap.Plot.PlottingUtil.rotateAngle(n[0],c,r),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[0],r,y))}for(var u=1;u<s-1;u++){for(var a=SuperMap.Plot.PlottingUtil.radian(n[u],n[u+1]),l=(p=SuperMap.Plot.PlottingUtil.radian(n[u],n[u-1]))-a;l<0;)l+=2*Math.PI;h=(c=Math.PI-l/2)>Math.PI/2?c-Math.PI/2:Math.PI/2-c;y=e/Math.cos(h);r=n[u-1].clone(),r=SuperMap.Plot.PlottingUtil.rotateAngle(n[u],c,r),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[u],r,y))}if(s<3)r=n[s-2].clone(),SuperMap.Plot.PlottingUtil.rotateAngle(n[s-1],Math.PI,r),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[s-1],r,e));else{for(var a=SuperMap.Plot.PlottingUtil.radian(n[s-1],n[0]),p=SuperMap.Plot.PlottingUtil.radian(n[s-1],n[s-2]),l=p-a;l<0;)l+=2*Math.PI;var h,c=Math.PI-l/2;h=c>Math.PI/2?c-Math.PI/2:Math.PI/2-c;var y=e/Math.cos(h);r=n[s-2].clone(),r=SuperMap.Plot.PlottingUtil.rotateAngle(n[s-1],c,r),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[s-1],r,y))}}return o},SuperMap.Plot.PlottingUtil.getOutRectangleDis=function(t){if(2>t.length)return 0;for(var e=t[0].x,i=t[0].x,o=t[0].y,n=t[0].y,s=1;s<t.length;s++)e<t[s].x&&(e=t[s].x),i>t[s].x&&(i=t[s].x),o<t[s].y&&(o=t[s].y),n>t[s].y&&(n=t[s].y);return SuperMap.Plot.PlottingUtil.distance(new SuperMap.Geometry.Point(e,o),new SuperMap.Geometry.Point(i,n))},SuperMap.Plot.PlottingUtil.clonePoints=function(t){var e=[];if(void 0===t||null===t)return e;if(SuperMap.Util.isArray(t)||(t=[t]),t&&null!==t)for(var i=0;i<t.length;i++)void 0!==t[i]&&null!==t[i]&&e.push(t[i].clone());return e}},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=o(i(0)),u=(o(i(3)),function(t){function e(t){n(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.MAX_ARRAY_SIZE=128,i.sv1_DefaultAtLenDivAbLen=0,i.sv2_DefaultAjWidthDivAtLen=.148,i.sv3_DefaultAeWidthDivAtLen=.4,i.sv4_DefaultAeLenDivAtLen=.312,i.sv_AtScaleParameter=1.5,i.sv_AtLenDivAtWidth=1.35,i.sv_AtWidthDivAwWidth=.5,i.sv_defaultAwLenDivAbLen=.15,i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1004",i.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,i.symbolName||(i.symbolName="贝塞尔尖耳箭头"),i.minEditPts=3,i.maxEditPts=512,i.clearScalePoints(),0===i.getScaleValues().length&&(i.getScaleValues().push(i.sv1_DefaultAtLenDivAbLen),i.getScaleValues().push(i.sv2_DefaultAjWidthDivAtLen),i.getScaleValues().push(i.sv3_DefaultAeWidthDivAtLen),i.getScaleValues().push(i.sv4_DefaultAeLenDivAtLen)),i}return a(e,r["default"]),l(e,[{key:"calculateParts",value:function(){this.clearComponents(),this.applyUse()}},{key:"applyUse",value:function(){var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length>=2&&t.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){var e=this.arrowMeshs(t);SuperMap.Plot.PlottingUtil.clearSamePts(e.shapePts);var i=SuperMap.Plot.PlottingUtil.clonePoints(t),o=i.length,n=!1;if(void 0!==i[0].z&&(n=!0),n){for(var s=e.leftBodyPts,a=e.rightBodyPts,l=e.arrowHeadPts,r=e.shapePts,u=[],p=0;p<r.length;p++)u.push({x:r[p].x,y:r[p].y,z:0});if(0==r.length)return!1;T=this.updateScalePoints(t);if(this.clearScalePoints(),3!=T.length)T=[];else for(p=0;p<T.length;p++)T[p].isScalePoint=!0,T[p].tag=p,this.addScalePoint(T[p]);var h=[],c={x:(i[0].x+i[1].x)/2,y:(i[0].y+i[1].y)/2},y={x:(s[s.length-1].x+a[0].x)/2,y:(s[s.length-1].y+a[0].y)/2},g=this.ComputeZValue(y,i[o-1],i[o-2]),d=0,f=0;s[0].x==i[0].x&&s[0].y==i[0].y?(d=i[0].z,f=i[1].z):(d=i[1].z,f=i[0].z),h.push({x:c.x,y:c.y,z:d});for(p=2;p<o-1;p++)h.push(i[p]);h.push({x:y.x,y:y.y,z:g});var S=[];this.ComputeBeizerZValueByDis(h,s,S),(h=[]).push({x:y.x,y:y.y,z:g});for(p=o-2;p>=2;p--)h.push(i[p]);h.push({x:c.x,y:c.y,z:f});var P=[];this.ComputeBeizerZValueByDis(h,a,P);for(var m=[],b=0;b<l.length;b++){var L=this.ComputeZValue(l[b],i[o-1],i[o-2]);m.push({x:l[b].x,y:l[b].y,z:L})}if(S.length>0&&P.length>0&&m.length>0){u=(u=(u=(u=[]).concat(S)).concat(m)).concat(P),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,{surroundLineFlag:!1});for(var M=[],p=0;p<T.length;p++){var v=this.ComputeZValue(T[p],i[o-1],i[o-2]),_=new SuperMap.Geometry.Point(T[p].x,T[p].y);_.z=v,M.push(_)}this.clearScalePoints(),3!=T.length?T=[]:this.setScalePoints(this.getScalePoints().concat(M))}}else{if(0==e.shapePts.length)return;this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e.shapePts,{surroundLineFlag:!1});var T=this.updateScalePoints(t);if(this.clearScalePoints(),3!=T.length)T=[];else for(p=0;p<T.length;p++)T[p].isScalePoint=!0,T[p].tag=p,this.addScalePoint(T[p])}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var i=SuperMap.Plot.PlottingUtil.clonePoints(this.getControlPoints());i=SuperMap.Plot.PlottingUtil.clearSamePts(i),this.getScaleValues().length<4&&(this.getScaleValues().push(this.sv1_DefaultAtLenDivAbLen),this.getScaleValues().push(this.sv2_DefaultAjWidthDivAtLen),this.getScaleValues().push(this.sv3_DefaultAeWidthDivAtLen),this.getScaleValues().push(this.sv4_DefaultAeLenDivAtLen));var o=i.length;if(o<=2)return;var n=this.operateCtrlPts(i);o=n.length,o--;var s,a,l,r,u=this.calcScaleValueCount(i.length);if(this.getScaleValues().length<u){var p=this.calcDefaultScaleValues(o);s=p[0],a=p[1],l=p[2],r=p[3]}else s=this.getScaleValues()[0],a=this.getScaleValues()[1],l=this.getScaleValues()[2],r=this.getScaleValues()[3];for(var h=SuperMap.Plot.PlottingUtil.polylineDistance(i),c=[],y=0;y<this.getScalePoints().length;y++)c.push(this.getScalePoints()[y].clone());if(0==c.length)return;c[t]=e.clone();var g,d,y=o-1;g=o<=3?new SuperMap.Geometry.Point((n[0].x+n[1].x)/2,(n[0].y+n[1].y)/2):n[y-1].clone();var f=new SuperMap.Geometry.Point(0,0),S=new SuperMap.Geometry.Point(0,0),P=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrianglePoints(0,3,g,n[y],n[y+1],S,P),SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,n[o],n[o-1],P,f),d=f.clone();var m,b,L,M,v,_,T=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(n[o],d,c[2]);m=T.dLen1,b=T.dLen2,0==m&&(m=.1),b=m,s=(m/=r+1)/h,1==t?(M=(T=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(n[o],d,c[1])).dLen1,l=(v=T.dLen2)/m,r=(M-m)/m):0==t?(m=(T=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(n[o],d,c[0])).dLen1,a=(L=T.dLen2)/m,(_=SuperMap.Plot.PlottingUtil.distance(n[o],n[o-1]))<2*m&&(m=.5*_),M=(T=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(n[o],d,c[1])).dLen1,l=(v=T.dLen2)/m,(r=(b-m)/m)<.1&&(l=v/(m=b/(1+(r=.1))),a=L/m),s=m/h):2==t&&(s=m/h),L=m*a,(_=SuperMap.Plot.PlottingUtil.distance(n[o],n[o-1]))<2*m&&(L=(m=.5*_)*a,s=m/h),this.getScaleValues()[0]=s,this.getScaleValues()[1]=a,this.getScaleValues()[2]=l,this.getScaleValues()[3]=r}this.calculateParts()}},{key:"arrowMeshs",value:function(t){var e=[],i=[],o=[],n=[],s=SuperMap.Plot.PlottingUtil.clonePoints(t),a=SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePts(s,this.getScaleValues(),SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_MULTIPOLYBEZIER),l=a.arrowTouLen,r=a.leftBodyPts,u=a.rightBodyPts;if(!SuperMap.Plot.PlottingUtil.equalFuzzy(l,0)){var p=[];p.push(r[r.length-1]),p.push(u[u.length-1]);var h=[];h.push(this.getScaleValues()[2]),h.push(this.getScaleValues()[3]),h.push(0),h.push(0);var c=SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePts(s,p,h,l,SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_WITH_EAR),y=[];y.push(r[0]),y.push(u[0]);SuperMap.Plot.ArrowToolKit.generateArrowTailShapePts(t,y,.2,SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_COATTAIL_POLYBODY);for(g=0;g<r.length;g++)e.push(r[g]),i.push(r[g]);for(g=0;g<c.length;g++)e.push(c[g]),n.push(c[g]);for(var g=u.length-1;g>=0;g--)e.push(u[g]),o.push(u[g])}return{shapePts:e,leftBodyPts:i,rightBodyPts:o,arrowHeadPts:n}}},{key:"updateScalePoints",value:function(t){var e=t.length,i=[];if(!(e<3)){var o=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(!SuperMap.Plot.PlottingUtil.equalFuzzy(o,0)){var n=this.operateCtrlPts(t);e=n.length,e--;for(var s=[],a=0;a<this.getScaleValues().length;a++)s.push(this.getScaleValues()[a]);var l=this.genArrowBodyPts(o,n,s),r=l.ArrowBodyCenterPts,u=this.genAtPts(e,r,s,l.ArrowTouLen),p=this.calc3rdScalePt(e,r,s,l.ArrowTouLen);return i.push(new SuperMap.Geometry.Point(l.LeftBodyPtsTemp[e].x,l.LeftBodyPtsTemp[e].y)),i.push(new SuperMap.Geometry.Point(u[2].x,u[2].y)),i.push(new SuperMap.Geometry.Point(p.x,p.y)),i}}}},{key:"operateCtrlPts",value:function(t){var e=SuperMap.Plot.PlottingUtil.clonePoints(t);if(3===e.length){var i=((e[0].x+e[1].x)/2+e[2].x)/2,o=((e[0].y+e[1].y)/2+e[2].y)/2,n=new SuperMap.Geometry.Point(i,o),s=e[2];e[2]=n,e.push(s)}return e}},{key:"genArrowBodyPts",value:function(t,e,i){var o,n=[],s=[],a=[],l=[],r=[],u=[],p=e.length;p--;var h,c;if(i.length<this.calcScaleValueCount(p)){var y=this.calcDefaultScaleValues(p);h=y[0],c=y[1],y[2],y[3]}else h=i[0],c=i[1],i[2],i[3];var g=SuperMap.Plot.PlottingUtil.clonePoints(e),d=(g[0].x+g[1].x)/2,f=(g[0].y+g[1].y)/2,S=Math.abs(d-g[2].x),P=Math.abs(f-g[2].y),m=0;if(S>0&&P>0){var b=1/(d-g[2].x),L=-1/(f-g[2].y),M=1*g[2].y/(f-g[2].y)-1*g[2].x/(d-g[2].x);m=Math.abs(b*g[0].x+L*g[0].y+M)/Math.sqrt(b*b+L*L)}else P<=1e-4?m=Math.abs(f-g[1].y):S<=1e-4&&(m=Math.abs(d-g[1].x));var v=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(m,g[2],new SuperMap.Geometry.Point(d,f)),_=SuperMap.Plot.PlottingUtil.pointIsRightToLine(g[1],g[2],g[0]);_?(n[1]=g[1],s[1]=g[0]):(n[1]=g[0],s[1]=g[1]),g[1]=new SuperMap.Geometry.Point((g[0].x+g[1].x)/2,(g[0].y+g[1].y)/2);var T=Math.sqrt((v.pntLeft.x-v.pntRight.x)*(v.pntLeft.x-v.pntRight.x)+(v.pntLeft.y-v.pntRight.y)*(v.pntLeft.y-v.pntRight.y))*this.sv_AtWidthDivAwWidth,x=(o=T*this.sv_AtLenDivAtWidth)*c;SuperMap.Plot.PlottingUtil.equalFuzzy(h,0)||(x=(o=t*h)*c);var O=SuperMap.Plot.PlottingUtil.distance(g[p],g[p-1]),A=2*o;O<A&&(x=(o=O/2)*c),g.push(g[p].clone());var w,D;w=0,D=0;var E=0,I=[];for(E=2;E<=p;E++)w+=SuperMap.Plot.PlottingUtil.distance(g[E],g[E-1]);for(w-=o,E=2;E<=p-1;E++)D+=SuperMap.Plot.PlottingUtil.distance(g[E],g[E-1]),I[E]=x+(T-x)*Math.pow((w-D)/w,this.sv_AtScaleParameter);I[p]=x;var N,C=new SuperMap.Geometry.Point(0,0),R=new SuperMap.Geometry.Point(0,0),U=new SuperMap.Geometry.Point(0,0);for(E=2;E<=p-1;E++)SuperMap.Plot.PlottingUtil.getTrianglePoints(0,3,g[E-1],g[E],g[E+1],R,U),E==p-1&&SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,g[p],g[p-1],U,C),N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(I[E],R,g[E]),(_=SuperMap.Plot.PlottingUtil.pointIsRightToLine(U,R,N.pntRight))?(n[E]=new SuperMap.Geometry.Point(N.pntRight.x,N.pntRight.y),s[E]=new SuperMap.Geometry.Point(N.pntLeft.x,N.pntLeft.y)):(n[E]=new SuperMap.Geometry.Point(N.pntLeft.x,N.pntLeft.y),s[E]=new SuperMap.Geometry.Point(N.pntRight.x,N.pntRight.y));Math.sqrt(1*(g[p].x-C.x)*(g[p].x-C.x)+1*(g[p].y-C.y)*(g[p].y-C.y))>0&&(g[p]=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(o,g[p],C)),N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(x,g[p+1],g[p]),(_=SuperMap.Plot.PlottingUtil.pointIsRightToLine(g[p],g[p+1],N.pntLeft))?(s[p]=new SuperMap.Geometry.Point(N.pntLeft.x,N.pntLeft.y),n[p]=new SuperMap.Geometry.Point(N.pntRight.x,N.pntRight.y)):(s[p]=new SuperMap.Geometry.Point(N.pntRight.x,N.pntRight.y),n[p]=new SuperMap.Geometry.Point(N.pntLeft.x,N.pntLeft.y));var G;for(E=2;E<p;E++)SuperMap.Plot.PlottingUtil.getTrianglePoints(3,3,n[E-1],n[E],n[E+1],R,U),a[E]=new SuperMap.Geometry.Point(R.x,R.y),l[E]=new SuperMap.Geometry.Point(U.x,U.y),SuperMap.Plot.PlottingUtil.getTrianglePoints(3,3,s[E-1],s[E],s[E+1],R,U),r[E]=new SuperMap.Geometry.Point(R.x,R.y),u[E]=new SuperMap.Geometry.Point(U.x,U.y),2==E&&(SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,n[1],n[2],a[2],C),l[E]=new SuperMap.Geometry.Point(C.x,C.y),SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,s[1],s[2],r[2],C),u[E]=new SuperMap.Geometry.Point(C.x,C.y)),E==p-1&&(A=(O=SuperMap.Plot.PlottingUtil.distance(n[p],n[p-1]))/3,(G=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(A,g[p],g[p+1])).x+=n[p].x-g[p].x,G.y+=n[p].y-g[p].y,A=(O=T-x)*Math.pow(A/w,this.sv_AtScaleParameter),N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(A,n[p],G),a[p]=new SuperMap.Geometry.Point(N.pntLeft.x,N.pntLeft.y),A=(O=SuperMap.Plot.PlottingUtil.distance(s[p],s[p-1]))/3,(G=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(A,g[p],g[p+1])).x+=s[p].x-g[p].x,G.y+=s[p].y-g[p].y,A=(O=T-x)*Math.pow(A/w,this.sv_AtScaleParameter),N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(A,s[p],G),r[p]=new SuperMap.Geometry.Point(N.pntRight.x,N.pntRight.y));return{ArrowBodyCenterPts:SuperMap.Plot.PlottingUtil.clonePoints(g),LeftBodyPtsTemp:n,RightBodyPtsTemp:s,LeftBodyPtsLeftCtrlPts:a,LeftBodyPtsRightCtrlPts:l,RightBodyPtsLeftCtrlPts:r,RightBodyPtsRightCtrlPts:u,ArrowTouLen:o}}},{key:"calcScaleValueCount",value:function(t){return 4}},{key:"calcDefaultScaleValues",value:function(t){var e=[];return e.push(this.sv1_DefaultAtLenDivAbLen),e.push(this.sv2_DefaultAjWidthDivAtLen),e.push(this.sv3_DefaultAeWidthDivAtLen),e.push(this.sv4_DefaultAeLenDivAtLen),e}},{key:"genAtPts",value:function(t,e,i,o){var n=i[2],s=[],a=o*i[3],l=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(a,e[t],e[t+1]);a=o*n;var r=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(a,e[t+1],l);return s.push(new SuperMap.Geometry.Point(r.pntLeft.x,r.pntLeft.y)),s.push(e[t+1]),s.push(new SuperMap.Geometry.Point(r.pntRight.x,r.pntRight.y)),s}},{key:"calc3rdScalePt",value:function(t,e,i,o){i[2];var n=o*i[3];return SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(n,e[t],e[t+1])}}]),e}());e.default=u,SuperMap.Geometry.AlgoSymbol1004=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.avoidRegion=e.AvoidRegion=void 0;var o=i(19),n=i(8),s=e.AvoidRegion=L.Evented.extend({options:{},uuid:null,associatedUuid:null,libID:null,code:null,maxEditPts:0,minEditPts:0,symbolType:null,latLngs:[],style:{fill:!1,color:"#0000ff",lineSymbolID:2,opacity:1,weight:1},components:[],initialize:function(t,e,i,o){this.components=[],this.minEditPts=3,this.maxEditPts=9999,this.libID=0,this.code=SuperMap.Plot.SymbolType.AVOIDREGION,this.symbolType=SuperMap.Plot.SymbolType.AVOIDREGION,this.symbolName="避让区域",o.style&&(this.style=SuperMap.PlotUtil.cloneObject(o.style)),o&&o.symbolData&&this._parseSymbolData(o.symbolData),L.Util.isArray(i)||(i=[i]),i.length>0&&(this.latLngs=L.Util.isArray(i)?i:[i]),SuperMap.Util.extend(this,o),void 0!==this.uuid&&null!==this.uuid||(this.uuid=SuperMap.PlotUtil.generateUuid())},destroy:function(){this.libID=null,this.code=null,this.symbolType=null,this.symbolName=null,this.uuid=null,this.associatedUuid=null,this.minEditPts=null,this.maxEditPts=null,this.latLngs=null,this.components=[]},onAdd:function(t){this.layer=t,this._renderer=t._renderer,this._map=t._map,this.redraw(),o.PlottingObjectDrag&&(this.dragging||(this.dragging=new o.PlottingObjectDrag(this)))},_clearComponents:function(){for(var t=0;t<this.components.length;t++)this.components[t].removeEventParent(this),this.components[t].onRemove(),delete this.components[t];this.components=[]},_addComponents:function(t){t._map=this._map,t._renderer=this._renderer,t.addEventParent(this),t.onAdd(),this.components.push(t)},_project:function(){var t=this;t._pxBounds=L.bounds(L.point(0,0),L.point(0,0)),t.components.map(function(e){t._pxBounds.extend(e._pxBounds.min),t._pxBounds.extend(e._pxBounds.max)})},getBounds:function(){var t=this;return t._bounds=new L.LatLngBounds,t.components.map(function(e){t._bounds.extend(e.getBounds())}),t._bounds},setLatLngs:function(t){return this.latLngs=t,this.redraw()},getLatLngs:function(){return this.latLngs},addLatLng:function(t){if(this.latLngs[this.latLngs.length-1].lat!==t.lat||this.latLngs[this.latLngs.length-1].lng!==t.lng)return this.latLngs.push(t),this.redraw()},redraw:function(){if(this._clearComponents(),this.getLatLngs().length>=this.minEditPts){t=new L.Polygon(this.getLatLngs(),{smoothFactor:.05});this._addComponents(t),t.setStyle(this.style)}else if(this.getLatLngs().length>=2&&this.getLatLngs().length<this.minEditPts){var t=new L.Polyline(this.getLatLngs(),{smoothFactor:.05});this._addComponents(t),t.setStyle(this.style)}},_modifyPoint:function(t,e){this.redraw(),this._map.getFeatureByUuid(this.associatedUuid).redraw()},move:function(t,e){L.Util.moveLatLngs(this.getLatLngs(),t,e),this.redraw(),null!==this._map&&void 0!==this._map&&this._map.getFeatureByUuid(this.associatedUuid).redraw()},rotate:function(t,e){L.Util.rotateLatLngs(this.getLatLngs(),e,t),null!==this._map&&void 0!==this._map&&this._map.getFeatureByUuid(this.associatedUuid).redraw()},_reView:function(){},_parseSymbolData:function(t){if(null!==t&&(this.libID=t.libID,this.code=t.code,this.symbolType=t.symbolType,this.maxEditPts=t.algoMaxEditPts,this.minEditPts=t.algoMinEditPts,void 0!==t.uuid&&(this.uuid=t.uuid),void 0!==t.associatedUuid&&(this.associatedUuid=t.associatedUuid),this.latLngs=[],t.controlPoints))for(var e=0;e<t.controlPoints.length;e++)this.latLngs.push(L.latLng(t.controlPoints[e].y,t.controlPoints[e].x))},getSymbolData:function(){var t={};t.uuid=this.uuid,t.associatedUuid=this.associatedUuid,t.libID=this.libID,t.code=this.code,t.symbolType=this.symbolType,t.algoMaxEditPts=this.maxEditPts,t.algoMinEditPts=this.minEditPts,t.controlPoints=[];for(var e=0;e<this.latLngs.length;e++)t.controlPoints.push({x:this.getLatLngs()[e].lng,y:this.getLatLngs()[e].lat,z:0});return t},clone:function(){var t=SuperMap.PlotUtil.cloneObject(this.getSymbolData());return t.uuid=SuperMap.PlotUtil.generateUuid(),L.supermap.plotting.avoidRegion(0,SuperMap.Plot.SymbolType.AVOIDREGION,L.Util.cloneLatLngs(this.getLatLngs()),{symbolData:t,style:SuperMap.PlotUtil.cloneObject(this.style)})},_containsPoint:function(t){var e=L.Util.latLngsToSuperMapPoints(this.getLatLngs());e.push(e[0].clone());for(var i,o,n,s,a,l,r,u=SuperMap.Number.limitSigDigs,p=u(t.x,14),h=u(t.y,14),c=e.length-1,y=0,g=0;g<c;++g)if(i=e[g],n=u(i.x,14),s=u(i.y,14),o=e[g+1],a=u(o.x,14),l=u(o.y,14),s!==l){if((r=u(function(t,e,i,o,n){return(o-e)/(n-i)*(t-n)+o}(h,n,s,a,l),14))===p&&(s<l&&h>=s&&h<=l||s>l&&h<=s&&h>=l)){y=-1;break}r<=p||n!==a&&(r<Math.min(n,a)||r>Math.max(n,a))||(s<l&&h>=s&&h<l||s>l&&h<s&&h>=l)&&++y}else if(h===s&&(n<=a&&p>=n&&p<=a||n>=a&&p<=n&&p>=a)){y=-1;break}return-1===y?1:!!(1&y)},_relationToLayer:function(t){var e=2,i=[];if(t instanceof L.Polygon)(i=L.Util.latLngsToSuperMapPoints(t.getLatLngs()[0])).push(i[0].clone());else if(t instanceof L.Polyline)i=L.Util.latLngsToSuperMapPoints(t.getLatLngs());else if(t instanceof n.Text){var o=t.getBounds();i.push(new SuperMap.Geometry.Point(o.left,o.top)),i.push(new SuperMap.Geometry.Point(o.left,o.bottom)),i.push(new SuperMap.Geometry.Point(o.right,o.bottom)),i.push(new SuperMap.Geometry.Point(o.top,o.right))}if(0===i.length)e=2;else{var s=this._containsPoint(i[0]);s&&(e=1);for(l=1;l<i.length;l++)if(s!==this._containsPoint(i[l])){e=0;break}if(2===e){var a=L.Util.latLngsToSuperMapPoints(this.getLatLngs());a.push(a[0].clone());for(var l=0;l<i.length-1;l++){for(var r=0;r<a.length-1;r++)if(SuperMap.Plot.PlottingUtil.isCross(i[l],i[l+1],a[r],a[r+1])){e=0;break}if(0===e)break}}}return e},_getWithoutPts:function(t,e){var i=L.Util.latLngsToSuperMapPoints(t);!0===e&&i[0].x!==i[i.length-1].x&&i[0].y!==i[i.length-1].y&&i.push(i[0]);for(var o=[],n=[],s=0;s<i.length;s++)if(this._containsPoint(i[s])||n.push(i[s].clone()),s<=i.length-2)for(var a=this._intersectSegs(i[s],i[s+1]),l=0;l<a.length;l++)n.push(a[l].clone()),n.length>1&&(o.push(n),n=[]);0!==n.length&&o.push(n);var r=o.length;if(!0===e&&r>1&&SuperMap.Plot.PlottingUtil.equalFuzzy(o[0][0].x,o[r-1][o[r-1].length-1].x)&&SuperMap.Plot.PlottingUtil.equalFuzzy(o[0][0].y,o[r-1][o[r-1].length-1].y)){for(var u=0;u<o[0].length;u++)o[r-1].push(o[0][u]);o.splice(0,1)}return o},_intersectSegs:function(t,e){var i=L.Util.latLngsToSuperMapPoints(this.getLatLngs());i.push(i[0].clone()),i[0].x!==i[i.length-1].x&&i[0].y!==i[i.length-1].y&&i.push(i[0]);for(var o=[],n=0;n<i.length-1;n++){var s=new SuperMap.Geometry.Point;SuperMap.Plot.PlottingUtil.intersectLineSegs(t,e,i[n],i[n+1],s)&&o.push(s)}for(var a=[];o.length>0;)if(1===o.length)a.push(o[0]),o.splice(0,1);else{for(var l=0,r=SuperMap.Plot.PlottingUtil.distance(t,o[0]),u=1;u<o.length;u++)SuperMap.Plot.PlottingUtil.distance(t,o[u])<r&&(r=SuperMap.Plot.PlottingUtil.distance(t,o[u]),l=u);a.push(o[l]),o.splice(l,1)}return a}}),a=e.avoidRegion=function(t,e,i,o){return new s(t,e,i,o)};L.supermap.plotting.avoidRegion=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dotSymbol=e.DotSymbol=void 0;var o=i(2),n=i(36),s=i(8),a=e.DotSymbol=o.GraphicObject.extend({symbolSizeInLib:null,dRotate:0,initialScale:null,textDisplay:!0,symbolSize:null,positionOffset:!1,positionOffsetType:null,positionOffsetX:null,positionOffsetY:null,symbolRank:null,negativeImage:null,middleMarkBounds:null,maxScale:5,minScale:1,space:7,deployments:null,joinLines:null,initialize:function(t,e,i,n){if(this.symbolType=SuperMap.Plot.SymbolType.DOTSYMBOL,this.minEditPts=1,this.maxEditPts=1,this.joinLines=[],this.deployments=[],this.symbolSizeInLib=new SuperMap.Size(0,0),this.symbolSize=new SuperMap.Size(0,0),o.GraphicObject.prototype.initialize.call(this,t,e,i,n),null===this.positionOffsetType&&(this.positionOffsetType=SuperMap.Plot.PositionOffsetType.LINE),null===this.positionOffsetX&&(this.positionOffsetX=0),null===this.positionOffsetY&&(this.positionOffsetY=0),void 0===this.actualScale&&(this.actualScale=this.dScale),this.dScale>this.maxScale?this.dScale=this.maxScale:this.dScale<this.minScale&&(this.dScale=this.minScale),(null===this.symbolSize||0===this.symbolSize.w&&0===this.symbolSize.h)&&(this.symbolSize.w=this.symbolSizeInLib.w,this.symbolSize.h=this.symbolSizeInLib.h),null===this.initialScale){var s=this.symbolSizeInLib.w,a=this.symbolSize.w;this.symbolSizeInLib.w<this.symbolSizeInLib.h&&(s=this.symbolSizeInLib.h,a=this.symbolSize.h),this.initialScale=a/s,isNaN(this.initialScale)||this.initialScale===1/0||(this.symbolSize.w=this.initialScale*this.dScale*this.symbolSizeInLib.w,this.symbolSize.h=this.initialScale*this.dScale*this.symbolSizeInLib.h,void 0===this.fontSize&&(void 0===this.style.fontSize&&(this.style.fontSize=12),this.fontSize=this.style.fontSize/this.initialScale))}},destroy:function(){if(this.symbolRank=null,this.negativeImage=null,this.annotationIndex=-1,this.textPosition=null,this.symbolSizeInLib=null,this.symbolSize=null,this.middleMarkBounds=null,this.positionOffsetX=null,this.positionOffsetY=null,null!==this.joinLines&&void 0!==this.joinLines)for(var t=0;t<this.joinLines.length;t++)null!==this.joinLines[t]&&(this.joinLines[t].startAssociatedUuid===this.uuid&&(this.joinLines[t].startAssociatedUuid=null),this.joinLines[t].endAssociatedUuid===this.uuid&&(this.joinLines[t].endAssociatedUuid=null));this.joinLines=[],this.deployments=[],o.GraphicObject.prototype.destroy.call(this)},_reView:function(){if(void 0!==this.prevStrokeWidth&&this.prevStrokeWidth!==this.style.weight&&(this.strokeWidth=this.style.weight,this.prevStrokeWidth=this.style.weight),void 0!==this.prevFontSize&&this.prevFontSize!==this.style.fontSize&&(this.fontSize=this.style.fontSize/this.dScale/this.initialScale,this.prevFontSize=this.style.fontSize),void 0!==this.prevSpace&&this.prevSpace*this.dScale!==this.space&&(this.prevSpace=this.space/this.dScale),this.fromZoom!==this._map.getZoom()){if(this.scaleByMap&&!1!==this.scaleByMap)if(void 0===this.actualScale&&(this.actualScale=this.dScale),void 0===this.prevScale&&(this.prevScale=this.dScale),this.actualScale*=this._map.getZoomScale(this._map.getZoom(),this.fromZoom),this.actualScale>this.maxScale?this.dScale=this.maxScale:this.actualScale<this.minScale?this.dScale=this.minScale:this.dScale=this.actualScale,this.dScale!==this.prevScale){var t=this.initialScale*this.dScale;this.symbolSize.w=t*this.symbolSizeInLib.w,this.symbolSize.h=t*this.symbolSizeInLib.h,void 0===this.prevSpace&&(this.prevSpace=this.space),void 0===this.strokeWidth&&(this.strokeWidth=this.style.weight);var e=this.strokeWidth/.5*5;if(this.symbolSize.w<e&&this.symbolSize.h<e){this.scaleStrokeWidth=!0;var i=this.symbolSize.w>this.symbolSize.h?this.symbolSize.w:this.symbolSize.h;this.style.weight=Math.round(i/10),this.style.weight>=this.weight&&(this.style.weight=this.weight),this.style.weight<=.5&&(this.style.weight=.5)}else!0===this.scaleStrokeWidth&&(this.scaleStrokeWidth=!1),this.style.weight=this.strokeWidth;if(this.prevStrokeWidth=this.style.weight,this.style.fontSize=this.style.fontSize*this._map.getZoomScale(this._map.getZoom(),this.fromZoom),this.prevFontSize=this.style.fontSize,0!==this.textContent.length&&8===this.annotationPosition){var o=this.middleMarkBounds.scale(this.dScale*this.initialScale,this.anchorPoint),n=96*o.getWidth()/25.4/10,a=96*o.getHeight()/25.4/10;this.components[this._annotationId].options.graphicWidth=n,this.components[this._annotationId].options.graphicHeight=a}for(var l in this.components)l===this._annotationId&&this.components[l]instanceof s.Text?this.components[l].options.fontSize=this.style.fontSize:l!==this._annotationId&&this.components[l]instanceof s.Text?this.components[l].options.fontSize=t*(this.components[l].options.fontSize/this.prevScale/this.initialScale):l!==this._annotationId&&!0!==this.components[l].isLeadLine&&(this.components[l].options.weight=this.style.weight);for(var r=0;r<this.geoSymbolTexts.length;r++){var u=this.geoSymbolTexts[r];null!==u&&u._calculateParts()}var p=this.dScale/this.prevScale,h=this._map.getZoomScale(this._map.getZoom(),this.fromZoom);p!==h&&this._resizeCells(p*(1/h),this.getLatLngs()[0]),this._renderer instanceof L.Canvas&&p===h&&!0===this.positionOffset&&(this._clearComponents(),this._calculateParts()),this.prevScale=this.dScale}else{y=this._map.getZoomScale(this.fromZoom,this._map.getZoom());this._resizeCells(y,this.getLatLngs()[0])}else{for(var c=0;c<this.geoSymbolTexts.length;c++)this.geoSymbolTexts[c].fromZoom=this._map.getZoom();var y=this._map.getZoomScale(this.fromZoom,this._map.getZoom()),g=this.getLatLngs()[0];this._resizeCells(y,g)}this.fromZoom=this._map.getZoom(),this._updateSymbolTexts(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues),this.isSelected&&this._map.getPlotEditControl()&&this._map.getPlotEditControl().fire(SuperMap.Plot.Event.featuresmodified,{features:[this]})}},setLatLngs:function(t){for(o=0;o<this.deployments.length;o++){var e=this.deployments[o];null!==e&&(e.symbolType!==SuperMap.Plot.SymbolType.NAVYDEPLOYMENT&&e.symbolType!==SuperMap.Plot.SymbolType.AIRDEPLOYMENT||(e.style.display=this.style.display,e.redraw()))}for(o=0;o<this.joinLines.length;o++){var i=this.joinLines[o];null!==i&&(i.style.display=this.style.display,i.redraw())}for(var o=0;o<this.geoSymbolTexts.length;o++){var n=this.geoSymbolTexts[o];null!==n&&(n.style.display=this.style.display,n.redraw())}return this.latLngs=t,this.redraw()},getSpace:function(){return this.space},setSpace:function(t){this.space!==t&&(this.space=t,0!==this.textContent.length&&this._handleAnnotation())},setRotate:function(t){if(!isNaN(t)){var e=t-this.dRotate;this.dRotate=t;for(var i=0,o=this.avoidRegions.length;i<o;i++)L.Util.rotateLatLngs(this.avoidRegions[i].getLatLngs(),this.getLatLngs()[0],e);this.redraw(),this._updateSymbolTexts(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)}},getScale:function(){return this.initialScale},setScale:function(t){isNaN(t)||(this.initialScale=t,this.symbolSize.w=this.initialScale*this.dScale*this.symbolSizeInLib.w,this.symbolSize.h=this.initialScale*this.dScale*this.symbolSizeInLib.h,this.style.fontSize=this.fontSize*this.dScale*this.initialScale,this.prevFontSize=this.style.fontSize,this.redraw(),this._updateSymbolTexts())},setPositionOffset:function(t){this.positionOffset!==t&&(this.positionOffset=t,!1===this.positionOffset&&(this.positionOffsetX=0,this.positionOffsetY=0),this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues))},getPositionOffset:function(){return this.positionOffset},setPositionOffsetType:function(t){this.positionOffsetType!==t&&(this.positionOffsetType=t,this.positionOffset&&(this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)))},getPositionOffsetType:function(){return this.positionOffsetType},setTextContent:function(t){this.textContent=t,this._handleAnnotation()},setTextPosition:function(t){8===t&&!1===this.symbolData.middleMarkExist||this.annotationPosition!==t&&(this.annotationPosition=t,this._handleAnnotation())},getSymbolSize:function(){return this.symbolSize},setSymbolSize:function(t,e){if(0===this.symbolSizeInLib.w||0===this.symbolSizeInLib.h)this.initialScale=1;else{var i=t/this.dScale/this.symbolSizeInLib.w,o=e/this.dScale/this.symbolSizeInLib.h;this.initialScale!==i?this.initialScale=i:this.initialScale!==o&&(this.initialScale=o)}null===this.symbolSize&&(this.symbolSize=new SuperMap.Size(0,0)),this.symbolSize.w=this.initialScale*this.dScale*this.symbolSizeInLib.w,this.symbolSize.h=this.initialScale*this.dScale*this.symbolSizeInLib.h,void 0===this.fontSize?this.fontSize=this.style.fontSize/this.dScale/this.initialScale:this.style.fontSize=this.fontSize*this.dScale*this.initialScale,this.prevFontSize=this.style.fontSize,this._map&&(this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues))},setSurroundLineType:function(t){if(this.surroundLineType!==t){var e=new SuperMap.GetSymbolInfoParameters;e.libID=this.libID,e.code=this.code,e.negativeImage=this.negativeImage,e.symbolRank=this.symbolRank,e.surroundLineType=t,L.supermap.symbolInfoService(this.serverUrl).getSymbolInfo(e,function(t){this.symbolData.innerCells=t.result.innerCells,this.surroundLineType=t.result.surroundLineType,this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues),this._map&&this._map.getPlotEditControl()&&this._map.getPlotEditControl().fire(SuperMap.Plot.Event.featuresmodified,{features:[this]})},this)}},getSymbolRank:function(){return this.symbolRank},setSymbolRank:function(t){if(this.symbolRank!==t){var e=new SuperMap.GetSymbolInfoParameters;e.libID=this.libID,e.code=this.code,e.symbolRank=t,e.negativeImage=this.negativeImage,e.surroundLineType=this.surroundLineType,L.supermap.symbolInfoService(this.serverUrl).getSymbolInfo(e,function(t){this.symbolData.innerCells=t.result.innerCells,this.symbolRank=t.result.symbolRank,this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues),this._map&&this._map.getPlotEditControl()&&this._map.getPlotEditControl().fire(SuperMap.Plot.Event.featuresmodified,{features:[this]})},this)}},getNegativeImage:function(){return this.negativeImage},setNegativeImage:function(t){if(this.negativeImage!==t){var e=new SuperMap.GetSymbolInfoParameters;e.libID=this.libID,e.code=this.code,e.negativeImage=t,e.symbolRank=this.symbolRank,e.surroundLineType=this.surroundLineType,L.supermap.symbolInfoService(this.serverUrl).getSymbolInfo(e,function(t){this.symbolData.innerCells=t.result.innerCells,this.negativeImage=t.result.negativeImage,this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues),this._map&&this._map.getPlotEditControl()&&this._map.getPlotEditControl().fire(SuperMap.Plot.Event.featuresmodified,{features:[this]})},this)}},move:function(t,e){if(this.hasOwnProperty("_eventParents")&&null!==this._eventParents)for(var i=0,s=Object.values(this._eventParents).length;i<s;i++){var a=Object.values(this._eventParents)[i];if(a.symbolType===SuperMap.Plot.SymbolType.FLAGGROUP&&!1===a.isSelected)return void this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)}if(this.positionOffset){var l=this._map.latLngToLayerPoint(L.latLng(this.getLatLngs()[0].lat+t,this.getLatLngs()[0].lng+e)),r=this._map.latLngToLayerPoint(this.getLatLngs()[0]);this.positionOffsetX+=(l.x-r.x)/this.dScale,this.positionOffsetY+=(l.y-r.y)/this.dScale,this.redraw()}else o.GraphicObject.prototype._move.call(this,t,e);if(null!==this.joinLines&&0<this.joinLines.length)for(i=0;i<this.joinLines.length;i++){var u=this.joinLines[i];null!==u&&(u instanceof n.LineRelation&&u.redraw())}if(null!==this.deployments&&0<this.deployments.length)for(i=0;i<this.deployments.length;i++){var p=this.deployments[i];if(null!==p&&(p.symbolType===SuperMap.Plot.SymbolType.NAVYDEPLOYMENT||p.symbolType===SuperMap.Plot.SymbolType.AIRDEPLOYMENT))for(var h in p.components)p.components[h].symbolType===SuperMap.Plot.SymbolType.ANNOFRAMESYMBOL&&(p.components[h].latLngs[2]=this.latLngs[0],p.components[h].redraw())}for(var c=0,s=this.avoidRegions.length;c<s;c++)L.Util.moveLatLngs(this.avoidRegions[c].getLatLngs(),t,e);this._updateSymbolTexts()},getBounds:function(){var t=new L.LatLngBounds;for(var e in this.components){var i=this.components[e];i.isLeadLine||i.isAnnotation||t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t},getBoundsWithText:function(){var t=new L.LatLngBounds;for(var e in this.components){var i=this.components[e];i.isLeadLine||t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t},_setSymbolData:function(t){if(o.GraphicObject.prototype._setSymbolData.call(this,t),this.symbolData){this.symbolData.hasOwnProperty("type")||(this.symbolData.type="GRAPHICOBJECT"),this.symbolData.symbolRank=this.symbolRank,this.symbolData.negativeImage=this.negativeImage,this.symbolData.space=this.space,this.symbolData.flagTextSize=this.flagTextSize,this.symbolData.maxScale=this.maxScale,this.symbolData.minScale=this.minScale,this.symbolData.textDisplay=this.textDisplay,this.symbolData.initialScale=this.initialScale,this.symbolData.actualScale=this.actualScale,void 0!==this.fontSize&&(this.symbolData.fontSize=this.fontSize),void 0!==this.strokeWidth&&(this.symbolData.strokeWidth=this.strokeWidth);var e=25.4*this.symbolSize.w*10/96,i=25.4*this.symbolSize.h*10/96;this.symbolData.symbolSize={x:e,y:i};var n=25.4*this.symbolSizeInLib.w*10/96,s=25.4*this.symbolSizeInLib.h*10/96;this.symbolData.symbolSizeInLib={x:n,y:s},this.symbolData.positionOffset=this.positionOffset,this.symbolData.positionOffsetType=this.positionOffsetType,this.symbolData.positionOffsetX=this.positionOffsetX,this.symbolData.positionOffsetY=this.positionOffsetY}},_parseBasicData:function(){if(this.symbolName=this.symbolData.symbolName,void 0!==this.symbolData.symbolSizeInLib?(this.symbolSizeInLib.w=Math.round(96*this.symbolData.symbolSizeInLib.x/25.4/10),this.symbolSizeInLib.h=Math.round(96*this.symbolData.symbolSizeInLib.y/25.4/10)):void 0!==this.symbolData.symbolSize&&(this.symbolSizeInLib.w=Math.round(96*this.symbolData.symbolSize.x/25.4/10),this.symbolSizeInLib.h=Math.round(96*this.symbolData.symbolSize.y/25.4/10)),null===this.initialScale||isNaN(this.initialScale)||this.initialScale===1/0){var t=L.supermap.plotting.getControl(this.map,this.serverUrl).getDefaultStyle();if(t&&!0===t.defaultFlag&&this.symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL&&-1!==t.dotSymbolSize){var e=this.symbolSizeInLib.w;if(this.symbolSizeInLib.h>this.symbolSizeInLib.w&&(e=this.symbolSizeInLib.h),0===e||0===t.dotSymbolSize)this.symbolSize.w=this.symbolSizeInLib.w,this.symbolSize.h=this.symbolSizeInLib.h;else if(0!==this.symbolSize.w||0===this.symbolData.symbolSize.x||0!==this.symbolSize.h||0===this.symbolData.symbolSize.y||this.minEditPts)if(0!==this.symbolSize.w||0!==this.symbolSize.h);else{var i=t.dotSymbolSize/e;this.symbolSize.w=i*this.symbolSizeInLib.w,this.symbolSize.h=i*this.symbolSizeInLib.h}else{this.symbolSize.w=96*this.symbolData.symbolSize.x/25.4/10,this.symbolSize.h=96*this.symbolData.symbolSize.y/25.4/10;var o=this.symbolSize.w/this.dScale/this.symbolSizeInLib.w,n=this.symbolSize.h/this.dScale/this.symbolSizeInLib.h;this.initialScale!==o?this.initialScale=o:this.initialScale!==n&&(this.initialScale=n),this.symbolSize.w=this.initialScale*this.dScale*this.symbolSizeInLib.w,this.symbolSize.h=this.initialScale*this.dScale*this.symbolSizeInLib.h}}var s=this.symbolSizeInLib.w,a=this.symbolSize.w;this.symbolSizeInLib.w<this.symbolSizeInLib.h&&(s=this.symbolSizeInLib.h,a=this.symbolSize.h),this.initialScale=a/s,this.symbolSize.w=this.initialScale*this.dScale*this.symbolSizeInLib.w,this.symbolSize.h=this.initialScale*this.dScale*this.symbolSizeInLib.h,(void 0===this.fontSize||isNaN(this.fontSize))&&(void 0===this.style.fontSize&&(this.style.fontSize=12),this.fontSize=this.style.fontSize/this.initialScale)}this.anchorPoint=new SuperMap.Geometry.Point(this.symbolData.anchorPoint.x,this.symbolData.anchorPoint.y),this.middleMarkBounds=new SuperMap.Bounds(this.symbolData.middleMarkBounds.leftBottom.x,this.symbolData.middleMarkBounds.leftBottom.y,this.symbolData.middleMarkBounds.rightTop.x,this.symbolData.middleMarkBounds.rightTop.y),this.symbolRank=this.symbolData.symbolRank,this.negativeImage=this.symbolData.negativeImage},_parseSymbolData:function(){if(o.GraphicObject.prototype._parseSymbolData.call(this),null!==this.symbolData){if(void 0!==this.symbolData.symbolSizeInLib?(this.symbolSizeInLib.w=Math.round(96*this.symbolData.symbolSizeInLib.x/25.4/10),this.symbolSizeInLib.h=Math.round(96*this.symbolData.symbolSizeInLib.y/25.4/10)):this.symbolData.innerCells&&(this.symbolSizeInLib.w=Math.round(96*this.symbolData.symbolSize.x/25.4/10),this.symbolSizeInLib.h=Math.round(96*this.symbolData.symbolSize.y/25.4/10)),this.symbolRank=this.symbolData.symbolRank,this.negativeImage=this.symbolData.negativeImage,void 0!==this.symbolData.anchorPoint&&(this.anchorPoint=new SuperMap.Geometry.Point(this.symbolData.anchorPoint.x,this.symbolData.anchorPoint.y)),void 0!==this.symbolData.middleMarkBounds&&null!==this.symbolData.middleMarkBounds&&(this.middleMarkBounds=new SuperMap.Bounds(this.symbolData.middleMarkBounds.leftBottom.x,this.symbolData.middleMarkBounds.leftBottom.y,this.symbolData.middleMarkBounds.rightTop.x,this.symbolData.middleMarkBounds.rightTop.y)),void 0!==this.symbolData.actualScale&&null!==this.symbolData.actualScale&&(this.actualScale=this.symbolData.actualScale),void 0!==this.symbolData.fontSize&&null!==this.symbolData.fontSize&&(this.fontSize=this.symbolData.fontSize),void 0!==this.symbolData.strokeWidth&&void 0!==this.symbolData.strokeWidth&&(this.strokeWidth=this.symbolData.strokeWidth),void 0!==this.symbolData.space&&null!==this.symbolData.space&&(this.space=this.symbolData.space),void 0!==this.symbolData.flagTextSize&&null!==this.symbolData.flagTextSize&&(this.flagTextSize=this.symbolData.flagTextSize),void 0!==this.symbolData.maxScale&&null!==this.symbolData.maxScale&&(this.maxScale=this.symbolData.maxScale),void 0!==this.symbolData.minScale&&null!==this.symbolData.minScale&&(this.minScale=this.symbolData.minScale),void 0!==this.symbolData.textDisplay&&null!==this.symbolData.textDisplay&&(this.textDisplay=this.symbolData.textDisplay),void 0!==this.symbolData.initialScale&&null!==this.symbolData.initialScale){this.initialScale=this.symbolData.initialScale;var t=this.initialScale*this.symbolSizeInLib.w*this.dScale,e=this.initialScale*this.symbolSizeInLib.h*this.dScale;this.symbolSize=new SuperMap.Size(t,e),this.symbolSize.w=t,this.symbolSize.h=e}else if(!1!==this.isEdit){var i=96*this.symbolData.symbolSize.x/25.4/10,n=96*this.symbolData.symbolSize.y/25.4/10;this.setSymbolSize(i,n)}void 0!==this.symbolData.positionOffset&&null!==this.symbolData.positionOffset&&(this.positionOffset=this.symbolData.positionOffset),void 0!==this.symbolData.positionOffsetType&&null!==this.symbolData.positionOffsetType&&(this.positionOffsetType=this.symbolData.positionOffsetType),void 0!==this.symbolData.positionOffsetX&&null!==this.symbolData.positionOffsetX&&(this.positionOffsetX=this.symbolData.positionOffsetX),void 0!==this.symbolData.positionOffsetY&&null!==this.symbolData.positionOffsetY&&(this.positionOffsetY=this.symbolData.positionOffsetY)}},_calculateParts:function(){if(!(this.getLatLngs().length<this.minEditPts)&&"none"!==this.style.display){var t=SuperMap.Plot.AnalysisSymbol.analysisSymbolCells(this.symbolData),e=this._map.latLngToLayerPoint(this.getLatLngs()[0]);!0===this.positionOffset&&(e.x+=this.positionOffsetX*this.dScale,e.y+=this.positionOffsetY*this.dScale);for(var i=this.initialScale*this.dScale,o=0,n=t.length;o<n;o++){var s=t[o];s.type===SuperMap.Plot.SymbolType.TEXTSYMBOL&&(s.style.fontSize=i*(s.style.fontSize/2),s.style.labelRotation+=-this.dRotate);for(var a=0,l=s.positionPoints.length;a<l;a++){s.positionPoints[a].x-=this.symbolData.anchorPoint.x,s.positionPoints[a].y-=this.symbolData.anchorPoint.y,s.positionPoints[a].x=s.positionPoints[a].x*i,s.positionPoints[a].y=s.positionPoints[a].y*i;var r=this.dRotate*(Math.PI/180);SuperMap.Plot.PlottingUtil.rotateAngle({x:0,y:0},r,s.positionPoints[a]),s.positionPoints[a]=this._transitionPoint(s.positionPoints[a],e)}s.positionPoints=L.Util.latLngsToSuperMapPoints(s.positionPoints)}this._transSymbolCellsToLayers(t),this._generateLeadLine(),this._annotationId=-1,this.isNotRedrawText||void 0!==this.isNotRedrawText||this._handleAnnotation(),this._updateSymbolTexts(),this._bounds=this.getBounds()}},_generateLeadLine:function(){if(this.positionOffset)if(this.positionOffsetType===SuperMap.Plot.PositionOffsetType.LINE){var t=this._map.latLngToLayerPoint(this.getLatLngs()[0]),e=L.point(t.x+this.positionOffsetX*this.dScale,t.y+this.positionOffsetY*this.dScale),i=this._map.layerPointToLatLng(e),o=[this.getLatLngs()[0].clone(),i];this._createAndDrawLayer(24,o,{surroundLineFlag:!1,lineTypeLimit:!0}).isLeadLine=!0}else{var n,s,t=this._map.latLngToLayerPoint(this.getLatLngs()[0]),e=L.point(t.x+this.positionOffsetX*this.dScale,t.y+this.positionOffsetY*this.dScale),i=this._map.layerPointToLatLng(e),a=new SuperMap.Geometry.Point(this.getLatLngs()[0].lng,this.getLatLngs()[0].lat),l=new SuperMap.Geometry.Point(i.lng,i.lat),r=180*SuperMap.Plot.PlottingUtil.radian(a,l)/Math.PI;if(r>45&&r<135||r>225&&r<315){var u=L.point(e.x-this.style.weight/2,e.y),p=L.point(e.x+this.style.weight/2,e.y);n=this._map.layerPointToLatLng(u),s=this._map.layerPointToLatLng(p)}else{var u=L.point(e.x,e.y-this.style.weight/2),p=L.point(e.x,e.y+this.style.weight/2);n=this._map.layerPointToLatLng(u),s=this._map.layerPointToLatLng(p)}o=[this.getLatLngs()[0],n,s];this._createAndDrawLayer(32,o,{surroundLineFlag:!1,lineWidthLimit:!0,weight:0,fillLimit:!0,fill:!0}).isLeadLine=!0}},_handleAnnotation:function(){-1!==this._annotationId&&(this.components[this._annotationId].removeEventParent(this),this.components[this._annotationId].onRemove(),delete this.components[this._annotationId],this.components.splice(this._annotationId,1),this._annotationId=-1),this.textContent=SuperMap.PlotUtil.trim(this.textContent);var t=this.getBounds();if(this.textContent&&null!==this.textContent&&0!==this.textContent.length&&null!==t&&t.isValid()){var e=SuperMap.PlotUtil.cloneObject(this.style),i=this.space*this.dScale,o=null;if(0===this.annotationPosition){e.labelAlign="rb";n=L.latLng(t.getNorth(),t.getWest());(s=this._map.latLngToLayerPoint(n)).x-=i,o=this._map.layerPointToLatLng(s)}else if(1===this.annotationPosition){e.labelAlign="rt";n=L.latLng(t.getSouth(),t.getWest());(s=this._map.latLngToLayerPoint(n)).x-=i,o=this._map.layerPointToLatLng(s)}else if(2===this.annotationPosition){e.labelAlign="lb";n=L.latLng(t.getNorth(),t.getEast());(s=this._map.latLngToLayerPoint(n)).x+=i,o=this._map.layerPointToLatLng(s)}else if(3===this.annotationPosition){e.labelAlign="lt";n=L.latLng(t.getSouth(),t.getEast());(s=this._map.latLngToLayerPoint(n)).x+=i,o=this._map.layerPointToLatLng(s)}else if(4===this.annotationPosition){e.labelAlign="cb";n=L.latLng(t.getNorth(),(t.getWest()+t.getEast())/2);(s=this._map.latLngToLayerPoint(n)).y-=i,o=this._map.layerPointToLatLng(s)}else if(5===this.annotationPosition){e.labelAlign="ct";n=L.latLng(t.getSouth(),(t.getWest()+t.getEast())/2);(s=this._map.latLngToLayerPoint(n)).y+=i,o=this._map.layerPointToLatLng(s)}else if(6===this.annotationPosition){e.labelAlign="rm";n=L.latLng((t.getSouth()+t.getNorth())/2,t.getWest());(s=this._map.latLngToLayerPoint(n)).x-=i,o=this._map.layerPointToLatLng(s)}else if(7===this.annotationPosition){e.labelAlign="lm";var n=L.latLng((t.getSouth()+t.getNorth())/2,t.getEast()),s=this._map.latLngToLayerPoint(n);s.x+=i,o=this._map.layerPointToLatLng(s)}else if(8===this.annotationPosition&&this.symbolData.middleMarkExist){var a=this.middleMarkBounds.scale(this.dScale*this.initialScale,this.anchorPoint),l=new SuperMap.Geometry.Point((a.left+a.right)/2,(a.top+a.bottom)/2);if(this.negativeImage){var r=SuperMap.Plot.PlottingUtil.projectPoint(l,new SuperMap.Geometry.Point(this.anchorPoint.x,100),new SuperMap.Geometry.Point(this.anchorPoint.x,this.anchorPoint.y));SuperMap.Plot.PlottingUtil.rotateAngle(r,Math.PI,l)}l.x-=this.anchorPoint.x,l.y-=this.anchorPoint.y;var u=this.dRotate*(Math.PI/180);SuperMap.Plot.PlottingUtil.rotateAngle(new SuperMap.Geometry.Point(0,0),u,l);var p=this._map.latLngToLayerPoint(this.getLatLngs()[0]);!0===this.positionOffset&&(p.x+=this.positionOffsetX*this.dScale,p.y+=this.positionOffsetY*this.dScale);var h=96*a.getWidth()/25.4/10,c=96*a.getHeight()/25.4/10;e.graphicWidth=h,e.graphicHeight=c,o=this._transitionPoint(l,p),this.positionOffset}if(8===this.annotationPosition&&this.symbolData.middleMarkExist){e.rotation=-this.dRotate,e.labelAlign="cm",e.graphicOpacity=1,e.fontColor=this.style.fontColor,e.fontFamily=this.style.fontFamily,e.fontWeight=this.style.fontWeight,e.fontStyle=this.style.fontStyle,e.externalGraphic=this._getTextGraphic(this.textContent,e);var y={externalGraphic:e.externalGraphic,graphicWidth:e.graphicWidth,graphicHeight:e.graphicHeight,rotation:-this.dRotate},g=L.supermap.plotting.pointImage([o],y);this._annotationId=this.components.length,this._addComponents(g)}else 8!==this.annotationPosition&&(void 0!==this.prevFontSize&&this.prevFontSize!==this.style.fontSize&&(this.fontSize=this.style.fontSize/this.dScale/this.initialScale,this.prevFontSize=this.style.fontSize),void 0!==this.fontSize?(this.style.fontSize=this.fontSize*this.dScale*this.initialScale,this.prevFontSize=this.style.fontSize):(this.fontSize=this.style.fontSize/this.dScale/this.initialScale,this.prevFontSize=this.style.fontSize),e.fontSize=this.style.fontSize,e.fontSizeLimit=!1,e.labelRotation=0,this._annotationId=this.components.length,(g=this._createAndDrawLayer(34,[o],e,this.textContent)).isAnnotation=!0)}},_getTextGraphic:function(t,e){var i=SuperMap.PlotUtil.cloneObject(e);i.fontPercent=100,i.fontSpace=0,void 0!==this.flagTextSize?i.fontSize=this.flagTextSize:i.fontSize=60,i.labelAlign="cm";var o=document.createElement("canvas"),n=SuperMap.PlotUtil.getTextWidth(i,t);o.width=n+20,o.height=parseFloat(i.fontSize)+10,document.body.appendChild(o);var s=o.getContext("2d");s.fillStyle=i.fontColor,s.globalAlpha=i.fontOpacity||1;var a=[i.fontStyle?i.fontStyle:"normal","normal",i.fontWeight?i.fontWeight:"normal",i.fontSize?new String(i.fontSize)+"px":"1em",i.fontFamily?i.fontFamily:"sans-serif"].join(" ");if(s.fillText)s.font=a,s.textAlign="center",s.textBaseline="middle",s.fillText(t,o.width/2,o.height/2);else if(s.mozDrawText){s.mozTextStyle=a;var l=-.5;L.PlotCanvas.LABEL_FACTOR[e.labelAlign[0]],null==l&&(l=-.5);var r=-.5;L.PlotCanvas.LABEL_FACTOR[e.labelAlign[1]],null==r&&(r=-.5);var u=[0,0],p=s.mozMeasureText("xx");u[1]+=p*(1+r*numRows);var h=u[0]+l*s.mozMeasureText(t),c=u[1]+p;s.translate(h,c),s.mozDrawText(t),s.translate(-h,-c)}var y=o.toDataURL("image/png","image/octet-stream");return document.body.removeChild(o),y},_transitionPoint:function(t,e){var i=e.x+t.x*(96/254),o=e.y-t.y*(96/254);return this._map.layerPointToLatLng(L.point(i,o))},_resizeCells:function(t,e){for(var i in this.components)L.Util.resizeLatLngs(this.components[i].getLatLngs(),e,t),this.components[i].setLatLngs(this.components[i].getLatLngs()),this._renderer instanceof L.Canvas&&(!0!==this.components[i].options.fill||"LINEAR"!==this.style.fillGradientMode&&"RADIAL"!==this.style.fillGradientMode||this._computeGradientInCanvas(this.components[i],this.components[i].options,this.style))},_rotate:function(t,e){o.GraphicObject.prototype._rotate.call(this,t,e),this.dRotate+=t},_resize:function(t,e){o.GraphicObject.prototype._resize.call(this,t,e),this.initialScale*=t,this.symbolSize.w=this.initialScale*this.dScale*this.symbolSizeInLib.w,this.symbolSize.h=this.initialScale*this.dScale*this.symbolSizeInLib.h,this.style.fontSize=this.fontSize*this.dScale*this.initialScale,this.prevFontSize=this.style.fontSize}}),l=e.dotSymbol=function(t,e,i,o){return new a(t,e,i,o)};L.supermap.plotting.dotSymbol=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.flagGroup=e.FlagGroup=void 0;var o=i(7),n=e.FlagGroup=o.GroupObject.extend({ratio:null,scalePoints:null,scaleValues:null,initialize:function(t,e,i,n){o.GroupObject.prototype.initialize.call(this,t,e,i,n),this.libID=0,this.code=SuperMap.Plot.SymbolType.FLAGGROUP,this.symbolType=SuperMap.Plot.SymbolType.FLAGGROUP,this.symbolName="多旗",n.subObjects&&(this.subObjects=n.subObjects),null===this.ratio&&(this.ratio=.8)},destroy:function(){o.GroupObject.prototype.destroy.call(this),this.ratio=[]},setRotate:function(t){isNaN(t)||(this.dRotate+=t,this.redraw())},redraw:function(){if("none"!==this.style.display){if(L.Util.isArray(this.ratio)||(this.ratio=[this.ratio]),0===this.components.length&&0!==this.subObjects.length)for(var t=0,e=this.subObjects.length;t<e;t++)this.layer&&this.layer.removeFeatures(this.subObjects[t]),this.subObjects[t].enableEdit=!0,this.subObjects[t].ownerGroup=this,this._addComponents(this.subObjects[t]);if(0!==this.components.length){this.scalePoints=[],this.components[0].setRotate(this.dRotate);var i=L.latLng(this.components[0].getLatLngs()[0].lat,this.components[0].getLatLngs()[0].lng),o=this._map.latLngToLayerPoint(i);!0===this.components[0].positionOffset&&(o.x+=this.components[0].positionOffsetX,o.y+=this.components[0].positionOffsetY),i=this._map.layerPointToLatLng(o),this.anchorPoint=i.clone();var n=new L.latLng(i);n.tag=0,this.scalePoints.push(n);for(var s=1,e=this.components.length;s<e;s++){for(;this.ratio.length<s;)this.ratio.push(this.ratio[this.ratio.length-1]);var a=this.ratio[s-1],l=this.components[s-1],r=this._calculateFlagTop(l),u=L.Util.cloneLatLngs(l.getLatLngs())[0],p=this._map.latLngToLayerPoint(u);!0===l.positionOffset&&(p.x+=l.positionOffsetX,p.y+=l.positionOffsetY),u=this._map.layerPointToLatLng(p),r=this._pointRotate(this.dRotate,u,r);var h=this._findPointOnLineByRatio(a,u,r);this.components[s].dRotate=this.dRotate,this.components[s].setLatLngs([h]);var c=new L.latLng(h);c.tag=s,this.scalePoints.push(c)}}}else this._clearComponents()},_pointRotate:function(t,e,i){t*=Math.PI/180;var o=Math.sqrt(Math.pow(e.lng-i.lng,2)+Math.pow(e.lat-i.lat,2)),n=t+Math.atan2(i.lat-e.lat,i.lng-e.lng);return i.lng=e.lng+o*Math.cos(n),i.lat=e.lat+o*Math.sin(n),i},_findPointOnLineByRatio:function(t,e,i){var o=new L.latLng(0,0);return o.lng=e.lng+(i.lng-e.lng)*t,o.lat=e.lat+(i.lat-e.lat)*t,o},_calculateFlagTop:function(t){var e=t.dRotate;t.dRotate=0,0===t.dRotate&&(t.isNotRedrawText=!0,t.redraw(),delete t.isNotRedrawText);var i=t.getBounds();return t.dRotate=e,t.redraw(),t.initialScale>=0?t.negativeImage?new L.latLng(i.getNorth(),i.getEast()):new L.latLng(i.getNorth(),i.getWest()):t.negativeImage?new L.latLng(i.getSouth(),i.getWest()):new L.latLng(i.getSouth(),i.getEast())},_projectPoint:function(t,e,i){if(e===i)return e;var o=new L.latLng(0,0),n=i.lng-e.lng,s=e.lat-i.lat,a=n*n,l=s*s,r=n*s,u=n*n+s*s;return o.lng=(r*(e.lat-t.lat)+e.lng*l+t.lng*a)/u,o.lat=(r*(e.lng-t.lng)+e.lat*a+t.lat*l)/u,o},_modifyPoint:function(t,e){if(0===t)this.subObjects[0].setLatLngs([e]);else{var i=this.subObjects[t-1].latLngs[0],o=this._calculateFlagTop(this.subObjects[t-1]);o=this._pointRotate(this.dRotate,this.subObjects[0].latLngs[0],o);var n=Math.sqrt(Math.pow(i.lng-o.lng,2)+Math.pow(i.lat-o.lat,2)),s=this._projectPoint(e,i,o),a=Math.sqrt(Math.pow(i.lng-s.lng,2)+Math.pow(i.lat-s.lat,2));this.ratio[t-1]=a/n}this.redraw()},_reView:function(){for(var t in this.components)this.components[t].scaleByMap=this.scaleByMap,this.components[t]._reView();this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)},_parseSymbolData:function(){o.GroupObject.prototype._parseSymbolData.call(this),this.symbolData&&(this.ratio=this.symbolData.ratio)},_setSymbolData:function(){o.GroupObject.prototype._setSymbolData.call(this),this.symbolData&&(this.symbolData.ratio=this.ratio)}}),s=e.flagGroup=function(t,e,i,o){return new n(t,e,i,o)};L.supermap.plotting.flagGroup=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LiterateSign=void 0;var o=i(2);e.LiterateSign=o.GraphicObject.extend({route:null,towardNode:null,startRouteNode:null,textAnchor:null,space:null,inner:null,setPosition:function(t){this.textPosition=t,this._calculateOffset()},initialize:function(t,e,i,n){this.symbolName="标牌文字",this.symbolType=SuperMap.Plot.SymbolType.LITERATESIGN,o.GraphicObject.prototype.initialize.call(this,t,e,i,n)},destroy:function(){this.space=null,this.inner=null,this.textAnchor=null,o.GraphicObject.prototype.destroy.call(this)},_calculateParts:function(){if(null!==this.startRouteNode&&null!==this.towardNode&&null!==this.towardNode.textContent&&0!==this.towardNode.textContent.length){for(var t=this.route._getNodeByUuid(this.towardNode.routeNodeId),e=new SuperMap.Geometry.Point(this.startRouteNode.x,this.startRouteNode.y),i=new SuperMap.Geometry.Point(t.x,t.y),o=L.latLng((e.y+i.y)/2,(e.x+i.x)/2),n=SuperMap.PlotUtil.getTextCount(this.towardNode.textContent[0]),s=1;s<this.towardNode.textContent.length;s++){var a=SuperMap.PlotUtil.getTextCount(this.towardNode.textContent[s]);n<a&&(n=a)}if(null===this.towardNode.offsetX||null===this.towardNode.offsetY){var l=this.space+(this.dScale*this.style.fontSize+1)*n/2,r=this._innerOutlineDir(),u=this._map.layerPointToLatLng(L.point(0,0)),p=this._map.layerPointToLatLng(L.point(l,0)),h=new SuperMap.Geometry.Point(u.lng,u.lat),c=new SuperMap.Geometry.Point(p.lng,p.lat),y=r*SuperMap.Plot.PlottingUtil.distance(h,c);!0===this.inner&&(y=-y);var g=SuperMap.Plot.PlottingUtil.parallel([e,i],y);this.latLngs=[];var d=L.latLng((g[0].y+g[1].y)/2,(g[0].x+g[1].x)/2);this.latLngs.push(d);var f=this._map.latLngToLayerPoint(o),S=this._map.latLngToLayerPoint(d);this.towardNode.offsetX=S.x-f.x,this.towardNode.offsetY=S.y-f.y}else{var P=this._map.latLngToLayerPoint(o),m=L.point(P.x+this.towardNode.offsetX,P.y+this.towardNode.offsetY),b=this._map.layerPointToLatLng(m);0===this.latLngs.length?this.latLngs.push(b):this.latLngs[0]=b}for(var M=180*SuperMap.Plot.PlottingUtil.radian(e,i)/Math.PI,v=this._getTextContentsCells(n),s=0;s<v.length;s++){var _=v[s];_.positionPoints=SuperMap.Plot.Primitives.getSpatialData(_.type,_.positionPoints,_.angle);for(var T=[],x=0;x<_.positionPoints.length;x++)T.push(SuperMap.Plot.PlottingUtil.coordinateTrans(new SuperMap.Geometry.Point(this.latLngs[0].lng,this.latLngs[0].lat),_.positionPoints[x],M));var O=L.Util.superMapPointsToLatLngs(T);_.type===SuperMap.Plot.SymbolType.TEXTSYMBOL?0!==_.textContent.length&&(_.style.labelRotation=90-M,this._createAndDrawLayer(SuperMap.Plot.SymbolType.TEXTSYMBOL,O,_.style,_.textContent)):this._createAndDrawLayer(_.type,O,_.style,_.textContent)}}},_innerOutlineDir:function(){for(var t=[],e=0;e<this.route.routeNodes.length;e++)t.push(new SuperMap.Geometry.Point(this.route.routeNodes[e].x,this.route.routeNodes[e].y));return SuperMap.Plot.PlottingUtil.innerOutlineDir(t)},move:function(t,e){for(var i in this.components)L.Util.moveLatLngs(this.components[i].getLatLngs(),t,e),this.components[i].setLatLngs(this.components[i].getLatLngs());L.Util.moveLatLngs(this.getLatLngs(),t,e),this._calculateOffset()},_reView:function(){this.scaleByMap&&!1!==this.scaleByMap?(this.dScale*=this._map.getZoomScale(this._map.getZoom(),this.fromZoom),this.dScale>5?this.dScale=5:this.dScale<1&&(this.dScale=1),this.redraw()):this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues),this.fromZoom=this._map.getZoom()},_calculateOffset:function(){var t=this.route._getNodeByUuid(this.towardNode.routeNodeId),e=L.latLng((this.startRouteNode.y+t.y)/2,(this.startRouteNode.x+t.x)/2),i=this._map.latLngToLayerPoint(e),o=this._map.latLngToLayerPoint(this.latLngs[0]);this.towardNode.offsetX=o.x-i.x,this.towardNode.offsetY=o.y-i.y},_getTextContentsCells:function(t){var e=this.towardNode.textContent,i=(this.route._getNodeByUuid(this.towardNode.routeNodeId),this.dScale*this.style.fontSize+1),o=this._map.layerPointToLatLng(L.point(0,0)),n=this._map.layerPointToLatLng(L.point(i,0)),s=SuperMap.Plot.PlottingUtil.distance({x:o.lng,y:o.lat},{x:n.lng,y:n.lat}),a=s,l=s*t,r=e.length+2,u=[],p=r*a*.5,h=new Object;h.type=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,h.positionPoints=[],h.positionPoints.push(new SuperMap.Geometry.Point(p,0)),h.positionPoints.push(new SuperMap.Geometry.Point(-2*a+p,.5*l)),h.positionPoints.push(new SuperMap.Geometry.Point(-r*a+p,.5*l)),h.positionPoints.push(new SuperMap.Geometry.Point(-r*a+p,-.5*l)),h.positionPoints.push(new SuperMap.Geometry.Point(-2*a+p,-.5*l)),h.style={surroundLineFlag:!1,fontSize:12},u.push(h);for(var c=1;c<=e.length;c++){var y=new Object;y.type=SuperMap.Plot.SymbolType.POLYLINESYMBOL,y.positionPoints=[],y.positionPoints.push(new SuperMap.Geometry.Point(-(c+1)*a+p,.5*l)),y.positionPoints.push(new SuperMap.Geometry.Point(-(c+1)*a+p,-.5*l)),y.style={surroundLineFlag:!1,fontSize:12},u.push(y);var g=new Object;g.type=SuperMap.Plot.SymbolType.TEXTSYMBOL,g.positionPoints=[],g.positionPoints.push(new SuperMap.Geometry.Point(-(.5+c+1)*a+p,0)),g.textContent=e[c-1],g.style={surroundLineFlag:!1,fontSize:12,fontFamily:"Microsoft YaHei"},g.style.labelAlign="cm",u.push(g)}var d=new SuperMap.Geometry.Point(-1.4*a+p,0),f=new Object;f.type=SuperMap.Plot.SymbolType.TEXTSYMBOL,f.positionPoints=[],f.positionPoints.push(d),f.textContent=this.towardNode.index.toString(),f.style={surroundLineFlag:!1,fontSize:12,fontSizeLimit:!0,fontFamily:"Microsoft YaHei"},f.style.labelAlign="cm",u.push(f);var S=new Object;return S.type=SuperMap.Plot.SymbolType.CIRCLESYMBOL,S.positionPoints=[],S.positionPoints.push(d),S.positionPoints.push(new SuperMap.Geometry.Point(d.x,.4*a)),S.style={surroundLineFlag:!1,fontSize:12},u.push(S),u}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RouteNode=void 0;var o=i(2),n=i(17);e.RouteNode=o.GraphicObject.extend({route:null,routeNode:null,_isFirstNode:function(){for(var t=0;t<this.route.routeNodes.length;t++)for(var e=0;e<this.route.routeNodes[t].towardNodes.length;e++)if(this.route.routeNodes[t].towardNodes[e].routeNodeId===this.routeNode.id)return!1;return!0},_isLastNode:function(){return 0===this.routeNode.towardNodes.length},setType:function(t){this.routeNode.type=t,this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)},setName:function(t){this.routeNode.name=t,this.redraw()},setPosition:function(t,e){this.routeNode.y=this.latLngs[0].lat=t,this.routeNode.x=this.latLngs[0].lng=e;for(l=0;l<this.route.routeNodes.length;l++)this.route.routeNodes[l].routeNodeId===this.routeNode.id&&(this.route.routeNodes[l].x=this.routeNode.x,this.route.routeNodes[l].y=this.routeNode.y);if(0!==this.route.arrRoutePts.length){if(this.route.arrRoutePts=[],this.route.redraw(),this.route.highlightFlag){var i=SuperMap.Util.cloneObject(this.route.highlightStyle);this.route.highlightStyle&&SuperMap.Util.copyAttributes(i,this.route.highlightStyle),this.route.highlight(i)}}else{for(var o=this.route._getFeatureStartWith(this.routeNode),s=0;s<o.length;s++)o[s]instanceof n.LiterateSign||(o[s].latLngs[0]=L.latLng(t,e)),o[s].redraw();for(var a=this.route._getFeatureEndWith(this.routeNode),l=0;l<a.length;l++)a[l]instanceof n.LiterateSign||(a[l].latLngs[1]=L.latLng(t,e)),a[l].redraw();this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)}},setRotate:function(t){this.routeNode.type===SuperMap.Plot.RouteNodeType.STANDBY&&this.routeNode.rotate!==t&&(this.routeNode.rotate=t,this.redraw())},getRotate:function(){return this.routeNode.rotate},initialize:function(t,e,i,n){o.GraphicObject.prototype.initialize.call(this,t,e,i,n),this.symbolName=SuperMap.Plot.RouteNodePrimitives.getRouteNodeNameByType(this.routeNode.type),this.symbolType=SuperMap.Plot.SymbolType.ROUTENODE,this.anchorPoint=L.latLng(0,0)},destroy:function(){this.route=null,this.routeNode=null,o.GraphicObject.prototype.destroy.call(this)},_calculateParts:function(){if(0===this.getLatLngs().length?this.latLngs=[L.latLng(this.routeNode.y,this.routeNode.x)]:(this.latLngs[0].lat=this.routeNode.y,this.latLngs[0].lng=this.routeNode.x),this.latLngs.length>=this.minEditPts){if(this.routeNode.type===SuperMap.Plot.RouteNodeType.STANDBY){var t=SuperMap.Plot.RouteNodePrimitives.getRouteNodeCells(this.routeNode.type,!1,this.routeNode.rotate);this._transformSymbolCellsToGeometrys(t);var e=SuperMap.Plot.RouteNodePrimitives.getRouteNodeCells(this.routeNode.type,!0);this._transformSymbolCellsToGeometrys(e)}else{var i=SuperMap.Plot.RouteNodePrimitives.getRouteNodeCells(this.routeNode.type);this._transformSymbolCellsToGeometrys(i)}if(null!==this.routeNode.name&&""!==this.routeNode.name){var o=this.getBounds(),n=L.latLng(o.getNorth(),o.getEast()),s=this.routeNode.style;s.labelAlign="lb",this._createAndDrawLayer(SuperMap.Plot.SymbolType.TEXTSYMBOL,[n],s,this.routeNode.name).isNameLayer=!0}}},_transformSymbolCellsToGeometrys:function(t){for(var e=this._map.latLngToLayerPoint(this.latLngs[0]),i=0;i<t.length;i++){var o=t[i];o.type===SuperMap.Plot.SymbolType.TEXTSYMBOL&&(o.style.fontSize=this.dScale*o.style.fontSize,o.style.labelRotation+=-this.dRotate);for(var n=0;n<o.positionPoints.length;n++){o.positionPoints[n].x=o.positionPoints[n].x*this.dScale,o.positionPoints[n].y=o.positionPoints[n].y*this.dScale;var s=this.dRotate*(Math.PI/180);SuperMap.Plot.PlottingUtil.rotateAngle({x:this.anchorPoint.lng,y:this.anchorPoint.lat},s,o.positionPoints[n]),o.positionPoints[n]=this._transitionPoint(o.positionPoints[n],e)}o.positionPoints=L.Util.latLngsToSuperMapPoints(o.positionPoints)}this._transSymbolCellsToLayers(t)},_transitionPoint:function(t,e){var i=e.x+t.x*(96/254),o=e.y-t.y*(96/254);return this._map.layerPointToLatLng(L.point(i,o))},move:function(t,e){this.routeNode.x+=e,this.routeNode.y+=t,this.setPosition(this.routeNode.y,this.routeNode.x)},getBounds:function(){var t=new L.LatLngBounds;for(var e in this.components){var i=this.components[e];i.isNameLayer||t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t},_reView:function(){this.fromZoom!==this._map.getZoom()&&(this.scaleByMap&&!1!==this.scaleByMap?(this.dScale*=this._map.getZoomScale(this._map.getZoom(),this.fromZoom),this.dScale>5?this.dScale=5:this.dScale<1&&(this.dScale=1),this.redraw()):this.redraw(),this.fromZoom=this._map.getZoom(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues))}})},function(t,e,i){"use strict";function o(t,e){var i=t.x-e.x,o=t.y-e.y;return Math.sqrt(i*i+o*o)}Object.defineProperty(e,"__esModule",{value:!0});var n={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},s={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},a=e.PlottingObjectDrag=L.Handler.extend({statics:{DRAGGING_CLS:"leaflet-plottingObject-draggable"},initialize:function(t){this._plottingObject=t,this._startPoint=null,this._dragStartPoint=null,this._mapDraggingWasEnabled=!1},addHooks:function(){this._plottingObject.on("mousedown",this._onDragStart,this),this._plottingObject.options.className=this._plottingObject.options.className?this._plottingObject.options.className+" "+a.DRAGGING_CLS:a.DRAGGING_CLS,this._plottingObject._plottingObject&&L.DomUtil.addClass(this._plottingObject._plottingObject,a.DRAGGING_CLS)},removeHooks:function(){this._plottingObject.off("mousedown",this._onDragStart,this),this._plottingObject.options.className=this._plottingObject.options.className.replace(new RegExp("\\s+"+a.DRAGGING_CLS),""),this._plottingObject._plottingObject&&L.DomUtil.removeClass(this._plottingObject._plottingObject,a.DRAGGING_CLS)},moved:function(){return this._plottingObject._dragMoved},_onDragStart:function(t){var e=t.originalEvent._simulated?"touchstart":t.originalEvent.type;this._mapDraggingWasEnabled=!1,this._startPoint=t.latlng.clone(),this._dragStartPoint=t.latlng.clone(),L.DomEvent.stop(t.originalEvent),L.DomUtil.addClass(this._plottingObject._map._container,"leaflet-dragging"),L.DomEvent.on(document,s[e],this._onDrag,this).on(document,n[e],this._onDragEnd,this),this._plottingObject._map.dragging.enabled()&&(this._plottingObject._map.dragging.disable(),this._mapDraggingWasEnabled=!0),this._plottingObject._dragMoved=!1},_onDrag:function(t){L.DomEvent.stop(t);var e=t.touches&&t.touches.length>=1?t.touches[0]:t,i=this._plottingObject._map.mouseEventToLatLng(e);if("touchmove"===t.type&&!this._plottingObject._dragMoved){var o=this._plottingObject._map.latLngToLayerPoint(this._dragStartPoint),n=this._plottingObject._map.mouseEventToContainerPoint(e);if(o.distanceTo(n)<=this._plottingObject._map.options.tapTolerance)return}var s=i.lat,a=i.lng,l=s-this._startPoint.lat,r=a-this._startPoint.lng;(l||r)&&(this._plottingObject._dragMoved||(this._plottingObject._dragMoved=!0,this._plottingObject.fire("dragstart",t)),this._startPoint.lat=s,this._startPoint.lng=a,this._plottingObject.fire("predrag",t),t.dLat=l,t.dLng=r,this._plottingObject.fire("drag",t))},_onDragEnd:function(t){var e=this._plottingObject._map.mouseEventToLatLng(t),i=this.moved();if(i&&L.DomEvent.stop(t),L.DomEvent.off(document,"mousemove touchmove",this._onDrag,this),L.DomEvent.off(document,"mouseup touchend",this._onDragEnd,this),i){this._plottingObject.fire("dragend",{distance:o(this._dragStartPoint,e)});var n=this._plottingObject._containsPoint;this._plottingObject._containsPoint=L.Util.falseFn,L.Util.requestAnimFrame(function(){L.DomEvent.skipped({type:"click"}),this._plottingObject._containsPoint=n},this)}this._startPoint=null,this._dragStartPoint=null,this._plottingObject._dragMoved=!1,this._mapDraggingWasEnabled&&(i&&L.DomEvent.fakeStop({type:"click"}),this._plottingObject._map.dragging.enable()),i&&(this._plottingObject.moveend=!0)}})},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},r=function(t){function e(t,i){o(this,e);var s=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));s.CLASS_NAME="SuperMap.GetLibIDsService",(i=i||{})&&SuperMap.Util.extend(s,i);var a,l=s;return a=l.url.substr(l.url.length-1,1),l.url+="/"==a?"symbolLibs.json?":"/symbolLibs.json?",s}return s(e,SuperMap.PlotCommonServiceBase),a(e,[{key:"destroy",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(){var t=this;t.request({method:"GET",data:null,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}]),e}();e.default=r,SuperMap.GetLibIDsService=r},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},r=function(t){function e(t,i){o(this,e);var s=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));s.CLASS_NAME="SuperMap.GetLibInfoService",(i=i||{})&&SuperMap.Util.extend(s,i);var a,l=s;return a=l.url.substr(l.url.length-1,1),l.url+="/"==a?"symbolLibs/":"/symbolLibs/",s}return s(e,SuperMap.PlotCommonServiceBase),a(e,[{key:"destroy",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){var e=this;t&&null!==t.libID&&(e.libID=t.libID),e.url+=e.libID,e.url+=".json",e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}]),e}();e.default=r,SuperMap.GetLibInfoService=r},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},r=function(t){function e(t,i){o(this,e);var s=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));s.CLASS_NAME="SuperMap.GetSymbolInfoService",(i=i||{})&&SuperMap.Util.extend(s,i);var a,l=s;return a=l.url.substr(l.url.length-1,1),l.url+="/"==a?"graphicObject.json?":"/graphicObject.json?",s}return s(e,SuperMap.PlotCommonServiceBase),a(e,[{key:"destroy",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t){var e=this,i=null;i=SuperMap.GetSymbolInfoParameters.toUrlParameters(t),e.url+=i,"MSIE"===SuperMap.Browser.name.toUpperCase()&&(e.url=encodeURI(e.url)),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}]),e}();e.default=r,SuperMap.GetSymbolInfoService=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.PlotUtil=SuperMap.PlotUtil=SuperMap.PlotUtil||{};SuperMap.PlotUtil.generateUuid=function(){for(var t=[],e=0;e<36;e++)t[e]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]="0123456789abcdef".substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")},SuperMap.PlotUtil.cloneObject=function(t){return JSON.parse(JSON.stringify(t))},SuperMap.PlotUtil.colorRGBA=function(t,e){var i=t.substring(1,3),o=parseInt(i,16),n=t.substring(3,5),s=parseInt(n,16),a=t.substring(5);return"rgba("+o+","+s+","+parseInt(a,16)+","+e+")"},SuperMap.PlotUtil.colorRGBToString=function(t){var e=t.red.toString(16);e.length<2&&(e="0"+e);var i=t.green.toString(16);i.length<2&&(i="0"+i);var o=t.blue.toString(16);return o.length<2&&(o="0"+o),"#"+e+i+o},SuperMap.PlotUtil.colorStringToRGB=function(t){var e={},i=t.substring(1,3);e.red=parseInt(i,16);var o=t.substring(3,5);e.green=parseInt(o,16);var n=t.substring(5);return e.blue=parseInt(n,16),e},SuperMap.PlotUtil.decimalToHex=function(t){for(var e=t.toString(16);e.length<8;)e="0"+e;var i=e.substring(0,2),o=e.substring(2,4),n=e.substring(4,6);return{color:"#"+e.substring(6)+n+o,alpha:parseInt(i,16)/255}},SuperMap.PlotUtil.hexToDecimal=function(t,e){var i=t.substring(1,3),o=t.substring(3,5),n=t.substring(5)+o+i,s=parseInt(n,16),a=Math.round(255*e).toString(16);return parseInt(a+"000000",16)+s},SuperMap.PlotUtil.getAlign=function(t){return"TOPLEFT"===t?"lt":"TOPCENTER"===t?"ct":"TOPRIGHT"===t?"rt":"BOTTOMLEFT"===t?"lb":"BOTTOMCENTER"===t?"cb":"BOTTOMRIGHT"===t?"rb":"MIDDLELEFT"===t?"lm":"MIDDLECENTER"===t?"cm":"MIDDLERIGHT"===t?"rm":"lt"},SuperMap.PlotUtil.trim=function(t){return null===t?"":t.replace(/(^\s*)|(\s*$)/g,"")},SuperMap.PlotUtil.getTextWidth=function(t,e){" "===e&&(e="_");var i=document.createElement("span");document.body.appendChild(i),i.style.width="auto",i.style.height="auto",t.fontSize&&(i.style.fontSize=new String(t.fontSize)+"px"),t.fontFamily&&(i.style.fontFamily=t.fontFamily),t.fontWeight&&(i.style.fontWeight=t.fontWeight),i.style.position="absolute",i.style.visibility="hidden",i.style.display="inline-block",i.innerHTML=e;var o=i.clientWidth,n=e.length;return void 0===t.fontSpace&&void 0===t.fontPercent||(0!==t.fontSpace&&100!==t.fontPercent&&void 0!==t.fontSpace||void 0!==t.fontPercent?o=t.fontPercent/100*o+t.fontSpace*(t.fontPercent/100)*(n-1):0===t.fontSpace&&100!==t.fontPercent&&void 0!==t.fontPercent?o=t.fontPercent/100*o:0!==t.fontSpace&&100===t.fontPercent&&void 0!==t.fontSpace&&(o+=t.fontSpace*(n-1))),document.body.removeChild(i),o},SuperMap.PlotUtil.getTextCount=function(t){for(var e=0,i=0,o=0;o<t.length;o++)t.charCodeAt(o)>255?e++:i++;return e+i/2},SuperMap.PlotUtil.toJSON=function(t){var e=t;if(null==e)return null;switch(e.constructor){case String:return e='"'+e.replace(/(["\\])/g,"\\$1")+'"',e=e.replace(/\n/g,"\\n"),e=e.replace(/\r/g,"\\r"),e=e.replace("<","&lt;"),e=e.replace(">","&gt;"),e=e.replace(/%/g,"%2525"),e=e.replace(/&/g,"%26");case Array:for(var i=[],n=0,s=e.length;n<s;n++)i.push(this.toJSON(e[n]));return"["+i.join(",")+"]";case Number:return isFinite(e)?String(e):null;case Boolean:return String(e);case Date:return"{'__type':\"System.DateTime\",'Year':"+e.getFullYear()+",'Month':"+(e.getMonth()+1)+",'Day':"+e.getDate()+",'Hour':"+e.getHours()+",'Minute':"+e.getMinutes()+",'Second':"+e.getSeconds()+",'Millisecond':"+e.getMilliseconds()+",'TimezoneOffset':"+e.getTimezoneOffset()+"}";default:if(null!=e.toJSON&&"function"==typeof e.toJSON)return e.toJSON();if("object"===(void 0===e?"undefined":o(e))){if(e.length){for(var i=[],n=0,s=e.length;n<s;n++)i.push(this.toJSON(e[n]));return"["+i.join(",")+"]"}i=[];for(var a in e)"function"!=typeof e[a]&&"CLASS_NAME"!==a&&"parent"!==a&&i.push('"'+a+'":'+this.toJSON(e[a]));return i.length>0?"{"+i.join(",")+"}":"{}"}return e.toString()}},SuperMap.PlotUtil.copyFeature=function(t){var e=null;if(null!==t&&t.geometry){var i=t.geometry.clone();e=new SuperMap.Feature.Vector(i),t.style&&(e.style=SuperMap.Util.copyAttributes(e.style,t.style)),i.feature=e,i.calculateParts()}return e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawGraphicObject=void 0;var o=i(5),n=i(2),s=i(10);e.DrawGraphicObject=L.Handler.extend({symbolData:null,plotting:null,_isDrawing:!1,libID:0,code:24,serverUrl:"",isFreeCure:!1,_drawingLayer:null,_tempDrawingLayer:null,_control:null,options:{tolerancePixel:6,allowIntersection:!0,repeatMode:!0,icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3},initialize:function(t,e,i){this._map=t,this._drawingLayer=e,this._tempDrawingLayer=new s.PlottingLayerBase("drawControl-temportary"),this._container=t._container,this._overlayPane=t._panes.overlayPane,L.setOptions(this,i)},addHooks:function(){this._map&&(this._isDrawing=!1,this._markers=[],this._latlngs=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._map.addLayer(this._tempDrawingLayer),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this),this._map.getPlotEditControl()&&this._map.getPlotEditControl()._avoidEditing&&this._map.getPlotEditControl().avoidEdit(!1))},removeHooks:function(){this._isDrawing=!1,this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,delete this._latlngs,delete this.isFreeCure,this.plotting&&(this._tempDrawingLayer.removeFeatures(this.plotting),delete this.plotting,this.plotting=null),this._map.removeLayer(this._tempDrawingLayer),this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseup",this._onMouseUp,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){this._latlngs.pop();var t=this._markers.pop(),e=this.plotting.getLatLngs(),i=e.splice(-1,1)[0];this.plotting.setLatLngs(e),this._markerGroup.removeLayer(t),this.plotting.getLatLngs().length<2&&this._tempDrawingLayer.removeFeatures(this.plotting),this._vertexChanged(i,!1)}},addVertex:function(t){if(this._markers.push(this._createMarker(t)),this._latlngs.push(t),0===this.libID&&1023===this.code&&!0===this.isFreeCure)this.plotting.addLatLng(t);else if(SuperMap.AlgoSymbolFactory.isAccessServer(this.plotting.libID,this.plotting.code)&&this._latlngs.length>=this.plotting.minEditPts){var e=new SuperMap.GetSymbolInfoParameters({libID:this.libID,code:this.code});e.inputPoints=L.Util.latLngsToSuperMapPoints(this._latlngs),L.supermap.symbolInfoService(this._drawingLayer.serverUrl).getSymbolInfo(e,function(t){this.plotting.symbolData=t.result,this.plotting.setLatLngs(this._latlngs)},this)}else if(this.plotting instanceof o.Route){var i=this._map.layerPointToLatLng(L.point(0,0)),n=this._map.layerPointToLatLng(L.point(this.options.tolerancePixel,0)),s=SuperMap.Plot.PlottingUtil.distance({x:i.lng,y:i.lat},{x:n.lng,y:n.lat});this.plotting._addRouteNodeByPos(t,s)}else this.plotting.setLatLngs(this._latlngs);this._vertexChanged(t,!0)},_finishShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this),0===this.libID&&this.code===SuperMap.Plot.SymbolType.FREECURVE&&!0===this.isFreeCure&&(this.plotting.latLngs=L.Util.superMapPointsToLatLngs(this.plotting.superMapAlgoSymbol.controlPoints),this.isFreeCure=!1),-1===this.plotting.libID&&(this.plotting.libID=this.libID,this.plotting.code=this.code);var t=this.plotting.clone();this._markerGroup.clearLayers(),this._markers=[],this._latlngs=[],this._tempDrawingLayer.removeFeatures(this.plotting),delete this.plotting,this._drawingLayer.addFeatures(t),this._drawingLayer._renderer instanceof L.SVG&&(t.isFirstAdd=!0),this._control.fire(SuperMap.Plot.Event.featureadded,{feature:t}),this._isDrawing=!1,this.options.repeatMode||this.disable()},_onZoomEnd:function(){this._markers},_onMouseMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent),i=this._map.layerPointToLatLng(e);if(this._currentLatLng=i,!this.plotting||!0!==this._isDrawing||this.plotting instanceof o.Route){if(!1===this._isDrawing)if(this._isDrawing=!0,SuperMap.AlgoSymbolFactory.isAccessServer(this.libID,this.code))if(this.symbolData=this._drawingLayer._getSymbolDataFromCache(this.libID,this.code),null===this.symbolData){var n=new SuperMap.GetSymbolInfoParameters({libID:this.libID,code:this.code});L.supermap.symbolInfoService(this._drawingLayer.serverUrl).getSymbolInfo(n,function(t){this.libID!==t.result.libID||this.code!==t.result.code?this.symbolData=null:this.symbolData=t.result,this.plotting=L.supermap.plotting.PlottingObject.createSymbol(this.libID,this.code,[],{symbolData:this.symbolData,serverUrl:this._drawingLayer.serverUrl,map:this._map}),this._control.fire(SuperMap.Plot.Event.beforefeatureadded,{feature:this.plotting}),this._tempDrawingLayer.addFeatures(this.plotting),this.plotting.isEdit=!1},this)}else this.plotting=L.supermap.plotting.PlottingObject.createSymbol(this.libID,this.code,[],{symbolData:this.symbolData,serverUrl:this._drawingLayer.serverUrl,map:this._map}),this._control.fire(SuperMap.Plot.Event.beforefeatureadded,{feature:this.plotting}),this._tempDrawingLayer.addFeatures(this.plotting),this.plotting.isEdit=!1;else if(this.plotting=L.supermap.plotting.PlottingObject.createSymbol(this.libID,this.code,[],{serverUrl:this._drawingLayer.serverUrl,spatialAnalystUrl:this._drawingLayer.spatialAnalystUrl,map:this._map}),this.plotting.subSymbols&&0!==this.plotting.subSymbols.length){for(var s=[],a=0,l=this.plotting.subSymbols.length;a<l;a++)null===this.plotting.subSymbols[a].symbolData&&(this.plotting.subSymbols[a].symbolData=this._drawingLayer._getSymbolDataFromCache(this.plotting.subSymbols[a].libID,this.plotting.subSymbols[a].code),null===this.plotting.subSymbols[a].symbolData&&-1===SuperMap.Util.indexOf(s,this.plotting.subSymbols[a])&&s.push(this.plotting.subSymbols[a]));for(var r=s.slice(),u=0;u<s.length;u++){var p=new SuperMap.GetSymbolInfoParameters({libID:s[u].libID,code:s[u].code});L.supermap.symbolInfoService(this.serverUrl).getSymbolInfo(p,function(t){this._drawingLayer._cacheSymbolData(t.result);for(var e=0,i=this.plotting.subSymbols.length;e<i;e++)if(null===this.plotting.subSymbols[e].symbolData&&this.plotting.subSymbols[e].libID===t.result.libID&&this.plotting.subSymbols[e].code===t.result.code){var o=SuperMap.Util.indexOf(r,this.plotting.subSymbols[e]);-1!==o&&r.splice(o,1),this.plotting.subSymbols[e].symbolData=SuperMap.PlotUtil.cloneObject(t.result)}0===r.length&&(this._control.fire(SuperMap.Plot.Event.beforefeatureadded,{feature:this.plotting}),this._tempDrawingLayer.addFeatures(this.plotting),this.plotting.isEdit=!1)},this)}0===s.length&&(this._control.fire(SuperMap.Plot.Event.beforefeatureadded,{feature:this.plotting}),this._tempDrawingLayer.addFeatures(this.plotting),this.plotting.isEdit=!1)}else this._control.fire(SuperMap.Plot.Event.beforefeatureadded,{feature:this.plotting}),this._tempDrawingLayer.addFeatures(this.plotting),this.plotting.isEdit=!1}else{var h=L.Util.cloneLatLngs(this._latlngs);0===h.length?h.push(i):h[h.length-1].lat===i.lat&&h[h.length-1].lng===i.lng||h.push(i),0===this.libID&&this.code===SuperMap.Plot.SymbolType.FREECURVE&&!0===this.isFreeCure?this.plotting.addLatLng(i):this.plotting.symbolType!==SuperMap.Plot.SymbolType.DOTSYMBOL&&SuperMap.AlgoSymbolFactory.isAccessServer(this.plotting.libID,this.plotting.code)&&h.length>=this.plotting.minEditPts?((n=new SuperMap.GetSymbolInfoParameters({libID:this.libID,code:this.code})).inputPoints=L.Util.latLngsToSuperMapPoints(h),L.supermap.symbolInfoService(this._drawingLayer.serverUrl).getSymbolInfo(n,function(t){this.plotting.symbolData=t.result,this.plotting.setLatLngs(h)},this)):this.plotting.symbolType===SuperMap.Plot.SymbolType.ARCREGION?(this.plotting.latLngs=h,this.plotting._generateArcRegionFromServer()):this.plotting.setLatLngs(h)}this._mouseMarker.setLatLng(i),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(){var t=this._markers.length;t>1&&this._markers[t-1].on("click",this._finishShape,this),t>2&&this._markers[t-2].off("click",this._finishShape,this)},_onMouseDown:function(t){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers&&this._drawingLayer&&this._drawingLayer.isEditable&&this._drawingLayer._map){this._onMouseMove(t),this._clickHandled=!0,this._disableNewMarkers();var e=t.originalEvent,i=e.clientX,o=e.clientY;this._startPoint.call(this,i,o)}},_startPoint:function(t,e){0===this.libID&&this.code===SuperMap.Plot.SymbolType.FREECURVE&&(this.isFreeCure=!0),this._mouseDownOrigin=L.point(t,e)},_onMouseUp:function(t){if(!t||2!==t.button){!L.Browser.ie||null!==this._mouseDownOrigin&&void 0!==this._mouseDownOrigin||this._onMouseDown.call(this,t);var e=t.originalEvent,i=e.clientX,o=e.clientY;this._endPoint.call(this,i,o,t),this._clickHandled=null,L.DomEvent.stopPropagation(t)}},_endPoint:function(t,e,i){if(this._mouseDownOrigin){var o=L.point(t,e).distanceTo(this._mouseDownOrigin),s=this._calculateFinishDistance(i.latlng);this.plotting instanceof n.GraphicObject&&(this.plotting.getLatLngs().length>=this.plotting.maxEditPts||s<10&&L.Browser.touch)?this._finishShape():Math.abs(o)<9*(window.devicePixelRatio||1)&&this.addVertex(i.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(t){var e,i,o=t.originalEvent;!o.touches||!o.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(e=o.touches[0].clientX,i=o.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,e,i),this._endPoint.call(this,e,i,t),this._touchHandled=null),this._clickHandled=null},_calculateFinishDistance:function(t){var e;if(this._markers.length>0){var i=this._markers[this._markers.length-1],o=this._map.latLngToContainerPoint(i.getLatLng()),n=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),s=this._map.latLngToContainerPoint(n.getLatLng());e=o.distanceTo(s)}else e=1/0;return e},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)}})},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.sitDataManager=e.SitDataManager=void 0;o(i(23)),o(i(110)),o(i(107)),o(i(109)),o(i(106)),i(4),o(i(102)),o(i(97));var n=e.SitDataManager=L.Evented.extend({map:null,serverUrl:null,smlInfo:null,smlFileName:null,initialize:function(t,e,i){i&&SuperMap.Util.extend(this,i),t&&null!==t&&null===this.map&&(n.prototype.map=t),e&&null===this.serverUrl&&(n.prototype.serverUrl=e),null===this.smlInfo&&(n.prototype.smlInfo=new SuperMap.Plot.SMLInfoStruct),null===this.smlFileName&&(n.prototype.smlFileName="situationMap")},destroy:function(){n.prototype.map=null,n.prototype.smlInfo.destroy(),n.prototype.smlInfo=null,n.prototype.smlFileName=null,n.prototype.serverUrl=null},getSitDataLayers:function(){return this.map.getPlottingLayers()},openSmlData:function(t){if(this.smlInfo.fromJSON(t.smlInfo),t.mapInfo){var e=new SuperMap.Plot.MapInfoStruct;e.fromJSON(t.mapInfo),null!==e.zoom&&null!==e.centerX&&null!==e.centerY&&this.map.setView(L.latLng(e.centerY,e.centerX),e.zoom,{reset:!0})}var i=t.layerDatas;this.map.clearPlottingLayers();for(var o,n=0,s=i.length;n<s;n++)(o=i[n].useCanvas||i[n].useCanvas2?L.supermap.plotting.plottingLayer(i[n].layerName,this.serverUrl,{renderer:L.canvas()}):L.supermap.plotting.plottingLayer(i[n].layerName,this.serverUrl,{renderer:L.svg()})).spatialAnalystUrl=i[n].spatialAnalystUrl,this.map.addLayer(o),this._load(i[n],o),void 0!==i[n].isEditable&&null!==i[n].isEditable&&o.setEditable(i[n].isEditable),void 0!==i[n].isLocked&&null!==i[n].isLocked&&o.setLocked(i[n].isLocked),void 0!==i[n].visibility&&null!==i[n].visibility&&o.setVisibility(i[n].visibility)},addSmlData:function(t,e){this.smlInfo.fromJSON(t.smlInfo);for(var i=t.layerDatas,o=null,n=!1,s=0;s<i.length;s++)if(null!==i[s].layerName){var a=this.map.getLayersByName(i[s].layerName);if(0!==a.length?o=a[0]:e&&((o=L.supermap.plotting.plottingLayer(i[s].layerName,this.serverUrl)).spatialAnalystUrl=i[s].spatialAnalystUrl,this.map.addLayer(o)),t.mapInfo&&o&&!n){var l=new SuperMap.Plot.MapInfoStruct;l.fromJSON(t.mapInfo),null!==l.zoom&&null!==l.centerX&&null!==l.centerY&&this.map.setView(L.latLng(l.centerY,l.centerX),l.zoom,{reset:!0}),n=!0}null!==o&&this._load(i[s],o)}},addSmlDataToLayer:function(t,e){this.smlInfo.fromJSON(t.smlInfo);var i=t.layerDatas,o=null,n=this.map.getLayersByName(e);if(0!==n.length?o=n[0]:(o=L.supermap.plotting.plottingLayer(e,this.serverUrl),this.map.addLayer(o)),t.mapInfo&&o){var s=new SuperMap.Plot.MapInfoStruct;s.fromJSON(t.mapInfo),null!==s.zoom&&null!==s.centerX&&null!==s.centerY&&this.map.setView(L.latLng(s.centerY,s.centerX),s.zoom,{reset:!0})}for(var a=0;a<i.length;a++)this._load(i[a],o)},openSmlFile:function(t,e){var i=this.serverUrl+"smlInfos/",o=document.getElementById(t).value.split("\\"),n=o[o.length-1];i+=n;var s=this;""!==n&&$.ajaxFileUpload({url:i,secureuri:!1,fileElementId:t,dataType:"json",timeout:36e5,success:function(t,i){s.openSmlFileOnServer(n,e)},error:function(t,i,o){e({success:!1,message:"打开本地态势图文件失败"})}})},addSmlFile:function(t,e,i){var o=this.serverUrl+"smlInfos/",n=document.getElementById(t).value.split("\\"),s=n[n.length-1];o+=s;var a=this;""!==s&&$.ajaxFileUpload({url:o,secureuri:!1,fileElementId:t,dataType:"json",timeout:36e5,success:function(t,o){a.addSmlFileOnServer(s,e,i)},error:function(t,e,o){i({success:!1,message:"叠加本地态势图文件失败"})}})},uploadSmlFile:function(t,e){var i=this.serverUrl+"smlInfos/",o=document.getElementById(t).value.split("\\"),n=o[o.length-1];i+=n,""!==n&&$.ajaxFileUpload({url:i,secureuri:!1,fileElementId:t,dataType:"json",timeout:36e5,success:function(t,i){e({success:!0,message:"上传态势图文件成功"})},error:function(t,i,o){e({success:!1,message:"上传态势图文件失败"})}})},addSmlFileToLayer:function(t,e,i){var o=this.serverUrl+"smlInfos/",n=document.getElementById(t).value.split("\\"),s=n[n.length-1];o+=s;var a=this;""!==s&&$.ajaxFileUpload({url:o,secureuri:!1,fileElementId:t,dataType:"json",timeout:36e5,success:function(t,o){a.addSmlFileToLayerOnServer(s,e,i)},error:function(t,e,o){i({success:!1,message:"打开本地文件失败"})}})},addSmlFileOnServer:function(t,e,i){var o=new SuperMap.EditSmlFileParameters;o.method="GET",o.smlFileName=t,L.supermap.smlFileService(this.serverUrl).editSMLFile(o,function(t){if(t.result.succeed){var o=t.result;this.smlInfo.fromJSON(o.smlInfo);for(var n=o.layerDatas,s=null,a=!1,l=0;l<n.length;l++)if(null!==n[l].layerName){var r=this.map.getLayersByName(n[l].layerName);if(0!==r.length?s=r[0]:e&&((s=L.supermap.plotting.plottingLayer(n[l].layerName,this.serverUrl)).spatialAnalystUrl=n[l].spatialAnalystUrl,this.map.addLayer(s)),o.mapInfo&&s&&!a){var u=new SuperMap.Plot.MapInfoStruct;u.fromJSON(o.mapInfo),null!==u.zoom&&null!==u.centerX&&null!==u.centerY&&this.map.setView(L.latLng(u.centerY,u.centerX),u.zoom,{reset:!0}),a=!0}null!==s&&this._load(n[l],s)}null!==s&&"function"==typeof i?i({success:!0,smlFileName:this.smlFileName,sitDataLayers:this.map.getPlottingLayers()}):"function"==typeof i&&i({success:!1,message:"态势图文件不存在与当前态势图同名的图层"})}else"function"==typeof i&&i({success:!1,message:"从服务器上获取态势图文件失败"})},this)},addSmlFileToLayerOnServer:function(t,e,i){var o=new SuperMap.EditSmlFileParameters;o.method="GET",o.smlFileName=t,L.supermap.smlFileService(this.serverUrl).editSMLFile(o,function(t){if(t.result.succeed){var o=t.result;this.smlInfo.fromJSON(o.smlInfo);var n=o.layerDatas,s=null,a=this.map.getLayersByName(e);if(0!==a.length?s=a[0]:(s=L.supermap.plotting.plottingLayer(e,this.serverUrl),this.map.addLayer(s)),o.mapInfo&&s){var l=new SuperMap.Plot.MapInfoStruct;l.fromJSON(o.mapInfo),null!==l.zoom&&null!==l.centerX&&null!==l.centerY&&this.map.setView(L.latLng(l.centerY,l.centerX),l.zoom,{reset:!0})}for(var r=0;r<n.length;r++)this._load(n[r],s);"function"==typeof i&&i({success:!0,smlFileName:this.smlFileName,sitDataLayers:this.map.getPlottingLayers()})}else"function"==typeof i&&i({success:!1,message:"从服务器上获取态势图失败"})},this)},downloadSmlFileURL:function(t){return"smlFileDownload/"+t+".sml"},newSmlFile:function(){this.smlFileName="",this.smlInfo.destroy(),this.map.clearPlottingLayers()},saveSmlFile:function(t){var e=this.map.getPlottingLayers();this._save(this.smlFileName,e,!0,t)},saveAsSmlFile:function(t,e){var i=this.map.getPlottingLayers();this._save(t,i,!1,e)},getSMLInfo:function(t,e){var i=new SuperMap.EditSmlFileParameters;i.method="GET",i.smlFileName=t,L.supermap.smlFileService(this.serverUrl).editSMLFile(i,function(t){t.result.succeed&&"function"==typeof e?e({success:!0,smlInfo:t.result.smlInfo}):"function"==typeof e&&e({success:!1})},this)},getSMLInfos:function(t,e,i){var o=t*e,n=e,s=new SuperMap.GetSMLInfosParameters;s.start=o,s.count=n,L.supermap.smlFileService(this.serverUrl).getSMLInfos(s,function(t){t.result.succeed&&"function"==typeof i?i({success:!0,smlInfoList:t.result}):"function"==typeof i&&i({success:!1})},this)},_getCompletedInit:function(t,e){if(this.smlFileName=e,this.smlInfo.fromJSON(t.smlInfo),t.mapInfo){var i=new SuperMap.Plot.MapInfoStruct;i.fromJSON(t.mapInfo),null!==i.zoom&&null!==i.centerX&&null!==i.centerY&&this.map.setView(L.latLng(i.centerY,i.centerX),i.zoom,{reset:!0})}var o=t.layerDatas;this.map.clearPlottingLayers();for(var n,s=0,a=o.length;s<a;s++)(n=o[s].useCanvas||o[s].useCanvas2?L.supermap.plotting.plottingLayer(o[s].layerName,this.serverUrl,{renderer:L.canvas()}):L.supermap.plotting.plottingLayer(o[s].layerName,this.serverUrl,{renderer:L.svg()})).spatialAnalystUrl=o[s].spatialAnalystUrl,this.map.addLayer(n),this._load(o[s],n),void 0!==o[s].isEditable&&null!==o[s].isEditable&&n.setEditable(o[s].isEditable),void 0!==o[s].isLocked&&null!==o[s].isLocked&&n.setLocked(o[s].isLocked),void 0!==o[s].visibility&&null!==o[s].visibility&&n.setVisibility(o[s].visibility)},openSmlFileOnServer:function(t,e){var i=new SuperMap.EditSmlFileParameters;i.method="GET",i.smlFileName=t,L.supermap.smlFileService(this.serverUrl).editSMLFile(i,function(i){i.result.succeed?(this._getCompletedInit(i.result,t),"function"==typeof e&&e({success:!0,smlFileName:this.smlFileName,sitDataLayers:this.map.getPlottingLayers()})):"function"==typeof e&&e({success:!1,message:"打开已发布的态势图文件失败"})},this)},deleteSmlFileOnServer:function(t,e){var i=new SuperMap.EditSmlFileParameters;i.method="DELETE",i.smlFileName=t,L.supermap.smlFileService(this.serverUrl).editSMLFile(i,function(t){t.result.succeed&&"function"==typeof e?e({success:!0}):"function"==typeof e&&e({success:!1})},this)},_save:function(t,e,i,o){var n=new SuperMap.Plot.SitDataStruct;n.smlInfo=this.smlInfo;var s=new SuperMap.Plot.MapInfoStruct;s.zoom=this.map.getZoom(),s.centerX=this.map.getCenter().lng,s.centerY=this.map.getCenter().lat,n.mapInfo=s,n.layerDatas=[];for(var a=0;a<e.length;a++){var l=e[a].features,r=new SuperMap.Plot.LayerDataStruct;r.layerName=e[a].name,r.spatialAnalystUrl=e[a].spatialAnalystUrl,this.map instanceof L.Map?this.map.getRenderer(e[a])instanceof L.Canvas&&(r.useCanvas=!0):(r.useCanvas=e[a].useCanvas,r.useCanvas2=e[a].useCanvas2),r.isEditable=e[a].getEditable(),r.isLocked=e[a].getLocked(),r.visibility=e[a].getVisibility(),r.features=l,n.layerDatas.push(r)}var u=new SuperMap.EditSmlFileParameters;u.method="POST",u.sitData=n,u.smlFileName=t,u.isCover=i,L.supermap.smlFileService(this.serverUrl).editSMLFile(u,function(t){t.result.succeed&&"function"==typeof o?o({success:!0}):"function"==typeof o&&o({success:!1})},this)},_load:function(t,e){e.spatialAnalystUrl=t.spatialAnalystUrl;for(var i=0,o=t.features.length;i<o;i++){var n=t.features[i];if(null!==n){var s;n.resolution?n.resolution:n.fromZoom&&(s=n.fromZoom),!1===n.scaleByMap&&(s=this.map.getZoom()),n.hasOwnProperty("isEdit")||(n.isEdit=!0);var a=L.supermap.plotting.PlottingObject.createSymbol(n.libID,n.code,null,{serverUrl:this.serverUrl,symbolData:n,fromZoom:s,map:this.map});e.addFeatures(a)}}}}),s=e.sitDataManager=function(t,e,i){return new n(t,e,i)};L.supermap.plotting.sitDataManager=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=e.SymbolLib=L.Evented.extend({url:null,libID:null,symbolLibData:null,cachedSymbolList:null,needCacheList:null,symbolNames:null,initialize:function(t){this.cachedSymbolList={},this.needCacheList=[],t&&SuperMap.Util.extend(this,t),t&&t.url&&t.libID?(this.url=t.url,this.libID=t.libID):t&&t.symbolLibData&&(this.symbolLibData=t.symbolLibData,this.libID=this.symbolLibData.libID,this.initNeedCacheList())},destroy:function(){this.url=null,this.libID=null,this.symbolLibData=null},initializeAsync:function(){var t=new SuperMap.GetLibInfoParameter;t.libID=this.libID,L.supermap.symbolLibService(this.url).getLibInfo(t,function(t){t.result.succeed?(this.symbolLibData=t.result,this.libID=this.symbolLibData.libID,this.initNeedCacheList(),this.fire(SuperMap.Plot.Event.initializecompleted,{success:!0})):(this.libID=-1,this.fire(SuperMap.Plot.Event.initializecompleted,{success:!1}))},this)},getSymbolLibName:function(){return null===this.symbolLibData?null:this.symbolLibData.symbolLibName},getSymbolName:function(t){return null===this.symbolLibData?"":(null===this.symbolNames&&(this.symbolNames={},this.getSymbolNameFromList(this.symbolLibData.rootSymbolLibNode)),this.symbolNames[t])},getSymbolNameFromList:function(t){for(var e=0;e<t.childNodeCount;e++)"SYMBOL_GROUP"===t.childNodes[e].symbolNodeType?this.getSymbolNameFromList(t.childNodes[e]):"SYMBOL_NODE"===t.childNodes[e].symbolNodeType&&(this.symbolNames[t.childNodes[e].symbolCode]=t.childNodes[e].symbolName);return""},initNeedCacheList:function(){if(null===this.symbolLibData)return!1;this.initNeedCacheListForNode(this.symbolLibData.rootSymbolLibNode)},initNeedCacheListForNode:function(t,e){for(var i=0;i<t.childNodeCount;i++)"SYMBOL_GROUP"===t.childNodes[i].symbolNodeType?this.initNeedCacheListForNode(t.childNodes[i]):"SYMBOL_NODE"===t.childNodes[i].symbolNodeType&&"SYMBOL_DOT"===t.childNodes[i].symbolType&&this.needCacheList.push(t.childNodes[i].symbolCode)},cachedSymbols:function(){if(0!==this.needCacheList.length){for(var t=this.needCacheList.slice(),e=0,i=t.length;e<i;e++){var o=new SuperMap.GetSymbolInfoParameters;o.libID=this.libID,o.code=t[e],L.supermap.symbolInfoService(this.url).getSymbolInfo(o,function(t){t.result.succeed&&(this.cacheSymbolData(t.result),0===this.needCacheList.length&&this.fire(SuperMap.Plot.Event.cachecompleted,{success:!0}))},this)}this.cachedSymbolOK=!0}else this.fire(SuperMap.Plot.Event.cachecompleted,{success:!0})},getSymbolLibID:function(){return this.libID},getSymbolData:function(t){var e=null;return this.cachedSymbolList.hasOwnProperty(t)&&(e=SuperMap.PlotUtil.cloneObject(this.cachedSymbolList[t])),e},cacheSymbolData:function(t){var e=SuperMap.Util.indexOf(this.needCacheList,t.code);-1!==e&&(this.cachedSymbolList[t.code]=SuperMap.PlotUtil.cloneObject(t),this.needCacheList.splice(e,1))},getSymbolCount:function(){return null===this.symbolLibData?null:this.symbolLibData.symbolCount},querySymbolbyKey:function(t){return this.querySymbol(t,this.getRootSymbolInfo(),this.getRootSymbolIconUrl())},getClassFication:function(){return null===this.symbolLibData?null:this.symbolLibData.classFication},getCreateTime:function(){return null===this.symbolLibData?null:this.symbolLibData.createTime},getCreator:function(){return null===this.symbolLibData?null:this.symbolLibData.creator},getModifyTime:function(){return null===this.symbolLibData?null:this.symbolLibData.modifyTime},getRootSymbolIconUrl:function(){return null===this.symbolLibData?null:this.symbolLibData.rootSymbolIconUrl},getVersion:function(){return null===this.symbolLibData?null:this.symbolLibData.version},getRootSymbolInfo:function(){return null===this.symbolLibData?null:this.symbolLibData.rootSymbolLibNode},querySymbol:function(t,e,i){var o=[];if("SYMBOL_GROUP"===e.symbolNodeType)for(var n=0;n<e.childNodes.length;n++)for(var s=i+"/"+e.symbolName,a=this.querySymbol(t,e.childNodes[n],s),l=0;l<a.length;l++)o.push(a[l]);else t===e.symbolCode.toString()?(e.icon=i+"/"+e.symbolCode+".png",o.push(e)):-1!==e.symbolName.indexOf(t)&&(e.icon=i+"/"+e.symbolCode+".png",o.push(e));return o}}),n=e.symbolLib=function(t){return new o(t)};L.supermap.plotting.symbolLib=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.symbolLibManager=e.SymbolLibManager=void 0;var o=i(26),n=e.SymbolLibManager=L.Evented.extend({url:null,libIDs:null,symbolLibs:null,symbolLibJsons:null,isInializeOK:!1,initialize:function(t,e){n.prototype.url=t,null===this.libIDs&&(n.prototype.libIDs=[]),null===this.symbolLibs&&(n.prototype.symbolLibs=[]),null===this.symbolLibJsons&&(n.prototype.symbolLibJsons=[]),e&&SuperMap.Util.extend(this,e)},destroy:function(){n.prototype.url=null,n.prototype.libIDs=null,n.prototype.symbolLibs=null,n.prototype.symbolLibJsons=null,n.prototype.isInializeOK=!1,n.prototype.isInitialize=!1},initializeAsync:function(){this.isInitializeOK()?this.fire(SuperMap.Plot.Event.initializecompleted,{success:!0,libIDs:this.libIDs}):this.isInitialize||(n.prototype.isInitialize=!0,L.supermap.symbolLibService(this.url).getLibIDs(function(t){if(t.result.succeed){if(null!==this.libIDs&&0!==this.libIDs.length)for(var e=0;e<this.libIDs.length;e++){for(var i=!1,o=0;o<t.result.length;o++)if(n.prototype.libIDs[e]===t.result[o]){i=!0;break}!1===i&&n.prototype.libIDs.slice(e,1)}else n.prototype.libIDs=t.result;this.initializeSymbolLib()}else n.prototype.libIDs=[]},this))},initializeSymbolLib:function(){for(var t=this.libIDs.slice(),e=0,i=this.libIDs.length;e<i;e++){var s=new SuperMap.GetLibInfoParameter;s.libID=this.libIDs[e],L.supermap.symbolLibService(this.url).getLibInfo(s,function(e){if(e.result.succeed){var i=SuperMap.Util.indexOf(t,e.result.libID);-1!==i&&(t.splice(i,1),n.prototype.symbolLibJsons.push(e.result),n.prototype.symbolLibs.push(new o.SymbolLib({symbolLibData:e.result})),this.symbolLibs[this.symbolLibs.length-1].url=this.url),0===t.length&&(n.prototype.isInializeOK=!0,this.fire(SuperMap.Plot.Event.initializecompleted,{success:!0,libIDs:this.libIDs}))}},this)}},isInitializeOK:function(){return this.isInializeOK},getSymbolLibNumber:function(){return this.libIDs.length},getSymbolLibID:function(t){return t>=this.libIDs.length?-1:this.libIDs[t]},getSymbolLibJSONInfo:function(t){return t>=this.libIDs.length?null:this.symbolLibJsons[t]},getSymbolLibByIndex:function(t){return t>=this.libIDs.length?null:this.symbolLibs[t]},getSymbolLibByLibId:function(t){for(var e=0;e<this.symbolLibs.length;e++)if(t===this.symbolLibs[e].libID)return this.symbolLibs[e];return null},cacheSymbolLib:function(t){function e(){this.fire(SuperMap.Plot.Event.cachecompleted,{success:!0}),i.off(SuperMap.Plot.Event.cachecompleted,e)}var i=this.getSymbolLibByLibId(t);null!==i&&(i.on(SuperMap.Plot.Event.cachecompleted,e,this),i.cachedSymbols())},getSymbolName:function(t,e){var i=this.getSymbolLibByLibId(t);return null===i?"":i.getSymbolName(e)},findSymbolByName:function(t){for(var e=[],i=0;i<this.libIDs.length;i++)for(var o=this.getSymbolLibByLibId(this.libIDs[i]).querySymbolbyKey(t),n=0;n<o.length;n++)e.push(o[n]);return e},findSymbolByCode:function(t){for(var e=[],i=0;i<this.libIDs.length;i++)for(var o=this.getSymbolLibByLibId(this.libIDs[i]).querySymbolbyKey(t.toString()),n=0;n<o.length;n++)e.push(o[n]);return e}}),s=e.symbolLibManager=function(t,e){return new n(t,e)};L.supermap.plotting.symbolLibManager=s},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.AlgoSymbolFactory=void 0;o(i(65)),o(i(66)),o(i(67)),o(i(13)),o(i(29)),o(i(68)),o(i(30)),o(i(31)),o(i(32)),o(i(69)),o(i(70)),o(i(71)),o(i(72)),o(i(73)),o(i(74)),o(i(75)),o(i(76)),o(i(96)),o(i(77)),o(i(91)),o(i(78)),o(i(94)),o(i(83)),o(i(84)),o(i(93)),o(i(80)),o(i(79)),o(i(82)),o(i(87)),o(i(92)),o(i(81)),o(i(89)),o(i(86)),o(i(85)),o(i(90)),e.AlgoSymbolFactory=SuperMap.AlgoSymbolFactory=SuperMap.AlgoSymbolFactory||{};SuperMap.AlgoSymbolFactory.createAlgo=function(t){var e=t.libID,i=t.code;if(0===e)switch(i){case SuperMap.Plot.SymbolType.ANNOFRAMESYMBOL:return new SuperMap.Geometry.GeoTooltipBox(t);case SuperMap.Plot.SymbolType.ANNOFRAMESYMBOLM:return new SuperMap.Geometry.GeoTooltipBoxM(t);case SuperMap.Plot.SymbolType.PATHTEXT:return new SuperMap.Geometry.PathText(t);case SuperMap.Plot.SymbolType.ARROWLINE:return new SuperMap.Geometry.ArrowLine(t);case SuperMap.Plot.SymbolType.CURVEEIGHT:return new SuperMap.Geometry.CurveEight(t);case SuperMap.Plot.SymbolType.RUNWAY:return new SuperMap.Geometry.Runway(t);case SuperMap.Plot.SymbolType.CONCENTRICCIRCLE:return new SuperMap.Geometry.ConcentricCircle(t);case SuperMap.Plot.SymbolType.COMBINATIONALCIRCLE:return new SuperMap.Geometry.CombinationalCircle(t);case SuperMap.Plot.SymbolType.FREECURVE:return new SuperMap.Geometry.FreeCurve(t);case SuperMap.Plot.SymbolType.REGULARPOLYGON:return new SuperMap.Geometry.RegularPolygon(t);case SuperMap.Plot.SymbolType.BRACESYMBOL:return new SuperMap.Geometry.Brace(t);case SuperMap.Plot.SymbolType.TRAPEZOIDSYMBOL:return new SuperMap.Geometry.Trapezoid(t);case SuperMap.Plot.SymbolType.SYMBOLTEXTBOX:return new SuperMap.Geometry.SymbolTextBox(t);case SuperMap.Plot.SymbolType.NODECHAIN:return new SuperMap.Geometry.NodeChain(t);case SuperMap.Plot.SymbolType.LINERELATION:return new SuperMap.Geometry.LineRelation(t);case SuperMap.Plot.SymbolType.LINEMARKING:return new SuperMap.Geometry.LineMarking(t);case SuperMap.Plot.SymbolType.POLYGONREGION:return new SuperMap.Geometry.PolygonRegion(t);default:return new SuperMap.Geometry.AlgoSymbol(t)}else if(22===e)switch(i){case 1001:return new SuperMap.Geometry.AlgoSymbol1001(t);case 1002:return new SuperMap.Geometry.AlgoSymbol1002(t);case 1003:return new SuperMap.Geometry.AlgoSymbol1003(t);case 1004:return new SuperMap.Geometry.AlgoSymbol1004(t);case 1005:return new SuperMap.Geometry.AlgoSymbol1005(t);case 1006:return new SuperMap.Geometry.AlgoSymbol1006(t);case 1007:return new SuperMap.Geometry.AlgoSymbol1007(t);case 1008:return new SuperMap.Geometry.AlgoSymbol1008(t);case 1009:return new SuperMap.Geometry.AlgoSymbol1009(t);case 1010:return new SuperMap.Geometry.AlgoSymbol1010(t);case 1011:return new SuperMap.Geometry.AlgoSymbol1011(t);case 1012:return new SuperMap.Geometry.AlgoSymbol1012(t);case 1013:return new SuperMap.Geometry.AlgoSymbol1013(t);case 1014:return new SuperMap.Geometry.AlgoSymbol1014(t);case 1015:return new SuperMap.Geometry.AlgoSymbol1015(t);case 1016:return new SuperMap.Geometry.AlgoSymbol1016(t);default:return null}else{if(100===e&&void 0!==SuperMap.Geometry.JBAlgoSymbolFactory)return SuperMap.Geometry.JBAlgoSymbolFactory.getAlgoSymbol(e,i,t);if(123===e&&void 0!==SuperMap.Geometry.WJAlgoSymbolFactory)return SuperMap.Geometry.WJAlgoSymbolFactory.getAlgoSymbol(e,i,t);if(421!==e)return null;switch(i){case 311:return new SuperMap.Geometry.AlgoSymbol1004(t);case 315:return new SuperMap.Geometry.AlgoSymbol315(t);case 317:return new SuperMap.Geometry.AlgoSymbol1006(t);case 318:return new SuperMap.Geometry.AlgoSymbol1002(t);case 319:return new SuperMap.Geometry.AlgoSymbol15200(t);default:return null}}},SuperMap.AlgoSymbolFactory.getSymbolWayType=function(t,e){if(0===t)switch(e){case SuperMap.Plot.SymbolType.POLYLINESYMBOL:case SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL:return SuperMap.Plot.AddPoint_WayType.POLYLINE;case SuperMap.Plot.SymbolType.POLYBEZIERSYMBOL:case SuperMap.Plot.SymbolType.POLYBEZIERCLOSESYMBOL:return SuperMap.Plot.AddPoint_WayType.CURVE;default:return SuperMap.Plot.AddPoint_WayType.UNKNOWN}if(22===t)switch(e){case 1005:case 1008:case 1012:case 1014:return SuperMap.Plot.AddPoint_WayType.CURVE;case 1007:case 1009:case 1013:case 1015:return SuperMap.Plot.AddPoint_WayType.POLYLINE;default:return SuperMap.Plot.AddPoint_WayType.UNKNOWN}if(100===t&&void 0!==SuperMap.Geometry.JBAlgoSymbolFactory)return SuperMap.Geometry.JBAlgoSymbolFactory.getSymbolWayType(t,e);if(100!==t)return SuperMap.Plot.AddPoint_WayType.UNKNOWN;switch(e){case 15200:case 15201:case 16203:case 17703:case 17704:case 21400:case 21401:case 21500:case 21501:case 21502:case 21503:case 21504:case 21600:case 21900:case 22e3:case 22103:case 23800:case 24700:case 25201:case 25400:case 25601:case 25801:case 25901:case 26500:case 26501:case 26502:case 26503:case 26600:case 28900:case 29e3:case 29003:case 29903:case 3e4:case 30001:case 30002:case 30100:case 30102:case 30200:case 30201:case 30800:case 31803:case 33400:case 34900:case 34901:case 34902:case 35e3:case 36400:case 44200:case 3010102:case 3010103:case 3010104:case 3010105:case 3010106:case 3010107:case 3010108:case 3010301:case 3010302:case 3010303:case 3010304:return SuperMap.Plot.AddPoint_WayType.CURVE;case 12500:case 12502:case 16100:case 20300:case 25501:case 25502:case 25503:case 32900:case 34700:case 35200:case 36401:case 41200:case 41201:case 41202:case 42700:case 44400:return SuperMap.Plot.AddPoint_WayType.POLYLINE;default:return SuperMap.Plot.AddPoint_WayType.UNKNOWN}if(123===t&&void 0!==SuperMap.Geometry.WJAlgoSymbolFactory)return SuperMap.Geometry.WJAlgoSymbolFactory.getSymbolWayType(t,e);if(123!==t)return SuperMap.Plot.AddPoint_WayType.UNKNOWN;switch(e){case 21003:case 21207:case 2120701:case 2121503:case 21218:case 30008:case 3000801:case 3000802:case 3000803:case 3000804:case 3000805:case 3000806:case 3000807:case 3000808:case 3000809:case 30009:case 5021803:case 5022001:case 5022002:case 40301:case 4030101:case 4030102:case 4030103:case 4030104:case 40303:case 4030301:case 4030302:case 4030303:case 50101:case 5010101:case 50102:case 5010201:case 5010202:case 5010203:case 5010204:case 50103:case 5010301:case 5010302:case 5010303:case 5010304:case 50107:case 5010701:case 50210:case 50220:case 50221:case 50225:case 5030102:case 50303:case 5030301:case 50309:case 50320:case 5032001:case 5032002:case 5032003:case 50321:case 5032101:case 5032102:case 50322:case 5032201:case 50330:case 5033001:case 5034203:case 5035201:case 5035204:case 60205:case 90105:return SuperMap.Plot.AddPoint_WayType.CURVE;case 20915:case 2091502:case 2092101:case 2120702:case 21216:case 2121601:case 2121602:case 21605:case 30010:case 30011:case 3001101:case 3001102:case 3001103:case 3001104:case 3001105:case 30012:case 30020:case 3002001:case 3002002:case 3002005:case 30025:case 3002501:case 30026:case 40104:case 40302:case 4030201:case 4030202:case 4030203:case 4030204:case 50227:case 5035205:case 60301:case 6030101:case 6030102:case 6030103:case 6030104:case 6030105:case 6030106:case 6030107:case 70202:case 7020201:case 7020202:case 90107:return SuperMap.Plot.AddPoint_WayType.POLYLINE;default:return SuperMap.Plot.AddPoint_WayType.UNKNOWN}},SuperMap.AlgoSymbolFactory.isAccessServer=function(t,e){if(0===t||22===t)return!1;if(100===t&&void 0!==SuperMap.Geometry.JBAlgoSymbolFactory)return SuperMap.Geometry.JBAlgoSymbolFactory.isAccessServer(t,e);if(123===t&&void 0!==SuperMap.Geometry.WJAlgoSymbolFactory)return SuperMap.Geometry.WJAlgoSymbolFactory.isAccessServer(t,e);if(421!==t)return!0;switch(e){case 311:case 317:case 318:case 315:case 319:return!1;default:return!0}},SuperMap.AlgoSymbolFactory.getDefaultSubSymbols=function(t,e){return 100===t&&void 0!==SuperMap.Geometry.JBAlgoSymbolFactory?SuperMap.Geometry.JBAlgoSymbolFactory.getDefaultSubSymbols(t,e):123!==t||void 0===SuperMap.Geometry.WJAlgoSymbolFactory||SuperMap.Geometry.WJAlgoSymbolFactory.getDefaultSubSymbols(t,e)},SuperMap.AlgoSymbolFactory.setMinAndMaxEditPts=function(t,e){return 100===t&&void 0!==SuperMap.Geometry.JBAlgoSymbolFactory?SuperMap.Geometry.JBAlgoSymbolFactory.setMinAndMaxEditPts(t,e):123===t&&void 0!==SuperMap.Geometry.WJAlgoSymbolFactory?SuperMap.Geometry.WJAlgoSymbolFactory.setMinAndMaxEditPts(t,e):0}},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=o(i(0)),u=(o(i(3)),function(t){function e(t){n(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1005",i.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,i.symbolName="普通贝塞尔箭头",i.minEditPts=2,i.maxEditPts=99999,i}return a(e,r["default"]),l(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePtsBySingleLine(t,0,SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_POLYBEZIER),i=[];i.push(e.arrowBodyPts[e.arrowBodyPts.length-1]),i.push(e.arrowBodyPts[e.arrowBodyPts.length-2]);var o=this.getSubSymbolScaleValue(),n=this.calculateforHead(t,e,i,o),s=SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePtsBySingleLine(t,n,i,o,e.arrowHeadLen,SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_POLYLINE);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s)}}}]),e}());e.default=u,SuperMap.Geometry.AlgoSymbol1005=u},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=o(i(0)),u=(o(i(3)),function(t){function e(t){n(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1007",i.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,i.symbolName="折线空三角箭头",i.minEditPts=2,i.maxEditPts=99999,i}return a(e,r["default"]),l(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=!1;void 0!==t[0].z&&(e=!0);var i=SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePtsBySingleLine(t,0,SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_POLYLINE),o=[];o.push(i.arrowBodyPts[i.arrowBodyPts.length-1]),o.push(i.arrowBodyPts[i.arrowBodyPts.length-2]);var n=this.getSubSymbolScaleValue(),s=this.calculateforHead(t,i,o,n),a=SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePtsBySingleLine(t,s,o,n,i.arrowHeadLen,SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_TRIANGLE_SOLID);if(e){for(var l=t.length,r=[],u=[],p=0;p<l;++p)r.push({x:s[p].x,y:s[p].y,z:t[p].z});var h={x:t[l-1].x,y:t[l-1].y,z:t[l-1].z},c={x:t[l-2].x,y:t[l-2].y,z:t[l-2].z},y=this.ComputeZValue(s[l-1],h,c);r.push({x:s[l-1].x,y:s[l-1].y,z:y});for(var g=0;g<a.length;++g){var d=this.ComputeZValue(a[g],h,c);u.push({x:a[g].x,y:a[g].y,z:d})}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r);f={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,u,f)}else{this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s);var f={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,a,f)}}}}]),e}());e.default=u,SuperMap.Geometry.AlgoSymbol1007=u},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=o(i(0)),u=(o(i(3)),function(t){function e(t){n(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1008",i.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,i.symbolName="贝塞尔燕尾箭头",i.minEditPts=2,i.maxEditPts=99999,i}return a(e,r["default"]),l(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=this.getSubSymbolScaleValue(),i=SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePtsBySingleLine(t,0,SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_POLYBEZIER),o=[];o.push(i.arrowBodyPts[i.arrowBodyPts.length-1]),o.push(i.arrowBodyPts[i.arrowBodyPts.length-2]);var n=this.calculateforHead(t,i,o,e),s=SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePtsBySingleLine(t,n,o,e,i.arrowHeadLen,SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_COATTAIL);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n);var a={surroundLineFlag:!1,fillLimit:!0,fillStyle:!0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,s,a)}}}]),e}());e.default=u,SuperMap.Geometry.AlgoSymbol1008=u},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=o(i(0)),u=(o(i(3)),function(t){function e(t){n(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1009",i.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,i.symbolName="普通折线箭头",i.minEditPts=2,i.maxEditPts=99999,i}return a(e,r["default"]),l(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=!1;void 0!==t[0].z&&(e=!0);var i=SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePtsBySingleLine(t,0,SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_POLYLINE),o=[];o.push(i.arrowBodyPts[i.arrowBodyPts.length-1]),o.push(i.arrowBodyPts[i.arrowBodyPts.length-2]);var n=this.getSubSymbolScaleValue(),s=this.calculateforHead(t,i,o,n),a=SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePtsBySingleLine(t,s,o,n,i.arrowHeadLen,SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_POLYLINE),l=SuperMap.Plot.ArrowToolKit.generateArrowTailShapePts(t,o,n,SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_COATTAIL);if(e){for(var r=t.length,u=[],p=[],h=[],c=0;c<r;++c)u.push({x:s[c].x,y:s[c].y,z:t[c].z});var y,g={x:t[r-1].x,y:t[r-1].y,z:t[r-1].z},d={x:t[r-2].x,y:t[r-2].y,z:t[r-2].z};y=this.ComputeZValue(s[r-1],g,d),u.push({x:s[r-1].x,y:s[r-1].y,z:y});for(var f=0;f<a.length;++f)y=this.ComputeZValue(a[f],g,d),p.push({x:a[f].x,y:a[f].y,z:y});for(var S={x:t[1].x,y:t[1].y,z:t[1].z},P={x:t[0].x,y:t[0].y,z:t[0].z},m=0;m<l.length;++m)y=this.ComputeZValue(l[m],S,P),h.push({x:l[m].x,y:l[m].y,z:y});b={surroundLineFlag:!1};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,b),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),0!==h.length&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h)}else{var b={surroundLineFlag:!1};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s,b),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a),0!==l.length&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,l)}}}}]),e}());e.default=u,SuperMap.Geometry.AlgoSymbol1009=u},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=(function(t){t&&t.__esModule}(i(95)),function(){function t(e,i,n){o(this,t),this.m_pData=null,this.CLASS_NAME="SuperMap.Plot.Path2D",e?(this.m_x=e,this.m_y=i,this.m_type=n):this.m_pData=null}return n(t,[{key:"MoveTo",value:function(t){this.ensureData(),this.detach();var e=this.getDataPtr();if(e.require_StartNewFigure=!1,0==e.elements[e.elements.length-1].GetType())e.elements[e.elements.length-1].SetPosition(t.x,t.y);else{var i=new SuperMap.Plot.Element(t.x,t.y,0);e.elements.push(i)}e.cStart=e.elements.length-1}},{key:"LineTo",value:function(t){this.ensureData(),this.detach();var e=this.getDataPtr();if(e.MaybeStartNewFigure(),e.elements[e.elements.length-1].GetX()!=t.x||e.elements[e.elements.length-1].GetY()!=t.y){var i=new SuperMap.Plot.Element(t.x,t.y,1);e.elements.push(i)}}},{key:"CurveTo",value:function(t,e,i){this.ensureData(),this.detach();var o=this.getDataPtr();if(o.elements[o.elements.length-1].GetX()!=t.x||o.elements[o.elements.length-1].GetY()!=t.y||t.x!=e.x||t.y!=e.y||e.x!=endPoint.x||e.y!=endPoint.y){o.MaybeStartNewFigure();var n=new SuperMap.Plot.Element(t.x,t.y,2),s=new SuperMap.Plot.Element(e.x,e.y,3),a=new SuperMap.Plot.Element(i.x,i.y,3);o.elements.push(n),o.elements.push(s),o.elements.push(a)}}},{key:"CubicTo",value:function(t,e,i){this.ensureData(),this.detach();var o=this.getDataPtr();if(o.elements[o.elements.length-1].GetX()!=t.x||o.elements[o.elements.length-1].GetY()!=t.y||t.x!=e.x||t.y!=e.y||e.x!=i.x||e.y!=i.y){o.MaybeStartNewFigure();var n=new SuperMap.Plot.Element(t.x,t.y,2),s=new SuperMap.Plot.Element(e.x,e.y,3),a=new SuperMap.Plot.Element(i.x,i.y,3);o.elements.push(n),o.elements.push(s),o.elements.push(a)}}},{key:"ToSubPathPolygons",value:function(t){var e,i,o=this.getDataPtr();if(this.IsEmpty())return!1;for(var n=[],s=this.GetElementCount(),a=0;a<s;a++){var l=o.elements[a];switch(l.GetType()){case 0:n.length>1&&t.push(n),n=[],e=l.GetX(),i=l.GetY(),n.push(new SuperMap.Geometry.Point(e,i));break;case 1:e=l.GetX(),i=l.GetY(),n.push(new SuperMap.Geometry.Point(e,i));break;case 2:3!=o.elements[a+1].GetType()||o.elements[a+1].GetType();for(var r=o.elements[a-1].GetX(),u=o.elements[a-1].GetY(),p=l.GetX(),h=l.GetY(),c=o.elements[a+1].GetX(),y=o.elements[a+1].GetY(),g=o.elements[a+2].GetX(),d=o.elements[a+2].GetY(),f=0;f<=1;f+=.03125){var S=f*f,P=S*f,m=1-3*f+3*S-P,b=3*(f-2*S+P),L=3*(S-P),M=P;n.push(new SuperMap.Geometry.Point(m*r+b*p+L*c+M*g,m*u+b*h+L*y+M*d))}a+=2}}return n.length>1&&t.push(n),!0}},{key:"ensureData",value:function(){null==this.m_pData&&this.ensureData_helper()}},{key:"ensureData_helper",value:function(){var t=new SuperMap.Plot.UGPath2DData,e=new SuperMap.Plot.Element(0,0,0);t.elements.push(e),null==this.m_pData||this.mtDeRef(m_pData.ref)||(this.m_pData=null),this.m_pData=t}},{key:"detach",value:function(){1!=this.m_pData.ref&&this.detach_helper(),this.setBoundsDirty(!0)}},{key:"detach_helper",value:function(){var t=new SuperMap.Plot.UGPath2DData;null==this.m_pData||this.mtDeRef(this.m_pData.ref)||(this.m_pData=null),this.m_pData=t}},{key:"setBoundsDirty",value:function(t){this.getDataPtr().isBoundsDirty=t}},{key:"getDataPtr",value:function(){return this.m_pData}},{key:"IsEmpty",value:function(){if(null==this.m_pData)return!0;var t=this.m_pData.elements.length;return 0==t||1==t&&0==this.m_pData.elements[0].GetType()}},{key:"GetElementCount",value:function(){return null!=this.m_pData?this.m_pData.elements.length:0}}],[{key:"mtRef",value:function(t){return 0!=++t}},{key:"mtDeRef",value:function(t){return 0!=--t}}]),t}());e.default=s,SuperMap.Plot.Path2D=s},function(t,e,i){"use strict";function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.defineProperty(e,"__esModule",{value:!0}),e.AvoidRegionControl=void 0;i(133),i(14);var n,s=i(10);e.AvoidRegionControl=L.Control.extend((n={_mouseTolerance:10,_editMarkers:null,_editMode:SuperMap.Plot.EditMode.EDITCIRCUMRECTANGLE,feature:null,_temportary:null,options:{avoidRegionStyle:{fill:!1,color:"#0000ff",dashArray:"2, 2",opacity:1,weight:1},draggable:!0,avoidIcon:L.divIcon({className:"leaflet-supermap-plot-avoid-icon-path",iconSize:[8,8]}),icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(t,e){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,e),L.setOptions(this,e),this._temportary=new s.PlottingLayerBase("avoidRegionControl-temportary",this.serverUrl),this._editMarkers={},this.feature=t},onAdd:function(t){if(this.feature&&!this.feature.getLocked())return this.controlDiv=L.DomUtil.create("div","supermap-iclient-avoidregion"),this._map=t,this._markers=[],this._latlngs=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._map.addLayer(this._temportary),this._map.on("mousemove",this._onMouseMove,this).on("click",this._onMapClick,this),this._showAvoidRegions(),this.controlDiv},onRemove:function(){this._hideAvoidRegions(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,delete this._latlngs,this.plotting&&(this._temportary.removeFeatures(this.plotting),delete this.plotting,this.plotting=null),this._map.removeLayer(this._temportary),delete this._temportary,this._map.off("mousemove",this._onMouseMove,this).off("click",this._onMapClick,this),this._map=null},_showAvoidRegions:function(){for(var t=0;t<this.feature.avoidRegions.length;t++){var e=this.feature.avoidRegions[t];this._temportary.addFeatures(e),this._selectFeature(e)}},_hideAvoidRegions:function(){for(var t=0;t<this.feature.avoidRegions.length;t++){var e=this.feature.avoidRegions[t];this._unselectFeature(e),this._temportary.removeFeatures(e)}},_selectFeature:function(t){t.symbolType===SuperMap.Plot.SymbolType.AVOIDREGION&&(this._collectEditMarkers(t),t.on("mousemove",this._onMouseMove,this).on("mouseout",this._onMouseOut,this).on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),t.dragging.enable())},_unselectFeature:function(t){t.symbolType===SuperMap.Plot.SymbolType.AVOIDREGION&&(this._removeMarkers(t),t.off("mousemove",this._onMouseMove,this).off("mouseout",this._onMouseOut,this).off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),t.dragging.disable())},_onDragEnd:function(t){this._collectEditMarkers(t.target)},_onMouseMove:function(t){t.target.layer._renderer._container.style.cursor="crosshair"},_onMouseOut:function(t){t.target.layer._renderer._container.style.cursor=""},_onMapClick:function(t){if(this.moveend)this.moveend=!1;else{var e=this._map.mouseEventToLayerPoint(t.originalEvent),i=this._map.layerPointToLatLng(e);this.plotting?this._addVertex(i):(this.plotting=L.supermap.plotting.avoidRegion(0,SuperMap.Plot.SymbolType.AVOIDREGION,[],{style:this.options.avoidRegionStyle}),this._temportary.addFeatures(this.plotting),this._addVertex(i)),L.DomEvent.preventDefault(t.originalEvent)}},_collectEditMarkers:function(t){var e=[];if(t.symbolType===SuperMap.Plot.SymbolType.AVOIDREGION)for(var i in t.getLatLngs()){var o=new L.LatLng(t.getLatLngs()[i].lat,t.getLatLngs()[i].lng),n=L.supermap.plotting.editMarker(o,{icon:this.options.avoidIcon,nHandle:-1,tag:i});this._addToMapAndBindMarker(n),e.push(n),n.owner=t}this._editMarkers[t.uuid]=e},_removeMarkers:function(t){var e=this._editMarkers[t.uuid];for(var i in e)this._unbindMarkerEvents(e[i]),this._map.removeLayer(e[i]);delete this._editMarkers[t.uuid]},_unbindMarkerEvents:function(t){t.off("mousemove",this._moveMove,this),t.off("mouseout",this._moveOut,this),t.off("click",this._removePoint,this),t.off("drag",this.redraw,this),t.dragging.disable()},_addToMapAndBindMarker:function(t){t.addTo(this._map),t.on("mousemove",this._moveMove,this),t.on("mouseout",this._moveOut,this),t.on("click",this._removePoint,this),t.on("drag",this._dragPoint,this),t.dragging.enable()},_removePoint:function(t){if(this._editMode===SuperMap.Plot.EditMode.ADDCONTROLPOINT&&t.target.owner.isSelected){var e=this._editMarkers[t.target.owner.uuid],i=e.indexOf(t.target);this._map.removeLayer(e[i]),e.splice(i,1),t.target.owner.latLngs.splice(i,1),t.target.owner.redraw()}},_dragPoint:function(t){var e=t.target.owner;if(e.symbolType===SuperMap.Plot.SymbolType.AVOIDREGION){var i=this._editMarkers[e.uuid],o=SuperMap.Util.indexOf(i,t.target);e.getLatLngs()[o]=t.latlng,e._modifyPoint(),this.moveend=!0}},_moveMove:function(t){t.target._icon.style.cursor="pointer"},_moveOut:function(t){t.target._icon.style.cursor=""},_addVertex:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});this._markerGroup.addLayer(e),this._markers.push(e),this._latlngs.push(t),this.plotting.setLatLngs(this._latlngs);var i=this._markers.length;i>1&&this._markers[i-1].on("click",this._finishShape,this),i>2&&this._markers[i-2].off("click",this._finishShape,this)},_finishShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this);var t=this.plotting.clone();this._markerGroup.clearLayers(),this._markers=[],this._latlngs=[],this._temportary.removeFeatures(this.plotting),delete this.plotting,this.plotting=null,this._temportary.addFeatures(t),this.feature.addAvoidRegion(t),this._selectFeature(t),t.on("contextmenu",function(t){})},_onDragStart:function(t){var e=t.target,i=this._editMarkers[e.uuid];for(var o in i)i[o].setOpacity(0)},_onDrag:function(t){t.target.move(t.dLat,t.dLng)}},o(n,"_onDragEnd",function(t){var e=t.target;this._collectEditMarkers(e),this.moveend=!0}),o(n,"_onMouseMove",function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent),i=this._map.layerPointToLatLng(e);if(this.plotting){var o=L.Util.cloneLatLngs(this._latlngs);0===o.length?o.push(i):o[o.length-1].lat===i.lat&&o[o.length-1].lng===i.lng||o.push(i),this.plotting.setLatLngs(o)}L.DomEvent.preventDefault(t.originalEvent)}),n))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PlotControl=L.Evented.extend({options:{position:"topright"},initialize:function(t){L.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),o=t._controlCorners[i];return L.DomUtil.addClass(e,"leaflet-control"),-1!==i.indexOf("bottom")?o.insertBefore(e,o.firstChild):o.appendChild(e),this},remove:function(){return this._map?(L.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}});L.control=function(t){return new L.Control(t)},L.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,n){var s=i+t+" "+i+n;e[t+n]=L.DomUtil.create("div",s,o)}var e=this._controlCorners={},i="leaflet-",o=this._controlContainer=L.DomUtil.create("div",i+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){L.DomUtil.remove(this._controlContainer)}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.lineRelation=e.LineRelation=void 0;var o=i(1),n=i(15),s=(function(t){t&&t.__esModule}(i(28)),e.LineRelation=o.AlgoSymbol.extend({startAssociatedUuid:null,endAssociatedUuid:null,lineRelationType:SuperMap.Plot.LineRelation.ARROW,setLineRelationType:function(t){this.lineRelationType!==t&&(this.lineRelationType=t,this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues))},getLineRelationType:function(){return this.lineRelationType},initialize:function(t,e,i,n){this.libID=0,this.code=SuperMap.Plot.SymbolType.LINERELATION,this.symbolType=SuperMap.Plot.SymbolType.LINERELATION,this.symbolName="连接线",o.AlgoSymbol.prototype.initialize.call(this,t,e,i,n)},onAdd:function(t){o.AlgoSymbol.prototype.onAdd.call(this,t),this.setJoinLineToDotSymbol(this.startAssociatedUuid),this.setJoinLineToDotSymbol(this.endAssociatedUuid)},setStartFeature:function(t){null!==this.startAssociatedUuid&&(this.removeJoinLineFromDotSymbol(this.startAssociatedUuid),this.startAssociatedUuid=null);var e=this._map.getFeatureByUuid(t);null!=e&&e instanceof n.DotSymbol&&(null!==this.endAssociatedUuid&&t===this.endAssociatedUuid||(this.startAssociatedUuid=t,this.setJoinLineToDotSymbol(this.startAssociatedUuid),null!==this.endAssociatedUuid&&this.setFeatures(this.startAssociatedUuid,this.endAssociatedUuid)))},setEndFeature:function(t){null!==this.endAssociatedUuid&&(this.removeJoinLineFromDotSymbol(this.endAssociatedUuid),this.endAssociatedUuid="");var e=this._map.getFeatureByUuid(t);null!==e&&e instanceof n.DotSymbol&&(null!==this.startAssociatedUuid&&t===this.startAssociatedUuid||(this.endAssociatedUuid=t,this.setJoinLineToDotSymbol(this.endAssociatedUuid),null!==this.startAssociatedUuid&&this.setFeatures(this.startAssociatedUuid,this.endAssociatedUuid)))},setFeatures:function(t,e){var i=this._map.getFeatureByUuid(t),o=this._map.getFeatureByUuid(e);null!==i&&null!==o&&i instanceof n.DotSymbol&&o instanceof n.DotSymbol&&(this.startAssociatedUuid=t,this.endAssociatedUuid=e,this.setJoinLineToDotSymbol(this.startAssociatedUuid),this.setJoinLineToDotSymbol(this.endAssociatedUuid),this.redraw())},destroy:function(){this.startFeature=null,this.endFeature=null,o.AlgoSymbol.prototype.destroy.call(this)},_calculateParts:function(){var t=null,e=this._map.getFeatureByUuid(this.startAssociatedUuid);if(null!==e){var i=L.Util.latLngsToSuperMapPoints(e.latLngs);null!==i&&0<i.length&&(t=i[0])}var o=null,n=this._map.getFeatureByUuid(this.endAssociatedUuid);if(null!==n){var s=L.Util.latLngsToSuperMapPoints(n.latLngs);null!==s&&0<s.length&&(o=s[0])}if(this.superMapAlgoSymbol.controlPoints=L.Util.latLngsToSuperMapPoints(this.latLngs),this.superMapAlgoSymbol.lineRelationType=this.lineRelationType,null!==t&&(0===this.superMapAlgoSymbol.controlPoints.length?this.superMapAlgoSymbol.controlPoints.push(t):this.superMapAlgoSymbol.controlPoints[0]=t),null!==o){if(0===this.superMapAlgoSymbol.controlPoints.length)return;1===this.superMapAlgoSymbol.controlPoints.length?this.superMapAlgoSymbol.controlPoints.push(o):this.superMapAlgoSymbol.controlPoints[this.superMapAlgoSymbol.controlPoints.length-1]=o}this.superMapAlgoSymbol.calculateParts(),this.latLngs=L.Util.superMapPointsToLatLngs(this.superMapAlgoSymbol.controlPoints),this._transSymbolCellsToLayers(this.superMapAlgoSymbol.components)},move:function(t,e){if(null!==t&&null!==e){for(var i in this.getLatLngs())this.getLatLngs()[i].lat+=t,this.getLatLngs()[i].lng+=e;for(var o=0,n=this.avoidRegions.length;o<n;o++)this.avoidRegions[o].move(t,e);this.redraw()}},_modifyPoint:function(t,e){if(0===t){var i=this.getFeatureByPoint(e);null!==i?this.setStartFeature(i.uuid):this.setStartFeature(null)}else if(this.getLatLngs().length-1===t){var o=this.getFeatureByPoint(e);null!==o?this.setEndFeature(o.uuid):this.setEndFeature(null)}this.redraw()},getFeatureByPoint:function(t){var e=this._map.latLngToLayerPoint(t),i=this.layer.features;for(var o in i)if(i[o]instanceof n.DotSymbol&&this._map.latLngToLayerPoint(i[o].getLatLngs()[0]).distanceTo(e)<5)return i[o];return null},setJoinLineToDotSymbol:function(t){var e=this._map.getFeatureByUuid(t);if(!(null==e||!e instanceof n.DotSymbol)){for(var i=!1,o=0;o<e.joinLines.length;o++)if(this===e.joinLines[o]){i=!0;break}i||e.joinLines.push(this)}},removeJoinLineFromDotSymbol:function(t){if(t&&"[object String]"===Object.prototype.toString.call(t)){var e=this._map.getFeatureByUuid(t);if(!(null===e||!e instanceof n.DotSymbol))for(var i=0,o=e.joinLines.length;i<o;i++)if(this===e.joinLines[i]){e.joinLines.splice(i,1);break}}},_parseSymbolData:function(){o.AlgoSymbol.prototype._parseSymbolData.call(this),this.symbolData&&(this.symbolData.hasOwnProperty("startAssociatedUuid")&&(this.startAssociatedUuid=this.symbolData.startAssociatedUuid),this.symbolData.hasOwnProperty("endAssociatedUuid")&&(this.endAssociatedUuid=this.symbolData.endAssociatedUuid),this.symbolData.hasOwnProperty("lineRelationType")&&(this.lineRelationType=this.symbolData.lineRelationType))},_setSymbolData:function(){o.AlgoSymbol.prototype._setSymbolData.call(this),this.symbolData&&(this.symbolData.endAssociatedUuid=this.endAssociatedUuid,this.symbolData.lineRelationType=this.lineRelationType,this.symbolData.startAssociatedUuid=this.startAssociatedUuid)}})),a=e.lineRelation=function(t,e,i,o){return new s(t,e,i,o)};L.supermap.plotting.lineRelation=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.navyDeployment=e.NavyDeployment=void 0;var o=i(7),n=e.NavyDeployment=o.GroupObject.extend({colNum:null,space:null,initialize:function(t,e,i,n){o.GroupObject.prototype.initialize.call(this,t,e,i,n),this.libID=0,this.code=SuperMap.Plot.SymbolType.NAVYDEPLOYMENT,this.symbolType=SuperMap.Plot.SymbolType.NAVYDEPLOYMENT,this.symbolName="海军兵力部署",null===this.colNum&&(this.colNum=1),null===this.space&&(this.space=10),null===this.scaleByMap&&(this.scaleByMap=!0)},destroy:function(){this.space=null,this.colNum=null,o.GroupObject.prototype.destroy.call(this)},redraw:function(){"none"!==this.style.display?this._redrawComponents():this._clearComponents()},_calculateParts:function(){var t=this.layer.getFeatureByUuid(this.associatedUuid);if(null!==t&&t.symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL&&0!==t.latLngs.length){for(var e=!1,i=0;i<t.deployments.length;i++)if(this===t.deployments[i]){e=!0;break}if(e||t.deployments.push(this),0!==this.subObjects.length&&0===this.components.length)for(var i=0,o=this.subObjects.length;i<o;i++)this.subObjects[i].ownerGroup=this,this.subObjects[i].enableEdit=!0,this._addComponents(this.subObjects[i]);if(0===this.components.length){for(var n=L.Util.cloneLatLngs(t.latLngs[0]),s=this._map.latLngToLayerPoint(L.latLng(n[0].lat,n[0].lng)),a=this._transitionPoint(new SuperMap.Geometry.Point(this.space,0),s),l=Math.abs(a.lng-n[0].lng),r=new SuperMap.Geometry.Point(0,0),u=this._transitionPoint(r,s),p=new SuperMap.Geometry.Point(100,100),h=this._transitionPoint(p,s),c=new L.LatLngBounds(L.latLng(u.lat,u.lng),L.latLng(h.lat,h.lng)),y=Math.ceil(this._getSubSymbolCount(this.subSymbols.length-1)/this.colNum),g=Math.abs(c.getNorth()-c.getSouth())*y+l*(y+1),d=L.latLng(n[0].lat+g/2,n[0].lng-5*l),i=0;i<this.subSymbols.length;i++)for(var f=0;f<this.subSymbols[i].totalNum;f++){var S=this._getSubSymbolCount(i-1)+f+1,P=Math.ceil(S/y),m=S-y*(P-1);if(1!==P&&1===m){var b=this._calculateBounds();d.lng=b.getWest()}this.subSymbols[i].symbolData.textContent=this.subSymbols[i].textContent;for(var M=d.lng-(l+Math.abs(c.getWest()-c.getEast())/3),v=d.lat-m*(Math.abs(c.getNorth()-c.getSouth())+l),_=0,T=0,x=0,O=0,A=0;A<this.subSymbols[i].symbolData.innerCells.length;A++)for(var w=0;w<this.subSymbols[i].symbolData.innerCells[A].positionPoints.length;w++)_<=this.subSymbols[i].symbolData.innerCells[A].positionPoints[w].x&&(_=this.subSymbols[i].symbolData.innerCells[A].positionPoints[w].x),T>=this.subSymbols[i].symbolData.innerCells[A].positionPoints[w].x&&(T=this.subSymbols[i].symbolData.innerCells[A].positionPoints[w].x),x<=this.subSymbols[i].symbolData.innerCells[A].positionPoints[w].y&&(x=this.subSymbols[i].symbolData.innerCells[A].positionPoints[w].y),O>=this.subSymbols[i].symbolData.innerCells[A].positionPoints[w].y&&(O=this.subSymbols[i].symbolData.innerCells[A].positionPoints[w].y);var D=L.latLng(v,M),E=this._map.latLngToLayerPoint(L.latLng(v,M)),I=new SuperMap.Geometry.Point(_,(x+O)/2),N=new SuperMap.Geometry.Point(I.x,I.y),C=new SuperMap.Geometry.Point(this.subSymbols[i].symbolData.anchorPoint.x,this.subSymbols[i].symbolData.anchorPoint.y),R=this._transitionPoint(N,E),U=this._transitionPoint(C,E);D.lat+=U.lat-R.lat,D.lng+=U.lng-R.lng;var G=this.subSymbols[i].symbolData.libID,B=this.subSymbols[i].symbolData.code;this.subSymbols[i].symbolData.annotationPosition=6;var F=SuperMap.Util.cloneObject(this.subSymbols[i].symbolData),k=L.supermap.plotting.PlottingObject.createSymbol(G,B,D,{serverUrl:this.serverUrl,symbolData:F,scaleByMap:!0,minScale:0,maxScale:2048,space:0});k.enableEdit=!0,k.ownerGroup=this,this._addComponents(k),this.bounds=this._calculateBounds(),this.subObjects.push(k)}if(this.bounds=new L.LatLngBounds,this.bounds=this._calculateBounds(),null!==this.textContent&&0!==this.textContent.length){var j=L.latLng(n[0].lat+g/2+l,n[0].lng-5*l),z=L.supermap.plotting.PlottingObject.createSymbol(0,34,[j],{textContent:this.textContent,serverUrl:this.serverUrl});z.style.labelAlign="rb",z.style.scaleByMap=!0,z.enableEdit=!0,z.ownerGroup=this,this._addComponents(z),this.bounds.extend(z.getBounds()),this.subObjects.push(z)}var Y=new L.LatLngBounds(L.latLng(this.bounds.getSouth()-l,this.bounds.getWest()-l),L.latLng(this.bounds.getNorth()+l,this.bounds.getEast()+l)),V=[];V.push(L.latLng(Y.getNorth(),Y.getWest())),V.push(L.latLng(Y.getSouth(),Y.getEast()));var W=L.latLng(n[0].lat,n[0].lng);W.isFixedPos=!0,V.push(W);var H=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.ANNOFRAMESYMBOL,V,{serverUrl:this.serverUrl});H.enableEdit=!0,H.ownerGroup=this,this.subObjects.splice(0,0,H),this._addComponents(H)}}},_reView:function(){for(var t in this.subObjects)this.subObjects[t].layer&&this.subObjects[t]._reView();this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)},move:function(t,e){for(var i in this.subObjects)this.subObjects[i].move(t,e);this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)},_resize:function(t,e){for(var i in this.subObjects)this.subObjects[i]._resize(t,this.anchorPoint)},_transitionPoint:function(t,e){var i=e.x+t.x*(96/254),o=e.y-t.y*(96/254);return this._map.layerPointToLatLng(L.point(i,o))},_getSubSymbolCount:function(t){var e=0;if(t<0)return e;t>this.subSymbols.length-1&&(t=this.subSymbols.length-1);for(var i=0;i<=t;i++)e+=this.subSymbols[t].totalNum;return e},_calculateBounds:function(){this.bounds=new L.LatLngBounds;for(var t in this.components)this.components[t].symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL&&this.bounds.extend(this.components[t].getBoundsWithText());return this.bounds},_parseSymbolData:function(){o.GroupObject.prototype._parseSymbolData.call(this),this.symbolData&&(this.colNum=this.symbolData.colNum,this.speceDis=this.symbolData.speceDis,this.subSymbols=this.symbolData.subSymbols)},_setSymbolData:function(){o.GroupObject.prototype._setSymbolData.call(this),this.symbolData&&(this.symbolData.colNum=this.colNum,this.symbolData.speceDis=this.speceDis,this.symbolData.subSymbols=this.subSymbols)}}),s=e.navyDeployment=function(t,e,i,o){return new n(t,e,i,o)};L.supermap.plotting.navyDeployment=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pathText=e.PathText=void 0;var o=i(1),n=e.PathText=o.AlgoSymbol.extend({relLineText:0,showPathLine:!0,showPathLineArrow:!1,isCurve:!1,isAvoid:!1,textToLineDistance:0,getRelLineText:function(){return this.relLineText},setRelLineText:function(t){this.relLineText!==t&&(this.relLineText=t,this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues))},getShowPathLine:function(){return this.showPathLine},setShowPathLine:function(t){this.showPathLine!==t&&(this.showPathLine=t,this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues))},getShowPathLineArrow:function(){return this.showPathLineArrow},setShowPathLineArrow:function(t){this.showPathLineArrow!==t&&(this.showPathLineArrow=t,this.showPathLine&&(this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)))},getIsCurveLine:function(){return this.isCurve},setCurveLine:function(t){this.isCurve!==t&&(this.isCurve=t,this.showPathLine&&(this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)))},getIsAvoidLine:function(){return this.isAvoid},setAvoidLine:function(t){this.isAvoid!==t&&(this.isAvoid=t,this.relLineText===SuperMap.Plot.RelLineText.ONLINE&&this.showPathLine&&(this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)))},getSpace:function(){return this.textToLineDistance},setSpace:function(t){this.textToLineDistance!==t&&(this.textToLineDistance=t,this.relLineText!==SuperMap.Plot.RelLineText.ONLINE&&(this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)))},initialize:function(t,e,i,n){this.code=SuperMap.Plot.SymbolType.PATHTEXT,this.libID=0,this.symbolType=SuperMap.Plot.SymbolType.PATHTEXT,this.symbolName="沿线注记",this.minEditPts=2,this.maxEditPts=9999,o.AlgoSymbol.prototype.initialize.call(this,t,e,i,n)},_parseSymbolData:function(){o.AlgoSymbol.prototype._parseSymbolData.call(this),this.symbolData&&(this.symbolData.hasOwnProperty("isAvoid")&&(this.isAvoid=this.symbolData.isAvoid),this.symbolData.hasOwnProperty("isCurve")&&(this.isCurve=this.symbolData.isCurve),this.symbolData.hasOwnProperty("relLineText")&&(this.relLineText=this.symbolData.relLineText),this.symbolData.hasOwnProperty("showPathLine")&&(this.showPathLine=this.symbolData.showPathLine),this.symbolData.hasOwnProperty("textToLineDistance")&&(this.textToLineDistance=this.symbolData.textToLineDistance),this.symbolData.hasOwnProperty("showPathLineArrow")&&(this.showPathLineArrow=this.symbolData.showPathLineArrow))},_setSymbolData:function(){o.AlgoSymbol.prototype._setSymbolData.call(this),this.symbolData&&(this.symbolData.isAvoid=this.isAvoid,this.symbolData.isCurve=this.isCurve,this.symbolData.relLineText=this.relLineText,this.symbolData.showPathLine=this.showPathLine,this.symbolData.textToLineDistance=this.textToLineDistance,this.symbolData.showPathLineArrow=this.showPathLineArrow)},_reView:function(){this.fromZoom!==this._map.getZoom()&&(this.redraw(),this.fromZoom=this._map.getZoom())},_setDefaultOptions:function(t){o.AlgoSymbol.prototype._setDefaultOptions.call(this,t),t.relLineText=this.relLineText,t.showPathLine=this.showPathLine,t.showPathLineArrow=this.showPathLineArrow,t.isCurve=this.isCurve,t.isAvoid=this.isAvoid,t.textToLineDistance=this.textToLineDistance},_sendDataToAlgo:function(){o.AlgoSymbol.prototype._sendDataToAlgo.call(this),this.superMapAlgoSymbol.relLineText=this.relLineText,this.superMapAlgoSymbol.showPathLine=this.showPathLine,this.superMapAlgoSymbol.showPathLineArrow=this.showPathLineArrow,this.superMapAlgoSymbol.isCurve=this.isCurve,this.superMapAlgoSymbol.isAvoid=this.isAvoid,this.superMapAlgoSymbol.textToLineDistance=this.textToLineDistance,this.superMapAlgoSymbol.style=this.style}}),s=e.pathText=function(t,e,i,o){return new n(t,e,i,o)};L.supermap.plotting.pathText=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=e.PointImage=L.Path.extend({options:{externalGraphic:"",graphicWidth:0,graphicHeight:0,graphicOpacity:1,graphicXOffset:void 0,graphicYOffset:void 0,rotation:0,graphicTitle:"",interactive:!0},_imageNode:null,initialize:function(t,e){L.setOptions(this,e),this._latlng=L.latLng(t[0])},onRemove:function(){this._imageNode&&this._imageNode.parentNode&&(this._renderer._rootGroup.removeChild(this._imageNode),delete this._imageNode,this._imageNode=null),this._imageNode&&(delete this._imageNode,this._imageNode=null),L.Path.prototype.onRemove.call(this)},setLatLngs:function(t){return this._latlng=L.latLng(t[0]),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLngs:function(){return[this._latlng]},getBounds:function(){return this._updateBounds()},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},getPxBounds:function(){var t=void 0!=this.options.graphicXOffset?this.options.graphicXOffset:-.5*this.options.graphicWidth,e=void 0!=this.options.graphicYOffset?this.options.graphicYOffset:-.5*this.options.graphicHeight,i=this._point.x+t,o=this._point.y+e,n=i+this.options.graphicWidth,s=o+this.options.graphicHeight,a=new L.Bounds;if(this.options.rotation&&0!==this.options.rotation){var l=[];l.push(L.point(i,o)),l.push(L.point(i,s)),l.push(L.point(n,o)),l.push(L.point(n,s));for(var r=this.options.rotation*(Math.PI/180),u=0;u<l.length;u++)SuperMap.Plot.PlottingUtil.rotateAngle(this._point,r,l[u]),a.extend(l[u])}else a=L.bounds(L.point(i,o),L.point(n,s));return a},_updateBounds:function(){this._pxBounds=this.getPxBounds();var t=this._map.layerPointToLatLng(this._pxBounds.min),e=this._map.layerPointToLatLng(this._pxBounds.max);this._bounds=L.latLngBounds(t,e)},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateImage(this)},_empty:function(){return this.options.externalGraphic&&!this._renderer._bounds.intersects(this._pxBounds)}});L.supermap.plotting.pointImage=function(t,e){return new o(t,e)},L.supermap.plotting.PointImage=o},function(t,e,i){"use strict";SuperMap.Plot.GOAnimationType={ANIMATION_UNKNOWN:-1,ANIMATION_WAY:0,ANIMATION_BLINK:1,ANIMATION_ATTRIBUTE:2,ANIMATION_SHOW:3,ANIMATION_ROTATE:4,ANIMATION_SCALE:5,ANIMATION_GROW:6},SuperMap.Plot.BlinkAnimationBlinkStyle={Blink_Frequency:0,Blink_Number:1},SuperMap.Plot.BlinkAnimationReplaceStyle={Replace_NoColor:0,Replace_Color:1},SuperMap.Plot.RotateDirection={ClockWise:0,AntiClockWise:1},SuperMap.Plot.WayPathType={POLYLINE:0,CURVE:1},SuperMap.Plot.GOAnimationState={UNKNOWN:0,PLAYING:1,PAUSE:2,STOP:3,RESET:4}},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},r=function(t){function e(t,i){o(this,e);var s=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return s.CLASS_NAME="SuperMap.PlotCommonServiceBase",s}return s(e,SuperMap.CommonServiceBase),a(e,[{key:"destroy",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"_commit",value:function(t){"POST"!==t.method&&"PUT"!==t.method||(t.params&&(t.url=SuperMap.Util.urlAppend(t.url,SuperMap.Util.getParameterString(t.params||{}))),t.params=t.data),SuperMap.FetchRequest.commit(t.method,t.url,t.params,{headers:t.headers,withCredentials:t.withCredentials,timeout:t.async?0:null,proxy:t.proxy}).then(function(t){return t.text()}).then(function(e){var i=(new SuperMap.Format.JSON).read(e);i||(i={error:e}),i.error?(t.scope?SuperMap.Function.bind(t.failure,t.scope):t.failure)(i.error):(i.succeed=void 0==i.succeed||i.succeed,(t.scope?SuperMap.Function.bind(t.success,t.scope):t.success)(i))})}}]),e}();e.default=r,SuperMap.PlotCommonServiceBase=r},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=function(){function t(e,i,n,s,a){o(this,t),this.x=null,this.y=null,this.z=null,this.number=null,this.time=null,this.CLASS_NAME="SuperMap.Plot.OrbitPoint",this.x=parseFloat(e),this.y=parseFloat(i),(n||0==n)&&(this.z=parseFloat(n)),s&&(this.number=s),a&&(this.time=a)}return n(t,[{key:"destroy",value:function(){this.x=null,this.y=null,this.z=null,this.index=null,this.time=null}},{key:"clone",value:function(t){return null==t&&(t=new SuperMap.Plot.OrbitPoint(this.x,this.y,this.z)),SuperMap.Util.applyDefaults(t,this),t}}]),t}();e.default=s,SuperMap.Plot.OrbitPoint=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=function(){function t(e){o(this,t),this.id=null,this.x=null,this.y=null,this.z=null,this.type=null,this.name=null,this.rotate=0,this.towardNodes=null,this.style=null,this.CLASS_NAME="SuperMap.Plot.RouteNode",SuperMap.Util.extend(this,e),null===this.id&&(this.id=SuperMap.PlotUtil.generateUuid()),null===this.rotate&&(this.rotate=0),null===this.towardNodes&&(this.towardNodes=[]),null===this.style&&(this.style={})}return n(t,[{key:"destroy",value:function(){this.type=null,this.position=null,this.name=null,this.id=null,this.rotate=null,this.towardNodes&&null!==this.towardNodes||(this.towardNodes=null);for(var t=0;t<this.towardNodes.length;t++)this.towardNodes[t].destroy();this.towardNodes=null}},{key:"clone",value:function(){var e=new t({id:this.id,type:this.type,name:this.name,rotate:this.rotate,towardNodes:this.towardNodes});return e.positionPoint=this.positionPoint.clone(),e.style={},e.style=SuperMap.Util.copyAttributes(e.style,this.style),e}}]),t}();e.default=s,SuperMap.Plot.RouteNode=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=(function(t){t&&t.__esModule}(i(11)),function(){function t(e,i,n){o(this,t),this.libID=null,this.code=null,this.symbolData=null,this.textContent=null,this.totalNum=null,this.CLASS_NAME="SuperMap.Plot.SubSymbol",e&&(this.libID=e),i&&(this.code=i),n&&SuperMap.Util.extend(this,n)}return n(t,[{key:"destroy",value:function(){this.libID=null,this.code=null,this.symbolData=null,this.totalNum=null}},{key:"clone",value:function(){var t=new SuperMap.Plot.SubSymbol(this.libID,this.code);return t.symbolData={},t.symbolData=SuperMap.Util.copyAttributes(t.symbolData,this.symbolData),t.textContent=this.textContent,t.totalNum=this.totalNum,t}}]),t}());e.default=s,SuperMap.Plot.SubSymbol=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=function(){function t(e,i,n,s){o(this,t),this.textContent=null,this.textPosition=null,this.offsetX=null,this.offsetY=null,this.style=null,this.CLASS_NAME="SuperMap.Plot.SymbolText",this.textContent=e,this.textPosition=i,this.style=n,s&&SuperMap.Util.extend(this,s),void 0!==this.textContent&&null!==this.textContent||(this.textContent=""),void 0!==this.textPosition&&null!==this.textPosition||(this.textPosition=0),null===this.offsetX&&(this.offsetX=0),null===this.offsetY&&(this.offsetY=0)}return n(t,[{key:"destroy",value:function(){this.textContent=null,this.textPosition=null,this.offsetX=null,this.offsetY=null}}]),t}();e.default=s,SuperMap.Plot.SymbolText=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=function(){function t(e,i){o(this,t),this.startOrbitPoint=null,this.endOrbitPoint=null,this.CLASS_NAME="SuperMap.Plot.TimeWindowParameter",this.startOrbitPoint=e,this.endOrbitPoint=i}return n(t,[{key:"destroy",value:function(){this.startOrbitPoint=null,this.endOrbitPoint=null,this.type=null}}]),t}();e.default=s,SuperMap.Plot.TimeWindowParameter=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=function(){function t(e){o(this,t),this.routeNodeId=null,this.relLineText=null,this.index=null,this.textContent=null,this.offsetX=null,this.offsetY=null,this.style={fontSize:12,fontFamily:"Microsoft YaHei"},this.CLASS_NAME="SuperMap.Plot.TowardNode",SuperMap.Util.extend(this,e),null===this.relLineText&&(this.relLineText=SuperMap.Plot.RelLineText.ONLEFTLINE),null===this.index&&(this.index=0)}return n(t,[{key:"destroy",value:function(){this.routeNodeId=null,this.relLineText=null,this.textContent=null,this.style=null}},{key:"clone",value:function(){return new t({routeNodeId:this.routeNodeId,relLineText:this.relLineText,textContent:this.textContent,style:SuperMap.Util.cloneObject(this.style)})}}]),t}();e.default=s,SuperMap.Plot.TowardNode=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.AnalysisSymbol=SuperMap.Plot.AnalysisSymbol=SuperMap.Plot.AnalysisSymbol||{};SuperMap.Plot.AnalysisSymbol.analysisSymbolCells=function(t){var e=[];if(t&&t.innerCells){var i=t.innerCells;if(0!==i.length)for(var o=0,n=i.length;o<n;o++)e.push(function(t){var e={};if(e.positionPoints=[],t){if(e.type=t.type,e.surroundLineFlag=t.surroundLineFlag,e.textContent=t.textContent,e.style=SuperMap.Plot.AnalysisSymbol.getStyle(t),null!==t.positionPoints)for(var i=t.positionPoints,o=0,n=i.length;o<n;o++){var s=new SuperMap.Geometry.Point(i[o].x,i[o].y);e.positionPoints.push(s)}if(e.style.lineColorLimit=t.lineColorLimit,e.style.lineTypeLimit=t.lineTypeLimit,e.style.lineWidthLimit=t.lineWidthLimit,e.style.fillLimit=t.fillLimit,e.style.fillColorLimit=t.fillColorLimit,e.style.fontColorLimit=t.fontColorLimit,e.style.surroundLineLimit=t.surroundLineLimit,e.style.surroundLineFlag=e.surroundLineFlag,34==t.type?e.style.fontColorLimit=!0:e.style.fontColorLimit=t.fontColorLimit,e.type===SuperMap.Plot.SymbolType.RECTANGLESYMBOL){var a=e.positionPoints[0],l=e.positionPoints[1],r=a.clone(),u=new SuperMap.Geometry.Point(l.x,a.y),p=l.clone(),h=new SuperMap.Geometry.Point(a.x,l.y);e.positionPoints=[],e.positionPoints.push(r),e.positionPoints.push(u),e.positionPoints.push(p),e.positionPoints.push(h),e.type=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL}e.type===SuperMap.Plot.SymbolType.TEXTSYMBOL&&(e.style.fontSizeLimit=!0)}return e}(i[o]))}return e},SuperMap.Plot.AnalysisSymbol.getStyle=function(t){var e={};return 1===t.style.fillSymbolID?e.fill=!1:e.fill=!0,void 0!==t.style.fillGradientMode&&null!==t.style.fillGradientMode&&(1===t.style.fillGradientMode?e.fillGradientMode="LINEAR":2===t.style.fillGradientMode?e.fillGradientMode="RADIAL":"LINEAR"!==t.style.fillGradientMode&&"RADIAL"!==t.style.fillGradientMode&&(e.fillGradientMode="NONE")),void 0!==t.style.fillForeColor&&(e.fillColor=SuperMap.PlotUtil.colorRGBToString(t.style.fillForeColor),e.fillOpacity=(t.style.fillForeColor.alpha/255).toFixed(2)),void 0!==t.style.fillBackColor&&(e.fillBackColor=SuperMap.PlotUtil.colorRGBToString(t.style.fillBackColor),e.fillBackOpacity=(t.style.fillBackColor.alpha/255).toFixed(2)),void 0!==t.style.lineColor&&(e.color=SuperMap.PlotUtil.colorRGBToString(t.style.lineColor),e.opacity=(t.style.lineColor.alpha/255).toFixed(2)),void 0!==t.style.lineWidth&&(e.weight=Math.ceil(96*t.style.lineWidth/25.4)),e.lineSymbolID=t.style.lineSymbolID,e.lineSymbolID||(e.dashArray=t.style.dashArray),t.textStyle2D&&null!==t.textStyle2D?(void 0!==t.textStyle2D.fontName&&(e.fontFamily=t.textStyle2D.fontName),void 0!==t.textStyle2D.fontHeight&&(e.fontSize=Math.round(2*t.textStyle2D.fontHeight)),void 0!==t.textStyle2D.foreColor&&(e.fontColor=SuperMap.PlotUtil.colorRGBToString(t.textStyle2D.foreColor)),void 0!==t.textStyle2D.align&&(e.labelAlign=SuperMap.PlotUtil.getAlign(t.textStyle2D.align)),void 0!==t.textStyle2D.rotation&&(e.labelRotation=-t.textStyle2D.rotation),e.labelXOffset=0,e.labelYOffset=0):t.textStyle&&null!==t.textStyle&&(void 0!==t.textStyle.fontName&&(e.fontFamily=t.textStyle.fontName),void 0!==t.textStyle.fontHeight&&(e.fontSize=t.textStyle.fontHeight),void 0!==t.textStyle.foreColor&&(e.fontColor=SuperMap.PlotUtil.colorRGBToString(t.textStyle.foreColor)),void 0!==t.textStyle.align&&(e.labelAlign=SuperMap.PlotUtil.getAlign(t.textStyle.align)),void 0!==t.textStyle.rotation&&(e.labelRotation=-t.textStyle.rotation),e.labelXOffset=0,e.labelYOffset=0),void 0!==t.style.fontOpacity&&(e.fontOpacity=t.style.fontOpacity),void 0!==t.style.fontStroke?e.fontStroke=t.style.fontStroke:t.textStyle2D&&void 0!==t.textStyle2D.outline&&(e.fontStroke=t.textStyle2D.outline),void 0!==t.style.fontStrokeColor?e.fontStrokeColor=t.style.fontStrokeColor:t.textStyle2D&&void 0!==t.textStyle2D.backColor&&t.textStyle2D&&null!==t.textStyle2D.backColor&&(e.fontStrokeColor=SuperMap.PlotUtil.colorRGBToString(t.textStyle2D.backColor)),void 0!==t.style.fontStrokeWidth&&(e.fontStrokeWidth=t.style.fontStrokeWidth),void 0!==t.style.fontBackground&&(e.fontBackground=t.style.fontBackground),void 0!==t.style.fontBackgroundColor&&(e.fontBackgroundColor=t.style.fontBackgroundColor),void 0!==t.style.fontShadow&&(e.fontShadow=t.style.fontShadow),void 0!==t.style.fontShadowColor&&(e.fontShadowColor=t.style.fontShadowColor),void 0!==t.style.fontShadowOffsetX&&(e.fontShadowOffsetX=t.style.fontShadowOffsetX),void 0!==t.style.fontShadowOffsetY&&(e.fontShadowOffsetY=t.style.fontShadowOffsetY),void 0!==t.style.fontSpace&&(e.fontSpace=t.style.fontSpace),void 0!==t.style.fontPercent&&(e.fontPercent=t.style.fontPercent),void 0!==t.style.fontWeight&&(e.fontWeight=t.style.fontWeight),void 0!==t.style.fontStyle&&(e.fontStyle=t.style.fontStyle),void 0!==t.surroundLineColor&&null!==t.surroundLineColor&&(e.surroundLineColor=SuperMap.PlotUtil.colorRGBToString(t.surroundLineColor),e.surroundLineColorOpacity=(t.surroundLineColor.alpha/255).toFixed(2)),void 0!==t.surroundLineWidth2D&&null!==t.surroundLineWidth2D?e.surroundLineWidth=Math.round(96*t.surroundLineWidth2D/25.4):void 0!==t.surroundLineWidth&&null!==t.surroundLineWidth&&(e.surroundLineWidth=Math.round(96*t.surroundLineWidth/25.4)),!1===t.visibility?e.display="none":e.display="display",e},SuperMap.Plot.AnalysisSymbol.setStyle=function(t,e){if(null!==e)return e.style||(e.style={}),e.textStyle2D||(e.textStyle2D={}),!1===t.fill?e.style.fillSymbolID=1:e.style.fillSymbolID=0,t.fillGradientMode&&(e.style.fillGradientMode=t.fillGradientMode),t.fillGradientMode&&("LINEAR"===t.fillGradientMode?e.style.fillGradientMode=1:"RADIAL"===t.fillGradientMode?e.style.fillGradientMode=2:e.style.fillGradientMode=0),t.fillColor&&(e.style.fillForeColor=SuperMap.PlotUtil.colorStringToRGB(t.fillColor)),t.fillOpacity&&(e.style.fillForeColor.alpha=255*t.fillOpacity),t.fillBackColor&&(e.style.fillBackColor=SuperMap.PlotUtil.colorStringToRGB(t.fillBackColor)),t.fillBackOpacity&&(e.style.fillBackColor.alpha=255*t.fillBackOpacity),t.color&&(e.style.lineColor=SuperMap.PlotUtil.colorStringToRGB(t.color)),t.opacity&&(e.style.lineColor.alpha=255*t.opacity),t.weight&&(e.style.lineWidth=25.4*t.weight/96),e.style.lineSymbolID=t.lineSymbolID,e.style.lineSymbolID||(e.style.dashArray=t.dashArray),t.fontFamily&&(e.textStyle2D&&null!=e.textStyle2D?e.textStyle2D.fontName=t.fontFamily:e.textStyle&&null!=e.textStyle&&(e.textStyle.fontName=t.fontFamily)),t.fontSize&&(e.textStyle2D&&null!=e.textStyle2D?e.textStyle2D.fontHeight=parseFloat(t.fontSize)/2:e.textStyle&&null!=e.textStyle&&(e.textStyle.fontHeight=t.fontSize)),t.fontColor&&(e.textStyle2D&&null!=e.textStyle2D?e.textStyle2D.foreColor=SuperMap.PlotUtil.colorStringToRGB(t.fontColor):e.textStyle&&null!=e.textStyle&&(e.textStyle.foreColor=SuperMap.PlotUtil.colorStringToRGB(t.fontColor))),t.labelRotation&&(e.textStyle2D&&null!=e.textStyle2D?e.textStyle2D.rotation=-t.labelRotation:e.textStyle&&null!=e.textStyle&&(e.textStyle.rotation=-t.labelRotation)),void 0!==t.fontOpacity&&(e.style.fontOpacity=t.fontOpacity),void 0!==t.fontStroke&&(e.textStyle2D.outline=t.fontStroke),void 0!==t.fontStrokeColor&&(e.textStyle2D.backColor=SuperMap.PlotUtil.colorStringToRGB(t.fontStrokeColor)),void 0!==t.fontStrokeWidth&&(e.style.fontStrokeWidth=t.fontStrokeWidth),void 0!==t.fontBackground&&(e.style.fontBackground=t.fontBackground),void 0!==t.fontBackgroundColor&&(e.style.fontBackgroundColor=t.fontBackgroundColor),void 0!==t.fontShadow&&(e.style.fontShadow=t.fontShadow),void 0!==t.fontShadowColor&&(e.style.fontShadowColor=t.fontShadowColor),void 0!==t.fontShadowOffsetX&&(e.style.fontShadowOffsetX=t.fontShadowOffsetX),void 0!==t.fontShadowOffsetY&&(e.style.fontShadowOffsetY=t.fontShadowOffsetY),void 0!==t.fontSpace&&(e.style.fontSpace=t.fontSpace),void 0!==t.fontPercent&&(e.style.fontPercent=t.fontPercent),void 0!==t.fontWeight&&(e.style.fontWeight=t.fontWeight),void 0!==t.fontStyle&&(e.style.fontStyle=t.fontStyle),t.surroundLineColor&&(e.surroundLineColor=SuperMap.PlotUtil.colorStringToRGB(t.surroundLineColor)),t.surroundLineColorOpacity&&(e.surroundLineColor.alpha=255*t.surroundLineColorOpacity),t.surroundLineWidth&&(e.surroundLineWidth2D=25.4*t.surroundLineWidth/96),void 0!==t.labelAlign&&("lt"===t.labelAlign?e.textStyle2D&&null!=e.textStyle2D?e.textStyle2D.align="TOPLEFT":e.textStyle&&null!=e.textStyle&&(e.textStyle.align="TOPLEFT"):"ct"===t.labelAlign?e.textStyle2D&&null!=e.textStyle2D?e.textStyle2D.align="TOPCENTER":e.textStyle&&null!=e.textStyle&&(e.textStyle.align="TOPCENTER"):"rt"===t.labelAlign?e.textStyle2D&&null!=e.textStyle2D?e.textStyle2D.align="TOPRIGHT":e.textStyle&&null!=e.textStyle&&(e.textStyle.align="TOPRIGHT"):"lb"===t.labelAlign?e.textStyle2D&&null!=e.textStyle2D?e.textStyle2D.align="BOTTOMLEFT":e.textStyle&&null!=e.textStyle&&(e.textStyle.align="BOTTOMLEFT"):"cb"===t.labelAlign?e.textStyle2D&&null!=e.textStyle2D?e.textStyle2D.align="BOTTOMCENTER":e.textStyle&&null!=e.textStyle&&(e.textStyle.align="BOTTOMCENTER"):"rb"===t.labelAlign?e.textStyle2D&&null!=e.textStyle2D?e.textStyle2D.align="BOTTOMRIGHT":e.textStyle&&null!=e.textStyle&&(e.textStyle.align="BOTTOMRIGHT"):"lm"===t.labelAlign?e.textStyle2D&&null!=e.textStyle2D?e.textStyle2D.align="MIDDLELEFT":e.textStyle&&null!=e.textStyle&&(e.textStyle.align="MIDDLELEFT"):"cm"===t.labelAlign?e.textStyle2D&&null!=e.textStyle2D?e.textStyle2D.align="MIDDLECENTER":e.textStyle&&null!=e.textStyle&&(e.textStyle.align="MIDDLECENTER"):"rm"===t.labelAlign&&(e.textStyle2D&&null!=e.textStyle2D?e.textStyle2D.align="MIDDLERIGHT":e.textStyle&&null!=e.textStyle&&(e.textStyle.align="MIDDLERIGHT"))),t.display&&"none"===t.display?e.visibility=!1:e.visibility=!0,t},SuperMap.Plot.AnalysisSymbol.mergeDefaultStyleToLayer=function(t){var e=L.supermap.plotting.getControl().getDefaultStyle(),i=t.style;e&&!0===e.defaultFlag&&!1===t.isEdit&&(i.color=e.lineColor,i.weight=e.lineWidth,i.opacity=e.lineOpacity,0===parseInt(e.lineType)||1===parseInt(e.lineType)||2===parseInt(e.lineType)||3===parseInt(e.lineType)||4===parseInt(e.lineType)?i.lineSymbolID=parseInt(e.lineType):i.dashArray=e.lineType.toString(),i.strokeLinecap=e.lineCap,i.fill=e.fill,i.fillColor=e.fillColor,i.fillOpacity=e.fillOpacity,i.fontColor=e.fontColor,i.fontOpacity=e.fontOpacity,i.fontSize=e.fontSize,i.fontFamily=e.fontFamily,i.fontWeight=e.fontWeight,i.fontStyle=e.fontStyle,i.fontStroke=e.fontStroke,i.fontStrokeColor=e.fontStrokeColor,i.fontStrokeWidth=e.fontStrokeWidth,i.fontBackground=e.fontBackground,i.fontBackgroundColor=e.fontBackgroundColor,i.fontShadow=e.fontShadow,i.fontShadowColor=e.fontShadowColor,i.fontShadowOffsetX=e.fontShadowOffsetX,i.fontShadowOffsetY=e.fontShadowOffsetY,i.fontSpace=e.fontSpace,i.fontPercent=e.fontPercent)},SuperMap.Plot.AnalysisSymbol.mergeSymbolDataAndServerData=function(t,e){t.hasOwnProperty("algoMinEditPts")||(t.algoMinEditPts=e.algoMinEditPts),t.hasOwnProperty("algoMaxEditPts")||(t.algoMaxEditPts=e.algoMaxEditPts),t.hasOwnProperty("innerCells")||(t.innerCells=SuperMap.Util.cloneObject(e.innerCells)),t.hasOwnProperty("symbolRanks")||(t.symbolRanks=SuperMap.Util.cloneObject(e.symbolRanks)),t.hasOwnProperty("symbolSizeInLib")||(t.symbolSizeInLib=SuperMap.Util.cloneObject(e.symbolSize)),t.hasOwnProperty("middleMarkExist")||(t.middleMarkExist=SuperMap.Util.cloneObject(e.middleMarkExist)),t.hasOwnProperty("middleMarkBounds")||(t.middleMarkBounds=SuperMap.Util.cloneObject(e.middleMarkBounds)),t.hasOwnProperty("anchorPoint")||(t.anchorPoint=SuperMap.Util.cloneObject(e.anchorPoint))},t.exports=SuperMap.Plot.AnalysisSymbol},function(t,e,i){"use strict";SuperMap.Plot.Event=SuperMap.Plot.Event||{},SuperMap.Plot.Event.beforefeatureadded="beforefeatureadded",SuperMap.Plot.Event.featureadded="featureadded",SuperMap.Plot.Event.beforefeaturesselected="beforefeaturesselected",SuperMap.Plot.Event.featuresselected="featuresselected",SuperMap.Plot.Event.beforefeaturesunselected="beforefeaturesunselected",SuperMap.Plot.Event.featuresunselected="featuresunselected",SuperMap.Plot.Event.beforefeaturesmodified="beforefeaturesmodified",SuperMap.Plot.Event.featuresmodified="featuresmodified",SuperMap.Plot.Event.initializecompleted="initializecompleted",SuperMap.Plot.Event.cachecompleted="cachecompleted",SuperMap.Plot.Event.reseteditmarkersvalues="reseteditmarkersvalues",SuperMap.Plot.Event.reseteditmarkers="reseteditmarkers"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Primitives=SuperMap.Plot.Primitives=SuperMap.Plot.Primitives||{};SuperMap.Plot.Primitives={nSegmentCount:72,initialize:function(t){},polyline:function(t){return t},parallelline:function(t){if(t&&t.length>=3){var e=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]);SuperMap.Plot.PlottingUtil.isRight(t[0],t[1],t[2])&&(e=-e);for(var i=[],o=1;o<t.length;o++)i.push(t[o].clone());var n=SuperMap.Plot.PlottingUtil.parallel(i,e);return t[0].x=n[0].x,t[0].y=n[0].y,[i,n]}return[]},kidney:function(t,e){if(t){return e?this.getKendyShapePts(t):t}},bezier:function(t,e){if(t){var i=[];return i=e?SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t):t,SuperMap.Plot.PlottingUtil.clearSamePts(i),i}},loopbezier:function(t,e){if(t){t[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y||t.push(t[0]);var i=[];return i=e?SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t):t,SuperMap.Plot.PlottingUtil.clearSamePts(i),i}},parallelogram:function(t){if(t&&t.length>=3){var e=t[0].x+(t[2].x-t[1].x),i=t[0].y+(t[2].y-t[1].y),o=new SuperMap.Geometry.Point(e,i),n=[];return n.push.apply(n,t),n.push(o),n.push(n[0]),n}},polygon:function(t){if(t&&t.length>2)return t},circle:function(t){if(t&&2===t.length){for(var e=t[0],i=t[1],o=[],n=Math.sqrt((i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y)),s=360/this.nSegmentCount,a=0;a<this.nSegmentCount;a++){var l=(a*s+1)*Math.PI/180,r=new SuperMap.Geometry.Point(Math.cos(l)*n+e.x,Math.sin(l)*n+e.y);o[a]=r}return o}},rectangle:function(t,e,i,o){if(t&&2===t.length){var n=t[0],s=t[1],a=n.clone();return[a,new SuperMap.Geometry.Point(s.x,n.y),s.clone(),new SuperMap.Geometry.Point(n.x,s.y),a]}},sector:function(t){if(t&&t.length>=3){var e=this.getArcInfo(t[0],t[1],t[2]);e.dStartAngle*=Math.PI/180,e.dEndAngle*=Math.PI/180;var i=(e.dEndAngle-e.dStartAngle)/this.nSegmentCount,o=this.getArcSpatialData(e.pntCenter,e.dRadius,e.dRadius,0,e.dStartAngle,e.dEndAngle,i);if(o.push(e.pntCenter),0!==o.length)return o}},lune:function(t){if(t&&t.length>=3){var e=this.getArcInfo(t[0],t[1],t[2]);e.dStartAngle*=Math.PI/180,e.dEndAngle*=Math.PI/180;var i=(e.dEndAngle-e.dStartAngle)/this.nSegmentCount,o=this.getArcSpatialData(e.pntCenter,e.dRadius,e.dRadius,0,e.dStartAngle,e.dEndAngle,i);if(0!==o.length)return o}},arc:function(t){if(t&&t.length>=3){var e=this.getArcInfo(t[0],t[1],t[2]);e.dStartAngle*=Math.PI/180,e.dEndAngle*=Math.PI/180;var i=(e.dEndAngle-e.dStartAngle)/this.nSegmentCount,o=this.getArcSpatialData(e.pntCenter,e.dRadius,e.dRadius,0,e.dStartAngle,e.dEndAngle,i);if(0!==o.length)return o}},ellipse:function(t,e,i,o,n){if(!0===i){if((!o||null===o)&&t&&t.length>=3&&(o=SuperMap.Plot.PlottingUtil.distance(t[0],t[1])),(!n||null===n)&&t&&t.length>=3){var s=SuperMap.Plot.PlottingUtil.projectPoint(t[2],t[0],t[1]);n=SuperMap.Plot.PlottingUtil.distance(s,t[2])}}else n=SuperMap.Plot.PlottingUtil.distance(t[0],t[2]),o=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]);if(e&&null!==e?e*=Math.PI/180:e=SuperMap.Plot.PlottingUtil.radian(t[0],t[1]),t&&t.length>0){var a=2*Math.PI,l=a/this.nSegmentCount,r=this.getArcSpatialData(t[0],o,n,e,0,a,l);if(!0===i){var u=Math.sin(e),p=Math.cos(e);t[2].x>t[1].x?(t[2].x=t[0].x-n*u,t[2].y=t[0].y+n*p):(t[2].x=t[0].x+n*u,t[2].y=t[0].y-n*p)}return r}},getArcSpatialData:function(t,e,i,o,n,s,a){var l=[];if(Math.abs(a)<1e-9)return l;for(;s<n;)s+=2*Math.PI;for(;s>n+2*Math.PI;)n+=2*Math.PI;var r=Math.cos(o)*e,u=Math.sin(o)*e,p=Math.cos(o)*i,h=Math.sin(o)*i,c=this.calcEllipseRadian(n,e,i),y=this.calcEllipseRadian(s,e,i);y-c<1e-5&&(y+=2*Math.PI);var g=Math.round(Math.abs((y-c)/a)+1);if(g<2)return l;for(var d=0;d<g-1;c+=a,d++){d===g-2&&(c=s);var f=t.x+r*Math.cos(c)-h*Math.sin(c),S=t.y+u*Math.cos(c)+p*Math.sin(c);l.push(new SuperMap.Geometry.Point(f,S))}return 0>l.length&&(l[l.length-1].x=t.x+r*Math.cos(y)-h*Math.sin(y),l[l.length-1].y=t.y+u*Math.cos(y)+p*Math.sin(y)),l},getArcInfo:function(t,e,i){var o={};o.pntCenter=new SuperMap.Geometry.Point(0,0),o.dRadius=0,o.dStartAngle=0,o.dEndAngle=0;var n=e.x-t.x,s=e.y-t.y;if(Math.abs(n)<1e-9){r={};(l={}).x=(e.x+t.x)/2,l.y=(e.y+t.y)/2,r.x=(e.x+i.x)/2,r.y=(e.y+i.y)/2;var a=0;Math.abs(i.x-e.x)>=1e-9&&(a=(i.y-e.y)/(i.x-e.x)),o.pntCenter.y=l.y,Math.abs(a)<1e-9?o.pntCenter.x=r.x:o.pntCenter.x=r.x-a*(l.y-r.y)}else{var l={},r={};l.x=(e.x+t.x)/2,l.y=(e.y+t.y)/2,r.x=(e.x+i.x)/2,r.y=(e.y+i.y)/2;var u=s/n,p=1;Math.abs(u)<1e-9?(o.pntCenter.x=l.x,Math.abs(i.x-e.x<1e-9)?o.pntCenter.y=r.y:o.pntCenter.y=-(i.x-e.x)/(i.y-e.y)*(o.pntCenter.x-r.x)+r.y):Math.abs(i.x-e.x)<1e-9?(o.pntCenter.y=r.y,o.pntCenter.x=-u*(o.pntCenter.y-l.y)+l.x):(p=(i.y-e.y)/(i.x-e.x),o.pntCenter.x=(u*p*(l.y-r.y)+p*l.x-u*r.x)/(p-u),o.pntCenter.y=(r.x-l.x+p*r.y-u*l.y)/(p-u))}var h=Math.atan2(t.y-o.pntCenter.y,t.x-o.pntCenter.x),c=Math.atan2(i.y-o.pntCenter.y,i.x-o.pntCenter.x);if(SuperMap.Plot.PlottingUtil.isCounterClockwise(t,e,i)){for(;h>=2*Math.PI;)h-=2*Math.PI;for(;h<0;)h+=2*Math.PI;for(;c>2*Math.PI;)c-=2*Math.PI;for(;c<h;)c+=2*Math.PI}else{for(;c>=2*Math.PI;)c-=2*Math.PI;for(;c<0;)c+=2*Math.PI;for(;h>2*Math.PI;)h-=2*Math.PI;for(;c>h;)h+=2*Math.PI;var y=h;h=c,c=y}return o.dRadius=Math.sqrt((o.pntCenter.x-t.x)*(o.pntCenter.x-t.x)+(o.pntCenter.y-t.y)*(o.pntCenter.y-t.y)),o.dEndAngle=180*c/Math.PI,o.dStartAngle=180*h/Math.PI,o},calcEllipseRadian:function(t,e,i){var o=t,n=e*Math.sin(t),s=i*Math.cos(t),a=Math.atan2(n,s);if(t>Math.PI)for(;o>Math.PI;)o-=2*Math.PI,a+=2*Math.PI;else if(t<-Math.PI)for(;o<-Math.PI;)o+=2*Math.PI,a-=2*Math.PI;return a},getKendyShapePts:function(t){var e=[];if(2>(t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length)return e;var i=this.calcShapePoints(t);if(12!=i.length)return e;i.push(i[0]),i.push(i[1]),i.splice(0,1);for(var o=0;o<i.length-3;o+=3){var n=[];n=this.getBezierPtsWithScalePts(i[o],i[o+1],i[o+2],i[o+3]),e=e.concat(n)}return e},calcShapePoints:function(t){var e=[],i=[],o=t.length;if(0!==o){if(1!==o){if(2==o){var n=this.calcProtudeC3(t[0],t[1]);i.push(t[0]),i.push(t[1]),i.push(n)}else if(i.push(t[0]),i.push(t[1]),i.push(t[2]),(SuperMap.Plot.PlottingUtil.isSamePt(t[0],t[2])||SuperMap.Plot.PlottingUtil.isSamePt(t[1],t[2]))&&(e.push(t[0]),e.push(t[1])),SuperMap.Plot.PlottingUtil.isSamePt(t[0],t[1]))return e.push(t[0]),void e.push(t[2]);i=this.reNormalizeKidneyCtrlPoints(i);var s=new SuperMap.Geometry.Point(0,0),a=new SuperMap.Geometry.Point(0,0);s.x=.5*(i[0].x+i[1].x),s.y=.5*(i[0].y+i[1].y),a.x=s.x-.1*(i[2].x-s.x),a.y=s.y-.1*(i[2].y-s.y);var l=this.GetPtsByTriangle(3,0,i[1],i[0],a);e.push(l.pr),e.push(a),e.push(l.pl);var r=this.GetPtsByTriangle(4,2,i[2],i[0],i[1]);e.push(r.pr),e.push(i[1]),e.push(r.pl);var u=this.GetPtsByTriangle(2,0,i[0],i[1],i[2]);e.push(u.pr),e.push(i[2]),e.push(u.pl);var p=this.GetPtsByTriangle(4,1,i[1],i[2],i[0]);return e.push(p.pr),e.push(i[0]),e.push(p.pl),e}e.push(t[0])}},calcProtudeC3:function(t,e){var i=new SuperMap.Geometry.Point(0,0),o=0;return i.x=.5*(t.x+e.x),i.y=.5*(t.y+e.y),o=SuperMap.Plot.PlottingUtil.distance(e,t)/2.7,this.GetPointsOfNormal(o,t,i).pt3},GetPointsOfNormal:function(t,e,i){var o=new SuperMap.Geometry.Point(0,0),n=new SuperMap.Geometry.Point(0,0),s=new SuperMap.Geometry.Point(0,0),a=0;return 0==(a=SuperMap.Plot.PlottingUtil.distance(e,i))?(s.y=0,s.x=t):(s.x=t*(e.x-i.x)/a,s.y=t*(e.y-i.y)/a),o.x=-s.y+i.x,o.y=s.x+i.y,n.x=s.y+i.x,n.y=-s.x+i.y,{pt3:o,pt4:n}},reNormalizeKidneyCtrlPoints:function(t){var e=[];e.push(new SuperMap.Geometry.Point(0,0)),e.push(new SuperMap.Geometry.Point(0,0)),e.push(new SuperMap.Geometry.Point(0,0));var i=t.length;if(i<2);else if(2==i)e[0]=t[0],e[1]=t[1],e[2]=this.calcProtudeC3(t[0],t[1]);else{var o=t[0],n=t[1],s=t[2],a=0,l=0,r=0;if(a=SuperMap.Plot.PlottingUtil.distance(n,o),l=SuperMap.Plot.PlottingUtil.distance(s,n),r=SuperMap.Plot.PlottingUtil.distance(o,s),l>=a&&l>=r){u=o.clone();o=s.clone(),s=u.clone()}else if(r>=a&&r>=l){u=s.clone();s=n.clone(),n=u.clone()}if(!SuperMap.Plot.PlottingUtil.isRight(s,o,n)){var u=o.clone();o=n.clone(),n=u.clone()}e[0]=o,e[1]=n,e[2]=s}return e},GetPtsByTriangle:function(t,e,i,o,n){var s=new SuperMap.Geometry.Point(0,0),a=(new SuperMap.Geometry.Point(0,0),0),l=0;return a=SuperMap.Plot.PlottingUtil.distance(n,i),l=SuperMap.Plot.PlottingUtil.distance(o,n),1==e&&(a*=2),2==e&&(l*=2),s.x=(a*o.x+l*i.x)/(a+l),s.y=(a*o.y+l*i.y)/(a+l),{pl:this.GetWhichPtOfNormal(t,i,s,n),pr:this.GetWhichPtOfNormal(t,o,s,n)}},GetWhichPtOfNormal:function(t,e,i,o){new SuperMap.Geometry.Point(0,0),new SuperMap.Geometry.Point(0,0);var n=0,s=0;s=SuperMap.Plot.PlottingUtil.distance(o,e)/t;var a=this.GetPointsOfNormal(s,i,o);return n=SuperMap.Plot.PlottingUtil.distance(e,a.pt4),s=SuperMap.Plot.PlottingUtil.distance(e,a.pt3),n>=s?a.pt3:a.pt4},getBezierPtsWithScalePts:function(t,e,i,o){var n=[],s=t.x,a=t.y,l=e.x,r=e.y,u=i.x,p=i.y,h=o.x,c=o.y;if(SuperMap.Plot.PlottingUtil.equalFuzzy(s,l,1e-10)&&SuperMap.Plot.PlottingUtil.equalFuzzy(a,r,1e-10)&&SuperMap.Plot.PlottingUtil.equalFuzzy(u,h,1e-10)&&SuperMap.Plot.PlottingUtil.equalFuzzy(p,c,1e-10))n.push(new SuperMap.Geometry.Point(s,a)),n.push(new SuperMap.Geometry.Point(u,p));else for(var y=0;y<=1;y+=.03125){var g,d,f,S,P=y*y,m=P*y;g=1-3*y+3*P-m,d=3*(y-2*P+m),f=3*(P-m),S=m;var b=new SuperMap.Geometry.Point(g*s+d*l+f*u+S*h,g*a+d*r+f*p+S*c);n.push(b)}return n},getSpatialData:function(t,e,i,o){switch(void 0!==o&&null!==o||(o=!0),t){case 24:return this.polyline(e);case 390:return this.kidney(e,o);case 590:return this.bezier(e,o);case 360:return this.loopbezier(e,o);case 28:return this.parallelogram(e);case 32:return this.polygon(e);case 29:return this.circle(e);case 26:return this.rectangle(e);case 380:return this.sector(e);case 370:return this.lune(e);case 44:return this.arc(e);case 31:return this.ellipse(e,i,o);case 48:return this.parallelline(e);default:return e}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.RouteNodePrimitives=SuperMap.Plot.RouteNodePrimitives=SuperMap.Plot.RouteNodePrimitives||{};SuperMap.Plot.RouteNodePrimitives={initialize:function(t){},rendezvousPoint:function(){var t=[],e=new Object;e.type=SuperMap.Plot.SymbolType.CIRCLESYMBOL,e.positionPoints=[],e.positionPoints.push(new SuperMap.Geometry.Point(0,0)),e.positionPoints.push(new SuperMap.Geometry.Point(0,30)),e.style={surroundLineFlag:!1,fillLimit:!0,fill:!1};var i=new Object;return i.type=SuperMap.Plot.SymbolType.TEXTSYMBOL,i.positionPoints=[],i.positionPoints.push(new SuperMap.Geometry.Point(0,0)),i.textContent="会",i.style={surroundLineFlag:!1,fontSize:14,fontSizeLimit:!0},i.style.labelAlign="cm",t.push(i),t.push(e),t},expandingPoint:function(){var t=[],e=new Object;e.type=SuperMap.Plot.SymbolType.CIRCLESYMBOL,e.positionPoints=[],e.positionPoints.push(new SuperMap.Geometry.Point(0,0)),e.positionPoints.push(new SuperMap.Geometry.Point(0,30)),e.style={surroundLineFlag:!1,fillLimit:!0,fill:!1};var i=new Object;return i.type=SuperMap.Plot.SymbolType.TEXTSYMBOL,i.positionPoints=[],i.positionPoints.push(new SuperMap.Geometry.Point(0,0)),i.textContent="展",i.style={surroundLineFlag:!1,fontSize:14,fontSizeLimit:!0},i.style.labelAlign="cm",t.push(i),t.push(e),t},volleyPoint:function(){var t=[],e=new Object;e.type=SuperMap.Plot.SymbolType.CIRCLESYMBOL,e.positionPoints=[],e.positionPoints.push(new SuperMap.Geometry.Point(0,0)),e.positionPoints.push(new SuperMap.Geometry.Point(0,30)),e.style={surroundLineFlag:!1,fillLimit:!0,fill:!1};var i=new Object;return i.type=SuperMap.Plot.SymbolType.TEXTSYMBOL,i.positionPoints=[],i.positionPoints.push(new SuperMap.Geometry.Point(0,0)),i.textContent="齐",i.style={surroundLineFlag:!1,fontSize:14,fontSizeLimit:!0},i.style.labelAlign="cm",t.push(i),t.push(e),t},standbyPoint_Outer:function(t,e){var i=[],o=new SuperMap.Geometry.Point(0,0),n=new SuperMap.Geometry.Point(0,30);t||(t=90);var s=new Object;s.type=SuperMap.Plot.SymbolType.POLYLINESYMBOL,s.positionPoints=[];for(P=t+10;P<170+t;P+=10){c=SuperMap.Plot.PlottingUtil.findPoint(o,n,30,P);s.positionPoints.push(c)}s.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},i.push(s);var a=s.positionPoints[s.positionPoints.length-1],l=s.positionPoints[s.positionPoints.length-2],r=SuperMap.Plot.PlottingUtil.findPoint(a,l,9,22.5),u=SuperMap.Plot.PlottingUtil.findPoint(a,l,9,-22.5),p=new Object;p.type=SuperMap.Plot.SymbolType.POLYLINESYMBOL,p.positionPoints=[],p.positionPoints.push(r),p.positionPoints.push(a.clone()),p.positionPoints.push(u),p.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},i.push(p);var h=new Object;h.type=SuperMap.Plot.SymbolType.POLYLINESYMBOL,h.positionPoints=[];for(P=190+t;P<350+t;P+=10){var c=SuperMap.Plot.PlottingUtil.findPoint(o,n,30,P);h.positionPoints.push(c)}h.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},i.push(h);var y=h.positionPoints[h.positionPoints.length-1],g=h.positionPoints[h.positionPoints.length-2],d=SuperMap.Plot.PlottingUtil.findPoint(y,g,9,22.5),f=SuperMap.Plot.PlottingUtil.findPoint(y,g,9,-22.5),S=new Object;S.type=SuperMap.Plot.SymbolType.POLYLINESYMBOL,S.positionPoints=[],S.positionPoints.push(d),S.positionPoints.push(y.clone()),S.positionPoints.push(f),S.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},i.push(S);for(var P=0;P<i.length;P++)for(var m=0;m<i[P].positionPoints.length;m++){var b=e*(Math.PI/180);SuperMap.Plot.PlottingUtil.rotateAngle(o,b,i[P].positionPoints[m])}return i},standbyPoint_Inner:function(){var t=[],e=new Object;e.type=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e.positionPoints=[],e.positionPoints.push(new SuperMap.Geometry.Point(-20,0)),e.positionPoints.push(new SuperMap.Geometry.Point(20,10)),e.positionPoints.push(new SuperMap.Geometry.Point(20,-10)),e.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},t.push(e);var i=new Object;i.type=SuperMap.Plot.SymbolType.POLYLINESYMBOL,i.positionPoints=[],i.positionPoints.push(new SuperMap.Geometry.Point(-5,0)),i.positionPoints.push(new SuperMap.Geometry.Point(17,0)),i.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},t.push(i);var o=new Object;return o.type=SuperMap.Plot.SymbolType.POLYLINESYMBOL,o.positionPoints=[],o.positionPoints.push(new SuperMap.Geometry.Point(-2,1.5)),o.positionPoints.push(new SuperMap.Geometry.Point(-5,0)),o.positionPoints.push(new SuperMap.Geometry.Point(-2,-1.5)),o.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},t.push(o),t},supplyPoint:function(){var t=[],e=new Object;e.type=SuperMap.Plot.SymbolType.CIRCLESYMBOL,e.positionPoints=[],e.positionPoints.push(new SuperMap.Geometry.Point(0,0)),e.positionPoints.push(new SuperMap.Geometry.Point(0,30)),e.style={surroundLineFlag:!1,fillLimit:!0,fill:!1};var i=new Object;return i.type=SuperMap.Plot.SymbolType.TEXTSYMBOL,i.positionPoints=[],i.positionPoints.push(new SuperMap.Geometry.Point(0,0)),i.textContent="补",i.style={surroundLineFlag:!1,fontSize:14,fontSizeLimit:!0},i.style.labelAlign="cm",t.push(i),t.push(e),t},takeoffPoint:function(){var t=[],e=new Object;return e.type=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e.positionPoints=[],e.positionPoints.push(new SuperMap.Geometry.Point(-15,25)),e.positionPoints.push(new SuperMap.Geometry.Point(15,25)),e.positionPoints.push(new SuperMap.Geometry.Point(15,-25)),e.positionPoints.push(new SuperMap.Geometry.Point(0,-35)),e.positionPoints.push(new SuperMap.Geometry.Point(-15,-25)),e.positionPoints.push(new SuperMap.Geometry.Point(-15,25)),e.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},t.push(e),t},initialPoint:function(){var t=[],e=new Object;return e.type=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e.positionPoints=[],e.positionPoints.push(new SuperMap.Geometry.Point(-30,30)),e.positionPoints.push(new SuperMap.Geometry.Point(30,30)),e.positionPoints.push(new SuperMap.Geometry.Point(30,-30)),e.positionPoints.push(new SuperMap.Geometry.Point(-30,-30)),e.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},t.push(e),t},visualInitalPoint:function(){var t=[],e=new Object;return e.type=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e.positionPoints=[],e.positionPoints.push(new SuperMap.Geometry.Point(0,30)),e.positionPoints.push(new SuperMap.Geometry.Point(30,0)),e.positionPoints.push(new SuperMap.Geometry.Point(0,-30)),e.positionPoints.push(new SuperMap.Geometry.Point(-30,0)),e.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},t.push(e),t},lanchPoint:function(){var t=[],e=new Object;return e.type=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e.positionPoints=[],e.positionPoints.push(new SuperMap.Geometry.Point(0,30)),e.positionPoints.push(new SuperMap.Geometry.Point(20,-30)),e.positionPoints.push(new SuperMap.Geometry.Point(-20,-30)),e.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},t.push(e),t},turningPoint:function(){var t=[],e=new Object;return e.type=SuperMap.Plot.SymbolType.CIRCLESYMBOL,e.positionPoints=[],e.positionPoints.push(new SuperMap.Geometry.Point(0,0)),e.positionPoints.push(new SuperMap.Geometry.Point(0,30)),e.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},t.push(e),t},aimingPoint:function(){var t=[],e=new Object;return e.type=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e.positionPoints=[],e.positionPoints.push(new SuperMap.Geometry.Point(0,-30)),e.positionPoints.push(new SuperMap.Geometry.Point(20,30)),e.positionPoints.push(new SuperMap.Geometry.Point(-20,30)),e.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},t.push(e),t},targetPoint:function(){var t=[],e=new Object;return e.type=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e.positionPoints=[],e.positionPoints.push(new SuperMap.Geometry.Point(0,30)),e.positionPoints.push(new SuperMap.Geometry.Point(30,-30)),e.positionPoints.push(new SuperMap.Geometry.Point(-30,-30)),e.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},t.push(e),t},eightSpiralPoint:function(){var t=[],e=new Object;e.type=SuperMap.Plot.SymbolType.CIRCLESYMBOL,e.positionPoints=[],e.positionPoints.push(new SuperMap.Geometry.Point(30,0)),e.positionPoints.push(new SuperMap.Geometry.Point(0,0)),e.style={surroundLineFlag:!1,fillLimit:!0,fill:!1};var i=new Object;return i.type=SuperMap.Plot.SymbolType.CIRCLESYMBOL,i.positionPoints=[],i.positionPoints.push(new SuperMap.Geometry.Point(-30,0)),i.positionPoints.push(new SuperMap.Geometry.Point(0,0)),i.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},t.push(e),t.push(i),t},happyValleyPoint:function(){var t=[],e=new Object;e.type=SuperMap.Plot.SymbolType.POLYLINESYMBOL,e.positionPoints=[],e.positionPoints.push(new SuperMap.Geometry.Point(-30,20)),e.positionPoints.push(new SuperMap.Geometry.Point(30,20)),e.style={surroundLineFlag:!1,fillLimit:!0,fill:!1};var i=new Object;i.type=SuperMap.Plot.SymbolType.POLYLINESYMBOL,i.positionPoints=[],i.positionPoints.push(new SuperMap.Geometry.Point(30,-20)),i.positionPoints.push(new SuperMap.Geometry.Point(-30,-20)),i.style={surroundLineFlag:!1,fillLimit:!0,fill:!1};var o=new Object;o.type=SuperMap.Plot.SymbolType.ARCSYMBOL,o.positionPoints=[],o.positionPoints.push(new SuperMap.Geometry.Point(-30,20)),o.positionPoints.push(new SuperMap.Geometry.Point(-50,0)),o.positionPoints.push(new SuperMap.Geometry.Point(-30,-20)),o.style={surroundLineFlag:!1,fillLimit:!0,fill:!1};var n=new Object;return n.type=SuperMap.Plot.SymbolType.ARCSYMBOL,n.positionPoints=[],n.positionPoints.push(new SuperMap.Geometry.Point(30,20)),n.positionPoints.push(new SuperMap.Geometry.Point(50,0)),n.positionPoints.push(new SuperMap.Geometry.Point(30,-20)),n.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},t.push(e),t.push(i),t.push(o),t.push(n),t},attackPoint:function(){var t=[],e=new Object;e.type=SuperMap.Plot.SymbolType.CIRCLESYMBOL,e.positionPoints=[],e.positionPoints.push(new SuperMap.Geometry.Point(0,0)),e.positionPoints.push(new SuperMap.Geometry.Point(0,30)),e.style={surroundLineFlag:!1,fillLimit:!0,fill:!1};var i=new Object;return i.type=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,i.positionPoints=[],i.positionPoints.push(new SuperMap.Geometry.Point(0,20)),i.positionPoints.push(new SuperMap.Geometry.Point(20,-20)),i.positionPoints.push(new SuperMap.Geometry.Point(-20,-20)),i.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},t.push(i),t.push(e),t},suppressPoint:function(){var t=[],e=new Object;e.type=SuperMap.Plot.SymbolType.CIRCLESYMBOL,e.positionPoints=[],e.positionPoints.push(new SuperMap.Geometry.Point(0,0)),e.positionPoints.push(new SuperMap.Geometry.Point(0,30)),e.style={surroundLineFlag:!1,fontSize:14};var i=new Object;return i.type=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,i.positionPoints=[],i.positionPoints.push(new SuperMap.Geometry.Point(-15,15)),i.positionPoints.push(new SuperMap.Geometry.Point(15,15)),i.positionPoints.push(new SuperMap.Geometry.Point(15,-15)),i.positionPoints.push(new SuperMap.Geometry.Point(-15,-15)),i.style={surroundLineFlag:!1,fillLimit:!0,fill:!1},t.push(i),t.push(e),t},getRouteNodeCells:function(t,e,i){switch(t){case SuperMap.Plot.RouteNodeType.RENDEZVOUS:return this.rendezvousPoint();case SuperMap.Plot.RouteNodeType.EXPANDING:return this.expandingPoint();case SuperMap.Plot.RouteNodeType.VOLLEY:return this.volleyPoint();case SuperMap.Plot.RouteNodeType.STANDBY:return e?this.standbyPoint_Inner():this.standbyPoint_Outer(null,i);case SuperMap.Plot.RouteNodeType.SUPPLY:return this.supplyPoint();case SuperMap.Plot.RouteNodeType.TAKEOFF:return this.takeoffPoint();case SuperMap.Plot.RouteNodeType.INITIAL:return this.initialPoint();case SuperMap.Plot.RouteNodeType.VISUALINITAL:return this.visualInitalPoint();case SuperMap.Plot.RouteNodeType.LANCH:case SuperMap.Plot.RouteNodeType.WEAPONLAUNCH:return this.lanchPoint();case SuperMap.Plot.RouteNodeType.TURNING:case SuperMap.Plot.RouteNodeType.COMMONROUTE:return this.turningPoint();case SuperMap.Plot.RouteNodeType.AIMING:return this.aimingPoint();case SuperMap.Plot.RouteNodeType.TARGET:return this.targetPoint();case SuperMap.Plot.RouteNodeType.ATTACK:return this.attackPoint();case SuperMap.Plot.RouteNodeType.SUPPRESS:return this.suppressPoint();case SuperMap.Plot.RouteNodeType.EIGHTSPIRAL:return this.eightSpiralPoint();case SuperMap.Plot.RouteNodeType.HAPPYVALLEY:return this.happyValleyPoint();default:return[]}},getRouteNodeNameByType:function(t){switch(t){case SuperMap.Plot.RouteNodeType.RENDEZVOUS:return"会合点";case SuperMap.Plot.RouteNodeType.EXPANDING:return"展开点";case SuperMap.Plot.RouteNodeType.VOLLEY:return"齐射点";case SuperMap.Plot.RouteNodeType.STANDBY:return"待机点";case SuperMap.Plot.RouteNodeType.SUPPLY:return"补给点";case SuperMap.Plot.RouteNodeType.TAKEOFF:return"起飞点";case SuperMap.Plot.RouteNodeType.INITIAL:return"初始点";case SuperMap.Plot.RouteNodeType.VISUALINITAL:return"可视化初始点";case SuperMap.Plot.RouteNodeType.LANCH:return"发射点";case SuperMap.Plot.RouteNodeType.WEAPONLAUNCH:return"武器发射点";case SuperMap.Plot.RouteNodeType.TURNING:return"转弯点";case SuperMap.Plot.RouteNodeType.COMMONROUTE:return"普通航路点";case SuperMap.Plot.RouteNodeType.AIMING:return"目标瞄准点";case SuperMap.Plot.RouteNodeType.TARGET:return"目标点";case SuperMap.Plot.RouteNodeType.ATTACK:return"攻击点";case SuperMap.Plot.RouteNodeType.SUPPRESS:return"压制点";case SuperMap.Plot.RouteNodeType.EIGHTSPIRAL:return"八字盘旋点";case SuperMap.Plot.RouteNodeType.HAPPYVALLEY:return"跑马圈点";default:return""}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.drawControl=e.PlotDrawControl=void 0;var o=i(24),n=i(35),s=e.PlotDrawControl=n.PlotControl.extend({drawingLayer:null,initialize:function(t,e){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");this.drawingLayer=t,L.Control.prototype.initialize.call(this,e)},onAdd:function(t){var e=L.DomUtil.create("div","supermap-iclient");return this._map=t,this.handler=new o.DrawGraphicObject(this._map,this.drawingLayer),this.handler._control=this,e},onRemove:function(){this._map=null,this.handler=null},setDrawingLayer:function(t){this.drawingLayer=t,this.handler._drawingLayer=t,this.handler._tempDrawingLayer.serverUrl=t.serverUrl}}),a=e.drawControl=function(t,e){return new s(t,e)};L.supermap.plotting.drawControl=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.editControl=e.PlotEditControl=void 0;var o=i(4),n=i(7),s=i(2),a=i(5),l=i(18),r=i(16),u=i(9),p=i(34),h=i(35),c=e.PlotEditControl=h.PlotControl.extend({_dragStartScale:null,_dragStartRotate:null,_dragStartBounds:null,_dragStartLatLngs:null,_editMarkers:null,_disEditBox:null,_editFeatures:null,_mouseTolerance:10,_editMode:SuperMap.Plot.EditMode.EDITCIRCUMRECTANGLE,_avoidEditing:!1,selectedFeatures:[],options:{highlightFlag:!0,highlightStyle:{color:"#ffffff",opacity:1,weight:1},draggable:!0,editIcon:L.divIcon({className:"leaflet-supermap-plot-control-icon-path",iconSize:[10,10]}),scaleIcon:L.divIcon({className:"leaflet-supermap-plot-scale-icon-path",iconSize:[10,10]}),rotateIcon:L.divIcon({className:"leaflet-supermap-plot-rotate-icon-path",iconSize:[15,15]}),lockedIcon:L.divIcon({className:"leaflet-supermap-plot-locked-icon-path",iconSize:[10,10]}),avoidIcon:L.divIcon({className:"leaflet-supermap-plot-avoid-icon-path",iconSize:[8,8]})},initialize:function(t,e){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,e),L.setOptions(this,e),this._editMarkers={},this._disEditBox={},this._dragStartScale={},this._dragStartRotate={},this._dragStartBounds={},this._dragStartLatLngs={},this._editFeatures={}},onAdd:function(t){this.controlDiv=L.DomUtil.create("div","supermap-iclient"),this._map=t,this._map.on("click",this._onMapClick,this),this._map._plotEditControl=this;for(var e=0;e<this._map.getPlottingLayers().length;e++)if(this._map.getPlottingLayers()[e].isSelected){this.enableEditFeatures(this._map.getPlottingLayers()[e].features);for(var i=0;i<this._map.getPlottingLayers()[e].features.length;i++)(this._map.getPlottingLayers()[e].features[i]instanceof n.GroupObject||this._map.getPlottingLayers()[e].features[i]instanceof a.Route)&&this.enableEditFeatures(this._map.getPlottingLayers()[e].features[i].components)}return this.controlDiv},onRemove:function(){this._map.off("click",this._onMapClick,this),this.unselectFeatures(),this._map._plotEditControl=null,this._map=null;for(var t in this._editFeatures)this._disableFeatureEdit(this._editFeatures[t])},enableEditFeatures:function(t){SuperMap.Util.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++)t[e]instanceof o.PlottingObject&&(t[e].enableEdit=!0,this._editFeatures[t[e].uuid]=t[e],this._enableFeatureEdit(t[e]))},disableEditFeatures:function(t){SuperMap.Util.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++)t[e]instanceof o.PlottingObject&&(t[e].enableEdit=!1,delete this._editFeatures[t[e].uuid],this._disableFeatureEdit(t[e]))},avoidEdit:function(t){if(void 0===t&&(t=!this._avoidEditing),this._avoidEditing!==t)if(t&&1===this.selectedFeatures.length&&!this.selectedFeatures[0].getLocked()){this._avoidRegionControl=new p.AvoidRegionControl(this.selectedFeatures[0]),this._map.addControl(this._avoidRegionControl);for(var e in this._editFeatures)this._disableFeatureEdit(this._editFeatures[e]);this._collectEditMarkers(this._avoidRegionControl.feature),this._avoidEditing=t}else if(!t){if(this._avoidRegionControl){for(var e in this._editFeatures)this._enableFeatureEdit(this._editFeatures[e]);if(!SuperMap.Util.isArray(this._avoidRegionControl.feature))var i=[this._avoidRegionControl.feature];this.selectFeatures(i),this._map.removeControl(this._avoidRegionControl),this._avoidRegionControl=null}this._avoidEditing=t}return this._avoidEditing},setEditMode:function(t){if(this._editMode!==t){this._editMode=t;for(var e=0;e<this.selectedFeatures.length;e++)this._collectEditMarkers(this.selectedFeatures[e])}},copy:function(){this.pasteGeoAry=[],this.pasteGeoSel=[];for(var t=0,e=this._map.getPlottingLayers().length;t<e;t++){var i=this._map.getPlottingLayers()[t];if(!0!==i.isLocked&&!1!==i.isEditable)for(var n=0,s=i.getFeatures().length;n<s;n++){var a=i.getFeatures()[n];if(a.isSelected&&!1===a.isLocked&&(a.layer=i,a instanceof o.PlottingObject))if(a.symbolType===SuperMap.Plot.SymbolType.ROUTENODE)this.pasteGeoAry.push(a.route);else if(this.pasteGeoAry.push(a),this.pasteGeoSel.push(a.isSelected),(a.symbolType===SuperMap.Plot.SymbolType.SATELLITETIMEWINDOWS||a.symbolType===SuperMap.Plot.SymbolType.SATELLITE)&&a.hasOwnProperty("timeWindows")&&0!==a.timeWindows.length)for(var l=0,e=a.timeWindows.length;l<e;l++)a.timeWindows[l].hasOwnProperty("symbolType")&&a.timeWindows[l].symbolType===SuperMap.Plot.SymbolType.SATELLITETIMEWINDOWS&&this.pasteGeoAry.push(a.timeWindows[l])}}},copyFeatures:function(t){this.pasteGeoAry=[],this.pasteGeoSel=[],SuperMap.Util.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];i instanceof o.PlottingObject&&(this.pasteGeoAry.push(i),this.pasteGeoSel.push(i.isSelected),i.isSelected&&this.selectedFeatures.push(i))}},cut:function(){this.pasteGeoAry=[],this.pasteGeoSel=[];for(var t=[],e=this.getSelectedFeatures().slice(),i=0;i<e.length;i++){var n=e[i];if(!0!==n.layer.isLocked&&!1!==n.layer.isEditable&&(!1===n.isLocked&&n instanceof o.PlottingObject))if(n.symbolType===SuperMap.Plot.SymbolType.ROUTENODE)this.pasteGeoAry.push(n.route),this.pasteGeoSel.push(n.route.isSelected),n.layer.removeFeatures(n.route);else{if(this.pasteGeoAry.push(n),this.pasteGeoSel.push(n.isSelected),n.hasOwnProperty("geoSymbolTexts")&&0!==n.geoSymbolTexts.length)for(var s=0,a=n.geoSymbolTexts.length;s<a;s++)n.geoSymbolTexts[s].hasOwnProperty("isSelected")&&!0===n.geoSymbolTexts[s].isSelected&&t.push(n.geoSymbolTexts[s].clone());if((n.symbolType===SuperMap.Plot.SymbolType.SATELLITETIMEWINDOWS||n.symbolType===SuperMap.Plot.SymbolType.SATELLITE)&&n.hasOwnProperty("timeWindows")&&0!==n.timeWindows.length)for(var l=0,a=n.timeWindows.length;l<a;l++)n.timeWindows[l].hasOwnProperty("symbolType")&&n.timeWindows[l].symbolType===SuperMap.Plot.SymbolType.SATELLITETIMEWINDOWS&&(this.pasteGeoAry.push(n.timeWindows[l]),n.layer.removeFeatures(n.timeWindows[l]));n.layer.removeFeatures(n)}}if(0!==t.length)for(var s=0,r=t.length;s<r;s++){var u=t[s];if(u.symbolType===SuperMap.Plot.SymbolType.SYMBOLTEXT||u.symbolType===SuperMap.Plot.SymbolType.SYMBOLTEXT1)for(var i=0,a=this.pasteGeoAry.length;i<a;i++)u.associatedUuid===this.pasteGeoAry[i].uuid&&this.pasteGeoAry[i].geoSymbolTexts.push(t[s])}},cutFeatures:function(t){this.pasteGeoAry=[],this.pasteGeoSel=[],t=SuperMap.Util.isArray(t)?t.slice():[t];for(var e=0;e<t.length;e++){var i=t[e],n=i.layer;i instanceof o.PlottingObject&&(this.pasteGeoAry.push(i),this.pasteGeoSel.push(i.isSelected),i instanceof l.RouteNode?(i.isSelected&&this.unselectFeatures(i),n.removeFeatures(i.route)):n.removeFeatures(i),i.layer=n)}},paste:function(){return this._pasteToPosition.apply(this,arguments)},align:function(t){if(0!==this.getSelectedFeatures().length){var e=1,i=this.getSelectedFeatures().length,o=null,n=null,s=null,a=this.getSelectedFeatures()[0].getBounds();if(t===SuperMap.Plot.AlignType.LEFT)for(;e<i;e++)o=this.getSelectedFeatures()[e].getBounds(),n=a.getWest()-o.getWest(),this.getSelectedFeatures()[e].move(0,n),this._collectEditMarkers(this.getSelectedFeatures()[e]);if(t===SuperMap.Plot.AlignType.RIGHT)for(;e<i;e++)o=this.getSelectedFeatures()[e].getBounds(),n=a.getEast()-o.getEast(),this.getSelectedFeatures()[e].move(0,n),this._collectEditMarkers(this.getSelectedFeatures()[e]);if(t===SuperMap.Plot.AlignType.UP)for(;e<i;e++)o=this.getSelectedFeatures()[e].getBounds(),s=a.getNorth()-o.getNorth(),this.getSelectedFeatures()[e].move(s,0),this._collectEditMarkers(this.getSelectedFeatures()[e]);if(t===SuperMap.Plot.AlignType.DOWN)for(;e<i;e++)o=this.getSelectedFeatures()[e].getBounds(),s=a.getSouth()-o.getSouth(),this.getSelectedFeatures()[e].move(s,0),this._collectEditMarkers(this.getSelectedFeatures()[e]);if(t===SuperMap.Plot.AlignType.VERTICALCENTER)for(;e<i;e++)o=this.getSelectedFeatures()[e].getBounds(),s=a.getCenter().lat-o.getCenter().lat,this.getSelectedFeatures()[e].move(s,0),this._collectEditMarkers(this.getSelectedFeatures()[e]);if(t===SuperMap.Plot.AlignType.HORIZONTALCENTER)for(;e<i;e++)o=this.getSelectedFeatures()[e].getBounds(),n=a.getCenter().lng-o.getCenter().lng,this.getSelectedFeatures()[e].move(0,n),this._collectEditMarkers(this.getSelectedFeatures()[e])}},deleteSelectedFeatures:function(){if(0===Object.keys(this.getSelectedFeatures()).length)return null;if(Object.keys(this.getSelectedFeatures()).length)for(var t=this.getSelectedFeatures(),e=0,i=t.length;e<i;e++)t[e].layer.removeFeatures(t[e])},getSelectedFeatures:function(){return this.selectedFeatures.slice()},multiSelect:function(){L.DomEvent.on(this._map._container,"mousedown",this._onMapMouseDown,this),this._map.dragging.enabled()&&(this._map.dragging.disable(),this._mapDraggingWasEnabled=!0)},selectFeatures:function(t){if(SuperMap.Util.isArray(t)||(t=[t]),!1!==this.fire(SuperMap.Plot.Event.beforefeaturesselected,{features:t})){for(var e in t){var i=[];null!==t[e]._map&&t[e].enableEdit&&!1===t[e].isSelected&&(t[e].isSelected=!0,this.selectedFeatures.push(t[e]),this._collectEditMarkers(t[e]),this.options.draggable&&!t[e].layer.isLocked&&t[e].layer.isEditable&&t[e].dragging.enable(),null!==t[e].ownerGroup&&(t[e].ownerGroup.isSelected=!0),t[e]instanceof l.RouteNode&&(t[e].route.isSelected=!0,this.options.highlightFlag&&t[e].route.highlight(this.options.highlightStyle)),i.push(t[e]))}this.fire(SuperMap.Plot.Event.featuresselected,{features:i})}},unselectFeatures:function(t){if(void 0===t&&(t=this.selectedFeatures.slice()),SuperMap.Util.isArray(t)||(t=[t]),!1!==this.fire(SuperMap.Plot.Event.beforefeaturesunselected,{features:t})){for(var e=t.slice(),i=0;i<e.length;){var o=L.Util.indexOf(this.selectedFeatures,e[i]);-1!==o?(this._removeMarkers(e[i]),e[i].isSelected=!1,e[i].dragging.disable(),null!==e[i].ownerGroup&&(e[i].ownerGroup.isSelected=!1),e[i]instanceof l.RouteNode&&(e[i].route.isSelected=!1,e[i].route.unhighlight()),this.selectedFeatures.splice(o,1),i++):e.splice(i,1)}this.fire(SuperMap.Plot.Event.featuresunselected,{features:e})}},_onMapMouseDown:function(t){this.multiple=!1,L.DomUtil.disableTextSelection(),L.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),L.DomEvent.on(document,{contextmenu:L.DomEvent.stop,mousemove:this._onMapMouseMove,mouseup:this._onMapMouseUp},this)},_onMapMouseMove:function(t){this.multiple||(this.multiple=!0,this._box=L.DomUtil.create("div","leaflet-zoom-box",this._map._container),L.DomUtil.addClass(this._map._container,"leaflet-crosshair")),this._endPoint=this._map.mouseEventToContainerPoint(t);var e=new L.Bounds(this._endPoint,this._startPoint),i=e.getSize();L.DomUtil.setPosition(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_onMapMouseUp:function(t){if(L.DomEvent.off(this._map._container,"mousedown",this._onMapMouseDown,this),this.multiple&&(L.DomUtil.remove(this._box),L.DomUtil.removeClass(this._map._container,"leaflet-crosshair")),L.DomUtil.enableTextSelection(),L.DomUtil.enableImageDrag(),L.DomEvent.off(document,{contextmenu:L.DomEvent.stop,mousemove:this._onMapMouseMove,mouseup:this._onMapMouseUp},this),this.multiple){var e=new L.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._endPoint)),i=null;0!==Object.values(this._editFeatures).length&&(i=Object.values(this._editFeatures));for(var o=[],n=0,s=i.length;n<s;n++)i[n].isSelected||(i[n]instanceof l.RouteNode||i[n].symbolType===SuperMap.Plot.SymbolType.LITERATESIGN?e.contains(i[n].route.getBounds().getCenter())&&-1===SuperMap.Util.indexOf(o,i[n].route)&&o.push(i[n].route):null!==i[n].ownerGroup?e.contains(i[n].ownerGroup.getBounds().getCenter())&&-1===SuperMap.Util.indexOf(o,i[n].ownerGroup)&&o.push(i[n].ownerGroup):i[n].getBounds().isValid()&&e.contains(i[n].getBounds().getCenter())&&o.push(i[n]));0!==o.length&&this.selectFeatures(o),this._mapDraggingWasEnabled&&this._map.dragging.enable(),this.multiple=!1}},_enableFeatureEdit:function(t){t instanceof o.PlottingObject&&t.on("click",this._onClick,this).on("mousemove",this._onMouseMove,this).on("mouseout",this._onMouseOut,this).on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this).on("reseteditmarkersvalues",this._onResetEditMarkersValues,this).on("reseteditmarkers",this._onResetEditMarkers,this)},_disableFeatureEdit:function(t){t instanceof o.PlottingObject&&(t.isSelected&&this.unselectFeatures(t),t.off("click",this._onClick,this).off("mousemove",this._onMouseMove,this).off("mouseout",this._onMouseOut,this).off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this).off("reseteditmarkersvalues",this._onResetEditMarkersValues,this).off("reseteditmarkers",this._onResetEditMarkers,this))},_onSelectedLayers:function(t){this.selectFeatures(t.target)},_onUnSelectLayers:function(t){this.unselectFeatures(t.target)},_onMouseMove:function(t){var e=t.target,i="";if(e.isSelected)if(this._editMode===SuperMap.Plot.EditMode.ADDCONTROLPOINT&&(SuperMap.Plot.AddPoint_WayType.UNKNOWN!==e._getSymbolWayType()||e instanceof l.RouteNode&&(e._isFirstNode()||e._isLastNode())))i="crosshair";else if(this._editMode===SuperMap.Plot.EditMode.ADDCONTROLPOINT&&e instanceof a.Route){var o=this._getAddPointTolerance(),n=e._selectNodeLayer(t.latlng,o);null===n||n instanceof l.RouteNode&&(n._isFirstNode()||n._isLastNode())?i="crosshair":null!==n&&(i="pointer")}else i="move";else i="pointer";e.layer._setCursorStyle(i)},_onMouseOut:function(t){t.target.layer._setCursorStyle()},_onDragStart:function(t){for(var e=0;e<this.selectedFeatures.length;e++)if(!this.selectedFeatures[e].getLocked()){var i=this._editMarkers[this.selectedFeatures[e].uuid];for(var o in i)i[o].setOpacity(0)}},_onDrag:function(t){for(var e=0;e<this.selectedFeatures.length;e++)if((this._editMode!==SuperMap.Plot.EditMode.ADDCONTROLPOINT||SuperMap.Plot.AddPoint_WayType.UNKNOWN===this.selectedFeatures[e]._getSymbolWayType())&&!this.selectedFeatures[e].getLocked()){if(this.selectedFeatures[e].symbolType===SuperMap.Plot.SymbolType.SYMBOLTEXT1||this.selectedFeatures[e].symbolType===SuperMap.Plot.SymbolType.AIRROUTE||this.selectedFeatures[e].symbolType===SuperMap.Plot.SymbolType.NAVYROUTE||this.selectedFeatures[e].symbolType===SuperMap.Plot.SymbolType.MISSILEROUTE)break;this.selectedFeatures[e].move(t.dLat,t.dLng)}},_onDragEnd:function(t){for(var e=0;e<this.selectedFeatures.length;e++)this.selectedFeatures[e].getLocked()||(this._collectEditMarkers(this.selectedFeatures[e]),this.selectedFeatures[e].graphic&&this.selectedFeatures[e].graphic.updateImage());this.fire(SuperMap.Plot.Event.featuresmodified,{features:this.selectedFeatures})},_onResetEditMarkers:function(t){-1!==L.Util.indexOf(this.selectedFeatures,t.target)&&this._collectEditMarkers(t.target)},_onResetEditMarkersValues:function(t){this._resetEditMarkersValue(t.target)},_onMapClick:function(t){if(!1!==this._onTriggerMapClick){if(this._startPoint&&this._endPoint)return this._startPoint=null,void(this._endPoint=null);for(var e=[],i=this._map.getPlottingLayers(),o=0;o<i.length;o++){var n=i[o]._getFeatureFromEvent(t);if(n){e.push(n);break}}this.unselectFeatures(),L.DomEvent.stopPropagation(t)}},_onClick:function(t){var e=t.target;if(e instanceof o.PlottingObject)if(e instanceof n.GroupObject&&e.moveend)e.moveend=!1;else if(null!==e.ownerGroup&&e.ownerGroup.moveend)e.ownerGroup.moveend=!1;else{if(this._editMode!==SuperMap.Plot.EditMode.ADDCONTROLPOINT)e instanceof n.GroupObject&&!e.isSelected?(!1===t.originalEvent.ctrlKey&&this.unselectFeatures(),this.selectFeatures(e)):e instanceof a.Route||e.isSelected||null!==e.ownerGroup&&!0!==e.ownerGroup.isSelected||(!1===t.originalEvent.ctrlKey&&this.unselectFeatures(),this.selectFeatures(e));else if(e instanceof a.Route||e.isSelected){if(!1===e.isLocked&&e.isSelected)if(e instanceof a.Route){i=this._getAddPointTolerance();if(null===(u=e._selectNodeLayer(t.latlng,i))){var i=this._getAddPointTolerance();null!==(u=e._addRouteNodeByPosWithoutLast(t.latlng,i))&&(this.unselectFeatures(),this.selectFeatures(u))}}else if(e instanceof l.RouteNode&&e.route.isSelected){var s=e._isFirstNode(),r=e._isLastNode();if(!0===s||!0===r){var u=e.route._addRouteNodeByNode(e.routeNode,s,r);null!==u&&(this.unselectFeatures(),this.selectFeatures(u))}else this.unselectFeatures(),this.selectFeatures(e)}else this._addPoint(e,t.latlng)}else{!1===t.originalEvent.ctrlKey&&this.unselectFeatures(),this.selectFeatures(e);e instanceof l.RouteNode&&((s=e._isFirstNode())||(r=e._isLastNode()))&&null!==(u=e.route._addRouteNodeByNode(e.routeNode,s,r))&&(this.unselectFeatures(),this.selectFeatures(u))}L.DomEvent.stopPropagation(t)}},_addPoint:function(t,e){if(null!==t&&void 0!==t&&!(t.getLatLngs().length>=t.maxEditPts)){var i=t._getSymbolWayType();if(SuperMap.Plot.AddPoint_WayType.UNKNOWN!==i){var o=new SuperMap.Geometry.Point(e.lng,e.lat),n=-1;SuperMap.Plot.AddPoint_WayType.CURVE===i&&(n=this._addPointByCurve(t,o)),SuperMap.Plot.AddPoint_WayType.POLYLINE===i&&(n=this._addPointByPolyLine(t,o));var s=L.Util.latLngsToSuperMapPoints(t.getLatLngs());if(n>0&&n<s.length){var a=L.supermap.plotting.editMarker(new L.LatLng(o.y,o.x),{icon:this.options.editIcon,nHandle:-1});if(a.owner=t,this._addToMapAndBindMarker(a),this._editMarkers[t.uuid].splice(n,0,a),s.splice(n,0,o),100!==t.libID||17703!==t.code&&17704!==t.code)t.latLngs=L.Util.superMapPointsToLatLngs(s);else{var l=SuperMap.Plot.PlottingUtil.computeBeizerPoints(!1,s,t.scaleValues);t.scalePoints=L.Util.superMapPointsToLatLngs(l.scalePoints),t.scaleValues=l.scaleValues,t.setLatLngs(L.Util.superMapPointsToLatLngs(s)),this._resetEditMarkersValue(t)}}}}},_addPointByCurve:function(t,e){var i=L.Util.latLngsToSuperMapPoints(t.getLatLngs()),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(i);if(2>o.length)return-1;for(var n=[],s=0,a=1,l=i.length;a<l;a++)for(var r=[],u=s,p=o.length;u<p;u++){if(SuperMap.Plot.PlottingUtil.equalFuzzy(i[a].x,o[u].x)&&SuperMap.Plot.PlottingUtil.equalFuzzy(i[a].y,o[u].y)){if(r.length<1)continue;r.push(o[u]),n.push(r),r=[],s=u;break}r.push(o[u])}for(var h=-1,c=-1,u=0;u<n.length;u++){var y=this._computePointToLineMinDis(e,n[u]).minDis;y<0||(c<0?(c=y,h=u+1):c>y&&(c=y,h=u+1))}return h},_addPointByPolyLine:function(t,e){var i=-1,o=L.Util.latLngsToSuperMapPoints(t.getLatLngs());return(i=this._computePointToLineMinDis(e,o).index)>=0&&i++,i},_computePointToLineMinDis:function(t,e){var i=this._getAddPointTolerance(),o=SuperMap.Plot.PlottingUtil.computePointToLineMinDis(t,e);return o.minDis>i&&(o.index=-1),o},_getAddPointTolerance:function(){var t=this._mouseTolerance,e=this._map.layerPointToLatLng(L.point(0,0)),i=this._map.layerPointToLatLng(L.point(t,0));return SuperMap.Plot.PlottingUtil.distance(new SuperMap.Geometry.Point(e.lng,e.lat),new SuperMap.Geometry.Point(i.lng,i.lat))},_collectEditMarkers:function(t){void 0!==this._editMarkers[t.uuid]&&this._removeMarkers(t);var e,i=[];if(t.layer instanceof u.PlottingLayer&&(t.layer.getLocked()||!t.layer.getEditable())){var o=t.getBounds();if(null!==o&&o.isValid()){var s=L.latLng(o.getNorth(),o.getEast()),a=L.latLng(o.getNorth(),o.getWest()),p=L.latLng(o.getSouth(),o.getEast()),h=L.latLng(o.getSouth(),o.getWest()),c=new L.Polygon([s,a,h,p],{smoothFactor:.5}),y={weight:1,opacity:.5,color:"#0000ff",fillOpacity:.3,fillColor:"#0000ff"};L.setOptions(c,y),this._map.addLayer(c),e=c}}else if(t.getLocked()){var g=t._getHandlePointsByBounds();for(var d in g){var f=new L.LatLng(g[d].lat,g[d].lng),S=L.supermap.plotting.editMarker(f,{icon:this.options.lockedIcon,nHandle:-3});this._addToMapAndBindMarker(S),S.owner=t,i.push(S)}}else if(t instanceof n.GroupObject||t instanceof l.RouteNode)if(t instanceof r.FlagGroup&&this._editMode!==SuperMap.Plot.EditMode.EDITCIRCUMRECTANGLE)for(var P=0;P<t.scalePoints.length;P++){var f=new L.LatLng(t.scalePoints[P].lat,t.scalePoints[P].lng),m=t.scalePoints[P].tag?t.scalePoints[P].tag:P,S=L.supermap.plotting.editMarker(f,{icon:this.options.scaleIcon,nHandle:t.enableEdit?-2:-3,tag:m});this._addToMapAndBindMarker(S),i.push(S),S.owner=t}else{var b=t._getHandleAndRotatePoints();for(var d in b.handlePoints){v=b.handlePoints[d].nHandle;(this._editMode!==SuperMap.Plot.EditMode.EDITCIRCUMRECTANGLE||t instanceof l.RouteNode)&&(v=-3);var f=new L.LatLng(b.handlePoints[d].lat,b.handlePoints[d].lng),S=L.supermap.plotting.editMarker(f,{icon:this.options.editIcon,nHandle:v,tag:d});this._addToMapAndBindMarker(S),S.owner=t,i.push(S)}if(this._editMode===SuperMap.Plot.EditMode.EDITCIRCUMRECTANGLE)for(var d in b.rotatePoints){var f=new L.LatLng(b.rotatePoints[d].lat,b.rotatePoints[d].lng),S=L.supermap.plotting.editMarker(f,{icon:this.options.rotateIcon,nHandle:0});this._addToMapAndBindMarker(S),i.push(S),S.owner=t}}else if(this._editMode===SuperMap.Plot.EditMode.EDITCIRCUMRECTANGLE){for(var d=0,M=(b=t._getHandleAndRotatePoints()).handlePoints.length;d<M;d++){var v=b.handlePoints[d].nHandle;!t.enableEdit||t.symbolType===SuperMap.Plot.SymbolType.TEXTSYMBOL||t.symbolType===SuperMap.Plot.SymbolType.ELLIPSESYMBOL&&0===parseInt(d)?v=-3:t._getHandleCount()>9&&(v=-1);var f=new L.LatLng(b.handlePoints[d].lat,b.handlePoints[d].lng),S=L.supermap.plotting.editMarker(f,{icon:this.options.editIcon,nHandle:v,tag:d});this._addToMapAndBindMarker(S),S.owner=t,i.push(S)}for(var d=0,M=b.rotatePoints.length;d<M;d++){var f=new L.LatLng(b.rotatePoints[d].lat,b.rotatePoints[d].lng),S=L.supermap.plotting.editMarker(f,{icon:this.options.rotateIcon,nHandle:t.enableEdit?0:-3});this._addToMapAndBindMarker(S),i.push(S),S.owner=t,this._lastPixel=this._map.latLngToLayerPoint(b.rotatePoints[0])}}else if(t.symbolType===SuperMap.Plot.SymbolType.REGULARPOLYGON){var _=[s=t.latLngs[0],a=t.components[0].getLatLngs()[0][0]];for(var d in _){S=L.supermap.plotting.editMarker(_[d],{icon:this.options.editIcon,nHandle:t.enableEdit?-1:-3,tag:d});this._addToMapAndBindMarker(S),i.push(S),S.owner=t}}else if(t.symbolType===SuperMap.Plot.SymbolType.PARALLELLINE){var T=L.Util.superMapPointsToLatLngs(t.superMapAlgoSymbol.controlPoints[0]);t.getLatLngs()[0]=L.latLng(T[0].lat,T[0].lng);for(var d in t.latLngs){var f=new L.LatLng(t.latLngs[d].lat,t.latLngs[d].lng),S=L.supermap.plotting.editMarker(f,{icon:this.options.editIcon,nHandle:t.enableEdit?-1:-3,tag:d});this._addToMapAndBindMarker(S),i.push(S),S.owner=t}}else if(t.symbolType===SuperMap.Plot.SymbolType.ELLIPSESYMBOL)for(var d in t.latLngs)if(0===parseInt(d)){var f=new L.LatLng(t.latLngs[d].lat,t.latLngs[d].lng),S=L.supermap.plotting.editMarker(f,{icon:this.options.editIcon,nHandle:-3,tag:d});this._addToMapAndBindMarker(S),i.push(S),S.owner=t}else{var f=new L.LatLng(t.latLngs[d].lat,t.latLngs[d].lng),S=L.supermap.plotting.editMarker(f,{icon:this.options.editIcon,nHandle:t.enableEdit?-1:-3,tag:d});this._addToMapAndBindMarker(S),i.push(S),S.owner=t}else if(t.symbolType!==SuperMap.Plot.SymbolType.SATELLITE){100===t.libID&&13700===t.code&&(t.getLatLngs()[t.getLatLngs().length-1]=t.components[0].getLatLngs()[t.components[0].getLatLngs().length-1]);for(var d in t.latLngs){var f=new L.LatLng(t.latLngs[d].lat,t.latLngs[d].lng),S=L.supermap.plotting.editMarker(f,{icon:this.options.editIcon,nHandle:t.enableEdit?-1:-3,tag:d});this._addToMapAndBindMarker(S),i.push(S),S.owner=t}for(var d in t.scalePoints){var f=new L.LatLng(t.scalePoints[d].lat,t.scalePoints[d].lng),m=t.scalePoints[d].tag?t.scalePoints[d].tag:d,S=L.supermap.plotting.editMarker(f,{icon:this.options.scaleIcon,nHandle:t.enableEdit?-2:-3,tag:m});this._addToMapAndBindMarker(S),i.push(S),S.owner=t}}this._editMarkers[t.uuid]=i,this._disEditBox[t.uuid]=e},_resetEditMarkersValue:function(t){if(this._editMarkers.hasOwnProperty(t.uuid)){var e=this._editMarkers[t.uuid],i=this._disEditBox[t.uuid];if(0!==this._map.getPlotEditControl().length||!t.layer.getLocked()&&t.layer.getEditable())if(t instanceof n.GroupObject||t instanceof l.RouteNode)if(t instanceof r.FlagGroup&&this._editMode!==SuperMap.Plot.EditMode.EDITCIRCUMRECTANGLE)for(var o in t.scalePoints)e[o]._latlng=t.scalePoints[o],e[o].update();else{u=t._getHandleAndRotatePoints();for(var s in u.handlePoints)e[s]._latlng=u.handlePoints[s],e[s].update();if(this._editMode===SuperMap.Plot.EditMode.EDITCIRCUMRECTANGLE){c=u.handlePoints.length;for(var a in u.rotatePoints)e[c+parseInt(a)]._latlng=u.rotatePoints[a],e[c+parseInt(a)].update()}}else if(this._editMode===SuperMap.Plot.EditMode.EDITCIRCUMRECTANGLE){var u=t._getHandleAndRotatePoints();for(var s in u.handlePoints)e[s]._latlng=u.handlePoints[s],e[s].update();c=u.handlePoints.length;for(var a in u.rotatePoints)e[c+parseInt(a)]._latlng=u.rotatePoints[a],e[c+parseInt(a)].update()}else if(void 0!==t.scalePoints&&null!==t.scalePoints||(t.scalePoints=[]),t.symbolType===SuperMap.Plot.SymbolType.REGULARPOLYGON){var p=[d=t.getLatLngs()[0],f=t.components[0].getLatLngs()[0][0]];for(var o in p)e[o]._latlng=p[o],e[o].update()}else if(t.symbolType===SuperMap.Plot.SymbolType.PARALLELLINE){var h=L.Util.superMapPointsToLatLngs(t.superMapAlgoSymbol.controlPoints[0]);t.getLatLngs()[0]=L.latLng(h[0].lat,h[0].lng);for(var s in t.getLatLngs())e[s]._latlng=t.getLatLngs()[s],e[s].update()}else if(t.getLatLngs().length+t.scalePoints.length===e.length){for(var s in t.getLatLngs())e[s]._latlng=t.getLatLngs()[s],e[s].update();var c=t.getLatLngs().length;for(var a in t.scalePoints){var y=c+parseInt(a);e[y]._latlng=t.scalePoints[a],e[y].update()}}else this._collectEditMarkers(t);else{var g=t.getBounds();if(null!==g&&g.isValid()){var d=L.latLng(g.getNorth(),g.getEast()),f=L.latLng(g.getNorth(),g.getWest()),S=L.latLng(g.getSouth(),g.getEast()),P=L.latLng(g.getSouth(),g.getWest());i.setLatLngs([d,f,P,S])}}}},_removeMarkers:function(t){var e=this._editMarkers[t.uuid];for(var i in e)this._unbindMarkerEvents(e[i]),this._map.removeLayer(e[i]);delete this._editMarkers[t.uuid];var o=this._disEditBox[t.uuid];o&&this._map.removeLayer(o),delete this._disEditBox[t.uuid]},_unbindMarkerEvents:function(t){t.off("mousemove",this._moveMove,this),t.off("mouseout",this._moveOut,this),-3!==t.options.nHandle&&(t.off("click",this._removePoint,this),t.off("dragstart",this._dragStart,this),t.off("drag",this.redraw,this),t.off("dragend",this._dragEnd,this),t.dragging.disable())},_addToMapAndBindMarker:function(t){t.addTo(this._map),t.on("mousemove",this._moveMove,this),t.on("mouseout",this._moveOut,this),-3!==t.options.nHandle&&(t.on("click",this._removePoint,this),t.on("dragstart",this._dragStart,this),t.on("drag",this._dragPoint,this),t.on("dragend",this._dragEnd,this),t.dragging.enable()),-3===t.options.nHandle&&(t.on("dragstart",this._dragStart,this),t.on("dragend",this._dragEnd,this),t.dragging.enable())},_moveMove:function(t){switch(t.target.options.nHandle){case 1:case 8:t.target._icon.style.cursor="se-resize";break;case 3:case 6:t.target._icon.style.cursor="ne-resize";break;case 4:case 5:t.target._icon.style.cursor="e-resize";break;case 2:case 7:t.target._icon.style.cursor="n-resize";break;case-1:case-2:t.target._icon.style.cursor="pointer";break;case 0:t.target._icon.style.cursor="default"}},_moveOut:function(t){t.target._icon.style.cursor=""},_removePoint:function(t){if(this._editMode===SuperMap.Plot.EditMode.ADDCONTROLPOINT&&t.target.owner.isSelected){var e=this._editMarkers[t.target.owner.uuid],i=e.indexOf(t.target);this._map.removeLayer(e[i]),e.splice(i,1),t.target.owner.latLngs.splice(i,1),t.target.owner.redraw()}},_dragStart:function(t){for(var e in this.selectedFeatures){var i=this.selectedFeatures[e];if(this._dragStartScale[i.uuid]=i.getScale(),this._dragStartRotate[i.uuid]=i.getRotate(),this._dragStartBounds[i.uuid]=i.getBounds(),i.symbolType===SuperMap.Plot.SymbolType.FLAGGROUP)i.anchorPoint=new L.latLng(i.getBounds().getSouth(),i.getBounds().getWest());else if(i.symbolType!==SuperMap.Plot.SymbolType.DOTSYMBOL){var o=i.getBounds();o.isValid()&&(i.anchorPoint=o.getCenter())}i instanceof s.GraphicObject&&(this._dragStartLatLngs[i.uuid]=L.Util.cloneLatLngs(i.getLatLngs()));var n=this._editMarkers[i.uuid];for(var a in n)-3===n[a].options.nHandle&&n[a].setOpacity(0),n[a].setOpacity(0)}this.oldLatLng=t.target._latlng},_dragEnd:function(t){for(var e=0;e<this.selectedFeatures.length;e++)this._collectEditMarkers(this.selectedFeatures[e]),this.selectedFeatures[e].graphic&&this.selectedFeatures[e].graphic.updateImage();this.fire(SuperMap.Plot.Event.featuresmodified,{features:this.selectedFeatures})},_dragPoint:function(t){if(!1!==this.fire(SuperMap.Plot.Event.beforefeaturesmodified,{features:this.selectedFeatures})){var e=t.target.owner;if(-3===t.target.options.nHandle||this._avoidRegionControl)this._avoidRegionControl&&this._collectEditMarkers(e);else{var i=this._editMarkers[e.uuid];SuperMap.Util.indexOf(i,t.target);this._editMode===SuperMap.Plot.EditMode.EDITCIRCUMRECTANGLE&&0===t.target.options.nHandle?this._dragRotate(t):this._editMode===SuperMap.Plot.EditMode.EDITCIRCUMRECTANGLE&&t.target.options.nHandle>0?this._dragResize(t,t.target.options.nHandle):this._dragLatLngs(t)}this.fire(SuperMap.Plot.Event.featuresmodified,{features:this.selectedFeatures})}},_dragRotate:function(t){var e=this,i=t.target.owner,o=null;o=i.symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL?i.getLatLngs()[0]:i.anchorPoint;var n=this._map.latLngToLayerPoint(o);i.symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL&&!0===i.positionOffset&&(n.x+=i.positionOffsetX*i.dScale,n.y+=i.positionOffsetY*i.dScale);var s=this._map.latLngToLayerPoint(t.latlng),a=this._map.latLngToLayerPoint(t.oldLatLng),l=s.x-n.x-(a.x-n.x),r=s.y-n.y-(a.y-n.y);if(0!==l&&0!==r){var u=180*(Math.atan2(a.y-n.y,a.x-n.x)-Math.atan2(s.y-n.y,s.x-n.x))/Math.PI,p=0;void 0!==this._lastPixel&&(p=180*(Math.atan2(this._lastPixel.y-n.y,this._lastPixel.x-n.x)-Math.atan2(s.y-n.y,s.x-n.x))/Math.PI),function(t,i){for(var o=0;o<e.selectedFeatures.length;o++){var n=0;n=e.selectedFeatures[o].symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL?t+e._dragStartRotate[e.selectedFeatures[o].uuid]:i,(n%=360)<0&&(n+=360),e.selectedFeatures[o].setRotate(n)}}(u,p)}this._lastPixel=s},_dragResize:function(t,e){var i=this,o=t.target.owner,n=this._dragStartBounds[o.uuid],s=o._resizeOffset(t.latlng,e,n),a=o._resizeBounds(t.latlng,e,n),l=n.getEast()-n.getWest(),r=n.getNorth()-n.getSouth(),u=!0===Boolean(l)?(a.getEast()-a.getWest())/l:.5,p=!0===Boolean(r)?(a.getNorth()-a.getSouth())/r:.5;(function(t,n){for(var s=[],a=0;a<i.selectedFeatures.length;a++)if(!0!==i.selectedFeatures[a].getLocked())if(i.selectedFeatures[a]._isDot()){var l=i._dragStartScale[i.selectedFeatures[a].uuid],r=(l=!0===Boolean(l)?l:1)*t;r>0&&i.selectedFeatures[a].setScale(r)}else{if(9===i.selectedFeatures[a]._getHandleCount()&&e&&e>0){var u=i._dragStartBounds[i.selectedFeatures[a].uuid],p=i._dragStartLatLngs[i.selectedFeatures[a].uuid],h=i.selectedFeatures[a]._getLatLng(e,u,n);i.selectedFeatures[a]._resizeLatLngs(h,e,u,p)}if(0===i.selectedFeatures[a].libID&&i.selectedFeatures[a].code===SuperMap.Plot.SymbolType.ARCREGION)i.selectedFeatures[a]._generateArcRegionFromServer();else if(SuperMap.AlgoSymbolFactory.isAccessServer(i.selectedFeatures[a].libID,i.selectedFeatures[a].code)){var c=new SuperMap.GetSymbolInfoParameters;c.libID=i.selectedFeatures[a].libID,c.code=i.selectedFeatures[a].code,c.inputPoints=L.Util.latLngsToSuperMapPoints(i.selectedFeatures[a].getLatLngs()),c.scaleValues=i.selectedFeatures[a].scaleValues,c.subSymbols=i.selectedFeatures[a].subSymbols,s.push(i.selectedFeatures[a]),L.supermap.symbolInfoService(o.serverUrl).getSymbolInfo(c,function(t){for(var e=0;e<s.length;e++)s[e].libID===t.result.libID&&s[e].code===t.result.code&&(s[e].symbolData.innerCells=t.result.innerCells,s[e].symbolData.scalePoints=t.result.scalePoints,s[e].symbolData.scaleValues=t.result.scaleValues,s[e].redraw(),s[e]._updateSymbolTexts(),s.splice(0,1))},this)}else i.selectedFeatures[a].redraw(),i.selectedFeatures[a]._updateSymbolTexts()}})(2===e||7===e?p:4===e||5===e?u:u<p?u:p,s),this.oldLatLng=t.latlng},_dragLatLngs:function(t){var e=t.target.owner,i=this._editMarkers[e.uuid],o=SuperMap.Util.indexOf(i,t.target),n=!1;if(-2===t.target.options.nHandle&&(n=!0),SuperMap.AlgoSymbolFactory.isAccessServer(e.libID,e.code)){var s=(new Date).getTime(),a=this._map.latLngToLayerPoint(t.latlng);if(n&&void 0!==this._lastDragPixel&&null!==this._lastDragPixel&&!((Math.abs(a.x-this._lastDragPixel.x)>3||Math.abs(a.y-this._lastDragPixel.y)>3)&&s-this.lastDownTime>100))return;var l=new SuperMap.GetSymbolInfoParameters;l.libID=e.libID,l.code=e.code,n?(l.inputPoints=L.Util.latLngsToSuperMapPoints(e.getLatLngs()),l.scalePoints=L.Util.latLngsToSuperMapPoints(e.scalePoints),l.scaleValues=e.scaleValues,l.newScalePoint=new SuperMap.Geometry.Point(t.latlng.lng,t.latlng.lat),l.newScalePointIndex=parseInt(t.target.options.tag)):(e.getLatLngs()[o]=t.target.getLatLng(),l.inputPoints=L.Util.latLngsToSuperMapPoints(e.getLatLngs()),l.scaleValues=e.scaleValues),l.subSymbols=e.subSymbols,L.supermap.symbolInfoService(e.serverUrl).getSymbolInfo(l,function(t){e.symbolData.innerCells=t.result.innerCells,e.symbolData.scalePoints=t.result.scalePoints,e.symbolData.scaleValues=t.result.scaleValues,e.redraw(),e._updateSymbolTexts(),this._resetEditMarkersValue(e)},this),this._lastDragPixel=a,this.lastDownTime=(new Date).getTime()}else if(e.symbolType===SuperMap.Plot.SymbolType.ARCREGION){if(void 0===e.isRedraw&&(e.isRedraw=!0),e.isRedraw){e.getLatLngs()[o]=t.latlng;var r=t.target.getLatLng();-2===t.target.options.nHandle&&(r.isScalePoint=!0),e._modifyPoint(parseInt(t.target.options.tag),r)}}else if(-1===t.target.options.nHandle){switch(e.symbolType){case SuperMap.Plot.SymbolType.REGULARPOLYGON:1===o?e.getLatLngs()[e.getLatLngs().length-1]=t.latlng:e.getLatLngs()[0]=t.latlng;break;case SuperMap.Plot.SymbolType.ELLIPSESYMBOL:e.getLatLngs()[o]=t.latlng;break;case SuperMap.Plot.SymbolType.DOTSYMBOL:e.setLatLngs(e.positionOffset?[e.latLngs[0]]:[t.latlng]);break;default:e.getLatLngs()[o]=t.latlng}e.symbolType===SuperMap.Plot.SymbolType.LINERELATION||e.symbolType===SuperMap.Plot.SymbolType.SYMBOLTEXT||e.symbolType===SuperMap.Plot.SymbolType.SYMBOLTEXT1||e.symbolType===SuperMap.Plot.SymbolType.ELLIPSESYMBOL?e._modifyPoint(parseInt(t.target.options.tag),t.latlng):e.redraw(),e._updateSymbolTexts(),this._resetEditMarkersValue(e)}else if(-2===t.target.options.nHandle){if((r=t.target.getLatLng()).isScalePoint=!0,e._modifyPoint(parseInt(t.target.options.tag),r),e.symbolType===SuperMap.Plot.SymbolType.FLAGGROUP)for(var u=0,p=e.components.length;u<p;u++)e.components[u]._updateSymbolTexts();else e._updateSymbolTexts();this._resetEditMarkersValue(e)}},_pasteToPosition:function(){if(this.pasteGeoAry&&0!==this.pasteGeoAry.length){var t=null,e=null,i=this.pasteGeoAry.slice();if(0!==arguments.length){for(var s=new L.LatLngBounds,l=0,r=i.length;l<r;l++){var u=i[l];if(u instanceof n.GroupObject)for(y=0;y<u.subObjects.length;y++){var p=u.subObjects[y];s.extend(p._bounds)}else u instanceof o.PlottingObject&&s.extend(u._bounds)}t=s.getCenter()}0!==this.getSelectedFeatures().length&&this.unselectFeatures();var h=this._map.getPlottingLayers();for(var c in i)if(i[c]instanceof o.PlottingObject&&(e=i[c].clone()),0!==arguments.length&&null!==t){for(var y=0,g=h.length;y<g;y++)i[c].layer===h[y]&&h[y].addFeatures(e);if(e instanceof a.Route||e.move(arguments[0].lat-t.lat,arguments[0].lng-t.lng),this.selectFeatures(e),i[c]&&i[c].geoSymbolTexts)for(S=0;S<i[c].geoSymbolTexts.length;S++){(P=i[c].geoSymbolTexts[S].getSymbolData()).associatedUuid=e.uuid;for(var y in i)if(i[y].symbolType===SuperMap.Plot.SymbolType.SYMBOLTEXT||i[y].symbolType===SuperMap.Plot.SymbolType.SYMBOLTEXT1){d=i[c].layer.createSymbol(P.libID,P.code,null,{symbolData:P});this.selectFeatures(d),i.splice(y,1);break}}if(i[c]&&i[c].deployments)for(S=0;S<i[c].deployments.length;S++){(P=i[c].deployments[S].getSymbolData()).associatedUuid=e.uuid;for(var y in i)if(i[y].symbolType===SuperMap.Plot.SymbolType.NAVYDEPLOYMENT||i[y].symbolType===SuperMap.Plot.SymbolType.AIRDEPLOYMENT){f=i[c].layer.createSymbol(P.libID,P.code,null,{symbolData:P});this.selectFeatures(f),i.splice(y,1);break}}if(i[c]&&i[c].timeWindows)for(S=0;S<i[c].timeWindows.length;S++){(P=i[c].timeWindows[S].getSymbolData()).associatedUuid=e.uuid;for(var y in i)if(i[y].symbolType===SuperMap.Plot.SymbolType.SATELLITETIMEWINDOWS){m=i[c].layer.createSymbol(P.libID,P.code,null,{symbolData:P});this.selectFeatures(m),i.splice(y,1);break}}}else for(var y=0,g=h.length;y<g;y++)if(i[c].layer===h[y]){if(h[y].addFeatures(e),1012!==e.code&&this.selectFeatures(e),i[c]&&i[c].geoSymbolTexts)for(S=0;S<i[c].geoSymbolTexts.length;S++){(P=i[c].geoSymbolTexts[S].getSymbolData()).associatedUuid=e.uuid;for(var y in i)if(i[y].symbolType===SuperMap.Plot.SymbolType.SYMBOLTEXT||i[y].symbolType===SuperMap.Plot.SymbolType.SYMBOLTEXT1){var d=i[c].layer.createSymbol(P.libID,P.code,null,{symbolData:P});this.selectFeatures(d),i.splice(y,1);break}}if(i[c]&&i[c].deployments)for(S=0;S<i[c].deployments.length;S++){(P=i[c].deployments[S].getSymbolData()).associatedUuid=e.uuid;for(var y in i)if(i[y].symbolType===SuperMap.Plot.SymbolType.NAVYDEPLOYMENT||i[y].symbolType===SuperMap.Plot.SymbolType.AIRDEPLOYMENT){var f=i[c].layer.createSymbol(P.libID,P.code,null,{symbolData:P});this.selectFeatures(f),i.splice(y,1);break}}if(i[c]&&i[c].timeWindows)for(var S=0;S<i[c].timeWindows.length;S++){if(!i[c].timeWindows[S].hasOwnProperty("symbolType"))return;var P=i[c].timeWindows[S].getSymbolData();P.associatedUuid=e.uuid;for(var y in i)if(i[y].symbolType===SuperMap.Plot.SymbolType.SATELLITETIMEWINDOWS){var m=i[c].layer.createSymbol(P.libID,P.code,null,{symbolData:P});this.selectFeatures(m),i.splice(y,1);break}}}}},pasteToPositionAndLayer:function(t,e){var i=!0;e&&e instanceof u.PlottingLayer&&(i=!1);var o=!1;null!==t&&void 0!==t||(o=!0);var n=null,s=this.pasteGeoAry.slice();if(!o){for(var l=new L.LatLngBounds,r=0;r<s.length;r++){var p=s[r];p instanceof a.Route&&l.extend(p._bounds),l.extend(p._bounds)}n=l.getCenter()}for(c=0;c<this.selectedFeatures.length;c++){var h=this.selectedFeatures[c];this.unselectFeatures(h)}this.selectedFeatures=[];for(var c=0;c<s.length;c++)if(!0!==(h=s[c]).layer.isLocked&&!1!==h.layer.isEditable){var y=null;if(y=h instanceof a.Route?h.route.clone():h.clone(),i?h.layer.addFeatures(y):e.addFeatures(y),o||null===n||y instanceof a.Route||y.move(t.lat-n.lat,t.lng-n.lng),void 0!==this.pasteGeoSel&&this.pasteGeoSel.length>c&&!0===this.pasteGeoSel[c])if(h instanceof a.Route){var g=y.getNodeFeature(y.getNodeByUuid(h.routeNode.id));this.selectedFeatures(g)}else this.selectFeatures(y);if(s[c]&&s[c].geoSymbolTexts)for(S=0;S<s[c].geoSymbolTexts.length;S++){(P=s[c].geoSymbolTexts[S].getSymbolData()).associatedUuid=y.uuid;for(var r in s)if(s[r].symbolType===SuperMap.Plot.SymbolType.SYMBOLTEXT||s[r].symbolType===SuperMap.Plot.SymbolType.SYMBOLTEXT1){var d=s[c].layer.createSymbol(P.libID,P.code,null,{symbolData:P});this.selectFeatures(d),s.splice(r,1);break}}if(s[c]&&s[c].deployments)for(S=0;S<s[c].deployments.length;S++){(P=s[c].deployments[S].getSymbolData()).associatedUuid=y.uuid;for(var r in s)if(s[r].symbolType===SuperMap.Plot.SymbolType.NAVYDEPLOYMENT||s[r].symbolType===SuperMap.Plot.SymbolType.AIRDEPLOYMENT){var f=s[c].layer.createSymbol(P.libID,P.code,null,{symbolData:P});this.selectFeatures(f),s.splice(r,1);break}}if(s[c]&&s[c].timeWindows)for(var S=0;S<s[c].timeWindows.length;S++){var P=s[c].timeWindows[S].getSymbolData();P.associatedUuid=y.uuid;for(var r in s)if(s[r].symbolType===SuperMap.Plot.SymbolType.SATELLITETIMEWINDOWS){var m=s[c].layer.createSymbol(P.libID,P.code,null,{symbolData:P});this.selectFeatures(m),s.splice(r,1);break}}}}});L.Map.include({getPlotEditControl:function(){return this._plotEditControl?this._plotEditControl:null}});var y=e.editControl=function(t){return new c(t)};L.supermap.plotting.editControl=y},function(t,e,i){"use strict";L.Canvas.include({_drawPlottingGraphics:function(t){var e=this;e._ctx.clearRect(0,0,e._ctx.canvas.width,e._ctx.canvas.height),t.map(function(t){var i=e._map.latLngToLayerPoint(t.getLatLng()),o=i.x-t.getImage().anchor.x,n=i.y-t.getImage().anchor.y,s=t.getImage().img||t.getImage().canvas;return t.graphicHeight&&t.graphicWidth?e._ctx.drawImage(s,o,n,t.graphicHeight,t.graphicWidth):e._ctx.drawImage(s,o,n),t})},_drawPlottingLayers:function(t){t.map(function(t){t instanceof L.Polyline&&t._update(),t instanceof L.Polygon&&t._update()})},_updateTextPt:function(t,e){var i=e.options,o=1;100!==i.fontPercent&&(o=i.fontPercent/100),this._ctx.fillStyle=i.fontColor,!0===i.fontStroke&&(this._ctx.strokeStyle=i.fontStrokeColor,this._ctx.setLineDash([]),this._ctx.lineWidth=i.fontStrokeWidth),this._ctx.globalAlpha=i.fontOpacity||1;var n=[i.fontStyle?i.fontStyle:"normal","normal",i.fontWeight?i.fontWeight:"normal",i.fontSize?i.fontSize+"px":"1em",i.fontFamily?i.fontFamily:"sans-serif"].join(" "),s=i.text.split("\n"),a=s.length;if(this._ctx.fillText){this._ctx.font=n,this._ctx.textAlign=L.Canvas.LABEL_ALIGN[i.labelAlign[0]]||"center",this._ctx.textBaseline=L.Canvas.LABEL_ALIGN[i.labelAlign[1]]||"middle";var l=L.Canvas.LABEL_FACTOR[i.labelAlign[1]];null==l&&(l=-.5);var r=this._ctx.measureText("Mg").height||this._ctx.measureText("xx").width;t.y+=r*l*(a-1);for(var u=0;u<a;u++)if(0!=i.fontSpace){var p=0,h=this._ctx.measureText(s[u]).width+i.fontSpace*(s[u].length-1),c=i.labelAlign[0]||"c";"c"===c?p-=h/2-this._ctx.measureText(s[u][0]).width/2:"r"===c&&(p-=h-i.fontSize);var y=0,g=s[u].split(""),d="";this._ctx.save(),this._ctx.translate(t.x,t.y),0!=i.labelRotation&&this._ctx.rotate(i.labelRotation*Math.PI/180),this._ctx.scale(o,1);for(var f=0;f<g.length;f++)!0===i.fontStroke&&this._ctx.strokeText(g[f],p+y,r*u),this._ctx.fillText(g[f],p+y,r*u),d+=g[f],y=this._ctx.measureText(d).width+parseFloat(i.fontSpace)*(f+1);this._ctx.restore()}else this._ctx.save(),this._ctx.translate(t.x,t.y),0!=i.labelRotation&&this._ctx.rotate(i.labelRotation*Math.PI/180),this._ctx.scale(o,1),!0===i.fontStroke&&this._ctx.strokeText(s[u],0,r*u),this._ctx.fillText(s[u],0,r*u),this._ctx.restore()}},_updateText:function(t){if(void 0!=t.options.text&&!(t.options.fontSize<6)){for(var e in t._eventParents)if(t._eventParents[e].symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL&&!1===t._eventParents[e].textDisplay)return;void 0===t.options.fontPercent&&(t.options.fontPercent=100),t.options.fontPercent<0&&(t.options.fontPercent=0),t.options.fontPercent>400&&(t.options.fontPercent=400),void 0===t.options.fontSpace&&(t.options.fontSpace=0),t.options.fontSpace>30?t.options.fontSpace=30:t.options.fontSpace<0&&(t.options.fontSpace=0);var i=t._latlng,o=this._map.latLngToLayerPoint(i);if(void 0!=o){if(t.options.labelXOffset||t.options.labelYOffset){var n=isNaN(t.options.labelXOffset)?0:t.options.labelXOffset,s=isNaN(t.options.labelYOffset)?0:t.options.labelYOffset;o.x+=n,o.y-=s}if(!0===t.options.fontBackground){this._ctx.font=[t.options.fontStyle?t.options.fontStyle:"normal","normal",t.options.fontWeight?t.options.fontWeight:"normal",t.options.fontSize?t.options.fontSize+"px":"1em",t.options.fontFamily?t.options.fontFamily:"sans-serif"].join(" ");var a=t.options.labelRotation;t.options.labelRotation=0;var l=t.getPxBounds();t.options.labelRotation=a;var r=l.min.x,u=l.min.y,p=l.max.x-l.min.x,h=l.max.y-l.min.y;this._ctx.fillStyle=t.options.fontBackgroundColor,this._ctx.globalAlpha=1,this._ctx.save(),this._ctx.translate(r,u),0!=t.options.labelRotation&&this._ctx.rotate(t.options.labelRotation*Math.PI/180),this._ctx.fillRect(0,0,p,h),this._ctx.restore()}if(!0===t.options.fontShadow){var c=L.point(o.x,o.y);if(t.options.fontShadowOffsetX&&(c.x+=t.options.fontShadowOffsetX),t.options.fontShadowOffsetY&&(c.y+=t.options.fontShadowOffsetY),0!==t.options.labelRotation){var y=o.x,g=o.y,d=t.options.labelRotation*Math.PI/180,f=Math.sqrt(Math.pow(c.x-y,2)+Math.pow(c.y-g,2)),S=d+Math.atan2(c.y-g,c.x-y);c.x=y+f*Math.cos(S),c.y=g+f*Math.sin(S)}var P=t.options.fontStroke;t.options.fontStroke=!1;var m=t.options.fontColor;t.options.fontColor=t.options.fontShadowColor,this._updateTextPt(c,t),t.options.fontColor=m,t.options.fontStroke=P}this._updateTextPt(o,t)}}},_updateImage:function(t){var e=this,i=function(){var t=this.style,i=t.graphicWidth||t.graphicHeight,o=t.graphicHeight||t.graphicWidth;i=i||2*t.pointRadius,o=o||2*t.pointRadius;var n=void 0!==t.graphicXOffset?t.graphicXOffset:-.5*i,s=void 0!==t.graphicYOffset?t.graphicYOffset:-.5*o,a=t.graphicOpacity||t.fillOpacity,l=this.point,r=l.x,u=l.y;if(!isNaN(r)&&!isNaN(u)){e._ctx.save();var p;t.rotation&&(p=t.rotation/180*Math.PI),e._ctx.translate(r,u),p&&e._ctx.rotate(p),e._ctx.translate(n,s),e._ctx.globalAlpha=a;var h=L.Canvas.drawImageScaleFactor||(L.Canvas.drawImageScaleFactor=/android 2.1/.test(navigator.userAgent.toLowerCase())?320/window.screen.width:1);e._ctx.drawImage(this.img,0,0,i*h,o*h),e._ctx.restore()}},o=new Image;"firefox"==SuperMap.Browser.name?(o.onload=function(){i.call({point:t._point,style:t.options,img:o}),o.onload=null},t.options.graphicTitle&&(o.title=t.options.graphicTitle),o.src=t.options.externalGraphic):(t.options.graphicTitle&&(o.title=t.options.graphicTitle),o.onload=function(){o.src=t.options.externalGraphic,i.call({point:t._point,style:t.options,img:o}),o.onload=null}),window.ActiveXObject||"ActiveXObject"in window?o.onload():o.complete&&o.onload()},_updateArc:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,o=t._radius,n=(t._radiusY||o)/o,s=(360-t.options.endAngle)*(Math.PI/180),a=(360-t.options.startAngle)*(Math.PI/180);this._drawnLayers[t._leaflet_id]=t,1!==n&&(i.save(),i.scale(1,n)),i.beginPath(),i.arc(e.x,e.y/n,o,s,a,!1),1!==n&&i.restore(),this._fillStroke(i,t)}},_handleMouseHover:function(t,e){var i,o=null;for(var n in this._map._layers)if((i=this._map._layers[n])._drawFirst)for(var s=i._drawFirst;s;s=s.next)s.layer.options.interactive&&s.layer._containsPoint(e)&&!this._map._draggableMoved(s.layer)&&(o=s.layer);o!==this._hoveredLayer&&(this._handleMouseOut(t),o&&(L.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseover"),this._hoveredLayer=o)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_onClick:function(t){var e,i=this._map.mouseEventToLayerPoint(t),o=[],n=[];for(var s in this._map._layers)if(this._map._layers[s]._drawFirst)for(var a=this._map._layers[s]._drawFirst;a;a=a.next)if(a.layer.options.interactive&&a.layer._containsPoint(i)&&!this._map._draggableMoved(a.layer)&&(e=a.layer).hasOwnProperty("_eventParents")&&null!==e._eventParents)for(var l in e._eventParents)n.push(e),o.push(e._eventParents[l]);if(e&&n.length>1){if(o.length>0){for(var r=!1,u=[],p=[],s=0,h=o.length;s<h;s++)o[s].isSelected&&o[s].moveend&&(r=!0),o[s].enableEdit&&(u.push(o[s]),p.push(n[s]));for(var s=0,c=u.length;s<c;s++){if(L.DomEvent.fakeStop(t),u[s].isSelected&&u[s].moveend){u[s].moveend=!1,this._fireEvent([p[s]],t),u[s].moveend=!0;break}if(u[s].isSelected&&u.length>1){this._fireEvent([p[s]],t);break}if(!r){this._fireEvent([p[p.length-1]],t);break}}}}else e&&(L.DomEvent.fakeStop(t),this._fireEvent([e],t))}}),L.Polyline.prototype._containsPoint=function(t,e){var i,o,n,s,a,l,r=this._clickTolerance()+5;if(!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(o=0,n=(a=(l=this._parts[i]).length)-1;o<a;n=o++)if((e||0!==o)&&L.LineUtil.pointToSegmentDistance(t,l[n],l[o])<=r)return!0;return!1},L.supermap.plotting.Text.prototype._containsPoint=function(t){return this._pxBounds.contains(t)},L.supermap.plotting.PointImage.prototype._containsPoint=function(t){return this._pxBounds.contains(t)},L.Canvas.LABEL_ALIGN={l:"left",r:"right",t:"hanging",b:"alphabetic"},L.Canvas.LABEL_FACTOR={l:0,r:-1,t:0,b:-1},L.Canvas.drawImageScaleFactor=null},function(t,e,i){"use strict";L.SVG.include({_drawPlottingLayers:function(t){t.map(function(t){t instanceof L.Polyline&&t._update(),t instanceof L.Polygon&&t._update()})},getEvents:function(){var t=L.Renderer.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t.click=this._onClick,t.mousemove=this._onMousemove,t.mousedown=this._onMousedown,t},_fireFeatureEvt:function(t){var e=this;for(var i in t.target._targets){var o=t.target._targets[i];if(o.hasOwnProperty("_eventParents")&&null!==o._eventParents&&Object.values(o._eventParents)[0]instanceof L.supermap.plotting.PlottingObject&&o._bounds.isValid()&&o._bounds.contains(t.latlng)&&0!==function(t){for(var i=[],o=e._map.getPlottingLayers(),n=0,s=o.length;n<s;n++){var a=o[n]._getFeatureFromEvent(t);if(a){i.push(a);break}}return i}(t).length){if(function(t){for(var e in t._eventParents){var i=t._eventParents[e];return!(!i.hasOwnProperty("isFirstAdd")||!0!==i.isFirstAdd||(i.isFirstAdd=null,delete i.isFirstAdd,0))}}(o))break;o.fire(t.type,t,o);break}}},_onClick:function(t){t.target instanceof L.Map&&this._fireFeatureEvt(t),L.DomEvent.stopPropagation(t)},_onMousemove:function(t){this._map.dragging&&!1===this._map.dragging._enabled||(this._map._panes.overlayPane.style.width="0px",this._map._panes.overlayPane.style.height="0px",t.target instanceof L.Map&&this._fireFeatureEvt(t),L.DomEvent.stopPropagation(t))},_onMousedown:function(t){this._map.dragging&&!1===this._map.dragging._enabled&&this._map.dragging.enable(),t.target instanceof L.Map&&this._fireFeatureEvt(t),L.DomEvent.stopPropagation(t)},_updateTextPt:function(t,e,i,o){t.setAttributeNS(null,"x",e.x),t.setAttributeNS(null,"y",e.y),i.options.display&&t.setAttributeNS(null,"display",i.options.display),!0===i.options.fontStroke&&(i.options.fontStrokeColor&&t.setAttributeNS(null,"stroke",i.options.fontStrokeColor),i.options.fontStrokeWidth&&t.setAttributeNS(null,"stroke-width",i.options.fontStrokeWidth)),i.options.labelRotation&&t.setAttributeNS(null,"transform","rotate("+i.options.labelRotation+" "+e.x+","+e.y+")"),i.options.fontColor&&t.setAttributeNS(null,"fill",i.options.fontColor),i.options.fontOpacity&&t.setAttributeNS(null,"opacity",i.options.fontOpacity),i.options.fontFamily&&t.setAttributeNS(null,"font-family",i.options.fontFamily),i.options.fontSize&&t.setAttributeNS(null,"font-size",i.options.fontSize),i.options.fontWeight&&t.setAttributeNS(null,"font-weight",i.options.fontWeight),i.options.fontStyle&&t.setAttributeNS(null,"font-layer.options",i.options.fontStyle);var n;if(L.Browser.gecko){if(100!==i.options.fontPercent&&0!==i.options.fontSpace&&(n=i.options.fontSpace+i.options.fontPercent/100*parseFloat(i.options.fontSize)*i.options.text.length),100!==i.options.fontPercent&&0===i.options.fontSpace){var s=document.createElement("span");document.body.appendChild(s),s.style.width="auto",s.style.height="auto",i.options.fontSize&&(s.style.fontSize=new String(i.options.fontSize)+"px"),i.options.fontFamily&&(s.style.fontFamily=i.options.fontFamily),i.options.fontWeight&&(s.style.fontWeight=i.options.fontWeight),s.style.position="absolute",s.style.visibility="hidden",s.innerHTML=i.options.text;var a=s.clientWidth;n=i.options.fontPercent/100*a+i.options.text.length}t.setAttributeNS(null,"textLength",n),t.setAttributeNS(null,"lengthAdjust","spacingAndGlyphs")}t.setAttributeNS(null,"pointer-events","visible");var l=i.options.labelAlign||"cm";t.setAttributeNS(null,"text-anchor",L.SVG.LABEL_ALIGN[l[0]]||"middle"),!0===L.Browser.gecko&&t.setAttributeNS(null,"dominant-baseline",L.SVG.LABEL_ALIGN[l[1]]||"central");for(var r=i.options.text.split("\n"),u=r.length;t.childNodes.length>u;)t.removeChild(t.lastChild);for(var p=0;p<u;p++){var h=e.x;if(0!=i.options.fontSpace){m=SuperMap.PlotUtil.getTextWidth(i.options,r[p]);"c"===l[0]?h-=m/2:"r"===l[0]&&(h-=m);for(var c=0,y=r[p].split(""),g="",d=0;d<y.length;d++){S=o+"tspan"+p+d;i._tspanNodeObj&&i._tspanNodeObj[S]||(i._tspanNodeObj[S]=L.SVG.create("tspan"));P=i._tspanNodeObj[S];!1===L.Browser.gecko&&P.setAttributeNS(null,"baseline-shift",L.SVG.LABEL_VSHIFT[l[1]]||"-41.5%");var f=SuperMap.PlotUtil.getTextWidth(i.options,y[d]);P.setAttributeNS(null,"textLength",f),P.setAttributeNS(null,"lengthAdjust","spacingAndGlyphs"),P.setAttribute("x",h+c+f/2),0!==d?P.setAttribute("dy","0em"):0==p?(null==(b=L.SVG.LABEL_VFACTOR[l[1]])&&(b=-.5),P.setAttribute("dy",b*(u-1)+"em")):P.setAttribute("dy","1em");M=""===y[d]?" ":y[d];i.options.isUnicode?L.Browser.ie||L.Browser.ielt9?(this.element.innerHTML=M,P.textContent=this.element.innerHTML):P.innerHTML=M:P.textContent=M,P.parentNode||t.appendChild(P),g+=y[d],c=SuperMap.PlotUtil.getTextWidth(i.options,g)+parseFloat(i.options.fontSpace)*(i.options.fontPercent/100)}}else{var S=o+"tspan"+p;i._tspanNodeObj&&i._tspanNodeObj[S]||(i._tspanNodeObj[S]=L.SVG.create("tspan"));var P=i._tspanNodeObj[S];if(!1===L.Browser.gecko&&P.setAttributeNS(null,"baseline-shift",L.SVG.LABEL_VSHIFT[l[1]]||"-41.5%"),100!==i.options.fontPercent){var m=SuperMap.PlotUtil.getTextWidth(i.options,r[p]);P.setAttributeNS(null,"textLength",m),P.setAttributeNS(null,"lengthAdjust","spacingAndGlyphs")}if(P.setAttribute("x",e.x),0==p){var b=L.SVG.LABEL_VFACTOR[l[1]];null==b&&(b=-.5),P.setAttribute("dy",b*(u-1)+"em")}else P.setAttribute("dy","1em");var M=""===r[p]?" ":r[p];i.options.isUnicode?L.Browser.ie||L.Browser.ielt9?(this.element.innerHTML=M,P.textContent=this.element.innerHTML):P.innerHTML=M:P.textContent=M,P.parentNode||t.appendChild(P)}}t.parentNode||this._rootGroup.appendChild(t)},_updateText:function(t){if(t.options.text&&0!==t.options.text.length)if(t.options.fontSize<6||t.options.fontPercent<=0)t._removeNode();else{for(var e in t._eventParents)if(t._eventParents[e].symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL&&!1===t._eventParents[e].textDisplay)return void t._removeNode();void 0===t.options.fontPercent&&(t.options.fontPercent=100),t.options.fontPercent<0&&(t.options.fontPercent=0),t.options.fontPercent>400&&(t.options.fontPercent=400),void 0===t.options.fontSpace&&(t.options.fontSpace=0),t.options.fontSpace>30?t.options.fontSpace=30:t.options.fontSpace<0&&(t.options.fontSpace=0);var i=t._latlng,o=this._map.latLngToLayerPoint(i);if(void 0!=o){if(L.Browser.ie||L.Browser.ielt9){var n=.35*parseFloat(t.options.fontSize);o.y=o.y-n}if(t.options.labelXOffset||t.options.labelYOffset){var s=isNaN(t.options.labelXOffset)?0:t.options.labelXOffset,a=isNaN(t.options.labelYOffset)?0:t.options.labelYOffset;o.x+=s,o.y-=a}if(!0===t.options.fontShadow){t._shadowTextNode&&t._shadowTextNode.parentNode||(t._shadowTextNode=L.SVG.create("text"),this._rootGroup.appendChild(t._shadowTextNode));var l=L.point(o.x,o.y);if(t.options.fontShadowOffsetX&&(l.x+=t.options.fontShadowOffsetX),t.options.fontShadowOffsetY&&(l.y+=t.options.fontShadowOffsetY),0!==t.options.labelRotation){var r=o.x,u=o.y,p=t.options.labelRotation*Math.PI/180,h=Math.sqrt(Math.pow(l.x-r,2)+Math.pow(l.y-u,2)),c=p+Math.atan2(l.y-u,l.x-r);l.x=r+h*Math.cos(c),l.y=u+h*Math.sin(c)}var y=t.options.fontStroke;t.options.fontStroke=!1;var g=t.options.fontColor;t.options.fontColor=t.options.fontShadowColor,this._updateTextPt(t._shadowTextNode,l,t,"shadow"),t.options.fontColor=g,t.options.fontStroke=y}else t._shadowTextNode&&t._shadowTextNode.parentNode&&(this._rootGroup.removeChild(t._shadowTextNode),delete t._shadowTextNode);if(t._textNode&&t._textNode.parentNode||(t._textNode=L.SVG.create("text"),this._rootGroup.appendChild(t._textNode),t.options.interactive&&L.DomUtil.addClass(t._textNode,"leaflet-interactive"),t.addInteractiveTarget(t._textNode)),this._updateTextPt(t._textNode,o,t,"label"),!0===t.options.fontBackground){var d=t._shadowTextNode;if(d&&d.parentNode||(d=t._textNode),!d||!d.parentNode)return;t._backgroundTextNode&&t._backgroundTextNode.parentNode||(t._backgroundTextNode=L.SVG.create("rect"),!0===t.options.fontShadow?this._rootGroup.insertBefore(t._backgroundTextNode,t._shadowTextNode):this._rootGroup.insertBefore(t._backgroundTextNode,t._textNode));var f=t._textNode.getBBox();t._backgroundTextNode.x.baseVal.value=f.x,t._backgroundTextNode.y.baseVal.value=f.y,t._backgroundTextNode.width.baseVal.value=f.width,t._backgroundTextNode.height.baseVal.value=f.height,t._backgroundTextNode.style.fill=t.options.fontBackgroundColor,t.options.labelRotation&&t._backgroundTextNode.setAttributeNS(null,"transform","rotate("+t.options.labelRotation+" "+o.x+","+o.y+")")}else t._backgroundTextNode&&t._backgroundTextNode.parentNode&&(this._rootGroup.removeChild(t._backgroundTextNode),delete t._backgroundTextNode)}else t._removeNode()}else t._removeNode()},_updateImage:function(t){if(t._imageNode&&t._imageNode.parentNode||(t._imageNode=L.SVG.create("image"),this._rootGroup.appendChild(t._imageNode)),t._imageNode.setAttributeNS(null,"cx",t._point.x),t._imageNode.setAttributeNS(null,"cy",t._point.y),t._imageNode.setAttributeNS(null,"r",1),t._imageNode.style.visibility="",t.options.graphicTitle){t._imageNode.setAttributeNS(null,"title",t.options.graphicTitle);var e=L.SVG.create("title");e.textContent=style.graphicTitle,t._imageNode.appendChild(e)}t.options.graphicWidth&&t.options.graphicHeight&&t._imageNode.setAttributeNS(null,"preserveAspectRatio","none");var i=t.options.graphicWidth||t.options.graphicHeight,o=t.options.graphicHeight||t.options.graphicWidth;i=i||2*t.options.pointRadius,o=o||2*t.options.pointRadius;var n=void 0!=t.options.graphicXOffset?t.options.graphicXOffset:-.5*i,s=void 0!=t.options.graphicYOffset?t.options.graphicYOffset:-.5*o,a=t.options.graphicOpacity||t.options.fillOpacity;t._imageNode.setAttributeNS(null,"x",(t._point.x+n).toFixed()),t._imageNode.setAttributeNS(null,"y",(t._point.y+s).toFixed()),t._imageNode.setAttributeNS(null,"width",i),t._imageNode.setAttributeNS(null,"height",o),t._imageNode.setAttributeNS("http://www.w3.org/1999/xlink","href",t.options.externalGraphic),t._imageNode.setAttributeNS(null,"style","opacity: "+a),t._imageNode.onclick=L.SVG.preventDefault;var l=t.options.rotation;void 0===l&&void 0===t._imageNode._rotation||!t._point||(t._imageNode._rotation=l,l|=0,t._imageNode.setAttributeNS(null,"transform","rotate("+l+" "+t._point.x+" "+t._point.y+")")),t._imageNode.setAttributeNS(null,"fill","none"),t._imageNode.setAttributeNS(null,"stroke","none"),t.options.pointerEvents?(t._imageNode.setAttributeNS(null,"pointer-events",t.options.pointerEvents),t._imageNode.style.pointerEvents=t.options.pointerEvents):(t._imageNode.setAttributeNS(null,"pointer-events","visiblepainted"),t._imageNode.style.pointerEvents="visiblepainted"),null!=t.options.cursor&&t._imageNode.setAttributeNS(null,"cursor",style.cursor)},_updateArc:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=t._radius,o="a"+i+","+(t._radiusY||i)+" 0 1,0 ";sRadian=(360-t.options.endAngle)*(Math.PI/180),eRadian=(360-t.options.startAngle)*(Math.PI/180);var n=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+o+2*i+",0 "+o+2*-i+",0 ";this._setPath(t,n)}}}),L.SVG.LABEL_ALIGN={l:"start",r:"end",b:"bottom",t:"hanging"},L.SVG.LABEL_VSHIFT={t:"-83%",b:"0"},L.SVG.LABEL_VFACTOR={t:0,b:-1},L.SVG.preventDefault=function(t){t.preventDefault&&t.preventDefault()}},function(t,e,i){"use strict";var o=i(9);i(136),i(4);L.Map.include({getFeatureByUuid:function(t){var e=[];for(var i in this._layers)if(this._layers[i]instanceof o.PlottingLayer){var n=this._layers[i].getFeatureByUuid(t);null!==n&&e.push(n)}return 0===e.length?null:e[0]},getPlottingLayers:function(){var t=[],e=this._layers;for(var i in e)e[i]instanceof o.PlottingLayer&&t.push(e[i]);return t},clearPlottingLayers:function(){var t=this._layers;for(var e in t)t[e]instanceof o.PlottingLayer&&(t[e].removeAllFeatures(),this.removeLayer(t[e]))},getLayersByName:function(t){return this.getLayersBy("name",t)},getLayersBy:function(t,e){return this.getBy("_layers",t,e)},getBy:function(t,e,i){var o="function"==typeof i.test,n=[];for(var s in this[t])n.push(this[t][s]);return SuperMap.Array.filter(n,function(t){return t[e]===i||o&&i.test(t[e])})},latLngToLayerPoint:function(t){return this.project(L.latLng(t))._subtract(this.getPixelOrigin())}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.plottingGraphicLayer=e.PlottingGraphicLayer=void 0;var o=i(134),n=i(135),s=i(137),a=e.PlottingGraphicLayer=L.Path.extend({cacheImages:null,graphics:null,_tempDrawingLayer:null,_currentLatLng:null,options:{renderer:L.canvas()},initialize:function(t){this._tempDrawingLayer=new s.GraphicEditLayer("temportary"),t=t||{},L.Util.setOptions(this,t),this.cacheImages={},this.graphics=[],this.selectGraphics=[]},getEvents:function(){var t={click:this._handleClick,mousemove:this._onMapMouseMove};return this._map._zoomAnimated&&(t.zoomanim=this._zoomAnim),t},_zoomAnim:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,i,e):L.DomUtil.setPosition(this._canvas,i)},_onMapMouseMove:function(t){var e=this._getGraphicsInBounds();if(0!==e.length)for(var i=0,o=e.length;i<o;i++){var n=this._map.latLngToLayerPoint(e[i].getLatLng()),s=L.point(n.x-e[i].getImage().anchor.x,n.y-e[i].getImage().anchor.y),a=L.point(n.x+(e[i].getImage().size[0]-e[i].getImage().anchor.x),n.y+(e[i].getImage().size[1]-e[i].getImage().anchor.y));if(L.bounds(s,a).contains(this._map.latLngToLayerPoint(t.latlng))){this._tempDrawingLayer._renderer._container.style.cursor=e[i].getImage().feature.isSelected?"move":"pointer";break}this._tempDrawingLayer._renderer._container.style.cursor=""}},addFeatures:function(t){L.Util.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var s=t[e],a=this._generateFromFeature(s);if(this.cacheImages[a]){this.cacheImages[a].imgCount++;var l=new o.DotSymbolStyle(s);l.canvas=this.cacheImages[a].img.canvas,l.anchor=this.cacheImages[a].img.anchor,l.size=this.cacheImages[a].img.size,l.pxBounds=this.cacheImages[a].img.pxBounds,this.graphics[e]=new n.PlottingGraphic({_latlng:s.getLatLngs()[0],_image:l,_uuid:a})}else{if(0===s.components.length){this._tempDrawingLayer.addFeatures(s);var r=new o.DotSymbolStyle(s);r.render(),this.cacheImages[a]={img:r.getCacheInfo(),imgCount:1},this.graphics[e]=new n.PlottingGraphic({_latlng:s.getLatLngs()[0],_image:r,_uuid:a})}this._tempDrawingLayer.removeFeatures(s)}this.graphics[e].layer=this,s.graphic=this.graphics[e]}this._update()},removeGraphics:function(t){L.Util.isArray(t)||(t=[t]);var e=this;t.map(function(t){var i=SuperMap.Util.indexOf(e.selectGraphics,t);-1!==i&&(t.updateImage(),e._tempDrawingLayer.removeFeatures(t.getImage().feature),e.selectGraphics.splice(i,1));var o=t.getUuid();e.cacheImages[o]&&0==--e.cacheImages[o].imgCount&&delete e.cacheImages[o],-1!==(i=SuperMap.Util.indexOf(e.graphics,t))&&e.graphics.splice(i,1),e._renderer._clear()}),this._update()},updateGraphics:function(t){L.Util.isArray(t)||(t=[t]);var e=this;t.map(function(t){var i=t.getUuid();e.cacheImages[i]&&0==--e.cacheImages[i].imgCount&&delete e.cacheImages[i],e._renderer._clear(),i=e._generateFromFeature(t.getImage().feature),e.cacheImages[i]||(t.getImage().render(),t.setUuid(i),t.setLatLng(t.getImage().feature.getLatLngs()[0]),e.cacheImages[i]={img:t.getImage().getCacheInfo(),imgCount:1})}),this._update()},removeAllGraphics:function(){var t=this;if(0!==this.selectGraphics.length)for(var e=0,i=this.selectGraphics.length;e<i;e++)this.selectGraphics[e].updateImage(),t._tempDrawingLayer.removeFeatures(this.selectGraphics[e].getImage().feature);this.selectGraphics=[],this.graphics=[],this.cacheImages={},this._update()},_generateFromFeature:function(t){return(t.libID+t.code+Math.round(t.symbolSize.w)+Math.round(t.symbolSize.h)+t.textContent+t.annotationPosition+t.style.color+t.style.weight+t.style.opacities+t.dashArray+t.fill+t.fillColor+t.dRotate).toString()},onAdd:function(){this._canvas=document.createElement("canvas");var t=this._map.getPixelBounds().getSize().x,e=this._map.getPixelBounds().getSize().y;this._canvas.width=t,this._canvas.height=e,this._ctx=this._canvas.getContext("2d"),L.Path.prototype.onAdd.call(this),this._map.addLayer(this._tempDrawingLayer)},onRemove:function(){L.Path.prototype.onRemove.call(this),this._map.removeLayer(this._tempDrawingLayer)},_update:function(){this._map&&this._updatePath()},_containsPoint:function(t){return!1},_updatePath:function(){this._renderer._drawPlottingGraphics(this._getGraphicsInBounds())},_project:function(){var t=this;t._getGraphicsInBounds().map(function(e){var i=t._map.latLngToLayerPoint(e.getLatLng()),o=L.point(i.x-e.getImage().anchor.x,i.y-e.getImage().anchor.y),n=L.point(i.x+(e.getImage().size[0]-e.getImage().anchor.x),i.y+(e.getImage().size[1]-e.getImage().anchor.y));e._pxBounds=L.bounds(o,n)}),t._pxBounds=L.bounds(L.point(0,0),L.point(this._canvas.width,this._canvas.height))},_getGraphicsInBounds:function(){var t=[],e=this._map.getBounds();return this.graphics.map(function(i){e.contains(i.getLatLng())&&t.push(i)}),t},_handleClick:function(t){var e=this;if(0!==this.selectGraphics.length)for(var i=0,o=this.selectGraphics.length;i<o;i++)this.selectGraphics[i].updateImage(),e._tempDrawingLayer.removeFeatures(this.selectGraphics[i].getImage().feature);this.selectGraphics=[];for(var n=e._getGraphicsInBounds(),s=0,o=n.length;s<o;s++){var a=e._map.latLngToLayerPoint(n[s].getLatLng()),l=L.point(a.x-n[s].getImage().anchor.x,a.y-n[s].getImage().anchor.y),r=L.point(a.x+(n[s].getImage().size[0]-n[s].getImage().anchor.x),a.y+(n[s].getImage().size[1]-n[s].getImage().anchor.y));if(L.bounds(l,r).contains(e._map.latLngToLayerPoint(t.latlng))){this.selectGraphics.push(n[s]);var u=e._generateFromFeature(n[s].getImage().feature);e.cacheImages[u]&&0==--e.cacheImages[u].imgCount&&delete e.cacheImages[u],e._tempDrawingLayer.addFeatures(n[s].getImage().feature),e._map.getPlotEditControl()&&(n[s].getImage().feature.enableEdit||e._map.getPlotEditControl().enableEditFeatures(n[s].getImage().feature),e._map.getPlotEditControl().selectFeatures(n[s].getImage().feature));break}}e._map.getPlotEditControl()&&(e._map.getPlotEditControl()._onTriggerMapClick=!1),L.DomEvent.stopPropagation(t)}}),l=e.plottingGraphicLayer=function(t){return new a(t)};L.supermap.plotting.graphicLayer=l},function(t,e,i){"use strict";var o=i(1),n=i(15),s=i(38),a=i(122),l=i(36),r=i(123),u=i(124),p=i(128),h=i(7),c=i(120),y=i(125),g=i(129),d=i(130),f=i(131),S=i(132),P=i(37),m=i(118),b=i(18),M=i(17),v=i(127),_=i(126),T=i(119),x=i(16),O=i(121),A=i(14);i(4);L.supermap.plotting.PlottingObject.createSymbol=function(t,e,i,w,D,E){w||(w={}),w.custom=E;var I=null;if(0===t)switch(e){case SuperMap.Plot.SymbolType.ARCREGION:I=new O.ArcRegion(t,e,i,w);break;case SuperMap.Plot.SymbolType.MISSILEROUTE:I=new _.MissileRoute(t,e,i,w);break;case SuperMap.Plot.SymbolType.NAVYROUTE:I=new v.NavyRoute(t,e,i,w);break;case SuperMap.Plot.SymbolType.AIRROUTE:I=new T.AirRoute(t,e,i,w);break;case SuperMap.Plot.SymbolType.LITERATESIGN:I=new M.LiterateSign(t,e,i,w);break;case SuperMap.Plot.SymbolType.ROUTENODE:I=new b.RouteNode(t,e,i,w);break;case SuperMap.Plot.SymbolType.ARROWLINE:I=new a.ArrowLine(t,e,i,w);break;case SuperMap.Plot.SymbolType.COMBINATIONALCIRCLE:I=new r.CombinationalCircle(t,e,i,w);break;case SuperMap.Plot.SymbolType.CONCENTRICCIRCLE:I=new u.ConcentricCircle(t,e,i,w);break;case SuperMap.Plot.SymbolType.POLYGONREGION:I=new p.PolygonRegion(t,e,i,w);break;case SuperMap.Plot.SymbolType.PATHTEXT:I=new s.PathText(t,e,i,w);break;case SuperMap.Plot.SymbolType.LINERELATION:I=new l.LineRelation(t,e,i,w);break;case SuperMap.Plot.SymbolType.GROUPOBJECT:I=new h.GroupObject(t,e,i,w);break;case SuperMap.Plot.SymbolType.ANNOFRAMESYMBOL:case SuperMap.Plot.SymbolType.ANNOFRAMESYMBOLM:case SuperMap.Plot.SymbolType.LINEMARKING:case SuperMap.Plot.SymbolType.SYMBOLTEXTBOX:I=new c.AnnotationFrame(t,e,i,w);break;case SuperMap.Plot.SymbolType.INTERFERENCEBEAM:I=new y.InterferenceBeam(t,e,i,w);break;case SuperMap.Plot.SymbolType.SATELLITE:I=new g.Satellite(t,e,i,w);break;case SuperMap.Plot.SymbolType.SATELLITETIMEWINDOWS:I=new d.SatelliteTimeWindows(t,e,i,w);break;case SuperMap.Plot.SymbolType.SYMBOLTEXT:I=new f.SymbolText(t,e,i,w);break;case SuperMap.Plot.SymbolType.SYMBOLTEXT1:I=new S.SymbolText1(t,e,i,w);break;case SuperMap.Plot.SymbolType.FLAGGROUP:I=new x.FlagGroup(t,e,i,w);break;case SuperMap.Plot.SymbolType.NAVYDEPLOYMENT:I=new P.NavyDeployment(t,e,i,w);break;case SuperMap.Plot.SymbolType.AIRDEPLOYMENT:I=new m.AirDeployment(t,e,i,w);break;case SuperMap.Plot.SymbolType.AVOIDREGION:return new A.AvoidRegion(t,e,i,w);default:I=new o.AlgoSymbol(t,e,i,w)}else I=w.symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL||w.symbolData&&w.symbolData.symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL?new n.DotSymbol(t,e,i,w):new o.AlgoSymbol(t,e,i,w);return SuperMap.Plot.AnalysisSymbol.mergeDefaultStyleToLayer(I),D&&SuperMap.Util.extend(I.style,D),i&&null!==i&&(SuperMap.Util.isArray(i)||(i=[i]),i.length>I.maxEditPts&&(i=i.slice(0,I.maxEditPts)),I.latLngs=L.Util.cloneLatLngs(i)),I}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plotting=void 0;!function(t){t&&t.__esModule}(i(104));var o=i(25),n=i(27),s=i(138),a=null,l=e.Plotting=L.Evented.extend({serverUrl:null,map:null,defaultStyle:null,sitDataManager:null,symbolLibManager:null,clientID:null,animationManager:null,initialize:function(t,e,i){t&&null!==t&&(l.prototype.map=t),e&&(l.prototype.serverUrl=e),this.defaultStyle=new SuperMap.Plot.DefaultStyle,this.sitDataManager=new o.SitDataManager(this.map,this.serverUrl),this.symbolLibManager=new n.SymbolLibManager(this.serverUrl),this.animationManager=new s.GOAnimationManager(this.map,this.serverUrl)},destroy:function(){l.prototype.serverUrl=null,l.prototype.map=null,this.defaultStyle&&(this.defaultStyle.destroy(),this.defaultStyle=null),this.sitDataManager&&(this.sitDataManager.destroy(),this.sitDataManager=null),this.symbolLibManager&&(this.symbolLibManager.destroy(),this.symbolLibManager=null),this.clientID=null,null!==this.animationManager&&(this.animationManager.destroy(),this.animationManager=null),a=null},getDefaultStyle:function(){return this.defaultStyle},getSitDataManager:function(){return this.sitDataManager},getSymbolLibManager:function(){return this.symbolLibManager},getGOAnimationManager:function(){return this.animationManager},getClientID:function(){return this.clientID},setClientID:function(t){this.clientID=t},setMap:function(t){l.prototype.map=t,null===this.sitDataManager.map&&(o.SitDataManager.prototype.map=t),null===this.animationManager.map&&this.animationManager.setMap(t)},setPlotUrl:function(t){l.prototype.serverUrl=t,null===this.sitDataManager.serverUrl&&(o.SitDataManager.prototype.serverUrl=t),null===this.symbolLibManager.url&&(n.SymbolLibManager.prototype.url=t),null===this.animationManager.serverUrl&&(s.GOAnimationManager.prototype.serverUrl=t)}});L.supermap.plotting.getControl=function(t,e){return null===a&&(a=new l(t,e)),t&&null!==t&&null===a.map&&a.setMap(t),e&&null!==e&&null===a.serverUrl&&a.setPlotUrl(e),a}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.query=e.Query=void 0;var o=i(4),n=e.Query=L.Class.extend({map:null,initialize:function(t){t&&null!==t&&(this.map=t)},destroy:function(){this.map=null,delete this.map},captureGObject:function(t){var e=[];if(t){for(var i=this.map.getPlottingLayers(),n=0;n<i.length;n++){var s=i[n];for(var a in s.features){var l=s.features[a];l instanceof o.PlottingObject&&l.symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL&&(t.lng===l.getLatLngs()[0].lng&&t.lat===l.getLatLngs()[0].lat&&e.push(l))}}return e}return 0},getGObjectsInPolygon:function(t){var e=[];if(t&&0!==t.length){if(L.Util.isArray(t)||(t=[t]),t.length<=2)return e;for(var i=this.map.getPlottingLayers(),n=0;n<i.length;n++){var s=i[n];for(var a in s.features){var l=s.features[a];if(l instanceof o.PlottingObject){var r=l.getBounds().getCenter();if(null===r)return;this._ptIsInPolygon(t,r)&&e.push(l)}}}return e}},_ptIsInPolygon:function(t,e){if(!t||null===t||0===t.length)return!1;for(var i=0,o=t.length,n=0;n<o;n++){var s=t[n],a=t[(n+1)%o];if(s.lat!==a.lat){var l=s.lat<a.lat?s.lat:a.lat,r=s.lat>a.lat?s.lat:a.lat;e.lat<l||e.lat>r||(e.lat-s.lat)*(a.lng-s.lng)/(a.lat-s.lat)+s.lng>e.lng&&i++}}return i%2==1},getGObjectsInCircle:function(t,e){if(t&&e){for(var i=[],n=this.map.getPlottingLayers(),s=0;s<n.length;s++){var a=n[s];for(var l in a.features){var r=a.features[l];if(r instanceof o.PlottingObject){var u=r.getBounds().getCenter();if(null===u)continue;Math.abs(e)>Math.sqrt(Math.pow(t.lng-u.lng,2)+Math.pow(t.lat-u.lat,2))&&i.push(r)}}}return i}},getGObjectsInRect:function(t,e){if(t&&e){for(var i=[],n=this.map.getPlottingLayers(),s=0;s<n.length;s++){var a=n[s];for(var l in a.features){var r=a.features[l];if(r instanceof o.PlottingObject){var u=r.getBounds().getCenter();if(null===u)continue;t.lng<e.lng&&t.lat>e.lat?u.lng>t.lng&&u.lng<e.lng&&u.lat<t.lat&&u.lat>e.lat&&i.push(r):u.lng<t.lng&&u.lng>e.lng&&u.lat<t.lat&&u.lat>e.lat&&i.push(r)}}}return i}}}),s=e.query=function(t){return new n(t)};L.supermap.plotting.query=s},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.smlFileService=e.SMLFileService=void 0;var n=o(i(101)),s=o(i(98)),a=(o(i(100)),e.SMLFileService=L.supermap.ServiceBase.extend({initialize:function(t,e){L.supermap.ServiceBase.prototype.initialize.call(this,t,e)},getSMLInfos:function(t,e,i){var o=this;return i||(i=o),new n.default(o.url,{eventListeners:{scope:i,processCompleted:e,processFailed:e}}).processAsync(t),o},editSMLFile:function(t,e,i){var o=this;return i||(i=o),new s.default(o.url,{eventListeners:{scope:i,processCompleted:e,processFailed:e}}).processAsync(t),o}})),l=e.smlFileService=function(t,e){return new a(t,e)};L.supermap.smlFileService=l},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.symbolInfoService=e.SymbolInfoService=void 0;var n=o(i(22)),s=(o(i(103)),e.SymbolInfoService=L.supermap.ServiceBase.extend({initialize:function(t,e){L.supermap.ServiceBase.prototype.initialize.call(this,t,e)},getSymbolInfo:function(t,e,i){var o=this;return i||(i=o),new n.default(o.url,{serverType:o.options.serverType,eventListeners:{scope:i,processCompleted:e,processFailed:e}}).processAsync(t),o}})),a=e.symbolInfoService=function(t,e){return new s(t,e)};L.supermap.symbolInfoService=a},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.symbolLibService=e.SymbolLibService=void 0;var n=o(i(20)),s=o(i(21)),a=(o(i(99)),e.SymbolLibService=L.supermap.ServiceBase.extend({initialize:function(t,e){L.supermap.ServiceBase.prototype.initialize.call(this,t,e)},getLibIDs:function(t,e){var i=this;return e||(e=i),new n.default(i.url,{eventListeners:{scope:e,processCompleted:t,processFailed:t}}).processAsync(),i},getLibInfo:function(t,e,i){var o=this;return i||(i=o),new s.default(o.url,{eventListeners:{scope:i,processCompleted:e,processFailed:e}}).processAsync(t),o}})),l=e.symbolLibService=function(t,e){return new a(t,e)};L.supermap.symbolLibService=l},function(t,e,i){"use strict";L.supermap.plotting=L.supermap.plotting||{},L.Util.latLngsToSuperMapPoints=function(t){var e=[];L.Util.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++)e.push(new SuperMap.Geometry.Point(t[i].lng,t[i].lat));return e},L.Util.superMapPointsToLatLngs=function(t){var e=[];L.Util.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++)e.push(L.latLng(t[i].y,t[i].x));return e},L.Util.cloneLatLngs=function(t){var e=[];L.Util.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++)e.push(t[i].clone());return e},L.Util.moveLatLngs=function(t,e,i){L.Util.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++)L.Util.isArray(t[o])?L.Util.moveLatLngs(t[o],e,i):(t[o].lat+=e,t[o].lng+=i)},L.Util.rotateLatLngs=function(t,e,i){L.Util.isArray(t)||(t=[t]);for(var o=i*(Math.PI/180),n=Math.cos(o),s=Math.sin(o),a=0;a<t.length;a++)if(L.Util.isArray(t[a]))L.Util.rotateLatLngs(t[a],e,i);else{var l=t[a].lat-e.lat,r=t[a].lng-e.lng;t[a].lat=r*s+l*n+e.lat,t[a].lng=r*n-l*s+e.lng}},L.Util.resizeLatLngs=function(t,e,i){L.Util.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++)L.Util.isArray(t[o])?L.Util.resizeLatLngs(t[o],e,i):(t[o].lat=e.lat+i*(t[o].lat-e.lat),t[o].lng=e.lng+i*(t[o].lng-e.lng))}},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=o(i(0)),u=(o(i(3)),function(t){function e(t){n(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1001",i.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,i.minEditPts=2,i.maxEditPts=99999,i.symbolName="平行平耳箭头",0===i.getScaleValues().length&&(i.getScaleValues().push(.1),i.getScaleValues().push(.2),i.getScaleValues().push(0),i.getScaleValues().push(.3),i.getScaleValues().push(.08)),i}return a(e,r["default"]),l(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),e=(t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length;if(e>=this.minEditPts){this.clearScalePoints();var i=SuperMap.Plot.PlottingUtil.clonePoints(t),o=!1;void 0!==i[0].z&&(o=!0);var n=SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePts(t,this.getScaleValues(),SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_PARALLEL),s=n.arrowTouLen,a=n.leftBodyPts,l=n.rightBodyPts,r=[];r.push(a[a.length-1]),r.push(l[l.length-1]);var u=[];u.push(this.getScaleValues()[3]),u.push(this.getScaleValues()[4]),u.push(this.getScaleValues()[0]),u.push(this.getScaleValues()[1]);var p=SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePts(t,r,u,s,SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_WITHOUT_EAR),h=[];if(o){for(var c=[],y=[],g=[],d=0;d<e-1;d++)y.push({x:a[d].x,y:a[d].y,z:i[d].z}),g.push({x:l[d].x,y:l[d].y,z:i[d].z});var f={x:i[e-2].x,y:i[e-2].y,z:i[e-2].z},S={x:i[e-1].x,y:i[e-1].y,z:i[e-1].z},P=this.ComputeZValue(a[e-1],S,f);y.push({x:a[e-1].x,y:a[e-1].y,z:P});var m=this.ComputeZValue(l[e-1],S,f);g.push({x:l[e-1].x,y:l[e-1].y,z:m});for(d=0;d<p.length;d++){var b=this.ComputeZValue(p[d],S,f);c.push({x:p[d].x,y:p[d].y,z:b})}h=(h=h.concat(y)).concat(c);for(M=g.length-1;M>=0;M--)h.push(g[M]);v=new SuperMap.Geometry.Point((r[0].x+r[1].x)/2,(r[0].y+r[1].y)/2);(_=new SuperMap.Geometry.Point(v.x,v.y)).isScalePoint=!0,_.tag=0,this.addScalePoint(_),(T=new SuperMap.Geometry.Point(a[a.length-1].x,a[a.length-1].y)).isScalePoint=!0,T.tag=1,this.addScalePoint(T),(x=new SuperMap.Geometry.Point(p[0].x,p[0].y)).isScalePoint=!0,x.tag=2,this.addScalePoint(x);for(d=0;d<this.getScalePoints().length;d++){var L=new SuperMap.Geometry.Point(this.getScalePoints()[d].x,this.getScalePoints()[d].y);this.getScalePoints()[d].z=this.ComputeZValue(L,S,f)}}else{h=(h=h.concat(a)).concat(p);for(var M=l.length-1;M>=0;M--)h.push(l[M]);var v=new SuperMap.Geometry.Point((r[0].x+r[1].x)/2,(r[0].y+r[1].y)/2),_=new SuperMap.Geometry.Point(v.x,v.y);_.isScalePoint=!0,_.tag=0,this.addScalePoint(_);var T=new SuperMap.Geometry.Point(a[a.length-1].x,a[a.length-1].y);T.isScalePoint=!0,T.tag=1,this.addScalePoint(T);var x=new SuperMap.Geometry.Point(p[0].x,p[0].y);x.isScalePoint=!0,x.tag=2,this.addScalePoint(x)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var i=new SuperMap.Geometry.Point(this.getScalePoints()[0].x,this.getScalePoints()[0].y),o=new SuperMap.Geometry.Point(this.getScalePoints()[1].x,this.getScalePoints()[1].y),n=new SuperMap.Geometry.Point(this.getScalePoints()[2].x,this.getScalePoints()[2].y),s=this.getScaleValues()[0],a=SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints),l=a*s;if(0==t){var r=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,this.controlPoints[this.controlPoints.length-2],this.controlPoints[this.controlPoints.length-1]),u=r.projectPoint;if(r.isOnline){g=SuperMap.Plot.PlottingUtil.distance(u,this.controlPoints[this.controlPoints.length-1]);this.getScaleValues()[0]=g/a}}else if(1==t){var u=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,o,n).projectPoint,p=SuperMap.Plot.PlottingUtil.distance(u,i);this.getScaleValues()[1]=p/l}else if(2==t){var h=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,this.controlPoints[1],n).projectPoint,c=SuperMap.Plot.PlottingUtil.pointProjectToSegment(h,i,this.controlPoints[1]),y=c.projectPoint,g=SuperMap.Plot.PlottingUtil.distance(y,i);!0===c.inOnline?this.getScaleValues()[4]=-g/l:this.getScaleValues()[4]=g/l}}this.calculateParts()}}]),e}());e.default=u,SuperMap.Geometry.AlgoSymbol1001=u},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=o(i(0)),u=(o(i(3)),o(i(33)),function(t){function e(t){n(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.MIN_GEOPT_COUNT=2,i.MAX_GEOPT_COUNT=1024,i.SV1_defaultATLenDivABLen=0,i.SV2_defaultAYPosScale=.65,i.SV_AJCtrl=.6,i.SV_ArrowWoCtrl=.6,i.SV2_DefaultAJWidDiviedByATLen=.148,i.SV3_DefaultAEWidDividedByATLen=.4,i.SV4_DefaultAELenDividedByATLen=.3,i.SV_ATScaleParameter=1.25,i.SV_ATLenDividedByATWid=1.35,i.SV_ATWidDividedByArrowWeiWid=.5,i.AB_VERTEX_COUNT=4,i.MIN_PTCOUNT_PERARROW=3,i.ATL_DIV_AWW=.7,i.ATL_DIV_ABL=.12,i.ATL_DIV_ABL_1=.18,i.DEFAULT_ARROW_TAIL_POS=.12,i.DUOJIANTOU_TAIL_RATE_1=8,i.DUOJIANTOU_TAIL_RATE_2=3,i.DUOJIANTOU_TAIL_RATE_3=.6,i.AB_CTRLPT_RATE1=0,i.AB_CTRLPT_RATE2=3,i.AB_CTRLPT_RATE3=.5,i.MIN_SCALEVALUE=.1,i.MAX_SCALEVALUE=1,i.m_scalePoints=null,i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1002",i.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,i.symbolName="多箭头",i.minEditPts=3,i.maxEditPts=512,i.clearScalePoints(),i.m_scalePoints=[],i}return a(e,r["default"]),l(e,[{key:"calculateParts",value:function(){this.clearComponents(),this.m_scalePoints=[];var t=SuperMap.Plot.PlottingUtil.clearSamePts(this.controlPoints);if((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length>=2&&t.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){var e=this.operateCtrlPts(t),i=e.length,o=Math.floor(i/this.MIN_PTCOUNT_PERARROW),n=this.getScaleValues().length;if(n<2*o-1){0==n&&(this.getScaleValues().push(this.SV1_defaultATLenDivABLen),n++);for(var s=2*o-1-n,a=0;a<s;a+=2)this.getScaleValues().splice(n/2+1,0,this.SV1_defaultATLenDivABLen),this.getScaleValues().splice(this.getScaleValues().length,0,this.SV2_defaultAYPosScale)}else if(n>2*o-1){for(a=0;a<o;a++)this.getScaleValues().push(this.SV1_defaultATLenDivABLen);for(a=0;a<o-1;a++)this.getScaleValues().push(this.SV2_defaultAYPosScale)}var l=this.arrowMeshs(e);SuperMap.Plot.PlottingUtil.clearSamePts(l.shapePts);var r=!1;if(void 0!==t[0].z&&(r=!0),r){var u=this.operateCtrlPts3D(t),p=l.arrLeftPts2D,h=l.arrRightPts2D,c=l.arrHeadPts2D;l.shapePts;if(o!=p.length&&o!=h.length&&o!=c.length)return!1;for(var y=[],a=0;a<o;a++){for(var g=[],d=3*a;d<3*(a+1)&&d<u.length;d++)g.push(u[d]);y.push(g)}for(var f=[],S=[],P=[],a=0;a<o;a++)if(!(2>y[a].length)){for(var m=p[a][p[a].length-1],b=h[a][0],L=new SuperMap.Geometry.Point(.5*(m.x+b.x),.5*(m.y+b.y)),M=y[a][y[a].length-1],v=y[a][y[a].length-2],_=this.ComputeZValue(L,M,v),T={x:L.x,y:L.y,z:_},x=[],O=[],A=0;A<y[a].length-1;A++)if(0==a)O.push(y[a][A]);else{D={x:y[a][A].x,y:y[a][A].y,z:.5*(y[a][A].z+y[a-1][A].z)};O.push(D)}O.push(T),this.ComputeBeizerZValueByDis(O,p[a],x),f.push(x),x=[];var w=[];w.push(T);for(A=y[a].length-2;A>=0;A--)if(a==o-1)w.push(y[a][A]);else{var D={x:y[a][A].x,y:y[a][A].y,z:.5*(y[a][A].z+y[a+1][A].z)};w.push(D)}this.ComputeBeizerZValueByDis(w,h[a],x),S.push(x),x=[];for(var E=c[a],A=0;A<E.length;A++){_=this.ComputeZValue(E[A],M,v);x.push({x:E[A].x,y:E[A].y,z:_})}P.push(x)}for(var I=[],a=0;a<o;a++)I=(I=(I=I.concat(f[a])).concat(P[a])).concat(S[a]);return SuperMap.Plot.PlottingUtil.clearSamePts(I),l.shapePts.length>0&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,I,{surroundLineFlag:!1}),this.clearScalePoints(),this.setScalePoints(this.getScalePoints().concat(this.m_scalePoints)),!0}l.shapePts.length>0&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,l.shapePts,{surroundLineFlag:!1}),this.clearScalePoints();for(a=0;a<this.m_scalePoints.length;a++)this.m_scalePoints[a].isScalePoint=!0,this.m_scalePoints[a].tag=a,this.addScalePoint(this.m_scalePoints[a])}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var i=this.operateCtrlPts(this.controlPoints),o=i.length,n=Math.floor(o/this.MIN_PTCOUNT_PERARROW),s=0;if(t<n){var a=[],l=t*this.MIN_PTCOUNT_PERARROW;a[0]=i[l],a[1]=i[l+1],a[2]=i[l+2];var r=SuperMap.Plot.PlottingUtil.polylineDistance(a),u=new SuperMap.Geometry.Point(0,0),p=new SuperMap.Geometry.Point(0,0),h=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrianglePoints(this.AB_CTRLPT_RATE1,this.AB_CTRLPT_RATE2,a[0],a[1],a[2],u,p),SuperMap.Plot.PlottingUtil.getTrapezoidPoints(this.AB_CTRLPT_RATE3,a[2],a[1],p,h);(L=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(a[2],h,e)).dLen2;s=(M=L.dLen1)/(this.SV4_DefaultAELenDividedByATLen+1)/r}else{var c=[],y=[],g=(t-n)*this.MIN_PTCOUNT_PERARROW;c[0]=i[g],c[1]=i[g+1],c[2]=i[g+2];var d=(t-n+1)*this.MIN_PTCOUNT_PERARROW;y[0]=i[d],y[1]=i[d+1],y[2]=i[d+2];var f=new SuperMap.Geometry.Point(0,0),S=new SuperMap.Geometry.Point(0,0),P=new SuperMap.Geometry.Point(0,0);f.x=.5*(c[2].x+y[2].x),S.x=.5*(c[1].x+y[1].x),P.x=.5*(c[0].x+y[0].x),f.y=.5*(c[2].y+y[2].y),S.y=.5*(c[1].y+y[1].y),P.y=.5*(c[0].y+y[0].y);var m=SuperMap.Plot.PlottingUtil.distance(f,S),b=SuperMap.Plot.PlottingUtil.distance(P,S),L=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(f,S,e),M=(L.dLen2,L.dLen1);M<m?s=M/(m+b):((L=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(S,P,e)).dLen2,s=((M=L.dLen1)+m)/(m+b))}s>this.MAX_SCALEVALUE?s=this.MAX_SCALEVALUE:s<this.MIN_SCALEVALUE&&(s=this.MIN_SCALEVALUE),this.getScaleValues()[t]=s}this.calculateParts()}},{key:"arrowMeshs",value:function(t){var e=[],i=[],o=[],n=[],s=new SuperMap.Plot.Path2D,a=t.length,l=Math.floor(a/this.MIN_PTCOUNT_PERARROW),r=this.generateAWWidth(l,t),u=[],p=[],h=(new SuperMap.Geometry.Point(0,0),0),c=0,y=0,g=[];for(c=0,y=0;c<l;c++,y+=this.MIN_PTCOUNT_PERARROW){g[0]=t[y],g[1]=t[y+1],g[2]=t[y+2],h=this.getScaleValues()[c];var d=this.generateArrowBodyPts(g,r[c],h);h=d.dATLenDivABLen,u[c]=d.arrowBodyPts,p.push(h)}var f=[],S=0,P=0,m=0,b=[],L=[];for(c=0;c<l-1;c++,P+=this.MIN_PTCOUNT_PERARROW){m=P+this.MIN_PTCOUNT_PERARROW,b[0]=t[P],b[1]=t[P+1],b[2]=t[P+2],L[0]=t[m],L[1]=t[m+1],L[2]=t[m+2],S=this.getScaleValues()[l+c];var M=this.generateAYPts(b,u[c],L,u[c+1],S);f.push(M.arrowLeftYaoPts),f.push(M.arrowRightYaoPts)}var v=[],_=u[0],T=[],x=0,O=[];s.MoveTo(_[0]),s.CurveTo(_[1],_[2],_[3]),s.CurveTo(_[4],_[5],_[6]),s.ToSubPathPolygons(T),i.push(T[0]),x=T[0].length;for(I=7;I<10;I++)s.LineTo(_[I]);for(T=[],s.ToSubPathPolygons(T);x<T[0].length;x++)O.push(T[0][x]);for(n.push(O),v.push(_[0]),v.push(t[0]),c=1,y=this.MIN_PTCOUNT_PERARROW;c<l;c++,y+=this.MIN_PTCOUNT_PERARROW){var A=u[c],w=c+c-2,D=f[w];for(s.LineTo(D[0]),s.CurveTo(D[1],D[2],D[3]),T=[],O=[],s.ToSubPathPolygons(T);x<T[0].length;x++)O.push(T[0][x]);o.push(O);var E=f[w+1];for(s.CurveTo(E[1],E[2],E[3]),T=[],O=[],s.ToSubPathPolygons(T);x<T[0].length;x++)O.push(T[0][x]);i.push(O);for(var I=7;I<10;I++)s.LineTo(A[I]);for(T=[],O=[],s.ToSubPathPolygons(T);x<T[0].length;x++)O.push(T[0][x]);n.push(O),v.push(t[y].clone())}var N=u[l-1];for(s.LineTo(N[10]),s.CurveTo(N[11],N[12],N[13]),s.CurveTo(N[14],N[15],N[16]),T=[],O=[],s.ToSubPathPolygons(T);x<T[0].length;x++)O.push(T[0][x]);o.push(O),v.push(N[16]);var C=[];return s.ToSubPathPolygons(C),e=C[0],{shapePts:e,arrLeftPts2D:i,arrRightPts2D:o,arrHeadPts2D:n}}},{key:"operateCtrlPts",value:function(t){var e=SuperMap.Plot.PlottingUtil.clonePoints(t),i=e.length,o=Math.floor(i/this.MIN_PTCOUNT_PERARROW),n=i%this.MIN_PTCOUNT_PERARROW,s=new SuperMap.Geometry.Point;if(2==n&&(s.x=.5*(e[i-2].x+e[i-1].x),s.y=.5*(e[i-2].y+e[i-1].y),s.x==e[i-1].x&&s.y==e[i-1].y||(e.push(e[i-1].clone()),e[i-1]=s,i++,o++)),i>3)for(var a=o-1,l=0,r=a;l<a;r--,l++)for(var u=r*this.MIN_PTCOUNT_PERARROW,p=0;p<u;p+=this.MIN_PTCOUNT_PERARROW)if(!SuperMap.Plot.PlottingUtil.isRight(e[p+3],e[p+1],e[p+2])){var h=e[p];e[p]=e[p+3],e[p+3]=h,h=e[p+1],e[p+1]=e[p+4],e[p+4]=h,h=e[p+2],e[p+2]=e[p+5],e[p+5]=h}return e}},{key:"operateCtrlPts3D",value:function(t){var e=t,i=e.length,o=Math.floor(i/this.MIN_PTCOUNT_PERARROW),n={x:0,y:0,z:0};if(2==i%3&&(n.x=.5*(e[i-2].x+e[i-1].x),n.y=.5*(e[i-2].y+e[i-1].y),n.z=.5*(e[i-2].z+e[i-1].z),n.x==e[i-1].x&&n.y==e[i-1].y&&n.z==e[i-1].z||(e.push(e[i-1]),e[i-1]=n,i++,o++)),i>3)for(var s=o-1,a=0,l=s;a<s;l--,a++)for(var r=3*l,u=0;u<r;u+=3)if(!SuperMap.Plot.PlottingUtil.isRight(e[u+3],e[u+1],e[u+2])){var p=e[u];e[u]=e[u+3],e[u+3]=p,p=e[u+1],e[u+1]=e[u+4],e[u+4]=p,p=e[u+2],e[u+2]=e[u+5],e[u+5]=p}return e}},{key:"generateAWWidth",value:function(t,e){var i=[];if(t>0)if(1==t)i.push(0);else{var o=SuperMap.Plot.PlottingUtil.distance(e[0],e[this.MIN_PTCOUNT_PERARROW]);i.push(o);for(var n=1,s=this.MIN_PTCOUNT_PERARROW;n<t-1;n++,s+=this.MIN_PTCOUNT_PERARROW)o=.5*(SuperMap.Plot.PlottingUtil.distance(e[s-this.MIN_PTCOUNT_PERARROW],e[s])+SuperMap.Plot.PlottingUtil.distance(e[s],e[s+this.MIN_PTCOUNT_PERARROW])),i.push(o);o=SuperMap.Plot.PlottingUtil.distance(e[s-this.MIN_PTCOUNT_PERARROW],e[s]),i.push(o)}return i}},{key:"generateArrowBodyPts",value:function(t,e,i){var o=[],n=[],s=[],a=[],l=[],r=[],u=[],p=t.length-1;if(p<2)return i=0,{dATLenDivABLen:i,arrowBodyPts:o};var h=i,c=this.SV2_DefaultAJWidDiviedByATLen,y=this.SV3_DefaultAEWidDividedByATLen,g=this.SV4_DefaultAELenDividedByATLen,d=SuperMap.Plot.PlottingUtil.clonePoints(t),f=SuperMap.Plot.PlottingUtil.polylineDistance(d),S=0==e?f*this.ATL_DIV_ABL_1:(f+e)*this.ATL_DIV_ABL,P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(S,d[1],d[0]);n[1]=P.pntLeft.clone(),s[1]=P.pntRight.clone();var m=0;m=SuperMap.Plot.PlottingUtil.equalFuzzy(h,0,1e-14)?S*this.ATL_DIV_AWW:f*h;var b=SuperMap.Plot.PlottingUtil.distance(d[1],d[2]);m+m>b&&(m=.5*b);var L=m*c;d.push(d[p].clone());var M=0,v=0;M=f-m;var _=[],T=0;for(T=2;T<=p;T++)v+=SuperMap.Plot.PlottingUtil.distance(d[T-1],d[T-2]),SuperMap.Plot.PlottingUtil.equalFuzzy(M,0,1e-14)?_[T]=0:SuperMap.Plot.PlottingUtil.equalFuzzy(M-v,0,1e-14)?_[T]=L:_[T]=L+(S-L)*Math.pow((M-v)/M,this.SV_ATScaleParameter);_[p+1]=L;var x=new SuperMap.Geometry.Point(0,0),O=new SuperMap.Geometry.Point(0,0),A=new SuperMap.Geometry.Point(0,0);for(T=2;T<=p;T++){SuperMap.Plot.PlottingUtil.getTrianglePoints(this.AB_CTRLPT_RATE1,this.AB_CTRLPT_RATE2,d[T-2],d[T-1],d[T],O,A),p==T&&SuperMap.Plot.PlottingUtil.getTrapezoidPoints(this.AB_CTRLPT_RATE3,d[p],d[p-1],A,x);P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(_[T],O,d[T-1]);s[T]=P.pntLeft,n[T]=P.pntRight}var w=x.clone();if(SuperMap.Plot.PlottingUtil.distance(d[p],w)>0){var D=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(m,d[p],x);d[p]=D.clone()}P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(L,d[p+1],d[p]);for(n[p+1]=P.pntLeft,s[p+1]=P.pntRight,T=2;T<=p;T++)SuperMap.Plot.PlottingUtil.getTrianglePoints(this.AB_CTRLPT_RATE2,this.AB_CTRLPT_RATE2,n[T-1],n[T],n[T+1],O,A),a[T]=O.clone(),l[T]=A.clone(),SuperMap.Plot.PlottingUtil.getTrianglePoints(this.AB_CTRLPT_RATE2,this.AB_CTRLPT_RATE2,s[T-1],s[T],s[T+1],O,A),r[T]=O.clone(),u[T]=A.clone();SuperMap.Plot.PlottingUtil.getTrapezoidPoints(this.AB_CTRLPT_RATE3,n[1],n[2],a[2],x),l[1]=x.clone(),SuperMap.Plot.PlottingUtil.getTrapezoidPoints(this.AB_CTRLPT_RATE3,s[1],s[2],r[2],x),u[1]=x.clone();var E,I;I=SuperMap.Plot.PlottingUtil.distance(n[p+1],n[p])*(1/3),(E=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(I,d[p],d[p+1])).x+=n[p+1].x-d[p].x,E.y+=n[p+1].y-d[p].y,I=(S-L)*Math.pow(I/M,this.SV_ATScaleParameter+.3),P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(I,n[p+1],E),a[p+1]=P.pntLeft.clone(),I=SuperMap.Plot.PlottingUtil.distance(s[p+1],s[p])*(1/3),(E=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(I,d[p],d[p+1])).x+=s[p+1].x-d[p].x,E.y+=s[p+1].y-d[p].y,I=(S-L)*Math.pow(I/M,this.SV_ATScaleParameter+.3),P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(I,s[p+1],E),r[p+1]=P.pntRight.clone();var N=[],C=m*g,R=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(C,d[p],d[p+1]);this.m_scalePoints.push(R.clone()),C=m*y,P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(C,d[p+1],R),N.push(P.pntRight),N.push(d[p+1]),N.push(P.pntLeft);var U=[];for(U.push(n[p+1]),T=p;T>=1;T--)U.push(a[T+1]),U.push(l[T]),U.push(n[T]);var G=[];for(T=1;T<=p;T++)G.push(s[T]),G.push(u[T]),G.push(r[T+1]);G.push(s[p+1]),o.push.apply(o,G),o.push.apply(o,N),o.push.apply(o,U),i=m/f;var B=[];for(T=U.length-1;T>=0;T--)B.push(U[T]);return{dATLenDivABLen:i,arrowBodyPts:o}}},{key:"generateAYPts",value:function(t,e,i,o,n){var s=new SuperMap.Geometry.Point(.5*(t[2].x+i[2].x),.5*(t[2].y+i[2].y)),a=new SuperMap.Geometry.Point(.5*(t[1].x+i[1].x),.5*(t[1].y+i[1].y)),l=new SuperMap.Geometry.Point(.5*(t[0].x+i[0].x),.5*(t[0].y+i[0].y)),r=SuperMap.Plot.PlottingUtil.distance(s,a),u=SuperMap.Plot.PlottingUtil.distance(l,a),p=n*(r+u),h=new SuperMap.Geometry.Point(0,0),c=new SuperMap.Geometry.Point(0,0),y=new SuperMap.Geometry.Point(0,0);if(p>r){p=r+u-p,h=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(p,l,a);var g=SuperMap.Plot.PlottingUtil.distance(t[1],t[0]),d=SuperMap.Plot.PlottingUtil.distance(i[1],i[0]);g=g*p/u,c=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(g,t[0],t[1]),d=d*p/u,y=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(d,i[0],i[1])}else{h=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(p,s,a);var f=SuperMap.Plot.PlottingUtil.distance(t[1],t[2]),S=SuperMap.Plot.PlottingUtil.distance(i[1],i[2]);f=f*p/r,c=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(f,t[2],t[1]),S=S*p/r,y=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(S,i[2],i[1])}this.m_scalePoints.push(h.clone());var P=this.SV_ArrowWoCtrl*SuperMap.Plot.PlottingUtil.distance(h,c),m=this.SV_ArrowWoCtrl*SuperMap.Plot.PlottingUtil.distance(h,y),b=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(P,h,c),L=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(m,h,y),M=e[11].clone(),v=e[10].clone(),_=o[5].clone(),T=o[6].clone(),x=SuperMap.Plot.PlottingUtil.intersectLines(v,M,h,c),O=SuperMap.Plot.PlottingUtil.distance(x.intersectPoint,v),A=SuperMap.Plot.PlottingUtil.distance(v,h);O=O>A?this.SV_AJCtrl*A:this.SV_AJCtrl*O;var w=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(O,v,M);M=w.clone(),e[11]=w.clone(),x=SuperMap.Plot.PlottingUtil.intersectLines(T,_,h,y),O=(O=SuperMap.Plot.PlottingUtil.distance(x.intersectPoint,T))>(A=SuperMap.Plot.PlottingUtil.distance(T,h))?this.SV_AJCtrl*A:this.SV_AJCtrl*O,_=(w=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(O,T,_)).clone(),o[5]=w.clone();var D=[];D.push(v),D.push(M),D.push(b),D.push(h);var E=[];return E.push(h),E.push(L),E.push(_),E.push(T),{arrowLeftYaoPts:D,arrowRightYaoPts:E}}}]),e}());e.default=u,SuperMap.Geometry.AlgoSymbol1002=u},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=o(i(0)),u=(o(i(3)),function(t){function e(t){n(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1003",i.minEditPts=2,i.maxEditPts=2,i.symbolName="梯形平耳箭头",0===i.getScaleValues().length&&(i.getScaleValues().push(.3),i.getScaleValues().push(.28),i.getScaleValues().push(.433333),i.getScaleValues().push(.53),i.getScaleValues().push(0)),i}return a(e,r["default"]),l(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),e=(t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length;if(e>=this.minEditPts){if(SuperMap.Plot.PlottingUtil.equalFuzzy(this.controlPoints[0].x,this.controlPoints[1].x)&&SuperMap.Plot.PlottingUtil.equalFuzzy(this.controlPoints[0].y,this.controlPoints[1].y))return;var i=SuperMap.Plot.PlottingUtil.clonePoints(t),o=!1;void 0!==i[0].z&&(o=!0);var n=SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePts(t,this.getScaleValues(),SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_TRAPEZOID),s=n.arrowTouLen,a=n.leftBodyPts,l=n.rightBodyPts,r=[];r.push(a[a.length-1]),r.push(l[l.length-1]);var u=[];u.push(this.getScaleValues()[3]),u.push(this.getScaleValues()[4]),u.push(0),u.push(0);var p=SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePts(t,r,u,s,SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_WITHOUT_EAR),h=[];h=(h=h.concat(a)).concat(p);for(var c=l.length-1;c>=0;c--)h.push(l[c]);if(h.push(a[0]),o){for(var y=[],g={x:i[1].x,y:i[1].y,z:i[1].z},d={x:i[0].x,y:i[0].y,z:i[0].z},f=0;f<h.length;f++){L=this.ComputeZValue(h[f],g,d);y.push({x:h[f].x,y:h[f].y,z:L})}M=new SuperMap.Geometry.Point((r[0].x+r[1].x)/2,(r[0].y+r[1].y)/2);(v=new SuperMap.Geometry.Point(M.x,M.y)).isScalePoint=!0,v.tag=0,this.addScalePoint(v),(_=new SuperMap.Geometry.Point(a[a.length-1].x,a[a.length-1].y)).isScalePoint=!0,_.tag=1,this.addScalePoint(_),(T=new SuperMap.Geometry.Point(p[0].x,p[0].y)).isScalePoint=!0,T.tag=2,this.addScalePoint(T);for(var S={x:i[e-1].x,y:i[e-1].y,z:i[e-1].z},P={x:i[e-2].x,y:i[e-2].y,z:i[e-2].z},m=[],f=0;f<this.getScalePoints().length;f++){var b={x:this.getScalePoints()[f].x,y:this.getScalePoints()[f].y},L=this.ComputeZValue(b,S,P);m.push({x:b.x,y:b.y,z:L})}this.clearScalePoints(),this.setScalePoints(m),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,y)}else{var M=new SuperMap.Geometry.Point((r[0].x+r[1].x)/2,(r[0].y+r[1].y)/2),v=new SuperMap.Geometry.Point(M.x,M.y);v.isScalePoint=!0,v.tag=0,this.addScalePoint(v);var _=new SuperMap.Geometry.Point(a[a.length-1].x,a[a.length-1].y);_.isScalePoint=!0,_.tag=1,this.addScalePoint(_);var T=new SuperMap.Geometry.Point(p[0].x,p[0].y);T.isScalePoint=!0,T.tag=2,this.addScalePoint(T),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,h)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var i=new SuperMap.Geometry.Point(this.getScalePoints()[0].x,this.getScalePoints()[0].y),o=new SuperMap.Geometry.Point(this.getScalePoints()[1].x,this.getScalePoints()[1].y),n=new SuperMap.Geometry.Point(this.getScalePoints()[2].x,this.getScalePoints()[2].y),s=this.getScaleValues()[0],a=SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints),l=a*s;if(0==t){u=(r=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,this.controlPoints[0],this.controlPoints[1])).projectPoint;if(r.isOnline){d=SuperMap.Plot.PlottingUtil.distance(u,this.controlPoints[1]);this.getScaleValues()[0]=d/a}}else if(1==t){var r=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,o,n),u=r.projectPoint,p=SuperMap.Plot.PlottingUtil.distance(u,i),h=l*this.getScaleValues()[1];this.getScaleValues()[1]=p/l,this.getScaleValues()[2]=(l*this.getScaleValues()[2]+p-h)/l}else if(2==t){var c=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,this.controlPoints[1],n).projectPoint,y=SuperMap.Plot.PlottingUtil.pointProjectToSegment(c,i,this.controlPoints[1]),g=y.projectPoint,d=SuperMap.Plot.PlottingUtil.distance(g,i);!0===y.inOnline?this.getScaleValues()[4]=-d/l:this.getScaleValues()[4]=d/l}}this.calculateParts()}}]),e}());e.default=u,SuperMap.Geometry.AlgoSymbol1003=u},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=o(i(0)),u=(o(i(3)),o(i(33)),function(t){function e(t){n(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.QIANJI_RATE1=9,i.QIANJI_RATE2=20,i.QIANJI_RATE4=5,i.QIANJI_RATE3=1/3,i.QIANJI_TAIL_RATE1=8,i.QIANJI_TAIL_RATE2=3,i.QIANJI_TAIL_RATE3=.6,i.SV1_Default=.25,i.SV1_MinValue=0,i.SV1_MaxValue=.5,i.DEFAULT_ARROW_TAIL_POS=.4,i.SCALE_VALUE_COUNT=1,i.MIN_LEN_LeftToRightCenter=1e-7,i.SCALE_AT=1/3,i.SCALE_ATAJ=1/7,i.SCALE_ATAE=1/3,i.SCALE_AW=2/3,i.SCALE_ATAJctrlDefSide=.8,i.SCALE_ATAJctrlSameSide=2/3,i.SCALE_MM_LEFT=.25,i.SCALE_MM_RIGHT=.75,i.BEZIER_K1=1/3,i.QIANJI_OPERATE_RATE1=1,i.m_dMaxDis=0,i.m_bIsAnimation=!1,i.m_scalePoints=[],i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1006",i.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,i.symbolName||(i.symbolName="钳击箭头"),i.minEditPts=3,i.maxEditPts=4,i.clearScalePoints(),0===i.getScaleValues().length&&i.getScaleValues().push(i.SV1_Default),i.m_dMaxDis=0,i.m_bIsAnimation=!1,i.m_scalePoints=[],i}return a(e,r["default"]),l(e,[{key:"calculateParts",value:function(){this.clearComponents(),this.m_scalePoints=[];var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length>=2&&t.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.clonePoints(t),i=e.length,o=!1;void 0!==e[0].z&&(o=!0);var n=this.arrowMeshs(t);if(o){for(var s=[],a=0;a<i;a++)s.push(e[a]);var l=n.LeftArowLeftBody,r=n.LeftArowHead,u=n.LeftArowRightBody,p=n.RightArowLeftBody,h=n.RightArowHead,c=n.RightArowRightBody;if(0==l.length)return!1;var y=[],g=[],d=[];if(3==s.length)l[0].x==s[0].x&&l[0].y==s[0].y?(g.push(s[0]),g.push(s[2]),d.push(s[1]),d.push(s[2])):(g.push(s[1]),g.push(s[2]),d.push(s[0]),d.push(s[2]));else{if(4!=s.length)return!1;l[0].x==s[0].x&&l[0].y==s[0].y?(g.push(s[0]),d.push(s[1])):(g.push(s[1]),d.push(s[0])),r[1].x==s[2].x&&r[1].y==s[2].y?(g.push(s[2]),d.push(s[3])):(g.push(s[3]),d.push(s[2]))}var f=new SuperMap.Geometry.Point;f=SuperMap.Plot.PlottingUtil.pointProjectToSegment(l[l.length-1],{x:g[0].x,y:g[0].y},{x:g[1].x,y:g[1].y}).projectPoint;var S=this.ComputeZValue(f,g[1],g[0]),P=[];this.ComputeHeight(l,P,g[0].z,S),y=y.concat(P);for(a=0;a<r.length;a++){f=SuperMap.Plot.PlottingUtil.pointProjectToSegment(r[a],{x:g[0].x,y:g[0].y},{x:g[1].x,y:g[1].y}).projectPoint;var m=this.ComputeZValue(f,g[1],g[0]);y.push({x:r[a].x,y:r[a].y,z:m})}f=SuperMap.Plot.PlottingUtil.pointProjectToSegment(u[0],{x:g[0].x,y:g[0].y},{x:g[1].x,y:g[1].y}).projectPoint;this.ComputeZValue(f,g[1],g[0]);f=SuperMap.Plot.PlottingUtil.pointProjectToSegment(u[u.length-1],{x:g[0].x,y:g[0].y},{x:g[1].x,y:g[1].y}).projectPoint;var b=this.ComputeZValue(f,g[1],g[0]);f=SuperMap.Plot.PlottingUtil.pointProjectToSegment(p[0],{x:d[0].x,y:d[0].y},{x:d[1].x,y:d[1].y}).projectPoint;var L=(this.ComputeZValue(f,d[1],d[0])+b)/2,M=[];this.ComputeHeight(u,M,S,L),y=y.concat(M),f=SuperMap.Plot.PlottingUtil.pointProjectToSegment(p[p.length-1],{x:d[0].x,y:d[0].y},{x:d[1].x,y:d[1].y}).projectPoint;var v=this.ComputeZValue(f,d[1],d[0]),_=[];this.ComputeHeight(p,_,L,v),y=y.concat(_);for(a=0;a<h.length;a++){f=SuperMap.Plot.PlottingUtil.pointProjectToSegment(h[a],{x:d[0].x,y:d[0].y},{x:d[1].x,y:d[1].y}).projectPoint;var T=this.ComputeZValue(f,d[1],d[0]);y.push({x:h[a].x,y:h[a].y,z:T})}f=SuperMap.Plot.PlottingUtil.pointProjectToSegment(c[0],{x:d[0].x,y:d[0].y},{x:d[1].x,y:d[1].y}).projectPoint;var x=this.ComputeZValue(f,d[1],d[0]),O=[];this.ComputeHeight(c,O,x,d[0].z),(y=y.concat(O)).length>0&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y,{surroundLineFlag:!1}),this.m_scalePoints.length>0&&(this.m_scalePoints[0]={x:this.m_scalePoints[0].x,y:this.m_scalePoints[0].y,z:L});for(a=0;a<this.m_scalePoints.length;a++)this.m_scalePoints[a].isScalePoint=!0,this.m_scalePoints[a].tag=a,this.addScalePoint(this.m_scalePoints[a]);return!0}var A=n.shapePts;A.length>0&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,A,{surroundLineFlag:!1}),this.clearScalePoints();for(a=0;a<this.m_scalePoints.length;a++)this.m_scalePoints[a].isScalePoint=!0,this.m_scalePoints[a].tag=a,this.addScalePoint(this.m_scalePoints[a])}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var i,o=SuperMap.Plot.PlottingUtil.operateControlPoints(this.controlPoints),n=(o.length,new SuperMap.Geometry.Point((o[0].x+o[1].x)/2,(o[0].y+o[1].y)/2)),s=new SuperMap.Geometry.Point((o[2].x+o[3].x)/2,(o[2].y+o[3].y)/2),a=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,n,s);if(a.isOnline){var l=SuperMap.Plot.PlottingUtil.distance(a.projectPoint,n),r=SuperMap.Plot.PlottingUtil.distance(n,s);(i=SuperMap.Plot.PlottingUtil.equalFuzzy(l,0)?this.SV1_MinValue:l/r)>this.SV1_MaxValue&&(i=this.SV1_MaxValue)}else i=SuperMap.Plot.PlottingUtil.distance(a.projectPoint,n)<SuperMap.Plot.PlottingUtil.distance(a.projectPoint,s)?this.SV1_MinValue:this.SV1_MaxValue;this.clearScaleValues(),this.getScaleValues().push(i)}this.calculateParts()}},{key:"arrowMeshs",value:function(t){var e=new SuperMap.Plot.Path2D,i=(t.length,[]);this.m_bIsAnimation&&4==t.length?i=SuperMap.Plot.PlottingUtil.clonePoints(t):(i=SuperMap.Plot.PlottingUtil.operateControlPoints(t),void 0!==t[0].z&&(i[i.length-1].z=i[i.length-2].z));var o=this.getScaleValues()[0],n=SuperMap.Plot.PlottingUtil.distance(i[0],i[3]),s=SuperMap.Plot.PlottingUtil.distance(i[1],i[2]),a=(i[0].clone(),i[1].clone()),l=.5*(i[0].x+i[3].x),r=.5*(i[0].y+i[3].y),u=new SuperMap.Geometry.Point(l,r),p=.5*(i[1].x+i[2].x),h=.5*(i[1].y+i[2].y),c=new SuperMap.Geometry.Point(p,h),y=SuperMap.Plot.PlottingUtil.distance(u,c);y<this.MIN_LEN_LeftToRightCenter&&(y=this.MIN_LEN_LeftToRightCenter),u.x=l+n*(l-p)/(y*this.QIANJI_RATE1),u.y=r+n*(r-h)/(y*this.QIANJI_RATE1),c.x=p+s*(p-l)/(y*this.QIANJI_RATE1),c.y=h+s*(h-r)/(y*this.QIANJI_RATE1);var g=new SuperMap.Geometry.Point(0,0),d=new SuperMap.Geometry.Point(0,0);g.x=l+n*(l-p)/(y*this.QIANJI_RATE2),g.y=r+n*(r-h)/(y*this.QIANJI_RATE2),d.x=p+s*(p-l)/(y*this.QIANJI_RATE2),d.y=h+s*(h-r)/(y*this.QIANJI_RATE2);var f=new SuperMap.Geometry.Point((i[0].x+i[1].x)/2,(i[0].y+i[1].y)/2),S=new SuperMap.Geometry.Point((i[2].x+i[3].x)/2,(i[2].y+i[3].y)/2),P=i[3].x-(i[3].x-u.x)*this.SCALE_AT,m=i[3].y-(i[3].y-u.y)*this.SCALE_AT,b=i[2].x-(i[2].x-c.x)*this.SCALE_AT,L=i[2].y-(i[2].y-c.y)*this.SCALE_AT,M=new SuperMap.Geometry.Point(0,0),v=new SuperMap.Geometry.Point(0,0),_=new SuperMap.Geometry.Point(0,0),T=new SuperMap.Geometry.Point(0,0);v.x=P-(m-i[3].y)*this.SCALE_ATAJ,v.y=m+(P-i[3].x)*this.SCALE_ATAJ,M.x=P+(m-i[3].y)*this.SCALE_ATAJ,M.y=m-(P-i[3].x)*this.SCALE_ATAJ,T.x=b-(L-i[2].y)*this.SCALE_ATAJ,T.y=L+(b-i[2].x)*this.SCALE_ATAJ,_.x=b+(L-i[2].y)*this.SCALE_ATAJ,_.y=L-(b-i[2].x)*this.SCALE_ATAJ;var x=new SuperMap.Geometry.Point(0,0),O=new SuperMap.Geometry.Point(0,0),A=new SuperMap.Geometry.Point(0,0),w=new SuperMap.Geometry.Point(0,0);x.x=3*M.x-2*P-(i[3].x-P)*this.SCALE_ATAE,x.y=3*M.y-2*m-(i[3].y-m)*this.SCALE_ATAE,O.x=3*v.x-2*P-(i[3].x-P)*this.SCALE_ATAE,O.y=3*v.y-2*m-(i[3].y-m)*this.SCALE_ATAE,A.x=3*_.x-2*b-(i[2].x-b)*this.SCALE_ATAE,A.y=3*_.y-2*L-(i[2].y-L)*this.SCALE_ATAE,w.x=3*T.x-2*b-(i[2].x-b)*this.SCALE_ATAE,w.y=3*T.y-2*L-(i[2].y-L)*this.SCALE_ATAE,u.x=l+n*(l-p)/(y*this.QIANJI_RATE4),u.y=r+n*(r-h)/(y*this.QIANJI_RATE4),c.x=p+s*(p-l)/(y*this.QIANJI_RATE4),c.y=h+s*(h-r)/(y*this.QIANJI_RATE4);var D=new SuperMap.Geometry.Point(0,0);D.x=i[0].x+(u.x-i[0].x)*this.SCALE_AW,D.y=i[0].y+(u.y-i[0].y)*this.SCALE_AW;var E=new SuperMap.Geometry.Point(0,0);E.x=i[1].x+(c.x-i[1].x)*this.SCALE_AW,E.y=i[1].y+(c.y-i[1].y)*this.SCALE_AW;var I=new SuperMap.Geometry.Point(0,0);I.x=M.x+(u.x-M.x)*this.SCALE_ATAJctrlSameSide,I.y=M.y+(u.y-M.y)*this.SCALE_ATAJctrlSameSide;var N=new SuperMap.Geometry.Point(0,0);N.x=T.x+(c.x-T.x)*this.SCALE_ATAJctrlSameSide,N.y=T.y+(c.y-T.y)*this.SCALE_ATAJctrlSameSide;var C=new SuperMap.Geometry.Point(0,0);C.x=v.x+(g.x-v.x)*this.SCALE_ATAJctrlDefSide,C.y=v.y+(g.y-v.y)*this.SCALE_ATAJctrlDefSide;var R=new SuperMap.Geometry.Point(0,0);R.x=_.x+(d.x-_.x)*this.SCALE_ATAJctrlDefSide,R.y=_.y+(d.y-_.y)*this.SCALE_ATAJctrlDefSide;var U=new SuperMap.Geometry.Point(0,0);U.x=f.x+(S.x-f.x)*o,U.y=f.y+(S.y-f.y)*o,this.m_scalePoints.push(new SuperMap.Geometry.Point(U.x,U.y));var G=new SuperMap.Geometry.Point(0,0),B=new SuperMap.Geometry.Point(0,0);G.x=i[0].x+(i[3].x-i[0].x)*o,G.y=i[0].y+(i[3].y-i[0].y)*o,B.x=i[1].x+(i[2].x-i[1].x)*o,B.y=i[1].y+(i[2].y-i[1].y)*o,G.x=G.x+(U.x-G.x)*this.QIANJI_RATE3,G.y=G.y+(U.y-G.y)*this.QIANJI_RATE3,B.x=B.x+(U.x-B.x)*this.QIANJI_RATE3,B.y=B.y+(U.y-B.y)*this.QIANJI_RATE3;var F=[];F.push(i[0].clone()),F.push(D.clone()),F.push(I.clone()),F.push(M.clone()),e.MoveTo(F[0]),e.CurveTo(F[1],F[2],F[3]);var k,j=[],z=[],Y=[],V=[],W=[],H=[],X=[];for(e.ToSubPathPolygons(X),j=X[0],k=X[0].length,e.LineTo(x),e.LineTo(i[3]),e.LineTo(O),(F=[]).push(v),F.push(C),F.push(G),F.push(U),e.LineTo(F[0]),X=[],e.ToSubPathPolygons(X);k<X[0].length;k++)z.push(X[0][k]);for(k=X[0].length,e.CurveTo(F[1],F[2],F[3]),X=[],e.ToSubPathPolygons(X);k<X[0].length;k++)Y.push(X[0][k]);for(k=X[0].length,[],(F=[]).push(B),F.push(R),F.push(_),e.CurveTo(F[0],F[1],F[2]),X=[],e.ToSubPathPolygons(X);k<X[0].length;k++)V.push(X[0][k]);for(k=X[0].length,e.LineTo(A),e.LineTo(i[2]),e.LineTo(w),[],(F=[]).push(T),F.push(N),F.push(E),F.push(a),e.LineTo(F[0]),X=[],e.ToSubPathPolygons(X);k<X[0].length;k++)W.push(X[0][k]);for(k=X[0].length,e.CurveTo(F[1],F[2],F[3]),X=[],e.ToSubPathPolygons(X);k<X[0].length;k++)H.push(X[0][k]);return X=[],e.ToSubPathPolygons(X),{shapePts:X[0],LeftArowLeftBody:j,LeftArowHead:z,LeftArowRightBody:Y,RightArowLeftBody:V,RightArowHead:W,RightArowRightBody:H}}}]),e}());e.default=u,SuperMap.Geometry.AlgoSymbol1006=u},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=o(i(0)),u=(o(i(3)),function(t){function e(t){n(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1010",i.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,i.symbolName="贝塞尔尖耳燕尾箭头",i.minEditPts=3,i.maxEditPts=512,i.clearScalePoints(),0===i.getScaleValues().length&&(i.getScaleValues().push(0),i.getScaleValues().push(.148),i.getScaleValues().push(.4),i.getScaleValues().push(.312),i.getScaleValues().push(.2)),i}return a(e,r["default"]),l(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length>=2&&t.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){var e=this.arrowMeshs(t);if(SuperMap.Plot.PlottingUtil.clearSamePts(e.shapePts),0!=e.shapePts.length){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e.shapePts,{surroundLineFlag:!1}),this.clearScalePoints();for(var i=0;i<e.m_scalePoints.length;i++)this.addScalePoint(e.m_scalePoints[i])}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var i=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);this.getScaleValues().length<4&&(this.getScaleValues().push(0),this.getScaleValues().push(.148),this.getScaleValues().push(.4),this.getScaleValues().push(.312),this.getScaleValues().push(.2));var o=i.length;if(o<=2)return;var n,s,a,l;this.getScaleValues().length<4?(n=0,s=.148,a=.4,l=.312,.2):(n=this.getScaleValues()[0],s=this.getScaleValues()[1],a=this.getScaleValues()[2],l=this.getScaleValues()[3],this.getScaleValues()[4]);var r=SuperMap.Plot.PlottingUtil.polylineDistance(i),u=this.operateCtrlPts(i);o=u.length,o--;for(var p=[],h=0;h<this.getScalePoints().length;h++)p.push(this.getScalePoints()[h].clone());if(0==p.length)return;if(p[t]=e.clone(),3==t){var c=SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePts(i,this.getScaleValues(),SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_MULTIPOLYBEZIER),y=new SuperMap.Geometry.Point(.5*(c.leftBodyPts[0].x+c.rightBodyPts[0].x),.5*(c.leftBodyPts[0].y+c.rightBodyPts[0].y)),g=SuperMap.Plot.PlottingUtil.distance(c.leftBodyPts[0],c.rightBodyPts[0]);this.getScaleValues()[4]=SuperMap.Plot.PlottingUtil.distance(y,e)/g}else{var d,f,h=o-1;d=o<=3?new SuperMap.Geometry.Point((u[0].x+u[1].x)/2,(u[0].y+u[1].y)/2):u[h-1].clone();var S=new SuperMap.Geometry.Point(0,0),P=new SuperMap.Geometry.Point(0,0),m=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrianglePoints(0,3,d,u[h],u[h+1],P,m),SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,u[o],u[o-1],m,S),f=S.clone();var b,L,M,v,_,T,x=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(u[o],f,p[2]);b=x.dLen1,L=x.dLen2,0==b&&(b=.1),L=b,n=(b/=l+1)/r,1==t?(v=(x=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(u[o],f,p[1])).dLen1,a=(_=x.dLen2)/b,l=(v-b)/b):0==t?(b=(x=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(u[o],f,p[0])).dLen1,s=(M=x.dLen2)/b,(T=SuperMap.Plot.PlottingUtil.distance(u[o],u[o-1]))<2*b&&(b=.5*T),v=(x=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(u[o],f,p[1])).dLen1,a=(_=x.dLen2)/b,(l=(L-b)/b)<.1&&(a=_/(b=L/(1+(l=.1))),s=M/b),n=b/r):2==t&&(n=b/r),M=b*s,(T=SuperMap.Plot.PlottingUtil.distance(u[o],u[o-1]))<2*b&&(M=(b=.5*T)*s,n=b/r),this.getScaleValues()[0]=n,this.getScaleValues()[1]=s,this.getScaleValues()[2]=a,this.getScaleValues()[3]=l}}this.calculateParts()}},{key:"arrowMeshs",value:function(t){var e=[],i=[],o=[],n=[],s=[],a=SuperMap.Plot.PlottingUtil.clonePoints(t),l=SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePts(a,this.getScaleValues(),SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_MULTIPOLYBEZIER),r=l.arrowTouLen,u=l.leftBodyPts,p=l.rightBodyPts;if(a=l.OpectrlPoints,!SuperMap.Plot.PlottingUtil.equalFuzzy(r,0)){var h=[];h.push(u[u.length-1]),h.push(p[p.length-1]);var c=[];c.push(this.getScaleValues()[2]),c.push(this.getScaleValues()[3]),c.push(0),c.push(0);var y=SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePts(a,h,c,r,SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_WITH_EAR),g=[];g.push(u[0]),g.push(p[0]);for(var d=SuperMap.Plot.ArrowToolKit.generateArrowTailShapePts(t,g,this.getScaleValues()[4],SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_COATTAIL_POLYBODY),f=0;f<u.length;f++)e.push(u[f]),i.push(u[f]);for(f=0;f<y.length;f++)e.push(y[f]),n.push(y[f]);for(f=p.length-1;f>=0;f--)e.push(p[f]),o.push(p[f]);for(f=1;f<d.length;f++)e.push(d[f]),s.push(d[f]);var S,P=a.length;P-=2;var m=r*this.getScaleValues()[3];S=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(m,a[P],a[P+1]);var b=[],L=new SuperMap.Geometry.Point(i[i.length-1].x,i[i.length-1].y);L.isScalePoint=!0,L.tag=0,b.push(L),(L=new SuperMap.Geometry.Point(n[0].x,n[0].y)).isScalePoint=!0,L.tag=1,b.push(L),(L=new SuperMap.Geometry.Point(S.x,S.y)).isScalePoint=!0,L.tag=2,b.push(L),(L=new SuperMap.Geometry.Point(d[1].x,d[1].y)).isScalePoint=!0,L.tag=3,b.push(L)}return{shapePts:e,leftBodyPts:i,rightBodyPts:o,arrowHeadPts:n,arrowTailPts:s,m_scalePoints:b}}},{key:"operateCtrlPts",value:function(t){var e=SuperMap.Plot.PlottingUtil.clonePoints(t);if(3===e.length){var i=((e[0].x+e[1].x)/2+e[2].x)/2,o=((e[0].y+e[1].y)/2+e[2].y)/2,n=new SuperMap.Geometry.Point(i,o),s=e[2];e[2]=n,e.push(s)}return e}}]),e}());e.default=u,SuperMap.Geometry.AlgoSymbol1010=u},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function(t){return t&&t.__esModule?t:{default:t}}(i(13)),r=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.sv1_DefaultAtLenDivAbLen=0,i.sv2_DefaultAjWidthDivAtLen=.148,i.sv3_DefaultAeWidthDivAtLen=.4,i.sv4_DefaultAeLenDivAtLen=.312,i.sv_arrowTailWidth=.05,i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1011",i.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,i.minEditPts=3,i.maxEditPts=512,i.symbolName="贝塞尔尖耳单点箭头",i.clearScalePoints(),5!==i.getScaleValues().length&&(i.clearScaleValues(),i.getScaleValues().push(i.sv1_DefaultAtLenDivAbLen),i.getScaleValues().push(i.sv2_DefaultAjWidthDivAtLen),i.getScaleValues().push(i.sv3_DefaultAeWidthDivAtLen),i.getScaleValues().push(i.sv4_DefaultAeLenDivAtLen),i.getScaleValues().push(i.sv_arrowTailWidth)),i}return s(e,l["default"]),a(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<2)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(0!=e){var i=e*this.getScaleValues()[4],o=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,t[1],t[0]);void 0!==t[0].z&&(o.pntLeft.z=t[0].z,o.pntRight.z=t[0].z),this.controlPoints=[],this.controlPoints.push(o.pntLeft),this.controlPoints.push(o.pntRight);for(s=1;s<t.length;s++)this.controlPoints.push(t[s].clone());for(var n=[],s=0;s<this.getScaleValues().length;s++)n.push(this.getScaleValues()[s]);this.clearScaleValues();for(s=0;s<n.length-1;s++)this.getScaleValues().push(n[s]);SuperMap.Geometry.AlgoSymbol1004.prototype.calculateParts.apply(this,arguments);var a=o.pntRight.clone();a.isScalePoint=!0,a.tag=3,this.addScalePoint(a),this.controlPoints=SuperMap.Plot.PlottingUtil.clonePoints(t),this.clearScaleValues();for(s=0;s<n.length;s++)this.getScaleValues().push(n[s])}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var i=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(i.length<2)return;this.getScaleValues().length<5&&(this.clearScaleValues(),this.getScaleValues().push(this.sv1_DefaultAtLenDivAbLen),this.getScaleValues().push(this.sv2_DefaultAjWidthDivAtLen),this.getScaleValues().push(this.sv3_DefaultAeWidthDivAtLen),this.getScaleValues().push(this.sv4_DefaultAeLenDivAtLen),this.getScaleValues().push(this.sv_arrowTailWidth));var o=i[0].clone(),n=SuperMap.Plot.PlottingUtil.polylineDistance(i);if(0==(f=null))return;var s=n*this.getScaleValues()[4],a=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(s,i[1],i[0]);(i=[]).push(a.pntLeft),i.push(a.pntRight);for(P=1;P<this.controlPoints.length;P++)i.push(this.controlPoints[P].clone());var l=i.length,r=this.operateCtrlPts(i);l=r.length,l--;var u,p,h,c,y,g=this.calcScaleValueCount(i.length);if(g++,this.getScaleValues().length<g){var d=this.calcDefaultScaleValues(l);u=d[0],p=d[1],h=d[2],c=d[3],y=this.sv_arrowTailWidth}else u=this.getScaleValues()[0],p=this.getScaleValues()[1],h=this.getScaleValues()[2],c=this.getScaleValues()[3],y=this.getScaleValues()[4];for(var f=SuperMap.Plot.PlottingUtil.polylineDistance(i),S=[],P=0;P<this.getScalePoints().length;P++)S.push(this.getScalePoints()[P].clone());if(0==S.length)return;S[t]=e.clone();var m,b,P=l-1;m=l<=3?new SuperMap.Geometry.Point((r[0].x+r[1].x)/2,(r[0].y+r[1].y)/2):r[P-1].clone();var L=new SuperMap.Geometry.Point(0,0),M=new SuperMap.Geometry.Point(0,0),v=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrianglePoints(0,3,m,r[P],r[P+1],M,v),SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,r[l],r[l-1],v,L),b=L.clone();var _,T,x,O,A,w,D=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(r[l],b,S[2]);_=D.dLen1,T=D.dLen2,0==_&&(_=.1),T=_,u=(_/=c+1)/f,1==t?(O=(D=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(r[l],b,S[1])).dLen1,h=(A=D.dLen2)/_,c=(O-_)/_):0==t?(_=(D=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(r[l],b,S[0])).dLen1,p=(x=D.dLen2)/_,(w=SuperMap.Plot.PlottingUtil.distance(r[l],r[l-1]))<2*_&&(_=.5*w),O=(D=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(r[l],b,S[1])).dLen1,h=(A=D.dLen2)/_,(c=(T-_)/_)<.1&&(h=A/(_=T/(1+(c=.1))),p=x/_),u=_/f):2==t?u=_/f:y=SuperMap.Plot.PlottingUtil.distance(e,o)/n,x=_*p,(w=SuperMap.Plot.PlottingUtil.distance(r[l],r[l-1]))<2*_&&(x=(_=.5*w)*p,u=_/f),this.getScaleValues()[0]=u,this.getScaleValues()[1]=p,this.getScaleValues()[2]=h,this.getScaleValues()[3]=c,this.getScaleValues()[4]=y}this.calculateParts()}},{key:"arrowMeshs",value:function(t){var e=[],i=[],o=[],n=[],s=SuperMap.Plot.PlottingUtil.clonePoints(t),a=SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePts(s,this.getScaleValues(),SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_MULTIPOLYBEZIER),l=a.arrowTouLen,r=a.leftBodyPts,u=a.rightBodyPts;if(!SuperMap.Plot.PlottingUtil.equalFuzzy(l,0)){var p=[];p.push(r[r.length-1]),p.push(u[u.length-1]);var h=[];h.push(this.getScaleValues()[2]),h.push(this.getScaleValues()[3]),h.push(0),h.push(0);var c=SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePts(s,p,h,l,SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_WITH_EAR),y=[];y.push(r[0]),y.push(u[0]);SuperMap.Plot.ArrowToolKit.generateArrowTailShapePts(t,y,.2,SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_COATTAIL_POLYBODY);for(g=0;g<r.length;g++)e.push(r[g]),i.push(r[g]);for(g=0;g<c.length;g++)e.push(c[g]),n.push(c[g]);for(var g=u.length-1;g>=0;g--)e.push(u[g]),o.push(u[g])}return{shapePts:e,leftBodyPts:i,rightBodyPts:o,arrowHeadPts:n}}},{key:"updateScalePoints",value:function(t){var e=t.length,i=[];if(!(e<3)){var o=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(!SuperMap.Plot.PlottingUtil.equalFuzzy(o,0)){var n=this.operateCtrlPts(t);e=n.length,e--;for(var s=[],a=0;a<this.getScaleValues().length;a++)s.push(this.getScaleValues()[a]);var l=this.genArrowBodyPts(o,n,s),r=l.ArrowBodyCenterPts,u=this.genAtPts(e,r,s,l.ArrowTouLen),p=this.calc3rdScalePt(e,r,s,l.ArrowTouLen);return i.push(new SuperMap.Geometry.Point(l.LeftBodyPtsTemp[e].x,l.LeftBodyPtsTemp[e].y)),i.push(new SuperMap.Geometry.Point(u[2].x,u[2].y)),i.push(new SuperMap.Geometry.Point(p.x,p.y)),i}}}},{key:"operateCtrlPts",value:function(t){var e=SuperMap.Plot.PlottingUtil.clonePoints(t);if(3===e.length){var i=((e[0].x+e[1].x)/2+e[2].x)/2,o=((e[0].y+e[1].y)/2+e[2].y)/2,n=new SuperMap.Geometry.Point(i,o),s=e[2];e[2]=n,e.push(s)}return e}},{key:"genArrowBodyPts",value:function(t,e,i){var o,n=[],s=[],a=[],l=[],r=[],u=[],p=e.length;p--;var h,c;if(i.length<this.calcScaleValueCount(p)){var y=this.calcDefaultScaleValues(p);h=y[0],c=y[1],y[2],y[3]}else h=i[0],c=i[1],i[2],i[3];var g=SuperMap.Plot.PlottingUtil.clonePoints(e),d=(g[0].x+g[1].x)/2,f=(g[0].y+g[1].y)/2,S=Math.abs(d-g[2].x),P=Math.abs(f-g[2].y),m=0;if(S>0&&P>0){var b=1/(d-g[2].x),L=-1/(f-g[2].y),M=1*g[2].y/(f-g[2].y)-1*g[2].x/(d-g[2].x);m=Math.abs(b*g[0].x+L*g[0].y+M)/Math.sqrt(b*b+L*L)}else P<=1e-4?m=Math.abs(f-g[1].y):S<=1e-4&&(m=Math.abs(d-g[1].x));var v=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(m,g[2],new SuperMap.Geometry.Point(d,f)),_=SuperMap.Plot.PlottingUtil.pointIsRightToLine(g[1],g[2],g[0]);_?(n[1]=g[1],s[1]=g[0]):(n[1]=g[0],s[1]=g[1]),g[1]=new SuperMap.Geometry.Point((g[0].x+g[1].x)/2,(g[0].y+g[1].y)/2);var T=Math.sqrt((v.pntLeft.x-v.pntRight.x)*(v.pntLeft.x-v.pntRight.x)+(v.pntLeft.y-v.pntRight.y)*(v.pntLeft.y-v.pntRight.y))*this.sv_AtWidthDivAwWidth,x=(o=T*this.sv_AtLenDivAtWidth)*c;SuperMap.Plot.PlottingUtil.equalFuzzy(h,0)||(x=(o=t*h)*c);var O=SuperMap.Plot.PlottingUtil.distance(g[p],g[p-1]),A=2*o;O<A&&(x=(o=O/2)*c),g.push(g[p].clone());var w,D;w=0,D=0;var E=0,I=[];for(E=2;E<=p;E++)w+=SuperMap.Plot.PlottingUtil.distance(g[E],g[E-1]);for(w-=o,E=2;E<=p-1;E++)D+=SuperMap.Plot.PlottingUtil.distance(g[E],g[E-1]),I[E]=x+(T-x)*Math.pow((w-D)/w,this.sv_AtScaleParameter);I[p]=x;var N,C=new SuperMap.Geometry.Point(0,0),R=new SuperMap.Geometry.Point(0,0),U=new SuperMap.Geometry.Point(0,0);for(E=2;E<=p-1;E++)SuperMap.Plot.PlottingUtil.getTrianglePoints(0,3,g[E-1],g[E],g[E+1],R,U),E==p-1&&SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,g[p],g[p-1],U,C),N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(I[E],R,g[E]),(_=SuperMap.Plot.PlottingUtil.pointIsRightToLine(U,R,N.pntRight))?(n[E]=new SuperMap.Geometry.Point(N.pntRight.x,N.pntRight.y),s[E]=new SuperMap.Geometry.Point(N.pntLeft.x,N.pntLeft.y)):(n[E]=new SuperMap.Geometry.Point(N.pntLeft.x,N.pntLeft.y),s[E]=new SuperMap.Geometry.Point(N.pntRight.x,N.pntRight.y));Math.sqrt(1*(g[p].x-C.x)*(g[p].x-C.x)+1*(g[p].y-C.y)*(g[p].y-C.y))>0&&(g[p]=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(o,g[p],C)),N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(x,g[p+1],g[p]),(_=SuperMap.Plot.PlottingUtil.pointIsRightToLine(g[p],g[p+1],N.pntLeft))?(s[p]=new SuperMap.Geometry.Point(N.pntLeft.x,N.pntLeft.y),n[p]=new SuperMap.Geometry.Point(N.pntRight.x,N.pntRight.y)):(s[p]=new SuperMap.Geometry.Point(N.pntRight.x,N.pntRight.y),n[p]=new SuperMap.Geometry.Point(N.pntLeft.x,N.pntLeft.y));var G;for(E=2;E<p;E++)SuperMap.Plot.PlottingUtil.getTrianglePoints(3,3,n[E-1],n[E],n[E+1],R,U),a[E]=new SuperMap.Geometry.Point(R.x,R.y),l[E]=new SuperMap.Geometry.Point(U.x,U.y),SuperMap.Plot.PlottingUtil.getTrianglePoints(3,3,s[E-1],s[E],s[E+1],R,U),r[E]=new SuperMap.Geometry.Point(R.x,R.y),u[E]=new SuperMap.Geometry.Point(U.x,U.y),2==E&&(SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,n[1],n[2],a[2],C),l[E]=new SuperMap.Geometry.Point(C.x,C.y),SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,s[1],s[2],r[2],C),u[E]=new SuperMap.Geometry.Point(C.x,C.y)),E==p-1&&(A=(O=SuperMap.Plot.PlottingUtil.distance(n[p],n[p-1]))/3,(G=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(A,g[p],g[p+1])).x+=n[p].x-g[p].x,G.y+=n[p].y-g[p].y,A=(O=T-x)*Math.pow(A/w,this.sv_AtScaleParameter),N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(A,n[p],G),a[p]=new SuperMap.Geometry.Point(N.pntLeft.x,N.pntLeft.y),A=(O=SuperMap.Plot.PlottingUtil.distance(s[p],s[p-1]))/3,(G=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(A,g[p],g[p+1])).x+=s[p].x-g[p].x,G.y+=s[p].y-g[p].y,A=(O=T-x)*Math.pow(A/w,this.sv_AtScaleParameter),N=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(A,s[p],G),r[p]=new SuperMap.Geometry.Point(N.pntRight.x,N.pntRight.y));return{ArrowBodyCenterPts:SuperMap.Plot.PlottingUtil.clonePoints(g),LeftBodyPtsTemp:n,RightBodyPtsTemp:s,LeftBodyPtsLeftCtrlPts:a,LeftBodyPtsRightCtrlPts:l,RightBodyPtsLeftCtrlPts:r,RightBodyPtsRightCtrlPts:u,ArrowTouLen:o}}},{key:"calcScaleValueCount",value:function(t){return 4}},{key:"calcDefaultScaleValues",value:function(t){var e=[];return e.push(this.sv1_DefaultAtLenDivAbLen),e.push(this.sv2_DefaultAjWidthDivAtLen),e.push(this.sv3_DefaultAeWidthDivAtLen),e.push(this.sv4_DefaultAeLenDivAtLen),e}},{key:"genAtPts",value:function(t,e,i,o){var n=i[2],s=[],a=o*i[3],l=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(a,e[t],e[t+1]);a=o*n;var r=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(a,e[t+1],l);return s.push(new SuperMap.Geometry.Point(r.pntLeft.x,r.pntLeft.y)),s.push(e[t+1]),s.push(new SuperMap.Geometry.Point(r.pntRight.x,r.pntRight.y)),s}},{key:"calc3rdScalePt",value:function(t,e,i,o){i[2];var n=o*i[3];return SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(n,e[t],e[t+1])}}]),e}();e.default=r,SuperMap.Geometry.AlgoSymbol1011=r},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(i(29)),l=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1012",i.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,i.symbolName="普通贝塞尔箭头(不随图)",i.minEditPts=2,i.maxEditPts=99999,void 0!==t.scaleByMap&&null!==t.scaleByMap||(i.scaleByMap=!1),void 0!==t.constantSize&&null!==t.constantSize||!1!==i.getIsEdit()||(i.constantSize=!0),i.subSymbolDefaultPixelSize=15,i}return s(e,a["default"]),e}();e.default=l,SuperMap.Geometry.AlgoSymbol1012=l},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(i(30)),l=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1013",i.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,i.symbolName="折线空三角箭头(不随图)",i.minEditPts=2,i.maxEditPts=99999,void 0!==t.scaleByMap&&null!==t.scaleByMap||(i.scaleByMap=!1),void 0!==t.constantSize&&null!==t.constantSize||!1!==i.getIsEdit()||(i.constantSize=!0),i.subSymbolDefaultPixelSize=15,i}return s(e,a["default"]),e}();e.default=l,SuperMap.Geometry.AlgoSymbol1013=l},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(i(31)),l=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1014",i.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,i.symbolName="贝塞尔尖耳燕尾箭头(不随图)",i.minEditPts=2,i.maxEditPts=99999,void 0!==t.scaleByMap&&null!==t.scaleByMap||(i.scaleByMap=!1),void 0!==t.constantSize&&null!==t.constantSize||!1!==i.getIsEdit()||(i.constantSize=!0),i.subSymbolDefaultPixelSize=15,i}return s(e,a["default"]),e}();e.default=l,SuperMap.Geometry.AlgoSymbol1014=l},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(i(32)),l=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1015",i.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,i.minEditPts=2,i.maxEditPts=99999,void 0!==t.scaleByMap&&null!==t.scaleByMap||(i.scaleByMap=!1),void 0!==t.constantSize&&null!==t.constantSize||!1!==i.getIsEdit()||(i.constantSize=!0),i.subSymbolDefaultPixelSize=15,i}return s(e,a["default"]),e}();e.default=l,SuperMap.Geometry.AlgoSymbol1015=l},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=o(i(0)),u=(o(i(3)),function(t){function e(t){n(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.arrowHeadType=0,i.arrowBodyType=0,i.arrowTailType=0,i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1016",i.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,i.symbolName="组合箭头",i.minEditPts=2,i.maxEditPts=99999,i}return a(e,r["default"]),l(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePtsBySingleLine(t,0,this.arrowBodyType),i=[];i.push(e.arrowBodyPts[e.arrowBodyPts.length-1]),i.push(e.arrowBodyPts[e.arrowBodyPts.length-2]);var o=this.getSubSymbolScaleValue(),n=this.calculateforHead(t,e,i,o),s=SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePtsBySingleLine(t,n,i,o,e.arrowHeadLen,this.arrowHeadType),a=SuperMap.Plot.ArrowToolKit.generateArrowTailShapePts(n,i,o,this.arrowTailType);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n);var l,r;this.arrowHeadType===SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_COATTAIL||this.arrowHeadType===SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_TRIANGLE_SOLID?(l={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0},r=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL):r=SuperMap.Plot.SymbolType.POLYLINESYMBOL,this.addCell(r,s,l),0!==a.length&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a)}}}]),e}());e.default=u,SuperMap.Geometry.AlgoSymbol1016=u},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},r=function(t){return t&&t.__esModule?t:{default:t}}(i(13)),u=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol315",i.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,i.symbolName="突击",i.minEditPts=3,i.maxEditPts=30,0===i.getScaleValues().length&&(i.getScaleValues().push(.2),i.getScaleValues().push(.2),i.getScaleValues().push(.4),i.getScaleValues().push(.4),i.getScaleValues().push(.1),i.getScaleValues().push(.2),i.getScaleValues().push(.1),i.getScaleValues().push(.2),i.getScaleValues().push(1),i.getScaleValues().push(1)),i}return s(e,r["default"]),a(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length>=2&&t.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){for(var e=0,i=0;i<t.length-1;i++)e+=SuperMap.Plot.PlottingUtil.distance(t[i],t[i+1]);this.getScaleValues()[0];SuperMap.Geometry.AlgoSymbol1004.prototype.applyUse.apply(this,arguments),this.getScaleValues().length<9&&(this.clearScaleValues(),this.getScaleValues().push(.2),this.getScaleValues().push(.2),this.getScaleValues().push(.4),this.getScaleValues().push(.4),this.getScaleValues().push(.1),this.getScaleValues().push(.2),this.getScaleValues().push(.1),this.getScaleValues().push(.2),this.getScaleValues().push(1),this.getScaleValues().push(1));var o,n=e*this.getScaleValues()[4],s=e*this.getScaleValues()[5],a=SuperMap.Plot.PlottingUtil.distance(t[1],t[0]),l=SuperMap.Plot.PlottingUtil.linePnt(t[1],t[0],a+s);o=(this.getScaleValues()[8],SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,t[1],l));var r,u=e*this.getScaleValues()[6],p=e*this.getScaleValues()[7],h=SuperMap.Plot.PlottingUtil.linePnt(t[0],t[1],a+p);r=(this.getScaleValues()[9],SuperMap.Plot.PlottingUtil.getSidePointsOfLine(u,t[0],h));var c=[];c.push(new SuperMap.Geometry.Point(o.pntLeft.x,o.pntLeft.y)),c.push(new SuperMap.Geometry.Point(t[0].x,t[0].y)),c.push(new SuperMap.Geometry.Point(t[1].x,t[1].y)),c.push(new SuperMap.Geometry.Point(r.pntRight.x,r.pntRight.y));var y=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(c);y=SuperMap.Plot.PlottingUtil.clearSamePts(y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y),this.addScalePoint(o.pntLeft,3),this.addScalePoint(r.pntRight,4)}}},{key:"modifyPoint",value:function(t,i){if(!0===i.isScalePoint){var o=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),s=SuperMap.Plot.PlottingUtil.projectPoint(i,o[0],o[1]);if(t<=2&&l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"modifyPoint",this).call(this,t,i),3===t){var a=(u=SuperMap.Plot.PlottingUtil.distance(i,s))/n,r=(h=SuperMap.Plot.PlottingUtil.distance(s,o[0]))/n;this.getScaleValues()[4]=a,this.getScaleValues()[5]=r,SuperMap.Plot.PlottingUtil.pointIsRightToLine(o[0],o[1],i)?this.getScaleValues()[8]=1:this.getScaleValues()[8]=0}if(4===t){var u=SuperMap.Plot.PlottingUtil.distance(i,s),p=u/n,h=SuperMap.Plot.PlottingUtil.distance(s,o[1]),c=h/n;this.getScaleValues()[6]=p,this.getScaleValues()[7]=c,SuperMap.Plot.PlottingUtil.pointIsRightToLine(o[0],o[1],i)?this.getScaleValues()[9]=1:this.getScaleValues()[9]=0}}this.calculateParts()}}]),e}();e.default=u,SuperMap.Geometry.AlgoSymbol315=u},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),r=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.arrowTypeStart=0,i.arrowTypeEnd=0,i.arrowAngle=45,i.CLASS_NAME="SuperMap.Geometry.ArrowLine",i.code=SuperMap.Plot.SymbolType.ARROWLINE,i.libID=0,i.symbolType=SuperMap.Plot.SymbolType.ARROWLINE,i.symbolName="箭头线",i.minEditPts=2,i.maxEditPts=2,null===i.arrowAngle&&(i.arrowAngle=45),i}return s(e,l["default"]),a(e,[{key:"calculateParts",value:function(){if(this.clearComponents(),!(null===this.controlPoints||this.controlPoints.length<this.minEditPts)){var t=SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints);if(!this.getIsEdit()){var e=this.getDefaultSubSymbolSize();this.subSymbolScaleValue=.5*e/t,(this.subSymbolScaleValue>.3||this.subSymbolScaleValue<=0)&&(this.subSymbolScaleValue=.3),this.subSymbolScaleValue<=0&&(this.subSymbolScaleValue=.3)}this.arrowLength=this.subSymbolScaleValue*t;var i=this.arrowAngle*Math.PI/180/2,o=SuperMap.Plot.PlottingUtil.radian(this.controlPoints[1],this.controlPoints[0]),n=o-i,s=this.controlPoints[1].x+this.arrowLength*Math.cos(n),a=this.controlPoints[1].y+this.arrowLength*Math.sin(n),l=new SuperMap.Geometry.Point(s,a),r=o+i,u=this.controlPoints[1].x+this.arrowLength*Math.cos(r),p=this.controlPoints[1].y+this.arrowLength*Math.sin(r),h=new SuperMap.Geometry.Point(u,p),c=[];c.push(l),c.push(this.controlPoints[1].clone()),c.push(h);this.arrowTypeEnd===SuperMap.Plot.ArrowLineType.DOUBLELINE?SuperMap.Plot.SymbolType.POLYLINESYMBOL:SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL;var y={surroundLineFlag:!1,fillLimit:!0,lineTypeLimit:!0},g={surroundLineFlag:!1,fillLimit:!0,lineTypeLimit:!0},d=new SuperMap.Geometry.Point((s+u)/2,(a+p)/2);n=(o+=Math.PI)-i,s=this.controlPoints[0].x+this.arrowLength*Math.cos(n),a=this.controlPoints[0].y+this.arrowLength*Math.sin(n),l=new SuperMap.Geometry.Point(s,a),r=o+i,u=this.controlPoints[0].x+this.arrowLength*Math.cos(r),p=this.controlPoints[0].y+this.arrowLength*Math.sin(r),h=new SuperMap.Geometry.Point(u,p);var f=[];f.push(l),f.push(this.controlPoints[0].clone()),f.push(h);var S=this.arrowTypeStart===SuperMap.Plot.ArrowLineType.DOUBLELINE?SuperMap.Plot.SymbolType.POLYLINESYMBOL:SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,P=this.arrowTypeEnd===SuperMap.Plot.ArrowLineType.DOUBLELINE?SuperMap.Plot.SymbolType.POLYLINESYMBOL:SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,m=new SuperMap.Geometry.Point((s+u)/2,(a+p)/2),b=[];this.arrowTypeStart===SuperMap.Plot.ArrowLineType.DOUBLELINE?(b.push(this.controlPoints[0].clone()),this.addCell(S,f,y)):this.arrowTypeStart===SuperMap.Plot.ArrowLineType.TRIANGLESOLID?(b.push(m),this.addCell(S,f,y)):b.push(this.controlPoints[0].clone()),this.arrowTypeEnd===SuperMap.Plot.ArrowLineType.DOUBLELINE?(b.push(this.controlPoints[1].clone()),this.addCell(P,c,y)):this.arrowTypeEnd===SuperMap.Plot.ArrowLineType.TRIANGLESOLID?(b.push(d),this.addCell(P,c,g)):b.push(this.controlPoints[1].clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b)}}},{key:"_setDefaultOptions",value:function(){l.default.prototype._setDefaultOptions.call(this),this.arrowTypeEnd=this.graphicObject2D.arrowTypeEnd,this.arrowTypeStart=this.graphicObject2D.arrowTypeStart}}]),e}();e.default=r,SuperMap.Geometry.ArrowLine=r},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),r=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.Brace",i.code=SuperMap.Plot.SymbolType.BRACESYMBOL,i.libID=0,i.symbolType=SuperMap.Plot.SymbolType.BRACESYMBOL,i.minEditPts=2,i.maxEditPts=2,0===i.getScaleValues().length&&(i.getScaleValues().push(.1),i.getScaleValues().push(.1)),i}return s(e,l["default"]),a(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=t[0],i=t[1],o=SuperMap.Plot.PlottingUtil.distance(e,i);this.getScaleValues().length<2&&(this.clearScaleValues(),this.getScaleValues().push(.1),this.getScaleValues().push(.1));for(var n=this.getScaleValues()[0],s=this.getScaleValues()[1],a=new SuperMap.Geometry.Point(o*n,o*n),l=new SuperMap.Geometry.Point(o*(.5-s/2),0),r=new SuperMap.Geometry.Point(.5*o,-o*s),u=new SuperMap.Geometry.Point(o*(.5+s/2),0),p=new SuperMap.Geometry.Point(o*(1-n),o*n),h=[],c=180*Math.PI/180,y=270*Math.PI/180,g=3*Math.PI/180,d=c;d<=y;d+=g){f=new SuperMap.Geometry.Point(a.x+o*n,a.y);f=SuperMap.Plot.PlottingUtil.rotateAngle(a,d,f),h.push(f)}h.push(l),h.push(r),h.push(u),c=270*Math.PI/180,y=360*Math.PI/180;for(d=c;d<=y;d+=g){var f=new SuperMap.Geometry.Point(p.x+o*n,p.y);f=SuperMap.Plot.PlottingUtil.rotateAngle(p,d,f),h.push(f)}for(var S=SuperMap.Plot.PlottingUtil.radian(e,i),P=[],m=0;m<h.length;m++){var b=new SuperMap.Geometry.Point(h[m].x+e.x,h[m].y+e.y);b=SuperMap.Plot.PlottingUtil.rotateAngle(e,S,b),P.push(b)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P),this.clearScalePoints();var L=new SuperMap.Geometry.Point(o*n,0),M=new SuperMap.Geometry.Point(L.x+e.x,L.y+e.y);(M=SuperMap.Plot.PlottingUtil.rotateAngle(e,S,M)).isScalePoint=!0,M.tag=0,this.addScalePoint(M);var v=new SuperMap.Geometry.Point(r.x+e.x,r.y+e.y);SuperMap.Plot.PlottingUtil.rotateAngle(e,S,v),v.isScalePoint=!0,v.tag=1,this.addScalePoint(v)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var i=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=SuperMap.Plot.PlottingUtil.distance(i[0],i[1]);if(0==t)(s=SuperMap.Plot.PlottingUtil.distance(i[0],e)/o)>0&&s<.4&&(this.getScaleValues()[0]=s);else if(1==t){var n=new SuperMap.Geometry.Point((i[0].x+i[1].x)/2,(i[0].y+i[1].y)/2),s=(new SuperMap.Geometry.Point(e.x,n.y),SuperMap.Plot.PlottingUtil.distance(e,n)/o);0<s&&.2>s&&(this.getScaleValues()[1]=s)}}this.calculateParts()}}]),e}();e.default=r,SuperMap.Geometry.Brace=r},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),r=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.defaultRadius=60,i.radius=null,i.CLASS_NAME="SuperMap.Geometry.CombinationalCircle",i.radius=void 0!==t.radius||t.radius!==i.radius?t.radius:i.radius,i.code=SuperMap.Plot.SymbolType.COMBINATIONALCIRCLE,i.libID=0,i.symbolType=SuperMap.Plot.SymbolType.COMBINATIONALCIRCLE,i.symbolName="组合圆",i.minEditPts=1,i.maxEditPts=9999,i.angleRange=[],void 0!==i.defaultRadius&&null!==i.defaultRadius||(i.defaultRadius=60),i}return s(e,l["default"]),a(e,[{key:"calculateParts",value:function(){if(this.clearComponents(),this.controlPoints=SuperMap.Plot.PlottingUtil.clearSamePts(this.controlPoints),!(null===this.controlPoints||this.controlPoints.length<1)){var t=this.getCircleLonLat(this.controlPoints[0],this.defaultRadius);if(this.angleRange=[],void 0===this.radius||null===this.radius){this.radius=[];for(i=0;i<this.controlPoints.length;i++)this.radius.push(t),this.angleRange.push([{Start:0,End:360}])}else for(i=0;i<this.controlPoints.length;i++)void 0!==this.radius[i]&&null!==this.radius[i]||(this.radius[i]=t),this.angleRange.push([{Start:0,End:360}]);for(var e=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),i=0;i<e.length;i++)if(0!==this.angleRange[i].length&&(0!==this.angleRange[i][0].Start||0!==this.angleRange[i][0].End))for(M=i+1;M<e.length;M++)if(0!==this.angleRange[M].length&&(0!==this.angleRange[M][0].Start||0!==this.angleRange[M][0].End)){var o=SuperMap.Plot.PlottingUtil.distance(e[i],e[M]);if(o<this.radius[i]+this.radius[M])if(o>Math.abs(this.radius[i]-this.radius[M]))for(var n=0;n<2;n++){var s,a;0==n?(a=i,s=SuperMap.Plot.PlottingUtil.radian(e[i],e[M])*this.RTOD,d=Math.acos((o*o+this.radius[i]*this.radius[i]-this.radius[M]*this.radius[M])/(2*o*this.radius[i]))*this.RTOD):(a=M,s=SuperMap.Plot.PlottingUtil.radian(e[M],e[i])*this.RTOD,d=Math.acos((o*o+this.radius[M]*this.radius[M]-this.radius[i]*this.radius[i])/(2*o*this.radius[M]))*this.RTOD);var l=s-d,r=s+d,u=l<0&&r>0||l>360||r>360;l=this.adjustAngle(l),r=this.adjustAngle(r);for(L=this.angleRange[a].length-1;L>=0;L--)if(u){if(r>this.angleRange[a][L].End||SuperMap.Plot.PlottingUtil.equalFuzzy(r,this.angleRange[a][L].End)){this.angleRange[a].splice(L,1);continue}if(r>this.angleRange[a][L].Start&&(this.angleRange[a][L].Start=r),l<this.angleRange[a][L].Start||SuperMap.Plot.PlottingUtil.equalFuzzy(l,this.angleRange[a][L].Start)){this.angleRange[a].splice(L,1);continue}l<this.angleRange[a][L].End&&(this.angleRange[a][L].End=l)}else if(l<this.angleRange[a][L].Start&&r>this.angleRange[a][L].End)this.angleRange[a].splice(L,1);else if(l>this.angleRange[a][L].Start&&r<this.angleRange[a][L].End)this.angleRange[a].push({Start:this.angleRange[a][L].Start,End:l}),this.angleRange[a].push({Start:r,End:this.angleRange[a][L].End}),this.angleRange[a].splice(L,1);else{if(l>this.angleRange[a][L].End)continue;if(l>this.angleRange[a][L].Start&&(this.angleRange[a][L].End=l),r<this.angleRange[a][L].Start)continue;r<this.angleRange[a][L].End&&(this.angleRange[a][L].Start=r)}}else{if(this.radius[i]<this.radius[M]){this.angleRange[i][0].Start=0,this.angleRange[i][0].End=0;break}this.angleRange[M][0].Start=0,this.angleRange[M][0].End=0}}for(var p=[],i=0;i<e.length;i++)if(0!==this.angleRange[i].length&&(0!==this.angleRange[i][0].Start||0!==this.angleRange[i][0].End))for(L=this.angleRange[i].length-1;L>=0;L--){for(var h=this.adjustAngle(this.angleRange[i][L].Start),c=this.adjustAngle(this.angleRange[i][L].End);c<h;)c+=360;if(c-h==360)this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[e[i],new SuperMap.Geometry.Point(e[i].x,e[i].y+this.radius[i])]);else{for(var y=[],g=(c-h)/72,d=h;d<c+g/2;d+=g){var f=e[i].x+this.radius[i]*Math.cos(d*this.DTOR),S=e[i].y+this.radius[i]*Math.sin(d*this.DTOR);y.push(new SuperMap.Geometry.Point(f,S))}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y),p.push(y)}}for(var P=[];0!==p.length;){var m=p[0];p.splice(0,1),void 0!==(m=this.generatePolygon(p,m))&&P.push(m)}for(var b=[],L=0;L<P.length;L++)b.push(P[L]);for(i=b.length-1;i>=0;i--)for(var M=0;M<b[i].length;M++){for(var L in b)if(parseInt(L)!==i){var v=b[L];if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(v,b[i][M])){var _=i,T=parseInt(L);b[T].push(b[T][0]),b[_].push(b[_][0]),b[T]=b[T].concat(b[_]),b.splice(_,1);break}}if(!isNaN(_)&&!isNaN(T))break}for(var x=0;x<b.length;x++){var O={type:SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,positionPoints:b[x],style:{surroundLineFlag:!1,lineWidthLimit:!0,weight:0}};this.components.splice(0,0,O)}for(i=0;i<e.length;i++){var A=new SuperMap.Geometry.Point(e[i].x+this.radius[i],e[i].y);A.isScalePoint=!0,A.tag=i,this.addScalePoint(A)}}}},{key:"generatePolygon",value:function(t,e){if(0===t.length||SuperMap.Plot.PlottingUtil.equalFuzzy(e[0].x,e[e.length-1].x,1e-7)&&SuperMap.Plot.PlottingUtil.equalFuzzy(e[0].y,e[e.length-1].y,1e-7))return e;for(var i=e[e.length-1],o=0;o<t.length;o++)if(SuperMap.Plot.PlottingUtil.equalFuzzy(t[o][0].x,i.x,1e-7)&&SuperMap.Plot.PlottingUtil.equalFuzzy(t[o][0].y,i.y,1e-7)){if(e=e.concat(t[o]),t.splice(o,1),void 0!==(s=this.generatePolygon(t,e))&&0!==s.length)return s}else if(SuperMap.Plot.PlottingUtil.equalFuzzy(t[o][t[o].length-1].x,i.x,1e-7)&&SuperMap.Plot.PlottingUtil.equalFuzzy(t[o][t[o].length-1].y,i.y,1e-7)){for(var n=t[o].length-1;n>=0;n--)e.push(t[o][n]);t.splice(o,1);var s=this.generatePolygon(t,e);if(void 0!==s&&0!==s.length)return s}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>=this.controlPoints.length)return;var i=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=SuperMap.Plot.PlottingUtil.distance(i[t],e);this.radius[t]=o}this.calculateParts()}},{key:"adjustAngle",value:function(t){for(;t>360;)t-=360;for(;t<0;)t+=360;return t}}]),e}();e.default=r,SuperMap.Geometry.CombinationalCircle=r},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),r=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.startAngle=0,i.endAngle=360,i.CLASS_NAME="SuperMap.Geometry.ConcentricCircle",i.startAngle=void 0!==t.startAngle||t.startAngle!==i.startAngle?t.startAngle:i.startAngle,i.endAngle=void 0!==t.endAngle||t.endAngle!==i.endAngle?t.endAngle:i.endAngle,i.libID=0,i.code=SuperMap.Plot.SymbolType.CONCENTRICCIRCLE,i.symbolType=SuperMap.Plot.SymbolType.CONCENTRICCIRCLE,i.symbolName="同心圆",i.minEditPts=3,i.maxEditPts=3,i}return s(e,l["default"]),a(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!(null===(t=SuperMap.Plot.PlottingUtil.clearSamePts(t))||t.length<2)){for(2==t.length&&t.push(t[1].clone());this.startAngle>360;)this.startAngle-=360;for(;this.startAngle<0;)this.startAngle+=360;for(;this.endAngle>360;)this.endAngle-=360;for(;this.endAngle<0;)this.endAngle+=360;for(;this.endAngle<=this.startAngle;)this.endAngle+=360;for(var e=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]),i=SuperMap.Plot.PlottingUtil.distance(t[0],t[2]),o=[],n=[],s=Math.PI/180,a=(this.endAngle-this.startAngle)/72,l=this.startAngle;l<this.endAngle+a/2;l+=a){var r=t[0].x+e*Math.cos(l*s),u=t[0].y+e*Math.sin(l*s),p=t[0].x+i*Math.cos(l*s),h=t[0].y+i*Math.sin(l*s);o.push(new SuperMap.Geometry.Point(r,u)),n.push(new SuperMap.Geometry.Point(p,h))}for(var c={surroundLineFlag:!1,lineWidthLimit:!0,weight:0},y=[],g=0;g<o.length;g++)y.push(o[g]);for(var d=n.length-1;d>=0;d--)y.push(n[d]);this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,y,c),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,o),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n);var f=t[0].x+e/2*Math.cos(this.startAngle*s),S=t[0].y+e/2*Math.sin(this.startAngle*s),P=t[0].x+i/2*Math.cos(this.endAngle*s),m=t[0].y+i/2*Math.sin(this.endAngle*s),b=new SuperMap.Geometry.Point(f,S);b.isScalePoint=!0,b.tag=0,this.addScalePoint(b);var L=new SuperMap.Geometry.Point(P,m);L.isScalePoint=!0,L.tag=1,this.addScalePoint(L)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){for(var i=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=180*SuperMap.Plot.PlottingUtil.radian(i[0],e)/Math.PI;o>360;)o-=360;for(;o<0;)o+=360;0==t?this.startAngle=o:1==t&&(this.endAngle=o)}this.calculateParts()}}]),e}();e.default=r,SuperMap.Geometry.ConcentricCircle=r},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},r=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),u=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.CurveEight",i.libID=0,i.code=SuperMap.Plot.SymbolType.CURVEEIGHT,i.symbolType=SuperMap.Plot.SymbolType.CURVEEIGHT,i.symbolName="八字形",i.minEditPts=2,i.maxEditPts=3,i}return s(e,r["default"]),a(e,[{key:"destroy",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"calculateParts",value:function(){if(this.clearComponents(),this.controlPoints&&null!==this.controlPoints&&!(this.minEditPts>this.controlPoints.length))if(2===this.controlPoints.length){var t=this.controlPoints[0].clone(),e=this.controlPoints[1].clone(),i=SuperMap.Plot.PlottingUtil.distance(t,e)/2,o=180*SuperMap.Plot.PlottingUtil.radian(t,e)/Math.PI,n=new SuperMap.Geometry.Point((t.x+e.x)/2,(t.y+e.y)/2),s=SuperMap.Plot.PlottingUtil.circlePoint(n,i,i,o+90),a=SuperMap.Plot.PlottingUtil.circlePoint(n,3*i,3*i,o+90);this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[s,new SuperMap.Geometry.Point(s.x+i,s.y)]),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[a,new SuperMap.Geometry.Point(a.x+i,a.y)])}else{var t=this.controlPoints[0].clone(),e=this.controlPoints[1].clone(),l=this.controlPoints[2].clone(),o=0;o=SuperMap.Plot.PlottingUtil.isRight(l,t,e)?180*SuperMap.Plot.PlottingUtil.radian(e,t)/Math.PI+90:180*SuperMap.Plot.PlottingUtil.radian(t,e)/Math.PI+90;var i=SuperMap.Plot.PlottingUtil.distance(t,e)/2,n=new SuperMap.Geometry.Point((t.x+e.x)/2,(t.y+e.y)/2),s=SuperMap.Plot.PlottingUtil.circlePoint(n,i,i,o),r=SuperMap.Plot.PlottingUtil.plumbLineLen(l,t,e);if(r<=4*i){a=SuperMap.Plot.PlottingUtil.circlePoint(n,3*i,3*i,o);this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[s,new SuperMap.Geometry.Point(s.x+i,s.y)]),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[a,new SuperMap.Geometry.Point(a.x+i,a.y)])}else{for(var a=SuperMap.Plot.PlottingUtil.circlePoint(n,r-i,r-i,o),u=180*Math.acos(i/(r-2*i))/Math.PI,p=o-u,h=o-180+u,c=o-180-u+360,y=[],g=o+u-360;g<=p;g+=4){S=SuperMap.Plot.PlottingUtil.circlePoint(s,i,i,g);y.push(S)}var d=SuperMap.Plot.PlottingUtil.circlePoint(s,i,i,p);y.push(d);for(var f=[],g=h;g<c;g+=4){var S=SuperMap.Plot.PlottingUtil.circlePoint(a,i,i,g);f.push(S)}var P=SuperMap.Plot.PlottingUtil.circlePoint(a,i,i,c);f.push(P);var m=[];m=m.concat(y);for(g=f.length-1;g>=0;g--)m.push(f[g]);this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,m)}}}}]),e}();e.default=u,SuperMap.Geometry.CurveEight=u},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},r=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),u=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.FreeCurve",i.code=SuperMap.Plot.SymbolType.FREECURVE,i.libID=0,i.symbolType=SuperMap.Plot.SymbolType.FREECURVE,i.symbolName="自由线",i.minEditPts=2,i.maxEditPts=9999,i}return s(e,r["default"]),a(e,[{key:"calculateParts",value:function(){if(this.clearComponents(),!(null===this.controlPoints||this.controlPoints.length<this.minEditPts)){this.clearScalePoints();var t=[];if(this.controlPoints.length<3)t.push(this.controlPoints[0]),t.push(this.controlPoints[1]);else{if(!this.getIsEdit()){var e=new SuperMap.Bounds(0,0,100,100),i=this.freeCurveBoundsPixelToLatLng(e),o=this.reSample(this.controlPoints,i.getWidth()/50);o.length<3&&(o=this.controlPoints),this.controlPoints=[],this.controlPoints=this.controlPoints.concat(o)}var n=SuperMap.Plot.PlottingUtil.computeBeizerPoints(this.getIsEdit(),this.controlPoints,this.getScaleValues());n.scalePoints=SuperMap.Plot.PlottingUtil.clearSamePts(n.scalePoints),n.scaleValues=SuperMap.Plot.PlottingUtil.clearSamePts(n.scaleValues),this.setScaleValues(n.scaleValues);for(var s=0,a=n.scalePoints.length;s<a;s++){var l=n.scalePoints[s];l.isScalePoint=!0,l.tag=s,this.addScalePoint(l)}t=SuperMap.Plot.PlottingUtil.clonePoints(n.beizerPoints)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>2*this.controlPoints.length-1)return;var i=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(2>i.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(i),n=-1;n=t%2==0?Math.floor(t/2):Math.floor((t+1)/2);var s=(e.x-i[n].x)/o,a=(e.y-i[n].y)/o;this.getScaleValues()[2*t]=s,this.getScaleValues()[2*t+1]=a}this.calculateParts()}},{key:"parseSymbolData",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"parseSymbolData",this).call(this)}},{key:"setSymbolData",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setSymbolData",this).call(this)}},{key:"reSample",value:function(t,e){var i=[];if(null==t||e<0)return i;var o=t.length;if(o>2){var n=new SuperMap.Geometry.Point(0,0),s=0,a=0,l=0,r=2*Math.PI;n=t[0],i.push(n);for(var u=!1,p=!1,h=!1,c=1;c<o;c++)if(a=Math.sqrt((t[c].y-n.y)*(t[c].y-n.y)+(t[c].x-n.x)*(t[c].x-n.x)),SuperMap.Plot.PlottingUtil.equalFuzzy(0,a))u&&(n=t[c-1],c--,i.push(n),l=0,r=2*Math.PI,u=!1,p=!1,h=!1);else{var y=(t[c].x-n.x)/a,g=(t[c].y-n.y)/a;if(s=g>0||SuperMap.Plot.PlottingUtil.equalFuzzy(0,g)?Math.acos(y):2*Math.PI-Math.acos(y),r>2*Math.PI&&s+2*Math.PI<r?(s+=2*Math.PI,l<0&&(l+=2*Math.PI)):l<0&&s-2*Math.PI>l&&(s-=2*Math.PI,r>2*Math.PI&&(r-=2*Math.PI)),s>l&&s<r||SuperMap.Plot.PlottingUtil.equalFuzzy(0,s-l)||SuperMap.Plot.PlottingUtil.equalFuzzy(0,s-r)){var d=Math.atan(e/a);p?l<s-d&&(l=s-d):(p=!0,l=s-d),h?r>s+d&&(r=s+d):(h=!0,r=s+d),u=!0}else n=t[c-1],c--,i.push(n),l=0,r=2*Math.PI,u=!1,p=!1,h=!1}return i.push(t[o-1]),i}return i}},{key:"reSampleByAngle",value:function(t,e){var i=[],o=t.length;if(null==t||o<=0||e<=0)return i;for(var n=t,s=o,a=!1;SuperMap.Plot.PlottingUtil.equalFuzzy(n[0].x,n[s-1].x)&&SuperMap.Plot.PlottingUtil.equalFuzzy(n[0].y,n[s-1].y);){if((s-=1)<=0)return i;a=!0}var l,r,u=[];for(l=0;l<s;l++)u.push(0);for(u[0]=1,u[s-1]=1,r=0,l=1;l<s-1;l++)if(SuperMap.Plot.PlottingUtil.distance(n[r],n[l])>1e-10&&SuperMap.Plot.PlottingUtil.distance(n[r],n[l+1])>1e-10){var p=180*SuperMap.Plot.PlottingUtil.InnerAngle(n[l],n[r],n[l+1])/Math.PI;p>e&&p<180-e&&(u[l]=1,r++)}var h=0;for(l=0;l<s;l++)1==u[l]&&h++;if(h>0){for(a&&h++,i=[],r=0,l=0;l<s;l++)1==u[l]&&(i[r++]=n[l]);return a&&(i[r]=i[0]),i}return i}}]),e}();e.default=u,SuperMap.Geometry.FreeCurve=u},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},r=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),u=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.GeoTooltipBox",i.minEditPts=3,i.maxEditPts=3,i.libID=0,i.code=SuperMap.Plot.SymbolType.ANNOFRAMESYMBOL,i.symbolType=SuperMap.Plot.SymbolType.ANNOFRAMESYMBOL,0===i.getScaleValues().length&&i.getScaleValues().push(.126),i}return s(e,r["default"]),a(e,[{key:"destroy",value:function(){this.type=null,this.position=null,this.index=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"calculateParts",value:function(){this.clearComponents();var t=this.getScaleValues()[0];if(!(t<0||t>1))if(t=(1-t)/2,this.controlPoints.length>=this.minEditPts){this.controlPoints[2]&&(this.controlPoints[2].isFixedPos=!0);var e,i,o,n,s,a;this.controlPoints[0].x<this.controlPoints[1].x?(e=this.controlPoints[0].x,o=this.controlPoints[1].x):(e=this.controlPoints[1].x,o=this.controlPoints[0].x),this.controlPoints[0].y<this.controlPoints[1].y?(n=this.controlPoints[0].y,i=this.controlPoints[1].y):(n=this.controlPoints[1].y,i=this.controlPoints[0].y),s=this.controlPoints[2].x,a=this.controlPoints[2].y;var l=0,r=(i-n)/(o-e);l=s<e?a>i?Math.abs((a-i)/(s-e))>r?2:1:a<n&&Math.abs((a-n)/(s-e))>r?4:1:s>o?a>i?Math.abs((a-i)/(s-o))>r?2:3:a<n&&Math.abs((a-n)/(s-o))>r?4:3:a>i?2:a<n?4:0,this.clearScalePoints();var u=[];switch(u.push(new SuperMap.Geometry.Point(e,n)),u.push(new SuperMap.Geometry.Point(e,i)),u.push(new SuperMap.Geometry.Point(o,i)),u.push(new SuperMap.Geometry.Point(o,n)),l){case 0:break;case 1:this.addScalePoint(new SuperMap.Geometry.Point(e,i-(i-n)*t)),u.splice(l,0,new SuperMap.Geometry.Point(e,i-(i-n)*t)),u.splice(l,0,this.controlPoints[2].clone()),u.splice(l,0,new SuperMap.Geometry.Point(e,n+(i-n)*t));break;case 2:this.addScalePoint(new SuperMap.Geometry.Point(o-(o-e)*t,i)),u.splice(l,0,new SuperMap.Geometry.Point(o-(o-e)*t,i)),u.splice(l,0,this.controlPoints[2].clone()),u.splice(l,0,new SuperMap.Geometry.Point(e+(o-e)*t,i));break;case 3:this.addScalePoint(new SuperMap.Geometry.Point(o,i-(i-n)*t)),u.splice(l,0,new SuperMap.Geometry.Point(o,n+(i-n)*t)),u.splice(l,0,this.controlPoints[2].clone()),u.splice(l,0,new SuperMap.Geometry.Point(o,i-(i-n)*t));break;case 4:this.addScalePoint(new SuperMap.Geometry.Point(o-(o-e)*t,n)),u.splice(l,0,new SuperMap.Geometry.Point(e+(o-e)*t,n)),u.splice(l,0,this.controlPoints[2].clone()),u.splice(l,0,new SuperMap.Geometry.Point(o-(o-e)*t,n))}this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,u)}else if(this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts){var p={surroundLineFlag:!1};this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,this.controlPoints,p)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint&&0==t){var i,o,n,s,a,l,r=this.getScalePoints()[0];this.controlPoints[0].x<this.controlPoints[1].x?(i=this.controlPoints[0].x,n=this.controlPoints[1].x):(i=this.controlPoints[1].x,n=this.controlPoints[0].x),this.controlPoints[0].y<this.controlPoints[1].y?(s=this.controlPoints[0].y,o=this.controlPoints[1].y):(s=this.controlPoints[1].y,o=this.controlPoints[0].y),a=this.controlPoints[2].x,l=this.controlPoints[2].y;var u=(o-s)/(n-i),p=.25;switch(a<i?l>o?Math.abs((l-o)/(a-i))>u?2:1:l<s&&Math.abs((l-s)/(a-i))>u?4:1:a>n?l>o?Math.abs((l-o)/(a-n))>u?2:3:l<s&&Math.abs((l-s)/(a-n))>u?4:3:l>o?2:l<s?4:0){case 1:case 3:var h=r.y+(e.y-r.y);h>o&&(h=o),h<(o+s)/2&&(h=(o+s)/2),p=1-2*(o-h)/(o-s);break;case 2:case 4:var c=r.x+(e.x-r.x);c>n&&(c=n),c<(i+n)/2&&(c=(i+n)/2),p=1-2*(n-c)/(n-i)}p<0&&(p=0),p>1&&(p=1),this.getScaleValues()[0]=p}this.calculateParts()}}]),e}();e.default=u,SuperMap.Geometry.GeoTooltipBox=u},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},r=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),u=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.GeoTooltipBoxM",i.minEditPts=4,i.maxEditPts=4,i.libID=0,i.code=SuperMap.Plot.SymbolType.ANNOFRAMESYMBOLM,i.symbolType=SuperMap.Plot.SymbolType.ANNOFRAMESYMBOLM,i.symbolName="多角标注框",0===i.getScaleValues().length&&(i.getScaleValues().push(.126),i.getScaleValues().push(.126)),i}return s(e,r["default"]),a(e,[{key:"destroy",value:function(){this.type=null,this.position=null,this.index=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destory",this).call(this)}},{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length===this.minEditPts-1&&t.push(t[t.length-1].clone()),t.length>=this.minEditPts){this.controlPoints[2]&&(this.controlPoints[2].isFixedPos=!0),this.controlPoints[3]&&(this.controlPoints[3].isFixedPos=!0);var e=this.getScaleValues()[0];if(e<0||e>1)return;e=(1-e)/2;var i=this.getScaleValues()[1];if(i<0||i>1)return;i=(1-i)/2;var o,n,s,a,l,r;t[0].x<t[1].x?(o=t[0].x,s=t[1].x):(o=t[1].x,s=t[0].x),t[0].y<t[1].y?(a=t[0].y,n=t[1].y):(a=t[1].y,n=t[0].y),l=t[2].x,r=t[2].y;var u=this.getAction(l,r,o,n,s,a);l=t[3].x,r=t[3].y;var p=this.getAction(l,r,o,n,s,a);this.clearScalePoints();var h=[];if(h.push(new SuperMap.Geometry.Point(o,a)),h.push(new SuperMap.Geometry.Point(o,n)),h.push(new SuperMap.Geometry.Point(s,n)),h.push(new SuperMap.Geometry.Point(s,a)),u===p&&0!==u){switch(u){case 0:break;case 1:g=new SuperMap.Geometry.Point(o,a+(n-a)/2*e),d=new SuperMap.Geometry.Point(o,(n+a)/2-(n-a)/2*e),f=new SuperMap.Geometry.Point(o,(n+a)/2+(n-a)/2*i),S=new SuperMap.Geometry.Point(o,n-(n-a)/2*i);break;case 2:g=new SuperMap.Geometry.Point(o+(s-o)/2*e,n),d=new SuperMap.Geometry.Point((o+s)/2-(s-o)/2*e,n),f=new SuperMap.Geometry.Point((o+s)/2+(s-o)/2*i,n),S=new SuperMap.Geometry.Point(s-(s-o)/2*i,n);break;case 3:g=new SuperMap.Geometry.Point(s,n-(n-a)/2*e),d=new SuperMap.Geometry.Point(s,(n+a)/2+(n-a)/2*e),f=new SuperMap.Geometry.Point(s,(n+a)/2-(n-a)/2*i),S=new SuperMap.Geometry.Point(s,a+(n-a)/2*i);break;case 4:g=new SuperMap.Geometry.Point(s-(s-o)/2*e,a),d=new SuperMap.Geometry.Point((o+s)/2+(s-o)/2*e,a),f=new SuperMap.Geometry.Point((o+s)/2-(s-o)/2*i,a),S=new SuperMap.Geometry.Point(o+(s-o)/2*i,a)}var c=new SuperMap.Geometry.Point(0,0),y=SuperMap.Plot.PlottingUtil.intersectLineSegs(d,t[2],f,t[3],c);if(y&&SuperMap.Plot.PlottingUtil.equalFuzzy(c.x,d.x)&&SuperMap.Plot.PlottingUtil.equalFuzzy(c.y,d.y)&&(y=!1),y){switch(u){case 0:break;case 1:g.y+=(n-a)/2,d.y+=(n-a)/2,f.y-=(n-a)/2,S.y-=(n-a)/2;break;case 2:g.x+=(s-o)/2,d.x+=(s-o)/2,f.x-=(s-o)/2,S.x-=(s-o)/2;break;case 3:g.y-=(n-a)/2,d.y-=(n-a)/2,f.y+=(n-a)/2,S.y+=(n-a)/2;break;case 4:g.x-=(s-o)/2,d.x-=(s-o)/2,f.x+=(s-o)/2,S.x+=(s-o)/2}h.splice(u,0,d),h.splice(u,0,t[2].clone()),h.splice(u,0,g),h.splice(u,0,S),h.splice(u,0,t[3].clone()),h.splice(u,0,f)}else h.splice(u,0,S),h.splice(u,0,t[3].clone()),h.splice(u,0,f),h.splice(u,0,d),h.splice(u,0,t[2].clone()),h.splice(u,0,g);switch(u){case 0:break;case 1:case 2:this.addScalePoint(d),this.addScalePoint(S);break;case 3:case 4:this.addScalePoint(g),this.addScalePoint(f)}}else{var g,d,f,S;switch(u){case 0:this.addScalePoint(new SuperMap.Geometry.Point(0,0));break;case 1:g=new SuperMap.Geometry.Point(o,a+(n-a)*e),d=new SuperMap.Geometry.Point(o,n-(n-a)*e),this.addScalePoint(d);break;case 2:g=new SuperMap.Geometry.Point(o+(s-o)*e,n),d=new SuperMap.Geometry.Point(s-(s-o)*e,n),this.addScalePoint(d);break;case 3:g=new SuperMap.Geometry.Point(s,n-(n-a)*e),d=new SuperMap.Geometry.Point(s,a+(n-a)*e),this.addScalePoint(g);break;case 4:g=new SuperMap.Geometry.Point(s-(s-o)*e,a),d=new SuperMap.Geometry.Point(o+(s-o)*e,a),this.addScalePoint(g)}switch(p){case 0:this.addScalePoint(new SuperMap.Geometry.Point(0,0));break;case 1:f=new SuperMap.Geometry.Point(o,a+(n-a)*i),S=new SuperMap.Geometry.Point(o,n-(n-a)*i),this.addScalePoint(S);break;case 2:f=new SuperMap.Geometry.Point(o+(s-o)*i,n),S=new SuperMap.Geometry.Point(s-(s-o)*i,n),this.addScalePoint(S);break;case 3:f=new SuperMap.Geometry.Point(s,n-(n-a)*i),S=new SuperMap.Geometry.Point(s,a+(n-a)*i),this.addScalePoint(f);break;case 4:f=new SuperMap.Geometry.Point(s-(s-o)*i,a),S=new SuperMap.Geometry.Point(o+(s-o)*i,a),this.addScalePoint(f)}u>p?(0!==u&&(h.splice(u,0,d),h.splice(u,0,t[2].clone()),h.splice(u,0,g)),0!==p&&(h.splice(p,0,S),h.splice(p,0,t[3].clone()),h.splice(p,0,f))):(0!==p&&(h.splice(p,0,S),h.splice(p,0,t[3].clone()),h.splice(p,0,f)),0!==u&&(h.splice(u,0,d),h.splice(u,0,t[2].clone()),h.splice(u,0,g)))}this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,h,{surroundLineFlag:!1})}else if(t.length>=2&&t.length<this.minEditPts){var P={surroundLineFlag:!1};this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,t,P)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var i,o,n,s,a,l,r=this.getScalePoints()[t];this.controlPoints[0].x<this.controlPoints[1].x?(i=this.controlPoints[0].x,n=this.controlPoints[1].x):(i=this.controlPoints[1].x,n=this.controlPoints[0].x),this.controlPoints[0].y<this.controlPoints[1].y?(s=this.controlPoints[0].y,o=this.controlPoints[1].y):(s=this.controlPoints[1].y,o=this.controlPoints[0].y),a=this.controlPoints[2].x,l=this.controlPoints[2].y;var u=this.getAction(a,l,i,o,n,s);a=this.controlPoints[3].x,l=this.controlPoints[3].y;var p=this.getAction(a,l,i,o,n,s),h=.25;if(u===p&&0!==u)switch(u){case 1:case 3:c=2*(e.y-r.y)/((o-s)/2);h=this.getScaleValues()[t]+c;break;case 2:case 4:c=2*(e.x-r.x)/((n-i)/2);h=this.getScaleValues()[t]+c}else switch(0===t?u:p){case 0:h=this.getScaleValues()[t];break;case 1:case 3:c=2*(e.y-r.y)/(o-s);h=this.getScaleValues()[t]+c;break;case 2:case 4:var c=2*(e.x-r.x)/(n-i);h=this.getScaleValues()[t]+c}h<0&&(h=0),h>1&&(h=1),this.getScaleValues()[t]=h}this.calculateParts()}},{key:"getAction",value:function(t,e,i,o,n,s){var a=(o-s)/(n-i);return t<i?e>o?Math.abs((e-o)/(t-i))>a?2:1:e<s&&Math.abs((e-s)/(t-i))>a?4:1:t>n?e>o?Math.abs((e-o)/(t-n))>a?2:3:e<s&&Math.abs((e-s)/(t-n))>a?4:3:e>o?2:e<s?4:0}}]),e}();e.default=u,SuperMap.Geometry.GeoTooltipBoxM=u},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},r=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),u=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.islocationCircle=!1,i.tipPoint=null,i.textBoxType=null,i.CLASS_NAME="SuperMap.Geometry.LineMarking",i.minEditPts=2,i.maxEditPts=2,i.libID=0,i.code=SuperMap.Plot.SymbolType.LINEMARKING,i.symbolType=SuperMap.Plot.SymbolType.LINEMARKING,i.symbolName="线型标注",i.islocationCircle=null,null===i.textBoxType&&(i.textBoxType=SuperMap.Plot.TextBoxType.RECTBOX),0===i.getScaleValues().length&&(i.getScaleValues().push(.126),i.getScaleValues().push(.1),i.getScaleValues().push(-.3)),i}return s(e,r["default"]),a(e,[{key:"destroy",value:function(){this.islocationCircle=null,this.textBoxType=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"calculateParts",value:function(){this.clearComponents();var t=this.getScaleValues()[0];if(!(t<0||t>1))if(t=(1-t)/2,this.controlPoints.length>=this.minEditPts){this.clearScalePoints();var e,i,o,n,s,a,l=[];if(this.controlPoints[0].x<this.controlPoints[1].x?(e=this.controlPoints[0].x,o=this.controlPoints[1].x):(e=this.controlPoints[1].x,o=this.controlPoints[0].x),this.controlPoints[0].y<this.controlPoints[1].y?(n=this.controlPoints[0].y,i=this.controlPoints[1].y):(n=this.controlPoints[1].y,i=this.controlPoints[0].y),l.push(new SuperMap.Geometry.Point(e,n)),l.push(new SuperMap.Geometry.Point(e,i)),l.push(new SuperMap.Geometry.Point(o,i)),l.push(new SuperMap.Geometry.Point(o,n)),null===this.tipPoint&&(this.tipPoint=new SuperMap.Geometry.Point,this.tipPoint.x=e+(o-e)*this.getScaleValues()[1],this.tipPoint.y=n+(i-n)*this.getScaleValues()[2]),!1===this.getIsEdit()&&(this.tipPoint.x=e+(o-e)*this.getScaleValues()[1],this.tipPoint.y=n+(i-n)*this.getScaleValues()[2]),this.islocationCircle&&this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[this.tipPoint,new SuperMap.Geometry.Point(this.tipPoint.x-.05,this.tipPoint.y-.05)]),this.addScalePoint(this.tipPoint,0),this.textBoxType===SuperMap.Plot.TextBoxType.RECTBOX||this.textBoxType===SuperMap.Plot.TextBoxType.LINEBOX){s=this.tipPoint.x,a=this.tipPoint.y;var r=0,u=(i-n)/(o-e),p=[];switch(r=s<e?a>i?Math.abs((a-i)/(s-e))>u?2:1:a<n&&Math.abs((a-n)/(s-e))>u?4:1:s>o?a>i?Math.abs((a-i)/(s-o))>u?2:3:a<n&&Math.abs((a-n)/(s-o))>u?4:3:a>i?2:a<n?4:0){case 0:break;case 1:l.splice(r,0,new SuperMap.Geometry.Point(e,i-(i-n)*t)),p.push(new SuperMap.Geometry.Point(e,i-(i-n)*t)),p.push(new SuperMap.Geometry.Point(this.tipPoint.x+.05,this.tipPoint.y+.05));break;case 2:l.splice(r,0,new SuperMap.Geometry.Point(o-(o-e)*t,i)),p.push(new SuperMap.Geometry.Point(o-(o-e)*t,i)),p.push(new SuperMap.Geometry.Point(this.tipPoint.x-.05,this.tipPoint.y-.05));break;case 3:l.splice(r,0,new SuperMap.Geometry.Point(o,n+(i-n)*t)),p.push(new SuperMap.Geometry.Point(o,i-(i-n)*t)),p.push(new SuperMap.Geometry.Point(this.tipPoint.x-.05,this.tipPoint.y-.05));break;case 4:l.splice(r,0,new SuperMap.Geometry.Point(e+(o-e)*t,n)),p.push(new SuperMap.Geometry.Point(o-(o-e)*t,n)),p.push(new SuperMap.Geometry.Point(this.tipPoint.x+.05,this.tipPoint.y+.05))}0!==p.length&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p)}if(0!==l.length&&this.textBoxType===SuperMap.Plot.TextBoxType.RECTBOX)this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,l);else if(0!==l.length&&this.textBoxType===SuperMap.Plot.TextBoxType.LINEBOX){var h=[];switch(r){case 0:break;case 1:h=(h=(h=h.concat(l[0])).concat(l[1])).concat(l[2]);break;case 2:h=(h=(h=h.concat(l[1])).concat(l[2])).concat(l[3]);break;case 3:h=(h=(h=h.concat(l[2])).concat(l[3])).concat(l[4]);break;case 4:h=(h=(h=h.concat(l[3])).concat(l[4])).concat(l[0])}3===h.length?this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h):this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,this.controlPoints)}}else this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,this.controlPoints)}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint)if(0===t)this.tipPoint.x=e.x,this.tipPoint.y=e.y;else if(1===t){var i,o,n,s,a,l,r=this.getScalePoints()[0];this.controlPoints[0].x<this.controlPoints[1].x?(i=this.controlPoints[0].x,n=this.controlPoints[1].x):(i=this.controlPoints[1].x,n=this.controlPoints[0].x),this.controlPoints[0].y<this.controlPoints[1].y?(s=this.controlPoints[0].y,o=this.controlPoints[1].y):(s=this.controlPoints[1].y,o=this.controlPoints[0].y),a=this.tipPoint.x,l=this.tipPoint.y;var u=(o-s)/(n-i),p=.25;switch(a<i?l>o?Math.abs((l-o)/(a-i))>u?2:1:l<s&&Math.abs((l-s)/(a-i))>u?4:1:a>n?l>o?Math.abs((l-o)/(a-n))>u?2:3:l<s&&Math.abs((l-s)/(a-n))>u?4:3:l>o?2:l<s?4:0){case 1:case 3:var h=r.y+(e.y-r.y);h>o&&(h=o),h<(o+s)/2&&(h=(o+s)/2),p=1-2*(o-h)/(o-s);break;case 2:case 4:var c=r.x+(e.x-r.x);c>n&&(c=n),c<(i+n)/2&&(c=(i+n)/2),p=1-2*(n-c)/(n-i)}p<0&&(p=0),p>1&&(p=1),this.getScaleValues()[0]=p}this.calculateParts()}}]),e}();e.default=u,SuperMap.Geometry.LineMarking=u},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},r=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),u=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.subSectionCount=10,i.CLASS_NAME="SuperMap.Geometry.LineRelation",i.minEditPts=2,i.maxEditPts=2,i.libID=0,i.code=SuperMap.Plot.SymbolType.LINERELATION,i.symbolType=SuperMap.Plot.SymbolType.LINERELATION,i.symbolName="对象间连线",i}return s(e,r["default"]),a(e,[{key:"destroy",value:function(){this.subSectionCount=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"calculateParts",value:function(){this.clearComponents();for(var t=0;t<this.controlPoints.length;t++)this.controlPoints[t].tag=t;var e=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);null!==e&&e.length>=this.minEditPts&&this.computeLine(e)}},{key:"computeLine",value:function(t){this.components=[];var e=t[0],i=t[t.length-1];this.subSectionCount<=1&&(this.subSectionCount=10);var o=SuperMap.Plot.PlottingUtil.distance(e,i)/(2*this.subSectionCount-1);if(this.lineRelationType===SuperMap.Plot.LineRelation.SOLID)this.addCell(24,t,{surroundLineFlag:!1});else if(this.lineRelationType===SuperMap.Plot.LineRelation.DASH)for(a=0;a<this.subSectionCount;a++){var n=SuperMap.Plot.PlottingUtil.findPoint(e,i,2*a*o,0),s=SuperMap.Plot.PlottingUtil.findPoint(e,i,(2*a+1)*o,0);(u=[]).push(n),u.push(s),this.addCell(24,u,{surroundLineFlag:!1})}else if(this.lineRelationType===SuperMap.Plot.LineRelation.ARROW)for(var a=0;a<this.subSectionCount;a++){var n=SuperMap.Plot.PlottingUtil.findPoint(e,i,2*a*o,0),s=SuperMap.Plot.PlottingUtil.findPoint(e,i,(2*a+1)*o,0),l=SuperMap.Plot.PlottingUtil.findPoint(s,n,o,60),r=SuperMap.Plot.PlottingUtil.findPoint(s,n,o,-60),u=[];u.push(l),u.push(s),u.push(r),this.addCell(24,[l,s,r],{surroundLineFlag:!1})}}}]),e}();e.default=u,SuperMap.Geometry.LineRelation=u},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},r=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),u=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.NodeChain",i.libID=0,i.code=SuperMap.Plot.SymbolType.NODECHAIN,i.symbolType=SuperMap.Plot.SymbolType.NODECHAIN,i.symbolName="节点链",i.minEditPts=2,i.maxEditPts=99999,0===i.getScaleValues().length&&(i.getScaleValues().push(0),null!==i.symbolData&&void 0!==i.symbolData?i.getScaleValues()[1]=.25*i.symbolData.subSymbolScaleValue:i.getScaleValues()[1]=.1),i}return s(e,r["default"]),a(e,[{key:"destroy",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"calculateParts",value:function(){if(this.clearComponents(),this.controlPoints&&null!==this.controlPoints){var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t),this.getIsEdit()||(this.getScaleValues()[1]=.25*this.getSubSymbolScaleValue());var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),i=e*this.getScaleValues()[0],o=e*this.getScaleValues()[1];if(0<this.getSubSymbols().length&&null!==this.getSubSymbols()[0]&&void 0!==this.getSubSymbols()[0])if(this.getSubSymbols()[0].code>0)for(var n=0;n<t.length;n++){var s=new SuperMap.Geometry.Point(t[n].x,t[n].y+i);this.computeSubSymbol(this.getSubSymbols()[0],s,2*o,0)}else this.addCircles(t,i,o);else this.addCircles(t,i,o);var a=new SuperMap.Geometry.Point(t[0].x,t[0].y+i);this.addScalePoint(a);var l=SuperMap.Plot.PlottingUtil.circlePoint(a,o,o,90);this.addScalePoint(l)}}}},{key:"addCircles",value:function(t,e,i){for(var o={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0},n=0;n<t.length;n++){var s=new SuperMap.Geometry.Point(t[n].x,t[n].y+e),a=this.getCirclePts(s,i);this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,a,o)}}},{key:"getCirclePts",value:function(t,e){for(var i=[],o=0;o<=360;o+=12){var n=SuperMap.Plot.PlottingUtil.circlePoint(t,e,e,o);i.push(n)}return i}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var i=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((i=SuperMap.Plot.PlottingUtil.clearSamePts(i)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(i);if(0===t)this.getScaleValues()[0]=(e.y-i[0].y)/o;else if(1===t){var n=SuperMap.Plot.PlottingUtil.distance(e,i[0]);this.getScaleValues()[1]=n/o}}this.calculateParts()}}]),e}();e.default=u,SuperMap.Geometry.NodeChain=u},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=(function(t){t&&t.__esModule}(i(12)),function(){function t(e,i,n){o(this,t),this.m_x=0,this.m_y=0,this.m_type=0,this.CLASS_NAME="SuperMap.Plot.Element",this.m_x=e,this.m_y=i,this.m_type=n}return n(t,[{key:"GetX",value:function(){return this.m_x}},{key:"GetY",value:function(){return this.m_y}},{key:"GetType",value:function(){return this.m_type}},{key:"GetPosition",value:function(){return SuperMap.Geometry.Point(this.m_x,this.m_y)}},{key:"SetPosition",value:function(t,e){this.m_x=t,this.m_y=e}},{key:"GetType",value:function(){return this.m_type}},{key:"SetType",value:function(t){this.m_type=t}},{key:"IsCurveTo",value:function(){return 2==this.m_type}},{key:"IsLineTo",value:function(){return 1==this.m_type}},{key:"IsMoveTo",value:function(){return 0==this.m_type}},{key:"Equal",value:function(t){return SuperMap.Plot.PlottingUtil.equalFuzzy(this.m_x,t.m_x,1e-10)&&SuperMap.Plot.PlottingUtil.equalFuzzy(this.m_y,t.m_y,1e-10)&&this.m_type==t.m_type}},{key:"clone",value:function(){return new SuperMap.Plot.Path2D.Element(this.m_x,this.m_y,this.m_type)}}]),t}());e.default=s,SuperMap.Plot.Element=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),r=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.relLineText=0,i.showPathLine=!0,i.showPathLineArrow=!1,i.isCurve=!1,i.isAvoid=!1,i.textToLineDistance=0,i.CLASS_NAME="SuperMap.Geometry.PathText",i.code=SuperMap.Plot.SymbolType.PATHTEXT,i.libID=0,i.symbolType=SuperMap.Plot.SymbolType.PATHTEXT,i.symbolName="沿线注记",i.minEditPts=2,i.maxEditPts=9999,i}return s(e,l["default"]),a(e,[{key:"getRelLineText",value:function(){if(this.graphicObject2D)return this.graphicObject2D.relLineText;this.relLineText}},{key:"getShowPathLine",value:function(){if(this.graphicObject2D)return this.graphicObject2D.showPathLine;this.showPathLine}},{key:"getShowPathLineArrow",value:function(){if(this.graphicObject2D)return this.graphicObject2D.showPathLineArrow;this.showPathLineArrow}},{key:"getIsCurve",value:function(){if(this.graphicObject2D)return this.graphicObject2D.isCurve;this.isCurve}},{key:"getIsAvoid",value:function(){if(this.graphicObject2D)return this.graphicObject2D.isAvoid;this.isAvoid}},{key:"getTextToLineDistance",value:function(){if(this.graphicObject2D)return this.graphicObject2D.textToLineDistance;this.textToLineDistance}}]),a(e,[{key:"calculateParts",value:function(){if(this.clearComponents(),this.controlPoints=SuperMap.Plot.PlottingUtil.clearSamePts(this.getControlPoints()),null!==this.controlPoints&&0!==this.controlPoints.length&&!(this.controlPoints.length<this.minEditPts)){SuperMap.Util.isArray(this.textContent)||(this.textContent=[this.textContent]);var t=[];if(t=this.getIsCurve()?SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(this.controlPoints):SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),this.getRelLineText()===SuperMap.Plot.RelLineText.ONBOTHLINE){this.relLineText=SuperMap.Plot.RelLineText.ONRIGHTLINE;var e=this.getTextPathPts(t,!1);this.showPathLine=this.getShowPathLine(),this.computeText(e,this.textContent[0],t),this.relLineText=SuperMap.Plot.RelLineText.ONLEFTLINE;var i=this.getShowPathLine();this.showPathLine=!1;var o=this.getTextPathPts(t,!0);this.textContent.length>1?this.computeText(o,this.textContent[1],t):this.computeText(o,this.textContent[0],t),this.relLineText=SuperMap.Plot.RelLineText.ONBOTHLINE,this.showPathLine=i}else{var n=[];n=this.getRelLineText()===SuperMap.Plot.RelLineText.ONRIGHTLINE?this.getTextPathPts(t,!1):this.getRelLineText()===SuperMap.Plot.RelLineText.ONLEFTLINE?this.getTextPathPts(t,!0):t,this.computeText(n,this.textContent[0],t)}}}},{key:"getTextPathPts",value:function(t,e){t=SuperMap.Plot.PlottingUtil.clearSamePts(t);var i=this.getLonLatDistanceFromPixel(this.getTextToLineDistance());if(0>=i)return SuperMap.Plot.PlottingUtil.clonePoints(t);var o=SuperMap.Plot.PlottingUtil.paraLine(t,i,e);return SuperMap.Plot.PlottingUtil.clearSamePts(o)}},{key:"computeText",value:function(t,e,i){if(!(t.length<2)){for(var o=e.length,n=t,s=n.length,a=0,l=0;l<n.length-1;l++)a+=SuperMap.Plot.PlottingUtil.distance(n[l],n[l+1]);var r={index:-1,pt:n[0]},u=0,p=0,h=180/Math.PI,c=this.getTextBounds(this.getStyle(),e),y="lm";y=this.relLineText===SuperMap.Plot.RelLineText.ONLINE?"lm":this.relLineText===SuperMap.Plot.RelLineText.ONLEFTLINE?"lb":"lt";var g=(a-c.getWidth())/2;g<=0&&(g=0);for(var d=[],l=0;l<o;l++){var f=this.getTextBounds(this.getStyle(),e.charAt(l));d.push(new SuperMap.Bounds(0,-c.getHeight(),f.getWidth(),0))}for(var S,P=!1,m=!1,b=0,L=0,M=[];u<=g&&p<s-1;)p++,u,u+=SuperMap.Plot.PlottingUtil.distance(n[p-1],n[p]);var v=SuperMap.Plot.PlottingUtil.findPointInPolyLine(n,g),_=SuperMap.Plot.PlottingUtil.radian(n[p-1],n[p])*h;_>180&&(_-=360),_<-180&&(_+=360),_>90&&_<=180?(b=-180,P=!0,m=!0):_>-180&&_<-90&&(b=180,P=!0,m=!0);0!=b?this.relLineText===SuperMap.Plot.RelLineText.ONLINE||(y=this.relLineText===SuperMap.Plot.RelLineText.ONLEFTLINE?"lt":"lb"):this.relLineText===SuperMap.Plot.RelLineText.ONLINE||(y=this.relLineText===SuperMap.Plot.RelLineText.ONLEFTLINE?"lb":"lt");for(l=0;l<o&&!(g>a);l++){var T=l;for(m&&(T=o-l-1),L=(S=d[T]).getWidth(),P&&(g+=L);u<=g&&p<s-1;)p++,u,u+=SuperMap.Plot.PlottingUtil.distance(n[p-1],n[p]);var x=(_=SuperMap.Plot.PlottingUtil.radian(n[p-1],n[p])*h)+b;if((r=SuperMap.Plot.PlottingUtil.findPointInPolyLine(n,g)).index<0)break;S.add(r.pt.x,r.pt.y);var O=e.charAt(T),A={};A.type=SuperMap.Plot.SymbolType.TEXTSYMBOL,A.textContent=O,A.positionPoints=[r.pt],A.style={surroundLineFlag:!1,labelAlign:y,labelRotation:-x},M.push(A),P||(g+=L)}var w=SuperMap.Plot.PlottingUtil.findPointInPolyLine(n,g);if(this.showPathLine){if(this.relLineText===SuperMap.Plot.RelLineText.ONLINE&&this.getIsAvoid()){if(v.index>=0){for(var D=[],l=0;l<=v.index;l++)D.push(i[l]);D.push(v.pt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,D)}if(w.index>=0){var E=[];E.push(w.pt);for(l=w.index+1;l<i.length;l++)E.push(i[l]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,E)}}else this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);this.getShowPathLineArrow()&&this.addArrow(i)}for(l=0;l<M.length;l++)this.components.push(M[l])}}},{key:"addArrow",value:function(t){if(t.length<2)return t;var e=0,i=SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints)*(e=(this.getIsEdit(),null===this.getSubSymbolScaleValue()?.05:.5*this.getSubSymbolScaleValue())),o=t[t.length-1];if(t.length>2){for(var n=-1,s=t.length-2;s>=0;s--)if(i<SuperMap.Plot.PlottingUtil.distance(o,t[s])){n=s;break}t.splice(n+1,t.length-n),t.push(o)}var a=t[t.length-2],l=t[t.length-1],r=i;if(void 0===a)return t;if(!(SuperMap.Plot.PlottingUtil.distance(a,l)<i)){var u=SuperMap.Plot.PlottingUtil.radian(a,l)*this.RTOD,p=SuperMap.Plot.PlottingUtil.circlePoint(l,r,r,u+157.5),h=SuperMap.Plot.PlottingUtil.circlePoint(l,r,r,u+202.5),c={surroundLineFlag:!1,fillLimit:!0,fillColor:this.getStyle().color,lineTypeLimit:!0,fill:!0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[p,t[t.length-1],h],c)}}}]),e}();e.default=r,SuperMap.Geometry.PathText=r},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},r=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),u=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.annotationPosition=null,i.CLASS_NAME="SuperMap.Geometry.PolygonRegion",i.minEditPts=3,i.maxEditPts=9999,i.libID=0,i.code=SuperMap.Plot.SymbolType.POLYGONREGION,i.symbolType=SuperMap.Plot.SymbolType.POLYGONREGION,i.symbolName="多边形区域管理",0===i.getScaleValues().length&&i.getScaleValues().push(0),i}return s(e,r["default"]),a(e,[{key:"destroy",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(null!==(t=SuperMap.Plot.PlottingUtil.clearSamePts(t))&&t.length>=this.minEditPts){this.addCell(32,t,{surroundLineFlag:!1});SuperMap.Plot.PlottingUtil.isPloyClockwise(t);if(this.textContent&&null!==this.textContent&&this.textContent.length>0){var e=[];this.annotationPosition>t.length&&(this.annotationPosition=0);var i={labelRotation:0,surroundLineFlag:!1,labelAlign:"lt"};if(0===this.annotationPosition)e=[SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t)];else{var o=null,n=null;this.annotationPosition===t.length?(o=t[t.length-1],n=t[0]):(o=t[this.annotationPosition-1],n=t[this.annotationPosition]),i.labelRotation=-SuperMap.Plot.PlottingUtil.radian(o,n)/Math.PI*180;var s=this.getScaleValues()[0]*SuperMap.Plot.PlottingUtil.distance(o,n);e=[SuperMap.Plot.PlottingUtil.findPoint(o,n,s,0)]}this.addCell(34,e,i,this.textContent);var a=new SuperMap.Geometry.Point(e[0].x,e[0].y);a.isScalePoint=!0,a.tag=0,this.clearScalePoints(),this.addScalePoint(a)}}else this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine()}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){for(var i=0,o=SuperMap.Plot.PlottingUtil.distance(e,this.controlPoints[0]),n=1;n<this.controlPoints.length;n++){var s=SuperMap.Plot.PlottingUtil.distance(e,this.controlPoints[n]);s<o&&(o=s,i=n)}var a=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);(a=SuperMap.Plot.PlottingUtil.clearSamePts(a)).push(a[0].clone());var l=SuperMap.Plot.PlottingUtil.computePointToLineMinDis(e,a);if(-1===l.minDis)this.annotationPosition=i+1,this.offsetX=0,this.offsetY=0;else{var r=SuperMap.Plot.PlottingUtil.projectPoint(e,a[l.index],a[l.index+1]),u=SuperMap.Plot.PlottingUtil.distance(e,r),p=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(this.controlPoints),h=SuperMap.Plot.PlottingUtil.distance(e,p);if(h<u&&h<o)this.annotationPosition=0,this.getScaleValues()[0]=0;else if(o<u&&o<h)this.annotationPosition=i+1,this.getScaleValues()[0]=0;else if(u<o&&u<h){this.annotationPosition=l.index+1;var c=null,y=null;this.annotationPosition===this.controlPoints.length?(c=this.controlPoints[this.controlPoints.length-1],y=this.controlPoints[0]):(c=this.controlPoints[this.annotationPosition-1],y=this.controlPoints[this.annotationPosition]);var g=SuperMap.Plot.PlottingUtil.distance(r,c),d=SuperMap.Plot.PlottingUtil.distance(c,y);this.getScaleValues()[0]=g/d}}}this.calculateParts()}},{key:"parseSymbolData",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"parseSymbolData",this).call(this),this.symbolData&&(this.annotationPosition=this.symbolData.annotationPosition)}},{key:"setSymbolData",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setSymbolData",this).call(this),this.symbolData&&(this.symbolData.annotationPosition=this.annotationPosition)}}]),e}();e.default=u,SuperMap.Geometry.PolygonRegion=u},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),r=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.RegularPolygon",i.code=SuperMap.Plot.SymbolType.REGULARPOLYGON,i.libID=0,i.symbolType=SuperMap.Plot.SymbolType.REGULARPOLYGON,i.minEditPts=2,i.maxEditPts=9999,i}return s(e,l["default"]),a(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!(null===(t=SuperMap.Plot.PlottingUtil.clearSamePts(t))||t.length<this.minEditPts)){var e=t.length,i=[],o=2*Math.PI/(e+1),n=SuperMap.Plot.PlottingUtil.radian(t[0],t[e-1]),s=SuperMap.Plot.PlottingUtil.distance(t[0],t[e-1]),a=new SuperMap.Geometry.Point(t[0].x+s,t[0].y).clone();a=SuperMap.Plot.PlottingUtil.rotateAngle(t[0],n,a),i.push(a.clone());for(var l=1;l<e+1;l++)a=SuperMap.Plot.PlottingUtil.rotateAngle(t[0],o,a),i.push(a.clone());i.push(i[0]),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,i,{surroundLineFlag:!1,fill:!1}),this.textContent.length}}}]),e}();e.default=r,SuperMap.Geometry.RegularPolygon=r},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},r=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),u=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.Runway",i.libID=0,i.code=SuperMap.Plot.SymbolType.RUNWAY,i.symbolType=SuperMap.Plot.SymbolType.RUNWAY,i.symbolName="跑道线",0===i.getScaleValues().length&&i.getScaleValues().push(.2),i.minEditPts=2,i.maxEditPts=2,i}return s(e,r["default"]),a(e,[{key:"destroy",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"calculateParts",value:function(){if(this.clearComponents(),this.controlPoints.length>=this.minEditPts){for(var t=this.controlPoints[0],e=this.controlPoints[1],i=SuperMap.Plot.PlottingUtil.distance(t,e),o=this.getScaleValues()[0]*i,n=SuperMap.Plot.PlottingUtil.parallel(this.controlPoints,o/2),s=SuperMap.Plot.PlottingUtil.parallel(this.controlPoints,-o/2),a=180*SuperMap.Plot.PlottingUtil.radian(t,e)/Math.PI,l=[],r=a+90;r<=a+270;r+=10){h=SuperMap.Plot.PlottingUtil.circlePoint(t,o/2,o/2,r);l.push(h)}for(var u=[],p=a-90;p<=a+90;p+=10){var h=SuperMap.Plot.PlottingUtil.circlePoint(e,o/2,o/2,p);u.push(h)}var c=[];(c=(c=(c=(c=c.concat(l)).concat(s)).concat(u)).concat(n)).push(c[0]),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,c);var y=new SuperMap.Geometry.Point(l[0].x,l[0].y);this.addScalePoint(y)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint&&0==t){var i=SuperMap.Plot.PlottingUtil.distance(e,this.controlPoints[0]),o=SuperMap.Plot.PlottingUtil.distance(this.controlPoints[0],this.controlPoints[1]);this.getScaleValues()[0]=2*i/o}this.calculateParts()}}]),e}();e.default=u,SuperMap.Geometry.Runway=u},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},r=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),u=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.tipPoint=null,i.roundBox=null,i.textBoxType=null,i.CLASS_NAME="SuperMap.Geometry.SymbolTextBox",i.minEditPts=2,i.maxEditPts=2,i.libID=0,i.code=SuperMap.Plot.SymbolType.SYMBOLTEXTBOX,i.symbolType=SuperMap.Plot.SymbolType.SYMBOLTEXTBOX,i.symbolName="标注框",null===i.textBoxType&&(i.textBoxType=SuperMap.Plot.TextBoxType.WITHTIPBOX),0===i.getScaleValues().length&&(i.getScaleValues().push(.126),i.getScaleValues().push(.1),i.getScaleValues().push(-.3)),i}return s(e,r["default"]),a(e,[{key:"destroy",value:function(){this.roundBox=null,this.textBoxType=null,l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"calculateParts",value:function(){this.clearComponents();var t=this.getScaleValues()[0];if(!(t<0||t>1))if(t=(1-t)/2,this.controlPoints.length>=this.minEditPts){this.clearScalePoints();var e,i,o,n,s,a,l=[];this.controlPoints[0].x<this.controlPoints[1].x?(e=this.controlPoints[0].x,o=this.controlPoints[1].x):(e=this.controlPoints[1].x,o=this.controlPoints[0].x),this.controlPoints[0].y<this.controlPoints[1].y?(n=this.controlPoints[0].y,i=this.controlPoints[1].y):(n=this.controlPoints[1].y,i=this.controlPoints[0].y);var r=1,u=2,p=3,h=4;if(this.roundBox){var c=Math.max(e,o),y=Math.min(e,o),g=Math.max(i,n),d=Math.min(i,n),f=.1*Math.min(Math.abs(e-o),Math.abs(i-n)),S=new SuperMap.Geometry.Point(y+f,d+f),P=new SuperMap.Geometry.Point(y+f,g-f),m=new SuperMap.Geometry.Point(c-f,g-f),b=new SuperMap.Geometry.Point(c-f,d+f),L=this.calculateArc(S,f,3*Math.PI/2,Math.PI,-1,180),M=this.calculateArc(P,f,Math.PI,Math.PI/2,-1,180),v=this.calculateArc(m,f,Math.PI/2,0,-1,180),_=this.calculateArc(b,f,2*Math.PI,3*Math.PI/2,-1,180);r=L.length,u=L.length+M.length,p=L.length+M.length+v.length,h=L.length+M.length+v.length+_.length,l=L.concat(M,v,_)}else l.push(new SuperMap.Geometry.Point(e,n)),l.push(new SuperMap.Geometry.Point(e,i)),l.push(new SuperMap.Geometry.Point(o,i)),l.push(new SuperMap.Geometry.Point(o,n));if(this.textBoxType===SuperMap.Plot.TextBoxType.WITHTIPBOX){null===this.tipPoint&&(this.tipPoint=new SuperMap.Geometry.Point,this.tipPoint.x=e+(o-e)*this.getScaleValues()[1],this.tipPoint.y=n+(i-n)*this.getScaleValues()[2]),!1===this.getIsEdit()&&(this.tipPoint.x=e+(o-e)*this.getScaleValues()[1],this.tipPoint.y=n+(i-n)*this.getScaleValues()[2]),this.addScalePoint(this.tipPoint,0),s=this.tipPoint.x,a=this.tipPoint.y;var T=(i-n)/(o-e);switch(s<e?a>i?Math.abs((a-i)/(s-e))>T?2:1:a<n&&Math.abs((a-n)/(s-e))>T?4:1:s>o?a>i?Math.abs((a-i)/(s-o))>T?2:3:a<n&&Math.abs((a-n)/(s-o))>T?4:3:a>i?2:a<n?4:0){case 0:break;case 1:this.addScalePoint(new SuperMap.Geometry.Point(e,i-(i-n)*t)),l.splice(r,0,new SuperMap.Geometry.Point(e,i-(i-n)*t)),l.splice(r,0,this.tipPoint),l.splice(r,0,new SuperMap.Geometry.Point(e,n+(i-n)*t));break;case 2:this.addScalePoint(new SuperMap.Geometry.Point(o-(o-e)*t,i)),l.splice(u,0,new SuperMap.Geometry.Point(o-(o-e)*t,i)),l.splice(u,0,this.tipPoint),l.splice(u,0,new SuperMap.Geometry.Point(e+(o-e)*t,i));break;case 3:this.addScalePoint(new SuperMap.Geometry.Point(o,i-(i-n)*t)),l.splice(p,0,new SuperMap.Geometry.Point(o,n+(i-n)*t)),l.splice(p,0,this.tipPoint),l.splice(p,0,new SuperMap.Geometry.Point(o,i-(i-n)*t));break;case 4:this.addScalePoint(new SuperMap.Geometry.Point(o-(o-e)*t,n)),l.splice(h,0,new SuperMap.Geometry.Point(e+(o-e)*t,n)),l.splice(h,0,this.tipPoint),l.splice(h,0,new SuperMap.Geometry.Point(o-(o-e)*t,n))}}if(0!==l.length)if(this.textBoxType===SuperMap.Plot.TextBoxType.NONEBOX){var x={surroundLineFlag:!1,weight:0,lineWidthLimit:!0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,l,x)}else this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,l)}else this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,this.controlPoints)}},{key:"move",value:function(t,e){for(var i=0,o=this.controlPoints.length;i<o;i++)this.controlPoints[i].move(t,e);this.calculateParts()}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint)if(0===t)this.tipPoint.x=e.x,this.tipPoint.y=e.y;else if(1===t){var i,o,n,s,a,l,r=this.getScalePoints()[0];this.controlPoints[0].x<this.controlPoints[1].x?(i=this.controlPoints[0].x,n=this.controlPoints[1].x):(i=this.controlPoints[1].x,n=this.controlPoints[0].x),this.controlPoints[0].y<this.controlPoints[1].y?(s=this.controlPoints[0].y,o=this.controlPoints[1].y):(s=this.controlPoints[1].y,o=this.controlPoints[0].y),a=this.tipPoint.x,l=this.tipPoint.y;var u=(o-s)/(n-i),p=.25;switch(a<i?l>o?Math.abs((l-o)/(a-i))>u?2:1:l<s&&Math.abs((l-s)/(a-i))>u?4:1:a>n?l>o?Math.abs((l-o)/(a-n))>u?2:3:l<s&&Math.abs((l-s)/(a-n))>u?4:3:l>o?2:l<s?4:0){case 1:case 3:var h=r.y+(e.y-r.y);h>o&&(h=o),h<(o+s)/2&&(h=(o+s)/2),p=1-2*(o-h)/(o-s);break;case 2:case 4:var c=r.x+(e.x-r.x);c>n&&(c=n),c<(i+n)/2&&(c=(i+n)/2),p=1-2*(n-c)/(n-i)}p<0&&(p=0),p>1&&(p=1),this.getScaleValues()[0]=p}this.calculateParts()}},{key:"calculateArc",value:function(t,e,i,o,n,s){(!n||1!=n&&-1!=n)&&(n=-1),s||(s=360);for(var a=Math.PI/s/2,l=a*n,r=Math.abs(o-i),u=[],p=i,h=0;h<r;h+=a){var c=new SuperMap.Geometry.Point(Math.cos(p)*e+t.x,Math.sin(p)*e+t.y);u.push(c),p=(p=(p+=l)<0?p+2*Math.PI:p)>2*Math.PI?p-2*Math.PI:p}return u}}]),e}();e.default=u,SuperMap.Geometry.SymbolTextBox=u},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),r=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.Trapezoid",i.code=SuperMap.Plot.SymbolType.TRAPEZOIDSYMBOL,i.libID=0,i.symbolType=SuperMap.Plot.SymbolType.TRAPEZOIDSYMBOL,i.minEditPts=3,i.maxEditPts=3,i}return s(e,l["default"]),a(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length>=2&&t.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){var e=[],i=t[0],o=t[1],n=t[2],s=new SuperMap.Geometry.Point(0,0);this.GetPointsByTrapezoid(1,n,o,i,s),e.push(i),e.push(o),e.push(n),e.push(s);var a=SuperMap.Plot.PlottingUtil.intersectLines(i,o,n,s),l=a.intersectPoint;a.isIntersectLines&&(l.x>i.x&&l.x<o.x||l.y>i.y&&l.y<o.y||l.x<i.x&&l.x>o.x||l.y<i.y&&l.y>o.y)&&(e[0]=s,e[3]=i),4==e.length&&this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e)}}},{key:"GetPointsByTrapezoid",value:function(t,e,i,o,n){var s=e.x,a=e.y,l=i.x,r=i.y,u=o.x,p=o.y,h=0,c=0,y=0,g=0;if(SuperMap.Plot.PlottingUtil.equalFuzzy(Math.abs(a-r),0))h=s+l-u,c=p;else if(SuperMap.Plot.PlottingUtil.equalFuzzy(Math.abs(s-l),0))h=u,c=a+r-p;else{var d=1*(a-r)/(s-l),f=p-d*u;c=d*(h=((r+a)/2+(s+l)/(2*d)-f)/(d+1/d))+f,h=2*h-u,c=2*c-p}var S=Math.sqrt(1*(s-l)*(s-l)+1*(a-r)*(a-r)),P=Math.sqrt(1*(s-h)*(s-h)+1*(a-c)*(a-c));S>0?(y=s+(l-s)*P/S,g=a+(r-a)*P/S):(y=s,g=a);var m=y+(h-y)*t,b=g+(c-g)*t;n.x=m,n.y=b}}]),e}();e.default=r,SuperMap.Geometry.Trapezoid=r},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=(function(t){t&&t.__esModule}(i(88)),function(){function t(e){if(o(this,t),this.cStart=0,this.fillRule=0,this.require_StartNewFigure=!1,this.isBoundsDirty=!1,this.bounds=null,this.ref=1,this.elements=null,this.CLASS_NAME="SuperMap.Plot.UGPath2DData",e){this.cStart=e.cStart,this.fillRule=e.fillRule,this.require_StartNewFigure=e.require_StartNewFigure,this.isBoundsDirty=e.isBoundsDirty,this.bounds=new SuperMap.Bounds(e.bounds.left,e.bounds.bottom,e.bounds.right,e.bounds.top),this.ref=1,this.elements=[];for(var i=0;i<e.elements.length;i++)this.elements.push(e.elements[i].clone())}else this.ref=1,this.bounds=new SuperMap.Bounds(0,0,0,0),this.elements=[]}return n(t,[{key:"IsClosed",value:function(){var t=this.elements[this.cStart],e=this.elements[this.elements.length-1];return t.GetX()==e.GetX()&&t.GetY()==e.GetY()}},{key:"Close",value:function(){this.require_StartNewFigure=!0;var t=this.elements[this.cStart],e=this.elements[this.elements.length-1];t!=e&&(t.Equal(e)?e.SetPosition(t.GetX(),t.GetY()):this.elements.push(new SuperMap.Plot.Element(t.GetX(),t.GetY(),SuperMap.Plot.ElementType.LineToElement)))}},{key:"MaybeStartNewFigure",value:function(){if(this.require_StartNewFigure){var t=this.elements[this.elements.length-1].clone();t.SetType(0),this.elements.push(t),this.require_StartNewFigure=!1}}}]),t}());e.default=s,SuperMap.Plot.UGPath2DData=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function(t){return t&&t.__esModule?t:{default:t}}(i(0)),r=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15200",i.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,i.minEditPts=2,i.maxEditPts=99999,0===i.getScaleValues().length&&(i.getScaleValues().push(.05),i.getScaleValues().push(0),i.getScaleValues().push(.1),i.getScaleValues().push(.185)),i}return s(e,l["default"]),a(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);for(var i=0,o=0,n=e.length-1;o<n;o++)i+=SuperMap.Plot.PlottingUtil.distance(e[o],e[o+1]);for(var s=0,a=0,n=t.length-1;a<n;a++)s+=SuperMap.Plot.PlottingUtil.distance(t[a],t[a+1]);this.getIsEdit()||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());for(var l=this.getScaleValues()[0]*s,r=this.getScaleValues()[1],u=this.getScaleValues()[2]*s,p=.3*u,h=u;h<i;h+=u){var c=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(h,e);if(-1===c.index)return;var y=h+p,g=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(y,e);if(-1===g.index)return;var d=[],f=[];d.push(c.pts);var S=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,e[c.index],c.pts);0===r?d.push(new SuperMap.Geometry.Point(S.pntLeft.x,S.pntLeft.y)):d.push(new SuperMap.Geometry.Point(S.pntRight.x,S.pntRight.y)),f.push(g.pts);var P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,e[g.index],g.pts);if(0===r?f.push(new SuperMap.Geometry.Point(P.pntLeft.x,P.pntLeft.y)):f.push(new SuperMap.Geometry.Point(P.pntRight.x,P.pntRight.y)),u===h){this.clearScalePoints();var m=new SuperMap.Geometry.Point(d[1].x,d[1].y);m.isScalePoint=!0,m.tag=0,this.addScalePoint(m),(m=new SuperMap.Geometry.Point(d[0].x,d[0].y)).isScalePoint=!0,m.tag=1,this.addScalePoint(m)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var i=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((i=SuperMap.Plot.PlottingUtil.clearSamePts(i)).length<this.minEditPts)return;for(var o=0,n=0,s=i.length-1;n<s;n++)o+=SuperMap.Plot.PlottingUtil.distance(i[n],i[n+1]);var a=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(i),l=new SuperMap.Geometry.Point(e.x,e.y);if(0===t){var r=SuperMap.Plot.PlottingUtil.findPointInPolyLine(a,o*this.getScaleValues()[2]);if(-1===r.index)return void this.calculateParts();var u=SuperMap.Plot.PlottingUtil.distance(r.pt,l)/o,p=SuperMap.Plot.PlottingUtil.pointIsRightToLine(a[0],a[1],e);this.getScaleValues()[1]=p?1:0,this.getScaleValues()[0]=u}else if(1===t){for(var h=0,c=-1,y=[],g=0,s=a.length-1;g<s;g++){var d=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,a[g],a[g+1]);if(d.isOnline){var f=SuperMap.Plot.PlottingUtil.distance(d.projectPoint,this.controlPoints[1]);0==h?(h=f,c=g,y=e):f<h&&(h=f,c=g,y=e)}}if(-1==c)return void this.calculateParts();for(var S=0,g=0,s=c-1;g<s;g++)S+=SuperMap.Plot.PlottingUtil.distance(a[g],a[g+1]);var P=(S+=SuperMap.Plot.PlottingUtil.distance(y,a[c]))/o;P>.7&&(P=.7),this.getScaleValues()[2]=P}}this.calculateParts()}}]),e}();e.default=r,SuperMap.Geometry.AlgoSymbol15200=r},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=function(){function t(e){o(this,t),this.method="POST",this.sitData=null,this.smlFileName="",this.isCover=!1,this.CLASS_NAME="SuperMap.EditSmlFileParameters",e&&SuperMap.Util.extend(this,e)}return n(t,[{key:"destroy",value:function(){var t=this;t.method="POST",t.sitData=null,t.isCover=!1,t.smlFileName=""}}],[{key:"toJsonParameters",value:function(t){if(t)return SuperMap.PlotUtil.toJSON(t.sitData)}}]),t}();e.default=s,SuperMap.EditSmlFileParameters=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},r=function(t){function e(t,i){o(this,e);var s=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));s.CLASS_NAME="SuperMap.EditSmlFileService",(i=i||{})&&SuperMap.Util.extend(s,i);var a=s;return a.events=new SuperMap.Events(a,null,a.EVENT_TYPES,!0),a.eventListeners instanceof Object&&a.events.on(a.eventListeners),s}return s(e,SuperMap.PlotCommonServiceBase),a(e,[{key:"destroy",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t){var e=this,i=t.method,o=e.url.substr(e.url.length-1,1);e.url+="/"==o?"smlInfos/":"/smlInfos/",e.url+=t.smlFileName+".json",e.url+="?isCover="+t.isCover;var n=null;t.method&&"POST"===t.method&&(n=SuperMap.EditSmlFileParameters.toJsonParameters(t)),e.request({method:i,data:n,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}]),e}();e.default=r,SuperMap.EditSmlFileService=r},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=function(){function t(e){o(this,t),this.libID=null,this.CLASS_NAME="SuperMap.GetLibInfoParameter",e&&SuperMap.Util.extend(this,e)}return n(t,[{key:"destroy",value:function(){this.libID=null}}]),t}();e.default=s,SuperMap.GetLibInfoParameter=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=function(){function t(e){o(this,t),this.start=null,this.count=null,this.CLASS_NAME="SuperMap.GetSMLInfosParameters",e&&SuperMap.Util.extend(this,e)}return n(t,[{key:"destroy",value:function(){var t=this;t.start=null,t.count=null}}],[{key:"toUrlParameters",value:function(t){if(t){var e="";return null!==t.start&&(e="?start="+t.start),!t.count||null===t.count&&0===t.count||(e+="&count="+t.count),e}}}]),t}();e.default=s,SuperMap.GetSMLInfosParameters=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),l=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},r=function(t){function e(t,i){o(this,e);var s=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));s.CLASS_NAME="SuperMap.GetSMLInfosService",(i=i||{})&&SuperMap.Util.extend(s,i);var a,l=s;return l.events=new SuperMap.Events(l,null,l.EVENT_TYPES,!0),l.eventListeners instanceof Object&&l.events.on(l.eventListeners),a=l.url.substr(l.url.length-1,1),l.url+="/"==a?"smlInfos":"/smlInfos",l.url+=".json",s}return s(e,SuperMap.PlotCommonServiceBase),a(e,[{key:"destroy",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t){var e=this;e.url+=SuperMap.GetSMLInfosParameters.toUrlParameters(t),e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}]),e}();e.default=r,SuperMap.GetSMLInfosService=r},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=function(){function t(e){o(this,t),this.start=null,this.count=null,this.CLASS_NAME="SuperMap.GetSMLInfosParameters",e&&SuperMap.Util.extend(this,e)}return n(t,[{key:"destroy",value:function(){var t=this;t.start=null,t.count=null}}],[{key:"toUrlParameters",value:function(t){if(t){var e="";return null!==t.start&&(e="?start="+t.start),!t.count||null===t.count&&0===t.count||(e+="&count="+t.count),e}}}]),t}();e.default=s,SuperMap.GetSMLInfosParameters=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=function(){function t(e){if(o(this,t),this.libID=null,this.code=null,this.inputPoints=null,this.symbolRank=null,this.negativeImage=null,this.surroundLineType=null,this.subSymbols=null,this.scaleValues=null,this.scalePoints=null,this.newScalePoint=null,this.newScalePointIndex=null,this.CLASS_NAME="SuperMap.GetSymbolInfoParameters",!e)return this;SuperMap.Util.extend(this,e)}return n(t,[{key:"destroy",value:function(){var t=this;t.libID=null,t.code=null,t.inputPoints=null,t.symbolRank=null,t.negativeImage=null,t.surroundLineType=null,t.subSymbols=null,t.scaleValues=null,t.scalePoints=null,t.newScalePoint=null,t.newScalePointIndex=null}}],[{key:"toUrlParameters",value:function(t){if(t&&null!==t.libID&&null!==t.code){var e="libID="+t.libID+"&code="+t.code;if(t.inputPoints&&null!==t.inputPoints&&0!==t.inputPoints.length){e+="&inputPoints=[";for(i=0;i<t.inputPoints.length;i++)i===t.inputPoints.length-1?e+='{"x":'+t.inputPoints[i].x+', "y":'+t.inputPoints[i].y+"}]":e+='{"x":'+t.inputPoints[i].x+', "y":'+t.inputPoints[i].y+"},"}if(t.scalePoints&&null!==t.scalePoints&&0!==t.scalePoints.length){e+="&scalePoints=[";for(i=0;i<t.scalePoints.length;i++)i===t.scalePoints.length-1?e+='{"x":'+t.scalePoints[i].x+', "y":'+t.scalePoints[i].y+"}]":e+='{"x":'+t.scalePoints[i].x+', "y":'+t.scalePoints[i].y+"},"}if(t.scaleValues&&null!==t.scaleValues&&0!==t.scaleValues.length){e+="&scaleValues=[";for(i=0;i<t.scaleValues.length;i++)i===t.scaleValues.length-1?e+=t.scaleValues[i]+"]":e+=t.scaleValues[i]+","}if(t.subSymbols&&null!==t.subSymbols&&0!==t.subSymbols.length){e+="&subSymbols=[";for(var i=0;i<t.subSymbols.length;i++)i===t.subSymbols.length-1?e+=t.subSymbols[i].code+"]":e+=t.subSymbols[i].code+","}return t.newScalePoint&&null!==t.newScalePoint&&(e+='&newScalePoint={"x":'+t.newScalePoint.x+', "y":'+t.newScalePoint.y+"}"),t.newScalePointIndex&&null!==t.newScalePointIndex&&(e+="&newScalePointIndex="+t.newScalePointIndex),t.symbolRank&&null!==t.symbolRank&&(e+="&symbolRank="+t.symbolRank),t.negativeImage&&null!==t.negativeImage&&(e+="&negativeImage="+t.negativeImage),t.surroundLineType&&null!==t.surroundLineType&&(e+="&surroundLineType="+t.surroundLineType),e}}}]),t}();e.default=s,SuperMap.GetSymbolInfoParameters=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=function(){function t(e){o(this,t),this.lineColor="#ff0000",this.lineWidth=2,this.lineType=0,this.lineOpacity=1,this.lineCap="round",this.flagTextSize=60,this.maxScale=5,this.minScale=1,this.dotSymbolSize=40,this.dotTextSpace=7,this.scaleByMap=!1,this.fill=!1,this.fillColor="#ff0000",this.fillOpacity=.31,this.fontColor="#000000",this.fontOpacity=1,this.fontStroke=!1,this.fontStrokeColor="#ff0000",this.fontStrokeWidth="2px",this.fontBackground=!1,this.fontBackgroundColor="#ff0000",this.fontShadow=!1,this.fontShadowColor="#ff0000",this.fontShadowOffsetX=0,this.fontShadowOffsetY=0,this.fontSize=14,this.fontSpace=0,this.fontPercent=100,this.fontFamily="微软雅黑",this.fontWeight="bold",this.fontStyle="",this.defaultFlag=!1,this.CLASS_NAME="SuperMap.Plot.DefaultStyle",e&&SuperMap.Util.extend(this,e),this.parserConfiguration()}return n(t,[{key:"parserConfiguration",value:function(){"undefined"!=typeof DefaultStyleConfiguration&&(DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.flagTextSize&&(this.flagTextSize=parseFloat(DefaultStyleConfiguration.flagTextSize)),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.maxScale&&(this.maxScale=parseFloat(DefaultStyleConfiguration.maxScale)),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.minScale&&(this.minScale=parseFloat(DefaultStyleConfiguration.minScale)),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.dotSymbolSize&&(this.dotSymbolSize=parseFloat(DefaultStyleConfiguration.dotSymbolSize)),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.dotTextSpace&&(this.dotTextSpace=parseFloat(DefaultStyleConfiguration.dotTextSpace)),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.scaleByMap&&(this.scaleByMap=DefaultStyleConfiguration.scaleByMap),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.strokeWidth&&(this.lineWidth=parseFloat(DefaultStyleConfiguration.strokeWidth)),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.strokeColor&&(this.lineColor=DefaultStyleConfiguration.strokeColor),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.strokeOpacity&&(this.lineOpacity=parseFloat(DefaultStyleConfiguration.strokeOpacity)),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.strokeDashstyle&&(this.lineType=DefaultStyleConfiguration.strokeDashstyle),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.strokeLinecap&&(this.lineCap=DefaultStyleConfiguration.strokeLinecap),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fill&&(this.fill=DefaultStyleConfiguration.fill),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fillColor&&(this.fillColor=DefaultStyleConfiguration.fillColor),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fillOpacity&&(this.fillOpacity=parseFloat(DefaultStyleConfiguration.fillOpacity)),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fontColor&&(this.fontColor=DefaultStyleConfiguration.fontColor),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fontOpacity&&(this.fontOpacity=parseFloat(DefaultStyleConfiguration.fontOpacity)),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fontStroke&&(this.fontStroke=DefaultStyleConfiguration.fontStroke),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fontStrokeColor&&(this.fontStrokeColor=DefaultStyleConfiguration.fontStrokeColor),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fontStrokeWidth&&(this.fontStrokeWidth=parseFloat(DefaultStyleConfiguration.fontStrokeWidth)),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fontBackground&&(this.fontBackground=DefaultStyleConfiguration.fontBackground),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fontBackgroundColor&&(this.fontBackgroundColor=DefaultStyleConfiguration.fontBackgroundColor),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fontShadow&&(this.fontShadow=DefaultStyleConfiguration.fontShadow),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fontShadowColor&&(this.fontShadowColor=DefaultStyleConfiguration.fontShadowColor),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fontShadowOffsetX&&(this.fontShadowOffsetX=DefaultStyleConfiguration.fontShadowOffsetX),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fontShadowOffsetY&&(this.fontShadowOffsetY=DefaultStyleConfiguration.fontShadowOffsetY),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fontSpace&&(this.fontSpace=parseInt(DefaultStyleConfiguration.fontSpace)),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fontPercent&&(this.fontPercent=parseFloat(DefaultStyleConfiguration.fontPercent)),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fontSize&&(this.fontSize=parseFloat(DefaultStyleConfiguration.fontSize)),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fontFamily&&(this.fontFamily=DefaultStyleConfiguration.fontFamily),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fontWeight&&(this.fontWeight=DefaultStyleConfiguration.fontWeight),DefaultStyleConfiguration&&void 0!==DefaultStyleConfiguration.fontStyle&&(this.fontStyle=DefaultStyleConfiguration.fontStyle))}},{key:"destroy",value:function(){this.lineColor=null,this.lineWidth=null,this.dotSymbolSize=null,this.lineType=null,this.defaultFlag=null,this.flagTextSize=null,this.maxScale=null,this.minScale=null,this.dotTextSpace=null,this.scaleByMap=null,this.lineOpacity=null,this.lineCap=null,this.fill=null,this.fillColor=null,this.fillOpacity=null,this.fontColor=null,this.fontOpacity=null,this.fontSize=null,this.fontFamily=null,this.fontWeight=null,this.fontStyle=null,this.fontPercent=null,this.fontSpace=null}}]),t}();e.default=s,SuperMap.Plot.DefaultStyle=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=(function(t){t&&t.__esModule}(i(108)),function(){function t(e){o(this,t),this.properties=null,this.CLASS_NAME="SuperMap.Plot.ExtendProperty",this.properties=[]}return n(t,[{key:"addProperty",value:function(t,e){var i=this.findProperty(t);return null==i?this.properties.push(new SuperMap.Plot.Property(t,e)):i.setValue(e),!0}},{key:"deleteProperty",value:function(t){for(var e=0;e<this.properties.length;e++)if(this.properties[e].key===t)return this.properties.slice(e,1),!0;return!1}},{key:"findProperty",value:function(t){for(var e=0;e<this.properties.length;e++)if(this.properties[e].key===t)return this.properties[e];return null}},{key:"getPropertyValue",value:function(t){for(var e=0;e<this.properties.length;e++)if(this.properties[e].key===t)return this.properties[e].value;return null}},{key:"getPropertyByIndex",value:function(t){return t<this.properties.length?this.properties[t]:null}},{key:"getPropertyCount",value:function(){return this.properties.length}},{key:"destroy",value:function(){this.properties=null}}]),t}());e.default=s,SuperMap.Plot.ExtendProperty=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=function(){function t(e){o(this,t),this.layerName=null,this.spatialAnalystUrl=null,this.useCanvas2=!1,this.useCanvas=!1,this.features=null,this.CLASS_NAME="SuperMap.Plot.LayerDataStruct",e&&SuperMap.Util.extend(this,e),e&&e.layerName&&(this.layerName=e.layerName),e&&e.spatialAnalystUrl&&(this.spatialAnalystUrl=e.spatialAnalystUrl),e&&e.useCanvas2&&(this.useCanvas2=e.useCanvas2),e&&e.useCanvas&&(this.useCanvas=e.useCanvas),e&&e.features&&(this.features=e.features)}return n(t,[{key:"destroy",value:function(){this.layerName=null,this.spatialAnalystUrl=null,this.useCanvas2=null,this.useCanvas=null,this.features=null}},{key:"toJSON",value:function(){for(var t=[],e=0;e<this.features.length;e++)t.push(this.features[e].getSymbolData());return'{"layerName":'+SuperMap.PlotUtil.toJSON(this.layerName)+', "spatialAnalystUrl":'+SuperMap.PlotUtil.toJSON(this.spatialAnalystUrl)+', "useCanvas2":'+SuperMap.PlotUtil.toJSON(this.useCanvas2)+', "useCanvas":'+SuperMap.PlotUtil.toJSON(this.useCanvas)+', "isEditable":'+SuperMap.PlotUtil.toJSON(this.isEditable)+', "isLocked":'+SuperMap.PlotUtil.toJSON(this.isLocked)+', "visibility":'+SuperMap.PlotUtil.toJSON(this.visibility)+',"features":'+SuperMap.PlotUtil.toJSON(t)+"}"}}]),t}();e.default=s,SuperMap.Plot.LayerDataStruct=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=function(){function t(e){o(this,t),this.zoom=null,this.centerX=null,this.centerY=null,this.CLASS_NAME="SuperMap.Plot.MapInfoStruct",e&&(this.zoom=e.zoom,this.centerX=e.centerX,this.centerY=e.centerY)}return n(t,[{key:"destroy",value:function(){this.zoom=null,this.centerX=null,this.centerY=null}},{key:"fromJSON",value:function(t){void 0!==t.zoom&&(this.zoom=t.zoom),void 0!==t.centerX&&(this.centerX=t.centerX),void 0!==t.centerY&&(this.centerY=t.centerY)}},{key:"toJSON",value:function(){return'{"zoom":'+SuperMap.PlotUtil.toJSON(this.zoom)+',"centerX":'+SuperMap.PlotUtil.toJSON(this.centerX)+',"centerY":'+SuperMap.PlotUtil.toJSON(this.centerY)+"}"}}]),t}();e.default=s,SuperMap.Plot.MapInfoStruct=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=function(){function t(e,i){o(this,t),this.key=null,this.value=null,this.CLASS_NAME="SuperMap.Plot.Property",e&&(this.key=e),i&&(this.value=i)}return n(t,[{key:"setKey",value:function(t){this.key=t}},{key:"getKey",value:function(){return this.key}},{key:"setValue",value:function(t){this.value=t}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.key=null,this.value=null}},{key:"clone",value:function(){return new SuperMap.Plot.Property(this.key,this.value)}}]),t}();e.default=s,SuperMap.Plot.Property=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=function(){function t(e){o(this,t),this.SMLName="",this.SMLDesc="",this.SMLSeclevel="",this.SMLDepat="",this.SMLAuthor="",this.SMLTime="",this.CLASS_NAME="SuperMap.Plot.SMLInfoStruct",e&&(this.SMLName=e.SMLName,this.SMLDesc=e.SMLDesc,this.SMLSeclevel=e.SMLSeclevel,this.SMLDepat=e.SMLDepat,this.SMLAuthor=e.SMLAuthor,this.SMLTime=e.SMLTime)}return n(t,[{key:"destroy",value:function(){this.SMLName="",this.SMLDesc="",this.SMLAuthor="",this.SMLSeclevel="",this.SMLDepat="",this.SMLTime=""}},{key:"fromJSON",value:function(t){this.SMLName=t.SMLName,this.SMLDesc=t.SMLDesc,this.SMLSeclevel=t.SMLSeclevel,this.SMLDepat=t.SMLDepat,this.SMLAuthor=t.SMLAuthor,this.SMLTime=t.SMLTime}},{key:"toJSON",value:function(){return'{"SMLName":'+SuperMap.PlotUtil.toJSON(this.SMLName)+',"SMLDesc":'+SuperMap.PlotUtil.toJSON(this.SMLDesc)+',"SMLSeclevel":'+SuperMap.PlotUtil.toJSON(this.SMLSeclevel)+',"SMLDepat":'+SuperMap.PlotUtil.toJSON(this.SMLDepat)+',"SMLAuthor":'+SuperMap.PlotUtil.toJSON(this.SMLAuthor)+',"SMLTime":'+SuperMap.PlotUtil.toJSON(this.SMLTime)+"}"}}]),t}();e.default=s,SuperMap.Plot.SMLInfoStruct=s},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),s=function(){function t(e){o(this,t),this.smlInfo=null,this.mapInfo=null,this.layerDatas=null,this.CLASS_NAME="SuperMap.Plot.SitDataStruct",e&&e.smlInfo&&(this.smlInfo=e.smlInfo),e&&e.mapInfo&&(this.mapInfo=e.mapInfo),e&&e.layerDatas&&(this.layerDatas=e.layerDatas)}return n(t,[{key:"destroy",value:function(){this.smlInfo=null,this.mapInfo=null,this.layerDatas=null}}]),t}();e.default=s,SuperMap.Plot.SitDataStruct=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GOAnimationAttribute=void 0;var o=i(6),n=e.GOAnimationAttribute=o.GOAnimation.extend({lineColorAnimation:!1,startLineColor:"#FF0000",endLineColor:"#0000FF",lineWidthAnimation:!1,startLineWidth:0,endLineWidth:5,surroundLineColorAnimation:!1,startSurroundLineColor:"#ffff00",endSurroundLineColor:"#00ffff",surroundLineWidthAnimation:!1,startSurroundLineWidth:0,endSurroundLineWidth:1,getGOAnimationType:function(){return SuperMap.Plot.GOAnimationType.ANIMATION_ATTRIBUTE},resetAnimationFeature:function(t){o.GOAnimation.prototype.resetAnimationFeature.call(this,t),t&&(this.animationGOFeature.style.color=this.startLineColor,this.animationGOFeature.style.weight=this.startLineWidth,this.animationGOFeature.style.surroundLineColor=this.startSurroundLineColor,this.animationGOFeature.style.surroundLineWidth=this.startSurroundLineWidth)},execute:function(){if(!this.canExecute())return!1;var t=this.ratio,e=this._executeLineColorAnimation(t),i=this._executeLineWidthAnimation(t),o=this._executeSurroundLineColorAnimation(t),n=this._executeSurroundLineWidthAnimation(t);return e||i||o||n},_executeLineColorAnimation:function(t){if(!this.lineColorAnimation)return!1;var e=SuperMap.PlotUtil.colorStringToRGB(this.startLineColor),i=SuperMap.PlotUtil.colorStringToRGB(this.endLineColor),o=parseInt(e.red+(i.red-e.red)*t),n=parseInt(e.green+(i.green-e.green)*t),s=parseInt(e.blue+(i.blue-e.blue)*t);return this.animationGOFeature.setStyle({color:SuperMap.PlotUtil.colorRGBToString({red:o,green:n,blue:s})}),!0},_executeLineWidthAnimation:function(t){return!!this.lineWidthAnimation&&(this.animationGOFeature.setStyle({weight:this.startLineWidth+(this.endLineWidth-this.startLineWidth)*t}),!0)},_executeSurroundLineColorAnimation:function(t){if(!this.surroundLineColorAnimation)return!1;var e=SuperMap.PlotUtil.colorStringToRGB(this.startSurroundLineColor),i=SuperMap.PlotUtil.colorStringToRGB(this.endSurroundLineColor),o=parseInt(e.red+(i.red-e.red)*t),n=parseInt(e.green+(i.green-e.green)*t),s=parseInt(e.blue+(i.blue-e.blue)*t);return this.animationGOFeature.setStyle({surroundLineColor:SuperMap.PlotUtil.colorRGBToString({red:o,green:n,blue:s})}),!0},_executeSurroundLineWidthAnimation:function(t){return!!this.surroundLineWidthAnimation&&(this.animationGOFeature.setStyle({surroundLineWidth:this.startSurroundLineWidth+(this.endSurroundLineWidth-this.startSurroundLineWidth)*t}),!0)},getJSONData:function(){var t=o.GOAnimation.prototype.getJSONData.call(this);return t.lineColorAnimation=this.lineColorAnimation,t.startLineColor=this.startLineColor,t.endLineColor=this.endLineColor,t.lineWidthAnimation=this.lineWidthAnimation,t.startLineWidth=this.startLineWidth,t.endLineWidth=this.endLineWidth,t.surroundLineColorAnimation=this.surroundLineColorAnimation,t.startSurroundLineColor=this.startSurroundLineColor,t.endSurroundLineColor=this.endSurroundLineColor,t.surroundLineWidthAnimation=this.surroundLineWidthAnimation,t.startSurroundLineWidth=this.startSurroundLineWidth,t.endSurroundLineWidth=this.endSurroundLineWidth,t},fromJSONData:function(t){o.GOAnimation.prototype.fromJSONData.call(this,t),this.lineColorAnimation=t.lineColorAnimation,this.startLineColor=t.startLineColor,this.endLineColor=t.endLineColor,this.lineWidthAnimation=t.lineWidthAnimation,this.startLineWidth=t.startLineWidth,this.endLineWidth=t.endLineWidth,this.surroundLineColorAnimation=t.surroundLineColorAnimation,this.startSurroundLineColor=t.startSurroundLineColor,this.endSurroundLineColor=t.endSurroundLineColor,this.surroundLineWidthAnimation=t.surroundLineWidthAnimation,this.startSurroundLineWidth=t.startSurroundLineWidth,this.endSurroundLineWidth=t.endSurroundLineWidth}});L.supermap.plotting.GOAnimationAttribute=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GOAnimationBlink=void 0;var o=i(6),n=e.GOAnimationBlink=o.GOAnimation.extend({blinkInterval:500,blinkStyle:SuperMap.Plot.BlinkAnimationBlinkStyle.Blink_Frequency,blinkNumber:0,replaceStyle:SuperMap.Plot.BlinkAnimationReplaceStyle.Replace_NoColor,startColor:"#0000ff",endColor:"#ff0000",getGOAnimationType:function(){return SuperMap.Plot.GOAnimationType.ANIMATION_BLINK},execute:function(){if(!this.canExecute())return"none"===this.goFeature.style.display&&"none"===this.animationGOFeature.style.display&&(this.animationGOFeature.style.display="display",!0);var t=(new Date).getTime()/1e3,e=this.blinkInterval/1e3;return this.blinkStyle===SuperMap.Plot.BlinkAnimationBlinkStyle.Blink_Number&&(e=this.blinkInterval=this.duration/this.blinkNumber),(t-this.innerStartTime)%e<=e/2?this.replaceStyle===SuperMap.Plot.BlinkAnimationReplaceStyle.Replace_Color?(this.animationGOFeature.style.color=this.startColor,this.animationGOFeature.style.display="display"):this.animationGOFeature.style.display="none":(this.animationGOFeature.style.display="display",this.replaceStyle===SuperMap.Plot.BlinkAnimationReplaceStyle.Replace_Color&&(this.animationGOFeature.style.color=this.endColor)),this.animationGOFeature.redraw(),!0},getJSONData:function(){var t=o.GOAnimation.prototype.getJSONData.call(this);return t.blinkStyle=this.blinkStyle,t.blinkInterval=this.blinkInterval,t.blinkNumber=this.blinkNumber,t.replaceStyle=this.replaceStyle,t.startColor=this.startColor,t.endColor=this.endColor,t},fromJSONData:function(t){o.GOAnimation.prototype.fromJSONData.call(this,t),this.blinkStyle=t.blinkStyle,this.blinkInterval=t.blinkInterval,this.blinkNumber=t.blinkNumber,this.replaceStyle=t.replaceStyle,this.startColor=t.startColor,this.endColor=t.endColor}});L.supermap.plotting.GOAnimationBlink=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GOAnimationGrow=void 0;var o=i(6),n=i(1),s=e.GOAnimationGrow=o.GOAnimation.extend({startScale:0,endScale:1,timeSpace:50,lastDrawTime:0,lineLength:0,controlPoints:[],initialize:function(t){o.GOAnimation.prototype.initialize.call(this,t),this.controlPoints=[],this.lineLength=0},getGOAnimationType:function(){return SuperMap.Plot.GOAnimationType.ANIMATION_GROW},_execute_1004:function(t){if(0===this.lineLength){this.controlPoints=L.Util.latLngsToSuperMapPoints(this.goFeature.getLatLngs());o=new SuperMap.Geometry.Point((this.controlPoints[0].x+this.controlPoints[1].x)/2,(this.controlPoints[0].y+this.controlPoints[1].y)/2);this.lineLength+=SuperMap.Plot.PlottingUtil.distance(o,this.controlPoints[2]);for(n=3;n<this.controlPoints.length;n++)this.lineLength+=SuperMap.Plot.PlottingUtil.distance(this.controlPoints[n-1],this.controlPoints[n])}if(0===t)return this._executeAndRatioIsZero(),!0;var e=[],i=[],o=new SuperMap.Geometry.Point((this.controlPoints[0].x+this.controlPoints[1].x)/2,(this.controlPoints[0].y+this.controlPoints[1].y)/2);i.push(o);for(var n=2;n<this.controlPoints.length;n++)i.push(this.controlPoints[n].clone());e.push(this.controlPoints[0]),e.push(this.controlPoints[1]);for(var s=this._findPos(this.lineLength*t,i),a=1;a<=s.pos;a++)e.push(i[a]);return e.push(s.pts),this.animationGOFeature.setLatLngs(L.Util.superMapPointsToLatLngs(e)),!0},_execute_1006:function(t){if(0===this.controlPoints.length){var e=L.Util.latLngsToSuperMapPoints(this.goFeature.getLatLngs());this.controlPoints=SuperMap.Plot.PlottingUtil.operateControlPoints(e)}if(0===t)return this._executeAndRatioIsZero(),!0;var i=this.controlPoints;if(4!=i.length)return!1;var o=i[0],n=i[1],s=i[2],a=i[3],l=SuperMap.Plot.PlottingUtil.distance(o,a),r=SuperMap.Plot.PlottingUtil.distance(n,s),u=SuperMap.Plot.PlottingUtil.linePnt(o,a,l*t),p=SuperMap.Plot.PlottingUtil.linePnt(n,s,r*t),h=[];return h.push(o),h.push(n),h.push(p),h.push(u),null!==this.animationGOFeature.superMapAlgoSymbol&&this.animationGOFeature.superMapAlgoSymbol.hasOwnProperty("m_bIsAnimation")&&(this.animationGOFeature.superMapAlgoSymbol.m_bIsAnimation=!0),this.animationGOFeature.setLatLngs(L.Util.superMapPointsToLatLngs(h)),this.animationGOFeature.superMapAlgoSymbol.m_bIsAnimation=!1,!0},_execute_1002:function(t){if(0===this.lineLength&&(this.controlPoints=L.Util.latLngsToSuperMapPoints(this.goFeature.getLatLngs()),this.lineLength=SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints)),0===t)return this._executeAndRatioIsZero(),!0;for(var e=[],i=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=this._findPos(this.lineLength*t,i),n=0;n<=o.pos;n++)e.push(i[n]);e.push(o.pts);var s=[];return e.length<3&&(s.push(e[0].clone()),s.push(new SuperMap.Geometry.Point((e[0].x+e[1].x)/2,(e[0].y+e[1].y)/2)),s.push(e[1].clone()),e=s),SuperMap.AlgoSymbolFactory.isAccessServer(this.animationGOFeature.libID,this.animationGOFeature.code)&&this.goFeature.symbolData.algoMinEditPts>e.length?(this._executeAndRatioIsZero(),!0):(this.animationGOFeature.setLatLngs(L.Util.superMapPointsToLatLngs(e)),!0)},_execute_Generalization:function(t){if(0===this.lineLength&&(this.controlPoints=L.Util.latLngsToSuperMapPoints(this.goFeature.getLatLngs()),this.lineLength=SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints)),0===t)return this._executeAndRatioIsZero(),!0;for(var e=[],i=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=this._findPos(this.lineLength*t,i),n=0;n<=o.pos;n++)e.push(i[n]);return e.push(o.pts),SuperMap.AlgoSymbolFactory.isAccessServer(this.animationGOFeature.libID,this.animationGOFeature.code)&&this.goFeature.symbolData.algoMinEditPts>e.length?(this._executeAndRatioIsZero(),!0):(this.animationGOFeature.setLatLngs(L.Util.superMapPointsToLatLngs(e)),!0)},_execute_Rect:function(t){0===this.controlPoints.length&&(this.controlPoints=L.Util.latLngsToSuperMapPoints(this.goFeature.getLatLngs()));var e=new SuperMap.Geometry.Point((this.controlPoints[0].x+this.controlPoints[1].x)/2,(this.controlPoints[0].y+this.controlPoints[1].y)/2),i=Math.abs(this.controlPoints[0].x-this.controlPoints[1].x)/2*t,o=Math.abs(this.controlPoints[0].y-this.controlPoints[1].y)/2*t,n=new SuperMap.Geometry.Point(e.x-i,e.y+o),s=new SuperMap.Geometry.Point(e.x+i,e.y-o);return this.animationGOFeature.setLatLngs(L.Util.superMapPointsToLatLngs([n,s])),!0},_execute_Circle:function(t){0===this.controlPoints.length&&(this.controlPoints=L.Util.latLngsToSuperMapPoints(this.goFeature.getLatLngs()));var e=this.controlPoints[0].clone(),i=t*Math.sqrt((this.controlPoints[0].x-this.controlPoints[1].x)*(this.controlPoints[0].x-this.controlPoints[1].x)+(this.controlPoints[0].y-this.controlPoints[1].y)*(this.controlPoints[0].y-this.controlPoints[1].y));return this.animationGOFeature.setLatLngs(L.Util.superMapPointsToLatLngs([e,new SuperMap.Geometry.Point(e.x+i,e.y)])),!0},_execute_Kidney:function(t){if(0===this.controlPoints.length&&(this.controlPoints=L.Util.latLngsToSuperMapPoints(this.goFeature.getLatLngs())),0===t)return this._executeAndRatioIsZero(),!0;var e=[],i=this.controlPoints.length,o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(this.controlPoints);if(null===o)return this._executeAndRatioIsZero(),!0;for(var n=0;n<i;n++){var s=SuperMap.Plot.PlottingUtil.distance(o,this.controlPoints[n]),a=s*t;if(a>s)return!1;var l=SuperMap.Plot.PlottingUtil.linePnt(o,this.controlPoints[n],a);e.push(l)}return this.animationGOFeature.setLatLngs(L.Util.superMapPointsToLatLngs(e)),!0},_execute_RegularPloygon:function(t){if(0===this.controlPoints.length&&(this.controlPoints=L.Util.latLngsToSuperMapPoints(this.goFeature.getLatLngs())),0===t)return this._executeAndRatioIsZero(),!0;var e=this.controlPoints.length,i=SuperMap.Plot.PlottingUtil.distance(this.controlPoints[0],this.controlPoints[this.controlPoints.length-1])*t,o=new SuperMap.Geometry.Point(this.controlPoints[0].x+i,this.controlPoints[0].y),n=2*Math.PI/(e+1),s=Math.PI/2+this.animationGOFeature.dRotate,a=o;SuperMap.Plot.PlottingUtil.rotateAngle(this.controlPoints[0],s,a);var l=[];l.push(this.controlPoints[0].clone()),l.push(a);for(var r=a.clone(),u=1;u<e-1;u++)SuperMap.Plot.PlottingUtil.rotateAngle(this.controlPoints[0],n,r),l.push(r.clone());return this.animationGOFeature.setLatLngs(L.Util.superMapPointsToLatLngs(l)),!0},_execute_Ellipse:function(t){0===this.controlPoints.length&&(this.controlPoints=L.Util.latLngsToSuperMapPoints(this.goFeature.getLatLngs()));var e=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(t,this.controlPoints[0],this.controlPoints[1]),i=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(t,this.controlPoints[0],this.controlPoints[2]);return this.animationGOFeature.latLngs[1]=L.latLng(e.y,e.x),this.animationGOFeature.latLngs[2]=L.latLng(i.y,i.x),this.animationGOFeature.redraw(),!0},_execute_ArbitraryPolygon:function(t){0===this.controlPoints.length&&(this.controlPoints=L.Util.latLngsToSuperMapPoints(this.goFeature.getLatLngs()));var e=this.controlPoints.length,i=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(this.controlPoints);if(null===i)return this._executeAndRatioIsZero(),!0;for(var o=[],n=0;n<e;n++){var s=SuperMap.Plot.PlottingUtil.distance(i,this.controlPoints[n])*t,a=SuperMap.Plot.PlottingUtil.linePnt(i,this.controlPoints[n],s);o.push(a)}return this.animationGOFeature.setLatLngs(L.Util.superMapPointsToLatLngs(o)),!0},_execute_ParallelLine:function(t){if(0===this.lineLength){this.controlPoints=L.Util.latLngsToSuperMapPoints(this.goFeature.getLatLngs());for(o=2;o<this.controlPoints.length;o++)this.lineLength+=SuperMap.Plot.PlottingUtil.distance(this.controlPoints[o-1],this.controlPoints[o])}for(var e=[],i=[],o=1;o<this.controlPoints.length;o++)i.push(this.controlPoints[o].clone());var n=this._findPos(this.lineLength*t,i);e.push(this.controlPoints[0].clone());for(o=0;o<=n.pos;o++)e.push(i[o]);return e.push(n.pts),this.animationGOFeature.setLatLngs(L.Util.superMapPointsToLatLngs(e)),!0},_execute_Polybezier:function(t){if(0===this.lineLength){this.controlPoints=L.Util.latLngsToSuperMapPoints(this.goFeature.getLatLngs());o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(this.controlPoints);this.lineLength+=SuperMap.Plot.PlottingUtil.polylineDistance(o)}for(var e=[],i=[],o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(this.controlPoints,i),n=this._findPos(this.lineLength*t,o),s=0;s<=n.pos;s++)e.push(o[s].clone());return e.push(n.pts),this.animationGOFeature.setLatLngs(L.Util.superMapPointsToLatLngs(e)),!0},_execute_CurveEight:function(t){0===this.controlPoints.length&&(this.controlPoints=L.Util.latLngsToSuperMapPoints(this.goFeature.getLatLngs()));for(var e=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(this.controlPoints),i=[],o=0;o<this.controlPoints.length;o++){var n=SuperMap.Plot.PlottingUtil.distance(e,this.controlPoints[o])*t,s=SuperMap.Plot.PlottingUtil.linePnt(e,this.controlPoints[o],n);i.push(s)}return this.animationGOFeature.setLatLngs(L.Util.superMapPointsToLatLngs(i)),!0},_executeAndRatioIsZero:function(){this.animationGOFeature.setLatLngs([]),this.animationGOFeature.grow=SuperMap.AlgoSymbolFactory.isAccessServer(this.animationGOFeature.libID,this.animationGOFeature.code)},resetAnimationFeature:function(t){o.GOAnimation.prototype.resetAnimationFeature.call(this,t),this.lineLength=0,this.controlPoints=[]},execute:function(){if(!(this.goFeature instanceof n.AlgoSymbol))return!1;if(!this.canExecute())return!1;this.endScale>1&&(this.endScale=1);var t=(new Date).getTime();if(this.lastDrawTime>0&&t-this.timeSpace<this.lastDrawTime)return!1;var e=this.startScale+this.ratio*(this.endScale-this.startScale);return this.lastDrawTime=t,this._executeAnimation(e)},_executeAnimation:function(t){var e=!1,i=this.animationGOFeature.code,o=this.animationGOFeature.libID;if(0===o)switch(i){case SuperMap.Plot.SymbolType.KIDNEY:case SuperMap.Plot.SymbolType.POLYBEZIERCLOSESYMBOL:case SuperMap.Plot.SymbolType.PARALLELOGRAM:case SuperMap.Plot.SymbolType.TRAPEZOIDSYMBOL:e=this._execute_Kidney(t);break;case SuperMap.Plot.SymbolType.CIRCLESYMBOL:e=this._execute_Circle(t);break;case SuperMap.Plot.SymbolType.RECTANGLESYMBOL:e=this._execute_Rect(t);break;case SuperMap.Plot.SymbolType.REGULARPOLYGON:e=this._execute_RegularPloygon(t);break;case SuperMap.Plot.SymbolType.ELLIPSESYMBOL:e=this._execute_Ellipse(t);break;case SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL:case SuperMap.Plot.SymbolType.POLYGONREGION:e=this._execute_ArbitraryPolygon(t);break;case SuperMap.Plot.SymbolType.PARALLELLINE:e=this._execute_ParallelLine(t);break;case SuperMap.Plot.SymbolType.POLYBEZIERSYMBOL:e=this._execute_Polybezier(t);break;case SuperMap.Plot.SymbolType.PIESYMBOL:case SuperMap.Plot.SymbolType.CHORDSYMBOL:case SuperMap.Plot.SymbolType.ARCSYMBOL:case SuperMap.Plot.SymbolType.ANNOFRAMESYMBOL:return!1;case SuperMap.Plot.SymbolType.CURVEEIGHT:e=this._execute_CurveEight(t);break;default:e=this._execute_Generalization(t)}else if(22===o)switch(i){case 1004:case 2004:case 1010:e=this._execute_1004(t);break;case 1006:case 2006:e=this._execute_1006(t);break;case 1002:case 2002:e=this._execute_1002(t);break;case 32:case 3211:e=this._execute_ArbitraryPolygon(t);break;case 390:case 3911:e=this._execute_Kidney(t);break;default:e=this._execute_Generalization(t)}else if(100===o)switch(i){case 25200:e=this._execute_1004(t);break;default:e=this._execute_Generalization(t)}else if(421===o)switch(i){case 311:e=this._execute_1004(t);break;case 317:e=this._execute_1006(t);break;default:e=this._execute_Generalization(t)}else if(123===o)switch(i){case 60310:case 6031001:e=this._execute_1004(t);break;default:e=this._execute_Generalization(t)}else e=this._execute_Generalization(t);return this.animationGOFeature.grow=SuperMap.AlgoSymbolFactory.isAccessServer(this.animationGOFeature.libID,this.animationGOFeature.code),e},_findPos:function(t,e){var i,o=0,n=0;for(i=1;i<e.length&&(n=SuperMap.Plot.PlottingUtil.distance(e[i-1],e[i]),!(o+n>=t));i++)o+=n;var s=new Object;if(i<e.length)a=SuperMap.Plot.PlottingUtil.findPoint(e[i-1],e[i],t-o,0);else var a=new SuperMap.Geometry.Point(e[i-1].clone());return s.pos=i-1,s.pts=a,s},getJSONData:function(){var t=o.GOAnimation.prototype.getJSONData.call(this);return t.startScale=this.startScale,t.endScale=this.endScale,t},fromJSONData:function(t){o.GOAnimation.prototype.fromJSONData.call(this,t),this.startScale=t.startScale,this.endScale=t.endScale}});L.supermap.plotting.GOAnimationGrow=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GOAnimationRotate=void 0;var o=i(6),n=e.GOAnimationRotate=o.GOAnimation.extend({rotateDirection:SuperMap.Plot.RotateDirection.ClockWise,startAngle:0,endAngle:360,getGOAnimationType:function(){return SuperMap.Plot.GOAnimationType.ANIMATION_ROTATE},resetAnimationFeature:function(t){this.animationGOFeature._rotate(this.goFeature.dRotate-this.animationGOFeature.dRotate,this.animationGOFeature.getLatLngs()[0]),o.GOAnimation.prototype.resetAnimationFeature.call(this,t)},execute:function(){if(this.goFeature.symbolType!==SuperMap.Plot.SymbolType.DOTSYMBOL)return!1;if(!this.canExecute())return!1;var t=this.ratio,e=this._getCurrentAngle(this.startAngle,this.endAngle,t),i=this.animationGOFeature.dRotate;return this.animationGOFeature._rotate(e-i,this.animationGOFeature.getLatLngs()[0]),!0},_getCurrentAngle:function(t,e,i){var o=0,n=e-t,s=parseInt(Math.abs(n/360));if(t!==e)if(this.rotateDirection===SuperMap.Plot.RotateDirection.AntiClockWise)n<0&&(n+=360*(2*s+1)),o=t+n*i;else{var a=0;o=t+(360-(n=0===(a=n<0?n+360*(s+1):n-360*s)?360*s:360-a+360*s)*i)}return o},getJSONData:function(){var t=o.GOAnimation.prototype.getJSONData.call(this);return t.rotateDirection=this.rotateDirection,t.startAngle=this.startAngle,t.endAngle=this.endAngle,t},fromJSONData:function(t){o.GOAnimation.prototype.fromJSONData.call(this,t),this.rotateDirection=t.rotateDirection,this.startAngle=t.startAngle,this.endAngle=t.endAngle}});L.supermap.plotting.GOAnimationRotate=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GOAnimationScale=void 0;var o=i(6),n=e.GOAnimationScale=o.GOAnimation.extend({startScale:0,endScale:1,lastScale:null,getGOAnimationType:function(){return SuperMap.Plot.GOAnimationType.ANIMATION_SCALE},resetAnimationFeature:function(t){this.lastScale=null,this.animationGOFeature._resize(this.goFeature.initialScale/this.animationGOFeature.initialScale,this.animationGOFeature.getLatLngs()[0]),o.GOAnimation.prototype.resetAnimationFeature.call(this,t)},execute:function(){if(this.goFeature.symbolType!==SuperMap.Plot.SymbolType.DOTSYMBOL)return!1;if(!this.canExecute())return!1;this.lastScale=this.animationGOFeature.initialScale;var t=this.startScale;0===t&&(t=.1);var e=this.endScale;0===e&&(e=.1);var i=this.goFeature.initialScale*(t+this.ratio*(e-t));return this.animationGOFeature._resize(i/this.lastScale,this.animationGOFeature.getLatLngs()[0]),!0},getJSONData:function(){var t=o.GOAnimation.prototype.getJSONData.call(this);return t.startScale=this.startScale,t.endScale=this.endScale,t},fromJSONData:function(t){o.GOAnimation.prototype.fromJSONData.call(this,t),this.startScale=t.startScale,this.endScale=t.endScale}});L.supermap.plotting.GOAnimationScale=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GOAnimationShow=void 0;var o=i(6),n=e.GOAnimationShow=o.GOAnimation.extend({showEffect:!1,finalDisplay:!1,getGOAnimationType:function(){return SuperMap.Plot.GOAnimationType.ANIMATION_SHOW},execute:function(){if(!this.canExecute())return!1;var t=this.ratio;return this.showEffect?this._executeHaveEffect(t):this._executeNoEffect(t),!0},_executeNoEffect:function(t){this.finalDisplay?this.animationGOFeature.style.display=1-t<.01?"display":"none":this.animationGOFeature.style.display=1-t<.01?"none":"display",this.animationGOFeature.redraw()},_executeHaveEffect:function(t){this.finalDisplay||(t=1-t);var e=parseFloat(t)<0?0:parseFloat(t);e=parseFloat(t)>1?1:parseFloat(t),this.animationGOFeature.style.display="display",this.animationGOFeature.style.opacity=e,this.animationGOFeature.style.fontOpacity=e,this.animationGOFeature.style.surroundLineColorOpacity=this.goFeature.style.surroundLineColorOpacity*t,this.animationGOFeature.style.fill&&(this.animationGOFeature.style.fillOpacity=this.goFeature.style.fillOpacity*t,this.animationGOFeature.style.fillBackOpacity=this.goFeature.style.fillBackOpacity*t),this.animationGOFeature.redraw()},getJSONData:function(){var t=o.GOAnimation.prototype.getJSONData.call(this);return t.showEffect=this.showEffect,t.finalDisplay=this.finalDisplay,t},fromJSONData:function(t){o.GOAnimation.prototype.fromJSONData.call(this,t),this.showEffect=t.showEffect,this.finalDisplay=t.finalDisplay}});L.supermap.plotting.GOAnimationShow=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GOAnimationWay=void 0;var o=i(6),n=e.GOAnimationWay=o.GOAnimation.extend({showPath:!1,tangentDirection:!1,pathWidth:.5,pathColor:"#00FFFF",currentPt:null,pathType:SuperMap.Plot.WayPathType.POLYLINE,wayPoints:null,shapePoints:null,pathFeature:null,pathLength:0,destroy:function(){null!==this.pathFeature&&(L.supermap.plotting.getControl().getGOAnimationManager().map.removeLayer(this.pathFeature),this.pathFeature=null),o.GOAnimation.prototype.destroy.call(this)},getGOAnimationType:function(){return SuperMap.Plot.GOAnimationType.ANIMATION_WAY},setShowPath:function(t){this.showPath=t},resetAnimationFeature:function(t){o.GOAnimation.prototype.resetAnimationFeature.call(this,t);var e=this.goFeature.dRotate,i=this.animationGOFeature.dRotate;this.animationGOFeature._rotate(e-i,this.animationGOFeature.getLatLngs()[0]),t&&(null!==this.pathFeature&&null!==this.shapePoints||(this._makePath(),this.pathColor&&(this.pathFeature.options.color=this.pathColor),this.pathWidth&&(this.pathFeature.options.weight=this.pathWidth)),this.pathFeature.options.opacity=0,1!==this.animationGOFeature.symbolType&&(this.pathFeature.options.opacity=0),this.pathFeature.setStyle())},execute:function(){if(this.goFeature.symbolType!==SuperMap.Plot.SymbolType.DOTSYMBOL)return null!==this.pathFeature&&(this.pathFeature.options.opacity=0),!1;if(!this.canExecute())return!1;this.showPath&&0===this.pathFeature.options.opacity&&(this.pathFeature.options.opacity=1,this.pathFeature.setStyle());var t=this.ratio,e=t*this.pathLength,i=new Object,o=this._findPos(e,this.shapePoints,i);this.currentPt=o.clone();var n=this.animationGOFeature.getLatLngs()[0],s=o.y-n.lat,a=o.x-n.lng;if(this.animationGOFeature.move(s,a),this.tangentDirection){var l=i.angle;1===t&&(l=0);var r=this.animationGOFeature.dRotate;this.animationGOFeature._rotate(l-r,this.animationGOFeature.getLatLngs()[0])}return!0},setWayPoints:function(t){(!t||!SuperMap.Util.isArray(t)||2>t.length)&&(t=[this.goFeature.getLatLngs()[0],this.goFeature.getLatLngs()[0]]),this.wayPoints=[],this.wayPoints=L.Util.cloneLatLngs(t),null!==this.pathFeature&&(L.supermap.plotting.getControl().getGOAnimationManager().map.removeLayer(this.pathFeature),this.pathFeature.destroy(),this.pathFeature=null)},getWayPoints:function(){return this.wayPoints},getCurrentPt:function(){return this.currentPt},setPathColor:function(t){t&&(this.pathColor=t,this.pathFeature&&null!==this.pathFeature&&(this.pathFeature.options.color=this.pathColor,this.pathFeature.setStyle(this.pathFeature.options)))},getPathColor:function(){return this.pathColor},setPathWidth:function(t){t&&(this.pathWidth=t,this.pathFeature&&null!==this.pathWidth&&(this.pathFeature.options.weight=this.pathWidth,this.pathFeature.setStyle(this.pathFeature.options)))},getPathWidth:function(){return this.pathWidth},setPathType:function(t){void 0!==t&&null!==t&&this.pathType!==t&&(this.pathType=t,null!==this.pathFeature&&(L.supermap.plotting.getControl().getGOAnimationManager().map.removeLayer(this.pathFeature),this.pathFeature.destroy(),this.pathFeature=null))},getPathType:function(){return this.pathType},_makePath:function(){(null===this.wayPoints||2>this.wayPoints.length)&&(this.wayPoints=[this.goFeature.getLatLngs()[0],this.goFeature.getLatLngs()[0]]),null===this.pathFeature&&(this.pathType===SuperMap.Plot.WayPathType.POLYLINE?this.shapePoints=L.Util.latLngsToSuperMapPoints(this.wayPoints):this.shapePoints=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(L.Util.latLngsToSuperMapPoints(this.wayPoints)),this.pathFeature=L.polyline(L.Util.superMapPointsToLatLngs(this.shapePoints),SuperMap.PlotUtil.cloneObject(this.animationGOFeature.style)),L.supermap.plotting.getControl().getGOAnimationManager().map.addLayer(this.pathFeature)),this.pathLength=0;for(var t=1;t<this.shapePoints.length;t++)this.pathLength+=SuperMap.Plot.PlottingUtil.distance(this.shapePoints[t-1],this.shapePoints[t]);return this.pathFeature},_findPos:function(t,e,i){var o,n=0,s=0;for(o=1;o<e.length&&(s=SuperMap.Plot.PlottingUtil.distance(e[o-1],e[o]),!(n+s>=t));o++)n+=s;var a=SuperMap.Plot.PlottingUtil.findPoint(e[o-1],e[o],t-n,0);return this.tangentDirection&&(i.angle=SuperMap.Plot.PlottingUtil.radian(a,e[o])/Math.PI*180),a},getJSONData:function(){var t=o.GOAnimation.prototype.getJSONData.call(this);t.showPath=this.showPath,t.tangentDirection=this.tangentDirection,t.pathType=this.pathType,t.pathWidth=this.pathWidth,t.pathColor=this.pathColor,t.wayPoints=[];for(var e=0;e<this.wayPoints.length;e++)t.wayPoints.push({x:this.wayPoints[e].lng,y:this.wayPoints[e].lat});return t},fromJSONData:function(t){o.GOAnimation.prototype.fromJSONData.call(this,t),this.showPath=t.showPath,this.tangentDirection=t.tangentDirection,this.pathType=t.pathType,this.pathWidth=t.pathWidth,this.pathColor=t.pathColor;for(var e=[],i=0;i<t.wayPoints.length;i++)e.push(L.latLng(t.wayPoints[i].y,t.wayPoints[i].x));this.setWayPoints(e)}});L.supermap.plotting.GOAnimationWay=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.airDeployment=e.AirDeployment=void 0;var o=i(37),n=e.AirDeployment=o.NavyDeployment.extend({isShowTooltip:!0,getShowTooltip:function(){return this.isShowTooltip},setShowTooltip:function(t){if(this.isShowTooltip!==t)if(this.isShowTooltip=t,this.isShowTooltip&&0!==this.components.length){var e=this.layer.getFeatureByUuid(this.associatedUuid),i=L.Util.cloneLatLngs(e.latLngs[0]),o=this._map.latLngToLayerPoint(L.latLng(i[0].lat,i[0].lng)),n=this._transitionPoint(new SuperMap.Geometry.Point(this.space,0),o),s=Math.abs(n.lng-i[0].lng),a=new L.LatLngBounds(L.latLng(this.bounds.getSouth()-s,this.bounds.getWest()-s),L.latLng(this.bounds.getNorth()+s,this.bounds.getEast()+s)),l=[];l.push(L.latLng(a.getNorth(),a.getWest())),l.push(L.latLng(a.getSouth(),a.getEast()));var r=L.latLng(i[0].lat,i[0].lng);r.isFixedPos=!0,l.push(r);var u=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.ANNOFRAMESYMBOL,l,{serverUrl:this.serverUrl});this._addComponents(u)}else for(var p in this.components)if(320===this.components[p].symbolType){this.subObjects.splice(SuperMap.Util.indexOf(this.subObjects,this.components[p]),1);var h=SuperMap.Util.indexOf(this.components,this.components[p]);if(-1!==h){this.components[h]._clearComponents(),this.components.splice(h,1);break}}},initialize:function(t,e,i,n){o.NavyDeployment.prototype.initialize.call(this,t,e,i,n),this.libID=0,this.code=SuperMap.Plot.SymbolType.AIRDEPLOYMENT,this.symbolType=SuperMap.Plot.SymbolType.AIRDEPLOYMENT,this.symbolName="空军兵力部署",null===this.isShowTooltip&&(this.isShowTooltip=!0)},destroy:function(){this.isShowTooltip=null,o.NavyDeployment.prototype.destroy.call(this)},_calculateParts:function(){var t=this.layer.getFeatureByUuid(this.associatedUuid);if(null!==t&&t.symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL&&0!==t.latLngs.length){for(var e=!1,i=0;i<t.deployments.length;i++)if(this===t.deployments[i]){e=!0;break}if(e||t.deployments.push(this),0!==this.subObjects.length&&0===this.components.length)for(var i=0,o=this.subObjects.length;i<o;i++)this.subObjects[i].enableEdit=!0,this.subObjects[i].ownerGroup=this,this._addComponents(this.subObjects[i]);if(0===this.components.length){var n=L.Util.cloneLatLngs(t.latLngs[0]),s=this._map.latLngToLayerPoint(L.latLng(n[0].lat,n[0].lng)),a=this._transitionPoint(new SuperMap.Geometry.Point(this.space,0),s),l=Math.abs(a.lng-n[0].lng),r=new SuperMap.Geometry.Point(0,0),u=this._transitionPoint(r,s),p=new SuperMap.Geometry.Point(100,100),h=this._transitionPoint(p,s),c=new L.LatLngBounds(L.latLng(u.lat,u.lng),L.latLng(h.lat,h.lng)),y=Math.ceil(this._getSubSymbolCount(this.subSymbols.length-1)/this.colNum),g=Math.abs(c.getWest()-c.getEast())*this.colNum+l*(this.colNum-1),d=L.latLng(n[0].lat-l,n[0].lng-.5*g+.5*Math.abs(c.getEast()-c.getWest()));!0===this.isShowTooltip&&(d.lat-=4*l),this._setSubSymbolText();for(var f=[],i=0;i<this.subSymbols.length;i++)for(var S=0;S<this.subSymbols[i].totalNum;S++)f.push(this.subSymbols[i]);for(var P=0,i=0;i<y;i++){for(S=0;S<this.colNum&&!(P>=f.length);S++){var m=f[P];if(void 0!==m.symbolData&&null!==m.symbolData){for(var b=m.symbolData.libID,M=m.symbolData.code,v=d.lng+S*(l+Math.abs(c.getEast()-c.getWest())),_=d.lat-(2*l+Math.abs(c.getNorth()-c.getSouth())/2),T=0,x=0,O=0,A=0,w=0;w<m.symbolData.innerCells.length;w++)for(var D=0;D<m.symbolData.innerCells[w].positionPoints.length;D++)T<=m.symbolData.innerCells[w].positionPoints[D].x&&(T=m.symbolData.innerCells[w].positionPoints[D].x),x>=m.symbolData.innerCells[w].positionPoints[D].x&&(x=m.symbolData.innerCells[w].positionPoints[D].x),O<=m.symbolData.innerCells[w].positionPoints[D].y&&(O=m.symbolData.innerCells[w].positionPoints[D].y),A>=m.symbolData.innerCells[w].positionPoints[D].y&&(A=m.symbolData.innerCells[w].positionPoints[D].y);var E=L.latLng(_,v),I=this._map.latLngToLayerPoint(L.latLng(_,v)),N=new SuperMap.Geometry.Point((T+x)/2,O),C=new SuperMap.Geometry.Point(N.x,N.y),R=new SuperMap.Geometry.Point(f[P].symbolData.anchorPoint.x,f[P].symbolData.anchorPoint.y),U=this._transitionPoint(C,I),G=this._transitionPoint(R,I);E.lat+=G.lat-U.lat,E.lng+=G.lng-U.lng,m.symbolData.annotationPosition=5;var B=SuperMap.Util.cloneObject(m.symbolData),F=L.supermap.plotting.PlottingObject.createSymbol(b,M,E,{symbolData:B,scaleByMap:!0,minScale:0,maxScale:2048,space:0});F.enableEdit=!0,F.ownerGroup=this,this._addComponents(F),this.subObjects.push(F),P++}}this.bounds=this._calculateBounds(),d.lat=this.bounds.getSouth()}if(this.isShowTooltip){var k=new L.LatLngBounds(L.latLng(this.bounds.getSouth()-l,this.bounds.getWest()-l),L.latLng(this.bounds.getNorth()+l+1.2,this.bounds.getEast()+l)),j=[];j.push(L.latLng(k.getNorth(),k.getWest())),j.push(L.latLng(k.getSouth(),k.getEast()));var z=L.latLng(n[0].lat,n[0].lng);z.isFixedPos=!0,j.push(z);var Y=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.ANNOFRAMESYMBOL,j,{serverUrl:this.serverUrl});Y.enableEdit=!0,Y.ownerGroup=this,this.subObjects.splice(0,0,Y),this._addComponents(Y)}}}},_setSubSymbolText:function(){for(var t=0;t<this.subSymbols.length;t++)null!==this.subSymbols[t].symbolData&&(this.subSymbols[t].symbolData.textContent=this.subSymbols[t].textContent)},_parseSymbolData:function(){o.NavyDeployment.prototype._parseSymbolData.call(this),this.symbolData&&(this.isShowTooltip=this.symbolData.isShowTooltip)},_setSymbolData:function(){o.NavyDeployment.prototype._setSymbolData.call(this),this.symbolData&&(this.symbolData.isShowTooltip=this.isShowTooltip)}}),s=e.airDeployment=function(t,e,i,o){return new n(t,e,i,o)};L.supermap.plotting.airDeployment=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.airRoute=e.AirRoute=void 0;var o=i(5),n=e.AirRoute=o.Route.extend({space:null,inner:null,initialize:function(t,e,i,n){o.Route.prototype.initialize.call(this,t,e,i,n),this.libID=0,this.code=SuperMap.Plot.SymbolType.AIRROUTE,this.symbolType=SuperMap.Plot.SymbolType.AIRROUTE,this.symbolName="空军航线",null===this.space&&(this.space=20),null===this.inner&&(this.inner=!1)},destroy:function(){this.space=null,this.inner=null,o.Route.prototype.destroy.call(this)},redraw:function(){if(this._initRoute(),void 0!==this.arrRoutePts&&null!==this.arrRoutePts)for(e=0;e<this.arrRoutePts.length;e++){var t=this.arrRoutePts[e];if(SuperMap.Util.isArray(t)&&!(t.length<2)){s=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.POLYLINESYMBOL,t,{serverUrl:this.serverUrl,enableEdit:!1});this._addComponents(s)}}for(var e=0;e<this.routeNodes.length;e++){var i=this.routeNodes[e];if(null!==i&&(i.towardNodes&&null!==i.towardNodes)){for(var o=0;o<i.towardNodes.length;o++)if(!(!i.towardNodes[o]instanceof SuperMap.Plot.TowardNode)){var n=this._getNodeByUuid(i.towardNodes[o].routeNodeId);if(null!==n){if(0===this.arrRoutePts.length){(t=[]).push(L.latLng(i.y,i.x)),t.push(L.latLng(n.y,n.x));var s=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.POLYLINESYMBOL,t,{enableEdit:!1});this._addComponents(s),s._startRouteNode=i.id,s._endRouteNode=n.id}this._createLiterateSign(i,i.towardNodes[o])}}this._createRouteNode(i)}}this._finishRoute()},_createLiterateSign:function(t,e){for(var i=0;i<this.prevLiterateSign.length;){if(this.prevLiterateSign[i]._startRouteNode===t.id&&this.prevLiterateSign[i]._endRouteNode===e.routeNodeId)return this.prevLiterateSign[i].startRouteNode=t,this.prevLiterateSign[i].towardNode=e,this.prevLiterateSign[i].redraw(),this.components.push(this.prevLiterateSign[i]),void this.prevLiterateSign.splice(i,1);i++}if(null!==e.textContent&&0!==e.textContent.length){var o=SuperMap.Util.copyAttributes(SuperMap.PlotUtil.cloneObject(this.style),e.style),n=L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.LITERATESIGN,null,{startRouteNode:t,towardNode:e,route:this,inner:this.inner,space:this.space},o);this._addComponents(n),n._startRouteNode=t.id,n._endRouteNode=e.routeNodeId}}}),s=e.airRoute=function(t,e,i,o){return new n(t,e,i,o)};L.supermap.plotting.airRoute=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationFrame=void 0;var o=i(1);e.AnnotationFrame=o.AlgoSymbol.extend({islocationCircle:!1,tipPoint:null,roundBox:null,textBoxType:null,setTextBoxType:function(t){this.textBoxType!==t&&(this.textBoxType=t,this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues))},getTextBoxType:function(){return this.textBoxType},setRoundBox:function(t){this.roundBox!==t&&(this.roundBox=t,this.textBoxType!==SuperMap.Plot.TextBoxType.NONEBOX&&this.redraw())},getRoundBox:function(){return this.roundBox},setLocationCircle:function(t){this.islocationCircle!==t&&(this.islocationCircle=t,this.textBoxType!==SuperMap.Plot.TextBoxType.NONEBOX&&this.redraw())},getLocationCircle:function(){return this.islocationCircle},move:function(t,e){L.Util.moveLatLngs(this.getLatLngs()[0],t,e),L.Util.moveLatLngs(this.getLatLngs()[1],t,e),this.setLatLngs(this.getLatLngs());for(var i=0,o=this.avoidRegions.length;i<o;i++)L.Util.moveLatLngs(this.avoidRegions[i].getLatLngs(),t,e)},redraw:function(){if(o.AlgoSymbol.prototype.redraw.call(this),this.symbolType===SuperMap.Plot.SymbolType.ANNOFRAMESYMBOL&&this.ownerGroup)for(var t=0;t<this.ownerGroup.components.length;t++)this.ownerGroup.components[t]!==this&&this.ownerGroup.components[t].redraw()},_resize:function(t,e){this.getLatLngs()[0]=L.latLng(e.lat+t*(this.getLatLngs()[0].lat-e.lat),e.lng+t*(this.getLatLngs()[0].lng-e.lng)),this.getLatLngs()[1]=L.latLng(e.lat+t*(this.getLatLngs()[1].lat-e.lat),e.lng+t*(this.getLatLngs()[1].lng-e.lng)),this.redraw()},_parseSymbolData:function(){o.AlgoSymbol.prototype._parseSymbolData.call(this),null!==this.symbolData&&(void 0!==this.symbolData.tipPoint&&null!==this.symbolData.tipPoint&&(this.tipPoint=this.symbolData.tipPoint),void 0!==this.symbolData.islocationCircle&&null!==this.symbolData.islocationCircle&&(this.islocationCircle=this.symbolData.islocationCircle),void 0!==this.symbolData.roundBox&&null!==this.symbolData.roundBox&&(this.roundBox=this.symbolData.roundBox),void 0!==this.symbolData.textBoxType&&null!==this.symbolData.textBoxType&&(this.textBoxType=this.symbolData.textBoxType),void 0!==this.symbolData.roundBox&&null!==this.symbolData.roundBox&&(this.roundBox=this.symbolData.roundBox))},_setSymbolData:function(t){o.AlgoSymbol.prototype._setSymbolData.call(this,t),null!==this.symbolData&&(null!==this.tipPoint&&void 0!==this.tipPoint&&(this.symbolData.tipPoint=this.tipPoint),null!==this.islocationCircle&&void 0!==this.islocationCircle&&(this.symbolData.islocationCircle=this.islocationCircle),null!==this.roundBox&&void 0!==this.roundBox&&(this.symbolData.roundBox=this.roundBox),null!==this.textBoxType&&void 0!==this.textBoxType&&(this.symbolData.textBoxType=this.textBoxType))},_calculateParts:function(){this.superMapAlgoSymbol&&0!==this.getLatLngs().length&&(this._sendDataToAlgo(),this.superMapAlgoSymbol.calculateParts(),this._getDataFromAlgo(),this._annotationContent(),this._transSymbolCellsToLayers(this.superMapAlgoSymbol.components))},_modifyPoint:function(t,e){if(e=new SuperMap.Geometry.Point(e.lng,e.lat),e.isScalePoint=!0,this._clearComponents(),this._sendDataToAlgo(),this.superMapAlgoSymbol.modifyPoint(t,e),this._getDataFromAlgo(),this._annotationContent(),this._transSymbolCellsToLayers(this.superMapAlgoSymbol.components),this.symbolType===SuperMap.Plot.SymbolType.ANNOFRAMESYMBOL&&this.ownerGroup)for(var i=0;i<this.ownerGroup.subObjects.length;i++)this.ownerGroup.subObjects[i]!==this&&this.ownerGroup.subObjects[i].redraw()},_annotationContent:function(){var t=this.textContent;if(0!==t.length){var e=SuperMap.PlotUtil.getTextWidth(this.style,t),i=this._map.latLngToLayerPoint(this.latLngs[0]),o=this._map.latLngToLayerPoint(this.latLngs[1]),n=parseFloat(Math.abs(o.x-i.x)),s=parseFloat(Math.abs(i.y-o.y));if(e>=n){var a=t.split("");t="";for(var l=1,r=parseFloat(this.style.fontSize)+2*this.style.weight+.2*parseFloat(this.style.fontSize)+l,u="",p=0,h=a.length;p<h&&r<=s;p++){if(u+=a[p],SuperMap.PlotUtil.getTextWidth(this.style,u)>=n){var c=a[p];if(a[p]="\n",l++,!((r=parseFloat(this.style.fontSize)*l+l+2*this.style.weight+.2*parseFloat(this.style.fontSize))<s))break;a[p]+=c,u=c}t+=a[p]}}if(0!==t.length){var y=L.latLng((this.latLngs[0].lat+this.latLngs[1].lat)/2,(this.latLngs[0].lng+this.latLngs[1].lng)/2),g=new SuperMap.Geometry.Point(y.lng,y.lat),d={},f=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.TEXTSYMBOL,[g],t);d.positionPoints=f,d.type=SuperMap.Plot.SymbolType.TEXTSYMBOL,d.textContent=t,d.style={surroundLineFlag:!1,labelAlign:"cm"},this.superMapAlgoSymbol.components.push(d)}}},_setDefaultOptions:function(t){o.AlgoSymbol.prototype._setDefaultOptions.call(this,t),t.tipPoint=this.tipPoint,t.islocationCircle=this.islocationCircle,t.roundBox=this.roundBox,t.textBoxType=this.textBoxType},_sendDataToAlgo:function(){this.superMapAlgoSymbol.controlPoints=L.Util.latLngsToSuperMapPoints(this.getLatLngs()),this.superMapAlgoSymbol.isEdit=this.isEdit,this.superMapAlgoSymbol.scaleValues=this.scaleValues,this.superMapAlgoSymbol.textContent=this.textContent,this.tipPoint&&(this.superMapAlgoSymbol.tipPoint=this.tipPoint),null!==this.islocationCircle&&void 0!==this.islocationCircle&&(this.superMapAlgoSymbol.islocationCircle=this.islocationCircle),null!==this.roundBox&&void 0!==this.roundBox&&(this.superMapAlgoSymbol.roundBox=this.roundBox),null!==this.textBoxType&&void 0!==this.textBoxType&&(this.superMapAlgoSymbol.textBoxType=this.textBoxType)},_getDataFromAlgo:function(){this.scalePoints=L.Util.superMapPointsToLatLngs(this.superMapAlgoSymbol.scalePoints),this.tipPoint=this.superMapAlgoSymbol.tipPoint,this.islocationCircle=this.superMapAlgoSymbol.islocationCircle,this.roundBox=this.superMapAlgoSymbol.roundBox,this.textBoxType=this.superMapAlgoSymbol.textBoxType}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arcRegion=e.ArcRegion=void 0;var o=i(1),n=e.ArcRegion=o.AlgoSymbol.extend({centerPoint:null,radius:null,startAngle:0,endAngle:360,textPosition:null,radiusText:null,radiusPosAngle:null,radiusLineType:null,subSymbolDefaultPixelSize:15,circlePts:null,spatialAnalystUrl:"",setRadius:function(t){this.radius!==t&&(this.radius=t,this.latLngs=[],this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues))},getRadius:function(){return this.radius},setStartAngle:function(t){this.startAngle!==t&&(this.startAngle=t,this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues))},getStartAngle:function(){return this.startAngle},setEndAngle:function(t){this.endAngle!==t&&(this.endAngle=t,this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues))},getEndAngle:function(){return this.endAngle},setTextPosition:function(t){this.textPosition!==t&&(this.textPosition=t,0!==this.textContent.length&&(this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)))},setRadiusText:function(t,e){e>1&&(e=1),e<0&&(e=0),this.radiusText[e]!==t&&(this.radiusText[e]=t,this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues))},getRadiusText:function(t){return t>1&&(t=1),t<0&&(t=0),this.radiusText[t]},setRadiusTextPos:function(t){this.radiusPosAngle!==t&&(this.radiusPosAngle=t,0!==this.radiusText.length&&(this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)))},getRadiusTextPos:function(){return this.radiusPosAngle},setRadiusLineType:function(t){this.radiusLineType!==t&&(this.radiusLineType=t,0!==this.radiusText.length&&(this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)))},getRadiusLineType:function(){return this.radiusLineType},initialize:function(t,e,i,n){this.scalePoints=[],this.scaleValues=[],o.AlgoSymbol.prototype.initialize.call(this,t,e,i,n),this.libID=0,this.code=SuperMap.Plot.SymbolType.ARCREGION,this.symbolType=SuperMap.Plot.SymbolType.ARCREGION,this.symbolName="扇形区域",this.minEditPts=2,this.maxEditPts=4,null===this.circlePts&&(this.circlePts=[]),null===this.textPosition&&(this.textPosition=(this.startAngle+this.endAngle)/2),null===this.radiusText&&(this.radiusText=[]),null===this.radiusPosAngle&&(this.radiusPosAngle=(this.startAngle+this.endAngle)/2),null===this.radiusLineType&&(this.radiusLineType=SuperMap.Plot.RadiusLineType.SOLID),void 0!==n.constantSize&&null!==n.constantSize||!1!==this.isEdit||(this.constantSize=!0),this.subSymbolDefaultPixelSize=15},destroy:function(){this.centerPoint=null,this.radius=null,this.startAngle=null,this.endAngle=null,this.textPosition=null,this.radiusText=null,this.radiusPosAngle=null,this.radiusLineType=null,this.circlePts=null,o.AlgoSymbol.prototype.destroy.call(this)},_calculateParts:function(){if(this.scalePoints=[],0!==this.circlePts.length&&this.centerPoint&&this.radius){0===this.getLatLngs().length&&(this.latLngs=[this.centerPoint.clone()]),3===this.getLatLngs().length&&(this.startAngle=180*SuperMap.Plot.PlottingUtil.radian(this.latLngs[0],this.latLngs[2])/Math.PI),4===this.getLatLngs().length&&(this.endAngle=180*SuperMap.Plot.PlottingUtil.radian(this.latLngs[0],this.latLngs[3])/Math.PI),!0===this.isEdit&&this.getLatLngs().length>2&&this.getLatLngs().splice(2,this.getLatLngs().length-2),this.startAngle%=360,this.endAngle%=360,this.startAngle>this.endAngle&&(this.endAngle+=360);var t=[];if(SuperMap.Plot.PlottingUtil.equalFuzzy(this.startAngle,this.endAngle))t=L.Util.superMapPointsToLatLngs(SuperMap.Plot.PlottingUtil.clearSamePts(this.circlePts));else{var e=(t=this._getArcPts(this.startAngle,this.endAngle))[0].clone();e.isScalePoint=!0,e.tag=0;var i=t[t.length-1].clone();i.isScalePoint=!0,i.tag=1,this.scalePoints.push(e),this.scalePoints.push(i),t.push(this.centerPoint.clone())}this._createAndDrawLayer(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t,{surroundLineFlag:!1}),1===this.latLngs.length&&this.latLngs.push(t[Math.ceil(t.length/2)].clone()),this._textGeometry(),this._radiusGeometry()}},_textGeometry:function(){if(0!==this.textContent.length){var t=90,e=!1;this.textPosition%=360,this.endAngle>this.startAngle&&(this.textPosition<this.endAngle&&this.textPosition>this.startAngle?(this.endAngle-this.textPosition<t&&(t=this.endAngle-this.textPosition),this.textPosition-this.startAngle<t&&(t=this.textPosition-this.startAngle)):this.textPosition+360<this.endAngle&&this.textPosition+360>this.startAngle?(this.textPosition+=360,this.endAngle-this.textPosition<t&&(t=this.endAngle-this.textPosition),this.textPosition-this.startAngle<t&&(t=this.textPosition-this.startAngle)):e=!0),this.startAngle>this.endAngle&&(this.textPosition>this.startAngle||this.textPosition<this.endAngle?e=!0:(this.startAngle-this.textPosition<t&&(t=this.startAngle-this.textPosition),this.textPosition-this.endAngle<t&&(t=this.textPosition-this.endAngle))),2*t<4&&(e=!0);var i=null;if(!0===e){var o=this.getBounds().getCenter();this._createAndDrawLayer(34,[o],{surroundLineFlag:!1,labelAlign:"cm"},this.textContent),i=o.clone()}else{var n=this.textPosition+t,s=this.textPosition-t,a=this._getArcPts(s,n),l=SuperMap.Plot.RelLineText.ONLEFTLINE;SuperMap.Plot.PlottingUtil.isPloyClockwise(a)&&(l=SuperMap.Plot.RelLineText.ONRIGHTLINE);for(var r=SuperMap.Plot.PlottingUtil.clonePoints(a),u=[],p=r.length-1;p>=0;p--)u.push(r[p]);this._addComponents(L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.PATHTEXT,u,{textContent:this.textContent,showPathLine:!1,isCurve:!1,relLineText:l},this.style)),i=a[Math.ceil(a.length/2)].clone()}i.isScalePoint=!0,i.tag=2,this.scalePoints>0?this.scalePoints[0]=i:this.scalePoints.push(i)}},_radiusGeometry:function(){if(0!==this.radiusText.length){this.radiusPosAngle%=360;for(var t=new SuperMap.Geometry.Point(this.centerPoint.lng,this.centerPoint.lat),e=0,i=SuperMap.Plot.PlottingUtil.distance(t,this.circlePts[0]),o=1;o<this.circlePts.length;o++){var n=SuperMap.Plot.PlottingUtil.distance(t,this.circlePts[o]);n>i&&(i=n,e=o)}var s=SuperMap.Plot.PlottingUtil.isPloyClockwise(this.circlePts),a=180*SuperMap.Plot.PlottingUtil.radian(t,this.circlePts[e])/Math.PI,l=this.circlePts[e].clone(),r=(this.radiusPosAngle-a)*(Math.PI/180);SuperMap.Plot.PlottingUtil.rotateAngle(t,r,l);for(var u=this.circlePts[0].clone(),p=0;p<this.circlePts.length-1;p++){var h=180*SuperMap.Plot.PlottingUtil.radian(t,this.circlePts[p])/Math.PI,c=180*SuperMap.Plot.PlottingUtil.radian(t,this.circlePts[p+1])/Math.PI;if(1===s&&this.radiusPosAngle>=c&&this.radiusPosAngle<=h||0===s&&this.radiusPosAngle>=h&&this.radiusPosAngle<=c){if(!0===SuperMap.Plot.PlottingUtil.intersectLineSegs(t,l,this.circlePts[p],this.circlePts[p+1],u))break;u=Math.abs(this.radiusPosAngle-h)>=Math.abs(this.radiusPosAngle-c)?this.circlePts[p].clone():this.circlePts[p+1].clone();break}}var y=SuperMap.Plot.PlottingUtil.distance(t,u),g=L.latLng(u.y,u.x),d=[];if(d.push(this.centerPoint),d.push(g),SuperMap.Plot.RadiusLineType.NONE!==this.radiusLineType&&this._createAndDrawLayer(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d,{surroundLineFlag:!1}),this.radiusLineType===SuperMap.Plot.RadiusLineType.ARROW){var f=this._map.unproject(L.point(this.subSymbolDefaultPixelSize,0)).lat;f/y>.3&&(f=.3*y);var S=SuperMap.Plot.PlottingUtil.findPoint(u,t,f,12.5),P=SuperMap.Plot.PlottingUtil.findPoint(u,t,f,-12.5),m=L.latLng(S.y,S.x),b=L.latLng(P.y,P.x),M=[];M.push(g.clone()),M.push(m),M.push(b),this._createAndDrawLayer(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,M,{surroundLineFlag:!1,fill:!0,fillLimit:!0,lineTypeLimit:!0})}SuperMap.Util.isArray(this.radiusText)||(this.radiusText=[this.radiusText]);var v,_;if(this.radiusText.length>=1){v=SuperMap.Plot.PlottingUtil.findPoint(t,u,.2*y,0),_=SuperMap.Plot.PlottingUtil.findPoint(t,u,.8*y,0);var T=SuperMap.Plot.PlottingUtil.findPoint(v,u,.02*y,90),x=SuperMap.Plot.PlottingUtil.findPoint(_,u,.02*y,90),O=L.latLng(T.y,T.x),A=L.latLng(x.y,x.x),w=SuperMap.Plot.RelLineText.ONLEFTLINE,D=[];T.x<x.x?(D.push(O),D.push(A)):(D.push(A),D.push(O),w=SuperMap.Plot.RelLineText.ONRIGHTLINE),this._addComponents(L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.PATHTEXT,D,{textContent:this.radiusText[0],showPathLine:!1,relLineText:w},this.style))}if(2===this.radiusText.length){var w=SuperMap.Plot.RelLineText.ONRIGHTLINE,E=SuperMap.Plot.PlottingUtil.findPoint(v,u,.02*y,270),I=SuperMap.Plot.PlottingUtil.findPoint(_,u,.02*y,270),N=L.latLng(E.y,E.x),C=L.latLng(I.y,I.x),R=[];E.x<I.x?(R.push(N),R.push(C)):(R.push(C),R.push(N),w=SuperMap.Plot.RelLineText.ONLEFTLINE),this._addComponents(L.supermap.plotting.PlottingObject.createSymbol(0,SuperMap.Plot.SymbolType.PATHTEXT,R,{textContent:this.radiusText[1],showPathLine:!1,relLineText:w},this.style))}var U=g.clone();U.isScalePoint=!0,U.tag=3,this.scalePoints>1?this.scalePoints[1]=U:this.scalePoints.push(U)}},_parseSymbolData:function(){if(o.AlgoSymbol.prototype._parseSymbolData.call(this),this.symbolData){if(this.centerPoint=L.latLng(this.symbolData.centerPoint.y,this.symbolData.centerPoint.x),this.endAngle=this.symbolData.endAngle,this.radius=this.symbolData.radius,this.radiusPosAngle=this.symbolData.radiusPosAngle,this.startAngle=this.symbolData.startAngle,this.textPosition=this.symbolData.textPosition,this.radiusLineType=this.symbolData.radiusLineType,this.radiusText=this.symbolData.radiusText,this.symbolData.circlePts){for(var t=[],e=0;e<this.symbolData.circlePts.length;e++)t.push(new SuperMap.Geometry.Point(this.symbolData.circlePts[e].x,this.symbolData.circlePts[e].y));0!==t.length&&(this.circlePts=t)}this.spatialAnalystUrl=this.symbolData.spatialAnalystUrl}},_setSymbolData:function(){this.latLngs=[],o.AlgoSymbol.prototype._setSymbolData.call(this),this.symbolData&&(this.symbolData.centerPoint||(this.symbolData.centerPoint={}),this.symbolData.centerPoint.x=this.centerPoint.lng,this.symbolData.centerPoint.y=this.centerPoint.lat,this.symbolData.endAngle=this.endAngle,this.symbolData.radius=this.radius,this.symbolData.radiusPosAngle=this.radiusPosAngle,this.symbolData.startAngle=this.startAngle,this.symbolData.textPosition=this.textPosition,this.symbolData.radiusLineType=this.radiusLineType,this.symbolData.radiusText=this.radiusText,this.symbolData.circlePts=this.circlePts,this.symbolData.spatialAnalystUrl=this.spatialAnalystUrl)},_reView:function(){void 0!==this.prevStrokeWidth&&this.prevStrokeWidth!==this.feature.style.strokeWidth&&(this.strokeWidth=this.style.strokeWidth),this.fromZoom!==this._map.getZoom()&&(!0===this.isEdit&&this.redraw(),this.fromZoom=this._map.getZoom())},_generateArcRegionFromServer:function(){if(void 0===this.isRedraw&&(this.isRedraw=!0),!1!==this.isRedraw&&null!==this._map)if(this.isRedraw=!1,this.latLngs.length<this.minEditPts)this.isRedraw=!0;else{if(this.latLngs.length>2)return this.redraw(),void(this.isRedraw=!0);if(null===this.centerPoint?this.centerPoint=this.latLngs[0].clone():(this.centerPoint.lat=this.latLngs[0].lat,this.centerPoint.lng=this.latLngs[0].lng),this.radius=this.latLngs[0].distanceTo(this.latLngs[1])/1e3,0!==this.radius){var t=new SuperMap.BufferDistance({value:1e3*this.radius}),e=new SuperMap.BufferSetting({endType:SuperMap.BufferEndType.ROUND,leftDistance:t,rightDistance:t,semicircleLineSegment:36}),i=new SuperMap.GeometryBufferAnalystParameters({sourceGeometry:L.marker(this.centerPoint),sourceGeometrySRID:parseInt(this._map.options.crs.code.split(":")[1]),bufferSetting:e}),o=this;L.supermap.spatialAnalystService(this.spatialAnalystUrl).bufferAnalysis(i,function(t){o.circlePts=[];for(var e=t.result.resultGeometry.points,i=0,n=e.length;i<n;i++)o.circlePts.push(new SuperMap.Geometry.Point(e[i].x,e[i].y));o.redraw(),o.isRedraw=!0},SuperMap.DataFormat.ISERVER)}else this.isRedraw=!0}},_modifyPoint:function(t,e){if(!0===e.isScalePoint){if(0===t)this.startAngle=180*SuperMap.Plot.PlottingUtil.radian(this.latLngs[0],e)/Math.PI;else if(1===t)this.endAngle=180*SuperMap.Plot.PlottingUtil.radian(this.latLngs[0],e)/Math.PI;else if(2===t)this.textPosition=180*SuperMap.Plot.PlottingUtil.radian(this.latLngs[0],e)/Math.PI;else if(3===t){var i=180*SuperMap.Plot.PlottingUtil.radian(this.latLngs[0],e)/Math.PI;this.startAngle%360==this.endAngle%360?this.radiusPosAngle=i:(i>this.startAngle&&i<this.endAngle||i+360>this.startAngle&&i+360<this.endAngle)&&(this.radiusPosAngle=i)}this.redraw(),this.isRedraw=!0}else this._generateArcRegionFromServer()},setRotate:function(t){if(this.dRotate=t,this._rotate(t,this.centerPoint),this.radiusPosAngle+=t,this.startAngle+=t,this.endAngle+=t,this.textPosition+=t,this.latLngs=[],0!==this.avoidRegions.length)for(var e=0,i=this.avoidRegions.length;e<i;e++)L.Util.rotateLatLngs(this.avoidRegions[e].getLatLngs(),this.centerPoint,t);this.redraw()},move:function(t,e){if(void 0===this.isMove&&(this.isMove=!0),!1!==this.isMove){this.isMove=!1;for(var i=0,o=this.avoidRegions.length;i<o;i++)L.Util.moveLatLngs(this.avoidRegions[i].getLatLngs(),t,e);L.Util.moveLatLngs([this.centerPoint],t,e),this.latLngs=[];var n=new SuperMap.BufferDistance({value:1e3*this.radius}),s=new SuperMap.BufferSetting({endType:SuperMap.BufferEndType.ROUND,leftDistance:n,rightDistance:n,semicircleLineSegment:36}),a=new SuperMap.GeometryBufferAnalystParameters({sourceGeometry:L.marker(this.centerPoint),sourceGeometrySRID:parseInt(this._map.options.crs.code.split(":")[1]),bufferSetting:s}),l=this;L.supermap.spatialAnalystService(this.spatialAnalystUrl).bufferAnalysis(a,function(t){l.circlePts=[];for(var e=t.result.resultGeometry.points,i=0,o=e.length;i<o;i++)l.circlePts.push(new SuperMap.Geometry.Point(e[i].x,e[i].y));l.redraw(),l.isMove=!0},SuperMap.DataFormat.ISERVER)}},_calculateRadius:function(){if(!this._radiusLng||!this._radiusLat){var t=this.centerPoint.lng,e=this.centerPoint.lat,i=this._map,o=i.options.crs;if(o.distance===L.CRS.Earth.distance){var n=Math.PI/180,s=1e3*this.radius/L.CRS.Earth.R/n,a=i.project([e+s,t]),l=i.project([e-s,t]),r=a.add(l).divideBy(2),u=i.unproject(r).lat,p=Math.acos((Math.cos(s*n)-Math.sin(e*n)*Math.sin(u*n))/(Math.cos(e*n)*Math.cos(u*n)))/n;(isNaN(p)||0===p)&&(p=s/Math.cos(Math.PI/180*e)),this._radiusLat=s,this._radiusLng=p}else{var h=o.unproject(o.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(h).x}}},_getArcPts:function(t,e){var i=[];e%=360,(t%=360)<0&&(t+=360),e<0&&(e+=360);for(var o=new SuperMap.Geometry.Point(this.centerPoint.lng,this.centerPoint.lat),n=0,s=SuperMap.Plot.PlottingUtil.distance(o,this.circlePts[0]),a=1;a<this.circlePts.length;a++){var l=SuperMap.Plot.PlottingUtil.distance(o,this.circlePts[a]);l>s&&(s=l,n=a)}var r=0,u=0,p=this.circlePts[0].clone(),h=this.circlePts[0].clone(),c=(t-180*SuperMap.Plot.PlottingUtil.radian(o,this.circlePts[n])/Math.PI)*(Math.PI/180),y=new SuperMap.Geometry.Point(this.centerPoint.lng,this.centerPoint.lat),g=this.circlePts[n].clone();SuperMap.Plot.PlottingUtil.rotateAngle(y,c,g);var d=this.circlePts[n].clone();SuperMap.Plot.PlottingUtil.rotateAngle(y,c,d);for(var f=180*SuperMap.Plot.PlottingUtil.radian(o,this.circlePts[0])/Math.PI,S=f,P=SuperMap.Plot.PlottingUtil.isPloyClockwise(this.circlePts),m=0;m<this.circlePts.length-1;m++){M=b=180*SuperMap.Plot.PlottingUtil.radian(o,this.circlePts[m+1])/Math.PI;if(1===P&&M>S&&(M-=360),0===P&&M<S&&(M+=360),1===P&&t>=M&&t<=S||0===P&&t>=S&&t<=M){!0===SuperMap.Plot.PlottingUtil.intersectLineSegs(o,g,this.circlePts[m],this.circlePts[m+1],p)?r=0===P?m+1:m:(v=Math.abs(t-S))>=(_=Math.abs(t-M))?(r=m,p=this.circlePts[m].clone()):(r=m+1,p=this.circlePts[m+1].clone()),S=f;break}S=b}for(m=0;m<this.circlePts.length-1;m++){var b=180*SuperMap.Plot.PlottingUtil.radian(o,this.circlePts[m+1])/Math.PI,M=b;if(1===P&&M>S&&(M-=360),0===P&&M<S&&(M+=360),1===P&&e>=M&&e<=S||0===P&&e>=S&&e<=M){if(!0===SuperMap.Plot.PlottingUtil.intersectLineSegs(o,d,this.circlePts[m],this.circlePts[m+1],h))u=0===P?m:m+1;else{var v=Math.abs(e-S),_=Math.abs(e-M);v>=_?(u=m,h=this.circlePts[m].clone()):(u=m+1,h=this.circlePts[m+1].clone())}break}S=b}if(0===P)if(r<u){i.push(p);for(T=r;T<=u;T++)i.push(this.circlePts[T].clone());i.push(h)}else{i.push(p);for(T=r;T<this.circlePts.length;T++)i.push(this.circlePts[T].clone());for(T=0;T<=u;T++)i.push(this.circlePts[T].clone());i.push(h)}else if(1===P)if(u<r){i.push(p);for(T=r;T>=u;T--)i.push(this.circlePts[T].clone());i.push(h)}else{i.push(p);for(T=r;T>0;T--)i.push(this.circlePts[T].clone());for(var T=this.circlePts.length-1;T>=u;T--)i.push(this.circlePts[T].clone());i.push(h)}return L.Util.superMapPointsToLatLngs(SuperMap.Plot.PlottingUtil.clearSamePts(i))}}),s=e.arcRegion=function(t,e,i,o){return new n(t,e,i,o)};L.supermap.plotting.arcRegion=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArrowLine=void 0;var o=i(1);e.ArrowLine=o.AlgoSymbol.extend({arrowTypeStart:0,arrowTypeEnd:0,getStartArrowType:function(){return this.arrowTypeStart},setStartArrowType:function(t){this.arrowTypeStart!==t&&(this.arrowTypeStart=t,this.redraw())},getEndArrowType:function(){return this.arrowTypeEnd},setEndArrowType:function(t){this.arrowTypeEnd!==t&&(this.arrowTypeEnd=t,this.redraw())},_parseSymbolData:function(){o.AlgoSymbol.prototype._parseSymbolData.call(this),this.symbolData&&(this.symbolData.hasOwnProperty("arrowTypeEnd")&&(this.arrowTypeEnd=this.symbolData.arrowTypeEnd),this.symbolData.hasOwnProperty("arrowTypeStart")&&(this.arrowTypeStart=this.symbolData.arrowTypeStart))},_setSymbolData:function(){o.AlgoSymbol.prototype._setSymbolData.call(this),this.symbolData&&(this.symbolData.arrowTypeEnd=this.arrowTypeEnd,this.symbolData.arrowTypeStart=this.arrowTypeStart)},_setDefaultOptions:function(t){o.AlgoSymbol.prototype._setDefaultOptions.call(this,t),t.arrowTypeEnd=this.arrowTypeEnd,t.arrowTypeStart=this.arrowTypeStart},_sendDataToAlgo:function(){o.AlgoSymbol.prototype._sendDataToAlgo.call(this),this.superMapAlgoSymbol.arrowTypeEnd=this.arrowTypeEnd,this.superMapAlgoSymbol.arrowTypeStart=this.arrowTypeStart}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CombinationalCircle=void 0;var o=i(1);e.CombinationalCircle=o.AlgoSymbol.extend({radius:null,_parseSymbolData:function(){if(o.AlgoSymbol.prototype._parseSymbolData.call(this),this.symbolData&&this.symbolData.radius&&0!==this.symbolData.radius.length){this.radius=[];for(var t=0;t<this.symbolData.radius.length;t++)this.radius.push(this.symbolData.radius[t])}},_setSymbolData:function(){o.AlgoSymbol.prototype._setSymbolData.call(this),this.symbolData&&(this.symbolData.radius=this.radius)},_setDefaultOptions:function(t){o.AlgoSymbol.prototype._setDefaultOptions.call(this,t),t.radius=this.radius},_getDatafromAlgo:function(){o.AlgoSymbol.prototype._getDatafromAlgo.call(this),this.radius=this.superMapAlgoSymbol.radius}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConcentricCircle=void 0;var o=i(1);e.ConcentricCircle=o.AlgoSymbol.extend({startAngle:0,endAngle:360,_parseSymbolData:function(){o.AlgoSymbol.prototype._parseSymbolData.call(this),this.symbolData&&(this.symbolData.hasOwnProperty("startAngle")&&(this.startAngle=this.symbolData.startAngle),this.symbolData.hasOwnProperty("endAngle")&&(this.endAngle=this.symbolData.endAngle))},_setSymbolData:function(){o.AlgoSymbol.prototype._setSymbolData.call(this),this.symbolData&&(this.symbolData.startAngle=this.startAngle,this.symbolData.endAngle=this.endAngle)},_setDefaultOptions:function(t){o.AlgoSymbol.prototype._setDefaultOptions.call(this,t),t.startAngle=this.startAngle,t.endAngle=this.endAngle},_getDatafromAlgo:function(){o.AlgoSymbol.prototype._getDatafromAlgo.call(this),this.startAngle=this.superMapAlgoSymbol.startAngle,this.endAngle=this.superMapAlgoSymbol.endAngle}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.interferenceBeam=e.InterferenceBeam=void 0;var o=i(2),n=e.InterferenceBeam=o.GraphicObject.extend({initialize:function(t,e,i,n){o.GraphicObject.prototype.initialize.call(this,t,e,i,n),this.libID=0,this.code=SuperMap.Plot.SymbolType.INTERFERENCEBEAM,this.symbolType=SuperMap.Plot.SymbolType.INTERFERENCEBEAM,this.symbolName="干扰波束",this.minEditPts=3,this.maxEditPts=9999},destroy:function(){o.GraphicObject.prototype.destroy.apply(this,arguments)},_calculateParts:function(){null!==this.getLatLngs()&&this.getLatLngs().length>=this.minEditPts&&this._createAndDrawLayer(32,this.latLngs,this.style,"")},move:function(t,e){L.Util.moveLatLngs(this.getLatLngs(),t,e);for(var i=0,o=this.avoidRegions.length;i<o;i++)this.avoidRegions[i].move(t,e);this.redraw()},setRotate:function(t){this.dRotate=t,null===this.anchorPoint&&(this.anchorPoint=this.getBounds().getCenter());for(var e in this.components)L.Util.rotateLatLngs(this.components[e].getLatLngs(),this.anchorPoint,t),this.components[e].setLatLngs(this.components[e].getLatLngs());for(var i=0,o=this.avoidRegions.length;i<o;i++)this.avoidRegions[i].rotate(this.dRotate,this.anchorPoint)},_reView:function(){}}),s=e.interferenceBeam=function(t,e,i,o){return new n(t,e,i,o)};L.supermap.plotting.interferenceBeam=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.missileRoute=e.MissileRoute=void 0;var o=i(5),n=e.MissileRoute=o.Route.extend({initialize:function(t,e,i,n){this.libID=0,this.code=SuperMap.Plot.SymbolType.MISSILEROUTE,this.symbolType=SuperMap.Plot.SymbolType.MISSILEROUTE,this.symbolName="导弹航线",o.Route.prototype.initialize.call(this,t,e,i,n)}}),s=e.missileRoute=function(t,e,i,o){return new n(t,e,i,o)};L.supermap.plotting.missileRoute=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.navyRoute=e.NavyRoute=void 0;var o=i(5),n=e.NavyRoute=o.Route.extend({initialize:function(t,e,i,n){this.libID=0,this.code=SuperMap.Plot.SymbolType.NAVYROUTE,this.symbolType=SuperMap.Plot.SymbolType.NAVYROUTE,this.symbolName="海军航线",o.Route.prototype.initialize.call(this,t,e,i,n)}}),s=e.navyRoute=function(t,e,i,o){return new n(t,e,i,o)};L.supermap.plotting.navyRoute=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.polygonRegion=e.PolygonRegion=void 0;var o=i(1),n=e.PolygonRegion=o.AlgoSymbol.extend({annotationPosition:0,setTextPosition:function(t){this.annotationPosition!==t&&(this.annotationPosition=t,0!==this.textContent.length&&this.redraw())},_setDefaultOptions:function(t){o.AlgoSymbol.prototype._setDefaultOptions.call(this,t),t.annotationPosition=this.annotationPosition},_sendDataToAlgo:function(){o.AlgoSymbol.prototype._sendDataToAlgo.call(this),this.superMapAlgoSymbol.annotationPosition=this.annotationPosition}}),s=e.polygonRegion=function(t,e,i,o){return new n(t,e,i,o)};L.supermap.plotting.polygonRegion=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Satellite=e.satellite=void 0;var o=i(2),n=(i(15),e.satellite=o.GraphicObject.extend({orbitPoints:[],subSymbol:null,visible:null,timeWindows:null,setVisible:function(t){this.visible!==t&&(this.visible=t,this.redraw(),null!==this._map.getPlotEditControl()&&this.isSelected&&this.fire(SuperMap.Plot.Event.reseteditmarkersvalues))},getBounds:function(){var t=this;return t._bounds=new L.LatLngBounds,t.components.map(function(e){e.symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL?t._bounds.extend(e.getBoundsWithText()):t._bounds.extend(e.getBounds())}),t._bounds},getVisible:function(){return this.visible},initialize:function(t,e,i,n){this.libID=0,this.code=SuperMap.Plot.SymbolType.SATELLITE,this.symbolType=SuperMap.Plot.SymbolType.SATELLITE,this.symbolName="卫星",null===this.visible&&(this.visible=!0),null===this.timeWindows&&(this.timeWindows=[]),0===this.orbitPoints.length&&(this.orbitPoints=[]),o.GraphicObject.prototype.initialize.call(this,t,e,i,n)},_calculateParts:function(){if(null!==this.orbitPoints&&this.visible){if(null===this.latLngs||0===this.latLngs.length)this.latLngs=L.Util.superMapPointsToLatLngs(this.orbitPoints);else for(var t=0,e=this.latLngs.length;t<e;t++)this.orbitPoints[t].x=this.latLngs[t].lng,this.orbitPoints[t].y=this.latLngs[t].lat;this._createAndDrawLayer(24,L.Util.cloneLatLngs(this.latLngs),this.style,"")}var i=Math.floor(this.orbitPoints.length/2),o=new L.latLng(this.orbitPoints[i].y,this.orbitPoints[i].x),n=SuperMap.Plot.PlottingUtil.radian(o,new L.latLng(this.orbitPoints[i-1].y,this.orbitPoints[i-1].x));this.subSymbol.symbolData.dRotate=180*n/Math.PI,this.subSymbol.symbolData.textContent=this.textContent,this.subSymbol.symbolData.annotationPosition=7;var s={symbolData:SuperMap.Util.cloneObject(this.subSymbol.symbolData),serverUrl:this.serverUrl,enableEdit:!1,style:this.style,scaleByMap:!0},a=SuperMap.PlotUtil.cloneObject(this.style),l=L.supermap.plotting.PlottingObject.createSymbol(this.subSymbol.libID,this.subSymbol.code,[o],s,a);this._addComponents(l),l.isEdit=!0},_parseSymbolData:function(){if(o.GraphicObject.prototype._parseSymbolData.call(this),this.symbolData&&(this.symbolData.hasOwnProperty("subSymbol")&&(this.subSymbol=this.symbolData.subSymbol),this.symbolData.hasOwnProperty("visible")&&(this.visible=this.symbolData.visible),this.symbolData.hasOwnProperty("orbitPoints")&&0!==this.symbolData.orbitPoints.length)){this.orbitPoints=[];for(var t=0;t<this.symbolData.orbitPoints.length;t++)this.orbitPoints.push(new SuperMap.Plot.OrbitPoint(this.symbolData.orbitPoints[t].x,this.symbolData.orbitPoints[t].y,this.symbolData.orbitPoints[t].z,this.symbolData.orbitPoints[t].number,this.symbolData.orbitPoints[t].time))}},_setSymbolData:function(){o.GraphicObject.prototype._setSymbolData.call(this),this.symbolData&&(this.symbolData.subSymbol=this.subSymbol,this.symbolData.visible=this.visible,this.symbolData.orbitPoints=this.orbitPoints)},move:function(t,e){L.Util.moveLatLngs(this.getLatLngs(),t,e);for(var i=0,o=this.orbitPoints.length;i<o;i++)this.orbitPoints[i].x+=e,this.orbitPoints[i].y+=t;for(var i=0,n=this.timeWindows.length;i<n;i++){var s=this.timeWindows[i];null!==s&&s.redraw()}if(0!==this.avoidRegions.length)for(var a=0,o=this.avoidRegions.length;a<o;a++)L.Util.moveLatLngs(this.avoidRegions[a].getLatLngs(),t,e);if(!1===this.visible)for(i=0;i<this.components.length;i++)this.components[i].symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL&&this.components[i].move(t,e);else this.redraw()},_resizeLatLngs:function(t,e,i){o.GraphicObject.prototype._resizeLatLngs.apply(this,arguments);for(var n=0,s=this.orbitPoints.length;n<s;n++)this.orbitPoints[n].x=this.latLngs[n].lng,this.orbitPoints[n].y=this.latLngs[n].lat;for(var n=0,a=this.timeWindows.length;n<a;n++){var l=this.timeWindows[n];null!==l&&l.redraw()}},setRotate:function(t){this.dRotate=t,null===this.anchorPoint&&(this.anchorPoint=this.getBounds().getCenter());for(var e=0,i=this.avoidRegions.length;e<i;e++)this.avoidRegions[e].rotate(t,this.anchorPoint);o.GraphicObject.prototype._rotate.call(this,t,this.anchorPoint);for(var n=0,i=this.orbitPoints.length;n<i;n++)this.orbitPoints[n].x=this.latLngs[n].lng,this.orbitPoints[n].y=this.latLngs[n].lat;for(n=0;n<this.timeWindows.length;n++){var s=this.timeWindows[n];null!==s&&s.redraw()}this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)},_reView:function(){for(var t=0,e=this.components.length;t<e;t++)this.components[t].symbolType===SuperMap.Plot.SymbolType.DOTSYMBOL&&(this.components[t]._reView(),this.components[t]._handleAnnotation(),this.subSymbol.symbolData=SuperMap.Util.cloneObject(this.components[t].getSymbolData()))}})),s=e.Satellite=function(t,e,i,o){return new n(t,e,i,o)};L.supermap.plotting.satellite=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.satelliteTimeWindows=e.SatelliteTimeWindows=void 0;var o=i(2),n=e.SatelliteTimeWindows=o.GraphicObject.extend({timeWindows:[],type:null,initialize:function(t,e,i,n){this.libID=0,this.code=SuperMap.Plot.SymbolType.SATELLITETIMEWINDOWS,this.symbolType=SuperMap.Plot.SymbolType.SATELLITETIMEWINDOWS,this.symbolName="卫星时间窗",o.GraphicObject.prototype.initialize.call(this,t,e,i,n),null===this.type&&(this.type="Number")},_calculateParts:function(){if(this.associatedUuid){var t=this.layer.getFeatureByUuid(this.associatedUuid);if(null===t||null===t.orbitPoints)return}for(var e=!1,i=0;i<t.timeWindows.length;i++)if(this===t.timeWindows[i]){e=!0;break}if(e||t.timeWindows.push(this),null!==this.timeWindows)for(var o=t.orbitPoints,i=0;i<this.timeWindows.length;i++){var n,s;if("Number"===this.type){for(var a=0,l=o.length;a<l;a++)if(this.timeWindows[i].startOrbitPoint===o[a].number&&(n=a),this.timeWindows[i].endOrbitPoint===o[a].number){s=a;break}}else for(a=0;a<o.length;a++)if(this.timeWindows[i].startOrbitPoint===o[a].time&&(n=a),this.timeWindows[i].endOrbitPoint===o[a].time){s=a;break}for(var r=[],u=n;u<=s;u++)r.push(new L.latLng(o[u].y,o[u].x));0!==r.length&&this._createAndDrawLayer(24,r,{surroundLineFlag:!1,lineWidthLimit:!0,weight:4*t.style.weight+this.style.weight})}},calculateBounds:function(){this.bounds=null;var t=new L.Bounds,e=this.components;if(e)for(var i=0;i<e.length;i++)t.extend(e[i].getBounds());null!==t.left&&null!==t.bottom&&null!==t.right&&null!==t.top&&this.setBounds(t)},move:function(t,e){},_parseSymbolData:function(){o.GraphicObject.prototype._parseSymbolData.apply(this,arguments),this.symbolData&&(this.timeWindows=this.symbolData.timeWindows,this.type=this.symbolData.type)},_setSymbolData:function(){o.GraphicObject.prototype._setSymbolData.apply(this,arguments),this.symbolData&&(this.symbolData.timeWindows=this.timeWindows,this.symbolData.type=this.type)}}),s=e.satelliteTimeWindows=function(t,e,i,o){return new n(t,e,i,o)};L.supermap.plotting.satelliteTimeWindows=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.symbolText=e.SymbolText=void 0;var o=i(2),n=e.SymbolText=o.GraphicObject.extend({symbolTexts:[],addFrame:!1,getFrame:function(){return this.addFrame},setFrame:function(t){this.addFrame!==t&&(this.addFrame=t,this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues))},updateSymbolText:function(t,e){this.symbolTexts.length>e&&(this.symbolTexts[e]=t,this.redraw(),this.fire(SuperMap.Plot.Event.reseteditmarkersvalues))},removeSymbolTextsFromDotSymbol:function(t){if(t&&"string"==typeof t){var e=this.layer.getFeatureByUuid(t);if(e)for(var i=0,o=e.geoSymbolTexts.length;i<o;i++)if(this===e.geoSymbolTexts[i]){e.geoSymbolTexts.splice(i,1);break}}},initialize:function(t,e,i,n){this.libID=0,this.code=SuperMap.Plot.SymbolType.SYMBOLTEXT,this.symbolType=SuperMap.Plot.SymbolType.SYMBOLTEXT,this.symbolName="对象标注",o.GraphicObject.prototype.initialize.call(this,t,e,i,n)},_calculateParts:function(){this.latLngs=[];var t=[],e=this.symbolTexts;if(e.length>0){var i=this.layer.getFeatureByUuid(this.associatedUuid);if(null===i||void 0===i)return;for(var o=!1,n=i.geoSymbolTexts,s=0,a=n.length;s<a;s++)if(this===n[s]){o=!0;break}o||n.push(this);var l={surroundLineFlag:!1,lineColorLimit:!0,fillColorLimit:!0,lineWidthLimit:!0,lineTypeLimit:!0,fontColorLimit:!0,fontSizeLimit:!0,fillLimit:!0};this._calculateSize(i);var r=i.getBounds();if(!r||!r.isValid())return;for(var s=0,u=e.length;s<u;s++){this._mergeStyleToSymbolText(e[s]);var p=e[s].textContent;if(null!==p&&0!==p.length){if(e[s].textPosition=void 0===e[s].textPosition?0:e[s].textPosition,this.addFrame)var h=SuperMap.PlotUtil.getTextWidth(e[s].style,e[s].textContent);var c,y,g,d=L.point(0,0),f=L.point(0,0);switch(e[s].textPosition){case 0:e[s].style.labelAlign="rb",c=L.latLng(r.getNorth(),r.getWest()),(y=this._map.latLngToLayerPoint(c)).x-=e[s].offsetX,y.y-=e[s].offsetY,!0===this.addFrame&&(d.x=y.x,d.y=y.y,f.x=y.x-h,f.y=y.y-parseInt(e[s].style.fontSize));break;case 1:e[s].style.labelAlign="rt",c=L.latLng(r.getSouth(),r.getWest()),(y=this._map.latLngToLayerPoint(c)).x-=e[s].offsetX,y.y+=e[s].offsetY,!0===this.addFrame&&(d.x=y.x,d.y=y.y,f.x=y.x-h,f.y=y.y+parseInt(e[s].style.fontSize));break;case 2:e[s].style.labelAlign="lb",c=L.latLng(r.getNorth(),r.getEast()),(y=this._map.latLngToLayerPoint(c)).x+=e[s].offsetX,y.y-=e[s].offsetY,!0===this.addFrame&&(d.x=y.x,d.y=y.y,f.x=y.x+h,f.y=y.y-parseInt(e[s].style.fontSize));break;case 3:e[s].style.labelAlign="lt",c=L.latLng(r.getSouth(),r.getEast()),(y=this._map.latLngToLayerPoint(c)).x+=e[s].offsetX,y.y+=e[s].offsetY,!0===this.addFrame&&(d.x=y.x,d.y=y.y,f.x=y.x+h,f.y=y.y+parseInt(e[s].style.fontSize));break;case 4:e[s].style.labelAlign="cb",c=L.latLng(r.getNorth(),(r.getWest()+r.getEast())/2),(y=this._map.latLngToLayerPoint(c)).x+=e[s].offsetX,y.y-=e[s].offsetY,!0===this.addFrame&&(d.x=y.x-h/2,d.y=y.y,f.x=y.x+h/2,f.y=y.y-parseInt(e[s].style.fontSize));break;case 5:e[s].style.labelAlign="ct",c=L.latLng(r.getSouth(),(r.getWest()+r.getEast())/2),(y=this._map.latLngToLayerPoint(c)).x+=e[s].offsetX,y.y+=e[s].offsetY,!0===this.addFrame&&(d.x=y.x-h/2,d.y=y.y,f.x=y.x+h/2,f.y=y.y+parseInt(e[s].style.fontSize));break;case 6:e[s].style.labelAlign="rm",c=L.latLng((r.getSouth()+r.getNorth())/2,r.getWest()),(y=this._map.latLngToLayerPoint(c)).x-=e[s].offsetX,y.y+=e[s].offsetY,!0===this.addFrame&&(d.x=y.x,d.y=y.y+parseInt(e[s].style.fontSize)/2,f.x=y.x-h,f.y=y.y-parseInt(e[s].style.fontSize)/2);break;case 7:e[s].style.labelAlign="lm",c=L.latLng((r.getSouth()+r.getNorth())/2,r.getEast()),(y=this._map.latLngToLayerPoint(c)).x+=e[s].offsetX,y.y+=e[s].offsetY,!0===this.addFrame&&(d.x=y.x,d.y=y.y+parseInt(e[s].style.fontSize)/2,f.x=y.x+h,f.y=y.y-parseInt(e[s].style.fontSize)/2)}var S=this._map.layerPointToLatLng(y),P=SuperMap.Util.copyAttributes(l,this.symbolTexts[s].style);if(this.addFrame){var m=this._map.layerPointToLatLng(d),b=this._map.layerPointToLatLng(f),M={};M.positionPoints=[m,b],M.style=SuperMap.Util.cloneObject(P),M.type=SuperMap.Plot.SymbolType.RECTANGLESYMBOL,t.push(M);var v=null;v=1===i.symbolType?i.latLngs[0]:r.getCenter();var _={};_.positionPoints=[S,v],_.style=SuperMap.Util.cloneObject(P),_.type=SuperMap.Plot.SymbolType.POLYLINESYMBOL,t.push(_),g=L.latLng((b.lat-m.lat)/2+m.lat,(m.lng-b.lng)/2+b.lng)}else g=S;var T={};T.positionPoints=g,T.type=SuperMap.Plot.SymbolType.TEXTSYMBOL,T.style=SuperMap.Util.cloneObject(P),T.textContent=e[s].textContent,this.addFrame&&(T.style.labelAlign="cm"),t.push(T),this.latLngs.push(S)}}}for(var x,s=0;s<t.length;s++)x=L.Util.isArray(t[s].positionPoints)?t[s].positionPoints:[t[s].positionPoints],this._createAndDrawLayer(t[s].type,x,t[s].style,t[s].textContent)},destroy:function(){this.frame=!1,this.symbolTexts=null,o.GraphicObject.prototype.destroy.call(this)},_mergeStyleToSymbolText:function(t){if(null!==this.components){null!==t.style&&void 0!==t.style||(t.style={});for(var e in this.style)t.style.hasOwnProperty(e)||(t.style[e]=this.style[e])}},_calculateSize:function(t){this.scaleByMap=t.scaleByMap,!1===this.scaleByMap?this.fromZoom=this._map.getZoom():this.fromZoom<=this._map.getZoom()&&(this.dScale=t.dScale)},_modifyPoint:function(t,e){this._calculateOffset(t,e),this.redraw()},_calculateOffset:function(t,e){if(t<this.symbolTexts.length){var i=this.symbolTexts[t].textPosition,o=this._map.latLngToLayerPoint(e),n=this.layer.getFeatureByUuid(this.associatedUuid);if(null===n||void 0===n)return;var s,a,l=n.getBounds();0===i?(s=L.latLng(l.getNorth(),l.getWest()),a=this._map.latLngToLayerPoint(s),this.symbolTexts[t].offsetX=a.x-o.x,this.symbolTexts[t].offsetY=a.y-o.y):1===i?(s=L.latLng(l.getSouth(),l.getWest()),a=this._map.latLngToLayerPoint(s),this.symbolTexts[t].offsetX=a.x-o.x,this.symbolTexts[t].offsetY=o.y-a.y):2===i?(s=L.latLng(l.getNorth(),l.getEast()),a=this._map.latLngToLayerPoint(s),this.symbolTexts[t].offsetX=o.x-a.x,this.symbolTexts[t].offsetY=a.y-o.y):3===i?(s=L.latLng(l.getSouth(),l.getEast()),a=this._map.latLngToLayerPoint(s),this.symbolTexts[t].offsetX=o.x-a.x,this.symbolTexts[t].offsetY=o.y-a.y):4===i?(s=L.latLng(l.getNorth(),(l.getWest()+l.getEast())/2),a=this._map.latLngToLayerPoint(s),this.symbolTexts[t].offsetX=o.x-a.x,this.symbolTexts[t].offsetY=a.y-o.y):5===i?(s=L.latLng(l.getSouth(),(l.getWest()+l.getEast())/2),a=this._map.latLngToLayerPoint(s),this.symbolTexts[t].offsetX=o.x-a.x,this.symbolTexts[t].offsetY=o.y-a.y):6===i?(s=L.latLng((l.getNorth()+l.getSouth())/2,l.getWest()),a=this._map.latLngToLayerPoint(s),this.symbolTexts[t].offsetX=a.x-o.x,this.symbolTexts[t].offsetY=o.y-a.y):7===i&&(s=L.latLng((l.getNorth()+l.getSouth())/2,l.getEast()),a=this._map.latLngToLayerPoint(s),this.symbolTexts[t].offsetX=o.x-a.x,this.symbolTexts[t].offsetY=o.y-a.y)}},_reView:function(){this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)},move:function(){},_parseSymbolData:function(){if(o.GraphicObject.prototype._parseSymbolData.call(this),this.symbolData){this.addFrame=this.symbolData.addFrame,this.symbolTexts=[];for(var t=0,e=this.symbolData.symbolTexts.length;t<e;t++){var i=new SuperMap.Plot.SymbolText;i.textContent=this.symbolData.symbolTexts[t].textContent,i.textPosition=this.symbolData.symbolTexts[t].textPosition,i.style=this.symbolData.symbolTexts[t].style,i.offsetX=this.symbolData.symbolTexts[t].offsetX,i.offsetY=this.symbolData.symbolTexts[t].offsetY,this.symbolTexts.push(i)}}},_setSymbolData:function(){o.GraphicObject.prototype._setSymbolData.call(this),this.symbolData&&(this.symbolData.symbolTexts=this.symbolTexts,this.symbolData.addFrame=this.addFrame)},setStyle:function(t){if(t.fontSize&&this.style.fontSize!==t.fontSize){SuperMap.Util.extend(this.style,t);for(var e=0,i=this.symbolTexts.length;e<i;e++)SuperMap.Util.copyAttributes(this.symbolTexts[e].style,t);this.redraw()}else{SuperMap.Util.extend(this.style,t);for(var o=0;o<this.symbolTexts.length;o++)SuperMap.Util.copyAttributes(this.symbolTexts[o].style,t);for(var n in this.components)delete t.labelAlign,SuperMap.Util.copyAttributes(this.components[n].options,t),this._copyStyleForCell(this.components[n].options,this.style,this.components[n]),this.components[n].setStyle(this.components[n].options)}}}),s=e.symbolText=function(t,e,i,o){return new n(t,e,i,o)};L.supermap.plotting.symbolText=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.symbolText1=e.SymbolText1=void 0;var o=i(2),n=e.SymbolText1=o.GraphicObject.extend({space:null,offsetX:null,offsetY:null,initialize:function(t,e,i,n){this.minEditPts=1,this.maxEditPts=1,this.libID=0,this.code=SuperMap.Plot.SymbolType.SYMBOLTEXT1,this.symbolType=SuperMap.Plot.SymbolType.SYMBOLTEXT1,this.symbolName="对象标注(带指示线)",null===this.space&&(this.space=10),null===this.offsetX&&(this.offsetX=60),null===this.offsetY&&(this.offsetY=30),o.GraphicObject.prototype.initialize.call(this,t,e,i,n)},destroy:function(){this.space=null,this.offsetX=null,this.offsetY=null,o.GraphicObject.prototype.destroy.call(this)},removeSymbolTextsFromDotSymbol:function(t){if(t&&"string"==typeof t){var e=this.layer.getFeatureByUuid(t);if(e)for(var i=0,o=e.geoSymbolTexts.length;i<o;i++)if(this===e.geoSymbolTexts[i]){e.geoSymbolTexts.splice(i,1);break}}},_calculateParts:function(){this.latLngs=[];var t=[],e=this.layer.getFeatureByUuid(this.associatedUuid);if(null!==e){for(var i=!1,o=0;o<e.geoSymbolTexts.length;o++)if(this===e.geoSymbolTexts[o]){i=!0;break}i||e.geoSymbolTexts.push(this),this._calculateSize(e);var n=e.latLngs[0],s=this._map.latLngToLayerPoint(n),a=new SuperMap.Pixel(s.x+this.offsetX,s.y+this.offsetY),l=this._map.layerPointToLatLng(a);0===this.latLngs.length?this.latLngs.push(l):(this.latLngs[0].lng=l.lng,this.latLngs[0].lat=l.lat);var r=L.Util.cloneLatLngs(this.latLngs[0]);r.push(n);var u={};u.style={surroundLineFlag:!1},u.style=SuperMap.Util.copyAttributes(u.style,this.style),u.positionPoints=r,u.type=24,t.push(u),SuperMap.Util.isArray(this.textContent)||(this.textContent=[this.textContent]);var p=this.textContent.length,h=this.style.fontSize*p+p+1,c=this._map.latLngToLayerPoint(L.latLng(this.latLngs[0].lat,this.latLngs[0].lng)),y=L.point(c.x,c.y-h/2),g=L.point(c.x,c.y+h/2),d=[this._map.layerPointToLatLng(y),this._map.layerPointToLatLng(g)],f={};f.positionPoints=d,f.style={surroundLineFlag:!1},f.style=SuperMap.Util.copyAttributes(f.style,this.style),f.type=24,t.push(f);var S=new SuperMap.Geometry.Point(this.latLngs[0].lng,this.latLngs[0].lat);if(0!==this.textContent.length){for(var P=e.getBounds(),m=new SuperMap.Geometry.Point((P.getWest()+P.getEast())/2,P.getNorth()),b=new SuperMap.Geometry.Point((P.getWest()+P.getEast())/2,P.getSouth()),M=SuperMap.Plot.PlottingUtil.pointIsRightToLine(m,b,S),v="",o=0;o<this.textContent.length;o++)v+=this.textContent[o],o!==this.textContent.length-1&&(v+="\r\n");var _=null;_=!0===M?L.point(c.x-this.space,c.y):L.point(c.x+this.space,c.y);var T={},x=this._map.layerPointToLatLng(_);T.positionPoints=x,T.type=34,T.textContent=v,T.style={},T.style=SuperMap.Util.copyAttributes(T.style,this.style),T.style.labelAlign=!0===M?"rm":"lm",t.push(T)}for(var O,o=0;o<t.length;o++)O=L.Util.isArray(t[o].positionPoints)?t[o].positionPoints:[t[o].positionPoints],this._createAndDrawLayer(t[o].type,O,t[o].style,t[o].textContent)}},_calculateSize:function(t){this.scaleByMap=t.scaleByMap,!1===this.scaleByMap?this.fromZoom=this._map.getZoom():this.fromZoom<=this._map.getZoom()&&(this.dScale=t.dScale),void 0!==this.prevOffsetX&&this.prevOffsetX!==this.offsetX&&(this.scaleBeforeOffsetX=this.offsetX/this.dScale,this.prevOffsetX=this.offsetX),!0===this.scaleByMap&&(void 0===this.scaleBeforeOffsetX&&(this.scaleBeforeOffsetX=this.offsetX),this.offsetX=this.scaleBeforeOffsetX*this.dScale,this.prevOffsetX=this.offsetX),void 0!==this.prevOffsetY&&this.prevOffsetY!==this.offsetY&&(this.scaleBeforeOffsetY=this.offsetY/this.dScale,this.prevOffsetY=this.offsetY),!0===this.scaleByMap&&(void 0===this.scaleBeforeOffsetY&&(this.scaleBeforeOffsetY=this.offsetY),this.offsetY=this.scaleBeforeOffsetY*this.dScale,this.prevOffsetY=this.offsetY),void 0!==this.prevStrokeWidth&&this.prevStrokeWidth!==this.style.weight&&(this.strokeWidth=this.style.weight,this.prevStrokeWidth=this.style.weight),!0===this.scaleByMap&&(void 0===this.weight&&(this.weight=this.style.weight),this.fromZoom<=this.map.getZoom()?this.style.weight=this.style.strokeWidth:this.style.weight=this.weight,this.prevStrokeWidth=this.style.weight),void 0!==this.prevFontSize&&this.prevFontSize!==this.style.fontSize&&(this.fontSize=this.style.fontSize/this.dScale,this.prevFontSize=this.style.fontSize),!0===this.scaleByMap&&(void 0===this.fontSize&&(this.fontSize=this.style.fontSize),this.style.fontSize=this.fontSize*this.dScale,this.prevFontSize=this.style.fontSize)},_reView:function(){this.fire(SuperMap.Plot.Event.reseteditmarkersvalues)},_modifyPoint:function(t,e){var i=this.layer.getFeatureByUuid(this.associatedUuid);if(null!==i){var o=this._map.latLngToLayerPoint(L.latLng(i.latLngs[0].lat,i.latLngs[0].lng)),n=this._map.latLngToLayerPoint(L.latLng(this.latLngs[0].lat,this.latLngs[0].lng));this.offsetX=n.x-o.x,this.offsetY=n.y-o.y,this.redraw()}},_parseSymbolData:function(){o.GraphicObject.prototype._parseSymbolData.call(this),this.symbolData&&(void 0!==this.symbolData.space&&(this.space=this.symbolData.space),void 0!==this.symbolData.offsetX&&(this.offsetX=this.symbolData.offsetX),void 0!==this.symbolData.offsetY&&(this.offsetY=this.symbolData.offsetY),void 0!==this.symbolData.scaleBeforeOffsetX&&(this.scaleBeforeOffsetX=this.symbolData.scaleBeforeOffsetX),void 0!==this.symbolData.scaleBeforeOffsetY&&(this.scaleBeforeOffsetY=this.symbolData.scaleBeforeOffsetY))},_setSymbolData:function(){o.GraphicObject.prototype._setSymbolData.call(this),this.symbolData&&(this.symbolData.space=this.space,this.symbolData.offsetX=this.offsetX,this.symbolData.offsetY=this.offsetY,void 0!==this.scaleBeforeOffsetX&&(this.symbolData.scaleBeforeOffsetX=this.scaleBeforeOffsetX),void 0!==this.scaleBeforeOffsetY&&(this.symbolData.scaleBeforeOffsetY=this.scaleBeforeOffsetY))}}),s=e.symbolText1=function(t,e,i,o){return new n(t,e,i,o)};L.supermap.plotting.symbolText1=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=e.EditMarker=L.Marker.extend({options:{nHandle:0,tag:0}});L.supermap.plotting.editMarker=function(t,e){return new o(t,e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dotSymbolStyle=e.DotSymbolStyle=void 0;var o=i(8),n=i(39),s=e.DotSymbolStyle=L.Class.extend({feature:null,options:{extent:0},initialize:function(t,e){this.feature=t,e=e||{},L.Util.setOptions(this,e),this.canvasEle=document.createElement("canvas"),this.canvasEle.width=0,this.canvasEle.height=0,this._ctx=this.canvasEle.getContext("2d")},render:function(){this._computeImageSize(),this.canvasEle.width=this.size[0],this.canvasEle.height=this.size[1],this._ctx.clearRect(0,0,this.canvasEle.width,this.canvasEle.height),this.canvas=this._ctx.canvas,this._drawFeatures()},getCacheInfo:function(){return{canvas:this.canvas,anchor:this.anchor,size:this.size}},_computeImageSize:function(){var t=this.feature.getBoundsWithText(),e=new L.Bounds;e.extend(this.feature._map.latLngToLayerPoint(t.getNorthEast())),e.extend(this.feature._map.latLngToLayerPoint(t.getNorthWest())),e.extend(this.feature._map.latLngToLayerPoint(t.getSouthEast())),e.extend(this.feature._map.latLngToLayerPoint(t.getSouthWest())),this.leftTopPixel=L.point(e.min.x,e.min.y);var i=e.getSize(),o=this.feature.style.weight;i.x+=o+this.options.extent,i.y+=o+this.options.extent,this.anchor=this._latlngToLayerPoint(this.feature.getLatLngs())[0],this.size=[i.x,i.y]},_latlngToLayerPoint:function(t){for(var e=[],i=0;i<t.length;i++){var o=this.feature._map.latLngToLayerPoint(t[i]);o.x=o.x-this.leftTopPixel.x+(this.feature.style.weight+this.options.extent)/2,o.y=o.y-this.leftTopPixel.y+(this.feature.style.weight+this.options.extent)/2,e.push(o)}return e},_drawFeatures:function(){this._ctx.translate(0,0);for(var t in this.feature.components){var e=this.feature.components[t];n.PointImage&&e instanceof n.PointImage?this._drawImage(e):o.Text&&e instanceof o.Text?this._drawText(e):L.Rectangle&&e instanceof L.Rectangle?this._drawRectangle(e):L.Polygon&&e instanceof L.Polygon?this._drawPolygon(e):L.Polyline&&e instanceof L.Polyline&&this._drawPolyline(e)}},_drawPolyline:function(t){var e=this._latlngToLayerPoint(t.getLatLngs()),i=t.options;this._ctx.beginPath(),this._ctx.globalAlpha=i.opacity;var o=this._addDashArray(t);0!==o.length&&this._ctx.setLineDash(o),this._ctx.moveTo(e[0].x,e[0].y);for(var n=1,s=e.length;n<s;n++)this._ctx.lineTo(e[n].x,e[n].y);i.fill&&(this._ctx.globalCompositeOperation=!0===Boolean(this.feature.surroundLineType)?"destination-over":"source-over"),this._ctx.globalAlpha=i.opacity,this._ctx.strokeStyle=i.color,this._ctx.lineWidth=i.weight,this._ctx.stroke()},_drawRectangle:function(t){var e=this._latlngToLayerPoint(t.getLatLngs()[0]),i=t.options;this._ctx.beginPath(),this._ctx.globalAlpha=!0===i.fill?i.fillOpacity:i.opacity;var o=this._addDashArray(t);0!==o.length&&this._ctx.setLineDash(o),i.fill&&(this._ctx.globalCompositeOperation=!0===Boolean(this.feature.surroundLineType)?"destination-over":"source-over",this._ctx.fillStyle=SuperMap.PlotUtil.colorRGBA(this.feature.style.fillColor,this.feature.style.fillOpacity),this._ctx.fill()),this._ctx.strokeStyle=i.color,this._ctx.lineWidth=i.weight,this._ctx.strokeRect(e[0].x,e[0].y,e[1].x-e[0].x,e[1].y-e[0].y)},_drawPolygon:function(t){var e=this._latlngToLayerPoint(t.getLatLngs()[0]),i=t.options;this._ctx.beginPath(),this._ctx.globalAlpha=!0===i.fill?i.fillOpacity:i.opacity,this._ctx.setLineDash(this._addDashArray(t)),this._ctx.moveTo(e[0].x,e[0].y);for(var o=1,n=e.length;o<n;o++){var s=e[o].x,a=e[o].y;this._ctx.lineTo(s,a)}this._ctx.closePath(),i.fill&&(this._ctx.globalCompositeOperation=!0===Boolean(this.feature.surroundLineType)?"destination-over":"source-over",i.fillLimit?this._ctx.fillStyle=SuperMap.PlotUtil.colorRGBA(i.color,i.opacity):this._ctx.fillStyle=i.fillColor,this._ctx.fill(i.fillRule||"evenodd")),this._ctx.strokeStyle=i.color,this._ctx.lineWidth=i.weight,this._ctx.stroke()},_drawText:function(t){var e=this._latlngToLayerPoint(t.getLatLngs())[0],i=t.options,o=(i=SuperMap.Util.extend({fontColor:"#000000",labelAlign:"cm"},i)).fontSize.toLocaleString()+"px",n=[i.fontStyle?i.fontStyle:"normal","normal",i.fontWeight?i.fontWeight:"normal",i.fontSize?o:"1em",i.fontFamily?i.fontFamily:"sans-serif"].join(" ");this._ctx.globalAlpha=i.fontOpacity,this._ctx.fillStyle=SuperMap.PlotUtil.colorRGBA(i.fontColor,i.fontOpacity),this._ctx.font=n,this._ctx.fillText&&(this._ctx.textAlign=L.Canvas.LABEL_ALIGN[i.labelAlign[0]]||"center"),this._ctx.textBaseline=L.Canvas.LABEL_ALIGN[i.labelAlign[1]]||"middle",this._ctx.fillText(i.text,e.x,e.y)},_drawImage:function(t){var e=this,i=function(){var t=this.style,i=t.graphicWidth||t.graphicHeight,o=t.graphicHeight||t.graphicWidth;i=i||2*t.pointRadius,o=o||2*t.pointRadius;var n=void 0!==t.graphicXOffset?t.graphicXOffset:-.5*i,s=void 0!==t.graphicYOffset?t.graphicYOffset:-.5*o,a=t.graphicOpacity||t.fillOpacity,l=this.point,r=l.x,u=l.y;if(!isNaN(r)&&!isNaN(u)){e._ctx.save();var p;t.rotation&&(p=t.rotation/180*Math.PI),e._ctx.translate(r,u),p&&e._ctx.rotate(p),e._ctx.translate(n,s),e._ctx.globalAlpha=a;var h=L.Canvas.drawImageScaleFactor||(L.Canvas.drawImageScaleFactor=/android 2.1/.test(navigator.userAgent.toLowerCase())?320/window.screen.width:1);e._ctx.drawImage(this.img,0,0,i*h,o*h),e._ctx.restore()}},o=this._latlngToLayerPoint(t.getLatLngs())[0],n=t.options,s=new Image;s.src=n.externalGraphic,n.graphicTitle&&(s.title=n.graphicTitle),s.onload=function(){i.call({point:o,style:n,img:s}),s.onload=null},window.ActiveXObject||"ActiveXObject"in window?s.onload():s.complete&&s.onload()},_addDashArray:function(t){if(null===t||null===t.options.dashArray||void 0===t.options.dashArray||0===t.options.dashArray.length)return[0,0];var e=[];return t.options.dashArray.split(",").map(function(t,i,o){e.push(parseFloat(o[i]))}),e}}),a=e.dotSymbolStyle=function(t){return new s(t)};L.supermap.plotting.dotSymbolStyle=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PlottingGraphic=L.Class.extend({options:{graphicWidth:0,graphicHeight:0},initialize:function(t){t=t||{},this._latlng=t._latlng,this._image=t._image,this._uuid=t._uuid},setLatLng:function(t){this._latlng=t},setImage:function(t){this._image=t},setUuid:function(t){this._uuid=t},getLatLng:function(){return this._latlng},getImage:function(){return this._image},getUuid:function(){return this._uuid},updateImage:function(){this.layer.updateGraphics(this)}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.animationLayer=e.AnimationLayer=void 0;var o=i(10),n=e.AnimationLayer=o.PlottingLayerBase.extend({addFeatures:function(t){SuperMap.Util.isArray(t)||(t=[t]),o.PlottingLayerBase.prototype.addFeatures.call(this,t)}}),s=e.animationLayer=function(t,e){return new n(t,e)};L.supermap.plotting.animationLayer=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GraphicEditLayer=void 0;var o=i(9);e.GraphicEditLayer=o.PlottingLayer.extend({})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.goAnimationManager=e.GOAnimationManager=void 0;var o=i(111),n=i(112),s=i(113),a=i(114),l=i(115),r=i(116),u=i(117),p=i(1),h=(i(5),e.GOAnimationManager=L.Evented.extend({serverUrl:null,goAnimations:null,map:null,goAnimationLayer:null,initialize:function(t,e){null===this.goAnimations&&(this.goAnimations=[]),t&&null!==t&&null===this.map&&this.setMap(t),e&&null===this.serverUrl&&(h.prototype.serverUrl=e)},destroy:function(){h.prototype.goAnimations=null,h.prototype.map.removeLayer(this.goAnimationLayer),this.goAnimationLayer.destroy(),h.prototype.goAnimationLayer=null,h.prototype.map=null,h.prototype.serverUrl=null},setMap:function(t){if(null===t)return!1;h.prototype.map=t;var e={displayInLayerSwitcher:!1};null===this.goAnimationLayer&&(h.prototype.goAnimationLayer=L.supermap.plotting.animationLayer("animation",e)),this.map.addLayer(this.goAnimationLayer)},createGOAnimation:function(t,e,i){var o=this.createGOAnimationByType(t,e);if(null===o)return null;var n;if(i._eventParents)for(var s in i._eventParents)n=i._eventParents[s];return i instanceof L.supermap.plotting.Route||n instanceof L.supermap.plotting.Route?null:o.setGOFeature(i)?(this.goAnimations.push(o),o):null},findGOAnimationByName:function(t){if(null===this.goAnimations||null===t||""===t)return null;for(var e=null,i=0;i<this.goAnimations.length;i++)if(this.goAnimations[i].name===t){e=this.goAnimations[i];break}return e},findGOAnimationsByFeature:function(t){var e=[];if(null===this.goAnimations||"undefined"===t||null===t)return e;for(var i=0;i<this.goAnimations.length;i++)this.goAnimations[i].getGOFeature()===t&&e.push(this.goAnimations[i]);return e},findGOAnimationsByUuid:function(t){var e=[];if(null===this.goAnimations||"undefined"===t||null===t)return e;var i=this.map.getFeatureByUuid(t);return this.findGOAnimationsByFeature(i)},removeGOAnimationByName:function(t){if(null===this.goAnimations||null===t||""===t)return!1;var e=this.findGOAnimationByName(t);return this.removeGOAnimation(e)},removeGOAnimation:function(t){if(null===this.goAnimations||null===t)return!1;for(var e=0;e<this.goAnimations.length;e++)if(this.goAnimations[e]===t){t.reset(),this.goAnimations.splice(e,1),t.destroy();break}return!0},removeAllGOAnimation:function(){if(null!==this.goAnimations){for(var t=0;t<this.goAnimations.length;t++)this.removeGOAnimation(this.goAnimations[t]);this.goAnimations=[]}},execute:function(){if(0===this.goAnimations.length)return!1;for(t=0;t<this.goAnimations.length;t++)this.goAnimations[t].execute();if(this.hasGrowAnimation())for(var t=0;t<this.goAnimations.length;t++)this.redrawFeature(this.goAnimations[t].animationGOFeature);return 0!==this.goAnimations.length||void 0},hasGrowAnimation:function(){if(null===this.goAnimations)return!1;for(var t=0;t<this.goAnimations.length;t++)if(!0===this.goAnimations[t].animationGOFeature.grow&&this.goAnimations[t].canExecute())return!0},redrawFeature:function(t){if(!(t.grow&&t instanceof p.AlgoSymbol))return!0;var e=new SuperMap.GetSymbolInfoParameters;e.libID=t.libID,e.code=t.code,e.surroundLineType=t.surroundLineType,e.inputPoints=L.Util.latLngsToSuperMapPoints(t.getLatLngs()),e.subSymbols=t.subSymbols,e.scaleValues=t.scaleValues,L.supermap.symbolInfoService(t.serverUrl).getSymbolInfo(e,function(e){t.symbolData.innerCells=e.result.innerCells,t.redraw()},this)},play:function(){if(0!==this.goAnimations.length)for(var t=0;t<this.goAnimations.length;t++)this.goAnimations[t].play()},stop:function(){if(0!==this.goAnimations.length)for(var t=0;t<this.goAnimations.length;t++)this.goAnimations[t].stop()},pause:function(){if(0!==this.goAnimations.length)for(var t=0;t<this.goAnimations.length;t++)this.goAnimations[t].pause()},reset:function(){if(0!==this.goAnimations.length)for(var t=0;t<this.goAnimations.length;t++)this.goAnimations[t].reset()},createGOAnimationByType:function(t,e){if(null===e||""===e||null===this.goAnimationLayer)return null;if(null!==this.findGOAnimationByName(e))return null;var i=null;switch(t){case SuperMap.Plot.GOAnimationType.ANIMATION_WAY:i=new u.GOAnimationWay;break;case SuperMap.Plot.GOAnimationType.ANIMATION_BLINK:i=new n.GOAnimationBlink;break;case SuperMap.Plot.GOAnimationType.ANIMATION_ATTRIBUTE:i=new o.GOAnimationAttribute;break;case SuperMap.Plot.GOAnimationType.ANIMATION_SHOW:i=new r.GOAnimationShow;break;case SuperMap.Plot.GOAnimationType.ANIMATION_ROTATE:i=new a.GOAnimationRotate;break;case SuperMap.Plot.GOAnimationType.ANIMATION_SCALE:i=new l.GOAnimationScale;break;case SuperMap.Plot.GOAnimationType.ANIMATION_GROW:i=new s.GOAnimationGrow;break;default:return null}return null!==i&&(i.name=e),i},getJSONData:function(){var t={};t.animations=[];for(var e=0;e<this.goAnimations.length;e++)t.animations.push(this.goAnimations[e].getJSONData());return t},fromJSONData:function(t){for(var e=0;e<t.animations.length;e++){var i=t.animations[e],o=i.goFeatureUuid,n=this.map.getFeatureByUuid(o),s=i.name,a=i.type;if(n&&s&&-1!==a){var l=this.createGOAnimation(a,s,n);null!==l&&l.fromJSONData(i)}}},saveEvoFile:function(t,e){},openEvoFileOnServer:function(t){}})),c=e.goAnimationManager=function(t,e,i){return new h(t,e,i)};L.supermap.plotting.goAnimationManager=c},function(t,e,i){i(11),i(45),i(43),i(47),i(44),i(42),i(46),i(40),i(49),i(48),i(12),i(23),i(50),i(51),i(41),i(22),i(21),i(20),i(64),i(59),i(60),i(26),i(27),i(25),i(52),i(24),i(53),i(54),i(55),i(62),i(63),i(61),i(56),i(58),i(9),t.exports=i(57)}]);

/***/ }),
/* 4 */
/***/ (function(module, exports) {

/*!
 * 
 *     iclient9-plot-wjalgosymbol.(http://iclient.supermapol.com)
 *     Copyright© 2000-2017 SuperMap Software Co. Ltd
 *     license: undefined
 *     version: v9.1.0
 * 
 */
!function(t){function e(o){if(l[o])return l[o].exports;var n=l[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var l={};e.m=t,e.c=l,e.i=function(t){return t},e.d=function(t,l,o){e.o(t,l)||Object.defineProperty(t,l,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var l=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(l,"a",l),l},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=205)}([function(t,e,l){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),r=(o(l(29)),o(l(30)),function(){function t(e){n(this,t),this.RTOD=57.29577951308232,this.DTOR=.017453292519943295,this.maxEditPts=0,this.minEditPts=0,this.libID=null,this.code=null,this.symbolType=null,this.symbolName=null,this.isEdit=!1,this.controlPoints=null,this.scalePoints=null,this.scaleValues=null,this.subSymbols=null,this.style=null,this.subSymbolDefaultPixelSize=30,this.map=null,this.graphicObject2D=null,this.components=[],e=e||{},this.controlPoints=[],this.scalePoints=[],this.scaleValues=[],this.subSymbols=[],this.components=[],this.textContent="",this.style=null,SuperMap.Util.extend(this,e),0===this.libID&&null===this.symbolType?this.symbolType=this.code:null===this.symbolType&&(this.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL),null===this.subSymbolScaleValue&&(this.subSymbolScaleValue=.1),0!==this.minEditPts&&0!==this.maxEditPts||this.setMinAndMaxEditPts()}return i(t,[{key:"getScaleValues",value:function(){return this.graphicObject2D?this.graphicObject2D.scaleValues:this.scaleValues}},{key:"setScaleValues",value:function(t){this.graphicObject2D?this.graphicObject2D.scaleValues=t:this.scaleValues=t}},{key:"clearScaleValues",value:function(){this.graphicObject2D?this.graphicObject2D.scaleValues=[]:this.scaleValues=[]}},{key:"getSubSymbols",value:function(){return this.graphicObject2D?this.graphicObject2D.subSymbols:this.subSymbols}},{key:"setSubSymbols",value:function(t){this.graphicObject2D?this.graphicObject2D.subSymbols=t:this.subSymbols=t}},{key:"getControlPoints",value:function(){if(this.graphicObject2D&&!this.equalControlPoints()){this.controlPoints=[];for(var t=0;t<this.graphicObject2D.getLatLngs().length;t++)this.controlPoints.push(new SuperMap.Geometry.Point(this.graphicObject2D.getLatLngs()[t].lng,this.graphicObject2D.getLatLngs()[t].lat))}return this.controlPoints}},{key:"setControlPoints",value:function(t){if(this.graphicObject2D){for(var e=[],l=0;l<t.length;l++)e.push(L.latLng(t[l].y,t[l].x));this.graphicObject2D._latLngs=e}else this.controlPoints=t}},{key:"clearControlPoints",value:function(){this.graphicObject2D?this.graphicObject2D._latLngs=[]:this.controlPoints=[]}},{key:"addControlPoints",value:function(t,e){this.graphicObject2D?e<this.graphicObject2D.getLatLngs().length?(this.graphicObject2D._latLngs[e].lat=t.y,this.graphicObject2D._latLngs[e].lng=t.x):this.graphicObject2D._latLngs.push(L.latLng(t.y,t.x)):e<this.controlPoints.length?(this.controlPoints[e].y=t.y,this.controlPoints[e].x=t.x):this.controlPoints.push(t)}},{key:"equalControlPoints",value:function(){if(this.graphicObject2D){if(this.graphicObject2D.getLatLngs().length!==this.controlPoints.length)return!1;for(var t=0;t<this.controlPoints.length;t++)if(this.graphicObject2D.getLatLngs()[t].lat!==this.controlPoints[t].y||this.graphicObject2D.getLatLngs()[t].lng!==this.controlPoints[t].x)return!1;return!0}return!0}},{key:"getIsEdit",value:function(){return this.graphicObject2D?this.graphicObject2D.isEdit:this.isEdit}},{key:"getStyle",value:function(){return this.graphicObject2D?this.graphicObject2D.style:this.style}},{key:"addScalePoint",value:function(t,e){if(t&&null!==t){void 0!==e&&null!==e||(e=this.getScalePoints().length<0?0:this.getScalePoints().length);var l=new SuperMap.Geometry.Point(t.x,t.y);l.isScalePoint=!0,l.tag=e,this.graphicObject2D?this.graphicObject2D.scalePoints.push(l):this.scalePoints.push(l)}}},{key:"clearScalePoints",value:function(){this.graphicObject2D?this.graphicObject2D.scalePoints=[]:this.scalePoints=[]}},{key:"getScalePoints",value:function(){return this.graphicObject2D?this.graphicObject2D.scalePoints:this.scalePoints}},{key:"setScalePoints",value:function(t){return this.graphicObject2D?this.graphicObject2D.scalePoints=t:this.scalePoints=t}}]),i(t,[{key:"destroy",value:function(){this.minEditPts=null,this.maxEditPts=null,this.controlPoints.length=0,this.controlPoints=null,this.scalePoints.length=0,this.scalePoints=null,this.scaleValues.length=0,this.scaleValues=null,this.subSymbols.length=0,this.subSymbols=null,this.subSymbolSize=0,this.map=null,this.symbolType=null,this.symbolName=null,this.textContent=null,this.components=[],this.radius=null,this.islocationCircle=!1,this.tipPoint=null,this.roundBox=null,this.textBoxType=null,this.style=null}},{key:"clearComponents",value:function(){if(this.components=[],this.clearScalePoints(),this.maxEditPts<this.controlPoints.length&&this.symbolType!==SuperMap.Plot.SymbolType.ELLIPSESYMBOL){var t=this.controlPoints.shift(),e=this.controlPoints.pop();this.controlPoints=[],this.controlPoints.push(t,e)}}},{key:"calculateParts",value:function(){if(this.clearComponents(),this.controlPoints=SuperMap.Plot.PlottingUtil.clearSamePts(this.controlPoints),this.controlPoints.length>=this.minEditPts){var t={textContent:this.textContent,type:this.symbolType,surroundLineFlag:!1,positionPoints:this.controlPoints,style:{}};if(t.type===SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL&&t.positionPoints.push(t.positionPoints[0]),this.symbolType===SuperMap.Plot.SymbolType.PARALLELLINE){if(this.controlPoints&&this.controlPoints.length>=3){var e=!1;void 0!==this.controlPoints[0].z&&(e=!0);var l=SuperMap.Plot.PlottingUtil.distance(this.controlPoints[0],this.controlPoints[1]);SuperMap.Plot.PlottingUtil.isRight(this.controlPoints[0],this.controlPoints[1],this.controlPoints[2])&&(l=-l);for(var o=[],n=1;n<this.controlPoints.length;n++)o.push(this.controlPoints[n].clone());var i=SuperMap.Plot.PlottingUtil.parallel(o,l);if(this.controlPoints[0].x=i[0].x,this.controlPoints[0].y=i[0].y,e)for(var r=0;r<o.length;r++)i[r].z=o[r].z;this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,o),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i)}}else this.components.push(t)}else this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine()}},{key:"setMinAndMaxEditPts",value:function(){if(0===this.libID)switch(this.code){case SuperMap.Plot.SymbolType.TEXTSYMBOL:this.minEditPts=1,this.maxEditPts=1;break;case SuperMap.Plot.SymbolType.CIRCLESYMBOL:case SuperMap.Plot.SymbolType.RECTANGLESYMBOL:this.minEditPts=2,this.maxEditPts=2;break;case SuperMap.Plot.SymbolType.ARCSYMBOL:case SuperMap.Plot.SymbolType.CHORDSYMBOL:case SuperMap.Plot.SymbolType.PIESYMBOL:case SuperMap.Plot.SymbolType.ELLIPSESYMBOL:case SuperMap.Plot.SymbolType.PARALLELOGRAM:this.minEditPts=3,this.maxEditPts=3;break;case SuperMap.Plot.SymbolType.POLYLINESYMBOL:case SuperMap.Plot.SymbolType.POLYBEZIERSYMBOL:this.minEditPts=2,this.maxEditPts=9999;break;case SuperMap.Plot.SymbolType.PARALLELLINE:case SuperMap.Plot.SymbolType.POLYBEZIERCLOSESYMBOL:case SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL:this.minEditPts=3,this.maxEditPts=9999;break;case SuperMap.Plot.SymbolType.KIDNEY:this.minEditPts=2,this.maxEditPts=3}}},{key:"addCell",value:function(t,e,l,o){if(t&&e){var n={};n.type=t,n.textContent=o,n.positionPoints=e,n.style=l&&null!==l?l:{surroundLineFlag:!1},this.components.push(n)}}},{key:"getDefaultSubSymbolSize",value:function(){var t=this.getLonLatDistanceFromPixel(this.subSymbolDefaultPixelSize);if(0===t){if(0!==this.subSymbolSize)return this.subSymbolSize;for(var e=0,l=0;l<this.controlPoints.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(this.controlPoints[l],this.controlPoints[l+1]);t=.3*e}return t}},{key:"getLonLatDistanceFromPixel",value:function(t){if(null===this.map)return 0;var e,l;if(L.Map&&this.map instanceof L.Map){var o=this.map.layerPointToLatLng(L.point(0,0)),n=this.map.layerPointToLatLng(L.point(t,0));e=new SuperMap.Geometry.Point(o.lng,o.lat),l=new SuperMap.Geometry.Point(n.lng,n.lat)}return SuperMap.Plot.PlottingUtil.distance(e,l)}},{key:"getTextBounds",value:function(t,e){" "===e&&(e="_");var l=document.createElement("span");document.body.appendChild(l),l.style.width="auto",l.style.height="auto",t.fontSize&&(l.style.fontSize=new String(t.fontSize)+"px"),t.fontFamily&&(l.style.fontFamily=t.fontFamily),t.fontWeight&&(l.style.fontWeight=t.fontWeight),l.style.position="absolute",l.style.visibility="hidden",l.innerHTML=e;var o=new SuperMap.Bounds(l.clientLeft,l.clientTop+l.clientHeight-6,l.clientLeft+l.clientWidth,l.clientTop+4),n=new SuperMap.Bounds(0,0,0,0);if(L.Map&&this.map instanceof L.Map){var i=this.map.layerPointToLatLng(L.point(o.left,o.top)),r=this.map.layerPointToLatLng(L.point(o.right,o.bottom));n.left+=i.lng,n.top+=r.lat,n.right+=r.lng,n.bottom+=i.lat,n.add(-i.lng,-i.lat)}return document.body.removeChild(l),n}},{key:"getCircleLonLat",value:function(t,e){if(null===this.map)return L.latLng(0,0);if(L.Map&&this.map instanceof L.Map){var l=this.map.latLngToLayerPoint(L.latLng(t.y,t.x));return l.x+=e,this.map.layerPointToLatLng(L.point(l.x,l.y)).lng-t.x}}},{key:"freeCurveBoundsPixelToLatLng",value:function(t){if(null===this.map)return L.latLng(0,0);if(L.Map&&this.map instanceof L.Map){var e=this.map.layerPointToLatLng(L.point(t.left,t.top)),l=this.map.layerPointToLatLng(L.point(t.right,t.bottom));return new SuperMap.Bounds(e.lng,l.lat,l.lng,e.lat)}}},{key:"calAssistantLine",value:function(){var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);this.symbolType===SuperMap.Plot.SymbolType.ANNOFRAMESYMBOL&&(t.splice(1,0,new SuperMap.Plot.Point(this.controlPoints[1].x,this.controlPoints[0].y)),t.push(new SuperMap.Plot.Point(this.controlPoints[0].x,this.controlPoints[1].y)),t.push(new SuperMap.Plot.Point(this.controlPoints[0].x,this.controlPoints[0].y)));var e={type:24,surroundLineFlag:!1,positionPoints:t,style:{color:"#0000ff",opacity:1,weight:1,dashArray:"5, 5",strokeColor:"#0000ff",strokeOpacity:1,strokeWidth:2,strokeDashstyle:"dash",lineColorLimit:!0,lineTypeLimit:!0,lineWidthLimit:!0,surroundLineFlag:!1}};this.components.push(e)}},{key:"getSubSymbolScaleValue",value:function(t){void 0===t&&(t=.3);var e=this.getControlPoints();if(!this.getIsEdit()||this.constantSize){for(var l=0,o=0;o<e.length-1;o++)l+=SuperMap.Plot.PlottingUtil.distance(e[o],e[o+1]);var n=this.getDefaultSubSymbolSize();this.subSymbolScaleValue=n/l,this.constantSize||(this.subSymbolScaleValue>t||this.subSymbolScaleValue<=0)&&(this.subSymbolScaleValue=t),this.subSymbolScaleValue<=0&&(this.subSymbolScaleValue=t)}return this.subSymbolScaleValue}},{key:"modifyPoint",value:function(t,e){if(this.controlPoints=this.getControlPoints(),0===this.libID&&31===this.code){if(0===t)return this.controlPoints[0].x=(this.controlPoints[1].x+this.controlPoints[3].x)/2,void(this.controlPoints[0].y=(this.controlPoints[1].y+this.controlPoints[3].y)/2);var l=-1;0===(l=(t+2)%4)&&(l=4);var o=SuperMap.Plot.PlottingUtil.distance(this.controlPoints[0],this.controlPoints[t]),n=SuperMap.Plot.PlottingUtil.findPointInLine(this.controlPoints[0],this.controlPoints[l],o),i=new SuperMap.Geometry.Point(2*this.controlPoints[0].x-n.x,2*this.controlPoints[0].y-n.y);if(L.Map&&this.map instanceof L.Map)var r=this.map.latLngToLayerPoint(L.latLng(n.y,n.x)),a=this.map.latLngToLayerPoint(L.latLng(i.y,i.x));var p=!1;(SuperMap.Plot.PlottingUtil.equalFuzzy(r.x-a.x,0)||SuperMap.Plot.PlottingUtil.equalFuzzy(r.y-a.y,0))&&(p=!0),p?(this.addControlPoints(i,l),this.addControlPoints(n,t)):(this.addControlPoints(i,t),this.addControlPoints(n,l))}this.calculateParts()}},{key:"computeSubSymbol",value:function(t,e,l,o,n,i){if(null===t.symbolData||null===t.symbolData.innerCells)return null;void 0===n&&(n=0),void 0===i&&(i=0);for(var r=SuperMap.Plot.AnalysisSymbol.analysisSymbolCells(t.symbolData),a=0,p=0,u=0,s=0,P=0;P<r.length;P++){var c=SuperMap.Plot.Primitives.getSpatialData(r[P].type,r[P].positionPoints,r[P].textContent,0,r[P].isCalculate);for(b=0,d=c.length;b<d;b++)a<c[b].x&&(a=c[b].x),p<c[b].y&&(p=c[b].y),u>c[b].x&&(u=c[b].x),s>c[b].y&&(s=c[b].y)}var S=new SuperMap.Geometry.Point(a,p),y=new SuperMap.Geometry.Point(u,s),h=(S.y-y.y)/l,f=(S.x-y.x)/l,g=f>h?f:h,M=new SuperMap.Geometry.Point(.5*(S.x+y.x),.5*(S.y+y.y));M.x+=n*(S.x-y.x),M.y+=i*(S.y-y.y);for(var b=0,d=r.length;b<d;b++){for(var m=0,v=r[b].positionPoints.length;m<v;m++)r[b].positionPoints[m].x-=M.x,r[b].positionPoints[m].y-=M.y,r[b].positionPoints[m].x/=g,r[b].positionPoints[m].y/=g,SuperMap.Plot.PlottingUtil.rotateAngle(new SuperMap.Geometry.Point(0,0),o*Math.PI/180,r[b].positionPoints[m]),r[b].positionPoints[m].x+=e.x,r[b].positionPoints[m].y+=e.y;r[b].type===SuperMap.Plot.SymbolType.TEXTSYMBOL&&(r[b].style.fontSize=Math.ceil(r[b].style.fontSize/2)),c.style=r[b].style,r[b].isCalculate=!1,this.components.push(r[b])}return r}},{key:"addArrow",value:function(t){if(t.length<2)return t;var e=0,l=SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints)*(e=(this.getIsEdit(),.5*this.getSubSymbolScaleValue())),o=t[t.length-1];if(t.length>2){for(var n=-1,i=t.length-2;i>=0;i--)if(l<SuperMap.Plot.PlottingUtil.distance(o,t[i])){n=i;break}t.splice(n+1,t.length-n),t.push(o)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var r=t[t.length-2],a=t[t.length-1],p=l;if(void 0===r)return t;if(!(SuperMap.Plot.PlottingUtil.distance(r,a)<l)){var u=SuperMap.Plot.PlottingUtil.radian(r,a)*this.RTOD,s=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,u+157.5),P=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,u+202.5),c={surroundLineFlag:!1,fillLimit:!0,fillColor:this.getStyle().color,lineTypeLimit:!0,fill:!0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[s,t[t.length-1],P],c,!0)}}},{key:"calculateforHead",value:function(t,e,l,o){for(var n=0,i=0;i<t.length-1;i++)n+=SuperMap.Plot.PlottingUtil.distance(t[i],t[i+1]);for(var r=n*o,a=SuperMap.Plot.PlottingUtil.clonePoints(e.arrowBodyPts);SuperMap.Plot.PlottingUtil.distance(l[0],l[1])<r&&!(a.length<3);){if(!(SuperMap.Plot.PlottingUtil.distance(l[0],a[a.length-3])<r)){var p=SuperMap.Plot.PlottingUtil.projectPoint(l[0],a[a.length-2],a[a.length-3]),u=SuperMap.Plot.PlottingUtil.distance(l[0],p),s=SuperMap.Plot.PlottingUtil.findPointInLine(p,a[a.length-3],Math.sqrt(r*r-u*u));a.splice(a.length-2,1,s),l.splice(1,1,s);break}l.splice(1,1),a.splice(a.length-2,1),l.push(a[a.length-2])}return a}},{key:"ComputeZValue",value:function(t,e,l){var o=SuperMap.Plot.PlottingUtil.pointProjectToSegment(t,e,l),n=new SuperMap.Geometry.Point(o.projectPoint.x,o.projectPoint.y),i=SuperMap.Plot.PlottingUtil.distance(e,l),r=SuperMap.Plot.PlottingUtil.distance(e,t),a=SuperMap.Plot.PlottingUtil.distance(l,t);if(!o.isOnline){if(r>=i)return l.z;if(a>=i)return e.z}return n.x!=e.x&&e.x!=l.x?e.z+(n.x-e.x)/(e.x-l.x)*(e.z-l.z):n.y!=e.y&&e.y!=l.y?e.z+(n.y-e.y)/(e.y-l.y)*(e.z-l.z):0==(r=SuperMap.Plot.PlottingUtil.distance(e,n))?e.z:e.z-(e.z-l.z)*(r/i)}},{key:"ComputeBeizerZValueByDis",value:function(t,e,l){if(t.length<2)return!1;for(var o=[],n=0;n<t.length;n++)o.push({x:t[n].x,y:t[n].y});var i=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(0==i)return!1;var r=SuperMap.Plot.PlottingUtil.polylineDistance(e),a=[];a.push(o[0]);for(var p=-1,u=0,s=e[0],n=1;n<o.length;n++){a.push(o[n]);var P=SuperMap.Plot.PlottingUtil.polylineDistance(a)/i,c=r*P,S=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(c,e),y=S.index,h=S.pts;if(S.bfind){for(var f=t[n-1].z,g=t[n].z,M=r*(P-u),b=0,d=++p;d<=y;d++){var m=f+(g-f)*((b+=d==p?SuperMap.Plot.PlottingUtil.distance(s,e[d]):SuperMap.Plot.PlottingUtil.distance(e[d-1],e[d]))/M);l.push({x:e[d].x,y:e[d].y,z:m})}p=y}u=P,s=h}for(n=p+1;n<e.length;n++)l.push({x:e[n].x,y:e[n].y,z:t[t.length-1].z});return!0}},{key:"ComputeHeight",value:function(t,e,l,o){if(l!=o)if(0==t.length);else if(1==t.length)e.push({x:t[0].x,y:t[0].y,z:l});else if(2==t.length)e.push({x:t[0].x,y:t[0].y,z:l}),e.push({x:t[1].x,y:t[1].y,z:o});else{var n=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(0!=n){var i=[];i.push(t[0]),e.push({x:t[0].x,y:t[0].y,z:l});for(a=1;a<t.length-1;a++){i.push(t[a]);var r=l+(o-l)*SuperMap.Plot.PlottingUtil.polylineDistance(i)/n;e.push({x:t[a].x,y:t[a].y,z:r})}e.push({x:t[t.length-1].x,y:t[t.length-1].y,z:o})}else for(a=0;a<t.length;a++)e.push({x:t[a].x,y:t[a].y,z:l})}else for(var a=0;a<t.length;a++)e.push({x:t[a].x,y:t[a].y,z:l})}}]),t}());e.default=r,SuperMap.Geometry.AlgoSymbol=r},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30020",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.1)),l.subText="水",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine(),!(this.controlPoints.length<3)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2],r=e*i,a=new SuperMap.Geometry.Point(l.x+e*o,l.y+e*n),p=new SuperMap.Geometry.Point(a.x+1,a.y),u=[];t.push(t[0].clone());for(var s=0;s<t.length-1;s++){var P=SuperMap.Plot.PlottingUtil.intersectLines(a,p,t[s],t[s+1]);P.isIntersectLines&&(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(P.intersectPoint,t[s],t[s+1])&&u.push(P.intersectPoint))}if(!(0>=u.length)){var c=u[0].clone(),S=u[0].clone();for(s=0;s<u.length;s++)c.x>u[s].x&&(c=u[s].clone()),S.x<u[s].x&&(S=u[s].clone());var y=[],h=new SuperMap.Geometry.Point(a.x-r/2,c.y);h.x<=S.x&&h.x>=c.x&&((y=[]).push(c),y.push(h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y));var f=new SuperMap.Geometry.Point(a.x+r/2,S.y);f.x<=S.x&&f.x>=c.x&&((y=[]).push(S),y.push(f),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y)),""===this.textContent&&(this.textContent=this.subText);var g=SuperMap.Plot.PlottingUtil.radian(h,f)*this.RTOD,M={fontSize:20*i*10,fontSizeLimit:!0};M.labelAlign="cm",M.labelRotation=-g,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[a],M,this.textContent),this.addScalePoint(a,0);var b=SuperMap.Plot.PlottingUtil.circlePoint(a,r/2,r/2,90);this.addScalePoint(b,1)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o,n,i=SuperMap.Plot.PlottingUtil.polylineDistance(l),r=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l),a=e;if(0===t&&(SuperMap.Plot.PlottingUtil.ptIsInPolygon(l,a)?(o=(a.x-r.x)/i,this.getScaleValues()[0]=o,n=(a.y-r.y)/i,this.getScaleValues()[1]=n):((o=(a.x-r.x)/i)<=0&&(this.getScaleValues()[0]=0),(n=(a.y-r.y)/i)<=0&&(this.getScaleValues()[1]=0))),1===t){o=this.getScaleValues()[0],n=this.getScaleValues()[1];var p=new SuperMap.Geometry.Point(r.x+o*i,r.y+n*i),u=2*SuperMap.Plot.PlottingUtil.distance(a,p)/i;this.getScaleValues()[2]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30020=p},function(t,e,l){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),p=o(l(0)),u=(o(l(13)),function(t){function e(t){n(this,e);var l=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.MAX_ARRAY_SIZE=128,l.sv1_DefaultAtLenDivAbLen=0,l.sv2_DefaultAjWidthDivAtLen=.148,l.sv3_DefaultAeWidthDivAtLen=.4,l.sv4_DefaultAeLenDivAtLen=.312,l.sv_AtScaleParameter=1.5,l.sv_AtLenDivAtWidth=1.35,l.sv_AtWidthDivAwWidth=.5,l.sv_defaultAwLenDivAbLen=.15,l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1004",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.symbolName||(l.symbolName="贝塞尔尖耳箭头"),l.minEditPts=3,l.maxEditPts=512,l.clearScalePoints(),0===l.getScaleValues().length&&(l.getScaleValues().push(l.sv1_DefaultAtLenDivAbLen),l.getScaleValues().push(l.sv2_DefaultAjWidthDivAtLen),l.getScaleValues().push(l.sv3_DefaultAeWidthDivAtLen),l.getScaleValues().push(l.sv4_DefaultAeLenDivAtLen)),l}return r(e,p["default"]),a(e,[{key:"calculateParts",value:function(){this.clearComponents(),this.applyUse()}},{key:"applyUse",value:function(){var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length>=2&&t.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){var e=this.arrowMeshs(t);SuperMap.Plot.PlottingUtil.clearSamePts(e.shapePts);var l=SuperMap.Plot.PlottingUtil.clonePoints(t),o=l.length,n=!1;if(void 0!==l[0].z&&(n=!0),n){for(var i=e.leftBodyPts,r=e.rightBodyPts,a=e.arrowHeadPts,p=e.shapePts,u=[],s=0;s<p.length;s++)u.push({x:p[s].x,y:p[s].y,z:0});if(0==p.length)return!1;U=this.updateScalePoints(t);if(this.clearScalePoints(),3!=U.length)U=[];else for(s=0;s<U.length;s++)U[s].isScalePoint=!0,U[s].tag=s,this.addScalePoint(U[s]);var P=[],c={x:(l[0].x+l[1].x)/2,y:(l[0].y+l[1].y)/2},S={x:(i[i.length-1].x+r[0].x)/2,y:(i[i.length-1].y+r[0].y)/2},y=this.ComputeZValue(S,l[o-1],l[o-2]),h=0,f=0;i[0].x==l[0].x&&i[0].y==l[0].y?(h=l[0].z,f=l[1].z):(h=l[1].z,f=l[0].z),P.push({x:c.x,y:c.y,z:h});for(s=2;s<o-1;s++)P.push(l[s]);P.push({x:S.x,y:S.y,z:y});var g=[];this.ComputeBeizerZValueByDis(P,i,g),(P=[]).push({x:S.x,y:S.y,z:y});for(s=o-2;s>=2;s--)P.push(l[s]);P.push({x:c.x,y:c.y,z:f});var M=[];this.ComputeBeizerZValueByDis(P,r,M);for(var b=[],d=0;d<a.length;d++){var m=this.ComputeZValue(a[d],l[o-1],l[o-2]);b.push({x:a[d].x,y:a[d].y,z:m})}if(g.length>0&&M.length>0&&b.length>0){u=(u=(u=(u=[]).concat(g)).concat(b)).concat(M),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,{surroundLineFlag:!1});for(var v=[],s=0;s<U.length;s++){var O=this.ComputeZValue(U[s],l[o-1],l[o-2]),L=new SuperMap.Geometry.Point(U[s].x,U[s].y);L.z=O,v.push(L)}this.clearScalePoints(),3!=U.length?U=[]:this.setScalePoints(this.getScalePoints().concat(v))}}else{if(0==e.shapePts.length)return;this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e.shapePts,{surroundLineFlag:!1});var U=this.updateScalePoints(t);if(this.clearScalePoints(),3!=U.length)U=[];else for(s=0;s<U.length;s++)U[s].isScalePoint=!0,U[s].tag=s,this.addScalePoint(U[s])}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.getControlPoints());l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.getScaleValues().length<4&&(this.getScaleValues().push(this.sv1_DefaultAtLenDivAbLen),this.getScaleValues().push(this.sv2_DefaultAjWidthDivAtLen),this.getScaleValues().push(this.sv3_DefaultAeWidthDivAtLen),this.getScaleValues().push(this.sv4_DefaultAeLenDivAtLen));var o=l.length;if(o<=2)return;var n=this.operateCtrlPts(l);o=n.length,o--;var i,r,a,p,u=this.calcScaleValueCount(l.length);if(this.getScaleValues().length<u){var s=this.calcDefaultScaleValues(o);i=s[0],r=s[1],a=s[2],p=s[3]}else i=this.getScaleValues()[0],r=this.getScaleValues()[1],a=this.getScaleValues()[2],p=this.getScaleValues()[3];for(var P=SuperMap.Plot.PlottingUtil.polylineDistance(l),c=[],S=0;S<this.getScalePoints().length;S++)c.push(this.getScalePoints()[S].clone());if(0==c.length)return;c[t]=e.clone();var y,h,S=o-1;y=o<=3?new SuperMap.Geometry.Point((n[0].x+n[1].x)/2,(n[0].y+n[1].y)/2):n[S-1].clone();var f=new SuperMap.Geometry.Point(0,0),g=new SuperMap.Geometry.Point(0,0),M=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrianglePoints(0,3,y,n[S],n[S+1],g,M),SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,n[o],n[o-1],M,f),h=f.clone();var b,d,m,v,O,L,U=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(n[o],h,c[2]);b=U.dLen1,d=U.dLen2,0==b&&(b=.1),d=b,i=(b/=p+1)/P,1==t?(v=(U=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(n[o],h,c[1])).dLen1,a=(O=U.dLen2)/b,p=(v-b)/b):0==t?(b=(U=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(n[o],h,c[0])).dLen1,r=(m=U.dLen2)/b,(L=SuperMap.Plot.PlottingUtil.distance(n[o],n[o-1]))<2*b&&(b=.5*L),v=(U=SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen(n[o],h,c[1])).dLen1,a=(O=U.dLen2)/b,(p=(d-b)/b)<.1&&(a=O/(b=d/(1+(p=.1))),r=m/b),i=b/P):2==t&&(i=b/P),m=b*r,(L=SuperMap.Plot.PlottingUtil.distance(n[o],n[o-1]))<2*b&&(m=(b=.5*L)*r,i=b/P),this.getScaleValues()[0]=i,this.getScaleValues()[1]=r,this.getScaleValues()[2]=a,this.getScaleValues()[3]=p}this.calculateParts()}},{key:"arrowMeshs",value:function(t){var e=[],l=[],o=[],n=[],i=SuperMap.Plot.PlottingUtil.clonePoints(t),r=SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePts(i,this.getScaleValues(),SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_MULTIPOLYBEZIER),a=r.arrowTouLen,p=r.leftBodyPts,u=r.rightBodyPts;if(!SuperMap.Plot.PlottingUtil.equalFuzzy(a,0)){var s=[];s.push(p[p.length-1]),s.push(u[u.length-1]);var P=[];P.push(this.getScaleValues()[2]),P.push(this.getScaleValues()[3]),P.push(0),P.push(0);var c=SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePts(i,s,P,a,SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_WITH_EAR),S=[];S.push(p[0]),S.push(u[0]);SuperMap.Plot.ArrowToolKit.generateArrowTailShapePts(t,S,.2,SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_COATTAIL_POLYBODY);for(y=0;y<p.length;y++)e.push(p[y]),l.push(p[y]);for(y=0;y<c.length;y++)e.push(c[y]),n.push(c[y]);for(var y=u.length-1;y>=0;y--)e.push(u[y]),o.push(u[y])}return{shapePts:e,leftBodyPts:l,rightBodyPts:o,arrowHeadPts:n}}},{key:"updateScalePoints",value:function(t){var e=t.length,l=[];if(!(e<3)){var o=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(!SuperMap.Plot.PlottingUtil.equalFuzzy(o,0)){var n=this.operateCtrlPts(t);e=n.length,e--;for(var i=[],r=0;r<this.getScaleValues().length;r++)i.push(this.getScaleValues()[r]);var a=this.genArrowBodyPts(o,n,i),p=a.ArrowBodyCenterPts,u=this.genAtPts(e,p,i,a.ArrowTouLen),s=this.calc3rdScalePt(e,p,i,a.ArrowTouLen);return l.push(new SuperMap.Geometry.Point(a.LeftBodyPtsTemp[e].x,a.LeftBodyPtsTemp[e].y)),l.push(new SuperMap.Geometry.Point(u[2].x,u[2].y)),l.push(new SuperMap.Geometry.Point(s.x,s.y)),l}}}},{key:"operateCtrlPts",value:function(t){var e=SuperMap.Plot.PlottingUtil.clonePoints(t);if(3===e.length){var l=((e[0].x+e[1].x)/2+e[2].x)/2,o=((e[0].y+e[1].y)/2+e[2].y)/2,n=new SuperMap.Geometry.Point(l,o),i=e[2];e[2]=n,e.push(i)}return e}},{key:"genArrowBodyPts",value:function(t,e,l){var o,n=[],i=[],r=[],a=[],p=[],u=[],s=e.length;s--;var P,c;if(l.length<this.calcScaleValueCount(s)){var S=this.calcDefaultScaleValues(s);P=S[0],c=S[1],S[2],S[3]}else P=l[0],c=l[1],l[2],l[3];var y=SuperMap.Plot.PlottingUtil.clonePoints(e),h=(y[0].x+y[1].x)/2,f=(y[0].y+y[1].y)/2,g=Math.abs(h-y[2].x),M=Math.abs(f-y[2].y),b=0;if(g>0&&M>0){var d=1/(h-y[2].x),m=-1/(f-y[2].y),v=1*y[2].y/(f-y[2].y)-1*y[2].x/(h-y[2].x);b=Math.abs(d*y[0].x+m*y[0].y+v)/Math.sqrt(d*d+m*m)}else M<=1e-4?b=Math.abs(f-y[1].y):g<=1e-4&&(b=Math.abs(h-y[1].x));var O=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(b,y[2],new SuperMap.Geometry.Point(h,f)),L=SuperMap.Plot.PlottingUtil.pointIsRightToLine(y[1],y[2],y[0]);L?(n[1]=y[1],i[1]=y[0]):(n[1]=y[0],i[1]=y[1]),y[1]=new SuperMap.Geometry.Point((y[0].x+y[1].x)/2,(y[0].y+y[1].y)/2);var U=Math.sqrt((O.pntLeft.x-O.pntRight.x)*(O.pntLeft.x-O.pntRight.x)+(O.pntLeft.y-O.pntRight.y)*(O.pntLeft.y-O.pntRight.y))*this.sv_AtWidthDivAwWidth,_=(o=U*this.sv_AtLenDivAtWidth)*c;SuperMap.Plot.PlottingUtil.equalFuzzy(P,0)||(_=(o=t*P)*c);var w=SuperMap.Plot.PlottingUtil.distance(y[s],y[s-1]),x=2*o;w<x&&(_=(o=w/2)*c),y.push(y[s].clone());var T,E;T=0,E=0;var A=0,G=[];for(A=2;A<=s;A++)T+=SuperMap.Plot.PlottingUtil.distance(y[A],y[A-1]);for(T-=o,A=2;A<=s-1;A++)E+=SuperMap.Plot.PlottingUtil.distance(y[A],y[A-1]),G[A]=_+(U-_)*Math.pow((T-E)/T,this.sv_AtScaleParameter);G[s]=_;var C,V=new SuperMap.Geometry.Point(0,0),I=new SuperMap.Geometry.Point(0,0),j=new SuperMap.Geometry.Point(0,0);for(A=2;A<=s-1;A++)SuperMap.Plot.PlottingUtil.getTrianglePoints(0,3,y[A-1],y[A],y[A+1],I,j),A==s-1&&SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,y[s],y[s-1],j,V),C=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(G[A],I,y[A]),(L=SuperMap.Plot.PlottingUtil.pointIsRightToLine(j,I,C.pntRight))?(n[A]=new SuperMap.Geometry.Point(C.pntRight.x,C.pntRight.y),i[A]=new SuperMap.Geometry.Point(C.pntLeft.x,C.pntLeft.y)):(n[A]=new SuperMap.Geometry.Point(C.pntLeft.x,C.pntLeft.y),i[A]=new SuperMap.Geometry.Point(C.pntRight.x,C.pntRight.y));Math.sqrt(1*(y[s].x-V.x)*(y[s].x-V.x)+1*(y[s].y-V.y)*(y[s].y-V.y))>0&&(y[s]=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(o,y[s],V)),C=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(_,y[s+1],y[s]),(L=SuperMap.Plot.PlottingUtil.pointIsRightToLine(y[s],y[s+1],C.pntLeft))?(i[s]=new SuperMap.Geometry.Point(C.pntLeft.x,C.pntLeft.y),n[s]=new SuperMap.Geometry.Point(C.pntRight.x,C.pntRight.y)):(i[s]=new SuperMap.Geometry.Point(C.pntRight.x,C.pntRight.y),n[s]=new SuperMap.Geometry.Point(C.pntLeft.x,C.pntLeft.y));var Y;for(A=2;A<s;A++)SuperMap.Plot.PlottingUtil.getTrianglePoints(3,3,n[A-1],n[A],n[A+1],I,j),r[A]=new SuperMap.Geometry.Point(I.x,I.y),a[A]=new SuperMap.Geometry.Point(j.x,j.y),SuperMap.Plot.PlottingUtil.getTrianglePoints(3,3,i[A-1],i[A],i[A+1],I,j),p[A]=new SuperMap.Geometry.Point(I.x,I.y),u[A]=new SuperMap.Geometry.Point(j.x,j.y),2==A&&(SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,n[1],n[2],r[2],V),a[A]=new SuperMap.Geometry.Point(V.x,V.y),SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,i[1],i[2],p[2],V),u[A]=new SuperMap.Geometry.Point(V.x,V.y)),A==s-1&&(x=(w=SuperMap.Plot.PlottingUtil.distance(n[s],n[s-1]))/3,(Y=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(x,y[s],y[s+1])).x+=n[s].x-y[s].x,Y.y+=n[s].y-y[s].y,x=(w=U-_)*Math.pow(x/T,this.sv_AtScaleParameter),C=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(x,n[s],Y),r[s]=new SuperMap.Geometry.Point(C.pntLeft.x,C.pntLeft.y),x=(w=SuperMap.Plot.PlottingUtil.distance(i[s],i[s-1]))/3,(Y=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(x,y[s],y[s+1])).x+=i[s].x-y[s].x,Y.y+=i[s].y-y[s].y,x=(w=U-_)*Math.pow(x/T,this.sv_AtScaleParameter),C=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(x,i[s],Y),p[s]=new SuperMap.Geometry.Point(C.pntRight.x,C.pntRight.y));return{ArrowBodyCenterPts:SuperMap.Plot.PlottingUtil.clonePoints(y),LeftBodyPtsTemp:n,RightBodyPtsTemp:i,LeftBodyPtsLeftCtrlPts:r,LeftBodyPtsRightCtrlPts:a,RightBodyPtsLeftCtrlPts:p,RightBodyPtsRightCtrlPts:u,ArrowTouLen:o}}},{key:"calcScaleValueCount",value:function(t){return 4}},{key:"calcDefaultScaleValues",value:function(t){var e=[];return e.push(this.sv1_DefaultAtLenDivAbLen),e.push(this.sv2_DefaultAjWidthDivAtLen),e.push(this.sv3_DefaultAeWidthDivAtLen),e.push(this.sv4_DefaultAeLenDivAtLen),e}},{key:"genAtPts",value:function(t,e,l,o){var n=l[2],i=[],r=o*l[3],a=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(r,e[t],e[t+1]);r=o*n;var p=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r,e[t+1],a);return i.push(new SuperMap.Geometry.Point(p.pntLeft.x,p.pntLeft.y)),i.push(e[t+1]),i.push(new SuperMap.Geometry.Point(p.pntRight.x,p.pntRight.y)),i}},{key:"calc3rdScalePt",value:function(t,e,l,o){l[2];var n=o*l[3];return SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(n,e[t],e[t+1])}}]),e}());e.default=u,SuperMap.Geometry.AlgoSymbol1004=u},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15800",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.04),l.getScaleValues().push(1),l.getScaleValues().push(.12)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=this.getScaleValues()[0],o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=l*o,i=this.getScaleValues()[2]*o*.5,r=!1;r=0===this.getScaleValues()[1];var a=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(0!==a){new SuperMap.Geometry.Point(0,0);for(var p=[],u=0;u<=a;u+=i){var s=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,u);if(!(s.index<0)){var P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[s.index+1],s.pt);if(r?p.push(P.pntRight):p.push(P.pntLeft),Math.abs(u)<=1e-6){this.clearScalePoints();var c=new SuperMap.Geometry.Point(p[0].x,p[0].y);c.isScalePoint=!0,c.tag=0,this.addScalePoint(c)}else Math.abs(2*i-u)<=1e-6&&((c=new SuperMap.Geometry.Point(s.pt.x,s.pt.y)).isScalePoint=!0,c.tag=1,this.addScalePoint(c));r=!r}}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p);for(var S=p.length,y=0,h=0;h<S-1;++h){var f=new SuperMap.Geometry.Point(p[h].x,p[h].y),g=new SuperMap.Geometry.Point(p[h+1].x,p[h+1].y);y=.3*SuperMap.Plot.PlottingUtil.distance(f,g);var M=[],b=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.5,p[h],p[h+1]);new SuperMap.Geometry.Point((p[h].x+p[h+1].x)/2,(p[h].y+p[h+1].y)/2);var d=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*y,p[h],b);M.push(d.pntLeft),M.push(d.pntRight),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l),n=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t){var i=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(1,o[1],o[0]),r=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,i.pntRight,i.pntLeft),a=SuperMap.Plot.PlottingUtil.distance(r.projectPoint,l[0]);this.getScaleValues()[0]=a/n;var p=SuperMap.Plot.PlottingUtil.pointIsRightToLine(o[0],o[1],e);this.getScaleValues()[1]=p?1:0}else{for(var u,s=-1,P=0,c=o.length-1;P<c;P++){var S=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,o[P],o[P+1]);if(S.isOnline){u=S.projectPoint,s=P;break}}var y=[];if(-1===s)y.push(o[0]);else{for(var P=0,c=s;P<=c;P++)y.push(o[P]);y.push(u);var h=SuperMap.Plot.PlottingUtil.polylineDistance(y)/n;h<.02&&(h=.02),h>.5&&(h=.5),this.getScaleValues()[2]=h}}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15800=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3000801",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&l.getScaleValues().push(.05),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=this.getLinePts(e,this.getScaleValues()[0]),i=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),r=SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)*this.RTOD,a=.8*SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt);this.getSubSymbols().length>=0&&this.computeSubSymbol(this.getSubSymbols()[0],i,a,r+180);for(var p=[],u=[],s=0;s<=n.startIndex;s++)p.push(e[s]);if(p.push(n.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),n.endIndex<=e.length){u.push(n.endPt);for(s=n.endIndex+1;s<=e.length-1;s++)u.push(e[s]);this.addArrow(u)}var P=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),c=SuperMap.Plot.PlottingUtil.circlePoint(P.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,r+90);this.addScalePoint(c,0)}}},{key:"addArrow",value:function(t){if(t.length<2)return t;var e=0,l=SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints)*(e=(this.getIsEdit(),.5*this.getSubSymbolScaleValue())),o=t[t.length-1];if(t.length>2){for(var n=-1,i=t.length-2;i>=0;i--)if(l<SuperMap.Plot.PlottingUtil.distance(o,t[i])){n=i;break}t.splice(n+1,t.length-n),t.push(o)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var r=t[t.length-2],a=t[t.length-1],p=l;if(void 0===r)return t;if(!(SuperMap.Plot.PlottingUtil.distance(r,a)<l)){var u=SuperMap.Plot.PlottingUtil.radian(r,a)*this.RTOD,s=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,u+157.5),P=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,u+202.5),c={surroundLineFlag:!1,fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[s,t[t.length-1],P],c)}}},{key:"getLinePts",value:function(t,e){var l={};if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"modifyPoint",value:function(t,e){if(0===t&&!0===e.isScalePoint){if(0!==t&&1!==t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o),r=2*SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.5?r:.5}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3000801=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21501",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&l.getScaleValues().push(.05),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=this._getLinePts(e,this.getScaleValues()[0]),i=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),r=SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)*this.RTOD,a=SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt);this.getSubSymbols().length>=0&&(21504===this.code||21503===this.code||5010203===this.code||5010204===this.code?1300===this.getSubSymbols()[0].code?this.computeSubSymbol(this.getSubSymbols()[0],i,.8*a,r):this.computeSubSymbol(this.getSubSymbols()[0],i,.8*a,r-90):1300===this.getSubSymbols()[0].code?this.computeSubSymbol(this.getSubSymbols()[0],i,.8*a,r):this.computeSubSymbol(this.getSubSymbols()[0],i,.8*a,r-180));for(var p=[],u=[],s=0;s<=n.startIndex;s++)p.push(e[s]);if(p.push(n.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),n.endIndex<=e.length){u.push(n.endPt);for(s=n.endIndex+1;s<=e.length-1;s++)u.push(e[s]);this.addArrow(u)}var P=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),c=SuperMap.Plot.PlottingUtil.circlePoint(P.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,r+90);this.addScalePoint(c,0)}}},{key:"_getLinePts",value:function(t,e){var l={};if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"modifyPoint",value:function(t,e){if(0===t&&!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o),r=2*SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.5?r:.5}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol21501=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21600",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=99999,0===l.getScaleValues().length&&l.getScaleValues().push(.05),l.subText=" ",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!(t.length<this.minEditPts)){1!==this.getScaleValues().length&&(this.clearScaleValues(),this.getScaleValues().push(.05));var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);for(var l=this.getSubSymbolScaleValue(),o=0,n=0;n<e.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(e[n],e[n+1]);var i=.5*o,r=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,i);if(-1!==r.index){for(var a=r.pt,p=[],u=0,n=0;n<r.index+1;n++)p.push(e[n]),n>0&&(u+=SuperMap.Plot.PlottingUtil.distance(p[n],p[n-1]));var s,P,c=o*l*.5,S=[];if(i-u>=c){s=SuperMap.Plot.PlottingUtil.linePnt(a,e[r.index],c),p.push(s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),P=SuperMap.Plot.PlottingUtil.linePnt(a,e[r.index+1],c),S.push(P);for(var y=e.length,n=r.index+1;n<y;++n)S.push(e[n]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S)}else{for(var h=-1,n=p.length-1;n>=0;n--){var f=new SuperMap.Geometry.Point(p[n].x,p[n].y),g=new SuperMap.Geometry.Point(a.x,a.y);if((b=SuperMap.Plot.PlottingUtil.distance(f,g))>c){h=n;break}}if(-1==h)return;p.splice(h+1,p.length-1-h),s=SuperMap.Plot.PlottingUtil.linePnt(a,e[h],c),p.push(s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p);for(var M=-1,n=r.index;n<e.length;n++){var f=new SuperMap.Geometry.Point(e[n].x,e[n].y),g=new SuperMap.Geometry.Point(a.x,a.y),b=SuperMap.Plot.PlottingUtil.distance(f,g);if(b>c){M=n;break}}if(-1==M)return;P=SuperMap.Plot.PlottingUtil.linePnt(a,e[M],c),S.push(P);for(n=M+1;n<e.length;++n)S.push(e[n]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S)}if(!(p.length<2)){for(var d=0,n=0;n<t.length-1;n++)d+=SuperMap.Plot.PlottingUtil.distance(t[n],t[n+1]);this.getIsEdit()||(this.getScaleValues()[0]=.6*l);var m=d*this.getScaleValues()[0],v=new SuperMap.Geometry.Point(p[0].x,p[0].y),O=new SuperMap.Geometry.Point(p[1].x,p[1].y),L=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(m,O,v),U=[];if(U.push(L.pntLeft),U.push(L.pntRight),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U),!(S.length<2)){var _=new SuperMap.Geometry.Point(S[S.length-1].x,S[S.length-1].y),w=new SuperMap.Geometry.Point(S[S.length-2].x,S[S.length-2].y),x=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(m,w,_);(U=[]).push(x.pntLeft),U.push(x.pntRight),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U);var T=s,E=P,A=180*SuperMap.Plot.PlottingUtil.radian(T,E)/Math.PI,G=(SuperMap.Plot.PlottingUtil.distance(T,E),new SuperMap.Geometry.Point((s.x+P.x)/2,(s.y+P.y)/2));if((U=[]).push(G),0!==this.subText.length){var C=this.subText,V={surroundLineFlag:!1,fontSize:15,fontSizeLimit:!0};V.labelAlign="cm",V.labelRotation=-A,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,U,V,C)}this.addScalePoint(L.pntLeft)}}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.distance(e,l[0])/o;this.getScaleValues()[0]=n}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol21600=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol23500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.05),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];3>=t.length?(e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t),e=SuperMap.Plot.PlottingUtil.clearSamePts(e)):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t),e=SuperMap.Plot.PlottingUtil.clearSamePts(e));var l={fillLimit:!0,fill:!1,surroundLineFlag:!1};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e,l);var o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),n=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(!this.getIsEdit()){var i=this.getDefaultSubSymbolSize()/n;(i>.3||i<=0)&&(i=.3),this.getScaleValues()[0]=2*i}var r=this.getScaleValues()[0],a=(this.getScaleValues()[1],this.getScaleValues()[2]),p=this.getScaleValues()[3],u=n*r,s=new SuperMap.Geometry.Point(o.x+n*a,o.y+n*p);if(this.getSubSymbols()&&null!==this.getSubSymbols()&&this.getSubSymbols().length>0){if(this.getSubSymbols()[0].symbolData)for(var P in this.getSubSymbols()[0].symbolData.innerCells)this.getSubSymbols()[0].symbolData.innerCells[P].type===SuperMap.Plot.SymbolType.POLYBEZIERSYMBOL&&(this.getSubSymbols()[0].symbolData.innerCells[P].type=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL);this.computeSubSymbol(this.getSubSymbols()[0],s,u,0)}this.addScalePoint(s);var c=u,S=SuperMap.Plot.PlottingUtil.circlePoint(s,c,c,90);this.addScalePoint(S)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=[];3>=l.length?o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o),i=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t){r=(e.x-n.x)/i;this.getScaleValues()[2]=r;a=(e.y-n.y)/i;this.getScaleValues()[3]=a}else if(1===t){var r=this.getScaleValues()[2],a=this.getScaleValues()[3],p=new SuperMap.Geometry.Point(n.x+i*r,n.y+i*a),u=SuperMap.Plot.PlottingUtil.distance(p,e)/i;this.getScaleValues()[0]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol23500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol2121505",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.05),l.subText="火",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=t[0],l=t[1],o=SuperMap.Plot.PlottingUtil.distance(e,l),n=o*this.getScaleValues()[0],i=SuperMap.Plot.PlottingUtil.linePnt(e,l,.5*o),r=SuperMap.Plot.PlottingUtil.linePnt(i,e,2*n),a=SuperMap.Plot.PlottingUtil.linePnt(i,l,2*n),p=[];p.push(t[0],r);var u=[];u.push(a,t[1]);var s=SuperMap.Plot.PlottingUtil.paraLine(p,n,!0),P=SuperMap.Plot.PlottingUtil.paraLine(p,n,!1),c=SuperMap.Plot.PlottingUtil.paraLine(u,n,!0),S=SuperMap.Plot.PlottingUtil.paraLine(u,n,!1);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S);var y=this.subText,h=SuperMap.Plot.PlottingUtil.radian(e,l)*this.RTOD,f=new SuperMap.Geometry.Point(i.x,i.y),g={surroundLineFlag:!1,fontSize:15,fontSizeLimit:!0};g.labelAlign="cm",g.labelRotation=-h,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[f],g,y),this.addScalePoint(s[0],0)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]);if(0===t){var n=SuperMap.Plot.PlottingUtil.distance(e,l[0])/o;n>.24&&(n=.24),this.getScaleValues()[0]=n}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol2121505=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3001101",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=1e3,l.subText="集",null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents(),2===this.controlPoints.length&&this.calAssistantLine();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.getOutRectangleDis(t);if(0!==e){var l=null;l=40104===this.code?{surroundLineFlag:!1,fontSize:1*e/2,fontSizeLimit:!0,fontColorLimit:!0,fontColor:"#000000"}:{surroundLineFlag:!1,fontSize:1*e/2,fontSizeLimit:!0,fontColorLimit:!0,fontColor:"#0000ff"},this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t);""===this.textContent&&(this.textContent=this.subText),l.labelAlign="cm",l.labelRotation=-0,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[o],l,this.textContent)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3001101=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17804",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.1)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(.1)),t.length==this.minEditPts?this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t):this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t);var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=0;if(0!=(l=t.length==this.minEditPts?2*SuperMap.Plot.PlottingUtil.distance(t[0],t[1]):SuperMap.Plot.PlottingUtil.distance(t[0],t[1])+SuperMap.Plot.PlottingUtil.distance(t[0],t[2]))){var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2],r=new SuperMap.Geometry.Point(e.x+l*o,e.y+l*n),a=l*i,p=3*a,u=new SuperMap.Geometry.Point(-.5*p,.5*a),s=new SuperMap.Geometry.Point(.5*p,.5*a),P=SuperMap.Plot.PlottingUtil.coordinateTrans(r,u,0),c=SuperMap.Plot.PlottingUtil.coordinateTrans(r,s,0),S=[];S.push(P.clone()),S.push(c.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S);var y=new SuperMap.Geometry.Point(-.5*p,-.5*a),h=new SuperMap.Geometry.Point(.5*p,-.5*a),f=SuperMap.Plot.PlottingUtil.coordinateTrans(r,y,0),g=SuperMap.Plot.PlottingUtil.coordinateTrans(r,h,0);(S=[]).push(f.clone()),S.push(g.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S);var M=new SuperMap.Geometry.Point(-.1*p,.5*a),b=new SuperMap.Geometry.Point(-.15*p,-.5*a),d=SuperMap.Plot.PlottingUtil.coordinateTrans(r,M,0),m=SuperMap.Plot.PlottingUtil.coordinateTrans(r,b,0);(S=[]).push(d.clone()),S.push(m.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S);var v=new SuperMap.Geometry.Point(.15*p,.5*a),O=new SuperMap.Geometry.Point(.1*p,-.5*a),L=SuperMap.Plot.PlottingUtil.coordinateTrans(r,v,0),U=SuperMap.Plot.PlottingUtil.coordinateTrans(r,O,0);(S=[]).push(L.clone()),S.push(U.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S),this.clearScalePoints();var _=new SuperMap.Geometry.Point(r.x+.1*p,r.y);_.isScalePoint=!0,_.tag=0,this.addScalePoint(_);var w=SuperMap.Plot.PlottingUtil.circlePoint(r,.5*p,.5*p,90);w.isScalePoint=!0,w.tag=1,this.addScalePoint(w)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=(l=SuperMap.Plot.PlottingUtil.clearSamePts(l))[0].clone(),n=0;if(0==(n=2==l.length?2*SuperMap.Plot.PlottingUtil.distance(l[0],l[1]):SuperMap.Plot.PlottingUtil.distance(l[0],l[1])+SuperMap.Plot.PlottingUtil.distance(l[0],l[2])))return;if(0==t){var i=(u=this.getScaleValues()[2])*n,r=(e.x-.1*i-o.x)/n;this.getScaleValues()[0]=r;a=(e.y-o.y)/n;this.getScaleValues()[1]=a}else if(1==t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(o.x+n*r,o.y+n*a),u=2*(i=SuperMap.Plot.PlottingUtil.distance(p,e))/n/3;this.getScaleValues()[2]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17804=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(4)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3000804",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3000804=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol4030301",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999999,0===l.getScaleValues().length&&l.getScaleValues().push(.05),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l.subText="标",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=this.getLinePts(e,this.getScaleValues()[0]),i=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),r=SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)*this.RTOD,a=SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt);this.getSubSymbols().length>=0&&this.computeSubSymbol(this.getSubSymbols()[0],i,a,r);for(var p=[],u=[],s=0;s<=n.startIndex;s++)p.push(e[s]);if(p.push(n.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),n.endIndex<=e.length){u.push(n.endPt);for(s=n.endIndex+1;s<=e.length-1;s++)u.push(e[s]);var P=SuperMap.Plot.PlottingUtil.polylineDistance(u);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u)}var c=this.subText,S=.15*P,y=new SuperMap.Geometry.Point(n.endPt.x+S/2,n.endPt.y-S/2),h=r,f={fontSizeLimit:!0,fontSize:20};f.fontSize>20&&(f.fontSize=20),f.labelAlign="cm",f.labelRotation=-h,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[y],f,c);var g=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),M=SuperMap.Plot.PlottingUtil.circlePoint(g.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,r+90);this.addScalePoint(M,0)}}},{key:"getLinePts",value:function(t,e){var l=new Object;if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"modifyPoint",value:function(t,e){if(0===t&&!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o),r=2*SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.5?r:.5}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol4030301=p},function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ArrowToolKit=SuperMap.Plot.ArrowToolKit=SuperMap.Plot.ArrowToolKit||{};SuperMap.Plot.ArrowToolKit.ConstValue={MAX_ARRAY_SIZE:128,sv_AtScaleParameter:1.5,sv_AtLenDivAtWidth:1.35,sv_AtWidthDivAwWidth:.5,DUOJIANTOU_TAIL_RATE_1:8,DUOJIANTOU_TAIL_RATE_2:3,DUOJIANTOU_TAIL_RATE_3:.6},SuperMap.Plot.ArrowToolKit.ArrowTailType={ARROWTAIL_NONE:0,ARROWTAIL_LINE:1,ARROWTAIL_CURVE:2,ARROWTAIL_COATTAIL:3,ARROWTAIL_COATTAIL_POLYBODY:4},SuperMap.Plot.ArrowToolKit.ArrowHeadType={ARROWHEAD_POLYLINE:0,ARROWHEAD_TRIANGLE:1,ARROWHEAD_COATTAIL:2,ARROWHEAD_TRIANGLE_SOLID:3,ARROWHEAD_WITH_EAR:4,ARROWHEAD_WITHOUT_EAR:5},SuperMap.Plot.ArrowToolKit.ArrowBodyType={ARROWBODY_POLYLINE:0,ARROWBODY_POLYBEZIER:1,ARROWBODY_PARALLEL:2,ARROWBODY_TRAPEZOID:3,ARROWBODY_MULTIPOLYBEZIER:4},SuperMap.Plot.ArrowToolKit.parallel=function(t,e){var l={};return l.leftParallelPts=[],l.rightParallelPts=[],1===t.length||2===t.length&&t[0].x===t[1].x&&t[0].y===t[1].y?l:(l.leftParallelPts=SuperMap.Plot.PlottingUtil.parallel(t,e),l.rightParallelPts=SuperMap.Plot.PlottingUtil.parallel(t,-e),l)},SuperMap.Plot.ArrowToolKit.trapezoid=function(t,e,l){var o={};if(o.leftParallelPts=[],o.rightParallelPts=[],1===t.length||2===t.length&&t[0].x===t[1].x&&t[0].y===t[1].y)return o;for(var n=0;n<t.length-1;n++){t[n].x===t[n+1].x&&t[n].y===t[n+1].y&&(o.leftParallelPts.push(o.leftParallelPts[o.leftParallelPts.length-1]),o.rightParallelPts.push(o.rightParallelPts[o.rightParallelPts.length-1]));var i=t[n+1];i=SuperMap.Plot.PlottingUtil.rotate(t[n],0,1,i),o.leftParallelPts.push(SuperMap.Plot.PlottingUtil.findPointInLine(t[n],i,e)),i=t[n],i=SuperMap.Plot.PlottingUtil.rotate(t[n+1],0,-1,i),o.leftParallelPts.push(SuperMap.Plot.PlottingUtil.findPointInLine(t[n+1],i,l)),i=t[n+1],i=SuperMap.Plot.PlottingUtil.rotate(t[n],0,-1,i),o.rightParallelPts.push(SuperMap.Plot.PlottingUtil.findPointInLine(t[n],i,e)),i=t[n],i=SuperMap.Plot.PlottingUtil.rotate(t[n+1],0,1,i),o.rightParallelPts.push(SuperMap.Plot.PlottingUtil.findPointInLine(t[n+1],i,l))}return o},SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePts=function(t,e,l){var o={};switch(l){case SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_PARALLEL:case SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_TRAPEZOID:var n=e[0],i=e[1],r=e[2],a=(e[3],e[4],SuperMap.Plot.PlottingUtil.equalFuzzy(r,0));if(!a&&t.length>2){var p=t.length;t.splice(2,p-2)}var u=SuperMap.Plot.PlottingUtil.polylineDistance(t);SuperMap.Plot.PlottingUtil.distance(t[t.length-2],t[t.length-1]);o.arrowTouLen=u*n;for(var s=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,u-o.arrowTouLen).pt,P=[],c=o.arrowTouLen*r,S=o.arrowTouLen*i,y=t.length-1,h=0;h<y;h++)P.push(t[h]);P.push(s);var f={};f.leftParallelPts=[],f.rightParallelPts=[],f=!0===a?SuperMap.Plot.ArrowToolKit.parallel(P,S):SuperMap.Plot.ArrowToolKit.trapezoid(P,c,S);var g=t[t.length-1];t[t.length-1]=s,t.push(g);var M=null;return o.leftBodyPts=f.leftParallelPts,o.rightBodyPts=f.rightParallelPts,o.OpectrlPoints=M,o;case SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_MULTIPOLYBEZIER:var b=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(0==b)return;var d=(M=SuperMap.Plot.ArrowToolKit.OperateCtrlPts(t)).length;d--;var m=SuperMap.Plot.ArrowToolKit.generateMultiBezier(M,d,e,b);t=[];for(h=0;h<M.length;h++)t.push(M[h]);o.arrowTouLen=m.arrowTouLen,o.leftBodyPts=m.leftBodyPts,o.rightBodyPts=m.rightBodyPts,o.OpectrlPoints=M}return o},SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePts=function(t,e,l,o,n){var i=[];switch(n){case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_WITH_EAR:case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_WITHOUT_EAR:var r=l[0],a=l[1],p=0,u=0;3==l.length&&(p=l[2]),4==l.length&&(p=l[2],u=l[3]);var s=0;if(!SuperMap.Plot.PlottingUtil.equalFuzzy(p,0)&&!SuperMap.Plot.PlottingUtil.equalFuzzy(u,0)){var P=SuperMap.Plot.PlottingUtil.clonePoints(t);P.splice(P.length-1,1),s=SuperMap.Plot.PlottingUtil.polylineDistance(P)*p*u}var c=new SuperMap.Geometry.Point((e[0].x+e[1].x)/2,(e[0].y+e[1].y)/2);if(SuperMap.Plot.PlottingUtil.equalFuzzy(a,0)){var S=o*r,y=t[t.length-1];return y=SuperMap.Plot.PlottingUtil.rotate(c,0,1,y),i.push(SuperMap.Plot.PlottingUtil.findPointInLine(c,y,S)),i.push(t[t.length-1]),y=t[t.length-1],y=SuperMap.Plot.PlottingUtil.rotate(c,0,-1,y),i.push(SuperMap.Plot.PlottingUtil.findPointInLine(c,y,S)),i}var h=o*a,f=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(h,c,t[t.length-1]);h=o*r,h+=s;var g=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(h,t[t.length-1],f),M=g.pntLeft,b=g.pntRight,d=t[t.length-1];return i.push(b),i.push(d),i.push(M),i}},SuperMap.Plot.ArrowToolKit.generateArrowBodyShapePtsBySingleLine=function(t,e,l){var o=0,n=[];if(2>t.length)return{arrowHeadLen:o,arrowBodyPts:n};for(var i=0,r=0;r<t.length-1;r++)i+=SuperMap.Plot.PlottingUtil.distance(t[r],t[r+1]);var a=SuperMap.Plot.PlottingUtil.equalFuzzy(e,0);switch(o=i*e,l){case SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_POLYLINE:if(a)n=n.concat(t);else if(-1!==(c=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,i-o)).index){for(r=0;r<c.index;r++)n.push(t[r]);n.push(c.pt)}break;case SuperMap.Plot.ArrowToolKit.ArrowBodyType.ARROWBODY_POLYBEZIER:if(2==t.length)if(a)n=n.concat(t);else{var p=SuperMap.Plot.PlottingUtil.findPoint(t[1],t[0],o,0);n.push(t[0]),n.push(p)}else{var u=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);if(a)n=n.concat(u);else{for(var s=1.5*o,P=0,r=0;r<u.length-1;r++)P+=SuperMap.Plot.PlottingUtil.distance(u[r],u[r+1]);var c=SuperMap.Plot.PlottingUtil.findPointInPolyLine(u,P-s);if(-1!==c.index){for(r=0;r<c.index;r++)n.push(u[r]);n.push(c.pt)}}}}return{arrowHeadLen:o,arrowBodyPts:n}},SuperMap.Plot.ArrowToolKit.generateArrowHeadShapePtsBySingleLine=function(t,e,l,o,n,i){var r=[];if(2>t)return r;for(var a=0,p=0;p<t.length-1;p++)a+=SuperMap.Plot.PlottingUtil.distance(t[p],t[p+1]);S=a*o;switch(i){case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_POLYLINE:var u=SuperMap.Plot.PlottingUtil.findPoint(e[e.length-1],e[e.length-2],S,22.5),s=SuperMap.Plot.PlottingUtil.findPoint(e[e.length-1],e[e.length-2],S,-22.5);r.push(u),r.push(t[t.length-1]),r.push(s);break;case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_TRIANGLE:var P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,a-n),c=SuperMap.Plot.PlottingUtil.findPoint(l[0],l[1],n,180),S=SuperMap.Plot.PlottingUtil.distance(P.pt,c);S=2*Math.sqrt(S*S/3);var u=SuperMap.Plot.PlottingUtil.findPoint(c,P.pt,S,22.5),s=SuperMap.Plot.PlottingUtil.findPoint(c,P.pt,S,-22.5);r.push(u),r.push(c),r.push(s),r.push(u);break;case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_TRIANGLE_SOLID:var y=e[e.length-1],h=e[e.length-2],f=SuperMap.Plot.PlottingUtil.findPoint(y,h,S,0),u=SuperMap.Plot.PlottingUtil.findPoint(y,f,S,22.5),s=SuperMap.Plot.PlottingUtil.findPoint(y,f,S,-22.5);r.push(u),r.push(y),r.push(s),r.push(u);break;case SuperMap.Plot.ArrowToolKit.ArrowHeadType.ARROWHEAD_COATTAIL:var g=e.length,h=e[g-1];S=2*Math.sqrt(S*S/3);var u=SuperMap.Plot.PlottingUtil.findPoint(e[g-1],e[g-2],S,20),s=SuperMap.Plot.PlottingUtil.findPoint(e[g-1],e[g-2],S,-20),M=SuperMap.Plot.PlottingUtil.findPoint(e[g-1],e[g-2],S/2,0);r.push(h),r.push(u),r.push(M),r.push(s),r.push(h)}return r},SuperMap.Plot.ArrowToolKit.generateArrowTailShapePts=function(t,e,l,o){for(var n=e.length,i=[],r=0,a=0;a<t.length-1;a++)r+=SuperMap.Plot.PlottingUtil.distance(t[a],t[a+1]);var p=r*l;switch(o){case SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_NONE:break;case SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_LINE:var u=SuperMap.Plot.PlottingUtil.findPoint(t[0],t[1],p,90),s=SuperMap.Plot.PlottingUtil.findPoint(t[0],t[1],p,-90);i.push(u),i.push(s);break;case SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_CURVE:var P=new SuperMap.Geometry.Point(.5*(e[0].x+e[n-1].x),.5*(e[0].y+e[n-1].y)),c=SuperMap.Plot.PlottingUtil.distance(e[0],e[n-1]),S=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(c*l,P,t[t.length-1]),y=new SuperMap.Geometry.Point(0,0),h=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrianglePoints(SuperMap.Plot.ArrowToolKit.ConstValue.DUOJIANTOU_TAIL_RATE_1,SuperMap.Plot.ArrowToolKit.ConstValue.DUOJIANTOU_TAIL_RATE_2,e[0],S,e[n-1],y,h);var f=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrapezoidPoints(SuperMap.Plot.ArrowToolKit.ConstValue.DUOJIANTOU_TAIL_RATE_3,e[0],S,y,f);var g=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrapezoidPoints(SuperMap.Plot.ArrowToolKit.ConstValue.DUOJIANTOU_TAIL_RATE_3,e[n-1],S,h,g);break;case SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_COATTAIL:var M=SuperMap.Plot.PlottingUtil.findPoint(t[0],t[1],p,157.5),b=SuperMap.Plot.PlottingUtil.findPoint(t[0],t[1],p,-157.5);i.push(M),i.push(t[0]),i.push(b);break;case SuperMap.Plot.ArrowToolKit.ArrowTailType.ARROWTAIL_COATTAIL_POLYBODY:var P=new SuperMap.Geometry.Point(.5*(e[0].x+e[n-1].x),.5*(e[0].y+e[n-1].y)),c=SuperMap.Plot.PlottingUtil.distance(e[0],e[n-1]),d=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(c*l,e[0],P);i.push(e[n-1]),i.push(d.pntLeft),i.push(e[0])}return i},SuperMap.Plot.ArrowToolKit.OperateCtrlPts=function(t){var e=SuperMap.Plot.PlottingUtil.clonePoints(t);if(3==e.length){var l=((e[0].x+e[1].x)/2+e[2].x)/2,o=((e[0].y+e[1].y)/2+e[2].y)/2,n=new SuperMap.Geometry.Point(l,o),i=e[2].clone();e[2]=n,e.push(i)}return e},SuperMap.Plot.ArrowToolKit.generateMultiBezier=function(t,e,l,o){var n=0,i=[],r=[],a=[],p=[],u=[],s=[],P=[],c=[],S=l[0],y=l[1],h=(l[2],l[3],(t[0].x+t[1].x)/2),f=(t[0].y+t[1].y)/2,g=Math.abs(h-t[2].x),M=Math.abs(f-t[2].y),b=0;if(g>0&&M>0){var d=1/(h-t[2].x),m=-1/(f-t[2].y),v=1*t[2].y/(f-t[2].y)-1*t[2].x/(h-t[2].x);b=Math.abs(d*t[0].x+m*t[0].y+v)/Math.sqrt(d*d+m*m)}else M<=1e-4?b=Math.abs(f-t[1].y):g<=1e-4&&(b=Math.abs(h-t[1].x));var O=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(b,t[2],new SuperMap.Geometry.Point(h,f)),L=SuperMap.Plot.PlottingUtil.pointIsRightToLine(t[1],t[2],t[0]);L?(a[1]=t[1],p[1]=t[0]):(a[1]=t[0],p[1]=t[1]),t[1]=new SuperMap.Geometry.Point((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2);var U=Math.sqrt((O.pntLeft.x-O.pntRight.x)*(O.pntLeft.x-O.pntRight.x)+(O.pntLeft.y-O.pntRight.y)*(O.pntLeft.y-O.pntRight.y))*SuperMap.Plot.ArrowToolKit.ConstValue.sv_AtWidthDivAwWidth,_=(n=U*SuperMap.Plot.ArrowToolKit.ConstValue.sv_AtLenDivAtWidth)*y;SuperMap.Plot.PlottingUtil.equalFuzzy(S,0)||(_=(n=o*S)*y);var w=SuperMap.Plot.PlottingUtil.distance(t[e],t[e-1]),x=2*n;w<x&&(_=(n=w/2)*y),t.push(t[e]);var T,E;T=0,E=0;var A=0,G=[];for(A=2;A<=e;A++)T+=SuperMap.Plot.PlottingUtil.distance(t[A],t[A-1]);for(T-=n,A=2;A<=e-1;A++)E+=SuperMap.Plot.PlottingUtil.distance(t[A],t[A-1]),G[A]=_+(U-_)*Math.pow((T-E)/T,SuperMap.Plot.ArrowToolKit.ConstValue.sv_AtScaleParameter);G[e]=_;var C,V=new SuperMap.Geometry.Point(0,0),I=new SuperMap.Geometry.Point(0,0),j=new SuperMap.Geometry.Point(0,0);for(A=2;A<=e-1;A++)SuperMap.Plot.PlottingUtil.getTrianglePoints(0,3,t[A-1],t[A],t[A+1],I,j),A==e-1&&SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,t[e],t[e-1],j,V),C=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(G[A],I,t[A]),(L=SuperMap.Plot.PlottingUtil.pointIsRightToLine(j,I,C.pntRight))?(a[A]=new SuperMap.Geometry.Point(C.pntRight.x,C.pntRight.y),p[A]=new SuperMap.Geometry.Point(C.pntLeft.x,C.pntLeft.y)):(a[A]=new SuperMap.Geometry.Point(C.pntLeft.x,C.pntLeft.y),p[A]=new SuperMap.Geometry.Point(C.pntRight.x,C.pntRight.y));Math.sqrt(1*(t[e].x-V.x)*(t[e].x-V.x)+1*(t[e].y-V.y)*(t[e].y-V.y))>0&&(t[e]=SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale(n,t[e],V)),C=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(_,t[e+1],t[e]),(L=SuperMap.Plot.PlottingUtil.pointIsRightToLine(t[e],t[e+1],C.pntLeft))?(p[e]=new SuperMap.Geometry.Point(C.pntLeft.x,C.pntLeft.y),a[e]=new SuperMap.Geometry.Point(C.pntRight.x,C.pntRight.y)):(p[e]=new SuperMap.Geometry.Point(C.pntRight.x,C.pntRight.y),a[e]=new SuperMap.Geometry.Point(C.pntLeft.x,C.pntLeft.y));var Y;for(A=2;A<e;A++)SuperMap.Plot.PlottingUtil.getTrianglePoints(3,3,a[A-1],a[A],a[A+1],I,j),u[A]=new SuperMap.Geometry.Point(I.x,I.y),s[A]=new SuperMap.Geometry.Point(j.x,j.y),SuperMap.Plot.PlottingUtil.getTrianglePoints(3,3,p[A-1],p[A],p[A+1],I,j),P[A]=new SuperMap.Geometry.Point(I.x,I.y),c[A]=new SuperMap.Geometry.Point(j.x,j.y),2==A&&(SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,a[1],a[2],u[2],V),s[1]=new SuperMap.Geometry.Point(V.x,V.y),SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.5,p[1],p[2],P[2],V),c[1]=new SuperMap.Geometry.Point(V.x,V.y)),A==e-1&&(x=(w=SuperMap.Plot.PlottingUtil.distance(a[e],a[e-1]))/3,(Y=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(x,t[e],t[e+1])).x+=a[e].x-t[e].x,Y.y+=a[e].y-t[e].y,x=(w=U-_)*Math.pow(x/T,SuperMap.Plot.ArrowToolKit.ConstValue.sv_AtScaleParameter),C=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(x,a[e],Y),u[e]=new SuperMap.Geometry.Point(C.pntLeft.x,C.pntLeft.y),x=(w=SuperMap.Plot.PlottingUtil.distance(p[e],p[e-1]))/3,(Y=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(x,t[e],t[e+1])).x+=p[e].x-t[e].x,Y.y+=p[e].y-t[e].y,x=(w=U-_)*Math.pow(x/T,SuperMap.Plot.ArrowToolKit.ConstValue.sv_AtScaleParameter),C=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(x,p[e],Y),P[e]=new SuperMap.Geometry.Point(C.pntRight.x,C.pntRight.y));return i=SuperMap.Plot.ArrowToolKit.genArrowBody(e,a,u,s),r=SuperMap.Plot.ArrowToolKit.genArrowBody(e,p,P,c),{arrowTouLen:n,leftBodyPts:i,rightBodyPts:r}},SuperMap.Plot.ArrowToolKit.genArrowBody=function(t,e,l,o){var n=new SuperMap.Plot.Path2D;if(!(t<2)){n.MoveTo(e[1]);for(var i=1;i<=t-1;i++)n.CubicTo(o[i],l[i+1],e[i+1]);var r=[];return n.ToSubPathPolygons(r),r[0]}}},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol12500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(.03)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.5),this.getScaleValues().push(.03));var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=this.getScaleValues()[0];this.getIsEdit()||(this.getScaleValues()[1]=this.getSubSymbolScaleValue());var o=this.getScaleValues()[1]*e,n=l*e,i=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,n);if(-1!==i.index){var r=i.pt,a=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[r,new SuperMap.Geometry.Point(r.x+o,r.y)]);a.push(a[0]);for(var p=0;p<t.length-1;p++){var u=t[p],s=t[p+1],P=SuperMap.Plot.PlottingUtil.distance(r,u),c=SuperMap.Plot.PlottingUtil.distance(r,s);if(!(P<o&&c<o))if(P>o&&c<o||P<o&&c>o){var S;S=P>o?u:s,(h=this.getLineAddCircleIntersectPts(u,s,a)).length>0&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[h[0],S])}else{var y=SuperMap.Plot.PlottingUtil.projectPoint(r,u,s);if(SuperMap.Plot.PlottingUtil.distance(r,y)>=o)this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[u,s]);else if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(y,u,s)){var h=this.getLineAddCircleIntersectPts(u,s,a);if(h.length>0){h.unshift(u),h.push(s);for(var f=0;f<h.length-1;f++)this.isLineInCircle(h[f],h[f+1],r,o)||this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[h[f],h[f+1]])}}else this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[u,s])}}this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[r,new SuperMap.Geometry.Point(r.x+o,r.y)]),this.clearScalePoints();var g=r;g.isScalePoint=!0,g.tag=0,this.addScalePoint(g);var M=new SuperMap.Geometry.Point(r.x+o,r.y);M.isScalePoint=!0,M.tag=1,this.addScalePoint(M)}}}},{key:"isLineInCircle",value:function(t,e,l,o){var n=new SuperMap.Geometry.Point((t.x+e.x)/2,(t.y+e.y)/2);return o>SuperMap.Plot.PlottingUtil.distance(n,l)}},{key:"getLineAddCircleIntersectPts",value:function(t,e,l){for(var o=[],n=0;n<l.length-1;n++){var i=l[n],r=l[n+1],a=SuperMap.Plot.PlottingUtil.intersectLines(t,e,i,r);a.isIntersectLines&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(a.intersectPoint,t,e)&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(a.intersectPoint,i,r)&&o.push(a.intersectPoint)}for(var p=0;p<o.length-1;p++)SuperMap.Plot.PlottingUtil.isSamePt(o[p],o[p+1])&&(o.splice(p,1),p--);if(t.x>e.x){for(u=0;u<o.length&&u!=o.length-1;u++)if(o[u].x<o[u+1].x){s=o[u];o[u]=o[u+1],o[u+1]=s}}else if(t.x<e.x){for(u=0;u<o.length&&u!=o.length-1;u++)if(o[u].x>o[u+1].x){s=o[u];o[u]=o[u+1],o[u+1]=s}}else if(t.y>e.y){for(u=0;u<o.length&&u!=o.length-1;u++)if(o[u].y<o[u+1].y){s=o[u];o[u]=o[u+1],o[u+1]=s}}else if(t.y<e.y)for(var u=0;u<o.length&&u!=o.length-1;u++)if(o[u].y>o[u+1].y){var s=o[u];o[u]=o[u+1],o[u+1]=s}return o}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t){for(var n=0,i=-1,r=null,a=0;a<l.length-1;a++){var p=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,l[a],l[a+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(p.projectPoint,l[a],l[a+1])){var u=SuperMap.Plot.PlottingUtil.distance(p.projectPoint,e);0==n?(n=u,i=a,r=p.projectPoint):u<n&&(n=u,i=a,r=p.projectPoint)}}if(-1==i)return void this.calculateParts();for(var s=0,a=0;a<i;a++)s+=SuperMap.Plot.PlottingUtil.distance(l[a],l[a+1]);var P=(s+=SuperMap.Plot.PlottingUtil.distance(r,l[i]))/o;P>1&&(P=1),this.getScaleValues()[0]=P}if(1===t){var c=this.getScaleValues()[0]*o,S=SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,c);if(-1===S.index)return void this.calculateParts();var y=SuperMap.Plot.PlottingUtil.distance(S.pt,e)/o;y>.4&&(y=.4),this.getScaleValues()[1]=y}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol12500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17703",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,l.subText="加",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=[];if(this.clearScalePoints(),t.length<3)l.push(new SuperMap.Geometry.Point(t[0].x,t[0].y)),l.push(new SuperMap.Geometry.Point(t[1].x,t[1].y));else{var o=SuperMap.Plot.PlottingUtil.computeBeizerPoints(this.getIsEdit(),t,this.getScaleValues());this.setScaleValues(o.scaleValues);for(var n=0;n<o.scalePoints.length;n++)this.addScalePoint(o.scalePoints[n]);l=SuperMap.Plot.PlottingUtil.clearSamePts(o.beizerPoints)}if(!(l.length<2)){var i=e/2;if(-1!==SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,i).index){var r;r=2===t.length?0:t.length-1;var a;if(this.getIsEdit())a=this.getScaleValues()[4*r]*e,isNaN(a)&&(a=Math.abs(this.getScaleValues()[4*r-1]*e))<.5&&(a=.5);else{var p=.5*this.getSubSymbolScaleValue();a=p*e,this.getScaleValues().push(p)}var u=i-a,s=i+a,P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,u);if(-1!==P.index){var c=P.pt;this.addScalePoint(new SuperMap.Geometry.Point(c.x,c.y));var S=[];if(0===P.index)S.push(l[0]);else for(g=0;g<P.index;g++)S.push(l[g]);S.push(c);var y=SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,s);if(-1!==y.index){var h=y.pt,f=[];f.push(h);for(var g=y.index+1;g<l.length;g++)f.push(l[g]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);var M=S[S.length-1],b=f[0],d=180*SuperMap.Plot.PlottingUtil.radian(M,b)/Math.PI,m=(SuperMap.Plot.PlottingUtil.distance(M,b),new SuperMap.Geometry.Point((M.x+b.x)/2,(M.y+b.y)/2)),v=this.subText,O={surroundLineFlag:!1,fontSize:15,fontSizeLimit:!0};O.labelAlign="cm",O.labelRotation=-d,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,m,O,v)}}}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),t<0||t>2*l.length-2)return;for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);if(2*(l.length-1)===t||2===l.length){for(var i=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l),r=0,n=0;n<i.length-1;n++)r+=SuperMap.Plot.PlottingUtil.distance(i[n],i[n+1]);var a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,r/2);if(-1===a.index)return;var p=SuperMap.Plot.PlottingUtil.distance(e,a.pt)/o;p>.45&&(p=.45),2==l.length?this.getScaleValues()[0]=p:this.getScaleValues()[2*t]=p}else{var u=-1;u=t%2==0?t/2:(t+1)/2;var s=(e.x-l[u].x)/o,P=(e.y-l[u].y)/o;this.getScaleValues()[2*t]=s,this.getScaleValues()[2*t+1]=P}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17703=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17800",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=new SuperMap.Geometry.Point(t[t.length-1].x,t[t.length-1].y),o=0;2==t.length?this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t):(this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t),o=SuperMap.Plot.PlottingUtil.radian(e,l)*this.RTOD);var n=SuperMap.Plot.PlottingUtil.distance(e,l),i=SuperMap.Plot.PlottingUtil.circlePoint(e,.78*n,.78*n,o+180),r=SuperMap.Plot.PlottingUtil.circlePoint(e,1.26*n,1.26*n,o+180),a=[];a.push(i.clone()),a.push(r.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a);var p=SuperMap.Plot.PlottingUtil.circlePoint(e,.1*n,.1*n,o+180),u=SuperMap.Plot.PlottingUtil.circlePoint(e,.58*n,.58*n,o+180);(a=[]).push(p.clone()),a.push(u.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a);var s=SuperMap.Plot.PlottingUtil.circlePoint(e,.1*n,.1*n,o),P=SuperMap.Plot.PlottingUtil.circlePoint(e,.58*n,.58*n,o);(a=[]).push(s.clone()),a.push(P.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a);var c=SuperMap.Plot.PlottingUtil.circlePoint(e,.78*n,.78*n,o),S=SuperMap.Plot.PlottingUtil.circlePoint(e,1.26*n,1.26*n,o);(a=[]).push(c.clone()),a.push(S.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17800=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol23400",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);(t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts||this.addCell(SuperMap.Plot.SymbolType.KIDNEY,t)}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol23400=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol26600",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=99999,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);for(var l=SuperMap.Plot.PlottingUtil.polylineDistance(e)/19,o=0;o<18;o++){var n=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,l);if(-1!==n.index){if(0==o%2){for(var i=[],r=0;r<n.index+1;r++)i.push(e[r].clone());i.push(n.pt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i)}var a=[];a.push(n.pt);for(var p=n.index+1;p<e.length;p++)a.push(e[p]);e=(e=[]).concat(a)}}e.length>1&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol26600=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol29100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&l.getScaleValues().push(.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());var l=[];t.length<=3?l=SuperMap.Plot.Primitives.getKendyShapePts(t):(t.push(t[0]),l=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,l);for(var o=0;o<4;o++){var n=Math.floor(o*l.length/4),i=new SuperMap.Geometry.Point(l[n].x,l[n].y),r=new SuperMap.Geometry.Point(l[n+1].x,l[n+1].y),a=new SuperMap.Geometry.Point((i.x+r.x)/2,(i.y+r.y)/2),p=SuperMap.Plot.PlottingUtil.radian(r,a)*this.RTOD,u=this.getScaleValues()[0]*e/2,s=SuperMap.Plot.PlottingUtil.circlePoint(a,u,u,p),P=SuperMap.Plot.PlottingUtil.circlePoint(a,4*u,4*u,p+270),c=SuperMap.Plot.PlottingUtil.circlePoint(a,u,u,p+180);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[s,P,c],{lineTypeLimit:!0,surroundLineLimit:!0})}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol29100=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30000",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(Math.PI/2),l.getScaleValues().push(.2),l.getScaleValues().push(.5),l.getScaleValues().push(.05)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,l);var o=e*this.getScaleValues()[0],n=this.getScaleValues()[1]*this.RTOD;if(!this.getIsEdit()){var i=this.getSubSymbolScaleValue();this.getScaleValues()[2]=i}var r=e*this.getScaleValues()[2],a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,o);if(-1!==a.index){var p=a.pt,u=new SuperMap.Geometry.Point(l[a.index].x,l[a.index].y),s=new SuperMap.Geometry.Point(l[a.index+1].x,l[a.index+1].y),P=SuperMap.Plot.PlottingUtil.radian(u,s)*this.RTOD,c=SuperMap.Plot.PlottingUtil.circlePoint(p,r,r,P+n);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[p,c]);var S=SuperMap.Plot.PlottingUtil.radian(p,c)*this.RTOD,y=new SuperMap.Geometry.Point(-.2*r,.05*r),h=new SuperMap.Geometry.Point(-.2*r,-.05*r),f=SuperMap.Plot.PlottingUtil.coordinateTrans(c,y,S),g=SuperMap.Plot.PlottingUtil.coordinateTrans(c,h,S),M={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[c,f,g],M),this.addScalePoint(p,0),this.addScalePoint(c,1)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(0===t){for(var i=-1,r=0,a=new SuperMap.Geometry.Point(0,0),p=0;p<o.length-1;p++){var u=[];u.push(o[p]),u.push(o[p+1]);var s=SuperMap.Plot.PlottingUtil.projectPoint(e,o[p],o[p+1]);if(-1!==SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(s,u).index){var P=SuperMap.Plot.PlottingUtil.distance(e,s);-1===i?(i=p,a=s,r=P):r>P&&(i=p,a=s,r=P)}}-1===i&&Math.ceil(e.x,1)<=Math.ceil(o[0].x,1)?(i=0,a=o[0]):-1===i&&i===o[o.length-2]&&(i=0,a=o[0]),-1===i&&Math.ceil(e.x,1)>=Math.ceil(o[o.length-1].x,1)?(i=o.length-1,a=o[o.length-1]):-1===i&&(i=o.length-1,a=o[o.length-1]);for(var c=0,p=0;p<i;p++)c+=SuperMap.Plot.PlottingUtil.distance(o[p],o[p+1]);var S=(c+=SuperMap.Plot.PlottingUtil.distance(o[i],a))/n;this.getScaleValues()[0]=S}else if(1===t){var y=n*this.getScaleValues()[0],h=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,y);if(-1===h.index)return;var f=h.pt,g=o[h.index],M=o[h.index+1],b=SuperMap.Plot.PlottingUtil.radian(g,M),d=SuperMap.Plot.PlottingUtil.radian(f,e)-b;this.getScaleValues()[1]=d;var m=(c=SuperMap.Plot.PlottingUtil.distance(f,e))/n;this.getScaleValues()[2]=m}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30000=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30200",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,0===l.getScaleValues().length&&(l.getScaleValues().push(1e3),l.getScaleValues().push(.2),l.getScaleValues().push(.1)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);o=SuperMap.Plot.PlottingUtil.clearSamePts(o),this.getIsEdit()||(this.getScaleValues()[1]=2*this.getSubSymbolScaleValue());var n=e*this.getScaleValues()[1],i=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,n);if(-1!==i.index){var r=t[0],a=i.pt,p=SuperMap.Plot.PlottingUtil.radian(r,a)*this.RTOD,u=new SuperMap.Geometry.Point(0,.1*n),s=new SuperMap.Geometry.Point(.4*n,.1*n),P=new SuperMap.Geometry.Point(.4*n,-.1*n),c=new SuperMap.Geometry.Point(0,-.1*n),S=SuperMap.Plot.PlottingUtil.coordinateTrans(r,u,p),y=SuperMap.Plot.PlottingUtil.coordinateTrans(r,s,p),h=SuperMap.Plot.PlottingUtil.coordinateTrans(r,P,p),f=SuperMap.Plot.PlottingUtil.coordinateTrans(r,c,p),g={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[S,y,h,f,S],g);var M=this.getSubSymbolScaleValue()*n,b=new SuperMap.Geometry.Point(.3*n,0),d=SuperMap.Plot.PlottingUtil.circlePoint(b,M,M,135),m=SuperMap.Plot.PlottingUtil.circlePoint(b,M,M,225),v=SuperMap.Plot.PlottingUtil.coordinateTrans(r,b,p),O=SuperMap.Plot.PlottingUtil.coordinateTrans(r,d,p),L=SuperMap.Plot.PlottingUtil.coordinateTrans(r,m,p);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[O,v,L]);var U=new SuperMap.Geometry.Point(.9*n,0),_=SuperMap.Plot.PlottingUtil.coordinateTrans(r,U,p);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[v,_]);var w=new SuperMap.Geometry.Point(.8*n,.025*n),x=new SuperMap.Geometry.Point(.8*n,-.025*n),T=SuperMap.Plot.PlottingUtil.coordinateTrans(r,w,p),E=SuperMap.Plot.PlottingUtil.coordinateTrans(r,x,p),A={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[_,T,E],A);var G=[];G.push(i.pt);for(l=i.index+1;l<o.length;l++)G.push(o[l]);this.addArrow(G);var C=SuperMap.Plot.PlottingUtil.circlePoint(r,n,n,p+90);this.addScalePoint(C,0)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);var i=l[0],r=e,a=SuperMap.Plot.PlottingUtil.distance(r,i);if(0===t){var p=a/o;if(.06>p||.3<p)return void this.calculateParts();this.getScaleValues()[1]=p}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30200=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol31300",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var o=this.getScaleValues()[0]*e,n=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(o,t[0],t[1]),i=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(o,t[1],t[0]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[n.pntLeft,n.pntRight]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[i.pntLeft,i.pntRight]),this.addScalePoint(i.pntRight,0)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);if(0===t){var i=l[0],r=e,a=SuperMap.Plot.PlottingUtil.distance(r,i)/o;this.getScaleValues()[0]=a}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol31300=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol31400",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,t);var e=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),l=Math.abs(t[1].x-t[0].x)*this.getSubSymbolScaleValue(),o=new SuperMap.Geometry.Point(e.x-l,e.y-l),n=new SuperMap.Geometry.Point(e.x+l,e.y+l),i={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,[o,n],i,!0)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol31400=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol2121601",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(1),l.subText="通",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=t[0],l=t[1],o=SuperMap.Plot.PlottingUtil.distance(e,l);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);for(var n=SuperMap.Plot.PlottingUtil.polylineDistance(t),i=50*this.getSubSymbolScaleValue(),r=n*i*.02,a=n*i*.005,p=.1*n,u=.1*o,s=0;s<=n;s+=p){var P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,s+u);if(-1!==P.index){var c,S=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r,t[P.index],P.pt);c=this.getScaleValues()[0]>0?new SuperMap.Geometry.Point(S.pntLeft.x,S.pntLeft.y):new SuperMap.Geometry.Point(S.pntRight.x,S.pntRight.y);var y=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(a,c,P.pt),h=[];if(h.push(y.pntRight),h.push(c),h.push(y.pntLeft),0===s){var f=new SuperMap.Geometry.Point(c.x,c.y);f.isScalePoint=!0,f.tag=0,this.addScalePoint(f)}var g={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,h,g)}}""===this.textContent&&(this.textContent=this.subText);var M=SuperMap.Plot.PlottingUtil.radian(t[t.length-2],t[t.length-1])*this.RTOD,b=.1*n,d=SuperMap.Plot.PlottingUtil.distance(t[t.length-1],t[t.length-2]),m=SuperMap.Plot.PlottingUtil.linePnt(t[t.length-2],t[t.length-1],.5*b+d),v={surroundLineFlag:!1,fontSize:15,fontSizeLimit:!0};v.fontSize>20&&(v.fontSize=20),v.labelAlign="cm",v.labelRotation=-M,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[m],v,this.textContent)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint&&0===t){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[0],l[1],e);this.getScaleValues()[0]=o?-1:1}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol2121601=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3001104",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=1e3,0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.1)),null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l.subText="私",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents(),2===this.controlPoints.length&&this.calAssistantLine();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=this.getScaleValues()[0],l=this.getScaleValues()[1],o=this.getScaleValues()[2],n=SuperMap.Plot.PlottingUtil.getOutRectangleDis(t);if(0!==n){if(!this.getIsEdit()){var i=this.getSubSymbolScaleValue()*SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints);this.getScaleValues()[2]=i/n}this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var r=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),a=new SuperMap.Geometry.Point(r.x+e*n,r.y+l*n),p=o*n;this.getSubSymbols().length>=0&&this.computeSubSymbol(this.getSubSymbols()[0],r,p,0),""===this.textContent&&(this.textContent=this.subText);var u={surroundLineFlag:!1,fontSize:15,fontSizeLimit:!0,fontColorLimit:!0};u.labelAlign="cm",u.labelRotation=-0,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[a],u,this.textContent),this.addScalePoint(a,0);var s=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,90);this.addScalePoint(s,1)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.getOutRectangleDis(l),n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l);if(0===o)return;var i=new SuperMap.Geometry.Point(e.x,e.y);if(0===t&&(this.getScaleValues()[0]=(i.x-n.x)/o,this.getScaleValues()[1]=(i.y-n.y)/o),1===t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(n.x+r*o,n.y+a*o),u=SuperMap.Plot.PlottingUtil.distance(e,p);this.getScaleValues()[2]=u/o}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3001104=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30013",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999999,null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=.1*SuperMap.Plot.PlottingUtil.distance(t[0],t[1]),l=SuperMap.Plot.PlottingUtil.linePnt(t[t.length-1],t[t.length-2],Math.sqrt(3)*e/4),o=SuperMap.Plot.PlottingUtil.clonePoints(t);o.splice(t.length-1,1),o.push(l);var n=SuperMap.Plot.PlottingUtil.paraLine(o,.25*e,!0),i=SuperMap.Plot.PlottingUtil.paraLine(o,.25*e,!1);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n,null),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i,null);var r=SuperMap.Plot.PlottingUtil.linePnt(t[t.length-1],t[t.length-2],e),a=new SuperMap.Geometry.Point(r.x,r.y),p=new SuperMap.Geometry.Point(r.x,r.y);a=SuperMap.Plot.PlottingUtil.rotateAngle(t[t.length-1],1/6*Math.PI,a),p=SuperMap.Plot.PlottingUtil.rotateAngle(t[t.length-1],11/6*Math.PI,p);var u=[];u.push(a),u.push(t[t.length-1]),u.push(p),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,null)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30013=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30025",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(.02),l.subText="滞",l.getStyle()&&!l.getIsEdit()&&(l.getStyle().color="#00ff00"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents(),2===this.controlPoints.length&&this.calAssistantLine();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t);this.getIsEdit()||(this.getScaleValues()[0]=.3*this.getSubSymbolScaleValue());var o=new SuperMap.Geometry.Point(l.x+1,l.y),n=[];t.push(t[0].clone());for(var i=0;i<t.length-1;i++){var r=SuperMap.Plot.PlottingUtil.intersectLines(l,o,t[i],t[i+1]);r.isIntersectLines&&(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(r.intersectPoint,t[i],t[i+1])&&n.push(r.intersectPoint))}if(!(0>=n.length)){var a=n[0].clone(),p=n[0].clone();for(i=0;i<n.length;i++)a.x>n[i].x&&(a=n[i].clone()),p.x<n[i].x&&(p=n[i].clone());var u=SuperMap.Plot.PlottingUtil.distance(p,a),s=new SuperMap.Geometry.Point(l.x-.25*u,a.y),P=e*this.getScaleValues()[0],c=e*this.getScaleValues()[0],S=c+P,y=new SuperMap.Geometry.Point(s.x,s.y+S);this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[y,new SuperMap.Geometry.Point(y.x+P,y.y)],this.getStyle());var h=new SuperMap.Geometry.Point(s.x,s.y+.8*c),f=new SuperMap.Geometry.Point(s.x-c,s.y-c),g=new SuperMap.Geometry.Point(s.x+c,s.y-c),M=[];M.push(h),M.push(f),M.push(g),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,M,this.getStyle());var b=new SuperMap.Geometry.Point(s.x-.5*c,s.y-c),d=new SuperMap.Geometry.Point(f.x,f.y-2*P),m=new SuperMap.Geometry.Point(s.x+.5*c,s.y-c),v=new SuperMap.Geometry.Point(g.x,g.y-2*P),O=[];O.push(b),O.push(d);var L=[];L.push(m),L.push(v),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,O,this.getStyle()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,L,this.getStyle()),""===this.textContent&&(this.textContent=this.subText);var U={fontColorLimit:!0,fontColor:"#00ff00",fontSizeLimit:!0,fontSize:20};U.labelAlign="cm",U.labelRotation=-0,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[l],U,this.textContent)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30025=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol50108",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.05),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];3>=t.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e);var l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),o=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(!this.getIsEdit()){var n=this.getDefaultSubSymbolSize()/o;(n>.3||n<=0)&&(n=.3),this.getScaleValues()[0]=2*n}var i=this.getScaleValues()[0],r=(this.getScaleValues()[1],this.getScaleValues()[2]),a=this.getScaleValues()[3],p=o*i,u=new SuperMap.Geometry.Point(l.x+o*r,l.y+o*a);this.getSubSymbols()&&null!==this.getSubSymbols()&&this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],u,p,0),this.addScalePoint(u);var s=p,P=SuperMap.Plot.PlottingUtil.circlePoint(u,s,s,90);this.addScalePoint(P)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=[];3>=l.length?o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o),i=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t){r=(e.x-n.x)/i;this.getScaleValues()[2]=r;a=(e.y-n.y)/i;this.getScaleValues()[3]=a}else if(1===t){var r=this.getScaleValues()[2],a=this.getScaleValues()[3],p=new SuperMap.Geometry.Point(n.x+i*r,n.y+i*a),u=SuperMap.Plot.PlottingUtil.distance(p,e)/i;this.getScaleValues()[0]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol50108=p},function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Plot=SuperMap.Plot=SuperMap.Plot||{};SuperMap.Plot.SymbolType={DOTSYMBOL:1,ALGOSYMBOL:2,TEXTSYMBOL:34,ELLIPSESYMBOL:31,CIRCLESYMBOL:29,RECTANGLESYMBOL:26,ARBITRARYPOLYGONSYMBOL:32,POLYLINESYMBOL:24,PARALLELOGRAM:28,ARCSYMBOL:44,REGULARPOLYGON:410,CHORDSYMBOL:370,PIESYMBOL:380,KIDNEY:390,POLYBEZIERSYMBOL:590,PARALLELLINE:48,BRACESYMBOL:400,ANNOFRAMESYMBOL:320,ANNOFRAMESYMBOLM:321,TRAPEZOIDSYMBOL:350,POLYBEZIERCLOSESYMBOL:360,GROUPOBJECT:1e3,LINERELATION:1001,INTERFERENCEBEAM:1002,POLYGONREGION:1003,ARCREGION:1004,AIRROUTE:1005,NAVYROUTE:1006,MISSILEROUTE:1007,NAVYDEPLOYMENT:1008,AIRDEPLOYMENT:1009,SATELLITE:1010,SATELLITETIMEWINDOWS:1011,SYMBOLTEXT:1012,RUNWAY:1013,CURVEEIGHT:1014,ROUTENODE:1015,ARROWLINE:1016,PATHTEXT:1017,LITERATESIGN:1018,CONCENTRICCIRCLE:1019,FLAGGROUP:1020,SYMBOLTEXT1:1021,COMBINATIONALCIRCLE:1022,FREECURVE:1023,SYMBOLTEXTBOX:1024,NODECHAIN:1025,LINEMARKING:1026,AVOIDREGION:1027},SuperMap.Plot.LineRelation={SOLID:0,DASH:1,ARROW:2},SuperMap.Plot.AlgoSurroundLineType={NONE:0,INNER:1,OUT:2,ALL:3},SuperMap.Plot.RouteNodeType={RENDEZVOUS:"RENDEZVOUS",EXPANDING:"EXPANDING",VOLLEY:"VOLLEY",STANDBY:"STANDBY",SUPPLY:"SUPPLY",TAKEOFF:"TAKEOFF",INITIAL:"INITIAL",VISUALINITAL:"VISUALINITAL",LANCH:"LANCH",TURNING:"TURNING",AIMING:"AIMING",COMMONROUTE:"COMMONROUTE",WEAPONLAUNCH:"WEAPONLAUNCH",TARGET:"TARGET",ATTACK:"ATTACK",SUPPRESS:"SUPPRESS",EIGHTSPIRAL:"EIGHTSPIRAL",HAPPYVALLEY:"HAPPYVALLEY"},SuperMap.Plot.RelLineText={ONLINE:0,ONLEFTLINE:1,ONRIGHTLINE:2,ONBOTHLINE:3},SuperMap.Plot.RadiusLineType={NONE:0,SOLID:1,ARROW:2},SuperMap.Plot.AnnoPosition={LEFTTOP:0,LEFTBOTTOM:1,RIGHTTOP:2,RIGHTBOTTOM:3,TOP:4,BOTTOM:5,LEFT:6,RIGHT:7},SuperMap.Plot.ArrowLineType={DOUBLELINE:0,TRIANGLESOLID:1,NONE:2},SuperMap.Plot.TextBoxType={WITHTIPBOX:0,RECTBOX:1,LINEBOX:2,NONEBOX:3},SuperMap.Plot.PositionOffsetType={LINE:0,GRADIENTLINE:1},SuperMap.Plot.AlignType={LEFT:0,RIGHT:1,UP:2,DOWN:3,VERTICALCENTER:4,HORIZONTALCENTER:5},SuperMap.Plot.AddPoint_WayType={UNKNOWN:0,POLYLINE:1,CURVE:2},SuperMap.Plot.EditMode={ADDCONTROLPOINT:0,EDITCONTROLPOINT:1,EDITCIRCUMRECTANGLE:2}},function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PlottingUtil=SuperMap.Plot.PlottingUtil=SuperMap.Plot.PlottingUtil||{};SuperMap.Plot.PlottingUtil.getSurroundLinePts=function(t,e){for(var l=[],o=[],n=0;n<t.length-1;n++){var i,r,a=[];if(!SuperMap.Plot.PlottingUtil.equalFuzzy(t[n].x,t[n+1].x)||!SuperMap.Plot.PlottingUtil.equalFuzzy(t[n].y,t[n+1].y)){a.push(t[n]),a.push(t[n+1]);var p=SuperMap.Plot.PlottingUtil.parallel(a,e);if(i=p[0],r=p[1],0!=l.length){var u=SuperMap.Plot.PlottingUtil.intersectLines(i,r,l[0],l[1]);if(u.isIntersectLines){var s=u.intersectPoint,P=SuperMap.Plot.PlottingUtil.distance(i,r);SuperMap.Plot.PlottingUtil.distance(s,r)>2*P?o.push(r):(o[o.length-1]=s,o.push(r))}else o.push(r)}else o.push(i),o.push(r);(l=[]).push(o[o.length-2]),l.push(o[o.length-1])}}if(t[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y&&1<o.length){var c=SuperMap.Plot.PlottingUtil.intersectLines(o[0],o[1],o[o.length-2],o[o.length-1]);if(c.isIntersectLines){var S=c.intersectPoint;o[o.length-1]=S,o[0]=S}}return o},SuperMap.Plot.PlottingUtil.getDataFromServer=function(t,e,l,o,n,i,r,a){var p;void 0!==i&&(p=i);var u=new SuperMap.GetSymbolInfoService(t);u.events.on({processCompleted:r,processFailed:a,scope:p});var s=new SuperMap.GetSymbolInfoParameters;s.libID=e,s.code=l,n&&SuperMap.Util.extend(s,n),o&&null!==o&&(SuperMap.Util.isArray(o)||(o=[o]),s.inputPoints=o),u.processAsync(s)},SuperMap.Plot.PlottingUtil.innerOutlineDir=function(t){function e(t,e){function l(t){var e=Math.atan2(t.y,t.x);return e<0&&(e+=2*Math.PI),e}var o=l(e)-l(t);return o<-Math.PI&&(o+=2*Math.PI),o>Math.PI&&(o-=2*Math.PI),o}if(t.length<3)return 1;for(var l=0,o={x:0,y:0},n={x:0,y:0},i=2;i<t.length;i++)n.x=t[i].x-t[i-1].x,n.y=t[i].y-t[i-1].y,o.x=t[i-1].x-t[i-2].x,o.y=t[i-1].y-t[i-2].y,l+=e(o,n);return n.x=t[1].x-t[0].x,n.y=t[1].y-t[0].y,o.x=t[0].x-t[t.length-1].x,o.y=t[0].y-t[t.length-1].y,(l+=e(o,n))>=0?-1:1},SuperMap.Plot.PlottingUtil.isNear=function(t,e){return e||(e=1e-18),t<e&&t>-e},SuperMap.Plot.PlottingUtil.equalFuzzy=function(t,e,l){return l||(l=1e-18),Math.abs(t-e)<=l},SuperMap.Plot.PlottingUtil.intersectLines=function(t,e,l,o){var n={};if(n.isIntersectLines=!1,t.x===e.x&&t.y===e.y||l.x===o.x&&l.y===o.y)return n;var i=e.x-t.x,r=e.y-t.y,a=o.x-l.x,p=o.y-l.y,u=i*p-a*r;if(this.isNear(u))return n;var s=(i*(t.y-l.y)-r*(t.x-l.x))/u,P=new SuperMap.Geometry.Point(0,0);return P.x=s*a+l.x,P.y=s*p+l.y,n.isIntersectLines=!0,n.intersectPoint=P,n},SuperMap.Plot.PlottingUtil.getEnvelopePoints=function(t){function e(t,e,l){for(var o=t.components[0].components,n=new SuperMap.Geometry.Point(0,0),i=0;i<o.length-1;i++)if(this.intersectLineSegs(e,l,o[i],o[i+1],n))return n;return null}function l(t,e){if(0===t.length||this.equalFuzzy(e[0].x,e[e.length-1].x,.5)&&this.equalFuzzy(e[0].y,e[e.length-1].y,.5))return e;for(var o=e[e.length-1],n=0;n<t.length;n++)if(this.equalFuzzy(t[n][0].x,o.x,.5)&&this.equalFuzzy(t[n][0].y,o.y,.5)){if(e=e.concat(t[n]),t.splice(n,1),void 0!==(r=l(t,e))&&0!==r.length)return r}else if(this.equalFuzzy(t[n][t[n].length-1].x,o.x,.5)&&this.equalFuzzy(t[n][t[n].length-1].y,o.y,.5)){for(var i=t[n].length-1;i>=0;i--)e.push(t[n][i]);t.splice(n,1);var r=l(t,e);if(void 0!==r&&0!==r.length)return r}return e}if(SuperMap.Util.isArray(t)||(t=[t]),0===t.length)return[];if(1===t.length)return t[0];for(n=0;n<t.length;n++)for(c=n+1;c<t.length;)!function(t,e){if(t.length!==e.length)return!1;for(var l=0;l<t.length;l++)if(t[l].x!==e[l].x||t[l].y!==e[l].y)return!1;return!0}(t[n],t[c])?c++:t.splice(c,1);for(var o=[],n=0;n<t.length;n++)o.push(new SuperMap.Geometry.Polygon([new SuperMap.Geometry.LinearRing(t[n])]));for(var i=[],n=0;n<t.length;n++){var r=[],a=[],p=-1,u=-1,s=o.slice();s.splice(n,1);for(var P={},c=0;c<t[n].length;c++)if(function(t,e,l){for(var o=0;o<t.length;o++)if(t[o].containsPoint(e))return l.index=o,!0;return!1}(s,t[n][c],P)){if(0!==a.length){var S=e(o[P.index],t[n][c-1],t[n][c]);S&&S!==t[n][c-1]&&S!==t[n][c]&&a.push(S),r.push(a),a=[]}}else 0===c&&(p=r.length),c===t[n].length-1&&(u=r.length),0===a.length&&void 0!==P.index&&(S=e(o[P.index],t[n][c-1],t[n][c]))&&S!==t[n][c-1]&&S!==t[n][c]&&a.push(S),a.push(t[n][c].clone());if(0!==a.length&&r.push(a),p<r.length&&u<r.length&&p!==u){for(var y=0;y<r[p].length;y++)r[u].push(r[p][y]);r.splice(p,1)}i=i.concat(r)}for(var h=[];0!==i.length;){var f=i[0];i.splice(0,1);var g=l(i,f);void 0!==g&&(f=g),f.length>2&&h.push(f)}return h},SuperMap.Plot.PlottingUtil.isRight=function(t,e,l){var o=e,n=l,i=e,r=t;return(n.x-o.x)*(r.y-i.y)-(r.x-i.x)*(n.y-o.y)<0},SuperMap.Plot.PlottingUtil.radian=function(t,e){var l,o,n=0;return t instanceof L.LatLng&&e instanceof L.LatLng?(l=e.lng-t.lng,o=e.lat-t.lat):(l=e.x-t.x,o=e.y-t.y),(n=Math.atan2(o,l))<0&&(n+=2*Math.PI),n},SuperMap.Plot.PlottingUtil.findBisectorPoint=function(t,e,l,o){var n=this.radian(e,t),i=(n+this.radian(e,l))/2,r=Math.cos(i-n+Math.PI/2),a=o;this.isNear(r,.15)||(a=o/r);var p=e.x+a*Math.cos(i),u=e.y+a*Math.sin(i);return new SuperMap.Geometry.Point(p,u)},SuperMap.Plot.PlottingUtil.findPoint=function(t,e,l,o){if(t===e||Math.abs(l)<1e-18)return t;var n=this.radian(t,e)+o*Math.PI/180,i=t.x+l*Math.cos(n),r=t.y+l*Math.sin(n);return new SuperMap.Geometry.Point(i,r)},SuperMap.Plot.PlottingUtil.isSameQuadrant=function(t,e,l,o){var n=(e.x-t.x)*(o.x-l.x),i=(e.y-t.y)*(o.y-l.y);return!(Math.abs(n)<1e-18&&Math.abs(i)<1e-18)&&((n>0||Math.abs(n)<1e-18)&&(i>0||Math.abs(i)<1e-18))},SuperMap.Plot.PlottingUtil.isCross=function(t,e,l,o){var n=new SuperMap.Geometry.Point(0,0);return!(!this.intersectLineSegs(t,e,l,o,n)||n==t||n===e||n===l||n==o)},SuperMap.Plot.PlottingUtil.intersectLineSegs=function(t,e,l,o,n){if(this.equalFuzzy(t.x,e.x)&&SuperMap.Plot.PlottingUtil.equalFuzzy(t.y,e.y))return n.x=t.x,n.y=t.y,!1;if(this.equalFuzzy(l.x,o.x)&&this.equalFuzzy(l.y,o.y))return n.x=l.x,n.y=l.y,!1;var i=0,r=0;if(i=t.x>e.x?t.x:e.x,r=t.x<e.x?t.x:e.x,l.x-i>1e-16&&o.x-i>1e-16||l.x-r<-1e-16&&o.x-r<-1e-16)return!1;if(i=t.y>e.y?t.y:e.y,r=t.y<e.y?t.y:e.y,l.y-i>1e-16&&o.y-i>1e-16||l.y-r<-1e-16&&o.y-r<-1e-16)return!1;var a=e.x-t.x,p=e.y-t.y,u=o.x-l.x,s=o.y-l.y,P=t.x-l.x,c=t.y-l.y,S=a*s-u*p,y=S;if(Math.abs(a)>1e-18&&Math.abs(u)>1e-18&&(y/=a*u),Math.abs(y)<1e-18)return t===l?(n.x=t.x,n.y=t.y,!this.isSameQuadrant(t,e,l,o)):e===o?(n.x=e.x,n.y=e.y,!this.isSameQuadrant(t,e,l,o)):t===o?(n.x=t.x,n.y=t.y,this.isSameQuadrant(t,e,l,o)):e===l&&(n.x=e.x,n.y=e.y,this.isSameQuadrant(t,e,l,o));var h=(a*c-p*P)/S,f=(u*c-s*P)/S;return!(h<0&&(Math.abs(h*u)>1e-16||Math.abs(h*s)>1e-16))&&(!(h>1&&(Math.abs((h-1)*u)>1e-16||Math.abs((h-1)*s)>1e-16))&&(!(f<0&&(Math.abs(f*a)>1e-16||Math.abs(f*p)>1e-16))&&(!(f>1&&(Math.abs((f-1)*a)>1e-16||Math.abs((f-1)*p)>1e-16))&&(Math.abs(h)<1e-18?(n.x=l.x,n.y=l.y,!0):Math.abs(h-1)<1e-18?(n.x=o.x,n.y=o.y,!0):Math.abs(f)<1e-18?(n.x=t.x,n.y=t.y,!0):Math.abs(f-1)<1e-18?(n.x=e.x,n.y=e.y,!0):!(h<0&&(Math.abs(h*u)>1e-16||Math.abs(h*s)>1e-16))&&(!(h>1&&(Math.abs((h-1)*u)>1e-16||Math.abs((h-1)*s)>1e-16))&&(!(f<0&&(Math.abs(f*a)>1e-16||Math.abs(f*p)>1e-16))&&(!(f>1&&(Math.abs((f-1)*a)>1e-16||Math.abs((f-1)*p)>1e-16))&&(n.x=h*u+l.x,n.y=h*s+l.y,!0))))))))},SuperMap.Plot.PlottingUtil.parallel=function(t,e){var l=[];if(!t||null===t||t.length<2)return l;var o=!1;t.length>3&&t[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y&&(o=!0),o?(l[0]=this.findBisectorPoint(t[t.length-2],t[0],t[1],e),l[t.length-1]=l[0]):(l[0]=this.findPoint(t[0],t[1],e,90),l[t.length-1]=this.findPoint(t[t.length-1],t[t.length-2],-e,90));for(var n=t[0],i=t[1],r=t[1],a=1;a<t.length-1;a++)if(i=t[a],t[a]!==t[a-1]&&(n=t[a-1]),t[a]!==t[a+1]){r=t[a+1];u=this.findBisectorPoint(n,i,r,e);this.isCross(n,l[a-1],i,u)&&(u=l[a-1]),l[a]=u}else{for(var p=a;p<nPntCount-1;){if(pSrc[p]!==pSrc[p+1]){r=pSrc[p+1];break}p++}if(p<nPntCount-1){var u=this.FindBisectorPoint(n,i,r,e);for(this.isCross(n,pntResults[a-1],i,u)&&(u=pntResults[a-1]);a<p;)pntResults[a]=u,a++;a=p-1}}return l},SuperMap.Plot.PlottingUtil.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},SuperMap.Plot.PlottingUtil.projectPoint=function(t,e,l){if(e===l)return e;var o=new SuperMap.Geometry.Point(0,0),n=l.x-e.x,i=e.y-l.y,r=n*n,a=i*i,p=n*i,u=n*n+i*i;return o.x=(p*(e.y-t.y)+e.x*a+t.x*r)/u,o.y=(p*(e.x-t.x)+e.y*r+t.y*a)/u,o},SuperMap.Plot.PlottingUtil.pointToLineDis=function(t,e,l){var o=this.projectPoint(t,e,l);return this.distance(t,o)},SuperMap.Plot.PlottingUtil.pointToPloyLineDis=function(t,e,l){if(e===l)return this.distance(t,e);var o=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y),n=(l.x-t.x)*(l.x-t.x)+(l.y-t.y)*(l.y-t.y),i=(e.x-l.x)*(e.x-l.x)+(e.y-l.y)*(e.y-l.y),r=(o+i-n)/(2*i);r<0?r=0:r>1&&(r=1);var a=(l.x-e.x)*r+e.x,p=(l.y-e.y)*r+e.y,u=(a-t.x)*(a-t.x)+(p-t.y)*(p-t.y);return Math.sqrt(u)},SuperMap.Plot.PlottingUtil.isCounterClockwise=function(t,e,l){return(l.x-e.x)*(t.y-e.y)-(t.x-e.x)*(l.y-e.y)>0},SuperMap.Plot.PlottingUtil.clearSamePts=function(t){for(var e=t.length,l=0;l<e-1;)this.equalFuzzy(t[l].x,t[l+1].x)&&this.equalFuzzy(t[l].y,t[l+1].y)?(t.splice(l,1),e--):l++;return t},SuperMap.Plot.PlottingUtil.getBeizerCtrlPt=function(t){var e=[],l=t.length;if(l<3)for(n=0;n!=l;++n)e[n]=t[n].clone();else{for(var o=0,n=0;n<3*l-2;n+=3)e[n]=t[o].clone(),e[n+1]=new SuperMap.Geometry.Point(0,0),e[n+2]=new SuperMap.Geometry.Point(0,0),o++;for(n=1;n<l-1;n++)SuperMap.Plot.PlottingUtil.getTrianglePoints(8,3,t[n-1],t[n],t[n+1],e[3*n-1],e[3*n+1]);SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.6,e[0],e[3],e[2],e[1]),SuperMap.Plot.PlottingUtil.getTrapezoidPoints(.6,e[3*l-3],e[3*l-6],e[3*l-5],e[3*l-4]),e[3*l-1]=e[3*l-2]=t[l-1].clone()}return e},SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt=function(t){var e=SuperMap.Plot.PlottingUtil.getBeizerCtrlPt(t);return SuperMap.Plot.PlottingUtil.generateBeizerPointsWithCtrlPt(e)},SuperMap.Plot.PlottingUtil.generateBeizerPointsWithCtrlPt=function(t){var e=t.length,l=[];if(t.length<3)for(o=0;o<e;o++)l[o]=t[o].clone();else{e/=3;for(var o=0;o<3*e&&!(o+4>=3*e);o+=3){var n=t[o].x,i=t[o].y,r=t[o+1].x,a=t[o+1].y,p=t[o+2].x,u=t[o+2].y,s=t[o+3].x,P=t[o+3].y;if(SuperMap.Plot.PlottingUtil.equalFuzzy(n,r,1e-10)&&SuperMap.Plot.PlottingUtil.equalFuzzy(i,a,1e-10)&&SuperMap.Plot.PlottingUtil.equalFuzzy(p,s,1e-10)&&SuperMap.Plot.PlottingUtil.equalFuzzy(u,P,1e-10))l.push(new SuperMap.Geometry.Point(n,i)),l.push(new SuperMap.Geometry.Point(p,u));else for(var c=0;c<=1;c+=.03125){var S,y,h,f,g=c*c,M=g*c;S=1-3*c+3*g-M,y=3*(c-2*g+M),h=3*(g-M),f=M;var b=new SuperMap.Geometry.Point(S*n+y*r+h*p+f*s,S*i+y*a+h*u+f*P);l.push(b)}}}return l},SuperMap.Plot.PlottingUtil.computeBeizerPoints=function(t,e,l){var o=SuperMap.Plot.PlottingUtil.polylineDistance(e),n=[],i=[],r=[];if(t){i.push(e[0]);var a=l[0],p=l[1],u=e[0].x+o*a,s=e[0].y+o*p;i.push(new SuperMap.Geometry.Point(u,s)),n.push(new SuperMap.Geometry.Point(u,s));for(f=1;f<e.length-1;f++){var a=l[4*f-2],p=l[4*f-1],u=e[f].x+o*a,s=e[f].y+o*p;i.push(new SuperMap.Geometry.Point(u,s)),n.push(new SuperMap.Geometry.Point(u,s)),i.push(new SuperMap.Geometry.Point(e[f].x,e[f].y)),a=l[4*f],p=l[4*f+1],u=e[f].x+o*a,s=e[f].y+o*p,i.push(new SuperMap.Geometry.Point(u,s)),n.push(new SuperMap.Geometry.Point(u,s))}var P=e.length-1;a=l[4*P-2],p=l[4*P-1],u=e[P].x+o*a,s=e[P].y+o*p,i.push(new SuperMap.Geometry.Point(u,s)),n.push(new SuperMap.Geometry.Point(u,s)),i.push(new SuperMap.Geometry.Point(e[P].x,e[P].y)),i.push(new SuperMap.Geometry.Point(e[P].x,e[P].y)),i.push(new SuperMap.Geometry.Point(e[P].x,e[P].y)),r=SuperMap.Plot.PlottingUtil.generateBeizerPointsWithCtrlPt(i)}else{l=[];var c=(i=SuperMap.Plot.PlottingUtil.getBeizerCtrlPt(e))[1].x-i[0].x,S=i[1].y-i[0].y,y=c/o,h=S/o;l.push(y),l.push(h),n.push(i[1]);for(var f=1;f<e.length-1;f++){var y=(c=i[3*f-1].x-i[3*f].x)/o,h=(S=i[3*f-1].y-i[3*f].y)/o;l.push(y),l.push(h),n.push(i[3*f-1]);var g=(i[3*f+1].x-i[3*f].x)/o,M=(i[3*f+1].y-i[3*f].y)/o;l.push(g),l.push(M),n.push(i[3*f+1])}y=(c=i[3*(e.length-1)-1].x-i[3*(e.length-1)].x)/o,h=(S=i[3*(e.length-1)-1].y-i[3*(e.length-1)].y)/o,l.push(y),l.push(h),n.push(i[3*(e.length-1)-1]),r=SuperMap.Plot.PlottingUtil.generateBeizerPointsWithCtrlPt(i)}return{scalePoints:n,scaleValues:l,beizerPoints:r}},SuperMap.Plot.PlottingUtil.getTrianglePoints=function(t,e,l,o,n,i,r){var a=l.x,p=l.y,u=o.x,s=o.y,P=n.x,c=n.y;SuperMap.Plot.PlottingUtil.getPointsByTriangle(t,e,a,p,u,s,P,c,i,r)},SuperMap.Plot.PlottingUtil.getPointsByTriangle=function(t,e,l,o,n,i,r,a,p,u){var s=n+(r-l),P=i+(a-o),c=0,S=0;if(l==r)c=l,S=P;else if(o==a)c=s,S=o;else{var y=1*(a-o)/(r-l),h=o-l*y;S=y*(c=(P+s/y-h)/(y+1/y))+h}var f=Math.sqrt(1*(n-s)*(n-s)+1*(i-P)*(i-P)),g=Math.sqrt(1*(l-n)*(l-n)+1*(o-i)*(o-i)),M=Math.sqrt(1*(n-r)*(n-r)+1*(i-a)*(i-a)),b=0;s=c+(s-c)*(b=g+M?1+(M-g)*t/(M+g):1),P=S+(P-S)*b,0==f&&(f=1),p.x=n+(n-s)*g/(e*f),p.y=i+(i-P)*g/(e*f),u.x=n+(s-n)*M/(e*f),u.y=i+(P-i)*M/(e*f)},SuperMap.Plot.PlottingUtil.getTrapezoidPoints=function(t,e,l,o,n){var i=e.x,r=e.y,a=l.x,p=l.y,u=o.x,s=o.y;return SuperMap.Plot.PlottingUtil.getPointsByTrapezoid(t,i,r,a,p,u,s,n)},SuperMap.Plot.PlottingUtil.getPointsByTrapezoid=function(t,e,l,o,n,i,r,a){var p=0,u=0,s=0,P=0;if(0==Math.abs(l-n))p=e+o-i,u=r;else if(0==Math.abs(e-o))p=i,u=l+n-r;else{var c=1*(l-n)/(e-o),S=r-c*i;u=c*(p=((n+l)/2+(e+o)/(2*c)-S)/(c+1/c))+S,p=2*p-i,u=2*u-r}var y=Math.sqrt(1*(e-o)*(e-o)+1*(l-n)*(l-n)),h=Math.sqrt(1*(e-p)*(e-p)+1*(l-u)*(l-u));return y>0?(s=e+(o-e)*h/y,P=l+(n-l)*h/y):(s=e,P=l),a.x=s+(p-s)*t,a.y=P+(u-P)*t,a},SuperMap.Plot.PlottingUtil.pointIsOnPolyLine=function(t,e,l){if(SuperMap.Plot.PlottingUtil.equalFuzzy(t.x,e.x)&&SuperMap.Plot.PlottingUtil.equalFuzzy(t.y,e.y)||SuperMap.Plot.PlottingUtil.equalFuzzy(t.x,l.x)&&SuperMap.Plot.PlottingUtil.equalFuzzy(t.y,l.y))return!0;var o=t.x-e.x,n=t.y-e.y,i=t.x-l.x,r=t.y-l.y,a=(o*i+n*r)/(Math.sqrt(o*o+n*n)*Math.sqrt(i*i+r*r));return!!SuperMap.Plot.PlottingUtil.equalFuzzy(a,-1,.1)},SuperMap.Plot.PlottingUtil.pointIsOnPolyLines=function(t,e){if(!e||null===e||0===e.length)return{isOnPolyLine:!1,index:-1};for(var l=!1,o=-1,n=0;n<e.length-1;n++)if(l=SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(t,e[n],e[n+1])){o=n;break}return{isOnPolyLine:l,index:o}},SuperMap.Plot.PlottingUtil.computePointToLineMinDis=function(t,e){for(var l=-1,o=-1,n=0;n<e.length-1;n++){var i=e[n],r=e[n+1],a=SuperMap.Plot.PlottingUtil.projectPoint(t,i,r);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(a,i,r)){var p=SuperMap.Plot.PlottingUtil.distance(t,a);l<0?(l=p,o&&(o=n)):l>p&&(l=p,o=n)}}return o&&l<0&&(o=-1),{minDis:l,index:o}},SuperMap.Plot.PlottingUtil.findPointInLine=function(t,e,l){if(t===e||Math.abs(l)<1e-18)return t;var o=e.x-t.x,n=e.y-t.y,i=l/Math.sqrt(o*o+n*n),r=t.x+o*i,a=t.y+n*i;return new SuperMap.Geometry.Point(r,a)},SuperMap.Plot.PlottingUtil.operateControlPoints=function(t){var e=t,l=e.length;if(3==l){var o=new SuperMap.Geometry.Point(0,0);SuperMap.Plot.PlottingUtil.getTrapezoidPoints(1,t[0],t[1],t[2],o),e.push(o)}if(l>4&&(e.splice(4,l-4),l=e.length),SuperMap.Plot.PlottingUtil.pointIsRightToLine(t[0],t[1],e[2])){n=e[0];e[0]=e[1],e[1]=n}if(!SuperMap.Plot.PlottingUtil.pointIsRightToVerticle(e[0],e[1],e[2])){var n=e[2];e[2]=e[3],e[3]=n}return e},SuperMap.Plot.PlottingUtil.pointIsRightToLine=function(t,e,l){return(e.x-t.x)*(l.y-t.y)-(l.x-t.x)*(e.y-t.y)<0},SuperMap.Plot.PlottingUtil.pointIsRightToVerticle=function(t,e,l){var o=new SuperMap.Geometry.Point(.5*(e.x+t.x),.5*(e.y+t.y)),n=new SuperMap.Geometry.Point(e.x-t.x,e.y-t.y),i=new SuperMap.Geometry.Point(l.x-o.x,l.y-o.y);return n.x*i.x+n.y*i.y>0},SuperMap.Plot.PlottingUtil.linePnt=function(t,e,l){var o=SuperMap.Plot.PlottingUtil.distance(t,e);if(0==o)return t;var n=l/o;return SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(n,t,e)},SuperMap.Plot.PlottingUtil.findPointOnLineByRatio=function(t,e,l){var o=new SuperMap.Geometry.Point(0,0);return o.x=e.x+(l.x-e.x)*t,o.y=e.y+(l.y-e.y)*t,o},SuperMap.Plot.PlottingUtil.rotateAngle=function(t,e,l){var o=e,n=Math.cos(o),i=Math.sin(o),r=l.x-t.x,a=l.y-t.y;return l.x=r*n-a*i+t.x,l.y=r*i+a*n+t.y,l},SuperMap.Plot.PlottingUtil.resize=function(t,e,l){return l.x=t.x+e*(l.x-t.x),l.y=t.y+e*(l.y-t.y),l},SuperMap.Plot.PlottingUtil.findPointInPolyLine=function(t,e){if(e<0||t.length<2)return{index:-1,pt:null};if(Math.abs(e)<1e-18)return{index:0,pt:t[0]};for(var l=0,o=0;o<t.length-1;o++)if((l+=SuperMap.Plot.PlottingUtil.distance(t[o],t[o+1]))>e||SuperMap.Plot.PlottingUtil.equalFuzzy(l,e)){var n=l-e,i=t[o+1],r=t[o],a=n/SuperMap.Plot.PlottingUtil.distance(i,r),p=new SuperMap.Geometry.Point(0,0);return p.x=i.x+(r.x-i.x)*a,p.y=i.y+(r.y-i.y)*a,{index:o,pt:p}}return{index:-1,pt:null}},SuperMap.Plot.PlottingUtil.polylineDistance=function(t){if(0===t.length)return 0;for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);return e},SuperMap.Plot.PlottingUtil.rotate=function(t,e,l,o){var n=o.x-t.x,i=o.y-t.y,r=n*e-i*l+t.x,a=n*l+i*e+t.y;return new SuperMap.Geometry.Point(r,a)},SuperMap.Plot.PlottingUtil.getIncentrePointOnSegmentByScale=function(t,e,l){var o=e.x,n=e.y,i=l.x,r=l.y,a=Math.sqrt(1*(o-i)*(o-i)+1*(n-r)*(n-r)),p=0,u=0;return 0==a?(p=o,u=n):(p=o+(i-o)*t/a,u=n+(r-n)*t/a),new SuperMap.Geometry.Point(p,u)},SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale=function(t,e,l){var o=e.x,n=e.y,i=l.x,r=l.y,a=0,p=0,u=Math.sqrt(1*(o-i)*(o-i)+1*(n-r)*(n-r));return 0===u?(a=o,p=n):(a=o+(o-i)*t/u,p=n+(n-r)*t/u),new SuperMap.Geometry.Point(a,p)},SuperMap.Plot.PlottingUtil.getSidePointsOfLine=function(t,e,l){var o=e.x,n=e.y,i=l.x,r=l.y,a=Math.sqrt(1*(o-i)*(o-i)+1*(n-r)*(n-r)),p=0,u=0;0==a?(u=0,p=t):(p=t*(o-i)/a,u=t*(n-r)/a);var s=-u+i,P=+p+r,c=+u+i,S=-p+r;return{pntLeft:new SuperMap.Geometry.Point(c,S),pntRight:new SuperMap.Geometry.Point(s,P)}},SuperMap.Plot.PlottingUtil.pointProjectToSegment=function(t,e,l){var o,n,i=0,r=0,a=0,p=1;if(r=e.x!==t.x?(e.y-t.y)/(e.x-t.x):1.7976931348623157e308,a=l.x!==t.x?(l.y-t.y)/(l.x-t.x):1.7976931348623157e308,i=l.y!==e.y?(l.x-e.x)/(e.y-l.y):1.7976931348623157e308,o=e.x>=t.x&&e.y>=t.y?1:e.x<t.x&&e.y>t.y?2:e.x<=t.x&&e.y<=t.y?3:4,n=l.x>t.x&&l.y>t.y?1:l.x<t.x&&l.y>t.y?2:l.x<t.x&&l.y<t.y?3:4,o==n)(r<i&&a<i||r>i&&a>i)&&(p=0);else switch(o){case 1:(4==n&&r<i||2==n&&r>i)&&(p=0);break;case 2:(1==n&&r<i||3==n&&r>i)&&(p=0);break;case 3:(2==n&&r<i||4==n&&r>i)&&(p=0);break;case 4:(3==n&&r<i||1==n&&r>i)&&(p=0)}var u=new SuperMap.Geometry.Point(0,0);return SuperMap.Plot.PlottingUtil.equalFuzzy(i-1.7976931348623157e308,0)?(u.x=t.x,u.y=e.y):SuperMap.Plot.PlottingUtil.equalFuzzy(i,0)?(u.x=e.x,u.y=t.y):(u.x=(i*(e.y-t.y)+i*i*t.x+e.x)/(i*i+1),u.y=t.y+i*(u.x-t.x)),{isOnline:1===p,projectPoint:u}},SuperMap.Plot.PlottingUtil.coordinateTrans=function(t,e,l){var o=SuperMap.Plot.PlottingUtil.distance(new SuperMap.Geometry.Point(0,0),e),n=SuperMap.Plot.PlottingUtil.radian(new SuperMap.Geometry.Point(0,0),e)+l*Math.PI/180,i=o*Math.cos(n)+t.x,r=o*Math.sin(n)+t.y;return new SuperMap.Geometry.Point(i,r)},SuperMap.Plot.PlottingUtil.triangleHeightAndPartBottomLen=function(t,e,l){var o,n,i=(l.x-e.x)*(l.x-e.x)+(l.y-e.y)*(l.y-e.y),r=Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)),a=Math.sqrt((t.x-l.x)*(t.x-l.x)+(t.y-l.y)*(t.y-l.y));if(0==a||0==r)o=0,n=0;else if(0==i)o=r,n=0;else{var p=(r*r+a*a-i)/2/r/a,u=0;p>=1?(p=1,u=0):u=Math.sqrt(1-p*p),o=a*p,n=a*u}return{dLen1:o,dLen2:n}},SuperMap.Plot.PlottingUtil.paraLine=function(t,e,l){var o=[];if(2>t.length)return o;if(l){p=t[1].clone();p=SuperMap.Plot.PlottingUtil.rotateAngle(t[0],Math.PI/2,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[0],p,e));for(u=1;u<t.length-1;u++)if(!SuperMap.Plot.PlottingUtil.equalFuzzy(t[u].x,t[u+1].x)||!SuperMap.Plot.PlottingUtil.equalFuzzy(t[u].y,t[u+1].y)){for(var n=SuperMap.Plot.PlottingUtil.radian(t[u],t[u+1]),i=(s=SuperMap.Plot.PlottingUtil.radian(t[u],t[u-1]))-n;i<0;)i+=2*Math.PI;var r,a=i/2;r=a>Math.PI/2?a-Math.PI/2:Math.PI/2-a;S=e/Math.cos(r);p=t[u+1].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(t[u],a,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[u],p,S))}p=t[t.length-2].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(t[t.length-1],-1*Math.PI/2,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[t.length-1],p,e))}else{var p=t[1].clone();p=SuperMap.Plot.PlottingUtil.rotateAngle(t[0],-Math.PI/2,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[0],p,e));for(var u=1;u<t.length-1;u++)if(!SuperMap.Plot.PlottingUtil.equalFuzzy(t[u].x,t[u+1].x)||!SuperMap.Plot.PlottingUtil.equalFuzzy(t[u].y,t[u+1].y)){for(var n=SuperMap.Plot.PlottingUtil.radian(t[u],t[u+1]),s=SuperMap.Plot.PlottingUtil.radian(t[u],t[u-1]),i=s-n;i<0;)i+=2*Math.PI;var P,c=Math.PI-i/2;P=c>Math.PI/2?c-Math.PI/2:Math.PI/2-c;var S=e/Math.cos(P);p=t[u-1].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(t[u],c,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[u],p,S))}p=t[t.length-2].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(t[t.length-1],Math.PI/2,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(t[t.length-1],p,e))}return o},SuperMap.Plot.PlottingUtil.circlePoint=function(t,e,l,o){o*=Math.PI/180;var n=t.x+e*Math.cos(o),i=t.y+l*Math.sin(o);return new SuperMap.Geometry.Point(n,i)},SuperMap.Plot.PlottingUtil.getPolygonCenterPt=function(t){if(!t||null===t||0===t.length)return null;for(var e=0,l=0,o=0;o<t.length;o++)e+=t[o].x,l+=t[o].y;return new SuperMap.Geometry.Point(e/t.length,l/t.length)},SuperMap.Plot.PlottingUtil.ptIsInPolygon=function(t,e){if(!t||null===t||0===t.length)return!1;for(var l=0,o=t.length,n=0;n<o;n++){var i=t[n],r=t[(n+1)%o];if(i.y!==r.y){var a=i.y<r.y?i.y:r.y,p=i.y>r.y?i.y:r.y;e.y<a||e.y>p||(e.y-i.y)*(r.x-i.x)/(r.y-i.y)+i.x>e.x&&l++}}return l%2==1},SuperMap.Plot.PlottingUtil.projectPtOnPolyLine=function(t,e){if(2>e.length)return{index:-1,pt:null};for(var l=0;l<e.length-1;l++){var o=SuperMap.Plot.PlottingUtil.pointProjectToSegment(t,e[l],e[l+1]);if(o.isOnline)return{index:l,pt:o.projectPoint}}return{index:-1,pt:null}},SuperMap.Plot.PlottingUtil.isPloyClockwise=function(t){var e=SuperMap.Plot.PlottingUtil.clonePoints(t),l=e.length;if(!(l<3)){var o=e[0].y*(e[l-1].x-e[1].x);e.push(e[0].clone());for(var n=1;n<l;++n)o+=e[n].y*(e[n-1].x-e[n+1].x);return o>0?0:1}},SuperMap.Plot.PlottingUtil.isSamePt=function(t,e){return!(!SuperMap.Plot.PlottingUtil.equalFuzzy(t.x,e.x)||!SuperMap.Plot.PlottingUtil.equalFuzzy(t.y,e.y))},SuperMap.Plot.PlottingUtil.getPtsIndexByDistance=function(t,e){var l=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,t);return{index:l.index,pts:l.pt,bfind:-1!==l.index}},SuperMap.Plot.PlottingUtil.ptInBounds=function(t,e){return t.x>e.left&&t.x<e.right&&t.y<e.top&&t.y>e.bottom},SuperMap.Plot.PlottingUtil.InnerAngle=function(t,e,l){if(t==e||t==l)return 0;var o=SuperMap.Plot.PlottingUtil.distance(t,e),n=SuperMap.Plot.PlottingUtil.distance(t,l),i=SuperMap.Plot.PlottingUtil.distance(e,l),r=(o*o+n*n-i*i)/(2*o*n);return r>1&&SuperMap.Plot.PlottingUtil.equalFuzzy(r,1)?r=1:r<1&&SuperMap.Plot.PlottingUtil.equalFuzzy(r,-1)&&(r=-1),Math.acos(r)},SuperMap.Plot.PlottingUtil.plumbLineLen=function(t,e,l){return SuperMap.Plot.PlottingUtil.distance(t,e)*Math.sin(SuperMap.Plot.PlottingUtil.InnerAngle(e,t,l))},SuperMap.Plot.PlottingUtil.paraPolygon=function(t,e,l){var o=[],n=SuperMap.Plot.PlottingUtil.clonePoints(t),i=n.length;if(i<2)return o;p=new SuperMap.Geometry.Point(0,0);if(l){if(i<3)p=n[1].clone(),SuperMap.Plot.PlottingUtil.rotateAngle(n[0],Math.PI,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[0],p,e));else{for(var r=SuperMap.Plot.PlottingUtil.radian(n[0],n[1]),a=(s=SuperMap.Plot.PlottingUtil.radian(n[0],n[n.length-1]))-r;a<0;)a+=2*Math.PI;P=(c=a/2)>Math.PI/2?c-Math.PI/2:Math.PI/2-c;S=e/Math.cos(P);p=n[1].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(n[0],c,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[0],p,S))}for(u=1;u<i-1;u++){for(var r=SuperMap.Plot.PlottingUtil.radian(n[u],n[u+1]),a=(s=SuperMap.Plot.PlottingUtil.radian(n[u],n[u-1]))-r;a<0;)a+=2*Math.PI;P=(c=a/2)>Math.PI/2?c-Math.PI/2:Math.PI/2-c;S=e/Math.cos(P);p=n[u+1].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(n[u],c,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[u],p,S))}if(i<3)p=n[i-2].clone(),SuperMap.Plot.PlottingUtil.rotateAngle(n[i-1],0,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[i-1],p,e));else{for(var r=SuperMap.Plot.PlottingUtil.radian(n[i-1],n[0]),a=(s=SuperMap.Plot.PlottingUtil.radian(n[i-1],n[i-2]))-r;a<0;)a+=2*Math.PI;P=(c=a/2)>Math.PI/2?c-Math.PI/2:Math.PI/2-c;S=e/Math.cos(P);p=n[0].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(n[i-1],c,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[i-1],p,S))}}else{if(i<3){var p=n[1].clone();SuperMap.Plot.PlottingUtil.rotateAngle(n[0],0,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[0],p,e))}else{for(var r=SuperMap.Plot.PlottingUtil.radian(n[0],n[1]),a=(s=SuperMap.Plot.PlottingUtil.radian(n[0],n[i-1]))-r;a<0;)a+=2*Math.PI;P=(c=Math.PI-a/2)>Math.PI/2?c-Math.PI/2:Math.PI/2-c;S=e/Math.cos(P);p=n[i-1].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(n[0],c,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[0],p,S))}for(var u=1;u<i-1;u++){for(var r=SuperMap.Plot.PlottingUtil.radian(n[u],n[u+1]),a=(s=SuperMap.Plot.PlottingUtil.radian(n[u],n[u-1]))-r;a<0;)a+=2*Math.PI;P=(c=Math.PI-a/2)>Math.PI/2?c-Math.PI/2:Math.PI/2-c;S=e/Math.cos(P);p=n[u-1].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(n[u],c,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[u],p,S))}if(i<3)p=n[i-2].clone(),SuperMap.Plot.PlottingUtil.rotateAngle(n[i-1],Math.PI,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[i-1],p,e));else{for(var r=SuperMap.Plot.PlottingUtil.radian(n[i-1],n[0]),s=SuperMap.Plot.PlottingUtil.radian(n[i-1],n[i-2]),a=s-r;a<0;)a+=2*Math.PI;var P,c=Math.PI-a/2;P=c>Math.PI/2?c-Math.PI/2:Math.PI/2-c;var S=e/Math.cos(P);p=n[i-2].clone(),p=SuperMap.Plot.PlottingUtil.rotateAngle(n[i-1],c,p),o.push(SuperMap.Plot.PlottingUtil.linePnt(n[i-1],p,S))}}return o},SuperMap.Plot.PlottingUtil.getOutRectangleDis=function(t){if(2>t.length)return 0;for(var e=t[0].x,l=t[0].x,o=t[0].y,n=t[0].y,i=1;i<t.length;i++)e<t[i].x&&(e=t[i].x),l>t[i].x&&(l=t[i].x),o<t[i].y&&(o=t[i].y),n>t[i].y&&(n=t[i].y);return SuperMap.Plot.PlottingUtil.distance(new SuperMap.Geometry.Point(e,o),new SuperMap.Geometry.Point(l,n))},SuperMap.Plot.PlottingUtil.clonePoints=function(t){var e=[];if(void 0===t||null===t)return e;if(SuperMap.Util.isArray(t)||(t=[t]),t&&null!==t)for(var l=0;l<t.length;l++)void 0!==t[l]&&null!==t[l]&&e.push(t[l].clone());return e}},function(t,e,l){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}o(l(14)),o(l(37)),o(l(38)),o(l(39)),o(l(40)),o(l(41)),o(l(42)),o(l(3)),o(l(43)),o(l(44)),o(l(45)),o(l(46)),o(l(47)),o(l(48)),o(l(49)),o(l(50)),o(l(51)),o(l(52)),o(l(53)),o(l(54)),o(l(55)),o(l(56)),o(l(15)),o(l(57)),o(l(16)),o(l(58)),o(l(59)),o(l(60)),o(l(10)),o(l(61)),o(l(62)),o(l(63)),o(l(64)),o(l(80)),o(l(119)),o(l(77)),o(l(65)),o(l(66)),o(l(71)),o(l(5)),o(l(67)),o(l(68)),o(l(69)),o(l(6)),o(l(70)),o(l(72)),o(l(17)),o(l(7)),o(l(73)),o(l(74)),o(l(87)),o(l(88)),o(l(89)),o(l(90)),o(l(76)),o(l(75)),o(l(78)),o(l(79)),o(l(18)),o(l(81)),o(l(82)),o(l(83)),o(l(84)),o(l(85)),o(l(86)),o(l(91)),o(l(20)),o(l(93)),o(l(94)),o(l(21)),o(l(98)),o(l(100)),o(l(22)),o(l(101)),o(l(23)),o(l(102)),o(l(103)),o(l(113)),o(l(109)),o(l(114)),o(l(115)),o(l(116)),o(l(117)),o(l(118)),o(l(120)),o(l(104)),o(l(105)),o(l(106)),o(l(108)),o(l(95)),o(l(96)),o(l(97)),o(l(99)),o(l(33)),o(l(2)),o(l(126)),o(l(128)),o(l(131)),o(l(139)),o(l(140)),o(l(141)),o(l(145)),o(l(26)),o(l(148)),o(l(27)),o(l(154)),o(l(155)),o(l(156)),o(l(159)),o(l(28)),o(l(163)),o(l(167)),o(l(169)),o(l(170)),o(l(172)),o(l(178)),o(l(183)),o(l(188)),o(l(189)),o(l(190)),o(l(198)),o(l(199)),o(l(201)),o(l(203)),o(l(121)),o(l(122)),o(l(123)),o(l(8)),o(l(124)),o(l(125)),o(l(24)),o(l(127)),o(l(129)),o(l(130)),o(l(4)),o(l(132)),o(l(133)),o(l(11)),o(l(134)),o(l(135)),o(l(136)),o(l(137)),o(l(138)),o(l(9)),o(l(142)),o(l(143)),o(l(25)),o(l(144)),o(l(146)),o(l(147)),o(l(149)),o(l(150)),o(l(151)),o(l(152)),o(l(153)),o(l(12)),o(l(157)),o(l(158)),o(l(160)),o(l(161)),o(l(164)),o(l(165)),o(l(166)),o(l(168)),o(l(171)),o(l(173)),o(l(174)),o(l(175)),o(l(176)),o(l(177)),o(l(179)),o(l(180)),o(l(181)),o(l(182)),o(l(184)),o(l(185)),o(l(186)),o(l(187)),o(l(162)),o(l(191)),o(l(192)),o(l(193)),o(l(194)),o(l(195)),o(l(196)),o(l(197)),o(l(200)),o(l(204)),o(l(202))},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),i=(function(t){t&&t.__esModule}(l(29)),function(){function t(e,l,n){o(this,t),this.libID=null,this.code=null,this.symbolData=null,this.textContent=null,this.totalNum=null,this.CLASS_NAME="SuperMap.Plot.SubSymbol",e&&(this.libID=e),l&&(this.code=l),n&&SuperMap.Util.extend(this,n)}return n(t,[{key:"destroy",value:function(){this.libID=null,this.code=null,this.symbolData=null,this.totalNum=null}},{key:"clone",value:function(){var t=new SuperMap.Plot.SubSymbol(this.libID,this.code);return t.symbolData={},t.symbolData=SuperMap.Util.copyAttributes(t.symbolData,this.symbolData),t.textContent=this.textContent,t.totalNum=this.totalNum,t}}]),t}());e.default=i,SuperMap.Plot.SubSymbol=i},function(t,e,l){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),p=o(l(0)),u=(o(l(13)),o(l(34)),function(t){function e(t){n(this,e);var l=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.QIANJI_RATE1=9,l.QIANJI_RATE2=20,l.QIANJI_RATE4=5,l.QIANJI_RATE3=1/3,l.QIANJI_TAIL_RATE1=8,l.QIANJI_TAIL_RATE2=3,l.QIANJI_TAIL_RATE3=.6,l.SV1_Default=.25,l.SV1_MinValue=0,l.SV1_MaxValue=.5,l.DEFAULT_ARROW_TAIL_POS=.4,l.SCALE_VALUE_COUNT=1,l.MIN_LEN_LeftToRightCenter=1e-7,l.SCALE_AT=1/3,l.SCALE_ATAJ=1/7,l.SCALE_ATAE=1/3,l.SCALE_AW=2/3,l.SCALE_ATAJctrlDefSide=.8,l.SCALE_ATAJctrlSameSide=2/3,l.SCALE_MM_LEFT=.25,l.SCALE_MM_RIGHT=.75,l.BEZIER_K1=1/3,l.QIANJI_OPERATE_RATE1=1,l.m_dMaxDis=0,l.m_bIsAnimation=!1,l.m_scalePoints=[],l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol1006",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.symbolName||(l.symbolName="钳击箭头"),l.minEditPts=3,l.maxEditPts=4,l.clearScalePoints(),0===l.getScaleValues().length&&l.getScaleValues().push(l.SV1_Default),l.m_dMaxDis=0,l.m_bIsAnimation=!1,l.m_scalePoints=[],l}return r(e,p["default"]),a(e,[{key:"calculateParts",value:function(){this.clearComponents(),this.m_scalePoints=[];var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length>=2&&t.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.clonePoints(t),l=e.length,o=!1;void 0!==e[0].z&&(o=!0);var n=this.arrowMeshs(t);if(o){for(var i=[],r=0;r<l;r++)i.push(e[r]);var a=n.LeftArowLeftBody,p=n.LeftArowHead,u=n.LeftArowRightBody,s=n.RightArowLeftBody,P=n.RightArowHead,c=n.RightArowRightBody;if(0==a.length)return!1;var S=[],y=[],h=[];if(3==i.length)a[0].x==i[0].x&&a[0].y==i[0].y?(y.push(i[0]),y.push(i[2]),h.push(i[1]),h.push(i[2])):(y.push(i[1]),y.push(i[2]),h.push(i[0]),h.push(i[2]));else{if(4!=i.length)return!1;a[0].x==i[0].x&&a[0].y==i[0].y?(y.push(i[0]),h.push(i[1])):(y.push(i[1]),h.push(i[0])),p[1].x==i[2].x&&p[1].y==i[2].y?(y.push(i[2]),h.push(i[3])):(y.push(i[3]),h.push(i[2]))}var f=new SuperMap.Geometry.Point;f=SuperMap.Plot.PlottingUtil.pointProjectToSegment(a[a.length-1],{x:y[0].x,y:y[0].y},{x:y[1].x,y:y[1].y}).projectPoint;var g=this.ComputeZValue(f,y[1],y[0]),M=[];this.ComputeHeight(a,M,y[0].z,g),S=S.concat(M);for(r=0;r<p.length;r++){f=SuperMap.Plot.PlottingUtil.pointProjectToSegment(p[r],{x:y[0].x,y:y[0].y},{x:y[1].x,y:y[1].y}).projectPoint;var b=this.ComputeZValue(f,y[1],y[0]);S.push({x:p[r].x,y:p[r].y,z:b})}f=SuperMap.Plot.PlottingUtil.pointProjectToSegment(u[0],{x:y[0].x,y:y[0].y},{x:y[1].x,y:y[1].y}).projectPoint;this.ComputeZValue(f,y[1],y[0]);f=SuperMap.Plot.PlottingUtil.pointProjectToSegment(u[u.length-1],{x:y[0].x,y:y[0].y},{x:y[1].x,y:y[1].y}).projectPoint;var d=this.ComputeZValue(f,y[1],y[0]);f=SuperMap.Plot.PlottingUtil.pointProjectToSegment(s[0],{x:h[0].x,y:h[0].y},{x:h[1].x,y:h[1].y}).projectPoint;var m=(this.ComputeZValue(f,h[1],h[0])+d)/2,v=[];this.ComputeHeight(u,v,g,m),S=S.concat(v),f=SuperMap.Plot.PlottingUtil.pointProjectToSegment(s[s.length-1],{x:h[0].x,y:h[0].y},{x:h[1].x,y:h[1].y}).projectPoint;var O=this.ComputeZValue(f,h[1],h[0]),L=[];this.ComputeHeight(s,L,m,O),S=S.concat(L);for(r=0;r<P.length;r++){f=SuperMap.Plot.PlottingUtil.pointProjectToSegment(P[r],{x:h[0].x,y:h[0].y},{x:h[1].x,y:h[1].y}).projectPoint;var U=this.ComputeZValue(f,h[1],h[0]);S.push({x:P[r].x,y:P[r].y,z:U})}f=SuperMap.Plot.PlottingUtil.pointProjectToSegment(c[0],{x:h[0].x,y:h[0].y},{x:h[1].x,y:h[1].y}).projectPoint;var _=this.ComputeZValue(f,h[1],h[0]),w=[];this.ComputeHeight(c,w,_,h[0].z),(S=S.concat(w)).length>0&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S,{surroundLineFlag:!1}),this.m_scalePoints.length>0&&(this.m_scalePoints[0]={x:this.m_scalePoints[0].x,y:this.m_scalePoints[0].y,z:m});for(r=0;r<this.m_scalePoints.length;r++)this.m_scalePoints[r].isScalePoint=!0,this.m_scalePoints[r].tag=r,this.addScalePoint(this.m_scalePoints[r]);return!0}var x=n.shapePts;x.length>0&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,x,{surroundLineFlag:!1}),this.clearScalePoints();for(r=0;r<this.m_scalePoints.length;r++)this.m_scalePoints[r].isScalePoint=!0,this.m_scalePoints[r].tag=r,this.addScalePoint(this.m_scalePoints[r])}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l,o=SuperMap.Plot.PlottingUtil.operateControlPoints(this.controlPoints),n=(o.length,new SuperMap.Geometry.Point((o[0].x+o[1].x)/2,(o[0].y+o[1].y)/2)),i=new SuperMap.Geometry.Point((o[2].x+o[3].x)/2,(o[2].y+o[3].y)/2),r=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,n,i);if(r.isOnline){var a=SuperMap.Plot.PlottingUtil.distance(r.projectPoint,n),p=SuperMap.Plot.PlottingUtil.distance(n,i);(l=SuperMap.Plot.PlottingUtil.equalFuzzy(a,0)?this.SV1_MinValue:a/p)>this.SV1_MaxValue&&(l=this.SV1_MaxValue)}else l=SuperMap.Plot.PlottingUtil.distance(r.projectPoint,n)<SuperMap.Plot.PlottingUtil.distance(r.projectPoint,i)?this.SV1_MinValue:this.SV1_MaxValue;this.clearScaleValues(),this.getScaleValues().push(l)}this.calculateParts()}},{key:"arrowMeshs",value:function(t){var e=new SuperMap.Plot.Path2D,l=(t.length,[]);this.m_bIsAnimation&&4==t.length?l=SuperMap.Plot.PlottingUtil.clonePoints(t):(l=SuperMap.Plot.PlottingUtil.operateControlPoints(t),void 0!==t[0].z&&(l[l.length-1].z=l[l.length-2].z));var o=this.getScaleValues()[0],n=SuperMap.Plot.PlottingUtil.distance(l[0],l[3]),i=SuperMap.Plot.PlottingUtil.distance(l[1],l[2]),r=(l[0].clone(),l[1].clone()),a=.5*(l[0].x+l[3].x),p=.5*(l[0].y+l[3].y),u=new SuperMap.Geometry.Point(a,p),s=.5*(l[1].x+l[2].x),P=.5*(l[1].y+l[2].y),c=new SuperMap.Geometry.Point(s,P),S=SuperMap.Plot.PlottingUtil.distance(u,c);S<this.MIN_LEN_LeftToRightCenter&&(S=this.MIN_LEN_LeftToRightCenter),u.x=a+n*(a-s)/(S*this.QIANJI_RATE1),u.y=p+n*(p-P)/(S*this.QIANJI_RATE1),c.x=s+i*(s-a)/(S*this.QIANJI_RATE1),c.y=P+i*(P-p)/(S*this.QIANJI_RATE1);var y=new SuperMap.Geometry.Point(0,0),h=new SuperMap.Geometry.Point(0,0);y.x=a+n*(a-s)/(S*this.QIANJI_RATE2),y.y=p+n*(p-P)/(S*this.QIANJI_RATE2),h.x=s+i*(s-a)/(S*this.QIANJI_RATE2),h.y=P+i*(P-p)/(S*this.QIANJI_RATE2);var f=new SuperMap.Geometry.Point((l[0].x+l[1].x)/2,(l[0].y+l[1].y)/2),g=new SuperMap.Geometry.Point((l[2].x+l[3].x)/2,(l[2].y+l[3].y)/2),M=l[3].x-(l[3].x-u.x)*this.SCALE_AT,b=l[3].y-(l[3].y-u.y)*this.SCALE_AT,d=l[2].x-(l[2].x-c.x)*this.SCALE_AT,m=l[2].y-(l[2].y-c.y)*this.SCALE_AT,v=new SuperMap.Geometry.Point(0,0),O=new SuperMap.Geometry.Point(0,0),L=new SuperMap.Geometry.Point(0,0),U=new SuperMap.Geometry.Point(0,0);O.x=M-(b-l[3].y)*this.SCALE_ATAJ,O.y=b+(M-l[3].x)*this.SCALE_ATAJ,v.x=M+(b-l[3].y)*this.SCALE_ATAJ,v.y=b-(M-l[3].x)*this.SCALE_ATAJ,U.x=d-(m-l[2].y)*this.SCALE_ATAJ,U.y=m+(d-l[2].x)*this.SCALE_ATAJ,L.x=d+(m-l[2].y)*this.SCALE_ATAJ,L.y=m-(d-l[2].x)*this.SCALE_ATAJ;var _=new SuperMap.Geometry.Point(0,0),w=new SuperMap.Geometry.Point(0,0),x=new SuperMap.Geometry.Point(0,0),T=new SuperMap.Geometry.Point(0,0);_.x=3*v.x-2*M-(l[3].x-M)*this.SCALE_ATAE,_.y=3*v.y-2*b-(l[3].y-b)*this.SCALE_ATAE,w.x=3*O.x-2*M-(l[3].x-M)*this.SCALE_ATAE,w.y=3*O.y-2*b-(l[3].y-b)*this.SCALE_ATAE,x.x=3*L.x-2*d-(l[2].x-d)*this.SCALE_ATAE,x.y=3*L.y-2*m-(l[2].y-m)*this.SCALE_ATAE,T.x=3*U.x-2*d-(l[2].x-d)*this.SCALE_ATAE,T.y=3*U.y-2*m-(l[2].y-m)*this.SCALE_ATAE,u.x=a+n*(a-s)/(S*this.QIANJI_RATE4),u.y=p+n*(p-P)/(S*this.QIANJI_RATE4),c.x=s+i*(s-a)/(S*this.QIANJI_RATE4),c.y=P+i*(P-p)/(S*this.QIANJI_RATE4);var E=new SuperMap.Geometry.Point(0,0);E.x=l[0].x+(u.x-l[0].x)*this.SCALE_AW,E.y=l[0].y+(u.y-l[0].y)*this.SCALE_AW;var A=new SuperMap.Geometry.Point(0,0);A.x=l[1].x+(c.x-l[1].x)*this.SCALE_AW,A.y=l[1].y+(c.y-l[1].y)*this.SCALE_AW;var G=new SuperMap.Geometry.Point(0,0);G.x=v.x+(u.x-v.x)*this.SCALE_ATAJctrlSameSide,G.y=v.y+(u.y-v.y)*this.SCALE_ATAJctrlSameSide;var C=new SuperMap.Geometry.Point(0,0);C.x=U.x+(c.x-U.x)*this.SCALE_ATAJctrlSameSide,C.y=U.y+(c.y-U.y)*this.SCALE_ATAJctrlSameSide;var V=new SuperMap.Geometry.Point(0,0);V.x=O.x+(y.x-O.x)*this.SCALE_ATAJctrlDefSide,V.y=O.y+(y.y-O.y)*this.SCALE_ATAJctrlDefSide;var I=new SuperMap.Geometry.Point(0,0);I.x=L.x+(h.x-L.x)*this.SCALE_ATAJctrlDefSide,I.y=L.y+(h.y-L.y)*this.SCALE_ATAJctrlDefSide;var j=new SuperMap.Geometry.Point(0,0);j.x=f.x+(g.x-f.x)*o,j.y=f.y+(g.y-f.y)*o,this.m_scalePoints.push(new SuperMap.Geometry.Point(j.x,j.y));var Y=new SuperMap.Geometry.Point(0,0),B=new SuperMap.Geometry.Point(0,0);Y.x=l[0].x+(l[3].x-l[0].x)*o,Y.y=l[0].y+(l[3].y-l[0].y)*o,B.x=l[1].x+(l[2].x-l[1].x)*o,B.y=l[1].y+(l[2].y-l[1].y)*o,Y.x=Y.x+(j.x-Y.x)*this.QIANJI_RATE3,Y.y=Y.y+(j.y-Y.y)*this.QIANJI_RATE3,B.x=B.x+(j.x-B.x)*this.QIANJI_RATE3,B.y=B.y+(j.y-B.y)*this.QIANJI_RATE3;var R=[];R.push(l[0].clone()),R.push(E.clone()),R.push(G.clone()),R.push(v.clone()),e.MoveTo(R[0]),e.CurveTo(R[1],R[2],R[3]);var N,D=[],k=[],z=[],F=[],q=[],W=[],K=[];for(e.ToSubPathPolygons(K),D=K[0],N=K[0].length,e.LineTo(_),e.LineTo(l[3]),e.LineTo(w),(R=[]).push(O),R.push(V),R.push(Y),R.push(j),e.LineTo(R[0]),K=[],e.ToSubPathPolygons(K);N<K[0].length;N++)k.push(K[0][N]);for(N=K[0].length,e.CurveTo(R[1],R[2],R[3]),K=[],e.ToSubPathPolygons(K);N<K[0].length;N++)z.push(K[0][N]);for(N=K[0].length,[],(R=[]).push(B),R.push(I),R.push(L),e.CurveTo(R[0],R[1],R[2]),K=[],e.ToSubPathPolygons(K);N<K[0].length;N++)F.push(K[0][N]);for(N=K[0].length,e.LineTo(x),e.LineTo(l[2]),e.LineTo(T),[],(R=[]).push(U),R.push(C),R.push(A),R.push(r),e.LineTo(R[0]),K=[],e.ToSubPathPolygons(K);N<K[0].length;N++)q.push(K[0][N]);for(N=K[0].length,e.CurveTo(R[1],R[2],R[3]),K=[],e.ToSubPathPolygons(K);N<K[0].length;N++)W.push(K[0][N]);return K=[],e.ToSubPathPolygons(K),{shapePts:K[0],LeftArowLeftBody:D,LeftArowHead:k,LeftArowRightBody:z,RightArowLeftBody:F,RightArowHead:q,RightArowRightBody:W}}}]),e}());e.default=u,SuperMap.Geometry.AlgoSymbol1006=u},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),i=(function(t){t&&t.__esModule}(l(36)),function(){function t(e,l,n){o(this,t),this.m_pData=null,this.CLASS_NAME="SuperMap.Plot.Path2D",e?(this.m_x=e,this.m_y=l,this.m_type=n):this.m_pData=null}return n(t,[{key:"MoveTo",value:function(t){this.ensureData(),this.detach();var e=this.getDataPtr();if(e.require_StartNewFigure=!1,0==e.elements[e.elements.length-1].GetType())e.elements[e.elements.length-1].SetPosition(t.x,t.y);else{var l=new SuperMap.Plot.Element(t.x,t.y,0);e.elements.push(l)}e.cStart=e.elements.length-1}},{key:"LineTo",value:function(t){this.ensureData(),this.detach();var e=this.getDataPtr();if(e.MaybeStartNewFigure(),e.elements[e.elements.length-1].GetX()!=t.x||e.elements[e.elements.length-1].GetY()!=t.y){var l=new SuperMap.Plot.Element(t.x,t.y,1);e.elements.push(l)}}},{key:"CurveTo",value:function(t,e,l){this.ensureData(),this.detach();var o=this.getDataPtr();if(o.elements[o.elements.length-1].GetX()!=t.x||o.elements[o.elements.length-1].GetY()!=t.y||t.x!=e.x||t.y!=e.y||e.x!=endPoint.x||e.y!=endPoint.y){o.MaybeStartNewFigure();var n=new SuperMap.Plot.Element(t.x,t.y,2),i=new SuperMap.Plot.Element(e.x,e.y,3),r=new SuperMap.Plot.Element(l.x,l.y,3);o.elements.push(n),o.elements.push(i),o.elements.push(r)}}},{key:"CubicTo",value:function(t,e,l){this.ensureData(),this.detach();var o=this.getDataPtr();if(o.elements[o.elements.length-1].GetX()!=t.x||o.elements[o.elements.length-1].GetY()!=t.y||t.x!=e.x||t.y!=e.y||e.x!=l.x||e.y!=l.y){o.MaybeStartNewFigure();var n=new SuperMap.Plot.Element(t.x,t.y,2),i=new SuperMap.Plot.Element(e.x,e.y,3),r=new SuperMap.Plot.Element(l.x,l.y,3);o.elements.push(n),o.elements.push(i),o.elements.push(r)}}},{key:"ToSubPathPolygons",value:function(t){var e,l,o=this.getDataPtr();if(this.IsEmpty())return!1;for(var n=[],i=this.GetElementCount(),r=0;r<i;r++){var a=o.elements[r];switch(a.GetType()){case 0:n.length>1&&t.push(n),n=[],e=a.GetX(),l=a.GetY(),n.push(new SuperMap.Geometry.Point(e,l));break;case 1:e=a.GetX(),l=a.GetY(),n.push(new SuperMap.Geometry.Point(e,l));break;case 2:3!=o.elements[r+1].GetType()||o.elements[r+1].GetType();for(var p=o.elements[r-1].GetX(),u=o.elements[r-1].GetY(),s=a.GetX(),P=a.GetY(),c=o.elements[r+1].GetX(),S=o.elements[r+1].GetY(),y=o.elements[r+2].GetX(),h=o.elements[r+2].GetY(),f=0;f<=1;f+=.03125){var g=f*f,M=g*f,b=1-3*f+3*g-M,d=3*(f-2*g+M),m=3*(g-M),v=M;n.push(new SuperMap.Geometry.Point(b*p+d*s+m*c+v*y,b*u+d*P+m*S+v*h))}r+=2}}return n.length>1&&t.push(n),!0}},{key:"ensureData",value:function(){null==this.m_pData&&this.ensureData_helper()}},{key:"ensureData_helper",value:function(){var t=new SuperMap.Plot.UGPath2DData,e=new SuperMap.Plot.Element(0,0,0);t.elements.push(e),null==this.m_pData||this.mtDeRef(m_pData.ref)||(this.m_pData=null),this.m_pData=t}},{key:"detach",value:function(){1!=this.m_pData.ref&&this.detach_helper(),this.setBoundsDirty(!0)}},{key:"detach_helper",value:function(){var t=new SuperMap.Plot.UGPath2DData;null==this.m_pData||this.mtDeRef(this.m_pData.ref)||(this.m_pData=null),this.m_pData=t}},{key:"setBoundsDirty",value:function(t){this.getDataPtr().isBoundsDirty=t}},{key:"getDataPtr",value:function(){return this.m_pData}},{key:"IsEmpty",value:function(){if(null==this.m_pData)return!0;var t=this.m_pData.elements.length;return 0==t||1==t&&0==this.m_pData.elements[0].GetType()}},{key:"GetElementCount",value:function(){return null!=this.m_pData?this.m_pData.elements.length:0}}],[{key:"mtRef",value:function(t){return 0!=++t}},{key:"mtDeRef",value:function(t){return 0!=--t}}]),t}());e.default=i,SuperMap.Plot.Path2D=i},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),i=(function(t){t&&t.__esModule}(l(30)),function(){function t(e,l,n){o(this,t),this.m_x=0,this.m_y=0,this.m_type=0,this.CLASS_NAME="SuperMap.Plot.Element",this.m_x=e,this.m_y=l,this.m_type=n}return n(t,[{key:"GetX",value:function(){return this.m_x}},{key:"GetY",value:function(){return this.m_y}},{key:"GetType",value:function(){return this.m_type}},{key:"GetPosition",value:function(){return SuperMap.Geometry.Point(this.m_x,this.m_y)}},{key:"SetPosition",value:function(t,e){this.m_x=t,this.m_y=e}},{key:"GetType",value:function(){return this.m_type}},{key:"SetType",value:function(t){this.m_type=t}},{key:"IsCurveTo",value:function(){return 2==this.m_type}},{key:"IsLineTo",value:function(){return 1==this.m_type}},{key:"IsMoveTo",value:function(){return 0==this.m_type}},{key:"Equal",value:function(t){return SuperMap.Plot.PlottingUtil.equalFuzzy(this.m_x,t.m_x,1e-10)&&SuperMap.Plot.PlottingUtil.equalFuzzy(this.m_y,t.m_y,1e-10)&&this.m_type==t.m_type}},{key:"clone",value:function(){return new SuperMap.Plot.Path2D.Element(this.m_x,this.m_y,this.m_type)}}]),t}());e.default=i,SuperMap.Plot.Element=i},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),i=(function(t){t&&t.__esModule}(l(35)),function(){function t(e){if(o(this,t),this.cStart=0,this.fillRule=0,this.require_StartNewFigure=!1,this.isBoundsDirty=!1,this.bounds=null,this.ref=1,this.elements=null,this.CLASS_NAME="SuperMap.Plot.UGPath2DData",e){this.cStart=e.cStart,this.fillRule=e.fillRule,this.require_StartNewFigure=e.require_StartNewFigure,this.isBoundsDirty=e.isBoundsDirty,this.bounds=new SuperMap.Bounds(e.bounds.left,e.bounds.bottom,e.bounds.right,e.bounds.top),this.ref=1,this.elements=[];for(var l=0;l<e.elements.length;l++)this.elements.push(e.elements[l].clone())}else this.ref=1,this.bounds=new SuperMap.Bounds(0,0,0,0),this.elements=[]}return n(t,[{key:"IsClosed",value:function(){var t=this.elements[this.cStart],e=this.elements[this.elements.length-1];return t.GetX()==e.GetX()&&t.GetY()==e.GetY()}},{key:"Close",value:function(){this.require_StartNewFigure=!0;var t=this.elements[this.cStart],e=this.elements[this.elements.length-1];t!=e&&(t.Equal(e)?e.SetPosition(t.GetX(),t.GetY()):this.elements.push(new SuperMap.Plot.Element(t.GetX(),t.GetY(),SuperMap.Plot.ElementType.LineToElement)))}},{key:"MaybeStartNewFigure",value:function(){if(this.require_StartNewFigure){var t=this.elements[this.elements.length-1].clone();t.SetType(0),this.elements.push(t),this.require_StartNewFigure=!1}}}]),t}());e.default=i,SuperMap.Plot.UGPath2DData=i},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol12501",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(.03),l.getScaleValues().push(.5),l.getScaleValues().push(.03)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){if(!this.getIsEdit()){var e=this.getSubSymbolScaleValue();this.getScaleValues()[0]=e,this.getScaleValues()[1]=.5*e,this.getScaleValues()[3]=.5*e}var l=this.getScaleValues()[0],o=this.getScaleValues()[1],n=this.getScaleValues()[2],i=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);i=SuperMap.Plot.PlottingUtil.clearSamePts(i);var r=this.GetCurvePts(t,l,o);if(0!==r.pt.length){for(P=0;P<r.pt.length-1;P++)SuperMap.Plot.PlottingUtil.distance(r.pt[P],r.pt[P+1]);var a=SuperMap.Plot.PlottingUtil.polylineDistance(i)*n,p=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,a);if(-1!==p.index){for(var u=SuperMap.Plot.PlottingUtil.polylineDistance(t)*this.getScaleValues()[3],s=[],P=0;P<360;P+=12)s.push(SuperMap.Plot.PlottingUtil.circlePoint(p.pt,u,u,P));s.push(s[0]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s);for(var c=[],S=[],P=0;P<r.pt.length;P++)SuperMap.Plot.PlottingUtil.ptIsInPolygon(s,r.pt[P])?S.length>1&&(c.push(S),S=[]):S.push(r.pt[P]);S.length>1&&c.push(S);for(P=0;P<c.length;P++)this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c[P]);var y=new SuperMap.Geometry.Point(r.pt[0].x,r.pt[0].y);y.isScalePoint=!0,y.tag=0,this.addScalePoint(y);var h=new SuperMap.Geometry.Point(r.scalePt.x,r.scalePt.y);h.isScalePoint=!0,h.tag=1,this.addScalePoint(h);var f=new SuperMap.Geometry.Point(p.pt.x,p.pt.y);f.isScalePoint=!0,f.tag=2,this.addScalePoint(f);var g=SuperMap.Plot.PlottingUtil.circlePoint(new SuperMap.Geometry.Point(p.pt.x,p.pt.y),u,u,0),M=new SuperMap.Geometry.Point(g.x,g.y);M.isScalePoint=!0,M.tag=3,this.addScalePoint(M)}}}}},{key:"modifyPoint",value:function(t,e){if(null!=e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;if(4>this.getScaleValues().length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l),i=new SuperMap.Geometry.Point(e.x,e.y);if(0===t){var r=new SuperMap.Geometry.Point(l[0].x,l[0].y),a=SuperMap.Plot.PlottingUtil.distance(r,i),p=2*a/o;this.getScaleValues()[1]=p}else if(1===t){r=new SuperMap.Geometry.Point(l[0].x,l[0].y);var u=(a=SuperMap.Plot.PlottingUtil.distance(r,i))/o;u>=1&&(u=1),u<.01&&(u=.01),this.getScaleValues()[0]=u}else if(2===t){var s=-1,P=0,c=new SuperMap.Geometry.Point;if(l.length===this.minEditPts){n=[];var S=this.GetCurvePts(l,this.getScaleValues()[0],this.getScaleValues()[1]);if(0===S.pt.length)return;n.push(l[0]),(n=n.concat(S.pt)).push(l[1])}for(d=0;d<n.length-1;d++){var y=n[d],h=n[d+1],f=SuperMap.Plot.PlottingUtil.projectPoint(i,y,h);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(f,y,h)){var g=SuperMap.Plot.PlottingUtil.distance(i,f);-1===s?(s=d,c=f,P=g):P>g&&(s=d,c=f,P=g)}}(-1===s||s>n.length-1)&&(s=0,c=n[0]);for(var M=SuperMap.Plot.PlottingUtil.polylineDistance(n),b=[],d=0;d<s;d++)b.push(n[d]);b.push(c);var m=SuperMap.Plot.PlottingUtil.polylineDistance(b);(v=m/M)<.05&&(v=.05),v>.95&&(v=.95),this.getScaleValues()[2]=v}else if(3===t){var v=this.getScaleValues()[2],O=(M=SuperMap.Plot.PlottingUtil.polylineDistance(n))*v;if(-1===(c=SuperMap.Plot.PlottingUtil.findPointInPolyLine(n,O)).index)return;var L=SuperMap.Plot.PlottingUtil.distance(c.pt,e)/o;this.getScaleValues()[3]=L}}this.calculateParts()}}},{key:"GetCurvePts",value:function(t,e,l){for(var o,n=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t),i=SuperMap.Plot.PlottingUtil.polylineDistance(n),r=i*e,a=i*l/2,p=[],u=[],s=n[0],P=!1,c=n[0],S=1;S<n.length;S++){var y=n[S],h=SuperMap.Plot.PlottingUtil.distance(s,y);if(!(h<r&&S!==n.length-1)){for(var f,g=parseInt(h/r),M=0;M<g;M++){f=SuperMap.Plot.PlottingUtil.linePnt(s,y,r),P||(o=f,P=!0);var b=this.GetCosPts2D(s,f,r,a);p=u.length>1&&0===M?this.ClearCurvePts2D(c,s,y,u,b,p):p.concat(b),u=(u=[]).concat(b),c=s,s=f}S===n.length-1&&(f=n[n.length-1],b=this.GetCosPts2D(s,f,r,a),p=u.length>1&&b.length>1?this.ClearCurvePts2D(c,s,y,u,b,p):p.concat(b))}}return{pt:p,scalePt:o}}},{key:"GetCosPts2D",value:function(t,e,l,o){for(var n=[],i=SuperMap.Plot.PlottingUtil.distance(t,e),r=l/30,a=0;a<i;a+=r){var p=a*(2*Math.PI/l),u=o*Math.cos(p),s=new SuperMap.Geometry.Point(a,u),P=180*SuperMap.Plot.PlottingUtil.radian(t,e)/Math.PI,c=SuperMap.Plot.PlottingUtil.coordinateTrans(t,s,P);n.push(c)}return n}},{key:"ClearCurvePts2D",value:function(t,e,l,o,n,i){for(var r=180*SuperMap.Plot.PlottingUtil.radian(e,l)/Math.PI,a=180*SuperMap.Plot.PlottingUtil.radian(e,t)/Math.PI-r;a<=0;)a+=360;var p=a/2,u=l;u=SuperMap.Plot.PlottingUtil.rotateAngle(e,p*Math.PI/180,u);for(var s=SuperMap.Plot.PlottingUtil.linePnt(e,u,1),P=0,c=0;c<o.length;c++)if(SuperMap.Plot.PlottingUtil.pointIsRightToLine(e,s,o[c])){P=c;break}if(0!=P)for(var S=0;S<o.length-P;S++)i.slice(S,i.length-1);for(c=0;c<n.length;c++)SuperMap.Plot.PlottingUtil.pointIsRightToLine(e,s,n[c])&&i.push(n[c]);return i}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol12501=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(14)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol12502",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(.03)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.5),this.getScaleValues().push(.03));for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=this.getScaleValues()[0];this.getIsEdit()||(this.getScaleValues()[1]=this.getSubSymbolScaleValue());var n=this.getScaleValues()[1]*e,i=o*e,r=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,i);if(-1!==r.index){var a=r.pt,p=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[a,new SuperMap.Geometry.Point(a.x+n,a.y)]);p.push(p[0]);for(l=0;l<t.length-1;l++){var u=t[l],s=t[l+1],P=SuperMap.Plot.PlottingUtil.distance(a,u),c=SuperMap.Plot.PlottingUtil.distance(a,s);if(!(P<n&&c<n))if(P>n&&c<n||P<n&&c>n){var S;S=P>n?u:s,(h=this.getLineAddCircleIntersectPts(u,s,p)).length>0&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[h[0],S])}else{var y=SuperMap.Plot.PlottingUtil.projectPoint(a,u,s);if(SuperMap.Plot.PlottingUtil.distance(a,y)>=n)this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[u,s]);else if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(y,u,s)){var h=this.getLineAddCircleIntersectPts(u,s,p);if(h.length>0){h.unshift(u),h.push(s);for(var f=0;f<h.length-1;f++)this.isLineInCircle(h[f],h[f+1],a,n)||this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[h[f],h[f+1]])}}else this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[u,s])}}var g=180*SuperMap.Plot.PlottingUtil.radian(h[0],h[h.length-1])/Math.PI,M=h;M=1===h.length?h[0]:h[1];v=SuperMap.Plot.PlottingUtil.circlePoint(M,.3*n,.3*n,g);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[M,v]);var b=180*SuperMap.Plot.PlottingUtil.radian(M,v)/Math.PI,d=SuperMap.Plot.PlottingUtil.circlePoint(a,.1*n,.1*n,b),m=180*SuperMap.Plot.PlottingUtil.radian(M,a)/Math.PI,s=new SuperMap.Geometry.Point(-.95*n,.15*n),v=new SuperMap.Geometry.Point(-.95*n,-.15*n),O=SuperMap.Plot.PlottingUtil.coordinateTrans(d,s,m),L=SuperMap.Plot.PlottingUtil.coordinateTrans(d,v,m),U={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[d,O,L],U),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[a,new SuperMap.Geometry.Point(a.x+n,a.y)]),this.addScalePoint(a,0),this.addScalePoint(new SuperMap.Geometry.Point(a.x+n,a.y),1)}}}},{key:"isLineInCircle",value:function(t,e,l,o){var n=new SuperMap.Geometry.Point((t.x+e.x)/2,(t.y+e.y)/2);return o>SuperMap.Plot.PlottingUtil.distance(n,l)}},{key:"getLineAddCircleIntersectPts",value:function(t,e,l){for(var o=[],n=0;n<l.length-1;n++){var i=l[n],r=l[n+1],a=SuperMap.Plot.PlottingUtil.intersectLines(t,e,i,r);a.isIntersectLines&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(a.intersectPoint,t,e)&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(a.intersectPoint,i,r)&&o.push(a.intersectPoint)}for(var p=0;p<o.length-1;p++)SuperMap.Plot.PlottingUtil.isSamePt(o[p],o[p+1])&&(o.splice(p,1),p--);if(t.x>e.x){for(u=0;u<o.length&&u!=o.length-1;u++)if(o[u].x<o[u+1].x){s=o[u];o[u]=o[u+1],o[u+1]=s}}else if(t.x<e.x){for(u=0;u<o.length&&u!=o.length-1;u++)if(o[u].x>o[u+1].x){s=o[u];o[u]=o[u+1],o[u+1]=s}}else if(t.y>e.y){for(u=0;u<o.length&&u!=o.length-1;u++)if(o[u].y<o[u+1].y){s=o[u];o[u]=o[u+1],o[u+1]=s}}else if(t.y<e.y)for(var u=0;u<o.length&&u!=o.length-1;u++)if(o[u].y>o[u+1].y){var s=o[u];o[u]=o[u+1],o[u+1]=s}return o}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol12502=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol13700",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts))if(2===t.length)this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t);else if(3===t.length){var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=new SuperMap.Geometry.Point(t[1].x,t[1].y),o=new SuperMap.Geometry.Point(t[2].x,t[2].y),n=SuperMap.Plot.PlottingUtil.distance(l,o);if(0>=n)return;var i=SuperMap.Plot.PlottingUtil.distance(e,l)/n;this.getScaleValues().push(i);var r=180*SuperMap.Plot.PlottingUtil.radian(e,l)/Math.PI;r>90?r-=90:r=270+r,this.getScaleValues().push(r*(Math.PI/180));var a=180*SuperMap.Plot.PlottingUtil.radian(e,o)/Math.PI;a>90?a-=90:a=270+a,this.getScaleValues().push(a*(Math.PI/180));var p=this.getScaleValues()[0]*n,u=this.getScaleValues()[1]*(180/Math.PI)+90,s=this.getScaleValues()[2]*(180/Math.PI)+90;u<s&&(u+=360);for(var P=[],c=u;c>=s;c-=4){S=SuperMap.Plot.PlottingUtil.circlePoint(this.controlPoints[0],p,p,c);P.push(S)}if(c!==s){var S=SuperMap.Plot.PlottingUtil.circlePoint(this.controlPoints[0],p,p,s);P.push(S)}this.controlPoints[2]=SuperMap.Plot.PlottingUtil.circlePoint(this.controlPoints[0],p,p,s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol13700=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15200",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=99999,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(.1),l.getScaleValues().push(.185)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);for(var l=0,o=0,n=e.length-1;o<n;o++)l+=SuperMap.Plot.PlottingUtil.distance(e[o],e[o+1]);for(var i=0,r=0,n=t.length-1;r<n;r++)i+=SuperMap.Plot.PlottingUtil.distance(t[r],t[r+1]);this.getIsEdit()||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());for(var a=this.getScaleValues()[0]*i,p=this.getScaleValues()[1],u=this.getScaleValues()[2]*i,s=.3*u,P=u;P<l;P+=u){var c=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(P,e);if(-1===c.index)return;var S=P+s,y=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(S,e);if(-1===y.index)return;var h=[],f=[];h.push(c.pts);var g=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(a,e[c.index],c.pts);0===p?h.push(new SuperMap.Geometry.Point(g.pntLeft.x,g.pntLeft.y)):h.push(new SuperMap.Geometry.Point(g.pntRight.x,g.pntRight.y)),f.push(y.pts);var M=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(a,e[y.index],y.pts);if(0===p?f.push(new SuperMap.Geometry.Point(M.pntLeft.x,M.pntLeft.y)):f.push(new SuperMap.Geometry.Point(M.pntRight.x,M.pntRight.y)),u===P){this.clearScalePoints();var b=new SuperMap.Geometry.Point(h[1].x,h[1].y);b.isScalePoint=!0,b.tag=0,this.addScalePoint(b),(b=new SuperMap.Geometry.Point(h[0].x,h[0].y)).isScalePoint=!0,b.tag=1,this.addScalePoint(b)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;for(var o=0,n=0,i=l.length-1;n<i;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);var r=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l),a=new SuperMap.Geometry.Point(e.x,e.y);if(0===t){var p=SuperMap.Plot.PlottingUtil.findPointInPolyLine(r,o*this.getScaleValues()[2]);if(-1===p.index)return void this.calculateParts();var u=SuperMap.Plot.PlottingUtil.distance(p.pt,a)/o,s=SuperMap.Plot.PlottingUtil.pointIsRightToLine(r[0],r[1],e);this.getScaleValues()[1]=s?1:0,this.getScaleValues()[0]=u}else if(1===t){for(var P=0,c=-1,S=[],y=0,i=r.length-1;y<i;y++){var h=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,r[y],r[y+1]);if(h.isOnline){var f=SuperMap.Plot.PlottingUtil.distance(h.projectPoint,this.controlPoints[1]);0==P?(P=f,c=y,S=e):f<P&&(P=f,c=y,S=e)}}if(-1==c)return void this.calculateParts();for(var g=0,y=0,i=c-1;y<i;y++)g+=SuperMap.Plot.PlottingUtil.distance(r[y],r[y+1]);var M=(g+=SuperMap.Plot.PlottingUtil.distance(S,r[c]))/o;M>.7&&(M=.7),this.getScaleValues()[2]=M}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15200=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15201",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15201=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15202",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(parseFloat(.1732)),l.getScaleValues().push(.1),l.getScaleValues().push(1)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=new SuperMap.Geometry.Point(t[1].x,t[1].y),o=SuperMap.Plot.PlottingUtil.distance(e,l),n=this.getScaleValues()[0]*o,i=this.getScaleValues()[1]*o,r=this.getScaleValues()[2],a=null;if(1===r){var p=SuperMap.Plot.PlottingUtil.linePnt(l,e,o+n);a=new SuperMap.Geometry.Point(p.x,p.y)}else p=SuperMap.Plot.PlottingUtil.linePnt(l,e,o-n),a=new SuperMap.Geometry.Point(p.x,p.y);var u=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*i,t[0],a),s=[];s.push(u.pntRight),s.push(t[0]),s.push(u.pntLeft),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s);var P=[],c=new SuperMap.Geometry.Point((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2);if(1===r){var S=new SuperMap.Geometry.Point(2*c.x-u.pntLeft.x,2*c.y-u.pntLeft.y);P.push(S),P.push(t[1]);var y=new SuperMap.Geometry.Point(2*c.x-u.pntRight.x,2*c.y-u.pntRight.y);P.push(y)}else S=new SuperMap.Geometry.Point(2*c.x-u.pntRight.x,2*c.y-u.pntRight.y),P.push(S),P.push(t[1]),y=new SuperMap.Geometry.Point(2*c.x-u.pntLeft.x,2*c.y-u.pntLeft.y),P.push(y);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15202=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(3)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15801",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=this.getScaleValues()[0],o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=l*o,i=this.getScaleValues()[2]*o*.5,r=!1;r=0===this.getScaleValues()[1];var a=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(0!==a){for(var p=new SuperMap.Geometry.Point(0,0),u=[],s=0;s<=a;s+=i){var P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s);if(!(P.index<0)){var c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[P.index+1],P.pt);if(r?u.push(c.pntRight):u.push(c.pntLeft),Math.abs(s)<=1e-6){this.clearScalePoints();var S=new SuperMap.Geometry.Point(u[0].x,u[0].y);S.isScalePoint=!0,S.tag=0,this.addScalePoint(S)}else Math.abs(2*i-s)<=1e-6&&((S=new SuperMap.Geometry.Point(P.pt.x,P.pt.y)).isScalePoint=!0,S.tag=1,this.addScalePoint(S));r=!r}}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u);for(var y=u.length,h=0,f=0;f<y-1;++f){var g=new SuperMap.Geometry.Point(u[f].x,u[f].y),M=new SuperMap.Geometry.Point(u[f+1].x,u[f+1].y);h=.3*SuperMap.Plot.PlottingUtil.distance(g,M);var b=[],d=[],m=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.35,u[f],u[f+1]);p=new SuperMap.Geometry.Point((u[f].x+u[f+1].x)/2,(u[f].y+u[f+1].y)/2);var v=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*h,u[f],m);b.push(v.pntLeft),b.push(v.pntRight),d.push(new SuperMap.Geometry.Point(2*p.x-v.pntLeft.x,2*p.y-v.pntLeft.y)),d.push(new SuperMap.Geometry.Point(2*p.x-v.pntRight.x,2*p.y-v.pntRight.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d)}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15801=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(3)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15802",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=this.getScaleValues()[0],o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=l*o,i=this.getScaleValues()[2]*o*.5,r=!1;r=0===this.getScaleValues()[1];var a=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(0!==a){for(var p,u=[],s=0;s<=a;s+=i){var P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s);if(!(P.index<0)){var c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[P.index+1],P.pt);if(r?u.push(c.pntRight):u.push(c.pntLeft),Math.abs(s)<=1e-6){this.clearScalePoints();var S=new SuperMap.Geometry.Point(u[0].x,u[0].y);S.isScalePoint=!0,S.tag=0,this.addScalePoint(S)}else Math.abs(2*i-s)<=1e-6&&((S=new SuperMap.Geometry.Point(P.pt.x,P.pt.y)).isScalePoint=!0,S.tag=1,this.addScalePoint(S));r=!r}}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u);for(var y=u.length,h=0,f=0;f<y-1;++f){var g=new SuperMap.Geometry.Point(u[f].x,u[f].y),M=new SuperMap.Geometry.Point(u[f+1].x,u[f+1].y);h=.3*SuperMap.Plot.PlottingUtil.distance(g,M);var b=[],d=[],m=[],v=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.35,u[f],u[f+1]);p=new SuperMap.Geometry.Point((u[f].x+u[f+1].x)/2,(u[f].y+u[f+1].y)/2);var O=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*h,u[f],p);d.push(O.pntLeft,O.pntRight);var L=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*h,u[f],v);b.push(L.pntLeft,L.pntRight),m.push(new SuperMap.Geometry.Point(2*p.x-L.pntLeft.x,2*p.y-L.pntLeft.y)),m.push(new SuperMap.Geometry.Point(2*p.x-L.pntRight.x,2*p.y-L.pntRight.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m)}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15802=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(3)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15803",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=this.getScaleValues()[0],o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=l*o,i=this.getScaleValues()[2]*o*.5,r=!1;r=0===this.getScaleValues()[1];var a=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(0!==a){for(var p=[],u=0;u<=a;u+=i){var s=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,u);if(!(s.index<0)){var P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[s.index+1],s.pt);if(r?p.push(P.pntRight):p.push(P.pntLeft),Math.abs(u)<=1e-6){this.clearScalePoints();var c=new SuperMap.Geometry.Point(p[0].x,p[0].y);c.isScalePoint=!0,c.tag=0,this.addScalePoint(c)}else Math.abs(2*i-u)<=1e-6&&((c=new SuperMap.Geometry.Point(s.pt.x,s.pt.y)).isScalePoint=!0,c.tag=1,this.addScalePoint(c));r=!r}}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p);for(var S=p.length,y=0,h=0;h<S-1;++h){var f=new SuperMap.Geometry.Point(p[h].x,p[h].y),g=new SuperMap.Geometry.Point(p[h+1].x,p[h+1].y);y=.3*SuperMap.Plot.PlottingUtil.distance(f,g);var M=[],b=[];if(h!==S-2){var d=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*y,p[h],p[h+1]);M.push(d.pntLeft),M.push(d.pntRight),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M)}if(0!==h){var m=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*y,p[h+1],p[h]);b.push(m.pntLeft),b.push(m.pntRight),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b)}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15803=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(3)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15804",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=this.getScaleValues()[0],o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=l*o,i=this.getScaleValues()[2]*o*.5,r=!1;r=0===this.getScaleValues()[1];var a=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(0!==a){for(var p=new SuperMap.Geometry.Point(0,0),u=[],s=0;s<=a;s+=i){var P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s);if(!(P.index<0)){var c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[P.index+1],P.pt);if(r?u.push(c.pntRight):u.push(c.pntLeft),Math.abs(s)<=1e-6){this.clearScalePoints();var S=new SuperMap.Geometry.Point(u[0].x,u[0].y);S.isScalePoint=!0,S.tag=0,this.addScalePoint(S)}else Math.abs(2*i-s)<=1e-6&&((S=new SuperMap.Geometry.Point(P.pt.x,P.pt.y)).isScalePoint=!0,S.tag=1,this.addScalePoint(S));r=!r}}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u);for(var y=u.length,h=0,f=0;f<y-1;++f){var g=new SuperMap.Geometry.Point(u[f].x,u[f].y),M=new SuperMap.Geometry.Point(u[f+1].x,u[f+1].y);h=.3*SuperMap.Plot.PlottingUtil.distance(g,M);var b=[],d=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.35,u[f],u[f+1]),m=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*h,u[f],d);b.push(m.pntRight),p=new SuperMap.Geometry.Point((u[f].x+u[f+1].x)/2,(u[f].y+u[f+1].y)/2);var v=new SuperMap.Geometry.Point(2*p.x-m.pntLeft.x,2*p.y-m.pntLeft.y),O=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.3*h,u[f],p);b.push(O.pntLeft),b.push(v),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b)}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15804=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15806",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.06),l.getScaleValues().push(1),l.getScaleValues().push(.1)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)&&t.length>=this.minEditPts){this.clearScalePoints();var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=this.getScaleValues()[0],o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=l*o,i=.6*n,r=this.getScaleValues()[2]*o,a=0===this.getScaleValues()[1],p=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(0===p)return;for(var u=[],s=0;s<=p;s+=r){var P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s);if(!(P.index<0)){var c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[P.index+1],P.pt);if(a?u.push(c.pntRight):u.push(c.pntLeft),!((P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s+.65*r)).index<0||(c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,e[P.index+1],P.pt),a?u.push(c.pntRight):u.push(c.pntLeft),(P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s+.8*r)).index<0||(u.push(P.pt),(P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s+.5*r)).index<0||(c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[P.index+1],P.pt),a?u.push(c.pntLeft):u.push(c.pntRight),P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s+.2*r),u.push(P.pt),(P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s+.35*r)).index<0||(c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,e[P.index+1],P.pt),a?u.push(c.pntRight):u.push(c.pntLeft),(P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,s+r)).index<0||(c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[P.index+1],P.pt),a?u.push(c.pntRight):u.push(c.pntLeft),!(Math.abs(s)<=1e-6)))))))){this.clearScalePoints();var S=new SuperMap.Geometry.Point(u[0].x,u[0].y);S.isScalePoint=!0,S.tag=0,this.addScalePoint(S),(S=new SuperMap.Geometry.Point(P.pt.x,P.pt.y)).isScalePoint=!0,S.tag=1,this.addScalePoint(S)}}}var y=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(u);SuperMap.Plot.PlottingUtil.clearSamePts(y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!==t&&1!==t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(l.length<this.minEditPts)return;var n=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);if(0===t){var i=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(1,n[1],n[0]),r=SuperMap.Plot.PlottingUtil.pointProjectToSegment(new SuperMap.Geometry.Point(e.x,e.y),i.pntRight,i.pntLeft),a=SuperMap.Plot.PlottingUtil.distance(r.projectPoint,l[0])/o;this.getScaleValues()[0]=a;var p=SuperMap.Plot.PlottingUtil.pointIsRightToLine(n[0],n[1],new SuperMap.Geometry.Point(e.x,e.y));this.getScaleValues()[1]=p?1:0}else{for(var u,s=-1,P=0;P<n.length-1;P++)if((r=SuperMap.Plot.PlottingUtil.pointProjectToSegment(new SuperMap.Geometry.Point(e.x,e.y),n[P],n[P+1])).isOnline){u=r.projectPoint,s=P;break}var c=[];-1===s&&(c.push(n[0]),s=0);for(P=0;P<=s;P++)c.push(n[P]);u&&c.push(u);var S=SuperMap.Plot.PlottingUtil.polylineDistance(c)/o;S<.02&&(S=.02),S>.5&&(S=.5),this.getScaleValues()[2]=S}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15806=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(3)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol15900",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.02),l.getScaleValues().push(1),l.getScaleValues().push(.05)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);for(var l=0,o=0;o<t.length-1;o++)l+=SuperMap.Plot.PlottingUtil.distance(t[o],t[o+1]);var n=l*this.getScaleValues()[0],i=l*this.getScaleValues()[2],r=!1;r=0===this.getScaleValues()[0];for(var a=0,o=0;o<e.length-1;o++)a+=SuperMap.Plot.PlottingUtil.distance(e[o],e[o+1]);if(0!==a)for(var p=0;p<=a;p+=i){var u=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,p);if(-1!==u.index){var s=[],P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[u.index+1],u.pt);r?s.push(P.pntRight):s.push(P.pntLeft);var c=p+i,S=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,c);if(-1!==S.index){var y=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,e[S.index+1],S.pt);r?s.push(y.pntLeft):s.push(y.pntRight),Math.abs(p)<1e-6&&(this.addScalePoint(s[0],0),this.addScalePoint(S.pt,1)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s)}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol15900=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol16200",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.02),l.getScaleValues().push(.1),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=this.getSubSymbolScaleValue();this.getIsEdit()||(this.getScaleValues()[0]=.5*o);var n=this.getScaleValues()[0]*e,i=SuperMap.Plot.PlottingUtil.paraLine(l,.5*n,!0),r=SuperMap.Plot.PlottingUtil.paraLine(l,.5*n,!1);i=SuperMap.Plot.PlottingUtil.clearSamePts(i),r=SuperMap.Plot.PlottingUtil.clearSamePts(r),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r);for(var a=e*this.getScaleValues()[1],p=.5*n,u=SuperMap.Plot.PlottingUtil.polylineDistance(l),s=p,P=0;s<u;s+=a,P++){var c=SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,s);if(-1!==c.index){var S=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,l[c.index+1],c.pt),y=[];y.push(S.pntLeft),y.push(S.pntRight),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y),0===P?this.addScalePoint(S.pntRight,0):1===P&&this.addScalePoint(c.pt,1)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);var i=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);if(i=SuperMap.Plot.PlottingUtil.clearSamePts(i),0==t){var r=.5*(u=o*this.getScaleValues()[0]),a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,r);if(-1===a.index)return;var p=SuperMap.Plot.PlottingUtil.distance(e,a.pt);this.getScaleValues()[0]=p/o}else if(1===t){var u=o*this.getScaleValues()[0],r=.5*u,s=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,r);-1===s.index&&(s.index=0);var P=SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(e,i);-1===P.index&&(P.index=0,P.pt=i[1]);for(var c=SuperMap.Plot.PlottingUtil.distance(s.pt,i[s.index+1]),n=s.index+1;n<P.index;n++)c+=SuperMap.Plot.PlottingUtil.distance(i[n],i[n+1]);var S=(c+=SuperMap.Plot.PlottingUtil.distance(i[P.index],P.pt))/o;S<.01&&(S=.01),S>.95&&(S=.95),this.getScaleValues()[1]=S}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol16200=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol16201",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.02),l.getScaleValues().push(.1),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.getIsEdit()||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());var o=this.getScaleValues()[0]*e,n=SuperMap.Plot.PlottingUtil.paraLine(l,o,!0),i=SuperMap.Plot.PlottingUtil.paraLine(l,o,!1);n=SuperMap.Plot.PlottingUtil.clearSamePts(n),i=SuperMap.Plot.PlottingUtil.clearSamePts(i),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);for(var r=e*this.getScaleValues()[1],a=e*this.getSubSymbolScaleValue(),p=SuperMap.Plot.PlottingUtil.polylineDistance(l),u=a,s=0;u<p;u+=r,s++){var P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,u);if(-1!==P.index){var c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(o,l[P.index+1],P.pt),S=[];S.push(P.pt),S.push(c.pntRight),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,S),0===s?this.addScalePoint(c.pntRight):1===s&&this.addScalePoint(P.pt)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);var i=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);if(i=SuperMap.Plot.PlottingUtil.clearSamePts(i),0===t){var r=o*this.getSubSymbolScaleValue(),a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,r);if(-1===a.index)return;var p=SuperMap.Plot.PlottingUtil.distance(e,a.pt);this.getScaleValues()[0]=p/o}else if(1===t){var r=o*this.getSubSymbolScaleValue(),u=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,r);-1===u.index&&(u.index=0);var s=SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(e,i);-1===s.index&&(s.index=0,s.pt=i[1]);for(var P=SuperMap.Plot.PlottingUtil.distance(u.pt,i[u.index+1]),n=u.index+1;n<s.index;n++)P+=SuperMap.Plot.PlottingUtil.distance(i[n],i[n+1]);var c=(P+=SuperMap.Plot.PlottingUtil.distance(i[s.index],s.pt))/o;c<.01&&(c=.01),c>.95&&(c=.95),this.getScaleValues()[1]=c}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol16201=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol16202",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=this.getScaleValues()[0]*e,n=[],i=[];n=SuperMap.Plot.PlottingUtil.paraLine(t,o,!0),i=SuperMap.Plot.PlottingUtil.paraLine(t,o,!1);var r=new SuperMap.Geometry.Point(n[0].x,n[0].y);r.isScalePoint=!0,r.tag=0,this.addScalePoint(r),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var a=new SuperMap.Geometry.Point(t[0].x,t[0].y),p=new SuperMap.Geometry.Point(t[1].x,t[1].y),u=180*SuperMap.Plot.PlottingUtil.radian(a,p)/Math.PI,s=new SuperMap.Geometry.Point(.3*e,0),P=SuperMap.Plot.PlottingUtil.coordinateTrans(a,s,u),c=new SuperMap.Geometry.Point(0,.4*o),S=new SuperMap.Geometry.Point(0,.2*o),y=SuperMap.Plot.PlottingUtil.coordinateTrans(P,c,u),h=SuperMap.Plot.PlottingUtil.coordinateTrans(P,S,u),f=[];f.push(y),f.push(h),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,f);var g=new SuperMap.Geometry.Point(0,.2*o),M=new SuperMap.Geometry.Point(0,-.4*o),b=SuperMap.Plot.PlottingUtil.coordinateTrans(P,g,u),d=SuperMap.Plot.PlottingUtil.coordinateTrans(P,M,u);(f=[]).push(b),f.push(d),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);var m=new SuperMap.Geometry.Point(.2*o,-.2*o),v=new SuperMap.Geometry.Point(-.2*o,-.6*o),O=SuperMap.Plot.PlottingUtil.coordinateTrans(P,m,u),L=SuperMap.Plot.PlottingUtil.coordinateTrans(P,v,u);(f=[]).push(O),f.push(L),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);var U=new SuperMap.Geometry.Point(-.2*o,-.2*o),_=new SuperMap.Geometry.Point(.2*o,-.6*o),w=SuperMap.Plot.PlottingUtil.coordinateTrans(P,U,u),x=SuperMap.Plot.PlottingUtil.coordinateTrans(P,_,u);(f=[]).push(w),f.push(x),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);var T=new SuperMap.Geometry.Point(.7*e,0),E=SuperMap.Plot.PlottingUtil.coordinateTrans(a,T,u),A=SuperMap.Plot.PlottingUtil.coordinateTrans(E,c,u),G=SuperMap.Plot.PlottingUtil.coordinateTrans(E,S,u);(f=[]).push(A),f.push(G),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,f);var C=SuperMap.Plot.PlottingUtil.coordinateTrans(E,g,u),V=SuperMap.Plot.PlottingUtil.coordinateTrans(E,M,u);(f=[]).push(C),f.push(V),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);var I=SuperMap.Plot.PlottingUtil.coordinateTrans(E,m,u),j=SuperMap.Plot.PlottingUtil.coordinateTrans(E,v,u);(f=[]).push(I),f.push(j),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);var Y=SuperMap.Plot.PlottingUtil.coordinateTrans(E,U,u),B=SuperMap.Plot.PlottingUtil.coordinateTrans(E,_,u);(f=[]).push(Y),f.push(B),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);if(0==t){var i=SuperMap.Plot.PlottingUtil.distance(l[0],e)/o;this.getScaleValues()[0]=i}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol16202=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol16203",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.02),l.getScaleValues().push(.1),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,l);var o=this.getSubSymbolScaleValue();this.getIsEdit()||(this.getScaleValues()[0]=.3*o);for(var n=this.getScaleValues()[0]*e,i=this.getScaleValues()[1]*e,r=.05*e,a=0,p=0;p<l.length-1;p++)a+=SuperMap.Plot.PlottingUtil.distance(l[p],l[p+1]);for(var u=r,s=0;u<=a;u+=i,s++){var P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,u);if(-1===P.index)return;var c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,l[P.index],P.pt),S=[];S.push(c.pntLeft),S.push(c.pntRight),0===s?this.addScalePoint(S[0],0):1===s&&this.addScalePoint(P.pt,1);var y={surroundLineFlag:!1,lineWidthLimit:!0,weight:6*this.getStyle().weight};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S,y)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);var i=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);i=SuperMap.Plot.PlottingUtil.clearSamePts(i);var r=.05*o;if(0===t){var a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,r);if(-1===a.index)return;var p=SuperMap.Plot.PlottingUtil.distance(e,a.pt);this.getScaleValues()[0]=p/o}else if(1===t){var u=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,r);-1===u.index&&(u.index=0);var s=SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(e,i);-1===s.index&&(s.index=0,s.pt=i[1]);for(var P=SuperMap.Plot.PlottingUtil.distance(u.pt,i[u.index+1]),n=u.index+1;n<s.index;n++)P+=SuperMap.Plot.PlottingUtil.distance(i[n],i[n+1]);var c=(P+=SuperMap.Plot.PlottingUtil.distance(i[s.index],s.pt))/o;c<.01&&(c=.01),c>.95&&(c=.95),this.getScaleValues()[1]=c}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol16203=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol16700",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.2),l.getScaleValues().push(.1)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=this.getScaleValues()[0]*e,n=this.getScaleValues()[1]*e,i=new SuperMap.Geometry.Point(t[0].x,t[0].y),r=new SuperMap.Geometry.Point(t[1].x,t[1].y),a=180*SuperMap.Plot.PlottingUtil.radian(i,r)/Math.PI,p=SuperMap.Plot.PlottingUtil.circlePoint(i,o,o,a+90),u=SuperMap.Plot.PlottingUtil.circlePoint(i,n,n,a+90),s=SuperMap.Plot.PlottingUtil.circlePoint(r,o,o,a+90),P=SuperMap.Plot.PlottingUtil.circlePoint(r,n,n,a+90),c=[];c.push(u),c.push(p),c.push(s),c.push(P),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,SuperMap.Plot.PlottingUtil.clonePoints(c)),(c=[]).push(u),c.push(t[0]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,SuperMap.Plot.PlottingUtil.clonePoints(c)),(c=[]).push(P),c.push(t[1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,SuperMap.Plot.PlottingUtil.clonePoints(c));var S=new SuperMap.Geometry.Point(p.x,p.y);S.isScalePoint=!0,S.tag=0,this.addScalePoint(S);var y=new SuperMap.Geometry.Point(u.x,u.y);y.isScalePoint=!0,y.tag=1,this.addScalePoint(y)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){for(var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=0,n=0,i=(l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length-1;n<i;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);var r=SuperMap.Plot.PlottingUtil.distance(l[0],e);if(0===t){var a=r/o;a<this.getScaleValues()[1]&&(a=this.getScaleValues()[1]),this.getScaleValues()[0]=a}if(1===t){var p=r/o;this.getScaleValues()[0]<p&&(p=this.getScaleValues()[0]),this.getScaleValues()[1]=p}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol16700=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(r=0;r<t.length-1;r++)SuperMap.Plot.PlottingUtil.distance(t[r],t[r+1]);var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(3>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e);for(var l=e[0].x,o=e[0].x,n=e[0].y,i=e[0].y,r=(new SuperMap.Geometry.Point(e[0].x,e[0].y),new SuperMap.Geometry.Point(e[0].x,e[0].y),0);r<e.length;r++)l>e[r].x&&(l=e[r].x,new SuperMap.Geometry.Point(e[r].x,e[r].y)),o<e[r].x&&(o=e[r].x,new SuperMap.Geometry.Point(e[r].x,e[r].y)),n>e[r].y&&(n=e[r].y),i<e[r].y&&(i=e[r].y);var a={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0},p=new SuperMap.Geometry.Point((o+l)/2,(i+n)/2),u=o-l,s=i-n,P=.1*u,c=.1*s,S=new SuperMap.Geometry.Point(p.x,p.y+c),y=new SuperMap.Geometry.Point(p.x-P,p.y-c),h=new SuperMap.Geometry.Point(p.x+P,p.y-c);P=.03*u,c=.03*s;var f=new SuperMap.Geometry.Point(S.x,S.y+c),g=new SuperMap.Geometry.Point(S.x-P,S.y-c),M=new SuperMap.Geometry.Point(S.x+P,S.y-c),b=[];b.push(new SuperMap.Geometry.Point(f.x,f.y)),b.push(new SuperMap.Geometry.Point(g.x,g.y)),b.push(new SuperMap.Geometry.Point(M.x,M.y)),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,b,a);var d=new SuperMap.Geometry.Point(y.x,y.y+c),m=new SuperMap.Geometry.Point(y.x-P,y.y-c),v=new SuperMap.Geometry.Point(y.x+P,y.y-c),O=[];O.push(new SuperMap.Geometry.Point(d.x,d.y)),O.push(new SuperMap.Geometry.Point(m.x,m.y)),O.push(new SuperMap.Geometry.Point(v.x,v.y)),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,O,a);var L=new SuperMap.Geometry.Point(h.x,h.y+c),U=new SuperMap.Geometry.Point(h.x-P,h.y-c),_=new SuperMap.Geometry.Point(h.x+P,h.y-c),w=[];w.push(new SuperMap.Geometry.Point(L.x,L.y)),w.push(new SuperMap.Geometry.Point(U.x,U.y)),w.push(new SuperMap.Geometry.Point(_.x,_.y)),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,w,a)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17501",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(r=0;r<t.length-1;r++)SuperMap.Plot.PlottingUtil.distance(t[r],t[r+1]);var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(3>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e);for(var l=e[0].x,o=e[0].x,n=e[0].y,i=e[0].y,r=(new SuperMap.Geometry.Point(e[0].x,e[0].y),new SuperMap.Geometry.Point(e[0].x,e[0].y),0);r<e.length;r++)l>e[r].x&&(l=e[r].x,new SuperMap.Geometry.Point(e[r].x,e[r].y)),o<e[r].x&&(o=e[r].x,new SuperMap.Geometry.Point(e[r].x,e[r].y)),n>e[r].y&&(n=e[r].y),i<e[r].y&&(i=e[r].y);var a=new SuperMap.Geometry.Point((o+l)/2,(i+n)/2),p=.33*(o-l),u=.1*(i-n),s=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,0),P=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,180),c=[];c.push(new SuperMap.Geometry.Point(s.x,s.y)),c.push(new SuperMap.Geometry.Point(P.x,P.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c);var S=new SuperMap.Geometry.Point(a.x-3*p/7,a.y+u),y=SuperMap.Plot.PlottingUtil.circlePoint(S,u,u,60),h=SuperMap.Plot.PlottingUtil.circlePoint(S,u,u,120);(c=[]).push(new SuperMap.Geometry.Point(y.x,y.y)),c.push(new SuperMap.Geometry.Point(S.x,S.y)),c.push(new SuperMap.Geometry.Point(h.x,h.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c);var f=new SuperMap.Geometry.Point(a.x+3*p/7,a.y+u),g=SuperMap.Plot.PlottingUtil.circlePoint(f,u,u,60),M=SuperMap.Plot.PlottingUtil.circlePoint(f,u,u,120);(c=[]).push(new SuperMap.Geometry.Point(g.x,g.y)),c.push(new SuperMap.Geometry.Point(f.x,f.y)),c.push(new SuperMap.Geometry.Point(M.x,M.y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17501=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17700",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=.02*e,n=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);n=SuperMap.Plot.PlottingUtil.clearSamePts(n);var i=[],r=[];i=SuperMap.Plot.PlottingUtil.paraLine(n,.5*o,!0),r=SuperMap.Plot.PlottingUtil.paraLine(n,.5*o,!1),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);for(var a=0,l=0;l<r.length-1;l++)a+=SuperMap.Plot.PlottingUtil.distance(r[l],r[l+1]);for(var p=a/19,l=0;l<18;l++){var u=SuperMap.Plot.PlottingUtil.findPointInPolyLine(r,p);if(-1!==u.index){if(0==l%2){for(var s=[],P=0;P<u.index+1;P++)s.push(r[P].clone());s.push(u.pt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s)}var c=[];c.push(u.pt);for(var S=u.index+1;S<r.length;S++)c.push(r[S]);r=(r=[]).concat(c)}}r.length>1&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17700=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(15)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="急",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17704",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol17704=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(16)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17801",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=new SuperMap.Geometry.Point(t[t.length-1].x,t[t.length-1].y),o=0;2==t.length?this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t):(this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t),o=SuperMap.Plot.PlottingUtil.radian(e,l)*this.RTOD);var n=SuperMap.Plot.PlottingUtil.distance(e,l),i=[],r=SuperMap.Plot.PlottingUtil.circlePoint(e,.1*n,.1*n,0);i.push(t[0].clone()),i.push(r.clone()),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,i);var a=SuperMap.Plot.PlottingUtil.circlePoint(e,.78*n,.78*n,o+180),p=SuperMap.Plot.PlottingUtil.circlePoint(e,1.26*n,1.26*n,o+180);(i=[]).push(a.clone()),i.push(p.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var u=SuperMap.Plot.PlottingUtil.circlePoint(e,.15*n,.15*n,o+180),s=SuperMap.Plot.PlottingUtil.circlePoint(e,.58*n,.58*n,o+180);(i=[]).push(u.clone()),i.push(s.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var P=SuperMap.Plot.PlottingUtil.circlePoint(e,.15*n,.15*n,o),c=SuperMap.Plot.PlottingUtil.circlePoint(e,.58*n,.58*n,o);(i=[]).push(P.clone()),i.push(c.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var S=SuperMap.Plot.PlottingUtil.circlePoint(e,.78*n,.78*n,o),y=SuperMap.Plot.PlottingUtil.circlePoint(e,1.26*n,1.26*n,o);(i=[]).push(S.clone()),i.push(y.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17801=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17802",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=new SuperMap.Geometry.Point(t[t.length-1].x,t[t.length-1].y),o=0;2==t.length?this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t):(this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t),o=SuperMap.Plot.PlottingUtil.radian(e,l)*this.RTOD);var n=SuperMap.Plot.PlottingUtil.distance(e,l),i=[],r=SuperMap.Plot.PlottingUtil.circlePoint(e,.15*n,.15*n,o),a=SuperMap.Plot.PlottingUtil.circlePoint(e,.08*n,.08*n,o+90),p=SuperMap.Plot.PlottingUtil.circlePoint(e,.15*n,.15*n,o+180),u=SuperMap.Plot.PlottingUtil.circlePoint(e,.08*n,.08*n,o+270);i.push(r.clone()),i.push(a.clone()),i.push(p.clone()),i.push(u.clone()),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,i);var s=SuperMap.Plot.PlottingUtil.circlePoint(e,.78*n,.78*n,o+180),P=SuperMap.Plot.PlottingUtil.circlePoint(e,1.26*n,1.26*n,o+180);(i=[]).push(s.clone()),i.push(P.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var c=SuperMap.Plot.PlottingUtil.circlePoint(e,.15*n,.15*n,o+180),S=SuperMap.Plot.PlottingUtil.circlePoint(e,.58*n,.58*n,o+180);(i=[]).push(c.clone()),i.push(S.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var y=SuperMap.Plot.PlottingUtil.circlePoint(e,.15*n,.15*n,o),h=SuperMap.Plot.PlottingUtil.circlePoint(e,.58*n,.58*n,o);(i=[]).push(y.clone()),i.push(h.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var f=SuperMap.Plot.PlottingUtil.circlePoint(e,.78*n,.78*n,o),g=SuperMap.Plot.PlottingUtil.circlePoint(e,1.26*n,1.26*n,o);(i=[]).push(f.clone()),i.push(g.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17802=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17803",l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.2)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(.2)),2==t.length?this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t):this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t);var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=0;if(0!=(l=2==t.length?2*SuperMap.Plot.PlottingUtil.distance(t[0],t[1]):SuperMap.Plot.PlottingUtil.distance(t[0],t[1])+SuperMap.Plot.PlottingUtil.distance(t[0],t[2]))){var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2],r=new SuperMap.Geometry.Point(e.x+l*o,e.y+l*n),a=l*i,p=new SuperMap.Geometry.Point(-.5*a,.25*a),u=new SuperMap.Geometry.Point(-.4*a,.125*a),s=new SuperMap.Geometry.Point(.4*a,.125*a),P=new SuperMap.Geometry.Point(.5*a,.25*a),c=SuperMap.Plot.PlottingUtil.coordinateTrans(r,p,0),S=SuperMap.Plot.PlottingUtil.coordinateTrans(r,u,0),y=SuperMap.Plot.PlottingUtil.coordinateTrans(r,s,0),h=SuperMap.Plot.PlottingUtil.coordinateTrans(r,P,0),f=[];f.push(c.clone()),f.push(S.clone()),f.push(y.clone()),f.push(h.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);var g=new SuperMap.Geometry.Point(-.5*a,-.25*a),M=new SuperMap.Geometry.Point(-.4*a,-.125*a),b=new SuperMap.Geometry.Point(.4*a,-.125*a),d=new SuperMap.Geometry.Point(.5*a,-.25*a),m=SuperMap.Plot.PlottingUtil.coordinateTrans(r,g,0),v=SuperMap.Plot.PlottingUtil.coordinateTrans(r,M,0),O=SuperMap.Plot.PlottingUtil.coordinateTrans(r,b,0),L=SuperMap.Plot.PlottingUtil.coordinateTrans(r,d,0);(f=[]).push(m.clone()),f.push(v.clone()),f.push(O.clone()),f.push(L.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f),this.clearScalePoints();var U=new SuperMap.Geometry.Point(r.x+.1*a,r.y);U.isScalePoint=!0,U.tag=0,this.addScalePoint(U);var _=SuperMap.Plot.PlottingUtil.circlePoint(r,.25*a,.25*a,90);_.isScalePoint=!0,_.tag=1,this.addScalePoint(_)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=(l=SuperMap.Plot.PlottingUtil.clearSamePts(l))[0].clone(),n=0;if(0==(n=2==l.length?2*SuperMap.Plot.PlottingUtil.distance(l[0],l[1]):SuperMap.Plot.PlottingUtil.distance(l[0],l[1])+SuperMap.Plot.PlottingUtil.distance(l[0],l[2])))return;if(0==t){var i=(u=this.getScaleValues()[2])*n,r=(e.x-.1*i-o.x)/n;this.getScaleValues()[0]=r;a=(e.y-o.y)/n;this.getScaleValues()[1]=a}else if(1==t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(o.x+n*r,o.y+n*a),u=4*(i=SuperMap.Plot.PlottingUtil.distance(p,e))/n;this.getScaleValues()[2]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17803=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(10)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17805",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(.1)),t.length==this.minEditPts?this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t):this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t);var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=0;if(0!=(l=t.length==this.minEditPts?2*SuperMap.Plot.PlottingUtil.distance(t[0],t[1]):SuperMap.Plot.PlottingUtil.distance(t[0],t[1])+SuperMap.Plot.PlottingUtil.distance(t[0],t[2]))){var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2],r=new SuperMap.Geometry.Point(e.x+l*o,e.y+l*n),a=3*(l*i),p=new SuperMap.Geometry.Point(-.5*a,.3*a),u=new SuperMap.Geometry.Point(-.5*a,-.3*a),s=new SuperMap.Geometry.Point(.5*a,-.3*a),P=new SuperMap.Geometry.Point(.5*a,.3*a),c=SuperMap.Plot.PlottingUtil.coordinateTrans(r,p,0),S=SuperMap.Plot.PlottingUtil.coordinateTrans(r,u,0),y=SuperMap.Plot.PlottingUtil.coordinateTrans(r,s,0),h=SuperMap.Plot.PlottingUtil.coordinateTrans(r,P,0),f=[];f.push(c.clone()),f.push(S.clone()),f.push(y.clone()),f.push(h.clone()),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,f);var g=new SuperMap.Geometry.Point(-.3*a,.3*a),M=new SuperMap.Geometry.Point(-.3*a,.5*a),b=SuperMap.Plot.PlottingUtil.coordinateTrans(r,g,0),d=SuperMap.Plot.PlottingUtil.coordinateTrans(r,M,0);(f=[]).push(b.clone()),f.push(d.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);var m=new SuperMap.Geometry.Point(-.3*a,-.3*a),v=new SuperMap.Geometry.Point(-.3*a,-.5*a),O=SuperMap.Plot.PlottingUtil.coordinateTrans(r,m,0),L=SuperMap.Plot.PlottingUtil.coordinateTrans(r,v,0);(f=[]).push(O.clone()),f.push(L.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);var U=new SuperMap.Geometry.Point(.3*a,.3*a),_=new SuperMap.Geometry.Point(.3*a,.5*a),w=SuperMap.Plot.PlottingUtil.coordinateTrans(r,U,0),x=SuperMap.Plot.PlottingUtil.coordinateTrans(r,_,0);(f=[]).push(w.clone()),f.push(x.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);var T=new SuperMap.Geometry.Point(.3*a,-.3*a),E=new SuperMap.Geometry.Point(.3*a,-.5*a),A=SuperMap.Plot.PlottingUtil.coordinateTrans(r,T,0),G=SuperMap.Plot.PlottingUtil.coordinateTrans(r,E,0);(f=[]).push(A.clone()),f.push(G.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f),this.clearScalePoints();var C=new SuperMap.Geometry.Point(r.x+.1*a,r.y);C.isScalePoint=!0,C.tag=0,this.addScalePoint(C);var V=SuperMap.Plot.PlottingUtil.circlePoint(r,.5*a,.5*a,90);V.isScalePoint=!0,V.tag=1,this.addScalePoint(V)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17805=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(10)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol17806",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(.1));var e,l=this.getScaleValues()[0],o=this.getScaleValues()[1],n=this.getScaleValues()[2],i=0,r=0;if(t.length==this.minEditPts){this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t);var a=new SuperMap.Geometry.Point(t[0].x,t[0].y),p=new SuperMap.Geometry.Point(t[1].x,t[1].y),u=SuperMap.Plot.PlottingUtil.distance(a,p);i=2*u,e=new SuperMap.Geometry.Point(a.x+i*l,a.y+i*o);var s=2*u*n/.28/2;r=s;P=SuperMap.Plot.PlottingUtil.circlePoint(e,s,s,0);(f=[]).push(e.clone()),f.push(P.clone()),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,f)}else{this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t);var a=new SuperMap.Geometry.Point(t[0].x,t[0].y),p=new SuperMap.Geometry.Point(t[1].x,t[1].y),P=new SuperMap.Geometry.Point(t[2].x,t[2].y);i=SuperMap.Plot.PlottingUtil.distance(a,p)+SuperMap.Plot.PlottingUtil.distance(a,P),e=new SuperMap.Geometry.Point(a.x+i*l,a.y+i*o);var c=i*n/.21/2,S=i*n/.38/2;r=c;var y=SuperMap.Plot.PlottingUtil.circlePoint(e,c,c,0),h=SuperMap.Plot.PlottingUtil.circlePoint(e,S,S,90),f=[];f.push(e.clone()),f.push(y.clone()),f.push(h.clone()),this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,f)}this.clearScalePoints();var g=new SuperMap.Geometry.Point(e.x+.1*i,e.y);g.isScalePoint=!0,g.tag=0,this.addScalePoint(g);var M=SuperMap.Plot.PlottingUtil.circlePoint(e,r,r,90);M.isScalePoint=!0,M.tag=1,this.addScalePoint(M)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=(l=SuperMap.Plot.PlottingUtil.clearSamePts(l))[0].clone(),n=0;if(0==(n=2==l.length?2*SuperMap.Plot.PlottingUtil.distance(l[0],l[1]):SuperMap.Plot.PlottingUtil.distance(l[0],l[1])+SuperMap.Plot.PlottingUtil.distance(l[0],l[2])))return;if(0==t){var i=(u=this.getScaleValues()[2])*n,r=(e.x-.1*n-o.x)/n;this.getScaleValues()[0]=r;a=(e.y-o.y)/n;this.getScaleValues()[1]=a}else if(1==t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(o.x+n*r,o.y+n*a),i=SuperMap.Plot.PlottingUtil.distance(p,e),u=.1;u=2===l.length?.56*i/n:.42*i/n,this.getScaleValues()[2]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol17806=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol20300",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(.1),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){1!==this.getScaleValues().length&&(this.clearScaleValues(),this.getScaleValues().push(.1)),this.clearComponents(),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,this.controlPoints);var e=this.getScaleValues()[0],l=SuperMap.Plot.PlottingUtil.polylineDistance(t),o=l*e,n=l*this.getSubSymbolScaleValue()*.3;o<2*n&&(n=.5*o);for(var i={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0},r=0,a=o;a<l-n;a+=o){var p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a,t);if(p.bfind){var u=p.pts,s=[];s.push(u);var P=new SuperMap.Geometry.Point(u.x+n,u.y);s.push(P),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,s,i),0===r&&this.addScalePoint(u,0),r++}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t){for(var n=-1,i=0,r=new SuperMap.Geometry.Point,a=0;a<l.length-1;a++){var p=[];p.push(l[a]),p.push(l[a+1]);var u=SuperMap.Plot.PlottingUtil.projectPoint(e,l[a],l[a+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(u,p).isOnPolyLine){var s=SuperMap.Plot.PlottingUtil.distance(e,u);-1===n?(n=a,r=u,i=s):i>s&&(n=a,r=u,i=s)}}(-1===n||n>l.length-1)&&(n=0,r=l[0]),-1===n&&Math.ceil(e.x,1)<=Math.ceil(l[0].x,1)?(n=0,r=l[0]):-1===n&&n===l[l.length-1]&&(n=0,r=l[0]),-1===n&&Math.ceil(e.x,1)>=Math.ceil(l[l.length-1].x,1)?(n=l.length-1,r=l[l.length-1]):-1!==n&&n!==l.length-1||(n=l.length-1,r=l[l.length-1]);for(var P=0,a=0;a<n;a++)P+=SuperMap.Plot.PlottingUtil.distance(l[a],l[a+1]);var c=new SuperMap.Geometry.Point(l[n].x,l[n].y),S=(P+=SuperMap.Plot.PlottingUtil.distance(c,r))/o;S>=.98&&(S=.98),S<=.02&&(S=.02),this.getScaleValues()[0]=S}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol20300=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol20301",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.2),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length!==this.minEditPts&&(this.clearScaleValues(),this.getScaleValues().push(.2),this.getScaleValues().push(0)),this.clearComponents(),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,this.controlPoints);var e,l=SuperMap.Plot.PlottingUtil.polylineDistance(t),o=new SuperMap.Geometry.Point(t[0].x,t[0].y),n=new SuperMap.Geometry.Point(t[1].x,t[1].y),i=180*SuperMap.Plot.PlottingUtil.radian(o,n)/Math.PI,r=new SuperMap.Geometry.Point((o.x+n.x)/2,(o.y+n.y)/2),a=this.getScaleValues()[0]*l;e=0==this.getScaleValues()[1]?SuperMap.Plot.PlottingUtil.circlePoint(r,a,a,i+90):SuperMap.Plot.PlottingUtil.circlePoint(r,a,a,i+270);var p={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[r,e]);var u=.02*SuperMap.Plot.PlottingUtil.distance(t[0],t[t.length-1]),s=new SuperMap.Geometry.Point((o.x+r.x)/2,(o.y+r.y)/2),P=[s,new SuperMap.Geometry.Point(s.x,s.y+u)];this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,P,p,!0);var c=new SuperMap.Geometry.Point((n.x+r.x)/2,(n.y+r.y)/2);P=[c,new SuperMap.Geometry.Point(c.x,c.y+u)],this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,P,p,!0);var S=new SuperMap.Geometry.Point(e.x,e.y);S.isScalePoint=!0,S.tag=0,this.addScalePoint(S)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;if(0!==t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=new SuperMap.Geometry.Point(l[0].x,l[0].y),n=new SuperMap.Geometry.Point(l[1].x,l[1].y),i=SuperMap.Plot.PlottingUtil.distance(o,n);if(0===i)return;var r=new SuperMap.Geometry.Point((o.x+n.x)/2,(o.y+n.y)/2);if(0===t){var a=SuperMap.Plot.PlottingUtil.distance(e,r)/i;this.getScaleValues()[0]=a,SuperMap.Plot.PlottingUtil.pointIsRightToLine(o,n,e)?this.getScaleValues()[1]=1:this.getScaleValues()[1]=0}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol20301=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21401",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.03),l.getScaleValues().push(.4),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.03),this.getScaleValues().push(.4),this.getScaleValues().push(0));var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t,!1);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);this.addArrow(e);var o=this.getScaleValues()[1],n=l*(1-o)*.5,i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(n,e);if(i.bfind){this.getIsEdit()||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());var r,a=this.getScaleValues()[0],p=SuperMap.Plot.PlottingUtil.polylineDistance(t)*a,u=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(p,e[i.index],i.pts),s=this.getScaleValues()[2];0===s?r=new SuperMap.Geometry.Point(u.pntLeft.x,u.pntLeft.y):1===s&&(r=new SuperMap.Geometry.Point(u.pntRight.x,u.pntRight.y));var P=[];P.push(r),P.push(i.pts);var c={lineTypeLimit:!0};this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,P,c);var S,y=l*(.5+.5*o),h=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(y,e);if(h.bfind){var f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(p,e[h.index],h.pts);0===s?S=new SuperMap.Geometry.Point(f.pntLeft.x,f.pntLeft.y):1===s&&(S=new SuperMap.Geometry.Point(f.pntRight.x,f.pntRight.y)),this.addScalePoint(S,0);var g=[];g.push(S),g.push(h.pts);var M={lineTypeLimit:!0};this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,g,M)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l,!1);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=n*(.5+.5*this.getScaleValues()[1]),r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(i,o);if(!r.bfind)return;var a=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(1,o[r.index],r.pts),p=SuperMap.Plot.PlottingUtil.pointIsRightToLine(o[r.index],o[r.index+1],e);this.getScaleValues()[2]=p?0:1;var u;u=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,new SuperMap.Geometry.Point(a.pntLeft.x,a.pntLeft.y),new SuperMap.Geometry.Point(a.pntRight.x,a.pntRight.y));var s=SuperMap.Plot.PlottingUtil.distance(u.projectPoint,new SuperMap.Geometry.Point(r.pts.x,r.pts.y));this.getScaleValues()[0]=s/n}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol21401=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.02),l.getScaleValues().push(.1),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.02),this.getScaleValues().push(.1),this.getScaleValues().push(0));var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t,!1);e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addArrow(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(0!==l){if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=.5*o}for(var n=this.getScaleValues()[0],i=SuperMap.Plot.PlottingUtil.polylineDistance(e),r=n*i,a=this.getScaleValues()[1]*i,p=0,u=.01*i,s=0;s<=l-a-u;s+=a){p=s+u;var P=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(p,e);if(P.bfind){var c=[],S=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r,e[P.index],P.pts);c.push(new SuperMap.Geometry.Point(S.pntLeft.x,S.pntLeft.y)),c.push(new SuperMap.Geometry.Point(S.pntRight.x,S.pntRight.y));var y=this.getScaleValues()[2];if(SuperMap.Plot.PlottingUtil.equalFuzzy(0,s)){var h;SuperMap.Plot.PlottingUtil.equalFuzzy(y,0)?((h=c[0]).isScalePoint=!0,h.tag=0,this.addScalePoint(h)):SuperMap.Plot.PlottingUtil.equalFuzzy(y,1)&&((h=c[1]).isScalePoint=!0,h.tag=0,this.addScalePoint(h))}else SuperMap.Plot.PlottingUtil.equalFuzzy(a,s)&&((h=new SuperMap.Geometry.Point(P.pts.x,P.pts.y)).isScalePoint=!0,h.tag=1,this.addScalePoint(h));this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c)}}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!==t&&1!==t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l,!1);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n,i=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t){var r=this.getScaleValues()[0]*i,a=.01*i,p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a,o);if(!p.bfind)return;var u;u=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r,o[p.index],p.pts).pntLeft;var s=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,u,p.pts),P=SuperMap.Plot.PlottingUtil.distance(s.projectPoint,p.pts),c=new SuperMap.Geometry.Point(u.x-p.pts.x,u.y-p.pts.y),S=new SuperMap.Geometry.Point(s.projectPoint.x-p.pts.x,s.projectPoint.y-p.pts.y);c.x*S.x+c.y*S.y>=0?this.getScaleValues()[2]=0:this.getScaleValues()[2]=1,this.getScaleValues()[0]=P/i}else if(1===t){for(var y,h=-1,f=0,g=o.length-1;f<g;f++){var M=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,o[f],o[f+1]);if(M.isOnline){y=M.projectPoint,h=f;break}}if(-1===h)this.getScaleValues()[1]=.02;else{for(var b=[],f=0;f<h+1;f++)b.push(o[f]);b.push(y),(n=SuperMap.Plot.PlottingUtil.polylineDistance(b)/i)>.4&&(n=.4),this.getScaleValues()[1]=n}}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol21500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(5)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return 0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21502",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol21502=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(5)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return 0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21503",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol21503=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(5)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return 0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21504",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol21504=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21800",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.2),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<1&&this.getScaleValues().push(.2);var e=SuperMap.Plot.PlottingUtil.polylineDistance(t)*this.getScaleValues()[0],l=.5*e,o=new SuperMap.Geometry.Point(t[0].x,t[0].y),n=new SuperMap.Geometry.Point(t[1].x,t[1].y),i=180*SuperMap.Plot.PlottingUtil.radian(o,n)/Math.PI,r=SuperMap.Plot.PlottingUtil.circlePoint(o,e,e,i+90),a=SuperMap.Plot.PlottingUtil.circlePoint(o,e,e,i+270),p=SuperMap.Plot.PlottingUtil.circlePoint(r,l,l,i),u=SuperMap.Plot.PlottingUtil.circlePoint(a,l,l,i),s=[];s.push(u),s.push(a),s.push(r),s.push(p),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s);var P=SuperMap.Plot.PlottingUtil.circlePoint(n,e,e,i+90),c=SuperMap.Plot.PlottingUtil.circlePoint(n,e,e,i+270),S=SuperMap.Plot.PlottingUtil.circlePoint(P,l,l,i+180),y=SuperMap.Plot.PlottingUtil.circlePoint(c,l,l,i+180);(s=[]).push(S),s.push(P),s.push(c),s.push(y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s),this.addScalePoint(r)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.distance(e,l[0])/o;this.getScaleValues()[0]=n}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol21800=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21900",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}this.getScaleValues().length<1&&this.getScaleValues().push(.5);for(var n=this.getLinePts(e,this.getScaleValues()[0]),i=[],r=[],a=0;a<=n.startIndex;a++)i.push(e[a]);if(i.push(n.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i),n.endIndex<=e.length){r.push(n.endPt);for(a=n.endIndex+1;a<=e.length-1;a++)r.push(e[a]);this.addArrow(r)}var p,u,s,P,c,S,y,h,f,g,M,b,d,m=n.startPt.clone(),v=n.endPt.clone(),O=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),L=SuperMap.Plot.PlottingUtil.distance(m,v),U=SuperMap.Plot.PlottingUtil.radian(m,v)*this.RTOD;p=new SuperMap.Geometry.Point(0,0),u=new SuperMap.Geometry.Point(0,0),s=new SuperMap.Geometry.Point(0,0),P=new SuperMap.Geometry.Point(0,0),c=new SuperMap.Geometry.Point(0,0),S=new SuperMap.Geometry.Point(0,0),y=new SuperMap.Geometry.Point(0,0),h=new SuperMap.Geometry.Point(0,0),f=new SuperMap.Geometry.Point(0,0),g=new SuperMap.Geometry.Point(0,0),M=new SuperMap.Geometry.Point(0,0),b=new SuperMap.Geometry.Point(0,0),d=new SuperMap.Geometry.Point(0,0),m.x>=v.x?(p.x=.25*L,p.y=.25*-L,u.x=.5*-L,u.y=.25*-L,s.x=.5*-L,s.y=.25*L,P.x=.5*L,P.y=.25*L,c.x=.5*L,c.y=0,S.x=.25*-L,S.y=.125*-L,y.x=0,y.y=.125*L,h.x=0,h.y=.125*-L,f.x=.25*L,f.y=.2*L,g.x=.25*-L,g.y=.25*-L,M.x=.375*-L,M.y=.5*-L,b.x=.02*-L,b.y=.25*-L,d.x=.1*L,d.y=.5*-L):(p.x=.25*L,p.y=.25*L,u.x=.5*-L,u.y=.25*L,s.x=.5*-L,s.y=.25*-L,P.x=.5*L,P.y=.25*-L,c.x=.5*L,c.y=0,S.x=.25*L,S.y=.125*-L,y.x=0,y.y=.125*L,h.x=0,h.y=.125*-L,f.x=.25*-L,f.y=.125*L,g.x=.25*-L,g.y=.25*L,M.x=.375*-L,M.y=.5*L,b.x=.02*L,b.y=.25*L,d.x=.15*L,d.y=.5*L);var _=[],w=[],x=[],T=[],E=[],A=SuperMap.Plot.PlottingUtil.coordinateTrans(O,p,U),G=SuperMap.Plot.PlottingUtil.coordinateTrans(O,u,U),C=SuperMap.Plot.PlottingUtil.coordinateTrans(O,s,U),V=SuperMap.Plot.PlottingUtil.coordinateTrans(O,P,U),I=SuperMap.Plot.PlottingUtil.coordinateTrans(O,c,U),j=SuperMap.Plot.PlottingUtil.coordinateTrans(O,S,U),Y=SuperMap.Plot.PlottingUtil.coordinateTrans(O,y,U),B=SuperMap.Plot.PlottingUtil.coordinateTrans(O,h,U),R=SuperMap.Plot.PlottingUtil.coordinateTrans(O,f,U),N=SuperMap.Plot.PlottingUtil.coordinateTrans(O,g,U),D=SuperMap.Plot.PlottingUtil.coordinateTrans(O,M,U),k=SuperMap.Plot.PlottingUtil.coordinateTrans(O,b,U),z=SuperMap.Plot.PlottingUtil.coordinateTrans(O,d,U);_.push(A),_.push(G),_.push(C),_.push(V),_.push(I),w.push(j),w.push(Y),w.push(B),w.push(R),x.push(N),x.push(D),T.push(k),T.push(z),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,_,null,!0),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,w,null,!0),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,x,null,!0),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,T,null,!0);var F=.3*SuperMap.Plot.PlottingUtil.distance(B,R),q=SuperMap.Plot.PlottingUtil.linePnt(R,B,F),W=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.3*F,R,q);E.push(W.pntLeft),E.push(R),E.push(W.pntRight);var K={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,E,K,!0);var H=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),J=SuperMap.Plot.PlottingUtil.circlePoint(H.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,U+90);this.addScalePoint(J,0)}}},{key:"getLinePts",value:function(t,e){var l=new Object;if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"modifyPoint",value:function(t,e){if(0===t&&!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o),r=2*SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.5?r:.5}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol21900=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(.05),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(this.getScaleValues().length<1&&(this.clearScaleValues(),this.getScaleValues().push(.5)),!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=this.getLinePts(e,this.getScaleValues()[0]),i=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),r=SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)*this.RTOD,a=SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt);0<this.getSubSymbols().length&&this.computeSubSymbol(this.getSubSymbols()[0],i,.8*a,r);for(var p=[],u=[],s=0;s<=n.startIndex;s++)p.push(e[s]);if(p.push(n.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),n.endIndex<=e.length){u.push(n.endPt);for(s=n.endIndex+1;s<=e.length-1;s++)u.push(e[s]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u)}var P=e[0],c=e[1],S=e[e.length-2],y=e[e.length-1],h=.3*a,f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(h,c,P),g=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(h,S,y),M=f.pntLeft,b=g.pntLeft,d=[];d.push(P),d.push(M),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d);var m=[];m.push(y),m.push(b),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m);var v=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),O=SuperMap.Plot.PlottingUtil.circlePoint(v.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,r);this.addScalePoint(O,0)}}},{key:"getLinePts",value:function(t,e){var l=new Object;if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"modifyPoint",value:function(t,e){if(0===t&&!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o),r=2*SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.5?r:.5}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol22000=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol23901",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues().push(.333333),l.getScaleValues().push(.333333),l.getScaleValues().push(.125),l.getScaleValues().push(90)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[];if(2==t.length){var l=new SuperMap.Geometry.Point(t[0].x,t[0].y),o=new SuperMap.Geometry.Point(t[1].x,t[1].y),n=SuperMap.Plot.PlottingUtil.distance(l,o),i=180*SuperMap.Plot.PlottingUtil.radian(l,o)/Math.PI,r=SuperMap.Plot.PlottingUtil.circlePoint(l,n,n,i+60);e.push(t[0]),e.push(o),e.push(r),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e)}else{this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);for(var a=0;a<t.length;a++)e.push(t[a])}var p=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e);e.push(e[0]);var u=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var s=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getScaleValues()[2]=2*s*this.getSubSymbolScaleValue()/u}var P=this.getScaleValues()[0],c=this.getScaleValues()[1],S=this.getScaleValues()[2],y=this.getScaleValues()[3],h=this.ComputeSubSymbolPt(P,c,e,p),f=u*S,g=h,i=y-90;0<this.getSubSymbols().length&&this.computeSubSymbol(this.getSubSymbols()[0],g,f,i),this.addScalePoint(g);var M=SuperMap.Plot.PlottingUtil.circlePoint(h,f,f,y);this.addScalePoint(M)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=[];if(2==l.length){var n=l[0],i=l[1],r=SuperMap.Plot.PlottingUtil.distance(n,i),a=180*SuperMap.Plot.PlottingUtil.radian(n,i)/Math.PI,p=SuperMap.Plot.PlottingUtil.circlePoint(n,r,r,a+60);o.push(n),o.push(i),o.push(p)}else o=o.concat(l);var n=o[0],i=o[1],p=o[2],u=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);o.push(o[0]);var s=SuperMap.Plot.PlottingUtil.polylineDistance(o),P=e;if(0==t){var c=SuperMap.Plot.PlottingUtil.plumbLineLen(p,n,i),S=SuperMap.Plot.PlottingUtil.plumbLineLen(i,n,p),y=SuperMap.Plot.PlottingUtil.plumbLineLen(P,n,i)/c,h=SuperMap.Plot.PlottingUtil.plumbLineLen(P,n,p)/S;y>1&&(y=1),h>1&&(h=1),this.getScaleValues()[0]=y,this.getScaleValues()[1]=h}else if(1==t){var f=this.getScaleValues()[0],g=this.getScaleValues()[1],M=this.ComputeSubSymbolPt(f,g,o,u),b=SuperMap.Plot.PlottingUtil.distance(M,P)/s;this.getScaleValues()[2]=b;var d=180*SuperMap.Plot.PlottingUtil.radian(M,P)/Math.PI;this.getScaleValues()[3]=d}}this.calculateParts()}},{key:"ComputeSubSymbolPt",value:function(t,e,l,o){var n=l[0],i=l[1],r=l[2],a=SuperMap.Plot.PlottingUtil.plumbLineLen(r,n,i)*t,p=SuperMap.Plot.PlottingUtil.plumbLineLen(i,n,r)*e,u=[];SuperMap.Plot.PlottingUtil.pointIsRightToLine(n,i,o)?((P=[]).push(n),P.push(i),u=SuperMap.Plot.PlottingUtil.paraLine(P,a,!1)):((P=[]).push(n),P.push(i),u=SuperMap.Plot.PlottingUtil.paraLine(P,a,!0));var s;if(SuperMap.Plot.PlottingUtil.pointIsRightToLine(n,r,o))(P=[]).push(n),P.push(r),s=SuperMap.Plot.PlottingUtil.paraLine(P,p,!1);else{var P=[];P.push(n),P.push(r),s=SuperMap.Plot.PlottingUtil.paraLine(P,p,!0)}if(2>u.length||2>s.length)return o;var c=SuperMap.Plot.PlottingUtil.intersectLines(u[0],u[1],s[0],s[1]);return c.isIntersectLines?c.intersectPoint:o}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol23901=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol23902",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues().push(.2),l.getScaleValues().push(.2),l.getScaleValues().push(.5),l.getScaleValues().push(.125),l.getScaleValues().push(90)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[];if(2===t.length){var l=t[0],o=t[1],n=SuperMap.Plot.PlottingUtil.distance(l,o),i=180*SuperMap.Plot.PlottingUtil.radian(l,o)/Math.PI,r=SuperMap.Plot.PlottingUtil.circlePoint(l,n,n,i+60);e.push(l),e.push(r),e.push(o)}else e=e.concat(t);this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e),e.push(e[0]);var a,p=SuperMap.Plot.PlottingUtil.polylineDistance(e),u=this.getScaleValues()[0],s=this.getScaleValues()[1],P=this.getScaleValues()[2],c=(this.getScaleValues()[3],this.getScaleValues()[4]),S=p*u,l=e[0],o=e[1],r=e[2],y=p*s,h=180*SuperMap.Plot.PlottingUtil.InnerAngle(l,o,r)/Math.PI*P,f=180*SuperMap.Plot.PlottingUtil.radian(l,o)/Math.PI,g=f-h,M=f+h,b=SuperMap.Plot.PlottingUtil.circlePoint(l,y,y,g),d=SuperMap.Plot.PlottingUtil.circlePoint(l,y,y,M);a=SuperMap.Plot.PlottingUtil.ptIsInPolygon(e,b)?b:d,this.getIsEdit()||(this.getScaleValues()[3]=this.getDefaultSubSymbolSize()/p*2);var m=p*this.getScaleValues()[3],i=c;0<this.getSubSymbols().length&&this.computeSubSymbol(this.getSubSymbols()[0],a,m,i-90);var v=SuperMap.Plot.PlottingUtil.circlePoint(l,S,S,f+180);this.addScalePoint(v),this.addScalePoint(a);var O=SuperMap.Plot.PlottingUtil.circlePoint(a,.5*m,.5*m,i);this.addScalePoint(O),this.createArcPts(e,S)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=[];if(2==l.length){var n=l[0],i=l[1],r=SuperMap.Plot.PlottingUtil.distance(n,i),a=180*SuperMap.Plot.PlottingUtil.radian(n,i)/Math.PI,p=SuperMap.Plot.PlottingUtil.circlePoint(n,r,r,a+60);o.push(n),o.push(i),o.push(p)}else o=o.concat(l);var n=o[0],i=o[1],p=o[2];SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);o.push(o[0]);var u=SuperMap.Plot.PlottingUtil.polylineDistance(o),s=e;if(0===t){r=SuperMap.Plot.PlottingUtil.distance(s,o[0]);this.getScaleValues()[0]=r/u}else if(1===t){c=(m=SuperMap.Plot.PlottingUtil.distance(s,o[0]))/u;this.getScaleValues()[1]=c;a=180*SuperMap.Plot.PlottingUtil.InnerAngle(n,i,p)/Math.PI;0<=(S=180*SuperMap.Plot.PlottingUtil.InnerAngle(n,i,s)/Math.PI/a)&&1>=S&&(this.getScaleValues()[2]=S)}else if(2===t){var P,c=this.getScaleValues()[1],S=this.getScaleValues()[2],y=u*c,h=180*SuperMap.Plot.PlottingUtil.InnerAngle(n,i,p)/Math.PI*S,f=180*SuperMap.Plot.PlottingUtil.radian(n,i)/Math.PI,g=f-h,M=f+h,b=SuperMap.Plot.PlottingUtil.circlePoint(n,y,y,g),d=SuperMap.Plot.PlottingUtil.circlePoint(n,y,y,M);P=SuperMap.Plot.PlottingUtil.ptIsInPolygon(o,b)?b:d;var m=SuperMap.Plot.PlottingUtil.distance(s,P),v=2*m/u;this.getScaleValues()[3]=v;var O=180*SuperMap.Plot.PlottingUtil.radian(P,s)/Math.PI;this.getScaleValues()[4]=O}}this.calculateParts()}},{key:"ComputeSubSymbolPt",value:function(t,e,l,o){var n=l[0],i=l[1],r=l[2],a=SuperMap.Plot.PlottingUtil.plumbLineLen(r,n,i)*t,p=SuperMap.Plot.PlottingUtil.plumbLineLen(i,n,r)*e,u=[];SuperMap.Plot.PlottingUtil.pointIsRightToLine(n,i,o)?((P=[]).push(n),P.push(i),u=SuperMap.Plot.PlottingUtil.paraLine(P,a,!1)):((P=[]).push(n),P.push(i),u=SuperMap.Plot.PlottingUtil.paraLine(P,a,!0));var s;if(SuperMap.Plot.PlottingUtil.pointIsRightToLine(n,r,o))(P=[]).push(n),P.push(r),s=SuperMap.Plot.PlottingUtil.paraLine(P,p,!1);else{var P=[];P.push(n),P.push(r),s=SuperMap.Plot.PlottingUtil.paraLine(P,p,!0)}if(2>u.length||2>s.length)return o;var c=SuperMap.Plot.PlottingUtil.intersectLines(u[0],u[1],s[0],s[1]);return c.isIntersectLines?c.intersectPoint:o}},{key:"createArcPts",value:function(t,e){for(var l=[],o=[],n=0;n<t.length;n++)o.push(e),l.push([{Start:0,End:360}]);for(n=0;n<t.length;n++)if(0!==l[n].length&&(0!==l[n][0].Start||0!==l[n][0].End))for(var i=n+1;i<t.length;i++)if(0!==l[i].length&&(0!==l[i][0].Start||0!==l[i][0].End)){var r=SuperMap.Plot.PlottingUtil.distance(t[n],t[i]);if(r<o[n]+o[i])if(r>Math.abs(o[n]-o[i]))for(var a=0;a<2;a++){var p,u;0==a?(u=n,p=SuperMap.Plot.PlottingUtil.radian(t[n],t[i])*this.RTOD,M=Math.acos((r*r+o[n]*o[n]-o[i]*o[i])/(2*r*o[n]))*this.RTOD):(u=i,p=SuperMap.Plot.PlottingUtil.radian(t[i],t[n])*this.RTOD,M=Math.acos((r*r+o[i]*o[i]-o[n]*o[n])/(2*r*o[i]))*this.RTOD);var s=p-M,P=p+M,c=s<0&&P>0||s>360||P>360;s=this.adjustAngle(s),P=this.adjustAngle(P);for(S=l[u].length-1;S>=0;S--)if(c){if(P>l[u][S].End||SuperMap.Plot.PlottingUtil.equalFuzzy(P,l[u][S].End)){l[u].splice(S,1);continue}if(P>l[u][S].Start&&(l[u][S].Start=P),s<l[u][S].Start||SuperMap.Plot.PlottingUtil.equalFuzzy(s,l[u][S].Start)){l[u].splice(S,1);continue}s<l[u][S].End&&(l[u][S].End=s)}else if(s<l[u][S].Start&&P>l[u][S].End)l[u].splice(S,1);else if(s>l[u][S].Start&&P<l[u][S].End)l[u].push({Start:l[u][S].Start,End:s}),l[u].push({Start:P,End:l[u][S].End}),l[u].splice(S,1);else{if(s>l[u][S].End)continue;if(s>l[u][S].Start&&(l[u][S].End=s),P<l[u][S].Start)continue;P<l[u][S].End&&(l[u][S].Start=P)}}else{if(o[n]<o[i]){l[n][0].Start=0,l[n][0].End=0;break}l[i][0].Start=0,l[i][0].End=0}}for(n=0;n<t.length;n++)if(0!==l[n].length&&(0!==l[n][0].Start||0!==l[n][0].End))for(var S=l[n].length-1;S>=0;S--){for(var y=this.adjustAngle(l[n][S].Start),h=this.adjustAngle(l[n][S].End);h<y;)h+=360;for(var f=[],g=(h-y)/72,M=y;M<h+g/2;M+=g){var b=t[n].x+o[n]*Math.cos(M*this.DTOR),d=t[n].y+o[n]*Math.sin(M*this.DTOR);f.push(new SuperMap.Geometry.Point(b,d))}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f)}}},{key:"adjustAngle",value:function(t){for(;t>360;)t-=360;for(;t<0;)t+=360;return t}},{key:"GetCirclePts",value:function(t,e,l,o){var n=180*SuperMap.Plot.PlottingUtil.radian(t,e)/Math.PI,i=180*SuperMap.Plot.PlottingUtil.radian(t,l)/Math.PI,r=n;i>n&&(r=i);for(var a=[],p=r;p<360+r;p+=4)90==p&&(p=91),a.push(SuperMap.Plot.PlottingUtil.circlePoint(t,o,o,p));return a.push[0],a}},{key:"CreatArc",value:function(t,e,l){for(var o=[],n=[],i=0;i<t.length;i++){var r=t[i];SuperMap.Plot.PlottingUtil.ptIsInPolygon(e,r)||SuperMap.Plot.PlottingUtil.ptIsInPolygon(l,r)?(n.length>1&&o.push(n),n=[]):n.push(r)}n.length>1&&o.push(n);for(i=0;i<o.length;i++){var a=o[i];this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a)}}},{key:"GetArcPts3D",value:function(t,e,l){for(var o=[],n=[],i=0;i<t.length;i++){var r=t[i];SuperMap.Plot.PlottingUtil.ptIsInPolygon(e,r)||SuperMap.Plot.PlottingUtil.ptIsInPolygon(l,r)?(n.length>1&&o.push(n),n=[]):n.push(r)}n.length>1&&o.push(n);for(var a=[],i=0;i<o.length;i++)a=a.concat(o[i]);return a}},{key:"sortPts",value:function(t,e){t=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e);for(var l=0;l<e.length;l++)for(var o=e[l],n=180*SuperMap.Plot.PlottingUtil.radian(t,o)/Math.PI,i=0;i<e.length;i++){var r=e[i],a=180*SuperMap.Plot.PlottingUtil.radian(t,r)/Math.PI;if(n>a){var p=new SuperMap.Geometry.Point(o.x,o.y);o=new SuperMap.Geometry.Point(r.x,r.y),r=new SuperMap.Geometry.Point(p.x,p.y),n=a,e[l]=o,e[i]=r}}return e}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol23902=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25000",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(.222222),l.getScaleValues().push(.5),l.getScaleValues().push(.5),l.getScaleValues().push(.5)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(.5),this.getScaleValues().push(.222222),this.getScaleValues().push(.5),this.getScaleValues().push(.5),this.getScaleValues().push(.5));var e=t[0].clone(),l=t[1].clone(),o=SuperMap.Plot.PlottingUtil.distance(e,l),n=this.getScaleValues()[0],i=new SuperMap.Geometry.Point(0,-o*n),r=new SuperMap.Geometry.Point(0,o*n),a=this.getScaleValues()[1],p=this.getScaleValues()[3],u=new SuperMap.Geometry.Point(o*(1-p),-o*a),s=new SuperMap.Geometry.Point(o*(1-p),o*a),P=this.getScaleValues()[2],c=this.getScaleValues()[4],S=new SuperMap.Geometry.Point(o*(1-c),-o*P),y=new SuperMap.Geometry.Point(o*(1-c),o*P),h=new SuperMap.Geometry.Point(o,0),f=SuperMap.Plot.PlottingUtil.radian(e,l),g=[];g.push(i),g.push(u),g.push(S),g.push(h),g.push(y),g.push(s),g.push(r);for(var M=[],b=0;b<g.length;b++){var d=SuperMap.Plot.PlottingUtil.coordinateTrans(e,g[b],f*this.RTOD);M.push(d)}for(var m=[],v=M.length-1;v>=0;--v)m.push(M[v]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m),this.clearScalePoints();var O=M[0].clone();O.isScalePoint=!0,O.tag=0,this.addScalePoint(O);var L=M[1].clone();L.isScalePoint=!0,L.tag=1,this.addScalePoint(L);var U=M[2].clone();U.isScalePoint=!0,U.tag=2,this.addScalePoint(U)}}},{key:"modifyPoint",value:function(t,e){if(e.isScalePoint&&(t>=0||t<3)){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]),n=l[0].clone(),i=l[1].clone(),r=e.clone();if(0==t){var a=SuperMap.Plot.PlottingUtil.distance(r,n)/o;this.getScaleValues()[0]=a}else if(1==t){var p=SuperMap.Plot.PlottingUtil.projectPoint(r,n,i),u=(P=SuperMap.Plot.PlottingUtil.distance(p,r))/o;this.getScaleValues()[1]=u;var s=(S=SuperMap.Plot.PlottingUtil.distance(p,i))/o;this.getScaleValues()[3]=s}else if(2==t){var p=SuperMap.Plot.PlottingUtil.projectPoint(r,n,i),P=SuperMap.Plot.PlottingUtil.distance(p,r),c=P/o;this.getScaleValues()[2]=c;var S=SuperMap.Plot.PlottingUtil.distance(p,i),y=S/o;this.getScaleValues()[4]=y}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25000=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(2)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25200",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=512,l.clearScalePoints(),0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(.148),l.getScaleValues().push(.4),l.getScaleValues().push(.312),l.getScaleValues().push(.2),l.getScaleValues().push(.01)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){this.getScaleValues().length<6&&(this.getScaleValues().push(.05),this.getScaleValues().push(.148),this.getScaleValues().push(.4),this.getScaleValues().push(.312),this.getScaleValues().push(.2),this.getScaleValues().push(.01)),SuperMap.Geometry.AlgoSymbol1004.prototype.applyUse.apply(this,arguments);var e=new SuperMap.Geometry.Point((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2);if(t.splice(0,2),t.unshift(e),this.getSubSymbols().length>0){var l;if(null===this.getSubSymbols()[0].symbolData)return;l=this.getSubSymbols()[0].symbolData.symbolSize.x;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=o*this.getScaleValues()[4],i=o*this.getScaleValues()[5],r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(n,t),a=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(i,t),p=SuperMap.Plot.PlottingUtil.radian(a.pts,r.pts)*this.RTOD+270,u=100*SuperMap.Plot.PlottingUtil.distance(r.pts,a.pts)/l,s=new SuperMap.Geometry.Point((a.pts.x+r.pts.x)/2,(r.pts.y+a.pts.y)/2);if(null===this.getSubSymbols().length)return;if(null!==this.getSubSymbols()[0].code){for(var P=0;P<this.getSubSymbols().length;P++)for(var c=this.getSubSymbols()[P].symbolData,S=0;S<c.innerCells.length;S++)c.innerCells[S].fillLimit=!0;this.computeSubSymbol(this.getSubSymbols()[0],s,u,p)}r.pts.isScalePoint=!0,r.pts.tag=this.getScalePoints().length,this.addScalePoint(r.pts.clone()),a.pts.isScalePoint=!0,a.pts.tag=this.getScalePoints().length,this.addScalePoint(a.pts.clone())}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<2)return;if(this.getScaleValues().length<6&&(this.getScaleValues().push(.05),this.getScaleValues().push(.148),this.getScaleValues().push(.4),this.getScaleValues().push(.312),this.getScaleValues().push(.2),this.getScaleValues().push(.01)),t<=2)SuperMap.Geometry.AlgoSymbol1004.prototype.modifyPoint.apply(this,arguments);else if(3==t||4==t){var o=new SuperMap.Geometry.Point((l[0].x+l[1].x)/2,(l[0].y+l[1].y)/2),n=SuperMap.Plot.PlottingUtil.clonePoints(l);n.splice(0,2),n.unshift(o);var i=SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(e,n),r=SuperMap.Plot.PlottingUtil.polylineDistance(n);if(3===t&&null===i.pt&&(i.pt=o.clone()),-1==i.index&&4==t)this.getScaleValues()[t+1]=.01;else{var a=SuperMap.Plot.PlottingUtil.clonePoints(n);a.splice(0,i.index+1),a.unshift(i.pt);var p=SuperMap.Plot.PlottingUtil.polylineDistance(a);r<p&&(p=r),this.getScaleValues()[t+1]=(r-p)/r,this.getScaleValues()[4]>.5&&(this.getScaleValues()[4]=.5)}}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25200=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25201",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||null!==this.symbolData||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());var o=l*this.getScaleValues()[0],n=e[e.length-1];if(e.length>2){for(var i=-1,r=e.length-2;r>=0;r--)if(o<SuperMap.Plot.PlottingUtil.distance(n,e[r])){i=r;break}e.splice(i+1,e.length-i),e.push(n)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var a=e[e.length-2],p=e[e.length-1],u=o,s=180*SuperMap.Plot.PlottingUtil.radian(a,p)/Math.PI,P=SuperMap.Plot.PlottingUtil.circlePoint(p,u,u,s+157.5),c=SuperMap.Plot.PlottingUtil.circlePoint(p,u,u,s+202.5),S=[];S.push(P),S.push(n),S.push(c);var y={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,S,y,!0);var h=SuperMap.Plot.PlottingUtil.circlePoint(p,u,u,s);this.addScalePoint(h)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.distance(e,l[l.length-1])/o;if(n>.2)return;this.getScaleValues()[0]=n}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25201=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol25400",l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}this.getScaleValues().length<1&&this.getScaleValues().push(.5);for(var n=this.getLinePts(e,this.getScaleValues()[0]),i=this.getLinePts(e,1.2*this.getScaleValues()[0]),r=SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt),a=[],p=[],u=0;u<=i.startIndex;u++)a.push(e[u]);if(a.push(i.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a),i.endIndex<=e.length){p.push(i.endPt);for(u=i.endIndex+1;u<=e.length-1;u++)p.push(e[u]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p)}var s=e[0],P=e[1],c=e[e.length-2],S=e[e.length-1],y=.3*r,h=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(y,P,s),f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(y,c,S),g=h.pntLeft,M=f.pntLeft,b=[];b.push(s),b.push(g),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b);var d=[];d.push(S),d.push(M),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d);var m=SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)*this.RTOD,v=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),O=new SuperMap.Geometry.Point(.1*r,0),L=new SuperMap.Geometry.Point(.5*r,0),U=SuperMap.Plot.PlottingUtil.coordinateTrans(v,O,m),_=SuperMap.Plot.PlottingUtil.coordinateTrans(v,L,m),w=[];w.push(U),w.push(_);var x={surroundLineFlag:!1,lineTypeLimit:!0,fillLimit:!0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,w,x);var T=new SuperMap.Geometry.Point(.35*r,0),E=SuperMap.Plot.PlottingUtil.circlePoint(T,.2*r,.2*r,135),A=SuperMap.Plot.PlottingUtil.circlePoint(T,.2*r,.2*r,225),G=SuperMap.Plot.PlottingUtil.coordinateTrans(v,T,m),C=SuperMap.Plot.PlottingUtil.coordinateTrans(v,E,m),V=SuperMap.Plot.PlottingUtil.coordinateTrans(v,A,m);(w=[]).push(C),w.push(G),w.push(V),x={surroundLineFlag:!1,lineTypeLimit:!0,fillLimit:!0},this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,w,x);var I=new SuperMap.Geometry.Point(-.1*r,0),j=new SuperMap.Geometry.Point(-.5*r,-.15*r),Y=new SuperMap.Geometry.Point(-.5*r,.15*r),B=SuperMap.Plot.PlottingUtil.coordinateTrans(v,I,m),R=SuperMap.Plot.PlottingUtil.coordinateTrans(v,j,m),N=SuperMap.Plot.PlottingUtil.coordinateTrans(v,Y,m);(w=[]).push(B),w.push(R),w.push(N),w.push(B),x={surroundLineFlag:!1,lineTypeLimit:!0,fillLimit:!0},this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,w,x);var D=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),k=SuperMap.Plot.PlottingUtil.circlePoint(D.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,m);this.addScalePoint(k,0)}}},{key:"getLinePts",value:function(t,e){var l=new Object;if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"modifyPoint",value:function(t,e){if(0===t&&!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o),r=2*SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.5?r:.5}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol25400=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol26500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,l/2);if(-1!==o.index){var n=o.pt,i=this.getDefaultSubSymbolSize()/l;(i>.3||i<=0)&&(i=.3);var r=1.5*i*l,a=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r,e[o.index],n),p=[];p.push(a.pntLeft),p.push(n),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p,null,!0)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol26500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol26501",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.05),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(this.getScaleValues().length<1&&(this.clearScaleValues(),this.getScaleValues().push(.5)),!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=this.getLinePts(e,this.getScaleValues()[0]),i=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),r=180*SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)/Math.PI,a=SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt);0<this.getSubSymbols().length&&this.computeSubSymbol(this.getSubSymbols()[0],i,.8*a,r);for(var p=[],u=[],s=0;s<=n.startIndex;s++)p.push(e[s]);if(p.push(n.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),n.endIndex<=e.length){u.push(n.endPt);for(s=n.endIndex+1;s<=e.length-1;s++)u.push(e[s]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u)}var P=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),c=SuperMap.Plot.PlottingUtil.circlePoint(P.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,r);this.addScalePoint(c,0)}}},{key:"getLinePts",value:function(t,e){var l=new Object;if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"modifyPoint",value:function(t,e){if(0===t&&!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o),r=2*SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.5?r:.5}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol26501=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(18)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol26601",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=.02*e,n=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);n=SuperMap.Plot.PlottingUtil.clearSamePts(n);var i=SuperMap.Plot.PlottingUtil.paraLine(n,.5*o,!0),r=SuperMap.Plot.PlottingUtil.paraLine(n,.5*o,!1);this.createDashLine(i),this.createDashLine(r)}}},{key:"createDashLine",value:function(t){for(var e=SuperMap.Plot.PlottingUtil.polylineDistance(t)/19,l=0;l<18;l++){var o=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,e);if(-1!==o.index){if(0==l%2){for(var n=[],i=0;i<o.index+1;i++)n.push(t[i].clone());n.push(o.pt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n)}var r=[];r.push(o.pt);for(var a=o.index+1;a<t.length;a++)r.push(t[a]);t=(t=[]).concat(r)}}t.length>1&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t)}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol26601=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol28000",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=4,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(.349066)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=(v=this.getScaleValues()[1])*this.RTOD,l=new SuperMap.Geometry.Point(t[0].x,t[0].y),o=new SuperMap.Geometry.Point(t[t.length-1].x,t[t.length-1].y),n=SuperMap.Plot.PlottingUtil.radian(l,o)*this.RTOD,i=new SuperMap.Geometry.Point(0,0);if(2<=t.length){var r=[],a=new SuperMap.Geometry.Point(t[1].x,t[1].y),p=SuperMap.Plot.PlottingUtil.distance(l,a),u=0;for(u=n-e;u<n+e;u+=3)r.push(SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,u));SuperMap.Plot.PlottingUtil.equalFuzzy(u,n+e)&&(u=n+e,r.push(SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,u))),(g=[]).push(t[0]);for(u=0;u<r.length;u++)g.push(new SuperMap.Geometry.Point(r[u].x,r[u].y));g.push(t[0]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);y=SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,n);i=new SuperMap.Geometry.Point(y.x,y.y),(M=[]).push(t[0]),M.push(i),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M)}h=new SuperMap.Geometry.Point(0,0);if(3<=t.length){var r=[],a=new SuperMap.Geometry.Point(t[2].x,t[2].y),p=SuperMap.Plot.PlottingUtil.distance(l,a),u=0;for(u=n-e;u<n+e;u+=3)r.push(SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,u));SuperMap.Plot.PlottingUtil.equalFuzzy(u,n+e)&&(u=n+e,r.push(SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,u)));var s=[];if(0==r.length)return void(s.length>0&&(s=[]));(g=[]).push(t[0]);for(u=0;u<r.length;u++)g.push(new SuperMap.Geometry.Point(r[u].x,r[u].y));g.push(t[0]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);for(var P=new SuperMap.Geometry.Point(t[1].x,t[1].y),c=SuperMap.Plot.PlottingUtil.distance(l,P)*this.getScaleValues()[0],S=[],u=90;u<=270;u+=3)S.push(SuperMap.Plot.PlottingUtil.circlePoint(l,c,c,n+u));g=[];for(u=S.length-1;u>=0;u--)g.push(new SuperMap.Geometry.Point(S[u].x,S[u].y));this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g),(g=[]).push(new SuperMap.Geometry.Point(S[0].x,S[0].y)),g.push(new SuperMap.Geometry.Point(r[r.length-1].x,r[r.length-1].y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g),(g=[]).push(new SuperMap.Geometry.Point(r[0].x,r[0].y)),g.push(new SuperMap.Geometry.Point(S[S.length-1].x,S[S.length-1].y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var y=SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,n),h=new SuperMap.Geometry.Point(y.x,y.y);(M=[]).push(i),M.push(h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M)}var f=new SuperMap.Geometry.Point(0,0);if(4<=t.length){var r=[],a=new SuperMap.Geometry.Point(t[3].x,t[3].y),p=SuperMap.Plot.PlottingUtil.distance(l,a),u=0;for(u=n-e;u<=n+e;u+=3)r.push(SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,u));SuperMap.Plot.PlottingUtil.equalFuzzy(u,n+e)&&(u=n+e,r.push(SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,u)));var g=[];g.push(t[0]);for(u=0;u<r.length;u++)g.push(new SuperMap.Geometry.Point(r[u].x,r[u].y));g.push(t[0]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);y=SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,n);f=new SuperMap.Geometry.Point(y.x,y.y);var M=[];M.push(h),M.push(f),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M)}if(2<=t.length){var b=new SuperMap.Geometry.Point((t[0].x+i.x)/2,(t[0].y+i.y)/2),d=t[0],m=i,v=SuperMap.Plot.PlottingUtil.radian(d,m)*this.RTOD,O=.2*SuperMap.Plot.PlottingUtil.distance(d,m);b=SuperMap.Plot.PlottingUtil.circlePoint(b,O/4,O/4,90),(L={surroundLineFlag:!1,fontSize:15,fontSizeLimit:!0}).labelAlign="cm",L.labelRotation=-v,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,b,L,"危")}if(3<=t.length){var b=new SuperMap.Geometry.Point((h.x+i.x)/2,(h.y+i.y)/2),d=i,m=h,v=SuperMap.Plot.PlottingUtil.radian(d,m)*this.RTOD,O=.2*SuperMap.Plot.PlottingUtil.distance(d,m);b=SuperMap.Plot.PlottingUtil.circlePoint(b,O/4,O/4,90),(L={surroundLineFlag:!1,fontSize:15,fontSizeLimit:!0}).labelAlign="cm",L.labelRotation=-v,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,b,L,"中")}if(4<=t.length){var b=new SuperMap.Geometry.Point((h.x+f.x)/2,(h.y+f.y)/2),d=h,m=f,v=SuperMap.Plot.PlottingUtil.radian(d,m)*this.RTOD,O=.2*SuperMap.Plot.PlottingUtil.distance(d,m);b=SuperMap.Plot.PlottingUtil.circlePoint(b,O/4,O/4,90);var L={surroundLineFlag:!1,fontSize:15,fontSizeLimit:!0};L.labelAlign="cm",L.labelRotation=-v,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,b,L,"轻")}if(3>t.length)this.addScalePoint(t[0]);else{var U=SuperMap.Plot.PlottingUtil.distance(t[0],t[1])*this.getScaleValues()[0],_=SuperMap.Plot.PlottingUtil.circlePoint(l,U,U,n+180);this.addScalePoint(_,0)}var w=SuperMap.Plot.PlottingUtil.distance(t[0],t[t.length-1]),x=SuperMap.Plot.PlottingUtil.circlePoint(l,w,w,n+e);this.addScalePoint(x,1)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),0==t){if(3>l.length)return;var o=new SuperMap.Geometry.Point(l[0].x,l[0].y),n=new SuperMap.Geometry.Point(e.x,e.y),i=SuperMap.Plot.PlottingUtil.distance(o,n),r=new SuperMap.Geometry.Point(l[1].x,l[1].y);if((P=i/SuperMap.Plot.PlottingUtil.distance(o,r))>=2.5)return;this.getScaleValues()[0]=P}else if(1==t){var a=new SuperMap.Geometry.Point(l[0].x,l[0].y),p=new SuperMap.Geometry.Point(l[l.length-1].x,l[l.length-1].y),u=SuperMap.Plot.PlottingUtil.radian(a,p),s=new SuperMap.Geometry.Point(e.x,e.y),P=SuperMap.Plot.PlottingUtil.radian(a,s)-u;if((P=Math.abs(P))>Math.PI/2&&P<3*Math.PI/2)return;P>3*Math.PI/2&&P<=2*Math.PI&&(P=2*Math.PI-P),this.getScaleValues()[1]=Math.abs(P)}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol28000=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol28100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.2),l.getScaleValues().push(.349066)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=new SuperMap.Geometry.Point(t[0].x,t[0].y),l=new SuperMap.Geometry.Point(t[1].x,t[1].y),o=180*SuperMap.Plot.PlottingUtil.radian(e,l)/Math.PI,n=0,i=0;i<t.length-1;i++)n+=SuperMap.Plot.PlottingUtil.distance(e,l);var r=this.getScaleValues()[0]*n;this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[e,new SuperMap.Geometry.Point(e.x+r,e.y)]);var a=180*this.getScaleValues()[1]/Math.PI,p=SuperMap.Plot.PlottingUtil.circlePoint(e,n,n,o-a),u=SuperMap.Plot.PlottingUtil.circlePoint(e,n,n,o+a);this.addCell(SuperMap.Plot.SymbolType.ARCSYMBOL,[p,l,u]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[t[0],t[1]]);var s=SuperMap.Plot.PlottingUtil.circlePoint(e,r,r,o-90);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[s,p]);var P=SuperMap.Plot.PlottingUtil.circlePoint(e,r,r,o+90);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[P,u]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[s,P]);var c=SuperMap.Plot.PlottingUtil.circlePoint(e,r,r,o+180);this.addScalePoint(new SuperMap.Geometry.Point(c.x,c.y),0),this.addScalePoint(u,1)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=new SuperMap.Geometry.Point(l[0].x,l[0].y),n=new SuperMap.Geometry.Point(l[1].x,l[1].y),i=180*SuperMap.Plot.PlottingUtil.radian(o,n)/Math.PI,r=SuperMap.Plot.PlottingUtil.distance(o,n);if(0===t){var a=SuperMap.Plot.PlottingUtil.distance(o,e)/r;this.getScaleValues()[0]=a}if(1===t){var p=180*SuperMap.Plot.PlottingUtil.radian(o,e)/Math.PI,u=Math.abs(p-i);if(u>270&&u<360&&(u=360-u),u>90)return;this.getScaleValues()[1]=u*Math.PI/180}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol28100=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(17)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol28200",null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol28200=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol28300",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&l.getScaleValues().push(.1),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0;e<t.length-1;e++)SuperMap.Plot.PlottingUtil.distance(t[e],t[e+1]);var l=[];if(3>=this.controlPoints.length?l=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),l=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(3>(l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,l);var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l);this.getIsEdit()||(this.getScaleValues()[0]=this.getSubSymbolScaleValue());var i=o*this.getScaleValues()[0];this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],n,i,0),this.clearScalePoints();var r=SuperMap.Plot.PlottingUtil.circlePoint(n,i,i,0);this.addScalePoint(r)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=[];3>=this.controlPoints.length?o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(l),i=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);if(0===t){var r=SuperMap.Plot.PlottingUtil.distance(e,i)/n;this.getScaleValues()[0]=r}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol28300=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol28301",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.3),l.getScaleValues().push(1)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.3),this.getScaleValues().push(1)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var e,l=t[0].clone(),o=t[1].clone(),n=SuperMap.Plot.PlottingUtil.distance(l,o),i=this.getScaleValues()[0],r=this.getScaleValues()[1];if(SuperMap.Plot.PlottingUtil.equalFuzzy(1,r))e=SuperMap.Plot.PlottingUtil.radian(l,o)+270*this.DTOR;else{e=SuperMap.Plot.PlottingUtil.radian(l,o)+90*this.DTOR;var a;a=l,l=o,o=a}var p=n*i*.67,u=SuperMap.Plot.PlottingUtil.circlePoint(l,p,p,e*this.RTOD);this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],u,n*i,e*this.RTOD);var s=SuperMap.Plot.PlottingUtil.circlePoint(o,p,p,e*this.RTOD);this.getSubSymbols().length>1&&this.computeSubSymbol(this.getSubSymbols()[1],s,n*i,e*this.RTOD),this.clearScalePoints();var P=e*this.RTOD,c=n*i,S=t[0].clone(),y=SuperMap.Plot.PlottingUtil.circlePoint(S,c,c,P);this.addScalePoint(y)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=(l=SuperMap.Plot.PlottingUtil.clearSamePts(l))[0].clone(),n=l[1].clone(),i=e.clone(),r=SuperMap.Plot.PlottingUtil.distance(o,n),a=SuperMap.Plot.PlottingUtil.plumbLineLen(i,o,n)/r;if(a<0||SuperMap.Plot.PlottingUtil.equalFuzzy(a,0))return;this.getScaleValues()[0]=a,SuperMap.Plot.PlottingUtil.pointIsRightToLine(o,n,i)?this.getScaleValues()[1]=1:this.getScaleValues()[1]=0}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol28301=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol28900",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=255,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(.05),l.getScaleValues().push(180)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=this.GetGoPts();if(!(t.length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.5),this.getScaleValues().push(.05),this.getScaleValues().push(180));var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[1]=o}var n=this.getScaleValues()[0],i=this.getScaleValues()[1],r=this.getScaleValues()[2],a=l*n,p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a,e);if(p.bfind){var u=p.index,s=p.pts,P=i*l*.5,c=new SuperMap.Geometry.Point(0,0),S=new SuperMap.Geometry.Point(.5*P,0),y=new SuperMap.Geometry.Point(0,P),h=[],f=SuperMap.Plot.PlottingUtil.coordinateTrans(s,c,r);h.push(f);var g=SuperMap.Plot.PlottingUtil.coordinateTrans(s,S,r);h.push(g);var M=SuperMap.Plot.PlottingUtil.coordinateTrans(s,y,r);h.push(M),this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,h);var b=new SuperMap.Geometry.Point(0,-2*P),d=new SuperMap.Geometry.Point(.15*P,-1.6*P),m=new SuperMap.Geometry.Point(-.15*P,-1.6*P),v=SuperMap.Plot.PlottingUtil.coordinateTrans(s,b,r),O=SuperMap.Plot.PlottingUtil.coordinateTrans(s,d,r),L=SuperMap.Plot.PlottingUtil.coordinateTrans(s,m,r),U=[];U.push(v),U.push(O),U.push(L);var _={surroundLineFlag:!1,fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,U,_);var w=new SuperMap.Geometry.Point(0,-P),x=SuperMap.Plot.PlottingUtil.coordinateTrans(s,w,r);(U=[]).push(x),U.push(v.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U,_);var T,E=[],A=[];for(T=0;T<=u;T++)E.push(e[T]);for(E.push(s),A.push(s),T=u+1;T<e.length;T++)A.push(e[T]);var G=1.2*P;if(a>G){var C=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a-G,E);if(C.bfind){var V=C.pts,I=C.index,j=[];for(T=0;T<=I;T++)j.push(E[T]);j.push(V),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,j)}}if(l-a>G){var Y=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(G,A);if(Y.bfind){var B=Y.pts,R=Y.index;for((j=[]).push(B),T=R+1;T<A.length;T++)j.push(A[T]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,j)}}this.clearScalePoints(),this.addScalePoint(s),this.addScalePoint(v)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(0===t){for(var i=e.clone(),r=-1,a=0,p=(new SuperMap.Geometry.Point(0,0),0);p<o.length-1;p++){var u=[];u.push(o[p]),u.push(o[p+1]);var s=SuperMap.Plot.PlottingUtil.projectPoint(i,o[p],o[p+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(s,u).isOnPolyLine){var P=SuperMap.Plot.PlottingUtil.distance(i,s);-1==r?(r=p,s,a=P):a>P&&(r=p,s,a=P)}}if(-1==r)return SuperMap.Plot.PlottingUtil.distance(i,o[0])>SuperMap.Plot.PlottingUtil.distance(i,o[o.length-1])?(r=o.length-1,this.calculateParts()):(r=0,this.calculateParts());S=0;if(0===r)S=SuperMap.Plot.PlottingUtil.distance(o[0],s);else for(p=0;p<r;p++)S+=SuperMap.Plot.PlottingUtil.distance(o[p],o[p+1]);if(S<0||S>n)return;var c=S/n;this.getScaleValues()[0]=c}else if(1==t){var S=this.getScaleValues()[0]*n,y=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(S,o);if(!y.bfind)return;var h=y.pts;(c=SuperMap.Plot.PlottingUtil.distance(h,e)/n)>.5&&(c=.5),this.getScaleValues()[1]=c;var f=SuperMap.Plot.PlottingUtil.radian(h,e)*this.RTOD;this.getScaleValues()[2]=f+90}}this.calculateParts()}},{key:"GetGoPts",value:function(){var t=[];return this.controlPoints.length<this.minEditPts?t:(t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),1===(t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length&&(t=[]),t)}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol28900=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&l.getScaleValues().push(.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e,l=t.length,o=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]),n=SuperMap.Plot.PlottingUtil.radian(t[0],t[1])*this.RTOD,i=[];2==l?(e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.CIRCLESYMBOL,t),i.push.apply(i,e)):3==l&&(e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,t),i=i.concat(e));var r=new SuperMap.Geometry.Point(.8*o,.1*o),a=new SuperMap.Geometry.Point(1.2*o,.1*o),p=new SuperMap.Geometry.Point(1.2*o,.1*-o),u=new SuperMap.Geometry.Point(.9*o,.1*-o),s=[];s.push(r),s.push(a),s.push(p),s.push(u);var P=[],c=0;for(c=0;c<4;c++){M=SuperMap.Plot.PlottingUtil.coordinateTrans(t[0],s[c],n);P.push(M)}var S=new SuperMap.Geometry.Point(-.8*o,.1*o),y=new SuperMap.Geometry.Point(-1.2*o,.1*o),h=new SuperMap.Geometry.Point(-1.1*o,.1*-o),f=new SuperMap.Geometry.Point(-.8*o,.1*-o);(s=[]).push(S),s.push(y),s.push(h),s.push(f);var g=[];for(c=0;c<4;c++){var M=SuperMap.Plot.PlottingUtil.coordinateTrans(t[0],s[c],n);g.push(M)}for(var b=SuperMap.Plot.PlottingUtil.linePnt(t[1],t[0],3*o),d=SuperMap.Plot.PlottingUtil.linePnt(t[0],t[1],2*o),m=[],c=0;c<i.length-1;c++){var v=SuperMap.Plot.PlottingUtil.intersectLines(i[c],i[c+1],b,d);v.isIntersectLines&&(x=SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(v.intersectPoint,i)).isOnPolyLine&&m.push(v.intersectPoint)}if(!(0>=m.length)&&(x=SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(m[0],i)).isOnPolyLine){var O=[];for(c=x.index+1;c<i.length;c++)O.push(i[c]);for(c=0;c<=x.index;c++)O.push(i[c]);var L=[],U=[];SuperMap.Plot.PlottingUtil.ptIsInPolygon(P,m[0])?(L.push.apply(L,P),U.push.apply(U,g)):(L.push.apply(L,g),U.push.apply(U,P));var _=[],w=[],x=-1;for(c=0;c<O.length;c++)if(!SuperMap.Plot.PlottingUtil.ptIsInPolygon(L,O[c])){if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(U,O[c])){x=c;break}_.push(O[c])}if(-1!==x)for(c=x;c<O.length;c++)if(!SuperMap.Plot.PlottingUtil.ptIsInPolygon(U,O[c])){if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(L,O[c]))break;w.push(O[c])}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,_),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,w),this.addLine(_),this.addLine(w)}}}},{key:"addLine",value:function(t){for(var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=0;l<t.length-2;l++){var o=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.02*e,t);if(-1!==o.index){var n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*e,t);if(-1!==n.index){var i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.92*e,t);if(-1!==i.index&&(l===o.index||l===o.index+1||l===i.index||l===i.index+1||l===n.index||l===n.index+1)){var r=SuperMap.Plot.PlottingUtil.radian(t[l+1],t[l])*this.RTOD,a=SuperMap.Plot.PlottingUtil.circlePoint(t[l+1],.02*e,.02*e,r+90);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[t[l+1],a])}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol29000=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(19)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol29101",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());var l=[];t.length<=3?l=SuperMap.Plot.Primitives.getKendyShapePts(t):(t.push(t[0]),l=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,l);for(var o=0;o<4;o++){var n=o*(l.length-1)/4,i=new SuperMap.Geometry.Point(l[n].x,l[n].y),r=new SuperMap.Geometry.Point(l[n+1].x,l[n+1].y),a=new SuperMap.Geometry.Point((i.x+r.x)/2,(i.y+r.y)/2),p=SuperMap.Plot.PlottingUtil.radian(a,r)*this.RTOD,u=this.getScaleValues()[0]*e/2,s=SuperMap.Plot.PlottingUtil.circlePoint(a,u,u,p),P=SuperMap.Plot.PlottingUtil.circlePoint(a,4*u,4*u,p+270),c=SuperMap.Plot.PlottingUtil.circlePoint(a,u,u,p+180);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[s,P,c])}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol29101=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(19)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol29103",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);this.getIsEdit()||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());var o=[];t.length<=3?o=SuperMap.Plot.Primitives.getKendyShapePts(t):(t.push(t[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),o=SuperMap.Plot.PlottingUtil.clearSamePts(o),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,o);for(l=0;l<4;l++){var n=l*(o.length-1)/4,i=new SuperMap.Geometry.Point(o[n].x,o[n].y),r=new SuperMap.Geometry.Point(o[n+1].x,o[n+1].y),a=new SuperMap.Geometry.Point((i.x+r.x)/2,(i.y+r.y)/2),p=SuperMap.Plot.PlottingUtil.radian(a,r)*this.RTOD,u=e*this.getScaleValues()[0]/2,s=SuperMap.Plot.PlottingUtil.circlePoint(a,u,u,p),P=SuperMap.Plot.PlottingUtil.circlePoint(a,4*u,4*u,p+270),c=SuperMap.Plot.PlottingUtil.circlePoint(a,u,u,p+180),S={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[s,P,c],S)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol29103=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function t(e,l,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,l);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,l,o)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(o)},p=function(t){return t&&t.__esModule?t:{default:t}}(l(2)),u=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol29800",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=30,0===l.getScaleValues().length&&(l.getScaleValues().push(.2),l.getScaleValues().push(.2),l.getScaleValues().push(.4),l.getScaleValues().push(.4),l.getScaleValues().push(.1),l.getScaleValues().push(.2),l.getScaleValues().push(.1),l.getScaleValues().push(.2),l.getScaleValues().push(1),l.getScaleValues().push(1)),l}return i(e,p["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length>=2&&t.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);this.getScaleValues()[0];SuperMap.Geometry.AlgoSymbol1004.prototype.applyUse.apply(this,arguments),this.getScaleValues().length<9&&(this.getScaleValues().push(.2),this.getScaleValues().push(.2),this.getScaleValues().push(.4),this.getScaleValues().push(.4),this.getScaleValues().push(.1),this.getScaleValues().push(.2),this.getScaleValues().push(.1),this.getScaleValues().push(.2),this.getScaleValues().push(1),this.getScaleValues().push(1));var o,n=e*this.getScaleValues()[4],i=e*this.getScaleValues()[5],r=SuperMap.Plot.PlottingUtil.distance(t[1],t[0]),a=SuperMap.Plot.PlottingUtil.linePnt(t[1],t[0],r+i);o=(this.getScaleValues()[8],SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,t[1],a));var p,u=e*this.getScaleValues()[6],s=e*this.getScaleValues()[7],P=SuperMap.Plot.PlottingUtil.linePnt(t[0],t[1],r+s);p=(this.getScaleValues()[9],SuperMap.Plot.PlottingUtil.getSidePointsOfLine(u,t[0],P));var c=[];c.push(new SuperMap.Geometry.Point(o.pntLeft.x,o.pntLeft.y)),c.push(new SuperMap.Geometry.Point(t[0].x,t[0].y)),c.push(new SuperMap.Geometry.Point(t[1].x,t[1].y)),c.push(new SuperMap.Geometry.Point(p.pntRight.x,p.pntRight.y));var S=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(c);S=SuperMap.Plot.PlottingUtil.clearSamePts(S),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S),this.addScalePoint(o.pntLeft,3),this.addScalePoint(p.pntRight,4)}}},{key:"modifyPoint",value:function(t,l){if(!0===l.isScalePoint){var o=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.projectPoint(l,o[0],o[1]);if(t<=2&&a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"modifyPoint",this).call(this,t,l),3===t){var r=(u=SuperMap.Plot.PlottingUtil.distance(l,i))/n,p=(P=SuperMap.Plot.PlottingUtil.distance(i,o[0]))/n;this.getScaleValues()[4]=r,this.getScaleValues()[5]=p,SuperMap.Plot.PlottingUtil.pointIsRightToLine(o[0],o[1],l)?this.getScaleValues()[8]=1:this.getScaleValues()[8]=0}if(4===t){var u=SuperMap.Plot.PlottingUtil.distance(l,i),s=u/n,P=SuperMap.Plot.PlottingUtil.distance(i,o[1]),c=P/n;this.getScaleValues()[6]=s,this.getScaleValues()[7]=c,SuperMap.Plot.PlottingUtil.pointIsRightToLine(o[0],o[1],l)?this.getScaleValues()[9]=1:this.getScaleValues()[9]=0}}this.calculateParts()}}]),e}();e.default=u,SuperMap.Geometry.AlgoSymbol29800=u},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(20)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30001",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.2||o<=0)&&(o=.2),this.getScaleValues()[2]=o,this.getScaleValues()[4]=o}var n=l*this.getScaleValues()[0],i=180*this.getScaleValues()[1]/Math.PI,r=l*this.getScaleValues()[2],a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,n);if(-1!==a.index){var p=a.pt,u=new SuperMap.Geometry.Point(e[a.index].x,e[a.index].y),s=new SuperMap.Geometry.Point(e[a.index+1].x,e[a.index+1].y),P=180*SuperMap.Plot.PlottingUtil.radian(u,s)/Math.PI,c=SuperMap.Plot.PlottingUtil.circlePoint(p,r,r,P+i);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[p,c]);var S=180*SuperMap.Plot.PlottingUtil.radian(p,c)/Math.PI,y=SuperMap.Plot.PlottingUtil.circlePoint(c,.2*r,.2*r,S-157.5),h=SuperMap.Plot.PlottingUtil.circlePoint(c,.2*r,.2*r,S+157.5),f={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[c,y,h],f);var g=new SuperMap.Geometry.Point(.4*r,0),M=SuperMap.Plot.PlottingUtil.coordinateTrans(p,g,S),b=new SuperMap.Geometry.Point(0,.1*r),d=new SuperMap.Geometry.Point(0,-.1*r),m=SuperMap.Plot.PlottingUtil.coordinateTrans(M,b,S),v=SuperMap.Plot.PlottingUtil.coordinateTrans(M,d,S);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[m,v]);var O=new SuperMap.Geometry.Point(.5*r,0),L=SuperMap.Plot.PlottingUtil.coordinateTrans(p,O,S),U=new SuperMap.Geometry.Point(0,.1*r),_=new SuperMap.Geometry.Point(0,-.1*r),w=SuperMap.Plot.PlottingUtil.coordinateTrans(L,U,S),x=SuperMap.Plot.PlottingUtil.coordinateTrans(L,_,S);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[w,x]);var T=new SuperMap.Geometry.Point(.6*r,0),E=SuperMap.Plot.PlottingUtil.coordinateTrans(p,T,S),A=new SuperMap.Geometry.Point(0,.1*r),G=new SuperMap.Geometry.Point(0,-.1*r),C=SuperMap.Plot.PlottingUtil.coordinateTrans(E,A,S),V=SuperMap.Plot.PlottingUtil.coordinateTrans(E,G,S);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[C,V]);for(var I=4*(l*this.getScaleValues()[4])*Math.sin(Math.PI/8),j=this._getLeftSubSymbolPts(I),Y=e[0].clone(),B=-1,R=null,N=1;N<e.length;N++)if(SuperMap.Plot.PlottingUtil.distance(Y,e[N])>.5*I){B=N-1,R=SuperMap.Plot.PlottingUtil.linePnt(Y,e[N],.5*I);break}-1===B&&(B=e.length-1,R=e[e.length-1]);var D=null;if(null!==R){for(var k=180*SuperMap.Plot.PlottingUtil.radian(Y,R)/Math.PI,z=[],N=0;N<j.length;N++)z.push(SuperMap.Plot.PlottingUtil.coordinateTrans(Y,j[N],k));D=z[3].clone(),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,z)}for(var F=this.getRightSubSymbolPts(I),q=e[e.length-1].clone(),W=-1,K=null,N=e.length-2;N>=0;N--)if(SuperMap.Plot.PlottingUtil.distance(q,e[N])>.5*I){W=N,K=SuperMap.Plot.PlottingUtil.linePnt(q,e[N],.5*I);break}if(-1===W&&(W=0,K=e[0]),null!==K){for(var H=180*SuperMap.Plot.PlottingUtil.radian(q,K)/Math.PI,J=[],N=0;N<F.length;N++)J.push(SuperMap.Plot.PlottingUtil.coordinateTrans(q,F[N],H));this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,J)}if(B<=W){var X=[];X.push(R);for(N=B+1;N<=W;N++)X.push(e[N]);X.push(K),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,X)}this.addScalePoint(p),this.addScalePoint(c),null!==D&&this.addScalePoint(D)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(0===t){for(var i=-1,r=0,a=new SuperMap.Geometry.Point(0,0),p=0;p<o.length-1;p++){var u=[],s=0;u.push(o[p]),u.push(o[p+1]);var P=SuperMap.Plot.PlottingUtil.projectPoint(e,o[p],o[p+1]);-1!==SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(P,u).index&&(s=SuperMap.Plot.PlottingUtil.distance(e,P),isNaN(s)||(-1===i?(i=p,a=P,r=s):r>s&&(i=p,a=P,r=s)))}-1===i&&Math.ceil(e.x,1)<=Math.ceil(o[0].x,1)?(i=0,a=o[0]):-1===i&&i===o[o.length-2]&&(i=0,a=o[0]),-1===i&&Math.ceil(e.x,1)>=Math.ceil(o[o.length-1].x,1)?(i=o.length-1,a=o[o.length-1]):-1===i&&(i=o.length-1,a=o[o.length-1]);for(var c=0,p=0;p<i;p++)c+=SuperMap.Plot.PlottingUtil.distance(o[p],o[p+1]);var S=(c+=SuperMap.Plot.PlottingUtil.distance(o[i],a))/n;this.getScaleValues()[0]=S}else if(1===t){var y=n*this.getScaleValues()[0],h=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,y);if(-1===h.index)return;var f=h.pt,g=o[h.index],M=o[h.index+1],b=SuperMap.Plot.PlottingUtil.radian(g,M),d=SuperMap.Plot.PlottingUtil.radian(f,e)-b;this.getScaleValues()[1]=d;var m=(c=SuperMap.Plot.PlottingUtil.distance(f,e))/n;this.getScaleValues()[2]=m}else if(2===t){var v=SuperMap.Plot.PlottingUtil.distance(e,l[0])/n;v>.35&&(v=.35),this.getScaleValues()[4]=v}}this.calculateParts()}},{key:"_getLeftSubSymbolPts",value:function(t){var e=.25*t,l=[],o=new SuperMap.Geometry.Point(0,0),n=new SuperMap.Geometry.Point(e,-2*e),i=new SuperMap.Geometry.Point(2*e,0),r=new SuperMap.Geometry.Point(e,2*e);return l.push(o),l.push(n),l.push(i),l.push(r),l.push(o),l}},{key:"getRightSubSymbolPts",value:function(t){return this._getLeftSubSymbolPts(t)}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30001=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(92)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30002",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.2||o<=0)&&(o=.2),this.getScaleValues()[2]=o,this.getScaleValues()[4]=o}var n=l*this.getScaleValues()[0],i=180*this.getScaleValues()[1]/Math.PI,r=l*this.getScaleValues()[2],a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,n);if(-1!==a.index){var p=a.pt,u=new SuperMap.Geometry.Point(e[a.index].x,e[a.index].y),s=new SuperMap.Geometry.Point(e[a.index+1].x,e[a.index+1].y),P=180*SuperMap.Plot.PlottingUtil.radian(u,s)/Math.PI,c=SuperMap.Plot.PlottingUtil.circlePoint(p,r,r,P+i);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[p,c]);var S=180*SuperMap.Plot.PlottingUtil.radian(p,c)/Math.PI,y=SuperMap.Plot.PlottingUtil.circlePoint(c,.2*r,.2*r,S-157.5),h=SuperMap.Plot.PlottingUtil.circlePoint(c,.2*r,.2*r,S+157.5),f={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[c,y,h],f);for(var g=4*(l*this.getScaleValues()[4])*Math.sin(Math.PI/8),M=this._getLeftSubSymbolPts(g),b=e[0].clone(),d=-1,m=null,v=1;v<e.length;v++)if(SuperMap.Plot.PlottingUtil.distance(b,e[v])>.5*g){d=v-1,m=SuperMap.Plot.PlottingUtil.linePnt(b,e[v],.5*g);break}-1===d&&(d=e.length-1,m=e[e.length-1]);var O=null;if(null!==m){for(var L=180*SuperMap.Plot.PlottingUtil.radian(b,m)/Math.PI,U=[],v=0;v<M.length;v++)U.push(SuperMap.Plot.PlottingUtil.coordinateTrans(b,M[v],L));O=U[3].clone(),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U)}for(var _=this._getRightSubSymbolPts(g),w=e[e.length-1].clone(),x=-1,T=null,v=e.length-2;v>=0;v--)if(SuperMap.Plot.PlottingUtil.distance(w,e[v])>.5*g){x=v,T=SuperMap.Plot.PlottingUtil.linePnt(w,e[v],.5*g);break}if(-1===x&&(x=0,T=e[0]),null!==T){for(var E=180*SuperMap.Plot.PlottingUtil.radian(w,T)/Math.PI,A=[],v=0;v<_.length;v++)A.push(SuperMap.Plot.PlottingUtil.coordinateTrans(w,_[v],E));this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,A)}if(d<=x){var G=[];G.push(m);for(v=d+1;v<=x;v++)G.push(e[v]);G.push(T),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,G)}this.addScalePoint(p),this.addScalePoint(c),null!==O&&this.addScalePoint(O)}}}},{key:"_getRightSubSymbolPts",value:function(t){var e=.25*t,l=[];return l.push(new SuperMap.Geometry.Point(0,2*e)),l.push(new SuperMap.Geometry.Point(2*e,2*e)),l.push(new SuperMap.Geometry.Point(2*e,-e)),l.push(new SuperMap.Geometry.Point(0,-2*e)),l.push(new SuperMap.Geometry.Point(0,2*e)),l}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30002=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(Math.PI/2),l.getScaleValues().push(.069485),l.getScaleValues().push(.15),l.getScaleValues().push(.1),l.getScaleValues().push(1.731025),l.getScaleValues().push(2.076877)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);o=SuperMap.Plot.PlottingUtil.clearSamePts(o),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,o),this.getIsEdit()||(this.getScaleValues()[2]=this.getSubSymbolScaleValue());var n=e*this.getScaleValues()[0],i=this.getScaleValues()[1]*this.RTOD,r=e*this.getScaleValues()[2],a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,n);if(-1!==a.index){var p=a.pt,u=a.index,s=p,P=o[u],c=o[u+1],S=SuperMap.Plot.PlottingUtil.radian(P,c)*this.RTOD,y=SuperMap.Plot.PlottingUtil.circlePoint(s,1.5*r,1.5*r,S+i);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[p,y]);var h=SuperMap.Plot.PlottingUtil.radian(s,y)*this.RTOD,f=new SuperMap.Geometry.Point(-.2*r,.05*r),g=new SuperMap.Geometry.Point(-.2*r,-.05*r),M=SuperMap.Plot.PlottingUtil.coordinateTrans(y,f,h),b=SuperMap.Plot.PlottingUtil.coordinateTrans(y,g,h),d={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[y,M,b],d);var m=new SuperMap.Geometry.Point(.6*r,0),v=SuperMap.Plot.PlottingUtil.coordinateTrans(s,m,h),O=.4*r*this.getScaleValues()[5],L=.4*r*this.getScaleValues()[6],U=new SuperMap.Geometry.Point(0,-.9*(O-.25*L)),_=new SuperMap.Geometry.Point(0,.9*(O-.25*L)),w=SuperMap.Plot.PlottingUtil.coordinateTrans(v,U,h),x=SuperMap.Plot.PlottingUtil.coordinateTrans(v,_,h);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[w,x]);var T=new SuperMap.Geometry.Point(0,O),E=SuperMap.Plot.PlottingUtil.coordinateTrans(v,T,h),A=new SuperMap.Geometry.Point(0,.25*L),G=new SuperMap.Geometry.Point(.5*L,0),C=new SuperMap.Geometry.Point(0,-.25*L),V=new SuperMap.Geometry.Point(-.5*L,0),I=SuperMap.Plot.PlottingUtil.coordinateTrans(E,A,h),j=SuperMap.Plot.PlottingUtil.coordinateTrans(E,G,h),Y=SuperMap.Plot.PlottingUtil.coordinateTrans(E,C,h),B=SuperMap.Plot.PlottingUtil.coordinateTrans(E,V,h);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[I,j,Y,B,I]);var R=new SuperMap.Geometry.Point(0,-O),N=SuperMap.Plot.PlottingUtil.coordinateTrans(v,R,h),D=SuperMap.Plot.PlottingUtil.coordinateTrans(N,A,h),k=SuperMap.Plot.PlottingUtil.coordinateTrans(N,G,h),z=SuperMap.Plot.PlottingUtil.coordinateTrans(N,C,h),F=SuperMap.Plot.PlottingUtil.coordinateTrans(N,V,h);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[D,k,z,F,D]),this.addScalePoint(p,0),this.addScalePoint(y,1);var q=new SuperMap.Geometry.Point(0,-O),W=SuperMap.Plot.PlottingUtil.coordinateTrans(v,q,h);this.addScalePoint(W,2),this.addScalePoint(B,3)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);for(var o=0,n=0;n<l.length-1;n++)o+=SuperMap.Plot.PlottingUtil.distance(l[n],l[n+1]);var i=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);if(i=SuperMap.Plot.PlottingUtil.clearSamePts(i),0===t){for(var r=[],n=0;n<i.length;n++)r.push(new SuperMap.Geometry.Point(i[n].x,i[n].y));for(var a=-1,p=0,u=new SuperMap.Geometry.Point(0,0),n=0;n<r.length-1;n++){var s=[];s.push(r[n]),s.push(r[n+1]);var P=SuperMap.Plot.PlottingUtil.projectPoint(e,r[n],r[n+1]);if(-1!==SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(P,s).index){var c=SuperMap.Plot.PlottingUtil.distance(e,P);-1===a?(a=n,u=P,p=c):p>c&&(a=n,u=P,p=c)}}-1===a&&Math.ceil(e.x,1)<=Math.ceil(i[0].x,1)?(a=0,u=i[0]):-1===a&&a===i[i.length-2]&&(a=0,u=i[0]),-1===a&&Math.ceil(e.x,1)>=Math.ceil(i[i.length-1].x,1)?(a=i.length-1,u=i[i.length-1]):-1!==a&&a!==i.length-1||(a=i.length-2,u=i[i.length-2]);for(var S=0,n=0;n<a;n++)S+=SuperMap.Plot.PlottingUtil.distance(i[n],i[n+1]);var y=(S+=SuperMap.Plot.PlottingUtil.distance(i[a],u))/o;this.getScaleValues()[0]=y}else if(1===t){var h=o*this.getScaleValues()[0],f=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,h);if(-1===f.index)return;var g=f.pt,M=i[f.index],b=i[f.index+1],d=SuperMap.Plot.PlottingUtil.radian(M,b),m=(w=SuperMap.Plot.PlottingUtil.radian(g,e))-d;this.getScaleValues()[1]=m;var v=(S=SuperMap.Plot.PlottingUtil.distance(g,e))/o/1.5;this.getScaleValues()[2]=v}else if(2===t){var h=o*this.getScaleValues()[0],O=180*this.getScaleValues()[1]/Math.PI,S=o*this.getScaleValues()[2];if(-1===(g=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,h)).index)return;var L=g.pt,M=i[g.index],b=i[g.index+1],d=180*SuperMap.Plot.PlottingUtil.radian(M,b)/Math.PI,U=SuperMap.Plot.PlottingUtil.circlePoint(L,.4*S,.4*S,d+O),_=(C=SuperMap.Plot.PlottingUtil.distance(e,U))/(.4*S);this.getScaleValues()[5]=_}else if(3===t){var h=o*this.getScaleValues()[0],O=180*this.getScaleValues()[1]/Math.PI,S=o*this.getScaleValues()[2];if(-1===(g=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,h)).index)return;var L=g.pt,M=i[g.index],b=i[g.index+1],w=(d=180*SuperMap.Plot.PlottingUtil.radian(M,b)/Math.PI)+O,x=new SuperMap.Geometry.Point(.6*S,0),T=SuperMap.Plot.PlottingUtil.coordinateTrans(L,x,w),E=.4*S*this.getScaleValues()[5],A=new SuperMap.Geometry.Point(0,E),G=SuperMap.Plot.PlottingUtil.coordinateTrans(T,A,w),C=SuperMap.Plot.PlottingUtil.distance(G,e),V=2*C/(.4*S);this.getScaleValues()[6]=V}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30100=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(6)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="调",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3010301=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(6)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="出",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3010303=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(6)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="协",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3010304=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(21)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30201",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);o=SuperMap.Plot.PlottingUtil.clearSamePts(o),this.getIsEdit()||(this.getScaleValues()[1]=2*this.getSubSymbolScaleValue());var n=e*this.getScaleValues()[1],i=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,n);if(-1!==i.index){var r=t[0],a=i.pt,p=SuperMap.Plot.PlottingUtil.radian(r,a)*this.RTOD,u=new SuperMap.Geometry.Point(0,.1*n),s=new SuperMap.Geometry.Point(.4*n,.1*n),P=new SuperMap.Geometry.Point(.4*n,-.1*n),c=new SuperMap.Geometry.Point(0,-.1*n),S=SuperMap.Plot.PlottingUtil.coordinateTrans(r,u,p),y=SuperMap.Plot.PlottingUtil.coordinateTrans(r,s,p),h=SuperMap.Plot.PlottingUtil.coordinateTrans(r,P,p),f=SuperMap.Plot.PlottingUtil.coordinateTrans(r,c,p),g={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[S,y,h,f,S],g);var M=new SuperMap.Geometry.Point(.3*n,.1*n),b=new SuperMap.Geometry.Point(.3*n,-.1*n),d=SuperMap.Plot.PlottingUtil.coordinateTrans(r,M,p),m=SuperMap.Plot.PlottingUtil.coordinateTrans(r,b,p);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[d,m]);var v=new SuperMap.Geometry.Point(.4*n,0),O=new SuperMap.Geometry.Point(.8*n,0),L=SuperMap.Plot.PlottingUtil.coordinateTrans(r,v,p),U=SuperMap.Plot.PlottingUtil.coordinateTrans(r,O,p);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[L,U]);var _=new SuperMap.Geometry.Point(.7*n,.025*n),w=new SuperMap.Geometry.Point(.7*n,-.025*n),x=SuperMap.Plot.PlottingUtil.coordinateTrans(r,_,p),T=SuperMap.Plot.PlottingUtil.coordinateTrans(r,w,p);this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[U,x,T],g);var E=[];E.push(i.pt);for(l=i.index+1;l<o.length;l++)E.push(o[l]);this.addArrow(E);var A=SuperMap.Plot.PlottingUtil.circlePoint(r,n,n,p+90);this.addScalePoint(A,0)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30201=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3020901",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.125)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[];if(2==t.length){var l=new SuperMap.Geometry.Point(t[0].x,t[0].y),o=new SuperMap.Geometry.Point(t[1].x,t[1].y),n=SuperMap.Plot.PlottingUtil.distance(l,o),i=180*SuperMap.Plot.PlottingUtil.radian(l,o)/Math.PI,r=SuperMap.Plot.PlottingUtil.circlePoint(l,n,n,i+60);e.push(t[0]),e.push(o),e.push(r),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e)}else{this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);for(var a=0;a<t.length;a++)e.push(t[a])}var p=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),u=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[2]=u*this.getSubSymbolScaleValue()/u);var s=this.getScaleValues()[0],P=this.getScaleValues()[1],c=this.getScaleValues()[2],S=new SuperMap.Geometry.Point(p.x+u*s,p.y+u*P),y=u*c;0<this.getSubSymbols().length&&this.computeSubSymbol(this.getSubSymbols()[0],S,y,0),this.addScalePoint(S.clone());var h=SuperMap.Plot.PlottingUtil.circlePoint(S,.5*y,.5*y,90);this.addScalePoint(h)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=[];if(2==l.length){var n=new SuperMap.Geometry.Point(l[0].x,l[0].y),i=new SuperMap.Geometry.Point(l[1].x,l[1].y),r=SuperMap.Plot.PlottingUtil.distance(n,i),a=180*SuperMap.Plot.PlottingUtil.radian(n,i)/Math.PI,p=SuperMap.Plot.PlottingUtil.circlePoint(n,r,r,a+60);o.push(l[0]),o.push(i),o.push(p),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,o)}else{this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,l);for(var u=0;u<l.length;u++)o.push(l[u])}var s=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o),P=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t)this.getScaleValues()[0]=(e.x-s.x)/P,this.getScaleValues()[1]=(e.y-s.y)/P;else if(1===t){var c=new SuperMap.Geometry.Point(s.x+P*this.getScaleValues()[0],s.y+P*this.getScaleValues()[1]),S=2*(r=SuperMap.Plot.PlottingUtil.distance(e,c))/P;S<.5&&(this.getScaleValues()[2]=S)}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3020901=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30800",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=0,l=0;l<t.length-1;l++)e+=SuperMap.Plot.PlottingUtil.distance(t[l],t[l+1]);var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,o);var n=.5*e,i=e*this.getSubSymbolScaleValue(),r=SuperMap.Plot.PlottingUtil.findPointInPolyLine(o,n);if(-1!==r.index){var a=r.pt,p=o[r.index],u=o[r.index+1],s=SuperMap.Plot.PlottingUtil.radian(p,u)*this.RTOD,P=SuperMap.Plot.PlottingUtil.circlePoint(a,i,i,s+90);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[r.pt,P]);var c=SuperMap.Plot.PlottingUtil.radian(a,P)*this.RTOD,S=SuperMap.Plot.PlottingUtil.circlePoint(P,i,i,c+30),y=SuperMap.Plot.PlottingUtil.circlePoint(P,i,i,c+33),h=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt([P,S,y]);h=SuperMap.Plot.PlottingUtil.clearSamePts(h);var f=SuperMap.Plot.PlottingUtil.polylineDistance(h),g=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.9*f,h);if(-1!==g.index){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h.slice(0,g.index));var M=SuperMap.Plot.PlottingUtil.radian(P,S)*this.RTOD,b=new SuperMap.Geometry.Point(-.2*i,.05*i),d=new SuperMap.Geometry.Point(-.2*i,-.05*i),m=SuperMap.Plot.PlottingUtil.coordinateTrans(S,b,M+17),v=SuperMap.Plot.PlottingUtil.coordinateTrans(S,d,M+17),O={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[S,m,v],O);var L=SuperMap.Plot.PlottingUtil.circlePoint(P,i,i,c+330),U=SuperMap.Plot.PlottingUtil.circlePoint(P,i,i,c+327),_=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt([P,L,U]);_=SuperMap.Plot.PlottingUtil.clearSamePts(_),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,_.slice(0,g.index));var w=SuperMap.Plot.PlottingUtil.radian(P,L)*this.RTOD,x=SuperMap.Plot.PlottingUtil.coordinateTrans(L,b,w-17),T=SuperMap.Plot.PlottingUtil.coordinateTrans(L,d,w-17);this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[L,x,T],O)}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30800=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(22)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol31301",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var l=this.getScaleValues()[0]*e,o=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,t[0],t[1]),n=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,t[1],t[0]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[o.pntLeft,o.pntRight]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[n.pntLeft,n.pntRight]);var i=[],r=3*l;i.push(t[0]),i.push(t[1]);for(var a=SuperMap.Plot.PlottingUtil.paraLine(i,r,!0),p=SuperMap.Plot.PlottingUtil.paraLine(i,r,!1),u=[],s=0;s<a.length;s++)u.push(a[s]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u);var P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,a[1],a[0]),c=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,a[0],a[1]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[P.pntLeft,P.pntRight]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[c.pntLeft,c.pntRight]);for(var S=[],y=0;y<p.length;y++)S.push(p[y]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S);var h=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,p[1],p[0]),f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l,p[0],p[1]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[h.pntLeft,h.pntRight]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[f.pntLeft,f.pntRight]),this.addScalePoint(n.pntRight,0)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol31301=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(23)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol31401",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,t);var e=Math.abs(t[1].x-t[0].x)*this.getSubSymbolScaleValue(),l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),o=new SuperMap.Geometry.Point(l.x-e,l.y-e),n=new SuperMap.Geometry.Point(l.x+e,l.y-3*e),i={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,[o,n],i,!0);var r=new SuperMap.Geometry.Point(l.x-e,l.y+e),a=new SuperMap.Geometry.Point(l.x-3*e,l.y+3*e);this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,[r,a],i,!0);var p=new SuperMap.Geometry.Point(l.x+e,l.y+e),u=new SuperMap.Geometry.Point(l.x+3*e,l.y+3*e);this.addCell(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,[p,u],i,!0)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol31401=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol32300",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,l.getScaleValues().length,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e,l=t[0],o=t[1];e=2==t.length?o:t[2];var n=new SuperMap.Geometry.Point((l.x+o.x)/2,(l.y+o.y)/2),i=SuperMap.Plot.PlottingUtil.distance(n,e),r=.5*i,a=(f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r,n,e)).pntLeft,p=f.pntRight,u=!(n.x>e.x),s=[];u?(s.push(l),s.push(a)):(s.push(l),s.push(p)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s);var P=[];u?(P.push(o),P.push(p)):(P.push(o),P.push(a)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P);var c=.37*i,S=SuperMap.Plot.PlottingUtil.linePnt(n,e,c),y=.09*i,h=[];h.push(S),h.push(new SuperMap.Geometry.Point(S.x,S.y+y)),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,h);var f,g,M,b,d;u?((f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(y,n,S)).pntRight,g=f.pntLeft,(f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*y,n,S)).pntRight,M=f.pntLeft,b=(f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(y,g,M)).pntRight,d=f.pntLeft):(g=(f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(y,n,S)).pntRight,f.pntLeft,M=(f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*y,n,S)).pntRight,f.pntLeft,b=(f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(y,g,M)).pntRight,d=f.pntLeft);var m=[];m.push(g),m.push(M),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m,{lineTypeLimit:!0});var v=[];v.push(b),v.push(d),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,v,{lineTypeLimit:!0})}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol32300=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol35000",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.03),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(this.getScaleValues().length<1&&(this.clearScaleValues(),this.getScaleValues()[0]=.03),!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=e[0],i=e[1],r=e[e.length-1],a=e[e.length-2],p=SuperMap.Plot.PlottingUtil.radian(n,i)*this.RTOD,u=SuperMap.Plot.PlottingUtil.radian(a,r)*this.RTOD,s=this.getScaleValues()[0],P=l*s,c=SuperMap.Plot.PlottingUtil.circlePoint(n,P,P,p+90),S=SuperMap.Plot.PlottingUtil.circlePoint(n,P,P,p+270),y=[];y.push(c),y.push(S),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y,{lineTypeLimit:!0}),this.clearScalePoints(),this.addScalePoint(S);var h=SuperMap.Plot.PlottingUtil.circlePoint(r,P,P,u+90),f=SuperMap.Plot.PlottingUtil.circlePoint(r,P,P,u+270);(y=[]).push(h),y.push(f),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y,{lineTypeLimit:!0});var g,M=t.length;if(this.getScaleValues().length!=M){this.getScaleValues().push(s);var b=1/M;for(g=0;g<M-1;g++)this.getScaleValues().push(b*(g+1))}for(g=0;g<M-1;g++){var d=(b=this.getScaleValues()[g+1])*l,m=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(d,e);if(!m.bfind)return;var v=m.pts,O=m.index,L=l*this.getSubSymbolScaleValue(),U=.3*L,_=SuperMap.Plot.PlottingUtil.radian(e[O],e[O+1])*this.RTOD,w=new SuperMap.Geometry.Point(L,-U),x=new SuperMap.Geometry.Point(-L,-U),T=new SuperMap.Geometry.Point(-L,0),E=new SuperMap.Geometry.Point(L,0),A=SuperMap.Plot.PlottingUtil.coordinateTrans(v,w,_),G=SuperMap.Plot.PlottingUtil.coordinateTrans(v,x,_),C=SuperMap.Plot.PlottingUtil.coordinateTrans(v,T,_),V=SuperMap.Plot.PlottingUtil.coordinateTrans(v,E,_);(y=[]).push(A),y.push(G),y.push(C),y.push(V),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,y,{lineTypeLimit:!0,fillLimit:!0,fillStyle:0}),this.addScalePoint(v)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>=this.getScalePoints().length)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(0==t){var i=(h=SuperMap.Plot.PlottingUtil.distance(e,l[0]))/n;this.getScaleValues()[0]=i}else{var r,a=e,p=[];for(r=0;r<o.length;r++)p.push(o[r]);var u=-1,s=0,P=new SuperMap.Geometry.Point(0,0);for(r=0;r<p.length-1;r++){var c=[];c.push(p[r]),c.push(p[r+1]);var S=SuperMap.Plot.PlottingUtil.projectPoint(a,p[r],p[r+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(S,c).isOnPolyLine){var y=SuperMap.Plot.PlottingUtil.distance(a,S);-1==u?(u=r,P=S,s=y):s>y&&(u=r,P=S,s=y)}}-1===u&&Math.ceil(e.x,1)<=Math.ceil(o[0].x,1)?(u=0,P=o[0]):-1===u&&u===o[o.length-2]&&(u=0,P=o[0]),-1===u&&Math.ceil(e.x,1)>=Math.ceil(o[o.length-1].x,1)?(u=o.length-1,P=o[o.length-1]):-1!==u&&u!==o.length-1||(u=o.length-1,P=o[o.length-1]);var h=0;for(r=0;r<u;r++)h+=SuperMap.Plot.PlottingUtil.distance(o[r],o[r+1]);var f=(h+=SuperMap.Plot.PlottingUtil.distance(o[u],P))/n;this.getScaleValues()[t]=f}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol35000=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol35200",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=.05),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<1&&(this.clearScaleValues(),this.getScaleValues()[0]=.05),this.getIsEdit()||(this.getScaleValues()[0]=this.getSubSymbolScaleValue()),2==t.length?this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t):this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),o=e*this.getScaleValues()[0];this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],l,o,0),this.clearScalePoints();var n=SuperMap.Plot.PlottingUtil.circlePoint(l,o,o,90);this.addScalePoint(n)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l);if(0==t){var i=SuperMap.Plot.PlottingUtil.distance(e,n)/o;this.getScaleValues()[0]=i}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol35200=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol37700",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&l.getScaleValues().push(.2),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getKendyShapePts(t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),e=SuperMap.Plot.PlottingUtil.clearSamePts(e),!(this.minEditPts>e.length)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e);if(!this.getIsEdit()){var n=this.getDefaultSubSymbolSize()/l;(n>.3||n<=0)&&(n=.3),this.getScaleValues()[0]=2*n}var i=l*this.getScaleValues()[0];this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],o,i,0)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol37700=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol39800",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,l.getScaleValues().length,0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[],l=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(this.clearScalePoints(),t.length<3)e.push(t[0]),e.push(t[1]);else{var o=SuperMap.Plot.PlottingUtil.computeBeizerPoints(this.getIsEdit(),t,this.getScaleValues());this.setScaleValues(o.scaleValues);for(var n=0;n<o.scalePoints.length;n++)this.addScalePoint(o.scalePoints[n]);e=o.beizerPoints}SuperMap.Plot.PlottingUtil.clearSamePts(e);var i=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){this.getScaleValues().push(.5),this.getScaleValues()[1]=this.getSubSymbolScaleValue();var r=this.getSubSymbolScaleValue();this.getScaleValues().push(r)}if(!(e.length<=0)){var a;a=2===t.length?0:t.length-1;var p;this.getIsEdit()?p=i*this.getScaleValues()[4*a]:(this.getScaleValues()[4*this.controlPoints.length-4]=.5,p=i*this.getScaleValues()[4*this.controlPoints.length-4]);var u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(p,e);if(u.bfind){var s=u.index,P=u.pts;this.getIsEdit()||(this.getScaleValues()[4*this.controlPoints.length-4]=.5,this.getScaleValues()[4*this.controlPoints.length-3]=this.getSubSymbolScaleValue(),p=this.getScaleValues()[4*this.controlPoints.length-4]*l);var c=l*this.getSubSymbolScaleValue()*.8,S=p-c,y=p+c;if((u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(S,e)).bfind){var h,f=u.pts,g=[];if(0===(s=u.index))g.push(e[0]);else for(h=0;h<s;h++)g.push(e[h]);if(g.push(f),(u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(y,e)).bfind){var M=u.pts;s=u.index;var b=[];for(b.push(M),h=s+1;h<e.length;h++)b.push(e[h]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b);var d=SuperMap.Plot.PlottingUtil.radian(f,M)*this.RTOD,m=SuperMap.Plot.PlottingUtil.distance(f,M),v=new SuperMap.Geometry.Point((f.x+M.x)/2,(f.y+M.y)/2);this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],v,m,d);var O=l*this.getScaleValues()[4*a+1]/1.667;if(!(g.length<2)){var L=g[0],U=g[1],_=SuperMap.Plot.PlottingUtil.radian(L,U)*this.RTOD,w=SuperMap.Plot.PlottingUtil.circlePoint(L,O,O,_+90),x=SuperMap.Plot.PlottingUtil.circlePoint(L,O,O,_+270),T=[];if(T.push(w),T.push(x),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,T),!(b.length<2)){var E=b[b.length-1],A=b[b.length-2],G=SuperMap.Plot.PlottingUtil.radian(E,A)*this.RTOD,C=SuperMap.Plot.PlottingUtil.circlePoint(E,O,O,G+90),V=SuperMap.Plot.PlottingUtil.circlePoint(E,O,O,G+270);(T=[]).push(C),T.push(V),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,T);var I=SuperMap.Plot.PlottingUtil.paraLine(e,O,!1),j=SuperMap.Plot.PlottingUtil.polylineDistance(I)/11,Y=j;for(h=0;h<11;h++)if((u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(Y-j,I)).bfind){var B=u.index,R=u.pts;if((u=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(Y,I)).bfind){var N=u.pts,D=u.index;if(h%2==0){var k=[];k.push(R);for(var z=B+1;z<=D;z++)k.push(I[z]);k.push(N),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,k,{surroundLineLimit:!0,lineColorLimit:!0,color:"#000000",strokeColor:"#000000",strokeOpacity:1})}Y+=j}}this.addScalePoint(P),this.addScalePoint(w)}}}}}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>2*this.controlPoints.length-1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(l),i=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(SuperMap.Plot.PlottingUtil.equalFuzzy(n,0)||SuperMap.Plot.PlottingUtil.equalFuzzy(i,0))return;if(2*(l.length-1)===t||2===l.length&&0===t){var r,a,p=-1,u=0;for(r=0;r<o.length-1;r++){var s=[];s.push(o[r]),s.push(o[r+1]);var P=SuperMap.Plot.PlottingUtil.projectPoint(e,o[r],o[r+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(P,s).isOnPolyLine){var c=SuperMap.Plot.PlottingUtil.distance(e,P);-1===p?(p=r,a=P,u=c):u>c&&(p=r,a=P,u=c)}}(-1===p||p>o.length-1)&&(p=0,a=o[0]);var S=0;for(r=0;r<p;r++)S+=SuperMap.Plot.PlottingUtil.distance(o[r],o[r+1]);var y=o[p],h=(S+=SuperMap.Plot.PlottingUtil.distance(y,a))/i;h>=.95&&(h=.95),h<=.05&&(h=.05),2===l.length?this.getScaleValues()[0]=h:this.getScaleValues()[2*t]=h}else if(2*l.length-1===t||2===l.length&&1===t){var f=1.667*SuperMap.Plot.PlottingUtil.distance(e,l[0])/n;2===l.length?this.getScaleValues()[1]=f:this.getScaleValues()[2*t-1]=f}else{var g=-1;g=t%2==0?Math.floor(t/2):Math.floor((t+1)/2);var M=(e.x-l[g].x)/n,b=(e.y-l[g].y)/n;this.getScaleValues()[2*t]=M,this.getScaleValues()[2*t+1]=b}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol39800=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol40100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.05),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(0>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e);if(!this.getIsEdit()){var n=this.getDefaultSubSymbolSize()/l;(n>.3||n<=0)&&(n=.3),this.getScaleValues()[0]=.5*n}var i=this.getScaleValues()[0],r=(this.getScaleValues()[1],l*i),a=l*this.getScaleValues()[2],p=l*this.getScaleValues()[3],u=new SuperMap.Geometry.Point(o.x+a,o.y+p),s=.6*r,P=new SuperMap.Geometry.Point(u.x+r,u.y),c=SuperMap.Plot.PlottingUtil.circlePoint(P,s,s,0),S=SuperMap.Plot.PlottingUtil.circlePoint(P,s,s,180),y=[];y.push(c),y.push(S),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y,{lineTypeLimit:!0});var h=SuperMap.Plot.PlottingUtil.circlePoint(P,s,s,90),f=SuperMap.Plot.PlottingUtil.circlePoint(P,s,s,270);(y=[]).push(h),y.push(f),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y,{lineTypeLimit:!0});var g=new SuperMap.Geometry.Point(u.x-r,u.y),M=SuperMap.Plot.PlottingUtil.circlePoint(g,.5*r,.5*r,270),b=SuperMap.Plot.PlottingUtil.circlePoint(g,r,r,240),d=SuperMap.Plot.PlottingUtil.circlePoint(g,r,r,90),m=SuperMap.Plot.PlottingUtil.circlePoint(g,r,r,300);(y=[]).push(M),y.push(b),y.push(d),y.push(m),y.push(M),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y,{lineTypeLimit:!0}),this.clearScalePoints();var v=SuperMap.Plot.PlottingUtil.circlePoint(u,r,r,0);this.addScalePoint(v),this.addScalePoint(u)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=[];if(3>=this.controlPoints.length?o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),0>(o=SuperMap.Plot.PlottingUtil.clearSamePts(o)).length)return;var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);if(0===t){var r=n*this.getScaleValues()[2],a=n*this.getScaleValues()[3],p=new SuperMap.Geometry.Point(i.x+r,i.y+a),u=SuperMap.Plot.PlottingUtil.distance(e,p)/n;this.getScaleValues()[0]=u}else if(1===t){var s=(e.x-i.x)/n,P=(e.y-i.y)/n;this.getScaleValues()[2]=s,this.getScaleValues()[3]=P}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol40100=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol40101",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.05),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(0>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e);if(!this.getIsEdit()){var n=this.getDefaultSubSymbolSize()/l;(n>.3||n<=0)&&(n=.3),this.getScaleValues()[0]=.5*n}var i=this.getScaleValues()[0],r=(this.getScaleValues()[1],l*i),a=l*this.getScaleValues()[2],p=l*this.getScaleValues()[3],u=new SuperMap.Geometry.Point(o.x+a,o.y+p),s=[];s.push(u),s.push(new SuperMap.Geometry.Point(u.x+r,u.y)),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,s,{fillLimit:!0,fillStyle:0,lineTypeLimit:!0,surroundLineLimit:!0});for(var P=5*r,c=new SuperMap.Geometry.Point(u.x+P,u.y),S=[],y=135;y<180;y+=3)S.push(SuperMap.Plot.PlottingUtil.circlePoint(c,P,P,y));S.push(SuperMap.Plot.PlottingUtil.circlePoint(c,P,P,180)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S,{lineTypeLimit:!0,surroundLineLimit:!0}),this.clearScalePoints();var h=SuperMap.Plot.PlottingUtil.circlePoint(u,r,r,0);this.addScalePoint(h),this.addScalePoint(u)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=[];if(3>=this.controlPoints.length?o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),0>(o=SuperMap.Plot.PlottingUtil.clearSamePts(o)).length)return;var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);if(0===t){var r=n*this.getScaleValues()[2],a=n*this.getScaleValues()[3],p=new SuperMap.Geometry.Point(i.x+r,i.y+a),u=SuperMap.Plot.PlottingUtil.distance(e,p)/n;this.getScaleValues()[0]=u}else if(1===t){var s=(e.x-i.x)/n,P=(e.y-i.y)/n;this.getScaleValues()[2]=s,this.getScaleValues()[3]=P}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol40101=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(7)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol4022100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol4022100=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(7)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol4022101",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(SuperMap.Plot.PlottingUtil.clearSamePts(t),!(t.length<this.minEditPts)){4>this.getScaleValues().length&&(this.getScaleValues().push(.05),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];3>=t.length?e=e.concat(SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t)):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e);var l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),o=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[0]=2*this.getSubSymbolScaleValue());var n=this.getScaleValues()[0],i=(this.getScaleValues()[1],this.getScaleValues()[2]),r=this.getScaleValues()[3],a=o*n,p=new SuperMap.Geometry.Point(l.x+o*i,l.y+o*r);this.getSubSymbols()&&null!==this.getSubSymbols()&&this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],p,a,0);var u=o*this.getScaleValues()[0]*.5,s=new SuperMap.Geometry.Point(p.x+2*u,p.y+u),P=new SuperMap.Geometry.Point(p.x+2*u,p.y-u),c=[];c.push(s),c.push(P),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c),this.addArrow1(c),this.addScalePoint(p);var S=a,y=SuperMap.Plot.PlottingUtil.circlePoint(p,S,S,90);this.addScalePoint(y)}}},{key:"addArrow1",value:function(t){if(0!==t.length){var e=.5,l=SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints)*(e=(this.getIsEdit(),.6*this.getSubSymbolScaleValue())),o=t[t.length-2],n=t[t.length-1],i=l,r=SuperMap.Plot.PlottingUtil.radian(o,n)*this.RTOD,a=SuperMap.Plot.PlottingUtil.circlePoint(n,i,i,r+157.5),p=SuperMap.Plot.PlottingUtil.circlePoint(n,i,i,r+202.5),u={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[a,t[t.length-1],p],u,!0)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol4022101=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(7)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol4022102",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(SuperMap.Plot.PlottingUtil.clearSamePts(t),!(t.length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.05),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];3>=t.length?e=e.concat(SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t)):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e);var l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),o=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[0]=2*this.getSubSymbolScaleValue());var n=this.getScaleValues()[0],i=(this.getScaleValues()[1],this.getScaleValues()[2]),r=this.getScaleValues()[3],a=o*n,p=new SuperMap.Geometry.Point(l.x+o*i,l.y+o*r);this.getSubSymbols()&&null!==this.getSubSymbols()&&this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],p,a,0);var u=o*this.getScaleValues()[0]*.5,s=new SuperMap.Geometry.Point(p.x+2*u,p.y+u),P=new SuperMap.Geometry.Point(p.x+2*u,p.y-u),c=[];c.push(P),c.push(s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c),this.addArrow1(c),this.addScalePoint(p);var S=a,y=SuperMap.Plot.PlottingUtil.circlePoint(p,S,S,90);this.addScalePoint(y)}}},{key:"addArrow1",value:function(t){if(0!==t.length){var e=.5,l=SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints)*(e=(this.getIsEdit(),.6*this.getSubSymbolScaleValue())),o=t[t.length-2],n=t[t.length-1],i=l,r=SuperMap.Plot.PlottingUtil.radian(o,n)*this.RTOD,a=SuperMap.Plot.PlottingUtil.circlePoint(n,i,i,r+157.5),p=SuperMap.Plot.PlottingUtil.circlePoint(n,i,i,r+202.5),u={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[a,t[t.length-1],p],u,!0)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol4022102=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(107)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol40900",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[],l=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(this.clearScalePoints(),t.length<3)e.push(t[0]),e.push(t[1]);else{var o=SuperMap.Plot.PlottingUtil.computeBeizerPoints(this.getIsEdit(),t,this.getScaleValues());this.setScaleValues(o.scaleValues);for(var n=0;n<o.scalePoints.length;n++)this.addScalePoint(o.scalePoints[n]);e=o.beizerPoints}SuperMap.Plot.PlottingUtil.clearSamePts(e);var i=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){this.getScaleValues().push(.5),this.getScaleValues()[1]=this.getSubSymbolScaleValue();A=this.getSubSymbolScaleValue();this.getScaleValues().push(A)}if(!(e.length<=0)){var r;r=2===t.length?0:t.length-1;var a;this.getIsEdit()?a=i*this.getScaleValues()[4*r]:(this.getScaleValues()[4*this.controlPoints.length-4]=.5,a=i*this.getScaleValues()[4*this.controlPoints.length-4]);var p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a,e);if(p.bfind){var u=p.index,s=p.pts;this.getIsEdit()||(this.getScaleValues()[4*this.controlPoints.length-4]=.5,this.getScaleValues()[4*this.controlPoints.length-3]=this.getSubSymbolScaleValue(),a=this.getScaleValues()[4*this.controlPoints.length-4]*i);var P=l*this.getSubSymbolScaleValue()*.8,c=a-P,S=a+P;if((p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(c,e)).bfind){var y,h=p.pts,f=[];if(0==(u=p.index))f.push(e[0]);else for(y=0;y<u;y++)f.push(e[y]);if(f.push(h),(p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(S,e)).bfind){var g=p.pts;u=p.index;var M=[];for(M.push(g),y=u+1;y<e.length;y++)M.push(e[y]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[s,g]);var b=l*this.getScaleValues()[4*r+1]/1.667;if(!(f.length<2)){var d=f[0],m=f[1],v=SuperMap.Plot.PlottingUtil.radian(d,m)*this.RTOD,O=SuperMap.Plot.PlottingUtil.circlePoint(d,b,b,v+90),L=SuperMap.Plot.PlottingUtil.circlePoint(d,b,b,v+270),U=[];if(U.push(O),U.push(L),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U),!(M.length<2)){var _=M[M.length-1],w=M[M.length-2],x=SuperMap.Plot.PlottingUtil.radian(_,w)*this.RTOD,T=SuperMap.Plot.PlottingUtil.circlePoint(_,b,b,x+90),E=SuperMap.Plot.PlottingUtil.circlePoint(_,b,b,x+270);if((U=[]).push(T),U.push(E),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U),!this.getIsEdit()){this.getScaleValues().push(.5);var A=1.667*b/l;this.getScaleValues().push(A)}this.addScalePoint(s),this.addScalePoint(O)}}}}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol40900=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol41100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=99999,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(.05),l.getScaleValues().push(-2.5)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){if(3>this.getScaleValues().length&&(this.getScaleValues().push(.05),this.getScaleValues().push(.05),this.getScaleValues().push(-2.5)),!this.getIsEdit()||3==this.getScaleValues().length){for(p=0;p<t.length;p++)this.getScaleValues().push(0);var e=this.getSubSymbolScaleValue();this.getScaleValues().push(.8*e),this.getScaleValues().push(e),this.getScaleValues().push(-1.5)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var l,o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=this.getScaleValues().length,i=o*this.getScaleValues()[n-3],r=this.getScaleValues()[0];if(0==r)l=(A=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,t[1],t[0])).pntRight;else if(1==r)l=(A=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,t[1],t[0])).pntLeft;else{if(2!=r)return;l=t[0]}var a=[];if(a.push(t[0]),a.push(l),this.addScalePoint(l),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,a),t.length>this.minEditPts){for(var p=1;p<t.length-1;p++){var u,s=this.getScaleValues()[p];if(0==s){for(var P=t[p],c=t[p+1],S=t[p-1],y=180*SuperMap.Plot.PlottingUtil.radian(P,c)/Math.PI,h=(M=180*SuperMap.Plot.PlottingUtil.radian(P,S)/Math.PI)-y;h<0;)h+=360;var f=h/2,g=t[p+1].clone();this._rotate(f,g,P),u=SuperMap.Plot.PlottingUtil.linePnt(P,g,i)}else if(1==s){for(var P=t[p],c=t[p+1],S=t[p-1],y=180*SuperMap.Plot.PlottingUtil.radian(P,c)/Math.PI,M=180*SuperMap.Plot.PlottingUtil.radian(P,S)/Math.PI,h=M-y;h<0;)h+=360;var f=180-h/2,g=t[p-1].clone();this._rotate(f,g,P),u=SuperMap.Plot.PlottingUtil.linePnt(P,g,i)}else{if(2!=s)continue;u=t[p]}(Y=[]).push(t[p]),Y.push(u),this.addScalePoint(u),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,Y)}var b=t.length,d=this.getScaleValues()[b-1];if(0==d)m=(V=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,t[b-2],t[b-1])).pntLeft,v=(L=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*i,t[b-2],t[b-1])).pntLeft;else if(1==d)m=(V=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,t[b-2],t[b-1])).pntRight,v=(L=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*i,t[b-2],t[b-1])).pntRight;else{if(2!=d)return;m=t[b-1].clone(),v=t[b-1].clone()}(Y=[]).push(t[b-1]),Y.push(m),this.addScalePoint(m),this.addScalePoint(v),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,Y)}else{var m,v,O=this.getScaleValues()[1];if(0==O)m=(V=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,t[0],t[1])).pntLeft,v=(L=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*i,t[0],t[1])).pntLeft;else if(1==O){m=(V=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,t[0],t[1])).pntRight;var L=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*i,t[0],t[1]);v=L.pntRight}else{if(2!=O)return;m=t[1].clone(),v=t[1].clone()}(Y=[]).push(t[1]),Y.push(m),this.addScalePoint(m),this.addScalePoint(v),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,Y)}var U,_=this.getScaleValues().length,w=this.getScaleValues()[_-2],x=Math.abs(o*w),T=this.getScaleValues()[_-1],E=Math.abs(i*T),A=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,x);if(-1!==A.index){var G=A.index,C=A.pt;if(T>=0)U=(V=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(E,t[G],C)).pntRight;else{var V=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(E,t[G],C);U=V.pntLeft}var I=SuperMap.Plot.PlottingUtil.linePnt(C,U,E),j=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(i,C,I).pntRight,Y=[];Y.push(C),Y.push(I),Y.push(j),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,Y),this.addScalePoint(I)}}}},{key:"_rotate",value:function(t,e,l){t*=Math.PI/180;var o=SuperMap.Plot.PlottingUtil.distance(e,l),n=t+Math.atan2(e.y-l.y,e.x-l.x);return e.x=l.x+o*Math.cos(n),e.y=l.y+o*Math.sin(n),e}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=l.length,i=e;if(t>=0&&t<n){var r=!1;if(0==t)r=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t],l[t+1],i);else if(t==n-1)r=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t-1],l[t],i);else{var a=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t-1],l[t],l[t+1]),p=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t-1],l[t],i);if(a!=p)r=p;else{var u=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t],l[t+1],i);r=u==p?p:u}}this.getScaleValues()[t]=r?1:0}else if(t==n){var s=SuperMap.Plot.PlottingUtil.distance(l[n-1],i),P=(s/=2)/o;this.getScaleValues()[t]=P}else if(t===n+1||t===n+2){for(var c=-1,S=0,y=new SuperMap.Geometry.Point(0,0),h=0;h<l.length-1;h++){var f=[];f.push(l[h]),f.push(l[h+1]);var g=SuperMap.Plot.PlottingUtil.projectPoint(i,l[h],l[h+1]);if(-1!==SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(g,f).index){var M=SuperMap.Plot.PlottingUtil.distance(i,g);-1===c?(c=h,y=g,S=M):S>M&&(c=h,y=g,S=M)}}-1===c&&Math.ceil(e.x,1)<=Math.ceil(l[0].x,1)?(c=0,y=l[0]):-1===c&&c===l[l.length-2]&&(c=0,y=l[0]),-1===c&&Math.ceil(e.x,1)>=Math.ceil(l[l.length-1].x,1)?(c=l.length-1,y=l[l.length-1]):-1!==c&&c!==l.length-1||(c=l.length-1,y=l[l.length-1]);for(var b=0,h=0;h<c;h++){var d=l[h],m=l[h+1];b+=SuperMap.Plot.PlottingUtil.distance(d,m)}var v=(b+=SuperMap.Plot.PlottingUtil.distance(l[c],y))/o;this.getScaleValues()[n+1]=v;var O,L=this.getScaleValues().length,s=o*this.getScaleValues()[L-3];O=(void 0===l[c+1]?SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[c-1],l[c],i):SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[c],l[c+1],i))?S/s:-Math.abs(S/s),this.getScaleValues()[n+2]=O}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol41100=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol41200",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=0,l.getScaleValues()[1]=0,l.getScaleValues()[2]=.1),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues()[0]=0,this.getScaleValues()[1]=0,this.getScaleValues()[2]=.1);var e=SuperMap.Plot.PlottingUtil.getOutRectangleDis(t);if(!this.getIsEdit()){var l=this.getSubSymbolScaleValue()*SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints);this.getScaleValues()[2]=l/e}var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2];2==t.length?this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t):this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t,{fill:!1});var r=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),a=new SuperMap.Geometry.Point(r.x+o*e,r.y+n*e),p=i*e,u=new SuperMap.Geometry.Point(a.x,a.y),s=new SuperMap.Geometry.Point(a.x-p,a.y-p),P=new SuperMap.Geometry.Point(a.x+p,a.y-p),c=new SuperMap.Geometry.Point(a.x-p,a.y+p),S=new SuperMap.Geometry.Point(a.x+p,a.y+p),y=[];y.push(u),y.push(s),y.push(P),y.push(u),y.push(c),y.push(S),y.push(u),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y,{lineTypeLimit:!0,surroundLineLimit:!0}),this.clearScalePoints(),this.addScalePoint(a);var h=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,90);this.addScalePoint(h)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.getOutRectangleDis(l);if(0==o)return;var n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l),i=e;if(0==t){r=(i.x-n.x)/o;this.getScaleValues()[0]=r;a=(i.y-n.y)/o;this.getScaleValues()[1]=a}else if(1==t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(n.x+r*o,n.y+a*o),u=SuperMap.Plot.PlottingUtil.distance(i,p)/o;this.getScaleValues()[2]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol41200=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol41201",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=0,l.getScaleValues()[1]=0,l.getScaleValues()[2]=.1),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<3&&(this.getScaleValues()[0]=0,this.getScaleValues()[1]=0,this.getScaleValues()[2]=.1);var e=SuperMap.Plot.PlottingUtil.getOutRectangleDis(t);if(0!=e){if(!this.getIsEdit()){var l=this.getSubSymbolScaleValue()*SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints);this.getScaleValues()[2]=l/e}var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2];2==t.length?this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t):this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t,{fill:!1});var r=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),a=new SuperMap.Geometry.Point(r.x+o*e,r.y+n*e),p=i*e,u=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,90),s=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,210),P=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,330),c=[];c.push(u),c.push(s),c.push(P),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,c,{fill:!1,lineTypeLimit:!0,surroundLineLimit:!0}),this.clearScalePoints(),this.addScalePoint(a);var S=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,90);this.addScalePoint(S)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.getOutRectangleDis(l);if(0==o)return;var n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l),i=e;if(0==t){r=(i.x-n.x)/o;this.getScaleValues()[0]=r;a=(i.y-n.y)/o;this.getScaleValues()[1]=a}else if(1==t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(n.x+r*o,n.y+a*o),u=SuperMap.Plot.PlottingUtil.distance(i,p)/o;this.getScaleValues()[2]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol41201=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol41202",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues()[0]=0,l.getScaleValues()[1]=0,l.getScaleValues()[2]=.1),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<3&&(this.getScaleValues()[0]=0,this.getScaleValues()[1]=0,this.getScaleValues()[2]=.1);var e=SuperMap.Plot.PlottingUtil.getOutRectangleDis(t);if(0!=e){if(!this.getIsEdit()){var l=this.getSubSymbolScaleValue()*SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints);this.getScaleValues()[2]=l/e}var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2];2==t.length?this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t):this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t,{fill:!1});var r=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),a=new SuperMap.Geometry.Point(r.x+o*e,r.y+n*e),p=i*e,u=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,270),s=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,30),P=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,150),c=[];c.push(u),c.push(s),c.push(P),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,c,{fill:!1,lineTypeLimit:!0,surroundLineLimit:!0}),this.clearScalePoints(),this.addScalePoint(a);var S=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,90);this.addScalePoint(S)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.getOutRectangleDis(l);if(0==o)return;var n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l),i=e;if(0==t){r=(i.x-n.x)/o;this.getScaleValues()[0]=r;a=(i.y-n.y)/o;this.getScaleValues()[1]=a}else if(1==t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(n.x+r*o,n.y+a*o),u=SuperMap.Plot.PlottingUtil.distance(i,p)/o;this.getScaleValues()[2]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol41202=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol42200",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(.1),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(0>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e);if(!this.getIsEdit()){var n=this.getDefaultSubSymbolSize()/l;(n>.3||n<=0)&&(n=.3),this.getScaleValues()[0]=n}var i=this.getScaleValues()[0],r=(this.getScaleValues()[1],l*this.getScaleValues()[2]),a=l*this.getScaleValues()[3],p=new SuperMap.Geometry.Point(o.x+r,o.y+a),u=l*i;this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],p,u,0),this.clearScalePoints(),this.addScalePoint(new SuperMap.Geometry.Point(o.x+r+u,o.y+a)),this.addScalePoint(new SuperMap.Geometry.Point(o.x+r,o.y+a))}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=[];if(3>=this.controlPoints.length?o=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),0>(o=SuperMap.Plot.PlottingUtil.clearSamePts(o)).length)return;var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);if(0==t){var r=n*this.getScaleValues()[2],a=n*this.getScaleValues()[3],p=new SuperMap.Geometry.Point(i.x+r,i.y+a),u=SuperMap.Plot.PlottingUtil.distance(e,p)/n;this.getScaleValues()[0]=u}else if(1==t){var s=(e.x-i.x)/n,P=(e.y-i.y)/n;this.getScaleValues()[2]=s,this.getScaleValues()[3]=P}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol42200=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol42500",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.285714),l.getScaleValues().push(.285714),l.getScaleValues().push(.5),l.getScaleValues().push(.333333),l.getScaleValues().push(.333333)),l.getStyle()&&!l.getIsEdit()&&(l.getStyle().color="#00ff00"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0==this.getScaleValues().length&&(this.getScaleValues().push(.285714),this.getScaleValues().push(.285714),this.getScaleValues().push(.5),this.getScaleValues().push(.333333));var e=t[0].clone(),l=t[1].clone(),o=SuperMap.Plot.PlottingUtil.distance(e,l),n=this.getScaleValues()[0],i=new SuperMap.Geometry.Point(0,-o*n),r=new SuperMap.Geometry.Point(0,o*n),a=this.getScaleValues()[1],p=this.getScaleValues()[3],u=new SuperMap.Geometry.Point(o*(1-p),-o*a),s=new SuperMap.Geometry.Point(o*(1-p),o*a),P=this.getScaleValues()[2],c=this.getScaleValues()[4],S=new SuperMap.Geometry.Point(o*(1-c),-o*P),y=new SuperMap.Geometry.Point(o*(1-c),o*P),h=new SuperMap.Geometry.Point(o,0),f=SuperMap.Plot.PlottingUtil.radian(e,l)*this.RTOD,g=[];g.push(r),g.push(s),g.push(y),g.push(h),g.push(S),g.push(u),g.push(i);for(var M=[],b=0;b<g.length;b++){var d=SuperMap.Plot.PlottingUtil.coordinateTrans(e,g[b],f);M.push(d)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M);var m=!0;e.x>l.x&&(m=!1);var v,O,L,U,_=(L=.1*o)+(O=.12*o/2);1==m?(v=(U=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(_,l,e)).pntRight,U.pntLeft):(v=(U=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(_,l,e)).pntLeft,U.pntRight);var w=[];w.push(v),w.push(new SuperMap.Geometry.Point(v.x+O,v.y)),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,w);var x,T,E,A;1==m?(x=(U=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.85*L,l,e)).pntRight,A=U.pntLeft,T=(U=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(L,x,A)).pntRight,E=U.pntLeft):(x=(U=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.85*L,l,e)).pntLeft,A=U.pntRight,T=(U=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(L,x,A)).pntLeft,E=U.pntRight),(w=[]).push(x),w.push(T),w.push(E),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,w,{fillLimit:!0,fillStyle:0});var G,C,V,I;U=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*O,T,E),I=1==m?U.pntRight:U.pntLeft,U=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*O,E,T),C=1==m?U.pntLeft:U.pntRight;var j=SuperMap.Plot.PlottingUtil.intersectLines(x,C,E,T);j.isIntersectLines&&(G=j.intersectPoint,(j=SuperMap.Plot.PlottingUtil.intersectLines(x,I,E,T)).isIntersectLines&&(V=j.intersectPoint,(w=[]).push(G),w.push(C),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,w),(w=[]).push(V),w.push(I),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,w),this.clearScalePoints(),this.addScalePoint(M[0]),this.addScalePoint(M[1]),this.addScalePoint(M[2])))}}},{key:"modifyPoint",value:function(t,e){if(e.isScalePoint&&(t>=0||t<3)){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]),n=l[0].clone(),i=l[1].clone(),r=e.clone();if(0==t){var a=SuperMap.Plot.PlottingUtil.distance(r,n)/o;this.getScaleValues()[0]=a}else if(1==t){var p=SuperMap.Plot.PlottingUtil.projectPoint(r,n,i),u=(P=SuperMap.Plot.PlottingUtil.distance(p,r))/o;this.getScaleValues()[1]=u;var s=(S=SuperMap.Plot.PlottingUtil.distance(p,i))/o;this.getScaleValues()[3]=s}else if(2==t){var p=SuperMap.Plot.PlottingUtil.projectPoint(r,n,i),P=SuperMap.Plot.PlottingUtil.distance(p,r),c=P/o;this.getScaleValues()[2]=c;var S=SuperMap.Plot.PlottingUtil.distance(p,i),y=S/o;this.getScaleValues()[4]=y}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol42500=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol44100",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.285714),l.getScaleValues().push(.105263),l.getScaleValues().push(.181818),l.getScaleValues().push(.285714),l.getScaleValues().push(.285714)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<5&&(this.getScaleValues().push(.285714),this.getScaleValues().push(.105263),this.getScaleValues().push(.181818),this.getScaleValues().push(.285714),this.getScaleValues().push(.285714));var e=t[0],l=t[1],o=SuperMap.Plot.PlottingUtil.distance(e,l),n=this.getScaleValues()[0],i=new SuperMap.Geometry.Point(0,-o*n),r=new SuperMap.Geometry.Point(0,o*n),a=this.getScaleValues()[1],p=this.getScaleValues()[3],u=new SuperMap.Geometry.Point(o*(1-p),-o*a),s=new SuperMap.Geometry.Point(o*(1-p),o*a),P=this.getScaleValues()[2],c=this.getScaleValues()[4],S=new SuperMap.Geometry.Point(o*(1-c),-o*P),y=new SuperMap.Geometry.Point(o*(1-c),o*P),h=new SuperMap.Geometry.Point(o,0),f=SuperMap.Plot.PlottingUtil.radian(e,l)*this.RTOD,g=[];g.push(r),g.push(u),g.push(S),g.push(h),g.push(y),g.push(s),g.push(i);for(var M=[],b=0;b<g.length;b++){var d=SuperMap.Plot.PlottingUtil.coordinateTrans(e,g[b],f);M.push(d)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M);var m=[],v=.06*o,O=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(v,l,e),L=O.pntRight,U=O.pntLeft;m.push(L),m.push(U),v=.15*o;var _=new SuperMap.Geometry.Point(v,0),w=SuperMap.Plot.PlottingUtil.coordinateTrans(e,_,f);m.push(w),m.push(L),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,m,{lineColorLimit:!0,color:"#0000FF",strokeOpacity:1,fillLimit:!0,fillStyle:0,fillColor:"#0000FF"}),this.clearScalePoints(),this.addScalePoint(M[0]),this.addScalePoint(M[1]),this.addScalePoint(M[2])}}},{key:"modifyPoint",value:function(t,e){if(e.isScalePoint&&(t>=0||t<3)){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]),n=l[0].clone(),i=l[1].clone(),r=e.clone();if(0==t){var a=SuperMap.Plot.PlottingUtil.distance(r,n)/o;this.getScaleValues()[0]=a}else if(1==t){var p=SuperMap.Plot.PlottingUtil.projectPoint(r,n,i),u=(P=SuperMap.Plot.PlottingUtil.distance(p,r))/o;this.getScaleValues()[1]=u;var s=(S=SuperMap.Plot.PlottingUtil.distance(p,i))/o;this.getScaleValues()[3]=s}else if(2==t){var p=SuperMap.Plot.PlottingUtil.projectPoint(r,n,i),P=SuperMap.Plot.PlottingUtil.distance(p,r),c=P/o;this.getScaleValues()[2]=c;var S=SuperMap.Plot.PlottingUtil.distance(p,i),y=S/o;this.getScaleValues()[4]=y}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol44100=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol2091503",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.1),l.getScaleValues().push(.03),l.getScaleValues().push(.5),l.getScaleValues().push(.03)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){if(!this.getIsEdit()){var e=this.getSubSymbolScaleValue();this.getScaleValues()[0]=e,this.getScaleValues()[1]=.5*e,this.getScaleValues()[3]=.5*e}var l=this.getScaleValues()[0],o=this.getScaleValues()[1],n=this.getScaleValues()[2],i=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);i=SuperMap.Plot.PlottingUtil.clearSamePts(i);var r=this.GetCurvePts(t,l,o);if(0!==r.pt.length){var a=SuperMap.Plot.PlottingUtil.polylineDistance(i)*n,p=SuperMap.Plot.PlottingUtil.findPointInPolyLine(i,a);if(-1!==p.index){for(var u=SuperMap.Plot.PlottingUtil.polylineDistance(t)*this.getScaleValues()[3],s=[],P=0;P<360;P+=12)s.push(SuperMap.Plot.PlottingUtil.circlePoint(p.pt,u,u,P));s.push(s[0]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s);for(var c=[],S=[],P=0;P<r.pt.length;P++)SuperMap.Plot.PlottingUtil.ptIsInPolygon(s,r.pt[P])?S.length>1&&(c.push(S),S=[]):S.push(r.pt[P]);S.length>1&&c.push(S);for(P=0;P<c.length;P++)this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c[P]);var y=[],h=new SuperMap.Geometry.Point(p.pt.x-u,p.pt.y),f=new SuperMap.Geometry.Point(p.pt.x+.5*u,p.pt.y);y.push(h,f),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y);var g=[],M=SuperMap.Plot.PlottingUtil.circlePoint(f,.3*u,.3*u,157.5),b=SuperMap.Plot.PlottingUtil.circlePoint(f,.3*u,.3*u,202.5);g.push(M),g.push(b),g.push(f);var d={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,g,d);var m=new SuperMap.Geometry.Point(r.pt[0].x,r.pt[0].y);m.isScalePoint=!0,m.tag=0,this.addScalePoint(m);var v=new SuperMap.Geometry.Point(r.scalePt.x,r.scalePt.y);v.isScalePoint=!0,v.tag=1,this.addScalePoint(v);var O=new SuperMap.Geometry.Point(p.pt.x,p.pt.y);O.isScalePoint=!0,O.tag=2,this.addScalePoint(O);var L=SuperMap.Plot.PlottingUtil.circlePoint(new SuperMap.Geometry.Point(p.pt.x,p.pt.y),u,u,0),U=new SuperMap.Geometry.Point(L.x,L.y);U.isScalePoint=!0,U.tag=3,this.addScalePoint(U)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;if(4>this.getScaleValues().length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l),i=new SuperMap.Geometry.Point(e.x,e.y);if(0===t){var r=new SuperMap.Geometry.Point(l[0].x,l[0].y),a=SuperMap.Plot.PlottingUtil.distance(r,i),p=2*a/o;this.getScaleValues()[1]=p}else if(1===t){r=new SuperMap.Geometry.Point(l[0].x,l[0].y);c=(a=SuperMap.Plot.PlottingUtil.distance(r,i))/o;this.getScaleValues()[0]=c}else if(2==t){for(var u=-1,s=0,P=new SuperMap.Geometry.Point(0,0),c=this.getScaleValues()[0],p=this.getScaleValues()[1],S=0;S<n.length-1;S++){var y=n[S],h=n[S+1],f=SuperMap.Plot.PlottingUtil.projectPoint(i,y,h);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(f,y,h)){var g=SuperMap.Plot.PlottingUtil.distance(i,f);-1==u?(u=S,P=f,s=g):s>g&&(u=S,P=f,s=g)}}-1===u&&Math.ceil(e.x,1)<=Math.ceil(n[0].x,1)?(u=0,P=n[0]):-1===u&&u===n[n.length-2]&&(u=0,P=n[0]),-1===u&&Math.ceil(e.x,1)>=Math.ceil(n[n.length-1].x,1)?(u=n.length-1,P=n[n.length-1]):-1!==u&&u!==n.length-2||(u=n.length-1,P=n[n.length-1]);for(var M=SuperMap.Plot.PlottingUtil.polylineDistance(n),b=[],S=0;S<u;S++)b.push(n[S]);b.push(P);var d=SuperMap.Plot.PlottingUtil.polylineDistance(b);if(d<0||d>M)return;m=d/M;this.getScaleValues()[2]=m}else if(3===t){var c=this.getScaleValues()[0],p=this.getScaleValues()[1],m=this.getScaleValues()[2],v=(M=SuperMap.Plot.PlottingUtil.polylineDistance(n))*m;if(-1===(P=SuperMap.Plot.PlottingUtil.findPointInPolyLine(n,v)).index)return;var O=SuperMap.Plot.PlottingUtil.distance(P.pt,e)/o;this.getScaleValues()[3]=O}}this.calculateParts()}},{key:"GetCurvePts",value:function(t,e,l){for(var o,n=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t),i=SuperMap.Plot.PlottingUtil.polylineDistance(n),r=i*e,a=i*l/2,p=[],u=[],s=n[0],P=!1,c=n[0],S=1;S<n.length;S++){var y=n[S],h=SuperMap.Plot.PlottingUtil.distance(s,y);if(!(h<r&&S!==n.length-1)){for(var f,g=parseInt(h/r),M=0;M<g;M++){f=SuperMap.Plot.PlottingUtil.linePnt(s,y,r),P||(o=f,P=!0);var b=this.GetCosPts2D(s,f,r,a);p=u.length>1&&0===M?this.ClearCurvePts2D(c,s,y,u,b,p):p.concat(b),u=(u=[]).concat(b),c=s,s=f}S===n.length-1&&(f=n[n.length-1],b=this.GetCosPts2D(s,f,r,a),p=u.length>1&&b.length>1?this.ClearCurvePts2D(c,s,y,u,b,p):p.concat(b))}}return{pt:p,scalePt:o}}},{key:"GetCosPts2D",value:function(t,e,l,o){for(var n=[],i=SuperMap.Plot.PlottingUtil.distance(t,e),r=l/30,a=0;a<i;a+=r){var p=a*(2*Math.PI/l),u=o*Math.cos(p),s=new SuperMap.Geometry.Point(a,u),P=180*SuperMap.Plot.PlottingUtil.radian(t,e)/Math.PI,c=SuperMap.Plot.PlottingUtil.coordinateTrans(t,s,P);n.push(c)}return n}},{key:"ClearCurvePts2D",value:function(t,e,l,o,n,i){for(var r=180*SuperMap.Plot.PlottingUtil.radian(e,l)/Math.PI,a=180*SuperMap.Plot.PlottingUtil.radian(e,t)/Math.PI-r;a<=0;)a+=360;var p=a/2,u=l;u=SuperMap.Plot.PlottingUtil.rotateAngle(e,p*Math.PI/180,u);for(var s=SuperMap.Plot.PlottingUtil.linePnt(e,u,1),P=0,c=0;c<o.length;c++)if(SuperMap.Plot.PlottingUtil.pointIsRightToLine(e,s,o[c])){P=c;break}if(0!=P)for(var S=0;S<o.length-P;S++)i.slice(S,i.length-1);for(c=0;c<n.length;c++)SuperMap.Plot.PlottingUtil.pointIsRightToLine(e,s,n[c])&&i.push(n[c]);return i}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol2091503=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol2092101",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999999,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(.03)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=this.getScaleValues()[0];this.getIsEdit()||(this.getScaleValues()[1]=this.getSubSymbolScaleValue());var o=this.getScaleValues()[1]*e,n=l*e,i=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,n);if(-1!==i.index){var r=i.pt,a=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[r,new SuperMap.Geometry.Point(r.x+o,r.y)]);a.push(a[0]);for(g=0;g<t.length-1;g++){var p=t[g],u=t[g+1],s=SuperMap.Plot.PlottingUtil.distance(r,p),P=SuperMap.Plot.PlottingUtil.distance(r,u);if(!(s<o&&P<o))if(s>o&&P<o||s<o&&P>o){var c;c=s>o?p:u,(y=this.getLineAddCircleIntersectPts(p,u,a)).length>0&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[y[0],c])}else{var S=SuperMap.Plot.PlottingUtil.projectPoint(r,p,u);if(SuperMap.Plot.PlottingUtil.distance(r,S)>=o)this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[p,u]);else if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(S,p,u)){var y=this.getLineAddCircleIntersectPts(p,u,a);if(y.length>0){y.unshift(p),y.push(u);for(var h=0;h<y.length-1;h++)this.isLineInCircle(y[h],y[h+1],r,o)||this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[y[h],y[h+1]])}}else this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[p,u])}}this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[r,new SuperMap.Geometry.Point(r.x+o,r.y)]);var f;if(f=i.index>=t.length-1?SuperMap.Plot.PlottingUtil.radian(t[t.length-2],t[t.length-1])*this.RTOD:SuperMap.Plot.PlottingUtil.radian(t[i.index],t[i.index+1])*this.RTOD,this.getSubSymbols().length>0){if(null!==this.getSubSymbols()[0].symbolData)for(var g=0;g<this.getSubSymbols()[0].symbolData.innerCells.length;g++)26===this.getSubSymbols()[0].symbolData.innerCells[g].type&&this.getSubSymbols()[0].symbolData.innerCells.splice(g,1);this.computeSubSymbol(this.getSubSymbols()[0],r,o,f)}this.clearScalePoints();var M=r;M.isScalePoint=!0,M.tag=0,this.addScalePoint(M);var b=new SuperMap.Geometry.Point(r.x+o,r.y);b.isScalePoint=!0,b.tag=1,this.addScalePoint(b)}}}},{key:"isLineInCircle",value:function(t,e,l,o){var n=new SuperMap.Geometry.Point((t.x+e.x)/2,(t.y+e.y)/2);return o>SuperMap.Plot.PlottingUtil.distance(n,l)}},{key:"getLineAddCircleIntersectPts",value:function(t,e,l){for(var o=[],n=0;n<l.length-1;n++){var i=l[n],r=l[n+1],a=SuperMap.Plot.PlottingUtil.intersectLines(t,e,i,r);a.isIntersectLines&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(a.intersectPoint,t,e)&&SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(a.intersectPoint,i,r)&&o.push(a.intersectPoint)}for(var p=0;p<o.length-1;p++)SuperMap.Plot.PlottingUtil.isSamePt(o[p],o[p+1])&&(o.splice(p,1),p--);if(t.x>e.x){for(u=0;u<o.length&&u!=o.length-1;u++)if(o[u].x<o[u+1].x){s=o[u];o[u]=o[u+1],o[u+1]=s}}else if(t.x<e.x){for(u=0;u<o.length&&u!=o.length-1;u++)if(o[u].x>o[u+1].x){s=o[u];o[u]=o[u+1],o[u+1]=s}}else if(t.y>e.y){for(u=0;u<o.length&&u!=o.length-1;u++)if(o[u].y<o[u+1].y){s=o[u];o[u]=o[u+1],o[u+1]=s}}else if(t.y<e.y)for(var u=0;u<o.length&&u!=o.length-1;u++)if(o[u].y>o[u+1].y){var s=o[u];o[u]=o[u+1],o[u+1]=s}return o}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t){for(var n=0,i=-1,r=null,a=0;a<l.length-1;a++){var p=SuperMap.Plot.PlottingUtil.pointProjectToSegment(e,l[a],l[a+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(p.projectPoint,l[a],l[a+1])){var u=SuperMap.Plot.PlottingUtil.distance(p.projectPoint,e);0==n?(n=u,i=a,r=p.projectPoint):u<n&&(n=u,i=a,r=p.projectPoint)}}if(-1==i)return void this.calculateParts();for(var s=0,a=0;a<i;a++)s+=SuperMap.Plot.PlottingUtil.distance(l[a],l[a+1]);var P=(s+=SuperMap.Plot.PlottingUtil.distance(r,l[i]))/o;P>1&&(P=1),this.getScaleValues()[0]=P}if(1===t){var c=this.getScaleValues()[0]*o,S=SuperMap.Plot.PlottingUtil.findPointInPolyLine(l,c);if(-1===S.index)return void this.calculateParts();var y=SuperMap.Plot.PlottingUtil.distance(S.pt,e)/o;y>.4&&(y=.4),this.getScaleValues()[1]=y}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol2092101=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol2121504",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),0===l.getScaleValues().length&&l.getScaleValues().push(.05),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=t[0],l=t[1],o=SuperMap.Plot.PlottingUtil.distance(e,l),n=o*this.getScaleValues()[0],i=SuperMap.Plot.PlottingUtil.linePnt(e,l,.5*o),r=SuperMap.Plot.PlottingUtil.linePnt(i,e,2*n),a=SuperMap.Plot.PlottingUtil.linePnt(i,l,2*n),p=[];p.push(t[0],r);var u=[];u.push(a,t[1]);var s=SuperMap.Plot.PlottingUtil.paraLine(p,n,!0),P=SuperMap.Plot.PlottingUtil.paraLine(p,n,!1),c=SuperMap.Plot.PlottingUtil.paraLine(u,n,!0),S=SuperMap.Plot.PlottingUtil.paraLine(u,n,!1);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S);var y=SuperMap.Plot.PlottingUtil.radian(e,l)*this.RTOD,h=.5*SuperMap.Plot.PlottingUtil.distance(r,a);this.getSubSymbols().length>=0&&this.computeSubSymbol(this.getSubSymbols()[0],i,h,y),this.addScalePoint(s[0],0)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]);if(0===t){var n=SuperMap.Plot.PlottingUtil.distance(e,l[0])/o;n>.24&&(n=.24),this.getScaleValues()[0]=n}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol2121504=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(8)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="墩",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol2121506",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol2121506=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(8)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="复",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol2121507",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol2121507=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21216",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(1),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=t[0].clone(),l=t[1].clone(),o=SuperMap.Plot.PlottingUtil.distance(e,l),n=.05*o,i=SuperMap.Plot.PlottingUtil.paraLine(t,.5*n,!0);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,i);var r=[];r=r.concat(i);for(var a=SuperMap.Plot.PlottingUtil.polylineDistance(r),p=50*this.getSubSymbolScaleValue(),u=a*p*.02,s=a*p*.005,P=.1*a,c=.1*o,S=0;S<=a;S+=P){var y=SuperMap.Plot.PlottingUtil.findPointInPolyLine(r,S+c);if(-1!==y.index){var h,f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(u,r[y.index],y.pt);h=this.getScaleValues()[0]>0?new SuperMap.Geometry.Point(f.pntLeft.x,f.pntLeft.y):new SuperMap.Geometry.Point(f.pntRight.x,f.pntRight.y);var g=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(s,h,y.pt),M=[];if(M.push(g.pntRight),M.push(h),M.push(g.pntLeft),0===S){var b=new SuperMap.Geometry.Point(h.x,h.y);b.isScalePoint=!0,b.tag=0,this.addScalePoint(b)}var d={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,M,d)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint&&0===t){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),o=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[0],l[1],e);this.getScaleValues()[0]=o?-1:1}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol21216=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(24)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="障",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol2121602",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol2121602=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol21221",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getKendyShapePts(t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(3>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.POLYBEZIERCLOSESYMBOL,e);for(var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=e[0].x,n=e[0].x,i=e[0].y,r=e[0].y,a=(new SuperMap.Geometry.Point(e[0].x,e[0].y),new SuperMap.Geometry.Point(e[0].x,e[0].y),[]),p=0;p<e.length;p++)o>e[p].x&&(o=e[p].x,new SuperMap.Geometry.Point(e[p].x,e[p].y)),n<e[p].x&&(n=e[p].x,new SuperMap.Geometry.Point(e[p].x,e[p].y)),i>e[p].y&&(i=e[p].y),r<e[p].y&&(r=e[p].y),a.push(e[p]);for(var u=(n-o)/5,s=.2*u,P=[],p=0;p<360;p+=18){var c=SuperMap.Plot.PlottingUtil.circlePoint(new SuperMap.Geometry.Point(0,0),s,s,p);P.push(c)}for(var S=0,y=o;y<n;y+=u)for(var h=i;h<r;h+=u){var f=new SuperMap.Geometry.Point(y,h);if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(a,f))if(0===S){if(S=0,this.getSubSymbols().length>=0){g=.015*l;this.computeSubSymbol(this.getSubSymbols()[0],f,g,0),!0===this.getSubSymbols()[0].fillLimit&&(this.getSubSymbols()[0].fillColor="#332323")}S++}else if(S=0,this.getSubSymbols().length>=0){var g=.015*l;this.computeSubSymbol(this.getSubSymbols()[1],f,g,0)}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol21221=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol2122101",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getKendyShapePts(t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(2>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.POLYBEZIERCLOSESYMBOL,e);for(var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=e[0].x,n=e[0].x,i=e[0].y,r=e[0].y,a=(new SuperMap.Geometry.Point(e[0].x,e[0].y),new SuperMap.Geometry.Point(e[0].x,e[0].y),[]),p=0;p<e.length;p++)o>e[p].x&&(o=e[p].x,new SuperMap.Geometry.Point(e[p].x,e[p].y)),n<e[p].x&&(n=e[p].x,new SuperMap.Geometry.Point(e[p].x,e[p].y)),i>e[p].y&&(i=e[p].y),r<e[p].y&&(r=e[p].y),a.push(e[p]);var u=(n-o)/5;u>10&&(u=10);for(var s=.2*u,P=[],p=0;p<360;p+=18){var c=SuperMap.Plot.PlottingUtil.circlePoint(new SuperMap.Geometry.Point(0,0),s,s,p);P.push(c)}for(var S=0,y=o;y<n;y+=u)for(var h=i;h<r;h+=u){var f=new SuperMap.Geometry.Point(y,h);if(SuperMap.Plot.PlottingUtil.ptIsInPolygon(a,f))if(0===S){S++;for(var g=[],p=0;p<P.length;p++){var M=new SuperMap.Geometry.Point(f.x+P[p].x,f.y+P[p].y);g.push(M)}g.push(g[0]),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,g);var b=[];b.push(g[10]),b.push(new SuperMap.Geometry.Point(g[10].x-.5*s,g[10].y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b);var d=[];d.push(g[0]),d.push(new SuperMap.Geometry.Point(g[0].x+.5*s,g[10].y)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d)}else if(1===S){if(S++,null!==this.getSubSymbols()[0]){m=.015*l;this.computeSubSymbol(this.getSubSymbols()[0],f,m,0)}}else if(S=0,null!==this.getSubSymbols()[1]){var m=.015*l;this.computeSubSymbol(this.getSubSymbols()[1],f,m,0)}}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol2122101=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol2122301",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(.5),l.getScaleValues().push(.4)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]),l=e*this.getScaleValues()[0],o=this.getScaleValues()[1],n=this.getScaleValues()[2]*e,i=SuperMap.Plot.PlottingUtil.linePnt(t[0],t[1],e*o),r=SuperMap.Plot.PlottingUtil.distance(t[1],i),a=SuperMap.Plot.PlottingUtil.linePnt(t[1],i,r+.45*n),p=SuperMap.Plot.PlottingUtil.linePnt(t[0],t[1],e-r+.45*n),u=2*l,s=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(u,t[1],a),P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(u,t[0],p),c=SuperMap.Plot.PlottingUtil.paraLine(t,l,!0),S=SuperMap.Plot.PlottingUtil.paraLine(t,l,!1),y=e-r-n/2,h=SuperMap.Plot.PlottingUtil.linePnt(c[0],c[c.length-1],y),f=SuperMap.Plot.PlottingUtil.linePnt(c[0],c[c.length-1],y+.2*n),g=SuperMap.Plot.PlottingUtil.linePnt(c[0],c[c.length-1],y+.8*n),M=SuperMap.Plot.PlottingUtil.linePnt(c[0],c[c.length-1],y+n),b={fillLimit:!0},d=[];d.push(c[0]),d.push(h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d,b);var m=[];m.push(s.pntRight),m.push(f),m.push(g),m.push(P.pntLeft),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m,b);var v=[];v.push(M),v.push(c[1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,v,b);var O=SuperMap.Plot.PlottingUtil.linePnt(S[0],S[S.length-1],y),L=SuperMap.Plot.PlottingUtil.linePnt(S[0],S[S.length-1],y+.2*n),U=SuperMap.Plot.PlottingUtil.linePnt(S[0],S[S.length-1],y+.8*n),_=SuperMap.Plot.PlottingUtil.linePnt(S[0],S[S.length-1],y+n),w=[];w.push(S[0]),w.push(O),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,w,b);var x=[];x.push(s.pntLeft),x.push(L),x.push(U),x.push(P.pntRight),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,x,b);var T=[];T.push(_),T.push(S[1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,T,b);var E=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l/2,h,c[0]);this.addScalePoint(E.pntLeft,0),this.addScalePoint(i,1)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t){var n=(i=SuperMap.Plot.PlottingUtil.distance(l[0],e))/o;this.getScaleValues()[0]=n}if(1===t){var i=SuperMap.Plot.PlottingUtil.distance(l[0],e);(n=i/o)>.8?n=.8:n<.2&&(n=.2),this.getScaleValues()[1]=n}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol2122301=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30008",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(.05),null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());var o=l*this.getScaleValues()[0],n=e[e.length-1];if(e.length>2){for(var i=-1,r=e.length-2;r>=0;r--)if(o<SuperMap.Plot.PlottingUtil.distance(n,e[r])){i=r;break}e.splice(i+1,e.length-i),e.push(n)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var a=e[e.length-2],p=e[e.length-1],u=o,s=180*SuperMap.Plot.PlottingUtil.radian(a,p)/Math.PI,P=SuperMap.Plot.PlottingUtil.circlePoint(p,u,u,s+157.5),c=SuperMap.Plot.PlottingUtil.circlePoint(p,u,u,s+202.5),S=[];S.push(P),S.push(n),S.push(c);var y={surroundLineFlag:!1,fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,S,y)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30008=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(4)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3000802",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3000802=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(4)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3000803",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3000803=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(11)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3000805",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3000805=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(11)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3000806",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3000806=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(4)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3000807",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=this.getLinePts(e,this.getScaleValues()[0]),i=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),r=SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)*this.RTOD,a=.8*SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt);this.getSubSymbols().length>=0&&(this.computeSubSymbol(this.getSubSymbols()[0],i,.3*a,r+90),this.computeSubSymbol(this.getSubSymbols()[1],i,a,r+180));for(var p=[],u=[],s=0;s<=n.startIndex;s++)p.push(e[s]);if(p.push(n.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),n.endIndex<=e.length){u.push(n.endPt);for(s=n.endIndex+1;s<=e.length-1;s++)u.push(e[s]);this.addArrow(u)}var P=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),c=SuperMap.Plot.PlottingUtil.circlePoint(P.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,r+90);this.addScalePoint(c,0)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3000807=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3000808",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999,0===l.getScaleValues().length&&l.getScaleValues().push(.05),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=this.getLinePts(e,this.getScaleValues()[0]),i=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),r=SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)*this.RTOD,a=.8*SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt);this.getSubSymbols().length>=0&&this.computeSubSymbol(this.getSubSymbols()[0],i,a,r+180);var p=[],u=new SuperMap.Geometry.Point(0,0);u.x=-a/6,u.y=a/3;var s=new SuperMap.Geometry.Point(0,0),P=SuperMap.Plot.PlottingUtil.rotateAngle(s,r*this.DTOR,u),c=new SuperMap.Geometry.Point(P.x+i.x,P.y+i.y);u.x=a/6,u.y=a/3;var S=SuperMap.Plot.PlottingUtil.rotateAngle(s,r*this.DTOR,u),y=new SuperMap.Geometry.Point(S.x+i.x,S.y+i.y);u.x=0,u.y=-a/3;var h=SuperMap.Plot.PlottingUtil.rotateAngle(s,r*this.DTOR,u),f=new SuperMap.Geometry.Point(h.x+i.x,h.y+i.y);p.push(c),p.push(y),p.push(f);var g={fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,p,g);for(var M=[],b=[],d=0;d<=n.startIndex;d++)M.push(e[d]);if(M.push(n.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M),n.endIndex<=e.length){b.push(n.endPt);for(d=n.endIndex+1;d<=e.length-1;d++)b.push(e[d]);this.addArrow(b)}var m=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),v=SuperMap.Plot.PlottingUtil.circlePoint(m.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,r+90);this.addScalePoint(v,0)}}},{key:"addArrow",value:function(t){if(t.length<2)return t;var e=0,l=SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints)*(e=(this.getIsEdit(),.5*this.getSubSymbolScaleValue())),o=t[t.length-1];if(t.length>2){for(var n=-1,i=t.length-2;i>=0;i--)if(l<SuperMap.Plot.PlottingUtil.distance(o,t[i])){n=i;break}t.splice(n+1,t.length-n),t.push(o)}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var r=t[t.length-2],a=t[t.length-1],p=l;if(void 0===r)return t;if(!(SuperMap.Plot.PlottingUtil.distance(r,a)<l)){var u=SuperMap.Plot.PlottingUtil.radian(r,a)*this.RTOD,s=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,u+157.5),P=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,u+202.5),c={surroundLineFlag:!1,fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[s,t[t.length-1],P],c)}}},{key:"getLinePts",value:function(t,e){var l={};if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"modifyPoint",value:function(t,e){if(0===t&&!0===e.isScalePoint){if(0!==t&&1!==t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o),r=2*SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.5?r:.5}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3000808=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(4)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3000809",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=this.getLinePts(e,this.getScaleValues()[0]),i=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),r=SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)*this.RTOD,a=.8*SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt);this.getSubSymbols().length>=0&&(this.computeSubSymbol(this.getSubSymbols()[0],i,a,r+180),this.computeSubSymbol(this.getSubSymbols()[1],i,.3*a,r+180));for(var p=[],u=[],s=0;s<=n.startIndex;s++)p.push(e[s]);if(p.push(n.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),n.endIndex<=e.length){u.push(n.endPt);for(s=n.endIndex+1;s<=e.length-1;s++)u.push(e[s]);this.addArrow(u)}var P=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),c=SuperMap.Plot.PlottingUtil.circlePoint(P.pts,l*this.getScaleValues()[0]*.5,l*this.getScaleValues()[0]*.5,r+90);this.addScalePoint(c,0)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3000809=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30009",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999999,0===l.getScaleValues().length&&(l.getScaleValues().push(-.04),l.getScaleValues().push(-.175),l.getScaleValues().push(.1)),null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[0]=.5*this.getSubSymbolScaleValue());var o=l*this.getScaleValues()[0],n=e[e.length-1];if(e.length>2){for(var i=-1,r=e.length-2;r>=0;r--)if(o<SuperMap.Plot.PlottingUtil.distance(n,e[r])){i=r;break}e.splice(i+1,e.length-i),e.push(n)}var a=e[e.length-2],p=e[e.length-1],u=o,s=180*SuperMap.Plot.PlottingUtil.radian(a,p)/Math.PI,P=SuperMap.Plot.PlottingUtil.circlePoint(p,u,u,s+157.5),c=SuperMap.Plot.PlottingUtil.circlePoint(p,u,u,s+202.5),S=[];S.push(P),S.push(n),S.push(c);var y={surroundLineFlag:!1,fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,S,y);var h=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(.8*u,p,a),f=SuperMap.Plot.PlottingUtil.circlePoint(h,u,u,s+90),g=SuperMap.Plot.PlottingUtil.circlePoint(h,u,u,s-90),M=[];M.push(f),M.push(g),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M);var b=SuperMap.Plot.PlottingUtil.getExcentrePointOnSegmentByScale(1.2*u,p,a),d=SuperMap.Plot.PlottingUtil.circlePoint(b,u,u,s+90),m=SuperMap.Plot.PlottingUtil.circlePoint(b,u,u,s-90),v=[];v.push(d),v.push(m),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,v)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30009=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30010",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),0===l.getScaleValues().length&&(l.getScaleValues().push(-.1),l.getScaleValues().push(-.1),l.getScaleValues().push(.1)),null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=this.getScaleValues()[0],l=this.getScaleValues()[1],o=this.getScaleValues()[2],n=SuperMap.Plot.PlottingUtil.getOutRectangleDis(t);if(0!==n){if(!this.getIsEdit()){var i=this.getSubSymbolScaleValue()*SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints);this.getScaleValues()[2]=i/n}t.length===this.minEditPts?this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t):this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var r=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),a=new SuperMap.Geometry.Point(r.x+e*n,r.y+l*n),p=o*n;this.getSubSymbols().length>=0&&this.computeSubSymbol(this.getSubSymbols()[0],a,p,0),""===this.textContent&&(this.textContent="?");var u={surroundLineFlag:!1,fontSize:30,fontSizeLimit:!0,fontColorLimit:!0,fontColor:"#0000ff"};u.labelAlign="cm",u.labelRotation=-0,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[r],u,this.textContent),this.addScalePoint(a,0);var s=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,90);this.addScalePoint(s,1)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.getOutRectangleDis(l),n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l);if(0===o)return;var i=new SuperMap.Geometry.Point(e.x,e.y);if(0===t&&(this.getScaleValues()[0]=(i.x-n.x)/o,this.getScaleValues()[1]=(i.y-n.y)/o),1===t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(n.x+r*o,n.y+a*o),u=SuperMap.Plot.PlottingUtil.distance(e,p);this.getScaleValues()[2]=u/o}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30010=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30011",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=1e3,null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents(),2===this.controlPoints.length&&this.calAssistantLine();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);(t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts||this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t)}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30011=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(9)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="暴",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3001102",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3001102=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(9)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="骚",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3001103",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3001103=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(25)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="盗",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3001105",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3001105=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30012",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=1e3,0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.1)),null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents(),2===this.controlPoints.length&&this.calAssistantLine();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=this.getScaleValues()[0],l=this.getScaleValues()[1],o=this.getScaleValues()[2],n=SuperMap.Plot.PlottingUtil.getOutRectangleDis(t);if(0!==n){if(!this.getIsEdit()){var i=this.getSubSymbolScaleValue()*SuperMap.Plot.PlottingUtil.polylineDistance(this.controlPoints);this.getScaleValues()[2]=i/n}var r=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),a=new SuperMap.Geometry.Point(r.x+e*n,r.y+l*n),p=o*n;this.getSubSymbols().length>=0&&this.computeSubSymbol(this.getSubSymbols()[0],a,p,0),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t),this.addScalePoint(a,0);var u=SuperMap.Plot.PlottingUtil.circlePoint(a,p,p,90);this.addScalePoint(u,1)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.getOutRectangleDis(l),n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l);if(0===o)return;var i=new SuperMap.Geometry.Point(e.x,e.y);if(0===t&&(this.getScaleValues()[0]=(i.x-n.x)/o,this.getScaleValues()[1]=(i.y-n.y)/o),1===t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(n.x+r*o,n.y+a*o),u=SuperMap.Plot.PlottingUtil.distance(e,p);this.getScaleValues()[2]=u/o}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30012=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3001301",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.5),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=.1*SuperMap.Plot.PlottingUtil.distance(t[0],t[1]),l=this.getScaleValues()[0],o=SuperMap.Plot.PlottingUtil.linePnt(t[t.length-1],t[t.length-2],Math.sqrt(3)*e/4),n=SuperMap.Plot.PlottingUtil.polylineDistance(t),i=SuperMap.Plot.PlottingUtil.linePnt(t[0],t[1],n*l),r=SuperMap.Plot.PlottingUtil.linePnt(i,t[0],2*e),a=SuperMap.Plot.PlottingUtil.linePnt(i,t[1],2*e),p=[];p.push(t[0]),p.push(r);var u=[];u.push(a),u.push(o);var s=SuperMap.Plot.PlottingUtil.paraLine(p,.25*e,!0),P=SuperMap.Plot.PlottingUtil.paraLine(p,.25*e,!1),c=SuperMap.Plot.PlottingUtil.paraLine(u,.25*e,!0),S=SuperMap.Plot.PlottingUtil.paraLine(u,.25*e,!1);if(this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s,{lineColorLimit:!0,strokeOpacity:1,color:"#0000FF"}),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P,{lineColorLimit:!0,strokeOpacity:1,color:"#0000FF"}),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c,{lineColorLimit:!0,strokeOpacity:1,color:"#0000FF"}),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S,{lineColorLimit:!0,strokeOpacity:1,color:"#0000FF"}),this.getSubSymbols().length>=0){for(var y=SuperMap.Plot.PlottingUtil.radian(t[0],t[1])*this.RTOD,h=.5*SuperMap.Plot.PlottingUtil.distance(r,a),f=0;f<this.getSubSymbols().length;f++)for(var g=this.getSubSymbols()[f].symbolData,M=0;M<g.innerCells.length;M++){var b=g.innerCells[M];b.lineColorLimit=!0,b.style.lineColor.red=0,b.style.lineColor.blue=255,b.style.lineColor.green=0,b.style.lineColor.alpha=255}this.computeSubSymbol(this.getSubSymbols()[0],i,h,y+180)}var d=SuperMap.Plot.PlottingUtil.linePnt(t[t.length-1],t[t.length-2],e),m=new SuperMap.Geometry.Point(d.x,d.y),v=new SuperMap.Geometry.Point(d.x,d.y);m=SuperMap.Plot.PlottingUtil.rotateAngle(t[t.length-1],1/6*Math.PI,m),v=SuperMap.Plot.PlottingUtil.rotateAngle(t[t.length-1],11/6*Math.PI,v);var O=[];O.push(m),O.push(t[t.length-1]),O.push(v),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,O,{lineColorLimit:!0,strokeOpacity:1,color:"#0000FF"})}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3001301=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(26)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#048e24"),l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3001302",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3001302=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol30014",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999999,null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#0000ff"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=.1*SuperMap.Plot.PlottingUtil.distance(t[0],t[1]),o=[];o.push(t[0]),o.push(t[1]);for(var n=0,i=0;i<o.length-1;i++)n+=Math.sqrt(Math.pow(Math.abs(o[i].x-o[i+1].x),2)+Math.pow(Math.abs(o[i].y-o[i+1].y),2));""===this.textContent&&(this.textContent="(XX)");var r=this.textContent.length*l/2.5,a=.5*(e-r),p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a,t);if(-1!==p.index){var u=SuperMap.Plot.PlottingUtil.clonePoints(t);u.splice(p.index+1,t.length-p.index-1),u.push(p.pts);var s=SuperMap.Plot.PlottingUtil.paraLine(u,.25*l,!0),P=SuperMap.Plot.PlottingUtil.paraLine(u,.25*l,!1),c=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a+r,t);if(-1!==c.index){var S=SuperMap.Plot.PlottingUtil.clonePoints(t);S.splice(0,c.index+1),S.splice(0,0,c.pts);var y=SuperMap.Plot.PlottingUtil.paraLine(S,.25*l,!0),h=SuperMap.Plot.PlottingUtil.paraLine(S,.25*l,!1);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h);var f=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*e,t),g=SuperMap.Plot.PlottingUtil.radian(p.pts,c.pts)*this.RTOD,M={fontSize:.5*n,fontSizeLimit:!0};M.labelAlign="cm",M.labelRotation=-g,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[f.pts],M,this.textContent)}}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol30014=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(1)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="震",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3002001",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol3002001=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3002002",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.1)),l.subText="HX",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine(),!(this.controlPoints.length<3)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=this.getScaleValues()[2],r=e*i,a=new SuperMap.Geometry.Point(l.x+e*o,l.y+e*n),p=new SuperMap.Geometry.Point(a.x+1,a.y),u=[];t.push(t[0].clone());for(var s=0;s<t.length-1;s++){var P=SuperMap.Plot.PlottingUtil.intersectLines(a,p,t[s],t[s+1]);P.isIntersectLines&&(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(P.intersectPoint,t[s],t[s+1])&&u.push(P.intersectPoint))}if(!(0>=u.length)){var c=u[0].clone(),S=u[0].clone();for(s=0;s<u.length;s++)c.x>u[s].x&&(c=u[s].clone()),S.x<u[s].x&&(S=u[s].clone());var y=new SuperMap.Geometry.Point(a.x-r/2,c.y),h=new SuperMap.Geometry.Point(a.x+r/2,S.y);""===this.textContent&&(this.textContent=this.subText);var f=SuperMap.Plot.PlottingUtil.radian(y,h)*this.RTOD,g={fontSize:20*i*10,fontSizeLimit:!0};g.labelAlign="cm",g.labelRotation=-f,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[a],g,this.textContent),this.addScalePoint(a,0);var M=SuperMap.Plot.PlottingUtil.circlePoint(a,r/2,r/2,90);this.addScalePoint(M,1)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l),i=e;if(0==t&&SuperMap.Plot.PlottingUtil.ptIsInPolygon(l,i)){r=(i.x-n.x)/o;this.getScaleValues()[0]=r;a=(i.y-n.y)/o;this.getScaleValues()[1]=a}if(1==t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(n.x+r*o,n.y+a*o),u=2*SuperMap.Plot.PlottingUtil.distance(i,p)/o;this.getScaleValues()[2]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3002002=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3002004",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.1)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=[];if(3>=this.controlPoints.length?e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.KIDNEY,t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),!(2>(e=SuperMap.Plot.PlottingUtil.clearSamePts(e)).length)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e),o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),n=this.getScaleValues()[0],i=this.getScaleValues()[1],r=this.getScaleValues()[2],a=l*r,p=new SuperMap.Geometry.Point(o.x+l*n,o.y+l*i),u=new SuperMap.Geometry.Point(p.x+1,p.y),s=[];e.push(e[0].clone());for(var P=0;P<e.length-1;P++){var c=SuperMap.Plot.PlottingUtil.intersectLines(p,u,e[P],e[P+1]);c.isIntersectLines&&(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(c.intersectPoint,e[P],e[P+1])&&s.push(c.intersectPoint))}if(!(0>=s.length)){var S=s[0].clone(),y=s[0].clone();for(P=0;P<s.length;P++)S.x>s[P].x&&(S=s[P].clone()),y.x<s[P].x&&(y=s[P].clone());var h=[],f=new SuperMap.Geometry.Point(p.x-a/2,S.y);f.x<=y.x&&f.x>=S.x&&((h=[]).push(S),h.push(f),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h));var g=new SuperMap.Geometry.Point(p.x+a/2,y.y);g.x<=y.x&&g.x>=S.x&&((h=[]).push(y),h.push(g),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h)),""===this.textContent&&(this.textContent="火");var M=SuperMap.Plot.PlottingUtil.radian(f,g)*this.RTOD,b={fontSize:20*r*10,fontSizeLimit:!0};b.labelAlign="cm",b.labelRotation=-M,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[p],b,this.textContent),this.addScalePoint(p,0);var d=SuperMap.Plot.PlottingUtil.circlePoint(p,a/2,a/2,0);this.addScalePoint(d,1)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;for(var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l),i=e,r=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l),a=0,p=(r=SuperMap.Plot.PlottingUtil.clearSamePts(r)).length;a<p;a++)SuperMap.Plot.PlottingUtil.equalFuzzy(i.x,r[a].x)&&SuperMap.Plot.PlottingUtil.equalFuzzy(i.y,r[a].y)&&(i=r[a]);if(0===t&&SuperMap.Plot.PlottingUtil.ptIsInPolygon(l,i)){u=(i.x-n.x)/o;this.getScaleValues()[0]=u;s=(i.y-n.y)/o;this.getScaleValues()[1]=s}if(1===t){var u=this.getScaleValues()[0],s=this.getScaleValues()[1],P=new SuperMap.Geometry.Point(n.x+u*o,n.y+s*o),c=2*SuperMap.Plot.PlottingUtil.distance(i,P)/o;this.getScaleValues()[2]=c}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3002004=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3002005",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.1)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine(),!(this.controlPoints.length<3)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t),o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=e*this.getScaleValues()[2],r=new SuperMap.Geometry.Point(l.x+e*o,l.y+e*n),a=new SuperMap.Geometry.Point(r.x+1,r.y),p=[];t.push(t[0].clone());for(var u=0;u<t.length-1;u++){var s=SuperMap.Plot.PlottingUtil.intersectLines(r,a,t[u],t[u+1]);s.isIntersectLines&&(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(s.intersectPoint,t[u],t[u+1])&&p.push(s.intersectPoint))}if(!(0>=p.length)){var P=p[0].clone(),c=p[0].clone();for(u=0;u<p.length;u++)P.x>p[u].x&&(P=p[u].clone()),c.x<p[u].x&&(c=p[u].clone());var S=[],y=new SuperMap.Geometry.Point(r.x-i/2,P.y);y.x<=c.x&&y.x>=P.x&&((S=[]).push(P),S.push(y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S));var h=new SuperMap.Geometry.Point(r.x+i/2,c.y);h.x<=c.x&&h.x>=P.x&&((S=[]).push(c),S.push(h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S)),this.getSubSymbols().length>=0&&this.computeSubSymbol(this.getSubSymbols()[0],r,i,0),this.addScalePoint(r,0);var f=SuperMap.Plot.PlottingUtil.circlePoint(r,i/2,i/2,90);this.addScalePoint(f,1)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l),i=e;if(0===t&&SuperMap.Plot.PlottingUtil.ptIsInPolygon(l,i)){r=(i.x-n.x)/o;this.getScaleValues()[0]=r;a=(i.y-n.y)/o;this.getScaleValues()[1]=a}if(1===t){var r=this.getScaleValues()[0],a=this.getScaleValues()[1],p=new SuperMap.Geometry.Point(n.x+r*o,n.y+a*o),u=2*SuperMap.Plot.PlottingUtil.distance(i,p)/o;this.getScaleValues()[2]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3002005=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol3002501",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(.02),l.subText="踏",l.getStyle()&&!l.getIsEdit()&&(l.getStyle().color="#00C000"),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents(),2===this.controlPoints.length&&this.calAssistantLine();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t);this.getIsEdit()||(this.getScaleValues()[0]=.3*this.getSubSymbolScaleValue());var o=new SuperMap.Geometry.Point(l.x+1,l.y),n=[];t.push(t[0].clone());for(var i=0;i<t.length-1;i++){var r=SuperMap.Plot.PlottingUtil.intersectLines(l,o,t[i],t[i+1]);r.isIntersectLines&&(SuperMap.Plot.PlottingUtil.pointIsOnPolyLine(r.intersectPoint,t[i],t[i+1])&&n.push(r.intersectPoint))}if(!(0>=n.length)){var a=n[0].clone(),p=n[0].clone();for(i=0;i<n.length;i++)a.x>n[i].x&&(a=n[i].clone()),p.x<n[i].x&&(p=n[i].clone());var u=SuperMap.Plot.PlottingUtil.distance(p,a),s=new SuperMap.Geometry.Point(l.x-.25*u,a.y),P=e*this.getScaleValues()[0],c=e*this.getScaleValues()[0],S=c+P,y=new SuperMap.Geometry.Point(s.x,s.y+S),h=new SuperMap.Geometry.Point(y.x+P,y.y),f=SuperMap.Plot.PlottingUtil.rotateAngle(s,Math.PI/2,h),g=SuperMap.Plot.PlottingUtil.rotateAngle(s,Math.PI/2,y);this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,[g,f],this.getStyle());var M=new SuperMap.Geometry.Point(s.x,s.y+.8*c),b=new SuperMap.Geometry.Point(s.x-c,s.y-c),d=new SuperMap.Geometry.Point(s.x+c,s.y-c),m=SuperMap.Plot.PlottingUtil.rotateAngle(s,Math.PI/2,M.clone()),v=SuperMap.Plot.PlottingUtil.rotateAngle(s,Math.PI/2,b.clone()),O=SuperMap.Plot.PlottingUtil.rotateAngle(s,Math.PI/2,d.clone()),L=[];L.push(m),L.push(v),L.push(O),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,L,this.getStyle());var U=new SuperMap.Geometry.Point(s.x-.5*c,s.y-c),_=new SuperMap.Geometry.Point(b.x,b.y-2*P),w=new SuperMap.Geometry.Point(s.x+.5*c,s.y-c),x=new SuperMap.Geometry.Point(d.x,d.y-2*P),T=SuperMap.Plot.PlottingUtil.rotateAngle(s,Math.PI/2,U),E=SuperMap.Plot.PlottingUtil.rotateAngle(s,Math.PI/2,_),A=SuperMap.Plot.PlottingUtil.rotateAngle(s,Math.PI/2,w),G=SuperMap.Plot.PlottingUtil.rotateAngle(s,Math.PI/2,x),C=[];C.push(T),C.push(E);var V=[];V.push(A),V.push(G),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,C,this.getStyle()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,V,this.getStyle()),""===this.textContent&&(this.textContent=this.subText);var I={fontColorLimit:!0,fontColor:"#00ff00",fontSizeLimit:!0,fontSize:20};I.labelAlign="cm",I.labelRotation=-0,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[l],I,this.textContent)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol3002501=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(27)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="灾",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol30026=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(9)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="缉",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol40104",null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#048e24"),l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol40104=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol40302",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.02)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine(),!(this.controlPoints.length<3)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t);this.getIsEdit()||(this.subSymbolScaleValue=this.getDefaultSubSymbolSize()/e,this.subSymbolScaleValue>.2&&(this.subSymbolScaleValue=.2),this.getScaleValues()[2]=this.subSymbolScaleValue/3);var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=e*this.getScaleValues()[2],r=new SuperMap.Geometry.Point(l.x+e*o,l.y+e*n),a=new SuperMap.Geometry.Point(r.x-4*i,r.y),p=new SuperMap.Geometry.Point(r.x-4*i,r.y-i/2),u=[];u.push(a),u.push(p);var s={lineTypeLimit:!0,fillLimit:!0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,s);var P=new SuperMap.Geometry.Point(r.x-4*i,r.y),c=new SuperMap.Geometry.Point(r.x-i,r.y),S=[];S.push(P),S.push(c),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S,s),this.getSubSymbols().length>=0&&this.computeSubSymbol(this.getSubSymbols()[0],r,2*i,0);var y=new SuperMap.Geometry.Point(r.x+4*i,r.y),h=new SuperMap.Geometry.Point(r.x+i,r.y),f=[];f.push(y),f.push(h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f,s);var g=new SuperMap.Geometry.Point(r.x+4*i,r.y+i/2),M=new SuperMap.Geometry.Point(r.x+4*i,r.y),b=[];b.push(g),b.push(M),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b,s),this.addScalePoint(r,0);var d=SuperMap.Plot.PlottingUtil.circlePoint(r,2*i,2*i,90);this.addScalePoint(d,1)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l);if(0===o)return;if(0===t){i=(e.x-n.x)/o;this.getScaleValues()[0]=i;r=(e.y-n.y)/o;this.getScaleValues()[1]=r}if(1===t){var i=this.getScaleValues()[0],r=this.getScaleValues()[1],a=new SuperMap.Geometry.Point(n.x+o*i,n.y+o*r),p=SuperMap.Plot.PlottingUtil.distance(a,e)/2/o;this.getScaleValues()[2]=p}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol40302=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(12)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="劝",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol4030302",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol4030302=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(12)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="疏",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol4030303",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol4030303=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol40304",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999999,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),!(this.controlPoints.length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=.5*e,o=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(l,t);if(-1!==o.index){for(var n=[],i=[],r=0;r<o.index+1;r++)n.push(t[r]);var a=.1*e,p=.5*a,u=.05*e;if(l-SuperMap.Plot.PlottingUtil.polylineDistance(n)>=u){var s=SuperMap.Plot.PlottingUtil.linePnt(o.pts,t[o.index],u);n.push(s),this.ComputeDashLine(a,p,n);var P=SuperMap.Plot.PlottingUtil.linePnt(o.pts,t[o.index],u);i.push(P);for(r=o.index+1;r<t.length;++r)i.push(t[r]);this.ComputeDashLine(a,p,i)}else{for(var c=-1,r=n.length-1;r>=0;r--){var S=new SuperMap.Geometry.Point(n[r].x,n[r].y),y=new SuperMap.Geometry.Point(o.pts.x,o.pts.y),h=SuperMap.Plot.PlottingUtil.distance(S,y);if(h>u){c=r;break}}if(-1==c)return;n.splice(c+1,n.length-1-c),s=SuperMap.Plot.PlottingUtil.linePnt(o.pts,t[c],u),n.push(s),this.ComputeDashLine(a,p,n);for(var f=-1,r=n.length-1;r<t.length;r++)if(S=new SuperMap.Geometry.Point(t[r].x,t[r].y),y=new SuperMap.Geometry.Point(o.pts.x,o.pts.y),(h=SuperMap.Plot.PlottingUtil.distance(S,y))>u){f=r;break}if(-1==f)return;P=SuperMap.Plot.PlottingUtil.linePnt(o.pts,t[f],u),i.push(P);for(r=f+1;r<t.length;++r)i.push(t[r]);this.ComputeDashLine(a,p,i)}var g=s.clone(),M=P.clone(),b=SuperMap.Plot.PlottingUtil.radian(g,M)*this.RTOD,d=new SuperMap.Geometry.Point((s.x+P.x)/2,(s.y+P.y)/2);""===this.textContent&&(this.textContent="警");var m={fontSizeLimit:!0,fontSize:20};m.labelAlign="cm",m.labelRotation=-b,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[d],m,this.textContent)}}}},{key:"ComputeDashLine",value:function(t,e,l){for(var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.clonePoints(l),i=o/7,r=0;r<7;r++){var a=SuperMap.Plot.PlottingUtil.findPointInPolyLine(n,i);if(-1!==a.index){if(0!=r%2){for(var p=[],u=0;u<a.index+1;u++)p.push(n[u].clone());p.push(a.pt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p)}var s=[];s.push(a.pt);for(var P=a.index+1;P<n.length;P++)s.push(n[P]);n=(n=[]).concat(s)}}n.length>1&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,n)}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol40304=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol4030401",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.2),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),!(this.controlPoints.length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t)*this.getScaleValues()[0],l=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*e,t[0],t[1]),o=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.5*e,t[1],t[0]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[l.pntLeft,l.pntRight]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[o.pntLeft,o.pntRight]);var n=SuperMap.Plot.PlottingUtil.radian(t[0],t[1])*this.RTOD,i=SuperMap.Plot.PlottingUtil.circlePoint(o.pntRight,.2*e,.2*e,n+90),r=SuperMap.Plot.PlottingUtil.circlePoint(o.pntRight,.5*e,.5*e,n+90),a=SuperMap.Plot.PlottingUtil.circlePoint(r,1.5*e,1.5*e,n);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[i,r,a]);var p=SuperMap.Plot.PlottingUtil.circlePoint(o.pntLeft,.2*-e,.2*-e,n+90),u=SuperMap.Plot.PlottingUtil.circlePoint(o.pntLeft,.5*-e,.5*-e,n+90),s=SuperMap.Plot.PlottingUtil.circlePoint(u,e,e,n);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[p,u,s]);var P=SuperMap.Plot.PlottingUtil.circlePoint(l.pntRight,.2*e,.2*e,n-90),c=SuperMap.Plot.PlottingUtil.circlePoint(l.pntRight,.5*e,.5*e,n-90),S=SuperMap.Plot.PlottingUtil.circlePoint(c,e,e,n+180);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[P,c,S]);var y=SuperMap.Plot.PlottingUtil.circlePoint(l.pntLeft,.2*-e,.2*-e,n-90),h=SuperMap.Plot.PlottingUtil.circlePoint(l.pntLeft,.5*-e,.5*-e,n-90),f=SuperMap.Plot.PlottingUtil.circlePoint(h,1.5*e,1.5*e,n+180);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[y,h,f]);var g=SuperMap.Plot.PlottingUtil.circlePoint(u,1.2*e,1.2*e,n),M=SuperMap.Plot.PlottingUtil.circlePoint(u,2.4*e,2.4*e,n);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[g,M]);var b=SuperMap.Plot.PlottingUtil.circlePoint(c,1.2*-e,1.2*-e,n),d=SuperMap.Plot.PlottingUtil.circlePoint(c,2.4*-e,2.4*-e,n);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[b,d]);var m=new SuperMap.Geometry.Point((a.x+f.x)/2,(a.y+f.y)/2);""===this.textContent&&(this.textContent="警");var v={fontSizeLimit:!0,fontSize:20};v.labelAlign="cm",v.labelRotation=-n,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[m],v,this.textContent),this.addScalePoint(r,0)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!==t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.controlPoints.length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.distance(l[0],e)/o;this.getScaleValues()[0]=n}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol4030401=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5010401",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.2),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){this.getScaleValues().length<1&&this.getScaleValues().push(.2);var e=SuperMap.Plot.PlottingUtil.polylineDistance(t)*this.getScaleValues()[0],l=.5*e,o=new SuperMap.Geometry.Point(t[0].x,t[0].y),n=new SuperMap.Geometry.Point(t[1].x,t[1].y),i=SuperMap.Plot.PlottingUtil.radian(o,n)*this.RTOD,r=SuperMap.Plot.PlottingUtil.circlePoint(o,e,e,i+90),a=SuperMap.Plot.PlottingUtil.circlePoint(o,e,e,i+270),p=SuperMap.Plot.PlottingUtil.circlePoint(r,l,l,i),u=SuperMap.Plot.PlottingUtil.circlePoint(a,l,l,i),s=[];s.push(u),s.push(a),s.push(r),s.push(p),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s);var P=SuperMap.Plot.PlottingUtil.circlePoint(n,e,e,i+90),c=SuperMap.Plot.PlottingUtil.circlePoint(n,e,e,i+270),S=SuperMap.Plot.PlottingUtil.circlePoint(P,l,l,i+180),y=SuperMap.Plot.PlottingUtil.circlePoint(c,l,l,i+180);(s=[]).push(S),s.push(P),s.push(c),s.push(y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s);var h=new SuperMap.Geometry.Point((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2),f=SuperMap.Plot.PlottingUtil.radian(t[0],t[1])*this.RTOD;""===this.textContent&&(this.textContent="JZ");var g={surroundLineFlag:!1,fontSize:15,fontSizeLimit:!0};g.labelAlign="cm",g.labelRotation=-f,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[h],g,this.textContent),this.addScalePoint(r)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(this.getScalePoints().length<=t)return;if(0!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.distance(e,l[0])/o;this.getScaleValues()[0]=n}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol5010401=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(28)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return null!==l.getStyle()&&!1===l.getIsEdit()&&(l.getStyle().color="#ff0000"),l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol5020802=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol50210",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol50210=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5021803",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=99999,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.125),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(.125),this.getScaleValues().push(0));var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l,o,n=SuperMap.Plot.PlottingUtil.polylineDistance(e),i=this.getDefaultSubSymbolSize()/n;(i>.3||i<=0)&&(i=.3);var r=1.5*i;2==t.length?(this.getIsEdit()||(this.getScaleValues()[3]=this.getScaleValues()[2]+r),l=this.getScaleValues()[2],o=this.getScaleValues()[3]):(SuperMap.Plot.PlottingUtil.equalFuzzy(this.getScaleValues()[4],0)&&(this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(.125)),this.getIsEdit()||(this.getScaleValues()[4]=this.getScaleValues()[3]+r),l=this.getScaleValues()[3],o=this.getScaleValues()[4]);var a=n*l,p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a,e);if(p.bfind){var u=p.pts,s=n*o;if((p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(s,e)).bfind){var P=p.index,c=p.pts,S=new SuperMap.Geometry.Point(u.x,u.y),y=new SuperMap.Geometry.Point(c.x,c.y),h=SuperMap.Plot.PlottingUtil.radian(S,y)*this.RTOD,f=[];f.push(c);for(var g=P+1;g<e.length;g++)f.push(e[g]);this.addArrow(f);var M=SuperMap.Plot.PlottingUtil.distance(S,y);this.getSubSymbols().length>=0&&this.computeSubSymbol(this.getSubSymbols()[0],S,M,h),this.clearScalePoints(),this.addScalePoint(c);var b=SuperMap.Plot.PlottingUtil.circlePoint(S,M/2,M/2,h+90);this.addScalePoint(b)}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l,!1);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=0,r=0;if(2==l.length?(i=this.getScaleValues()[2],r=this.getScaleValues()[3]):(i=this.getScaleValues()[3],r=this.getScaleValues()[4]),0==t){for(var a=r-i,p=e.clone(),u=[],s=0;s<o.length;s++)u.push(o[s].clone());for(var P,c=-1,S=0,s=0;s<u.length-1;s++){var y=[];y.push(u[s]),y.push(u[s+1]);var h=SuperMap.Plot.PlottingUtil.projectPoint(p,u[s],u[s+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(h,y).isOnPolyLine){var f=SuperMap.Plot.PlottingUtil.distance(p,h);-1==c?(c=s,P=h,S=f):S>f&&(c=s,P=h,S=f)}}(-1===c||c>u.length-1)&&(c=0,P=o[0]);g=0;for(s=0;s<c;s++)g+=SuperMap.Plot.PlottingUtil.distance(o[s],o[s+1]);(d=(g+=SuperMap.Plot.PlottingUtil.distance(o[c],P))/n)>.9&&(d=.9),d<.1&&(d=.1),2===l.length?(this.getScaleValues()[2]=d-a,this.getScaleValues()[3]=d):(this.getScaleValues()[3]=d-a,this.getScaleValues()[4]=d)}else if(1===t){var g=n*i,M=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(g,o);if(!M.bfind)return;var b=M.pts,d=(2*SuperMap.Plot.PlottingUtil.distance(b,e)+g)/n;d>.9&&(d=.9),2===l.length?this.getScaleValues()[3]=d:this.getScaleValues()[4]=d}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol5021803=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5022001",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=255,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(.05),l.getScaleValues().push(180)),l.subText="ZDO",l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=this.GetGoPts();if(!(t.length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.5),this.getScaleValues().push(.05),this.getScaleValues().push(180));var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[1]=o}var n=this.getScaleValues()[0],i=this.getScaleValues()[1],r=this.getScaleValues()[2],a=l*n,p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a,e);if(p.bfind){var u=p.index,s=p.pts,P=i*l*.5,c=new SuperMap.Geometry.Point(0,0),S=new SuperMap.Geometry.Point(.5*P,0),y=new SuperMap.Geometry.Point(0,P),h=[],f=SuperMap.Plot.PlottingUtil.coordinateTrans(s,c,r);h.push(f);var g=SuperMap.Plot.PlottingUtil.coordinateTrans(s,S,r);h.push(g);var M=SuperMap.Plot.PlottingUtil.coordinateTrans(s,y,r);h.push(M),this.addCell(SuperMap.Plot.SymbolType.ELLIPSESYMBOL,h);var b=new SuperMap.Geometry.Point(0,-2*P),d=new SuperMap.Geometry.Point(.15*P,-1.6*P),m=new SuperMap.Geometry.Point(-.15*P,-1.6*P),v=SuperMap.Plot.PlottingUtil.coordinateTrans(s,b,r),O=SuperMap.Plot.PlottingUtil.coordinateTrans(s,d,r),L=SuperMap.Plot.PlottingUtil.coordinateTrans(s,m,r),U=[];U.push(v),U.push(O),U.push(L);var _={surroundLineFlag:!1,fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,U,_);var w=new SuperMap.Geometry.Point(0,-P),x=SuperMap.Plot.PlottingUtil.coordinateTrans(s,w,r);(U=[]).push(x),U.push(v.clone()),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U,_);var T,E=[],A=[];for(T=0;T<=u;T++)E.push(e[T]);for(E.push(s),A.push(s),T=u+1;T<e.length;T++)A.push(e[T]);var G=1.2*P;if(a>G){var C=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a-G,E);if(C.bfind){var V=C.pts,I=C.index,j=[];for(T=0;T<=I;T++)j.push(E[T]);j.push(V),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,j)}}if(l-a>G){var Y=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(G,A);if(Y.bfind){var B=Y.pts,R=Y.index;for((j=[]).push(B),T=R+1;T<A.length;T++)j.push(A[T]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,j)}}var N=new SuperMap.Geometry.Point((V.x+B.x)/2,(V.y+B.y)/2),D=SuperMap.Plot.PlottingUtil.radian(V,B)*this.RTOD;""===this.textContent&&(this.textContent=this.subText),(_={surroundLineFlag:!1,fontSize:15,fontSizeLimit:!0}).labelAlign="cm",_.labelRotation=D+90,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[N],_,this.textContent),this.clearScalePoints(),this.addScalePoint(s),this.addScalePoint(v)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(0===t){for(var i=e.clone(),r=-1,a=0,p=(new SuperMap.Geometry.Point(0,0),0);p<o.length-1;p++){var u=[];u.push(o[p]),u.push(o[p+1]);var s=SuperMap.Plot.PlottingUtil.projectPoint(i,o[p],o[p+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(s,u).isOnPolyLine){var P=SuperMap.Plot.PlottingUtil.distance(i,s);-1==r?(r=p,s,a=P):a>P&&(r=p,s,a=P)}}-1===r&&Math.ceil(e.x,1)<=Math.ceil(l[0].x,1)?(r=0,l[0]):-1===r&&r===l[l.length-2]&&(r=0,l[0]),-1===r&&Math.ceil(e.x,1)>=Math.ceil(l[l.length-1].x,1)?(r=l.length-1,l[l.length-1]):-1!==r&&r!==l.length-1||(r=l.length-1,l[l.length-1]);c=0;if(0===r)c=SuperMap.Plot.PlottingUtil.distance(o[0],s);else for(p=0;p<r;p++)c+=SuperMap.Plot.PlottingUtil.distance(o[p],o[p+1]);(h=c/n)<=.05&&(h=.05),h>=.9&&(h=.9),this.getScaleValues()[0]=h}else if(1===t){var c=this.getScaleValues()[0]*n,S=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(c,o);if(!S.bfind)return;var y=S.pts,h=SuperMap.Plot.PlottingUtil.distance(y,e)/n;h>.5&&(h=.5),this.getScaleValues()[1]=h;var f=SuperMap.Plot.PlottingUtil.radian(y,e)*this.RTOD;this.getScaleValues()[2]=f+90}}this.calculateParts()}},{key:"GetGoPts",value:function(){var t=[];return this.controlPoints.length<this.minEditPts?t:(t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints),1===(t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length&&(t=[]),t)}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol5022001=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5022002",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=255,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(.05),l.getScaleValues().push(90)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.5),this.getScaleValues().push(.05),this.getScaleValues().push(90));var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[1]=o}var n=this.getScaleValues()[0],i=this.getScaleValues()[1],r=this.getScaleValues()[2],a=l*n,p=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a,e);if(p.bfind){var u=p.index,s=p.pts,P=i*l,c=s,S=new SuperMap.Geometry.Point(P,-.5*P),y=new SuperMap.Geometry.Point(P,.5*P),h=new SuperMap.Geometry.Point(-P,.5*P),f=new SuperMap.Geometry.Point(-P,-.5*P),g=SuperMap.Plot.PlottingUtil.coordinateTrans(c,S,r),M=SuperMap.Plot.PlottingUtil.coordinateTrans(c,y,r),b=SuperMap.Plot.PlottingUtil.coordinateTrans(c,h,r),d=SuperMap.Plot.PlottingUtil.coordinateTrans(c,f,r);this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[g,M,b,d,g]);var m=new SuperMap.Geometry.Point(.5*P,.5*P),v=new SuperMap.Geometry.Point(.5*P,-.5*P),O=SuperMap.Plot.PlottingUtil.coordinateTrans(c,v,r),L=SuperMap.Plot.PlottingUtil.coordinateTrans(c,m,r);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[O,L]);var U=new SuperMap.Geometry.Point(0,.5*P),_=new SuperMap.Geometry.Point(0,-.5*P),w=SuperMap.Plot.PlottingUtil.coordinateTrans(c,U,r),x=SuperMap.Plot.PlottingUtil.coordinateTrans(c,_,r);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[w,x]);var T=new SuperMap.Geometry.Point(P,0),E=new SuperMap.Geometry.Point(2*P,0),A=SuperMap.Plot.PlottingUtil.coordinateTrans(c,T,r),G=SuperMap.Plot.PlottingUtil.coordinateTrans(c,E,r);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[A,G]);var C=new SuperMap.Geometry.Point(2*P,.15*P),V=new SuperMap.Geometry.Point(2*P,-.15*P),I=new SuperMap.Geometry.Point(2.6*P,0),j=SuperMap.Plot.PlottingUtil.coordinateTrans(c,C,r),Y=SuperMap.Plot.PlottingUtil.coordinateTrans(c,V,r),B=SuperMap.Plot.PlottingUtil.coordinateTrans(c,I,r),R={surroundLineFlag:!1,fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,[j,Y,B],R);var N,D=[],k=[];for(N=0;N<=u;N++)D.push(e[N]);for(D.push(s),k.push(s),N=u+1;N<e.length;N++)k.push(e[N]);var z=1.2*P;if(a>z){var F=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a-z,D);if(F.bfind){var q=F.pts,W=F.index,K=[];for(N=0;N<=W;N++)K.push(D[N]);K.push(q),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,K)}}if(l-a>z){var H=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(z,k);if(H.bfind){var J=H.pts,X=H.index;for((K=[]).push(J),N=X+1;N<k.length;N++)K.push(k[N]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,K)}}this.clearScalePoints(),this.addScalePoint(s),this.addScalePoint(G)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(t<0||t>1)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(0==t){for(var i=e.clone(),r=-1,a=0,p=(new SuperMap.Geometry.Point(0,0),0);p<o.length-1;p++){var u=[];u.push(o[p]),u.push(o[p+1]);var s=SuperMap.Plot.PlottingUtil.projectPoint(i,o[p],o[p+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(s,u).isOnPolyLine){var P=SuperMap.Plot.PlottingUtil.distance(i,s);-1==r?(r=p,s,a=P):a>P&&(r=p,s,a=P)}}if(-1==r)return SuperMap.Plot.PlottingUtil.distance(i,o[0])>SuperMap.Plot.PlottingUtil.distance(i,o[o.length-1])?(r=o.length-1,this.calculateParts()):(r=0,this.calculateParts());S=0;if(0===r)S=SuperMap.Plot.PlottingUtil.distance(o[0],s);else for(p=0;p<r;p++)S+=SuperMap.Plot.PlottingUtil.distance(o[p],o[p+1]);if(S<0||S>n)return;var c=S/n;this.getScaleValues()[0]=c}else if(1==t){var S=this.getScaleValues()[0]*n,y=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(S,o);if(!y.bfind)return;var h=y.pts;(c=SuperMap.Plot.PlottingUtil.distance(h,e)/n)>.5&&(c=.5),this.getScaleValues()[1]=c;var f=SuperMap.Plot.PlottingUtil.radian(h,e)*this.RTOD;this.getScaleValues()[2]=f+90}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol5022002=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol50223",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.088259),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){0===this.getScaleValues().length&&(this.getScaleValues().push(.088259),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];3>=t.length?e=SuperMap.Plot.Primitives.getKendyShapePts(t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e);var l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),o=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(!this.getIsEdit()){var n=this.getDefaultSubSymbolSize()/o;(n>.3||n<=0)&&(n=.3),this.getScaleValues()[0]=2*n}var i=this.getScaleValues()[0],r=(this.getScaleValues()[1],this.getScaleValues()[2]),a=this.getScaleValues()[3];l.x=l.x+r*o,l.y=l.y+a*o;var p=new SuperMap.Geometry.Point(.25*o*i,.25*o*i),u=new SuperMap.Geometry.Point(0,.5*o*i),s=new SuperMap.Geometry.Point(-.25*o*i,.25*o*i),P=SuperMap.Plot.PlottingUtil.coordinateTrans(l,p,0),c=SuperMap.Plot.PlottingUtil.coordinateTrans(l,u,0),S=SuperMap.Plot.PlottingUtil.coordinateTrans(l,s,0);this.addCell(SuperMap.Plot.SymbolType.ARCSYMBOL,[P,c,S],{lineTypeLimit:!0,lineColorLimit:!0,color:"#0000FF",strokeOpacity:1,surroundLineLimit:!0});var y=new SuperMap.Geometry.Point(0,-.3*o*i),h=SuperMap.Plot.PlottingUtil.coordinateTrans(l,y,0);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,[P,h,S],{lineTypeLimit:!0,lineColorLimit:!0,color:"#0000FF",strokeOpacity:1,surroundLineLimit:!0}),this.clearScalePoints();var f=SuperMap.Plot.PlottingUtil.circlePoint(l,i*o*.5,i*o*.5,180);this.addScalePoint(f,0),this.addScalePoint(l,1)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=[];3>=l.length?o=SuperMap.Plot.Primitives.getKendyShapePts(l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o),i=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t){n.x=n.x+this.getScaleValues()[2]*i,n.y=n.y+this.getScaleValues()[3]*i;var r=SuperMap.Plot.PlottingUtil.distance(e,n)/i;this.getScaleValues()[0]=r}else if(1===t){var a=(e.x-n.x)/i;this.getScaleValues()[2]=a;var p=(e.y-n.y)/i;this.getScaleValues()[3]=p}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol50223=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5022301",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){4>this.getScaleValues().length&&(this.getScaleValues().push(.05),this.getScaleValues().push(0),this.getScaleValues().push(0),this.getScaleValues().push(0));var e=[];3>=t.length?e=SuperMap.Plot.Primitives.getKendyShapePts(t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),o=SuperMap.Plot.PlottingUtil.polylineDistance(t);if(!this.getIsEdit()){a=1.5*this.getDefaultSubSymbolSize();this.subSymbolScaleValue=a/o,this.subSymbolScaleValue>.2&&(this.subSymbolScaleValue=.2),this.getScaleValues()[0]=this.subSymbolScaleValue}var n=this.getScaleValues()[0],i=(this.getScaleValues()[1],this.getScaleValues()[2]),r=this.getScaleValues()[3],a=o*n,p=new SuperMap.Geometry.Point(l.x+o*i,l.y+o*r);this.getSubSymbols()&&null!==this.getSubSymbols()&&this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],p,a,0);for(var u=0;u<this.components.length;u++)this.components[u].style.color="#0000FF",this.components[u].style.lineColorLimit=!0,this.components[u].style.strokeOpacity=1;this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e),this.addScalePoint(p);var s=a,P=SuperMap.Plot.PlottingUtil.circlePoint(p,s,s,90);this.addScalePoint(P)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=[];3>=l.length?o=SuperMap.Plot.Primitives.getKendyShapePts(l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o),i=SuperMap.Plot.PlottingUtil.polylineDistance(l);if(0===t){r=(e.x-n.x)/i;this.getScaleValues()[2]=r;a=(e.y-n.y)/i;this.getScaleValues()[3]=a}else if(1===t){var r=this.getScaleValues()[2],a=this.getScaleValues()[3],p=new SuperMap.Geometry.Point(n.x+i*r,n.y+i*a),u=SuperMap.Plot.PlottingUtil.distance(p,e)/i;this.getScaleValues()[0]=u}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol5022301=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol50225",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=30,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine(),!(this.controlPoints.length<this.minEditPts)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t);this.getIsEdit()||(this.subSymbolScaleValue=this.getDefaultSubSymbolSize()/e,this.subSymbolScaleValue>.2&&(this.subSymbolScaleValue=.2),this.getScaleValues()[0]=this.subSymbolScaleValue);var o=this.getScaleValues()[0],n=this.getScaleValues()[2],i=this.getScaleValues()[3],r=e*o,a=new SuperMap.Geometry.Point(l.x+e*n,l.y+e*i);this.getSubSymbols().length>=0&&this.computeSubSymbol(this.getSubSymbols()[0],a,r,0),this.addScalePoint(a,0);var p=SuperMap.Plot.PlottingUtil.circlePoint(a,r,r,90);this.addScalePoint(p,1)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!==t&&1!==t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l);if(0===o)return;if(0===t){i=(e.x-n.x)/o;this.getScaleValues()[2]=i;r=(e.y-n.y)/o;this.getScaleValues()[3]=r}if(1===t){var i=this.getScaleValues()[2],r=this.getScaleValues()[3],a=new SuperMap.Geometry.Point(n.x+o*i,n.y+o*r),p=SuperMap.Plot.PlottingUtil.distance(a,e)/2/o;this.getScaleValues()[0]=p}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol50225=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol50226",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,0===l.getScaleValues().length&&(l.getScaleValues().push(.088259),l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(0)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),!(this.controlPoints.length<this.minEditPts)){var e=[];3>=t.length?e=SuperMap.Plot.Primitives.getKendyShapePts(t):(t.push(t[0]),e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t)),e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(t),o=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(e),n=this.getScaleValues()[0],i=(this.getScaleValues()[1],this.getScaleValues()[2]),r=this.getScaleValues()[3];o.x=o.x+i*l,o.y=o.y+r*l;var a=new SuperMap.Geometry.Point(.5*l*n,0),p=new SuperMap.Geometry.Point(-.5*l*n,0),u=SuperMap.Plot.PlottingUtil.coordinateTrans(o,a,0),s=SuperMap.Plot.PlottingUtil.coordinateTrans(o,p,0),P=[];P.push(u),P.push(s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P);var c=new SuperMap.Geometry.Point(.8*l*n,0),S=new SuperMap.Geometry.Point(-.8*l*n,0),y=SuperMap.Plot.PlottingUtil.coordinateTrans(o,c,0),h=SuperMap.Plot.PlottingUtil.coordinateTrans(o,S,0);this.getSubSymbols().length>=0&&(this.computeSubSymbol(this.getSubSymbols()[0],y,18*n,90),this.computeSubSymbol(this.getSubSymbols()[0],h,18*n,90));var f=SuperMap.Plot.PlottingUtil.circlePoint(o,n*l,n*l,180);this.addScalePoint(f,0),this.addScalePoint(o,1)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!==t&&1!==t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.controlPoints.length<this.minEditPts)return;var o=[];3>=l.length?o=SuperMap.Plot.Primitives.getKendyShapePts(l):(l.push(l[0]),o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l)),o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(o);if(0===t){i.x=i.x+this.getScaleValues()[2]*n,i.y=i.y+this.getScaleValues()[3]*n;var r=SuperMap.Plot.PlottingUtil.distance(e,i)/n;this.getScaleValues()[0]=r}if(1===t){var a=(e.x-i.x)/n;this.getScaleValues()[2]=a;var p=(e.y-i.y)/n;this.getScaleValues()[3]=p}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol50226=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5030301",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=1e3,0===l.getScaleValues().length&&l.getScaleValues().push(.05),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[0]=o}var n=this.getLinePts(e,this.getScaleValues()[0]),i=new SuperMap.Geometry.Point((n.startPt.x+n.endPt.x)/2,(n.startPt.y+n.endPt.y)/2),r=180*SuperMap.Plot.PlottingUtil.radian(n.startPt,n.endPt)/Math.PI,a=SuperMap.Plot.PlottingUtil.distance(n.startPt,n.endPt);0<this.getSubSymbols().length&&this.computeSubSymbol(this.getSubSymbols()[0],i,.8*a,r);for(var p=[],u=[],s=0;s<=n.startIndex;s++)p.push(e[s]);if(p.push(n.startPt),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p),n.endIndex<=e.length){u.push(n.endPt);for(s=n.endIndex+1;s<=e.length-1;s++)u.push(e[s]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u)}var P=e[0],c=e[1],S=e[e.length-2],y=e[e.length-1],h=.3*a,f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(h,c,P),g=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(h,S,y),M=f.pntLeft,b=g.pntLeft,d=[];d.push(P),d.push(M),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d);var m=[];m.push(y),m.push(b),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m);var v=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*l,e),O=SuperMap.Plot.PlottingUtil.circlePoint(v.pts,l*this.getScaleValues()[0],l*this.getScaleValues()[0],r+90);this.addScalePoint(O,0)}}},{key:"getLinePts",value:function(t,e){var l=new Object;if(e>.5)return l.startIndex=0,l.startPt=t[0],l.endIndex=t.length-1,l.endPt=t[t.length-1],l;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5-e),t),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o*(.5+e),t);return l.startIndex=n.index,l.startPt=n.pts,l.endIndex=i.index,l.endPt=i.pts,l}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!==t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o),i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(.5*n,o),r=SuperMap.Plot.PlottingUtil.distance(i.pts,e)/n;this.getScaleValues()[0]=r<=.5?r:.5}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol5030301=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol50308",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999999,0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(.05),l.getScaleValues().push(-1.5)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){if(!this.getIsEdit()||3===this.getScaleValues().length){for(a=0;a<t.length;a++)this.getScaleValues().push(0);var e=this.getSubSymbolScaleValue();this.getScaleValues().push(.8*e),this.getScaleValues().push(e),this.getScaleValues().push(-1.5)}var l=t.length,o=!1;if(void 0!==t[0].z&&(o=!0),o){for(var n=57.29577951308232,i=.017453292519943295,r=[],a=0;a<l;a++)r.push(t[a]);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r);for(var p=SuperMap.Plot.PlottingUtil.polylineDistance(t),u=this.getScaleValues().length,s=p*(W=this.getScaleValues()[u-3]),P=[],c=new SuperMap.Geometry.Point((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2),S=(t[0].z+t[1].z)/2,y=0;y<360;y++){var h=c.x+s*Math.cos(y*i),f=c.y+s*Math.sin(y*i);P.push({x:h,y:f,z:S})}P.push({x:c.x+s*Math.cos(0),y:c.y+s*Math.sin(0),z:S});H={fillLimit:!0,fillStyle:0,fillColorLimit:!0,fillColor:"#000000",fillOpacity:1};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P,H);var g,M;if(0==(X=this.getScaleValues()[0]))g=(q=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(s,t[1],t[0])).pntRight.x,M=q.pntRight.y;else if(1==X)g=(q=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(s,t[1],t[0])).pntLeft.x,M=q.pntLeft.y;else{if(2!=X)return!0;g=t[0].x,M=t[0].y}if(this.clearScalePoints(),(r=[]).push(t[0]),r.push({x:g,y:M,z:t[0].z}),this.addScalePoint({x:g,y:M,z:t[0].z}),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r,null,!0),l>2){for(a=1;a<l-1;a++){var b;if(0==($=this.getScaleValues()[a])){for(var d=new SuperMap.Geometry.Point(t[a].x,t[a].y),m=new SuperMap.Geometry.Point(t[a+1].x,t[a+1].y),v=new SuperMap.Geometry.Point(t[a-1].x,t[a-1].y),O=SuperMap.Plot.PlottingUtil.radian(d,m)*n,y=(tt=SuperMap.Plot.PlottingUtil.radian(d,v)*n)-O;y<0;)y+=360;var L=y*i/2,U=new SuperMap.Geometry.Point(t[a+1].x,t[a+1].y);SuperMap.Plot.PlottingUtil.rotateAngle(d,L,U),b=SuperMap.Plot.PlottingUtil.linePnt(d,U,s)}else if(1==$){for(var d=new SuperMap.Geometry.Point(t[a].x,t[a].y),m=new SuperMap.Geometry.Point(t[a+1].x,t[a+1].y),v=new SuperMap.Geometry.Point(t[a-1].x,t[a-1].y),O=SuperMap.Plot.PlottingUtil.radian(d,m)*n,y=(tt=SuperMap.Plot.PlottingUtil.radian(d,v)*n)-O;y<0;)y+=360;var L=3.141592653589793-y*i/2,U=new SuperMap.Geometry.Point(t[a-1].x,t[a-1].y);SuperMap.Plot.PlottingUtil.rotateAngle(d,L,U),b=SuperMap.Plot.PlottingUtil.linePnt(d,U,s)}else{if(2!=$)return!0;b.x=t[a].x,b.y=t[a].y}(r=[]).push(t[a]),r.push({x:b.x,y:b.y,z:t[a].z}),this.addScalePoint({x:b.x,y:b.y,z:t[a].z}),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r,null,!0)}var _,w,x=l;if(0==(et=this.getScaleValues()[x-1]))N=(q=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(s,t[x-2],t[x-1])).pntLeft.x,D=q.pntLeft.y,_=(q=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*s,t[x-2],t[x-1])).pntLeft.x,w=q.pntLeft.y;else if(1==et)N=(q=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(s,t[x-2],t[x-1])).pntRight.x,D=q.pntRight.y,_=(q=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*s,t[x-2],t[x-1])).pntRight.x,w=q.pntRight.y;else{if(2!=et)return!0;N=t[x-1].x,D=t[x-1].y,_=t[x-1].x,w=t[x-1].y}(r=[]).push(t[x-1]),r.push({x:N,y:D,z:t[x-1].z}),this.addScalePoint({x:N,y:D,z:t[x-1].z}),this.addScalePoint({x:_,y:w,z:t[x-1].z}),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r,null,!0)}else{if(0==(nt=this.getScaleValues()[1]))B=(q=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(s,t[0],t[1])).pntLeft.x,R=q.pntLeft.y,N=(q=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*s,t[0],t[1])).pntLeft.x,D=q.pntLeft.y;else if(1==nt)B=(q=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(s,t[0],t[1])).pntRight.x,R=q.pntRight.y,N=(q=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*s,t[0],t[1])).pntRight.x,D=q.pntRight.y;else{if(2!=nt)return!0;B=t[1].x,R=t[1].y,N=t[1].x,D=t[1].y}(r=[]).push(t[1]),r.push({x:B,y:R,z:t[1].z}),this.addScalePoint({x:B,y:R,z:t[1].z}),this.addScalePoint({x:N,y:D,z:t[1].z}),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r,null,!0)}var T,E,A=this.getScaleValues().length,G=this.getScaleValues()[A-2],C=Math.abs(p*G),V=this.getScaleValues()[A-1],I=Math.abs(s*V),j=-1,Y=new SuperMap.Geometry.Point;if(j=(at=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(C,t,j)).index,Y=at.pts,!at.bfind)return!0;V>=0?(T=(q=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(I,t[j],Y)).pntRight.x,E=q.pntRight.y):(T=(q=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(I,t[j],Y)).pntLeft.x,E=q.pntLeft.y);var B,R,N,D,k=SuperMap.Plot.PlottingUtil.linePnt(Y,new SuperMap.Geometry.Point(T,E),I),z=.3*I,F=SuperMap.Plot.PlottingUtil.linePnt(k,Y,z),q=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.3*z,k,F);B=q.pntRight.x,R=q.pntRight.y,N=q.pntLeft.x,D=q.pntLeft.y;S=0;return S=j==t.length-1?t[j]:this.ComputeZValue(Y,t[j],t[j+1]),(r=[]).push({x:Y.x,y:Y.y,z:S}),r.push({x:k.x,y:k.y,z:S}),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r,null,!0),(r=[]).push({x:B,y:R,z:S}),r.push({x:N,y:D,z:S}),r.push({x:k.x,y:k.y,z:S}),r.push({x:B,y:R,z:S}),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r,null,!0),this.addScalePoint({x:k.x,y:k.y,z:S}),!0}this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,t);var p=SuperMap.Plot.PlottingUtil.polylineDistance(t),u=this.getScaleValues().length,W=this.getScaleValues()[u-3],s=p*W,c=new SuperMap.Geometry.Point((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2),K=new SuperMap.Geometry.Point(c.x+s,c.y);(P=[]).push(c),P.push(K);var H={fillLimit:!0,fillStyle:0,fillColorLimit:!0,fillColor:"#000000",fillOpacity:1};this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,P,H);var J,X=this.getScaleValues()[0];if(0==X)J=(at=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(s,t[1],t[0])).pntRight;else if(1==X)J=(at=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(s,t[1],t[0])).pntLeft;else{if(2!=X)return;J=t[0]}var Z=[];if(Z.push(t[0]),Z.push(J),this.addScalePoint(J),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,Z,null,!0),t.length>this.minEditPts){for(a=1;a<t.length-1;a++){var Q,$=this.getScaleValues()[a];if(0==$){for(var d=t[a],m=t[a+1],v=t[a-1],O=180*SuperMap.Plot.PlottingUtil.radian(d,m)/Math.PI,y=(tt=180*SuperMap.Plot.PlottingUtil.radian(d,v)/Math.PI)-O;y<0;)y+=360;var L=y/2,U=t[a+1].clone();this._rotate(L,U,d),Q=SuperMap.Plot.PlottingUtil.linePnt(d,U,s)}else if(1==$){for(var d=t[a],m=t[a+1],v=t[a-1],O=180*SuperMap.Plot.PlottingUtil.radian(d,m)/Math.PI,tt=180*SuperMap.Plot.PlottingUtil.radian(d,v)/Math.PI,y=tt-O;y<0;)y+=360;var L=180-y/2,U=t[a-1].clone();this._rotate(L,U,d),Q=SuperMap.Plot.PlottingUtil.linePnt(d,U,s)}else{if(2!=$)continue;Q=t[a]}(Pt=[]).push(t[a]),Pt.push(Q),this.addScalePoint(Q),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,Pt,null,!0)}var x=t.length,et=this.getScaleValues()[x-1];if(0==et)lt=(pt=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(s,t[x-2],t[x-1])).pntLeft,ot=(it=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*s,t[x-2],t[x-1])).pntLeft;else if(1==et)lt=(pt=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(s,t[x-2],t[x-1])).pntRight,ot=(it=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*s,t[x-2],t[x-1])).pntRight;else{if(2!=et)return;lt=t[x-1].clone(),ot=t[x-1].clone()}(Pt=[]).push(t[x-1]),Pt.push(lt),this.addScalePoint(lt),this.addScalePoint(ot),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,Pt,null,!0)}else{var lt,ot,nt=this.getScaleValues()[1];if(0==nt)lt=(pt=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(s,t[0],t[1])).pntLeft,ot=(it=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*s,t[0],t[1])).pntLeft;else if(1==nt){lt=(pt=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(s,t[0],t[1])).pntRight;var it=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*s,t[0],t[1]);ot=it.pntRight}else{if(2!=nt)return;lt=t[1].clone(),ot=t[1].clone()}(Pt=[]).push(t[1]),Pt.push(lt),this.addScalePoint(lt),this.addScalePoint(ot),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,Pt,null,!0)}var rt,A=this.getScaleValues().length,G=this.getScaleValues()[A-2],C=Math.abs(p*G),V=this.getScaleValues()[A-1],I=Math.abs(s*V),at=SuperMap.Plot.PlottingUtil.findPointInPolyLine(t,C);if(-1!==at.index){var j=at.index,Y=at.pt;rt=V>=0?(pt=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(I,t[j],Y)).pntRight:(pt=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(I,t[j],Y)).pntLeft;var k=SuperMap.Plot.PlottingUtil.linePnt(Y,rt,I),z=.3*I,F=SuperMap.Plot.PlottingUtil.linePnt(k,Y,z),pt=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(.3*z,k,F),ut=pt.pntLeft,st=pt.pntRight,Pt=[];Pt.push(Y),Pt.push(k),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,Pt,null,!0),(Pt=[]).push(ut),Pt.push(k),Pt.push(st);var ct={surroundLineFlag:!1,fillLimit:!0,fillColorLimit:!1,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,Pt,ct,!0),this.addScalePoint(k)}}}},{key:"_rotate",value:function(t,e,l){t*=Math.PI/180;var o=SuperMap.Plot.PlottingUtil.distance(e,l),n=t+Math.atan2(e.y-l.y,e.x-l.x);return e.x=l.x+o*Math.cos(n),e.y=l.y+o*Math.sin(n),e}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(l=SuperMap.Plot.PlottingUtil.clearSamePts(l),this.minEditPts>l.length)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=l.length,i=e;if(t>=0&&t<n){var r=!1;if(0===t)r=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t],l[t+1],i);else if(t===n-1)r=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t-1],l[t],i);else{var a=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t-1],l[t],l[t+1]),p=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t-1],l[t],i);if(a!==p)r=p;else{var u=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[t],l[t+1],i);r=u===p?p:u}}this.getScaleValues()[t]=r?1:0}else if(t==n){var s=SuperMap.Plot.PlottingUtil.distance(l[n-1],i),P=(s/=2)/o;this.getScaleValues()[t]=P}else if(t===n+1||t===n+2){for(var c=-1,S=0,y=new SuperMap.Geometry.Point(0,0),h=0;h<l.length-1;h++){var f=[];f.push(l[h]),f.push(l[h+1]);var g=SuperMap.Plot.PlottingUtil.projectPoint(i,l[h],l[h+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(g,f).isOnPolyLine){var M=SuperMap.Plot.PlottingUtil.distance(i,g);-1===c?(c=h,y=g,S=M):S>M&&(c=h,y=g,S=M)}}(-1===c||c>l.length-1)&&(c=0,y=l[0]);for(var b=0,h=0;h<c;h++){var d=l[h],m=l[h+1];b+=SuperMap.Plot.PlottingUtil.distance(d,m)}var v=l[c],O=(b+=SuperMap.Plot.PlottingUtil.distance(v,y))/o;O>.98&&(O=.98),O<.005&&(O=.005),this.getScaleValues()[n+1]=O;var L,U=this.getScaleValues().length,s=o*this.getScaleValues()[U-3];L=SuperMap.Plot.PlottingUtil.pointIsRightToLine(l[c],l[c+1],i)?S/s:-Math.abs(S/s),this.getScaleValues()[n+2]=L}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol50308=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5031401",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(1),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.distance(t[0],t[1]),l=e*this.getScaleValues()[0],o=.1*l,n=SuperMap.Plot.PlottingUtil.linePnt(t[0],t[1],o),i=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(l/2,t[0],n),r=i.pntRight,a=i.pntLeft,p=[];p.push(r),p.push(t[0]),p.push(a);var u=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(p);u=SuperMap.Plot.PlottingUtil.clearSamePts(u);var s={lineColorLimit:!0,lineTypeLimit:!0,surroundLineLimit:!0,color:"#0000ff"};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,s);var P=SuperMap.Plot.PlottingUtil.paraLine(p,e,!1),c=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(P);c=SuperMap.Plot.PlottingUtil.clearSamePts(c),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c,s),this.addScalePoint(r,0)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!==t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]);if(0===t){var n=2*SuperMap.Plot.PlottingUtil.distance(e,l[0])/o;n<.4&&(n=.4),this.getScaleValues()[0]=n}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol5031401=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5032003",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=30,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(90),l.getScaleValues().push(.2),l.getScaleValues().push(.5),l.getScaleValues().push(.05)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[2]=2*o}var n=this.getScaleValues()[0],i=this.getScaleValues()[1],r=this.getScaleValues()[2],a=(this.getScaleValues()[3],this.getScaleValues()[4],l*n),p=i,u=l*r,s=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a,e);if(s.bfind){var P=s.pts.clone(),c=e[s.index].clone(),S=e[s.index+1].clone(),y=SuperMap.Plot.PlottingUtil.radian(c,S)*this.RTOD,h=SuperMap.Plot.PlottingUtil.circlePoint(P,u,u,y+p),f=[];f.push(s.pts),f.push(h);var g={lineTypeLimit:!0,surroundLineLimit:!0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f,g);var M=SuperMap.Plot.PlottingUtil.radian(P,h)*this.RTOD,b=new SuperMap.Geometry.Point(-.2*u,.05*u),d=new SuperMap.Geometry.Point(-.2*u,-.05*u),m=SuperMap.Plot.PlottingUtil.coordinateTrans(h,b,M),v=SuperMap.Plot.PlottingUtil.coordinateTrans(h,d,M),O=[];O.push(h),O.push(m),O.push(v);var L={lineTypeLimit:!0,surroundLineLimit:!0,fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,O,L);var U=.3*u,_=.6*u,w=a-_;w<0&&(w=0);var x=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(w,e);if(x.bfind){var T=[];T.push(x.pts);for(Y=x.index;Y>=0;Y--)T.push(e[Y]);var E=[];E.push(x.pts);for(Y=x.index+1;Y<e.length;Y++)E.push(e[Y]);var A=.6*U,G=[];if(T.length>1){var C=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(A,T);if(C.bfind){(G=[]).push(C.pts);for(Y=C.index+1;Y<T.length;Y++)G.push(T[Y]);T=[],G.length>1&&(T=T.concat(G))}}if(T.length>1&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,T),E.length>1){var V=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(A,E);if(V.bfind){(G=[]).push(V.pts);for(Y=V.index+1;Y<E.length;Y++)G.push(E[Y]);E=[],G.length>1&&(E=E.concat(G))}}var I=a+_;I>l&&(I=l),I=l-I;for(var j=[],Y=E.length-1;Y>=0;Y--)j.push(E[Y]);var B=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(I,j);if(B.bfind){var R=[];R.push(B.pts);for(Y=B.index;Y>=0;Y--)R.push(j[Y]);var N=[];N.push(B.pts);for(Y=B.index+1;Y<j.length;Y++)N.push(j[Y]);if(R.length>1){var D=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(A,R);if(D.bfind){(G=[]).push(D.pts);for(Y=D.index+1;Y<R.length;Y++)G.push(R[Y]);R=[],G.length>1&&(R=R.concat(G))}}if(R.length>1&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,R),N.length>1){var k=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(A,N);if(k.bfind){(G=[]).push(k.pts);for(Y=k.index+1;Y<N.length;Y++)G.push(N[Y]);N=[],G.length>1&&(N=N.concat(G))}}if(N.length>1&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,N),this.getSubSymbols().length>0){for(var z in this.getSubSymbols()){var F=this.getSubSymbols()[z];if(F.symbolData)for(var q in F.symbolData.innerCells)F.symbolData.innerCells[q].type===SuperMap.Plot.SymbolType.POLYBEZIERSYMBOL&&(F.symbolData.innerCells[q].type=SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL),F.symbolData.innerCells[q].type===SuperMap.Plot.SymbolType.TEXTSYMBOL&&F.symbolData.innerCells.splice(parseInt(q),1)}this.computeSubSymbol(this.getSubSymbols()[0],x.pts,1.2*U,y-90),this.computeSubSymbol(this.getSubSymbols()[1],B.pts,1.2*U,y-90)}this.addScalePoint(s.pts,0),this.addScalePoint(h,1)}}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;if(0>t||1<t)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(0===t){for(var i=[],r=0;r<o.length;r++)i.push(o[r]);for(var a=-1,p=new SuperMap.Geometry.Point(0,0),u=0,r=0;r<i.length-1;r++){var s=[];s.push(i[r]),s.push(i[r+1]);var P=SuperMap.Plot.PlottingUtil.projectPoint(e,i[r],i[r+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(P,s).isOnPolyLine){var c=SuperMap.Plot.PlottingUtil.distance(e,P);-1===a?(a=r,p=P,u=c):u>c&&(a=r,p=P,u=c)}}-1===a&&Math.ceil(e.x,1)<=Math.ceil(o[0].x,1)?(a=0,p=o[0]):-1===a&&a===o[o.length-2]&&(a=0,p=o[0]),-1===a&&Math.ceil(e.x,1)>=Math.ceil(o[o.length-1].x,1)?(a=o.length-1,p=o[o.length-1]):-1!==a&&a!==o.length-2||(a=o.length-1,p=o[o.length-1]);for(var S=0,r=0;r<a;r++){var y=o[r].clone(),h=o[r+1].clone();S+=SuperMap.Plot.PlottingUtil.distance(y,h)}var f=o[a].clone(),g=(S+=SuperMap.Plot.PlottingUtil.distance(f,p))/n;this.getScaleValues()[0]=g}if(1===t){var M=n*this.getScaleValues()[0],b=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(M,o);if(!b.bfind)return;var d=b.pts.clone(),m=new SuperMap.Geometry.Point(o[b.index].x,o[b.index].y),v=new SuperMap.Geometry.Point(o[b.index+1].x,o[b.index+1].y),O=SuperMap.Plot.PlottingUtil.radian(m,v)*this.RTOD,L=SuperMap.Plot.PlottingUtil.radian(d,e)*this.RTOD;this.getScaleValues()[1]=L-O;var U=(S=SuperMap.Plot.PlottingUtil.distance(d,e))/n;this.getScaleValues()[2]=U}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol5032003=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5033001",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999999,0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(t),o=.5*l,n=l*this.getSubSymbolScaleValue()/1.2,i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o,e);if(i.bfind){var r=i.pts.clone(),a=e[i.index].clone(),p=e[i.index+1].clone(),u=SuperMap.Plot.PlottingUtil.radian(a,p)*this.RTOD,s=SuperMap.Plot.PlottingUtil.circlePoint(r,n,n,u+90),P=SuperMap.Plot.PlottingUtil.circlePoint(r,n,n,u+270),c=[];c.push(i.pts),c.push(s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c,{lineTypeLimit:!0});var S=SuperMap.Plot.PlottingUtil.radian(r,s)*this.RTOD,y=SuperMap.Plot.PlottingUtil.circlePoint(s,n,n,S+30),h=[];h.push(s),h.push(y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h);var f=SuperMap.Plot.PlottingUtil.radian(s,y)*this.RTOD,g=new SuperMap.Geometry.Point(-.2*n,.05*n),M=new SuperMap.Geometry.Point(-.2*n,-.05*n),b=SuperMap.Plot.PlottingUtil.coordinateTrans(y,g,f),d=SuperMap.Plot.PlottingUtil.coordinateTrans(y,M,f),m=[];m.push(y),m.push(b),m.push(d);var v={fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,m,v);var O=SuperMap.Plot.PlottingUtil.circlePoint(s,n,n,S+330),L=[];L.push(s),L.push(O),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,L);var U=SuperMap.Plot.PlottingUtil.radian(s,O)*this.RTOD,_=SuperMap.Plot.PlottingUtil.coordinateTrans(O,g,U),w=SuperMap.Plot.PlottingUtil.coordinateTrans(O,M,U),x=[];x.push(O),x.push(_),x.push(w),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,x,v),this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],P,n,u+270)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol5033001=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5033802",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.05),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=t[0].clone(),l=t[1].clone(),o=SuperMap.Plot.PlottingUtil.distance(e,l),n=this.getScaleValues()[0]*o,i=SuperMap.Plot.PlottingUtil.linePnt(e,l,.5*o),r=SuperMap.Plot.PlottingUtil.linePnt(i,e,n),a=SuperMap.Plot.PlottingUtil.linePnt(i,l,n),p=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,t[1],t[0]),u=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,t[0],t[1]),s=[];s.push(p.pntRight),s.push(p.pntLeft);var P={lineTypeLimit:!0,surroundLineLimit:!0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s,P);var c=[];c.push(u.pntRight),c.push(u.pntLeft),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c,P);var S=[];S.push(t[0]),S.push(r),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S);var y=[];y.push(a),y.push(t[1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y);var h=SuperMap.Plot.PlottingUtil.radian(t[0],t[1])*this.RTOD;this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],i,2*n,h-90),this.addScalePoint(p.pntLeft,0)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!==t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]);if(0===t){var n=SuperMap.Plot.PlottingUtil.distance(e,l[0])/o;n>.48&&(n=.48),this.getScaleValues()[0]=n}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol5033802=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5033803",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.05),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=t[0].clone(),l=t[1].clone(),o=SuperMap.Plot.PlottingUtil.distance(e,l),n=this.getScaleValues()[0]*o,i=SuperMap.Plot.PlottingUtil.linePnt(e,l,.5*o),r=SuperMap.Plot.PlottingUtil.linePnt(i,e,n),a=SuperMap.Plot.PlottingUtil.linePnt(i,l,n),p=[];p.push(t[0]),p.push(r),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,p);var u=[];u.push(a),u.push(t[1]),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u);var s=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,t[1],t[0]),P=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(n,t[0],t[1]),c=[];c.push(s.pntRight),c.push(s.pntLeft);var S={lineTypeLimit:!0,surroundLineLimit:!0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c,S);var y=[];y.push(P.pntRight),y.push(P.pntLeft),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y,S);var h=[];h.push(t[0]),h.push(r);var f=[];f.push(a),f.push(t[1]);var g=SuperMap.Plot.PlottingUtil.paraLine(h,n,!0),M=SuperMap.Plot.PlottingUtil.paraLine(h,n,!1),b=SuperMap.Plot.PlottingUtil.paraLine(f,n,!0),d=SuperMap.Plot.PlottingUtil.paraLine(f,n,!1);this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,d);var m=SuperMap.Plot.PlottingUtil.radian(t[0],t[1])*this.RTOD;this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],i,2*n,m),this.addScalePoint(s.pntRight,0)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!==t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]);if(0===t){var n=SuperMap.Plot.PlottingUtil.distance(e,l[0])/o;n>.48&&(n=.48),this.getScaleValues()[0]=n}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol5033803=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(110)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return 0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol50342",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol50342=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(112)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return 0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5034201",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol5034201=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(111)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return 0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5034202",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol5034202=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5034203",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999999,0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(t),o=.5*l,n=l*this.getSubSymbolScaleValue()*1.5,i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o,e);if(i.bfind){var r=i.pts.clone(),a=e[i.index].clone(),p=e[i.index+1].clone(),u=SuperMap.Plot.PlottingUtil.radian(a,p)*this.RTOD,s=SuperMap.Plot.PlottingUtil.circlePoint(r,n,n,u+90),P=[];P.push(i.pts),P.push(s),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P,{lineTypeLimit:!0});var c=SuperMap.Plot.PlottingUtil.radian(r,s)*this.RTOD,S=new SuperMap.Geometry.Point(-.2*n,.05*n),y=new SuperMap.Geometry.Point(-.2*n,-.05*n),h=SuperMap.Plot.PlottingUtil.coordinateTrans(s,S,c),f=SuperMap.Plot.PlottingUtil.coordinateTrans(s,y,c),g=[];g.push(s),g.push(h),g.push(f);var M={lineTypeLimit:!0,fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,g,M);var b=new SuperMap.Geometry.Point(0,-.6*n),d=SuperMap.Plot.PlottingUtil.coordinateTrans(r,b,u);this.getSubSymbols().length>0&&this.computeSubSymbol(this.getSubSymbols()[0],d,n,u-90)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol5034203=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5034801",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=3,l.getScaleValues().length,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e,l=t[0].clone(),o=t[1].clone();e=2==t.length?o:t[2].clone();var n=new SuperMap.Geometry.Point((l.x+o.x)/2,(l.y+o.y)/2),i=SuperMap.Plot.PlottingUtil.distance(n,e),r=.5*i,a=(f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(r,n,e)).pntLeft,p=f.pntRight,u=!(n.x>e.x),s=[];u?(s.push(l),s.push(a)):(s.push(l),s.push(p)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,s);var P=[];u?(P.push(o),P.push(p)):(P.push(o),P.push(a)),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,P);var c=.37*i,S=SuperMap.Plot.PlottingUtil.linePnt(n,e,c),y=.09*i,h=[];h.push(S),h.push(new SuperMap.Geometry.Point(S.x,S.y+y)),this.addCell(SuperMap.Plot.SymbolType.CIRCLESYMBOL,h,{lineTypeLimit:!0});var f,g,M,b,d;u?((f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(y,n,S)).pntRight,g=f.pntLeft,(f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*y,n,S)).pntRight,M=f.pntLeft,b=(f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(y,g,M)).pntRight,d=f.pntLeft):(g=(f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(y,n,S)).pntRight,f.pntLeft,M=(f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(2*y,n,S)).pntRight,f.pntLeft,b=(f=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(y,g,M)).pntRight,d=f.pntLeft);var m=[];m.push(g),m.push(M),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m,{lineTypeLimit:!0});var v=[];v.push(b),v.push(d),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,v,{lineTypeLimit:!0}),""===this.textContent&&(this.textContent="催");var O={fontSize:16,fontSizeLimit:!0};O.labelAlign="cm",O.labelRotation=-0,this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[S],O,this.textContent)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol5034801=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(2)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol50352",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=512,l.clearScalePoints(),0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(.148),l.getScaleValues().push(.4),l.getScaleValues().push(.312),l.getScaleValues().push(.2),l.getScaleValues().push(.01)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length<=2&&this.calAssistantLine(),!(t.length<this.minEditPts)){this.getScaleValues().length<6&&(this.getScaleValues().push(.05),this.getScaleValues().push(.148),this.getScaleValues().push(.4),this.getScaleValues().push(.312),this.getScaleValues().push(.2),this.getScaleValues().push(.01)),SuperMap.Geometry.AlgoSymbol1004.prototype.applyUse.apply(this,arguments);var e=new SuperMap.Geometry.Point((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2);if(t.splice(0,2),t.unshift(e),this.getSubSymbols().length>0){var l;if(null===this.getSubSymbols()[0].symbolData)return;l=this.getSubSymbols()[0].symbolData.symbolSize.x;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=o*this.getScaleValues()[4],i=o*this.getScaleValues()[5],r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(n,t),a=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(i,t),p=SuperMap.Plot.PlottingUtil.radian(a.pts,r.pts)*this.RTOD+270,u=60*SuperMap.Plot.PlottingUtil.distance(r.pts,a.pts)/l,s=new SuperMap.Geometry.Point((a.pts.x+r.pts.x)/2,(r.pts.y+a.pts.y)/2);if(null===this.getSubSymbols().length)return;if(null!==this.getSubSymbols()[0].code){this.computeSubSymbol(this.getSubSymbols()[0],s,u,p+90);var P=SuperMap.Plot.PlottingUtil.circlePoint(a.pts,u,u,p+90),c=SuperMap.Plot.PlottingUtil.circlePoint(a.pts,2*u,2*u,p+90),S=[];S.push(P),S.push(c),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S);var y=SuperMap.Plot.PlottingUtil.circlePoint(c,.2*u,.2*u,p+90),h=SuperMap.Plot.PlottingUtil.circlePoint(c,.05*u,.05*u,p),f=SuperMap.Plot.PlottingUtil.circlePoint(c,.05*u,.05*u,p+180),g=[];g.push(y),g.push(h),g.push(f);var M={fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,g,M)}r.pts.isScalePoint=!0,r.pts.tag=this.getScalePoints().length,this.addScalePoint(r.pts.clone()),a.pts.isScalePoint=!0,a.pts.tag=this.getScalePoints().length,this.addScalePoint(a.pts.clone())}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<2)return;if(this.getScaleValues().length<6&&(this.getScaleValues().push(.05),this.getScaleValues().push(.148),this.getScaleValues().push(.4),this.getScaleValues().push(.312),this.getScaleValues().push(.2),this.getScaleValues().push(.01)),t<=2)SuperMap.Geometry.AlgoSymbol1004.prototype.modifyPoint.apply(this,arguments);else if(3==t||4==t){var o=new SuperMap.Geometry.Point((l[0].x+l[1].x)/2,(l[0].y+l[1].y)/2),n=SuperMap.Plot.PlottingUtil.clonePoints(l);n.splice(0,2),n.unshift(o);var i=SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(e,n),r=SuperMap.Plot.PlottingUtil.polylineDistance(n);if(-1===i.index&&3===t&&(i.pt=o.clone()),-1==i.index&&4==t)this.getScaleValues()[t+1]=.01;else{var a=SuperMap.Plot.PlottingUtil.clonePoints(n);a.splice(0,i.index+1),a.unshift(i.pt);var p=SuperMap.Plot.PlottingUtil.polylineDistance(a);r<p&&(p=r),this.getScaleValues()[t+1]=(r-p)/r,this.getScaleValues()[4]>.5&&(this.getScaleValues()[4]=.5)}}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol50352=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5035201",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999999,0===l.getScaleValues().length&&(l.getScaleValues().push(1e3),l.getScaleValues().push(.2),l.getScaleValues().push(.01)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(t);this.getIsEdit()||(this.getScaleValues()[1]=2*this.getSubSymbolScaleValue());var o=l*this.getScaleValues()[1],n=SuperMap.Plot.PlottingUtil.findPointInPolyLine(e,o);if(-1!==n.index){var i=t[0].clone(),r=n.pt,a=SuperMap.Plot.PlottingUtil.radian(i,r)*this.RTOD,p=[];p.push(n.pt);for(var u=n.index+1;u<e.length;u++)p.push(e[u]);this.addArrow(p);var s=.3*o,P=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(2/3*.5,t[0],n.pt);if(this.getSubSymbols().length>=0){this.computeSubSymbol(this.getSubSymbols()[0],P,s,a);var c=SuperMap.Plot.PlottingUtil.circlePoint(t[0],2.1*s,2.1*s,a),S=SuperMap.Plot.PlottingUtil.circlePoint(t[0],3*s,3*s,a),y=[];y.push(c),y.push(S),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,y);var h=SuperMap.Plot.PlottingUtil.circlePoint(S,.2*s,.2*s,a),f=SuperMap.Plot.PlottingUtil.circlePoint(S,.05*s,.05*s,a+90),g=SuperMap.Plot.PlottingUtil.circlePoint(S,.05*s,.05*s,a+270),M=[];M.push(h),M.push(f),M.push(g);var b={fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,M,b)}var d=SuperMap.Plot.PlottingUtil.circlePoint(i,o,o,a+90);this.addScalePoint(d,0)}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=l[0].clone(),i=e.clone(),r=SuperMap.Plot.PlottingUtil.distance(i,n);if(0===t){var a=r/o;a<=.06&&(a=.06),a>=.15&&(a=.15),this.getScaleValues()[1]=a}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol5035201=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(2)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5035202",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=512,l.clearScalePoints(),0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(.148),l.getScaleValues().push(.4),l.getScaleValues().push(.312),l.getScaleValues().push(.2),l.getScaleValues().push(.01)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length<=2&&this.calAssistantLine(),!(t.length<this.minEditPts)){this.getScaleValues().length<6&&(this.getScaleValues().push(.05),this.getScaleValues().push(.148),this.getScaleValues().push(.4),this.getScaleValues().push(.312),this.getScaleValues().push(.2),this.getScaleValues().push(.01)),SuperMap.Geometry.AlgoSymbol1004.prototype.applyUse.apply(this,arguments);var e=new SuperMap.Geometry.Point((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2);if(t.splice(0,2),t.unshift(e),this.getSubSymbols().length>0){var l;if(null===this.getSubSymbols()[0].symbolData)return;l=this.getSubSymbols()[0].symbolData.symbolSize.x;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=o*this.getScaleValues()[4],i=o*this.getScaleValues()[5],r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(n,t),a=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(i,t),p=SuperMap.Plot.PlottingUtil.radian(a.pts,r.pts)*this.RTOD+270,u=60*SuperMap.Plot.PlottingUtil.distance(r.pts,a.pts)/l,s=new SuperMap.Geometry.Point((a.pts.x+r.pts.x)/2,(r.pts.y+a.pts.y)/2);null!==this.getSubSymbols().length&&this.computeSubSymbol(this.getSubSymbols()[0],s,u,p-90),r.pts.isScalePoint=!0,r.pts.tag=this.getScalePoints().length,this.addScalePoint(r.pts.clone()),a.pts.isScalePoint=!0,a.pts.tag=this.getScalePoints().length,this.addScalePoint(a.pts.clone())}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<2)return;if(this.getScaleValues().length<6&&(this.getScaleValues().push(.05),this.getScaleValues().push(.148),this.getScaleValues().push(.4),this.getScaleValues().push(.312),this.getScaleValues().push(.2),this.getScaleValues().push(.01)),t<=2)SuperMap.Geometry.AlgoSymbol1004.prototype.modifyPoint.apply(this,arguments);else if(3===t||4===t){var o=new SuperMap.Geometry.Point((l[0].x+l[1].x)/2,(l[0].y+l[1].y)/2),n=SuperMap.Plot.PlottingUtil.clonePoints(l);n.splice(0,2),n.unshift(o);var i=SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(e,n),r=SuperMap.Plot.PlottingUtil.polylineDistance(n);if(-1===i.index&&3===t&&(i.pt=o.clone()),-1===i.index&&4===t)this.getScaleValues()[t+1]=.01;else{var a=SuperMap.Plot.PlottingUtil.clonePoints(n);a.splice(0,i.index+1),a.unshift(i.pt);var p=SuperMap.Plot.PlottingUtil.polylineDistance(a);r<p&&(p=r),this.getScaleValues()[t+1]=(r-p)/r,this.getScaleValues()[4]>.5&&(this.getScaleValues()[4]=.5)}}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol5035202=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(2)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5035203",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=512,l.clearScalePoints(),0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(.148),l.getScaleValues().push(.4),l.getScaleValues().push(.312),l.getScaleValues().push(.2),l.getScaleValues().push(.01)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length<=2&&this.calAssistantLine(),!(t.length<this.minEditPts)){this.getScaleValues().length<6&&(this.getScaleValues().push(.05),this.getScaleValues().push(.148),this.getScaleValues().push(.4),this.getScaleValues().push(.312),this.getScaleValues().push(.2),this.getScaleValues().push(.01)),SuperMap.Geometry.AlgoSymbol1004.prototype.applyUse.apply(this,arguments);var e=new SuperMap.Geometry.Point((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2);t.splice(0,2),t.unshift(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(t),o=l*this.getScaleValues()[4],n=l*this.getScaleValues()[5],i=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(o,t),r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(n,t),a=SuperMap.Plot.PlottingUtil.radian(r.pts,i.pts)*this.RTOD,p=SuperMap.Plot.PlottingUtil.distance(i.pts,r.pts),u=r.pts.clone(),s=new SuperMap.Geometry.Point(0,.1*p),P=new SuperMap.Geometry.Point(.4*p,.1*p),c=new SuperMap.Geometry.Point(.4*p,-.1*p),S=new SuperMap.Geometry.Point(0,-.1*p),y=SuperMap.Plot.PlottingUtil.coordinateTrans(u,s,a),h=SuperMap.Plot.PlottingUtil.coordinateTrans(u,P,a),f=SuperMap.Plot.PlottingUtil.coordinateTrans(u,c,a),g=SuperMap.Plot.PlottingUtil.coordinateTrans(u,S,a),M=[];M.push(y),M.push(h),M.push(f),M.push(g),M.push(y);var b={fillLimit:!0,lineTypeLimit:!0,surroundLineLimit:!0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M,b);var d=new SuperMap.Geometry.Point(.05*p,0),m=new SuperMap.Geometry.Point(.15*p,0),v=SuperMap.Plot.PlottingUtil.coordinateTrans(u,d,a),O=SuperMap.Plot.PlottingUtil.coordinateTrans(u,m,a),L=[];L.push(v),L.push(O);var U={lineTypeLimit:!0,surroundLineLimit:!0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,L,U);var _=new SuperMap.Geometry.Point(.1*p,.05*p),w=new SuperMap.Geometry.Point(.1*p,-.05*p),x=SuperMap.Plot.PlottingUtil.coordinateTrans(u,_,a),T=SuperMap.Plot.PlottingUtil.coordinateTrans(u,w,a),E=[];E.push(x),E.push(T),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,E,U);var A=new SuperMap.Geometry.Point(.25*p,.05*p),G=new SuperMap.Geometry.Point(.35*p,.05*p),C=SuperMap.Plot.PlottingUtil.coordinateTrans(u,A,a),V=SuperMap.Plot.PlottingUtil.coordinateTrans(u,G,a),I=[];I.push(C),I.push(V),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,I,U);var j=new SuperMap.Geometry.Point(.3*p,.05*p),Y=new SuperMap.Geometry.Point(.3*p,-.05*p),B=SuperMap.Plot.PlottingUtil.coordinateTrans(u,j,a),R=SuperMap.Plot.PlottingUtil.coordinateTrans(u,Y,a),N=[];N.push(B),N.push(R),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,N,U);var D=new SuperMap.Geometry.Point(.25*p,-.05*p),k=new SuperMap.Geometry.Point(.35*p,-.05*p),z=SuperMap.Plot.PlottingUtil.coordinateTrans(u,D,a),F=SuperMap.Plot.PlottingUtil.coordinateTrans(u,k,a),q=[];q.push(z),q.push(F),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,q,U);var W=new SuperMap.Geometry.Point(.4*p,0),K=new SuperMap.Geometry.Point(.8*p,0),H=SuperMap.Plot.PlottingUtil.coordinateTrans(u,W,a),J=SuperMap.Plot.PlottingUtil.coordinateTrans(u,K,a),X=[];X.push(H),X.push(J),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,X,U);var Z=new SuperMap.Geometry.Point(.7*p,.025*p),Q=new SuperMap.Geometry.Point(.7*p,-.025*p),$=SuperMap.Plot.PlottingUtil.coordinateTrans(u,Z,a),tt=SuperMap.Plot.PlottingUtil.coordinateTrans(u,Q,a),et=[];et.push(J),et.push($),et.push(tt);var lt={fillLimit:!0,lineTypeLimit:!0,surroundLineLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,et,lt),i.pts.isScalePoint=!0,i.pts.tag=this.getScalePoints().length,this.addScalePoint(i.pts.clone()),r.pts.isScalePoint=!0,r.pts.tag=this.getScalePoints().length,this.addScalePoint(r.pts.clone())}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<2)return;if(this.getScaleValues().length<6&&(this.getScaleValues().push(.05),this.getScaleValues().push(.148),this.getScaleValues().push(.4),this.getScaleValues().push(.312),this.getScaleValues().push(.2),this.getScaleValues().push(.01)),t<=2)SuperMap.Geometry.AlgoSymbol1004.prototype.modifyPoint.apply(this,arguments);else if(3===t||4===t){var o=new SuperMap.Geometry.Point((l[0].x+l[1].x)/2,(l[0].y+l[1].y)/2),n=SuperMap.Plot.PlottingUtil.clonePoints(l);n.splice(0,2),n.unshift(o);var i=SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(e,n),r=SuperMap.Plot.PlottingUtil.polylineDistance(n);if(-1===i.index&&3===t&&(i.pt=o.clone()),-1===i.index&&4===t)this.getScaleValues()[t+1]=.01;else{var a=SuperMap.Plot.PlottingUtil.clonePoints(n);a.splice(0,i.index+1),a.unshift(i.pt);var p=SuperMap.Plot.PlottingUtil.polylineDistance(a);r<p&&(p=r),this.getScaleValues()[t+1]=(r-p)/r,this.getScaleValues()[4]>.5&&(this.getScaleValues()[4]=.5)}}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol5035203=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol5035205",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=1e3,0===l.getScaleValues().length&&(l.getScaleValues().push(0),l.getScaleValues().push(0),l.getScaleValues().push(.02)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine(),!(this.controlPoints.length<3)){this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,t);var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(t);this.getIsEdit()||(this.getScaleValues()[2]=this.getSubSymbolScaleValue()/3);var o=this.getScaleValues()[0],n=this.getScaleValues()[1],i=e*this.getScaleValues()[2],r=new SuperMap.Geometry.Point(l.x+e*o,l.y+e*n),a=new SuperMap.Geometry.Point(r.x-4*i,r.y),p=new SuperMap.Geometry.Point(r.x-4*i,r.y-i/2),u=[];u.push(a),u.push(p);var s={lineTypeLimit:!0,fillLimit:!0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u,s);var P=new SuperMap.Geometry.Point(r.x-4*i,r.y),c=new SuperMap.Geometry.Point(r.x-i,r.y),S=[];S.push(P),S.push(c),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,S,s),this.getSubSymbols().length>=0&&this.computeSubSymbol(this.getSubSymbols()[0],r,2*i,0);var y=new SuperMap.Geometry.Point(r.x+4*i,r.y),h=new SuperMap.Geometry.Point(r.x+i,r.y),f=[];f.push(y),f.push(h),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f,s);var g=new SuperMap.Geometry.Point(r.x+4*i,r.y+i/2),M=new SuperMap.Geometry.Point(r.x+4*i,r.y),b=[];b.push(g),b.push(M),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,b,s),this.addScalePoint(r,0);var d=SuperMap.Plot.PlottingUtil.circlePoint(r,2*i,2*i,90);this.addScalePoint(d,1)}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){if(0!=t&&1!=t)return;var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);l=SuperMap.Plot.PlottingUtil.clearSamePts(l);var o=SuperMap.Plot.PlottingUtil.polylineDistance(l),n=SuperMap.Plot.PlottingUtil.getPolygonCenterPt(l);if(0===o)return;if(0===t){i=(e.x-n.x)/o;this.getScaleValues()[0]=i;r=(e.y-n.y)/o;this.getScaleValues()[1]=r}if(1===t){var i=this.getScaleValues()[0],r=this.getScaleValues()[1],a=new SuperMap.Geometry.Point(n.x+o*i,n.y+o*r),p=SuperMap.Plot.PlottingUtil.distance(a,e)/2/o;this.getScaleValues()[2]=p}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol5035205=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol60203",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){for(var e=SuperMap.Plot.Primitives.getSpatialData(SuperMap.Plot.SymbolType.RECTANGLESYMBOL,t),l=[],o=0;o<e.length;o++)l.push(e[o]);if(!(l.length<4)){var n=SuperMap.Plot.PlottingUtil.distance(l[0],l[1]),i=SuperMap.Plot.PlottingUtil.distance(l[1],l[2]),r=0;n<i?(r=.2*n,.2*n):(r=.2*i,.2*i);var a=SuperMap.Plot.PlottingUtil.findPointInLine(l[0],l[1],.5*n-.5*r),p=SuperMap.Plot.PlottingUtil.findPointInLine(l[0],l[1],.5*n+.5*r),u=SuperMap.Plot.PlottingUtil.findPointInLine(l[1],l[2],.5*i-.5*r),s=SuperMap.Plot.PlottingUtil.findPointInLine(l[1],l[2],.5*i+.5*r),P=SuperMap.Plot.PlottingUtil.findPointInLine(l[2],l[3],.5*n-.5*r),c=SuperMap.Plot.PlottingUtil.findPointInLine(l[2],l[3],.5*n+.5*r),S=SuperMap.Plot.PlottingUtil.findPointInLine(l[3],l[0],.5*i-.5*r),y=SuperMap.Plot.PlottingUtil.findPointInLine(l[3],l[0],.5*i+.5*r),h=[];h.push(y),h.push(l[0]),h.push(a),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h);var f=[];f.push(p),f.push(l[1]),f.push(u),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);var g=[];g.push(s),g.push(l[2]),g.push(P),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var M=[];M.push(c),M.push(l[3]),M.push(S),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M),""===this.textContent&&(this.textContent="避");var b={fontSizeLimit:!0,fontSize:20};b.labelAlign="cm",b.labelRotation=-0;var d=new SuperMap.Geometry.Point((l[0].x+l[2].x)/2,(l[0].y+l[2].y)/2);this.addCell(SuperMap.Plot.SymbolType.TEXTSYMBOL,[d],b,this.textContent)}}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol60203=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol60205",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=9999999,0===l.getScaleValues().length&&(l.getScaleValues().push(.5),l.getScaleValues().push(90),l.getScaleValues().push(.2),l.getScaleValues().push(.5),l.getScaleValues().push(.05)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(t);e=SuperMap.Plot.PlottingUtil.clearSamePts(e);var l=SuperMap.Plot.PlottingUtil.polylineDistance(e);if(!this.getIsEdit()){var o=this.getDefaultSubSymbolSize()/l;(o>.3||o<=0)&&(o=.3),this.getScaleValues()[2]=2*o}var n=this.getScaleValues()[0],i=this.getScaleValues()[1],r=this.getScaleValues()[2],a=(this.getScaleValues()[3],this.getScaleValues()[4],l*n),p=i,u=l*r,s=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(a,e);if(s.bfind){var P=s.pts.clone(),c=e[s.index].clone(),S=e[s.index+1].clone(),y=SuperMap.Plot.PlottingUtil.radian(c,S)*this.RTOD,h=SuperMap.Plot.PlottingUtil.circlePoint(P,u,u,y+p),f=[];f.push(s.pts),f.push(h);var g={lineTypeLimit:!0,surroundLineLimit:!0};this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f,g);var M=SuperMap.Plot.PlottingUtil.radian(P,h)*this.RTOD,b=new SuperMap.Geometry.Point(-.2*u,.05*u),d=new SuperMap.Geometry.Point(-.2*u,-.05*u),m=SuperMap.Plot.PlottingUtil.coordinateTrans(h,b,M),v=SuperMap.Plot.PlottingUtil.coordinateTrans(h,d,M),O=[];O.push(h),O.push(m),O.push(v);var L={lineTypeLimit:!0,surroundLineLimit:!0,fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,O,L);var U=.3*u,_=.6*u,w=a-_;w<0&&(w=0);var x=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(w,e);if(x.bfind){var T=[];T.push(x.pts);for(Y=x.index;Y>=0;Y--)T.push(e[Y]);var E=[];E.push(x.pts);for(Y=x.index+1;Y<e.length;Y++)E.push(e[Y]);var A=.6*U,G=[];if(T.length>1){var C=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(A,T);if(C.bfind){(G=[]).push(C.pts);for(Y=C.index+1;Y<T.length;Y++)G.push(T[Y]);T=[],G.length>1&&(T=T.concat(G))}}if(T.length>1&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,T),E.length>1){var V=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(A,E);if(V.bfind){(G=[]).push(V.pts);for(Y=V.index+1;Y<E.length;Y++)G.push(E[Y]);E=[],G.length>1&&(E=E.concat(G))}}var I=a+_;I>l&&(I=l),I=l-I;for(var j=[],Y=E.length-1;Y>=0;Y--)j.push(E[Y]);var B=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(I,j);if(B.bfind){var R=[];R.push(B.pts);for(Y=B.index;Y>=0;Y--)R.push(j[Y]);var N=[];N.push(B.pts);for(Y=B.index+1;Y<j.length;Y++)N.push(j[Y]);if(R.length>1){var D=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(A,R);if(D.bfind){(G=[]).push(D.pts);for(Y=D.index+1;Y<R.length;Y++)G.push(R[Y]);R=[],G.length>1&&(R=R.concat(G))}}if(R.length>1&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,R),N.length>1){var k=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(A,N);if(k.bfind){(G=[]).push(k.pts);for(Y=k.index+1;Y<N.length;Y++)G.push(N[Y]);N=[],G.length>1&&(N=N.concat(G))}}N.length>1&&this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,N),this.getSubSymbols().length>0&&(this.computeSubSymbol(this.getSubSymbols()[0],x.pts,U,y+p+180,.3),this.computeSubSymbol(this.getSubSymbols()[1],B.pts,U,y+p+180,.3)),this.addScalePoint(s.pts,0),this.addScalePoint(h,1)}}}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<this.minEditPts)return;if(0>t||1<t)return;var o=SuperMap.Plot.PlottingUtil.generateBeizerPointsNoCtrlPt(l);o=SuperMap.Plot.PlottingUtil.clearSamePts(o);var n=SuperMap.Plot.PlottingUtil.polylineDistance(o);if(0===t){for(var i=[],r=0;r<o.length;r++)i.push(o[r]);for(var a=-1,p=new SuperMap.Geometry.Point(0,0),u=0,r=0;r<i.length-1;r++){var s=[];s.push(i[r]),s.push(i[r+1]);var P=SuperMap.Plot.PlottingUtil.projectPoint(e,i[r],i[r+1]);if(SuperMap.Plot.PlottingUtil.pointIsOnPolyLines(P,s).isOnPolyLine){var c=SuperMap.Plot.PlottingUtil.distance(e,P);-1===a?(a=r,p=P,u=c):u>c&&(a=r,p=P,u=c)}}-1===a&&Math.ceil(e.x,1)<=Math.ceil(o[0].x,1)?(a=0,p=o[0]):-1===a&&a===o[o.length-2]&&(a=0,p=o[0]),-1===a&&Math.ceil(e.x,1)>=Math.ceil(o[o.length-1].x,1)?(a=o.length-1,p=o[o.length-1]):-1!==a&&a!==o.length-2||(a=o.length-1,p=o[o.length-1]);for(var S=0,r=0;r<a;r++){var y=o[r].clone(),h=o[r+1].clone();S+=SuperMap.Plot.PlottingUtil.distance(y,h)}var f=o[a].clone(),g=(S+=SuperMap.Plot.PlottingUtil.distance(f,p))/n;this.getScaleValues()[0]=g}if(1===t){var M=n*this.getScaleValues()[0],b=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(M,o);if(!b.bfind)return;var d=b.pts.clone(),m=new SuperMap.Geometry.Point(o[b.index].x,o[b.index].y),v=new SuperMap.Geometry.Point(o[b.index+1].x,o[b.index+1].y),O=SuperMap.Plot.PlottingUtil.radian(m,v)*this.RTOD,L=SuperMap.Plot.PlottingUtil.radian(d,e)*this.RTOD;this.getScaleValues()[1]=L-O;var U=(S=SuperMap.Plot.PlottingUtil.distance(d,e))/n;this.getScaleValues()[2]=U}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol60205=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(1)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="爆",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol60301",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol60301=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(1)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="挖",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol6030101",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol6030101=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(1)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="浇",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol6030102",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol6030102=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(1)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="砌",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol6030103",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol6030103=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(1)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="装",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol6030104",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol6030104=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(1)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="石",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol6030105",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol6030105=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(1)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="沙",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol6030106",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol6030106=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(1)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="练",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol6030107",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol6030107=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(l(8)),a=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.subText="隧",l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol60304",l}return i(e,r["default"]),e}();e.default=a,SuperMap.Geometry.AlgoSymbol60304=a},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol60305",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=.05*SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.paraLine(t,e,!0),o=SuperMap.Plot.PlottingUtil.paraLine(t,e,!1),n=l[0],i=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.2,l[0],l[1]),r=[];r.push(n),r.push(i),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r);var a=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.2+.2/3,l[0],l[1]),p=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.4+.2/3,l[0],l[1]),u=[];u.push(a),u.push(p),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u);var s=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.4+.2/3*2,l[0],l[1]),P=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(3*.2+.2/3*2,l[0],l[1]),c=[];c.push(s),c.push(P),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c);var S=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.8,l[0],l[1]),y=l[1],h=[];h.push(S),h.push(y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h);var f=o[0],g=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.2,o[0],o[1]),M=[];M.push(f),M.push(g),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M);var b=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.2+.2/3,o[0],o[1]),d=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.4+.2/3,o[0],o[1]),m=[];m.push(b),m.push(d),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m);var v=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.4+.2/3*2,o[0],o[1]),O=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(3*.2+.2/3*2,o[0],o[1]),L=[];L.push(v),L.push(O),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,L);var U=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.8,o[0],o[1]),_=o[1],w=[];w.push(U),w.push(_),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,w);var x=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(1/3,t[0],t[1]),T=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(1/3*2,t[0],t[1]),E=[];E.push(x),E.push(T),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,E);var A=SuperMap.Plot.PlottingUtil.radian(x,T)*this.RTOD,G=SuperMap.Plot.PlottingUtil.distance(x,T),C=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.2,x,T),V=SuperMap.Plot.PlottingUtil.circlePoint(C,.025*G,.025*G,A+90),I=SuperMap.Plot.PlottingUtil.circlePoint(C,.025*G,.025*G,A-90),j=[];j.push(V),j.push(I),j.push(x);var Y={fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,j,Y)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol60305=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol6030501",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=.05*SuperMap.Plot.PlottingUtil.polylineDistance(t),l=SuperMap.Plot.PlottingUtil.paraLine(t,e,!0),o=SuperMap.Plot.PlottingUtil.paraLine(t,e,!1),n=l[0],i=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.2,l[0],l[1]),r=[];r.push(n),r.push(i),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,r);var a=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.2+.2/3,l[0],l[1]),p=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.4+.2/3,l[0],l[1]),u=[];u.push(a),u.push(p),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,u);var s=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.4+.2/3*2,l[0],l[1]),P=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(3*.2+.2/3*2,l[0],l[1]),c=[];c.push(s),c.push(P),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c);var S=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.8,l[0],l[1]),y=l[1],h=[];h.push(S),h.push(y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,h);var f=o[0],g=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.2,o[0],o[1]),M=[];M.push(f),M.push(g),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M);var b=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.2+.2/3,o[0],o[1]),d=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.4+.2/3,o[0],o[1]),m=[];m.push(b),m.push(d),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,m);var v=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.4+.2/3*2,o[0],o[1]),O=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(3*.2+.2/3*2,o[0],o[1]),L=[];L.push(v),L.push(O),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,L);var U=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.8,o[0],o[1]),_=o[1],w=[];w.push(U),w.push(_),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,w);var x=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.2,t[0],t[1]),T=t[0].clone(),E=[];E.push(x),E.push(T),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,E);var A=SuperMap.Plot.PlottingUtil.radian(x,T)*this.RTOD,G=SuperMap.Plot.PlottingUtil.distance(x,T),C=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.2,x,T),V=SuperMap.Plot.PlottingUtil.circlePoint(C,.025*G,.025*G,A+90),I=SuperMap.Plot.PlottingUtil.circlePoint(C,.025*G,.025*G,A-90),j=[];j.push(V),j.push(I),j.push(x);var Y={fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,j,Y);var B=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.2,t[1],t[0]),R=t[1].clone(),N=[];N.push(B),N.push(R),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,N);var D=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.2,B,R),k=SuperMap.Plot.PlottingUtil.circlePoint(D,.025*G,.025*G,A+90),z=SuperMap.Plot.PlottingUtil.circlePoint(D,.025*G,.025*G,A-90),F=[];F.push(k),F.push(z),F.push(B),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,F,Y)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol6030501=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol60306",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.1),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=this.getScaleValues()[0]*e,o=t[0].clone(),n=t[1].clone(),i=SuperMap.Plot.PlottingUtil.linePnt(n,o,e+.2*e),r=SuperMap.Plot.PlottingUtil.linePnt(o,n,e+.2*e),a=1.5*l,p=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(a,n,i),u=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(a,o,r),s=SuperMap.Plot.PlottingUtil.paraLine(t,l,!0),P=SuperMap.Plot.PlottingUtil.paraLine(t,l,!1),c=SuperMap.Plot.PlottingUtil.linePnt(s[0],s[s.length-1],3*e/11),S=SuperMap.Plot.PlottingUtil.linePnt(s[0],s[s.length-1],4*e/11),y=SuperMap.Plot.PlottingUtil.linePnt(s[0],s[s.length-1],7*e/11),h=SuperMap.Plot.PlottingUtil.linePnt(s[0],s[s.length-1],8*e/11),f=[];f.push(p.pntRight),f.push(s[0]),f.push(c),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);var g=[];g.push(S),g.push(y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var M=[];M.push(h),M.push(s[s.length-1]),M.push(u.pntLeft),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M);var b=SuperMap.Plot.PlottingUtil.linePnt(P[0],P[P.length-1],3*e/11),d=SuperMap.Plot.PlottingUtil.linePnt(P[0],P[P.length-1],4*e/11),m=SuperMap.Plot.PlottingUtil.linePnt(P[0],P[P.length-1],7*e/11),v=SuperMap.Plot.PlottingUtil.linePnt(P[0],P[P.length-1],8*e/11),O=[];O.push(p.pntLeft),O.push(P[0]),O.push(b),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,O);var L=[];L.push(d),L.push(m),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,L);var U=[];U.push(v),U.push(P[P.length-1]),U.push(u.pntRight),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol60306=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(0)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol6030601",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=2,l.maxEditPts=2,0===l.getScaleValues().length&&l.getScaleValues().push(.1),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(!((t=SuperMap.Plot.PlottingUtil.clearSamePts(t)).length<this.minEditPts)){var e=SuperMap.Plot.PlottingUtil.polylineDistance(t),l=this.getScaleValues()[0]*e,o=t[0].clone(),n=t[1].clone(),i=SuperMap.Plot.PlottingUtil.linePnt(n,o,e+.2*e),r=SuperMap.Plot.PlottingUtil.linePnt(o,n,e+.2*e),a=1.5*l,p=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(a,n,i),u=SuperMap.Plot.PlottingUtil.getSidePointsOfLine(a,o,r),s=SuperMap.Plot.PlottingUtil.paraLine(t,l,!0),P=SuperMap.Plot.PlottingUtil.paraLine(t,l,!1),c=SuperMap.Plot.PlottingUtil.linePnt(s[0],s[s.length-1],3*e/11),S=SuperMap.Plot.PlottingUtil.linePnt(s[0],s[s.length-1],4*e/11),y=SuperMap.Plot.PlottingUtil.linePnt(s[0],s[s.length-1],7*e/11),h=SuperMap.Plot.PlottingUtil.linePnt(s[0],s[s.length-1],8*e/11),f=[];f.push(p.pntRight),f.push(s[0]),f.push(c),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,f);var g=[];g.push(S),g.push(y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,g);var M=[];M.push(h),M.push(s[s.length-1]),M.push(u.pntLeft),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,M);var b=SuperMap.Plot.PlottingUtil.linePnt(P[0],P[P.length-1],3*e/11),d=SuperMap.Plot.PlottingUtil.linePnt(P[0],P[P.length-1],4*e/11),m=SuperMap.Plot.PlottingUtil.linePnt(P[0],P[P.length-1],7*e/11),v=SuperMap.Plot.PlottingUtil.linePnt(P[0],P[P.length-1],8*e/11),O=[];O.push(p.pntLeft),O.push(P[0]),O.push(b),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,O);var L=[];L.push(d),L.push(m),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,L);var U=[];U.push(v),U.push(P[P.length-1]),U.push(u.pntRight),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,U);var _=new SuperMap.Geometry.Point((p.pntLeft.x+p.pntRight.x)/2,(p.pntLeft.y+p.pntRight.y)/2),w=new SuperMap.Geometry.Point((c.x+b.x)/2,(c.y+b.y)/2),x=[];x.push(_),x.push(w),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,x);var T=SuperMap.Plot.PlottingUtil.radian(_,w)*this.RTOD,E=SuperMap.Plot.PlottingUtil.distance(_,w),A=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.8,_,w),G=SuperMap.Plot.PlottingUtil.circlePoint(A,.025*E,.025*E,T+90),C=SuperMap.Plot.PlottingUtil.circlePoint(A,.025*E,.025*E,T-90),V=[];V.push(G),V.push(C),V.push(w);var I={fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,V,I);var j=new SuperMap.Geometry.Point((u.pntLeft.x+u.pntRight.x)/2,(u.pntLeft.y+u.pntRight.y)/2),Y=new SuperMap.Geometry.Point((h.x+v.x)/2,(h.y+v.y)/2),B=[];B.push(j),B.push(Y),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,B);var R=SuperMap.Plot.PlottingUtil.findPointOnLineByRatio(.8,j,Y),N=SuperMap.Plot.PlottingUtil.circlePoint(R,.025*E,.025*E,T+90),D=SuperMap.Plot.PlottingUtil.circlePoint(R,.025*E,.025*E,T-90),k=[];k.push(N),k.push(D),k.push(Y),this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,k,I)}}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol6030601=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(2)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol60310",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=512,l.clearScalePoints(),0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(.148),l.getScaleValues().push(.4),l.getScaleValues().push(.312),l.getScaleValues().push(.2),l.getScaleValues().push(.01)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){this.getScaleValues().length<6&&(this.getScaleValues().push(.05),this.getScaleValues().push(.148),this.getScaleValues().push(.4),this.getScaleValues().push(.312),this.getScaleValues().push(.2),this.getScaleValues().push(.01)),SuperMap.Geometry.AlgoSymbol1004.prototype.applyUse.apply(this,arguments);var e=new SuperMap.Geometry.Point((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2);if(t.splice(0,2),t.unshift(e),this.getSubSymbols().length>0){var l;if(null===this.getSubSymbols()[0].symbolData)return;l=this.getSubSymbols()[0].symbolData.symbolSize.x;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=o*this.getScaleValues()[4],i=o*this.getScaleValues()[5],r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(n,t),a=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(i,t),p=SuperMap.Plot.PlottingUtil.radian(a.pts,r.pts)*this.RTOD+270,u=100*SuperMap.Plot.PlottingUtil.distance(r.pts,a.pts)/l;if(null===this.getSubSymbols().length)return;if(null!==this.getSubSymbols()[0].code){this.computeSubSymbol(this.getSubSymbols()[0],a.pts,u,p-90);var s=SuperMap.Plot.PlottingUtil.circlePoint(a.pts,u,u,p+90),P=SuperMap.Plot.PlottingUtil.circlePoint(a.pts,2*u,2*u,p+90),c=[];c.push(s),c.push(P),this.addCell(SuperMap.Plot.SymbolType.POLYLINESYMBOL,c);var S=SuperMap.Plot.PlottingUtil.circlePoint(P,.2*u,.2*u,p+90),y=SuperMap.Plot.PlottingUtil.circlePoint(P,.05*u,.05*u,p),h=SuperMap.Plot.PlottingUtil.circlePoint(P,.05*u,.05*u,p+180),f=[];f.push(S),f.push(y),f.push(h);var g={fillLimit:!0,fillStyle:0};this.addCell(SuperMap.Plot.SymbolType.ARBITRARYPOLYGONSYMBOL,f,g)}r.pts.isScalePoint=!0,r.pts.tag=this.getScalePoints().length,this.addScalePoint(r.pts.clone()),a.pts.isScalePoint=!0,a.pts.tag=this.getScalePoints().length,this.addScalePoint(a.pts.clone())}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<2)return;if(this.getScaleValues().length<6&&(this.getScaleValues().push(.05),this.getScaleValues().push(.148),this.getScaleValues().push(.4),this.getScaleValues().push(.312),this.getScaleValues().push(.2),this.getScaleValues().push(.01)),t<=2)SuperMap.Geometry.AlgoSymbol1004.prototype.modifyPoint.apply(this,arguments);else if(3==t||4==t){var o=new SuperMap.Geometry.Point((l[0].x+l[1].x)/2,(l[0].y+l[1].y)/2),n=SuperMap.Plot.PlottingUtil.clonePoints(l);n.splice(0,2),n.unshift(o);var i=SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(e,n),r=SuperMap.Plot.PlottingUtil.polylineDistance(n);if(3===t&&null===i.pt&&(i.pt=o.clone()),-1==i.index&&4==t)this.getScaleValues()[t+1]=.01;else{var a=SuperMap.Plot.PlottingUtil.clonePoints(n);a.splice(0,i.index+1),a.unshift(i.pt);var p=SuperMap.Plot.PlottingUtil.polylineDistance(a);r<p&&(p=r),this.getScaleValues()[t+1]=(r-p)/r,this.getScaleValues()[4]>.5&&(this.getScaleValues()[4]=.5)}}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol60310=p},function(t,e,l){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var l=0;l<e.length;l++){var o=e[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,l,o){return l&&t(e.prototype,l),o&&t(e,o),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(l(2)),p=function(t){function e(t){o(this,e);var l=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return l.CLASS_NAME="SuperMap.Geometry.AlgoSymbol6031001",l.symbolType=SuperMap.Plot.SymbolType.ALGOSYMBOL,l.minEditPts=3,l.maxEditPts=512,l.clearScalePoints(),0===l.getScaleValues().length&&(l.getScaleValues().push(.05),l.getScaleValues().push(.148),l.getScaleValues().push(.4),l.getScaleValues().push(.312),l.getScaleValues().push(.2),l.getScaleValues().push(.01)),0===l.getSubSymbols().length&&l.setSubSymbols(SuperMap.AlgoSymbolFactory.getDefaultSubSymbols(l.libID,l.code)),l}return i(e,a["default"]),r(e,[{key:"calculateParts",value:function(){this.clearComponents();var t=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if(t=SuperMap.Plot.PlottingUtil.clearSamePts(t),this.controlPoints.length>=2&&this.controlPoints.length<this.minEditPts&&this.calAssistantLine(),!(t.length<this.minEditPts)){this.getScaleValues().length<6&&(this.getScaleValues().push(.05),this.getScaleValues().push(.148),this.getScaleValues().push(.4),this.getScaleValues().push(.312),this.getScaleValues().push(.2),this.getScaleValues().push(.01)),SuperMap.Geometry.AlgoSymbol1004.prototype.applyUse.apply(this,arguments);var e=new SuperMap.Geometry.Point((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2);if(t.splice(0,2),t.unshift(e),this.getSubSymbols().length>0){var l;if(null===this.getSubSymbols()[0].symbolData)return;l=this.getSubSymbols()[0].symbolData.symbolSize.x;var o=SuperMap.Plot.PlottingUtil.polylineDistance(t),n=o*this.getScaleValues()[4],i=o*this.getScaleValues()[5],r=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(n,t),a=SuperMap.Plot.PlottingUtil.getPtsIndexByDistance(i,t),p=SuperMap.Plot.PlottingUtil.radian(a.pts,r.pts)*this.RTOD+270,u=60*SuperMap.Plot.PlottingUtil.distance(r.pts,a.pts)/l,s=new SuperMap.Geometry.Point(2*a.pts.x-r.pts.x,2*a.pts.y-r.pts.y),P=SuperMap.Plot.PlottingUtil.circlePoint(s,u,u,p),c=SuperMap.Plot.PlottingUtil.circlePoint(s,u,u,p-180);if(null===this.getSubSymbols().length)return;null!==this.getSubSymbols()[0].code&&(this.computeSubSymbol(this.getSubSymbols()[0],a.pts,u,p-90),this.computeSubSymbol(this.getSubSymbols()[1],P,u,p-90),this.computeSubSymbol(this.getSubSymbols()[2],c,u,p-90)),r.pts.isScalePoint=!0,r.pts.tag=this.getScalePoints().length,this.addScalePoint(r.pts.clone()),a.pts.isScalePoint=!0,a.pts.tag=this.getScalePoints().length,this.addScalePoint(a.pts.clone())}}}},{key:"modifyPoint",value:function(t,e){if(!0===e.isScalePoint){var l=SuperMap.Plot.PlottingUtil.clonePoints(this.controlPoints);if((l=SuperMap.Plot.PlottingUtil.clearSamePts(l)).length<2)return;if(this.getScaleValues().length<6&&(this.getScaleValues().push(.05),this.getScaleValues().push(.148),this.getScaleValues().push(.4),this.getScaleValues().push(.312),this.getScaleValues().push(.2),this.getScaleValues().push(.01)),t<=2)SuperMap.Geometry.AlgoSymbol1004.prototype.modifyPoint.apply(this,arguments);else if(3==t||4==t){var o=new SuperMap.Geometry.Point((l[0].x+l[1].x)/2,(l[0].y+l[1].y)/2),n=SuperMap.Plot.PlottingUtil.clonePoints(l);n.splice(0,2),n.unshift(o);var i=SuperMap.Plot.PlottingUtil.projectPtOnPolyLine(e,n),r=SuperMap.Plot.PlottingUtil.polylineDistance(n);if(-1===i.index&&3===t&&(i.pt=o.clone()),-1==i.index&&4==t)this.getScaleValues()[t+1]=.01;else{var a=SuperMap.Plot.PlottingUtil.clonePoints(n);a.splice(0,i.index+1),a.unshift(i.pt);var p=SuperMap.Plot.PlottingUtil.polylineDistance(a);r<p&&(p=r),this.getScaleValues()[t+1]=(r-p)/r,this.getScaleValues()[4]>.5&&(this.getScaleValues()[4]=.5)}}}this.calculateParts()}}]),e}();e.default=p,SuperMap.Geometry.AlgoSymbol6031001=p},function(t,e,l){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.WJAlgoSymbolFactory=void 0;o(l(32)),o(l(31)),e.WJAlgoSymbolFactory=SuperMap.Geometry.WJAlgoSymbolFactory=SuperMap.Geometry.WJAlgoSymbolFactory||{};SuperMap.Geometry.WJAlgoSymbolFactory.getAlgoSymbol=function(t,e,l){if(123===t)switch(e){case 20915:return new SuperMap.Geometry.AlgoSymbol12500(l);case 2091501:return new SuperMap.Geometry.AlgoSymbol12501(l);case 2091502:return new SuperMap.Geometry.AlgoSymbol12502(l);case 2091503:return new SuperMap.Geometry.AlgoSymbol2091503(l);case 2092101:return new SuperMap.Geometry.AlgoSymbol2092101(l);case 21003:return new SuperMap.Geometry.AlgoSymbol13700(l);case 21207:return new SuperMap.Geometry.AlgoSymbol15200(l);case 2120701:return new SuperMap.Geometry.AlgoSymbol15201(l);case 2120702:return new SuperMap.Geometry.AlgoSymbol15202(l);case 21213:return new SuperMap.Geometry.AlgoSymbol15800(l);case 2121301:return new SuperMap.Geometry.AlgoSymbol15801(l);case 2121302:return new SuperMap.Geometry.AlgoSymbol15802(l);case 2121303:return new SuperMap.Geometry.AlgoSymbol15803(l);case 2121304:return new SuperMap.Geometry.AlgoSymbol15804(l);case 2121305:return new SuperMap.Geometry.AlgoSymbol15806(l);case 21214:return new SuperMap.Geometry.AlgoSymbol15900(l);case 21215:return new SuperMap.Geometry.AlgoSymbol16200(l);case 2121501:return new SuperMap.Geometry.AlgoSymbol16201(l);case 2121502:return new SuperMap.Geometry.AlgoSymbol16202(l);case 2121503:return new SuperMap.Geometry.AlgoSymbol16203(l);case 2121504:return new SuperMap.Geometry.AlgoSymbol2121504(l);case 2121505:return new SuperMap.Geometry.AlgoSymbol2121505(l);case 2121506:return new SuperMap.Geometry.AlgoSymbol2121506(l);case 2121507:return new SuperMap.Geometry.AlgoSymbol2121507(l);case 21216:return new SuperMap.Geometry.AlgoSymbol21216(l);case 2121601:return new SuperMap.Geometry.AlgoSymbol2121601(l);case 2121602:return new SuperMap.Geometry.AlgoSymbol2121602(l);case 21218:return new SuperMap.Geometry.AlgoSymbol16700(l);case 21221:return new SuperMap.Geometry.AlgoSymbol21221(l);case 2122101:return new SuperMap.Geometry.AlgoSymbol2122101(l);case 21222:return new SuperMap.Geometry.AlgoSymbol17500(l);case 2122201:return new SuperMap.Geometry.AlgoSymbol17501(l);case 21223:return new SuperMap.Geometry.AlgoSymbol17700(l);case 2122301:return new SuperMap.Geometry.AlgoSymbol2122301(l);case 2122303:return new SuperMap.Geometry.AlgoSymbol17703(l);case 2122304:return new SuperMap.Geometry.AlgoSymbol17704(l);case 21224:return new SuperMap.Geometry.AlgoSymbol17800(l);case 2122401:return new SuperMap.Geometry.AlgoSymbol17801(l);case 2122402:return new SuperMap.Geometry.AlgoSymbol17802(l);case 2122403:return new SuperMap.Geometry.AlgoSymbol17803(l);case 2122404:return new SuperMap.Geometry.AlgoSymbol17804(l);case 2122405:return new SuperMap.Geometry.AlgoSymbol17805(l);case 2122406:return new SuperMap.Geometry.AlgoSymbol17806(l);case 21605:return new SuperMap.Geometry.AlgoSymbol20300(l);case 2160501:return new SuperMap.Geometry.AlgoSymbol20301(l);case 30008:return new SuperMap.Geometry.AlgoSymbol30008(l);case 3000801:return new SuperMap.Geometry.AlgoSymbol3000801(l);case 3000802:return new SuperMap.Geometry.AlgoSymbol3000802(l);case 3000803:return new SuperMap.Geometry.AlgoSymbol3000803(l);case 3000804:return new SuperMap.Geometry.AlgoSymbol3000804(l);case 3000805:return new SuperMap.Geometry.AlgoSymbol3000805(l);case 3000806:return new SuperMap.Geometry.AlgoSymbol3000806(l);case 3000807:return new SuperMap.Geometry.AlgoSymbol3000807(l);case 3000808:return new SuperMap.Geometry.AlgoSymbol3000808(l);case 3000809:return new SuperMap.Geometry.AlgoSymbol3000809(l);case 30009:return new SuperMap.Geometry.AlgoSymbol30009(l);case 30010:return new SuperMap.Geometry.AlgoSymbol30010(l);case 30011:return new SuperMap.Geometry.AlgoSymbol30011(l);case 3001101:return new SuperMap.Geometry.AlgoSymbol3001101(l);case 3001102:return new SuperMap.Geometry.AlgoSymbol3001102(l);case 3001103:return new SuperMap.Geometry.AlgoSymbol3001103(l);case 3001104:return new SuperMap.Geometry.AlgoSymbol3001104(l);case 3001105:return new SuperMap.Geometry.AlgoSymbol3001105(l);case 30012:return new SuperMap.Geometry.AlgoSymbol30012(l);case 30013:return new SuperMap.Geometry.AlgoSymbol30013(l);case 50106:return new SuperMap.Geometry.AlgoSymbol21900(l);case 3001301:return new SuperMap.Geometry.AlgoSymbol3001301(l);case 3001302:return new SuperMap.Geometry.AlgoSymbol3001302(l);case 30014:return new SuperMap.Geometry.AlgoSymbol30014(l);case 30018:return new SuperMap.Geometry.AlgoSymbol42500(l);case 30020:return new SuperMap.Geometry.AlgoSymbol30020(l);case 3002001:return new SuperMap.Geometry.AlgoSymbol3002001(l);case 3002002:return new SuperMap.Geometry.AlgoSymbol3002002(l);case 3002004:return new SuperMap.Geometry.AlgoSymbol3002004(l);case 3002005:return new SuperMap.Geometry.AlgoSymbol3002005(l);case 30025:return new SuperMap.Geometry.AlgoSymbol30025(l);case 5010301:return new SuperMap.Geometry.AlgoSymbol3010301(l);case 50108:return new SuperMap.Geometry.AlgoSymbol50108(l);case 5010303:return new SuperMap.Geometry.AlgoSymbol3010303(l);case 5010304:return new SuperMap.Geometry.AlgoSymbol3010304(l);case 5010401:return new SuperMap.Geometry.AlgoSymbol5010401(l);case 5020801:return new SuperMap.Geometry.AlgoSymbol3020901(l);case 5020802:return new SuperMap.Geometry.AlgoSymbol5020802(l);case 5021803:return new SuperMap.Geometry.AlgoSymbol5021803(l);case 5022001:return new SuperMap.Geometry.AlgoSymbol5022001(l);case 5022002:return new SuperMap.Geometry.AlgoSymbol5022002(l);case 50223:return new SuperMap.Geometry.AlgoSymbol50223(l);case 5022301:return new SuperMap.Geometry.AlgoSymbol5022301(l);case 3002501:return new SuperMap.Geometry.AlgoSymbol3002501(l);case 30026:return new SuperMap.Geometry.AlgoSymbol30026(l);case 40104:return new SuperMap.Geometry.AlgoSymbol40104(l);case 40301:case 4030101:case 4030102:case 4030103:case 4030104:return new SuperMap.Geometry.AlgoSymbol22000(l);case 40302:case 4030201:case 4030202:case 4030203:case 4030204:return new SuperMap.Geometry.AlgoSymbol40302(l);case 40303:return new SuperMap.Geometry.AlgoSymbol26501(l);case 4030301:return new SuperMap.Geometry.AlgoSymbol4030301(l);case 4030302:return new SuperMap.Geometry.AlgoSymbol4030302(l);case 4030303:return new SuperMap.Geometry.AlgoSymbol4030303(l);case 40304:return new SuperMap.Geometry.AlgoSymbol40304(l);case 4030401:return new SuperMap.Geometry.AlgoSymbol4030401(l);case 50101:return new SuperMap.Geometry.AlgoSymbol25201(l);case 5010101:return new SuperMap.Geometry.AlgoSymbol21401(l);case 50102:return new SuperMap.Geometry.AlgoSymbol21500(l);case 5010202:return new SuperMap.Geometry.AlgoSymbol21502(l);case 5010203:return new SuperMap.Geometry.AlgoSymbol21503(l);case 5010204:return new SuperMap.Geometry.AlgoSymbol21504(l);case 50103:case 5010302:return new SuperMap.Geometry.AlgoSymbol21600(l);case 50104:return new SuperMap.Geometry.AlgoSymbol21800(l);case 50107:case 5010701:return new SuperMap.Geometry.AlgoSymbol22000(l);case 50208:return new SuperMap.Geometry.AlgoSymbol23400(l);case 50209:return new SuperMap.Geometry.AlgoSymbol23500(l);case 50210:return new SuperMap.Geometry.AlgoSymbol50210(l);case 50212:case 5021101:return new SuperMap.Geometry.AlgoSymbol23901(l);case 5021102:return new SuperMap.Geometry.AlgoSymbol23902(l);case 50220:return new SuperMap.Geometry.AlgoSymbol28900(l);case 50221:return new SuperMap.Geometry.AlgoSymbol29000(l);case 50225:return new SuperMap.Geometry.AlgoSymbol50225(l);case 50226:return new SuperMap.Geometry.AlgoSymbol50226(l);case 50222:return new SuperMap.Geometry.AlgoSymbol29101(l);case 5022201:return new SuperMap.Geometry.AlgoSymbol29103(l);case 50227:return new SuperMap.Geometry.AlgoSymbol35200(l);case 50301:return new SuperMap.Geometry.AlgoSymbol1004(l);case 5030101:return new SuperMap.Geometry.AlgoSymbol25200(l);case 5030102:return new SuperMap.Geometry.AlgoSymbol25201(l);case 50302:return new SuperMap.Geometry.AlgoSymbol25000(l);case 50303:return new SuperMap.Geometry.AlgoSymbol25400(l);case 5030301:return new SuperMap.Geometry.AlgoSymbol5030301(l);case 50308:return new SuperMap.Geometry.AlgoSymbol50308(l);case 50309:return new SuperMap.Geometry.AlgoSymbol26500(l);case 50310:return new SuperMap.Geometry.AlgoSymbol26600(l);case 5031001:return new SuperMap.Geometry.AlgoSymbol26601(l);case 50312:return new SuperMap.Geometry.AlgoSymbol28000(l);case 50313:return new SuperMap.Geometry.AlgoSymbol28100(l);case 50314:return new SuperMap.Geometry.AlgoSymbol28200(l);case 5031401:return new SuperMap.Geometry.AlgoSymbol5031401(l);case 50315:return new SuperMap.Geometry.AlgoSymbol28300(l);case 5031501:return new SuperMap.Geometry.AlgoSymbol28301(l);case 50316:return new SuperMap.Geometry.AlgoSymbol29800(l);case 50317:return new SuperMap.Geometry.AlgoSymbol1006(l);case 50320:return new SuperMap.Geometry.AlgoSymbol30000(l);case 5010201:return new SuperMap.Geometry.AlgoSymbol21501(l);case 5032001:case 5032002:return new SuperMap.Geometry.AlgoSymbol30002(l);case 50321:case 5032101:case 5032102:return new SuperMap.Geometry.AlgoSymbol30100(l);case 50322:return new SuperMap.Geometry.AlgoSymbol30200(l);case 5032201:return new SuperMap.Geometry.AlgoSymbol30201(l);case 50330:case 50331:return new SuperMap.Geometry.AlgoSymbol30800(l);case 5032003:return new SuperMap.Geometry.AlgoSymbol5032003(l);case 5033001:return new SuperMap.Geometry.AlgoSymbol5033001(l);case 50338:return new SuperMap.Geometry.AlgoSymbol31300(l);case 5033801:return new SuperMap.Geometry.AlgoSymbol31301(l);case 5033802:return new SuperMap.Geometry.AlgoSymbol5033802(l);case 5033803:return new SuperMap.Geometry.AlgoSymbol5033803(l);case 50339:return new SuperMap.Geometry.AlgoSymbol31400(l);case 5033901:return new SuperMap.Geometry.AlgoSymbol31401(l);case 50342:return new SuperMap.Geometry.AlgoSymbol50342(l);case 5034201:return new SuperMap.Geometry.AlgoSymbol5034201(l);case 5034202:return new SuperMap.Geometry.AlgoSymbol5034202(l);case 5034203:return new SuperMap.Geometry.AlgoSymbol5034203(l);case 50348:return new SuperMap.Geometry.AlgoSymbol32300(l);case 5034801:return new SuperMap.Geometry.AlgoSymbol5034801(l);case 50352:return new SuperMap.Geometry.AlgoSymbol50352(l);case 5035201:return new SuperMap.Geometry.AlgoSymbol5035201(l);case 5035202:return new SuperMap.Geometry.AlgoSymbol5035202(l);case 5035203:return new SuperMap.Geometry.AlgoSymbol5035203(l);case 5035204:return new SuperMap.Geometry.AlgoSymbol21501(l);case 5035205:return new SuperMap.Geometry.AlgoSymbol5035205(l);case 60203:return new SuperMap.Geometry.AlgoSymbol60203(l);case 60205:return new SuperMap.Geometry.AlgoSymbol60205(l);case 60301:return new SuperMap.Geometry.AlgoSymbol60301(l);case 6030101:return new SuperMap.Geometry.AlgoSymbol6030101(l);case 6030102:return new SuperMap.Geometry.AlgoSymbol6030102(l);case 6030103:return new SuperMap.Geometry.AlgoSymbol6030103(l);case 6030104:return new SuperMap.Geometry.AlgoSymbol6030104(l);case 6030105:return new SuperMap.Geometry.AlgoSymbol6030105(l);case 6030106:return new SuperMap.Geometry.AlgoSymbol6030106(l);case 6030107:return new SuperMap.Geometry.AlgoSymbol6030107(l);case 60304:return new SuperMap.Geometry.AlgoSymbol60304(l);case 60305:return new SuperMap.Geometry.AlgoSymbol60305(l);case 6030501:return new SuperMap.Geometry.AlgoSymbol6030501(l);case 60306:return new SuperMap.Geometry.AlgoSymbol60306(l);case 6030601:return new SuperMap.Geometry.AlgoSymbol6030601(l);case 60310:return new SuperMap.Geometry.AlgoSymbol60310(l);case 6031001:return new SuperMap.Geometry.AlgoSymbol6031001(l);case 70109:return new SuperMap.Geometry.AlgoSymbol40900(l);case 70201:return new SuperMap.Geometry.AlgoSymbol41100(l);case 70202:return new SuperMap.Geometry.AlgoSymbol41200(l);case 7020201:return new SuperMap.Geometry.AlgoSymbol41201(l);case 7020202:return new SuperMap.Geometry.AlgoSymbol41202(l);case 80202:return new SuperMap.Geometry.AlgoSymbol42200(l);case 90105:return new SuperMap.Geometry.AlgoSymbol35000(l);case 90107:return new SuperMap.Geometry.AlgoSymbol35200(l);case 90305:return new SuperMap.Geometry.AlgoSymbol37700(l);case 90404:return new SuperMap.Geometry.AlgoSymbol40100(l);case 9040401:return new SuperMap.Geometry.AlgoSymbol40101(l);case 90507:return new SuperMap.Geometry.AlgoSymbol44100(l);default:return new SuperMap.Geometry.AlgoSymbol(l)}},SuperMap.Geometry.WJAlgoSymbolFactory.isAccessServer=function(t,e){if(123!==t)return!0;switch(e){case 20915:case 2091501:case 2091502:case 2091503:case 2092101:case 21003:case 21207:case 2120701:case 2120702:case 21213:case 2121301:case 2121302:case 2121303:case 2121304:case 2121305:case 21214:case 21215:case 2121501:case 2121502:case 2121503:case 2121504:case 2121505:case 2121506:case 2121507:case 21216:case 2121601:case 2121602:case 21218:case 21221:case 2122101:case 21222:case 2122201:case 21223:case 2122301:case 2122303:case 2122304:case 21224:case 2122401:case 2122402:case 2122403:case 2122404:case 2122405:case 2122406:case 21605:case 2160501:case 30008:case 3000801:case 3000802:case 3000803:case 3000804:case 3000805:case 3000806:case 3000807:case 3000808:case 3000809:case 30009:case 30010:case 30011:case 3001101:case 3001102:case 3001103:case 3001104:case 3001105:case 30012:case 30013:case 3001301:case 3001302:case 30014:case 30018:case 30020:case 3002001:case 3002002:case 3002004:case 3002005:case 30025:case 5010301:case 5010303:case 5010304:case 5010401:case 50108:case 50106:case 5020802:case 5021803:case 5022001:case 5022002:case 50223:case 5022301:case 3002501:case 30026:case 40104:case 40301:case 4030101:case 4030102:case 4030103:case 4030104:case 40302:case 4030201:case 4030202:case 4030203:case 4030204:case 40303:case 4030301:case 4030302:case 4030303:case 40304:case 4030401:case 50101:case 5010101:case 50102:case 5010201:case 5010202:case 5010203:case 5010204:case 50103:case 5010302:case 50104:case 50107:case 5010701:case 50208:case 50209:case 50210:case 5021101:case 5021102:case 50212:case 50220:case 50221:case 50222:case 50225:case 50226:case 5022201:case 50227:case 50301:case 5030101:case 5030102:case 50302:case 50303:case 5030301:case 50308:case 50309:case 50310:case 5031001:case 50312:case 50313:case 50314:case 5031401:case 50315:case 5031501:case 50316:case 50317:case 50320:case 5032001:case 5032002:case 5032003:case 50321:case 5032101:case 5032102:case 50322:case 5032201:case 50330:case 5033001:case 50338:case 5033801:case 5033802:case 5033803:case 50339:case 5033901:case 50342:case 5034201:case 5034202:case 5034203:case 50348:case 5034801:case 50352:case 5035201:case 5035202:case 5035203:case 5035204:case 5035205:case 60203:case 60205:case 60301:case 6030101:case 6030102:case 6030103:case 6030104:case 6030105:case 6030106:case 6030107:case 60304:case 60305:case 6030501:case 60306:case 6030601:case 60310:case 6031001:case 70109:case 70201:case 70202:case 7020201:case 7020202:case 80202:case 90105:case 90107:case 90305:case 90404:case 9040401:case 9050301:case 90507:return!1;default:return!0}},SuperMap.Geometry.WJAlgoSymbolFactory.getSymbolWayType=function(t,e){if(123!==t)return SuperMap.Plot.AddPoint_WayType.UNKNOWN;switch(e){case 21003:case 21207:case 2120701:case 2121503:case 21218:case 30008:case 3000801:case 3000802:case 3000803:case 3000804:case 3000805:case 3000806:case 3000807:case 3000808:case 3000809:case 30009:case 5021803:case 5022001:case 5022002:case 40301:case 4030101:case 4030102:case 4030103:case 4030104:case 40303:case 4030301:case 4030302:case 4030303:case 50101:case 5010101:case 50102:case 5010201:case 5010202:case 5010203:case 5010204:case 50103:case 5010301:case 5010302:case 5010303:case 5010304:case 50107:case 5010701:case 50210:case 50220:case 50221:case 50225:case 5030102:case 50303:case 5030301:case 50309:case 50320:case 5032001:case 5032002:case 5032003:case 50321:case 5032101:case 5032102:case 50322:case 5032201:case 50330:case 5033001:case 5034203:case 5035201:case 5035204:case 60205:case 90105:return SuperMap.Plot.AddPoint_WayType.CURVE;case 20915:case 2091502:case 2092101:case 2120702:case 21216:case 2121601:case 2121602:case 21605:case 30010:case 30011:case 3001101:case 3001102:case 3001103:case 3001104:case 3001105:case 30012:case 30020:case 3002001:case 3002002:case 3002005:case 30025:case 3002501:case 30026:case 40104:case 40302:case 4030201:case 4030202:case 4030203:case 4030204:case 50227:case 5035205:case 60301:case 6030101:case 6030102:case 6030103:case 6030104:case 6030105:case 6030106:case 6030107:case 70202:case 7020201:case 7020202:case 90107:return SuperMap.Plot.AddPoint_WayType.POLYLINE;default:return SuperMap.Plot.AddPoint_WayType.UNKNOWN}},SuperMap.Geometry.WJAlgoSymbolFactory.getDefaultSubSymbols=function(t,e){var l=[];if(123!==t)return l;switch(e){case 2092101:return l.push(new SuperMap.Plot.SubSymbol(123,20921)),l;case 80202:return l.push(new SuperMap.Plot.SubSymbol(123,2170201)),l;case 21221:case 2122101:return l.push(new SuperMap.Plot.SubSymbol(123,21220)),l.push(new SuperMap.Plot.SubSymbol(123,2122001)),l;case 3000801:return l.push(new SuperMap.Plot.SubSymbol(123,3000106)),l;case 50209:return l.push(new SuperMap.Plot.SubSymbol(100,1300)),l;case 3000802:return l.push(new SuperMap.Plot.SubSymbol(123,3000107)),l;case 3000803:return l.push(new SuperMap.Plot.SubSymbol(123,3000108)),l;case 3000804:return l.push(new SuperMap.Plot.SubSymbol(123,20303)),l;case 3000805:case 3000808:case 3001301:case 4030103:case 4030202:case 5020802:case 5010201:case 2121504:case 50108:return l.push(new SuperMap.Plot.SubSymbol(123,21601)),l;case 3000806:return l.push(new SuperMap.Plot.SubSymbol(123,20404)),l;case 3000807:return l.push(new SuperMap.Plot.SubSymbol(123,2010103)),l.push(new SuperMap.Plot.SubSymbol(123,21601)),l;case 3000809:return l.push(new SuperMap.Plot.SubSymbol(123,21601)),l.push(new SuperMap.Plot.SubSymbol(123,30006)),l;case 30010:return l.push(new SuperMap.Plot.SubSymbol(123,10305)),l;case 3001104:case 3001105:return l.push(new SuperMap.Plot.SubSymbol(123,20404)),l;case 30012:return l.push(new SuperMap.Plot.SubSymbol(123,30006)),l;case 3002005:return l.push(new SuperMap.Plot.SubSymbol(123,21305)),l;case 40301:return l.push(new SuperMap.Plot.SubSymbol(123,40201)),l;case 5021803:return l.push(new SuperMap.Plot.SubSymbol(123,50218)),l;case 50225:return l.push(new SuperMap.Plot.SubSymbol(123,10103)),l;case 50226:return l.push(new SuperMap.Plot.SubSymbol(123,10103)),l.push(new SuperMap.Plot.SubSymbol(123,10103)),l;case 5032003:return l.push(new SuperMap.Plot.SubSymbol(123,20304)),l.push(new SuperMap.Plot.SubSymbol(123,20301)),l;case 5030301:case 5022301:case 5033001:case 5034201:case 5034202:case 50342:return l.push(new SuperMap.Plot.SubSymbol(123,10104)),l;case 5033802:return l.push(new SuperMap.Plot.SubSymbol(123,20202)),l;case 5033803:return l.push(new SuperMap.Plot.SubSymbol(123,20203)),l;case 5034203:return l.push(new SuperMap.Plot.SubSymbol(123,2050302)),l;case 50352:return l.push(new SuperMap.Plot.SubSymbol(123,50231)),l;case 5035202:return l.push(new SuperMap.Plot.SubSymbol(123,21227)),l;case 5035205:return l.push(new SuperMap.Plot.SubSymbol(123,2050308)),l;case 4030101:return l.push(new SuperMap.Plot.SubSymbol(123,2030303)),l;case 4030102:case 4030201:return l.push(new SuperMap.Plot.SubSymbol(123,20303)),l;case 4030104:case 4030203:return l.push(new SuperMap.Plot.SubSymbol(123,20401)),l;case 4030204:return l.push(new SuperMap.Plot.SubSymbol(123,10104)),l;case 40302:case 40303:case 4030301:case 4030302:case 4030303:return l.push(new SuperMap.Plot.SubSymbol(123,40201)),l;case 5010202:return l.push(new SuperMap.Plot.SubSymbol(123,2040301)),l;case 5010203:return l.push(new SuperMap.Plot.SubSymbol(123,20501)),l;case 5010204:return l.push(new SuperMap.Plot.SubSymbol(123,20503)),l;case 50107:return l.push(new SuperMap.Plot.SubSymbol(123,10105)),l;case 5010701:return l.push(new SuperMap.Plot.SubSymbol(123,5010503)),l;case 5021101:case 5021102:case 50212:return l.push(new SuperMap.Plot.SubSymbol(123,2020301)),l;case 50227:return l.push(new SuperMap.Plot.SubSymbol(123,10103)),l;case 5030101:return l.push(new SuperMap.Plot.SubSymbol(123,2050302)),l;case 50315:return l.push(new SuperMap.Plot.SubSymbol(123,21302)),l;case 5031501:return l.push(new SuperMap.Plot.SubSymbol(123,21302)),l.push(new SuperMap.Plot.SubSymbol(123,21302)),l;case 5032001:return l.push(new SuperMap.Plot.SubSymbol(123,20301)),l.push(new SuperMap.Plot.SubSymbol(123,20301)),l;case 5032002:return l.push(new SuperMap.Plot.SubSymbol(123,20304)),l.push(new SuperMap.Plot.SubSymbol(123,20304)),l;case 5035201:return l.push(new SuperMap.Plot.SubSymbol(123,50231)),l;case 5035204:return l.push(new SuperMap.Plot.SubSymbol(123,2040106)),l;case 60205:return l.push(new SuperMap.Plot.SubSymbol(123,21503)),l.push(new SuperMap.Plot.SubSymbol(123,21501)),l;case 60310:return l.push(new SuperMap.Plot.SubSymbol(123,5023103)),l;case 6031001:return l.push(new SuperMap.Plot.SubSymbol(123,2122701)),l.push(new SuperMap.Plot.SubSymbol(123,2122702)),l.push(new SuperMap.Plot.SubSymbol(123,2122703)),l;case 90107:return l.push(new SuperMap.Plot.SubSymbol(123,2040301)),l;case 90305:return l.push(new SuperMap.Plot.SubSymbol(123,50304)),l;default:return l}}}]);

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (module, exports) {
	'use strict';

	var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
		return typeof obj;
	} : function (obj) {
		return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
	};

	/* @preserve
  * Leaflet 1.2.0+Detached: 1ac320ba232cb85b73ac81f3d82780c9d07f0d4e.1ac320b, a JS library for interactive maps. http://leafletjs.com
  * (c) 2010-2017 Vladimir Agafonkin, (c) 2010-2011 CloudMade
  */
	(function (global, factory) {
		( false ? 'undefined' : _typeof(exports)) === 'object' && typeof module !== 'undefined' ? factory(exports) :  true ? !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)) : factory(global.L = {});
	})(undefined, function (exports) {
		'use strict';

		var version = "1.2.0+HEAD.1ac320b";

		/*
   * @namespace Util
   *
   * Various utility functions, used by Leaflet internally.
   */

		var freeze = Object.freeze;
		Object.freeze = function (obj) {
			return obj;
		};

		// @function extend(dest: Object, src?: Object): Object
		// Merges the properties of the `src` object (or multiple objects) into `dest` object and returns the latter. Has an `L.extend` shortcut.
		function extend(dest) {
			var i, j, len, src;

			for (j = 1, len = arguments.length; j < len; j++) {
				src = arguments[j];
				for (i in src) {
					dest[i] = src[i];
				}
			}
			return dest;
		}

		// @function create(proto: Object, properties?: Object): Object
		// Compatibility polyfill for [Object.create](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/create)
		var create = Object.create || function () {
			function F() {}
			return function (proto) {
				F.prototype = proto;
				return new F();
			};
		}();

		// @function bind(fn: Function, …): Function
		// Returns a new function bound to the arguments passed, like [Function.prototype.bind](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).
		// Has a `L.bind()` shortcut.
		function bind(fn, obj) {
			var slice = Array.prototype.slice;

			if (fn.bind) {
				return fn.bind.apply(fn, slice.call(arguments, 1));
			}

			var args = slice.call(arguments, 2);

			return function () {
				return fn.apply(obj, args.length ? args.concat(slice.call(arguments)) : arguments);
			};
		}

		// @property lastId: Number
		// Last unique ID used by [`stamp()`](#util-stamp)
		var lastId = 0;

		// @function stamp(obj: Object): Number
		// Returns the unique ID of an object, assiging it one if it doesn't have it.
		function stamp(obj) {
			/*eslint-disable */
			obj._leaflet_id = obj._leaflet_id || ++lastId;
			return obj._leaflet_id;
			/*eslint-enable */
		}

		// @function throttle(fn: Function, time: Number, context: Object): Function
		// Returns a function which executes function `fn` with the given scope `context`
		// (so that the `this` keyword refers to `context` inside `fn`'s code). The function
		// `fn` will be called no more than one time per given amount of `time`. The arguments
		// received by the bound function will be any arguments passed when binding the
		// function, followed by any arguments passed when invoking the bound function.
		// Has an `L.throttle` shortcut.
		function throttle(fn, time, context) {
			var lock, args, wrapperFn, later;

			later = function later() {
				// reset lock and call if queued
				lock = false;
				if (args) {
					wrapperFn.apply(context, args);
					args = false;
				}
			};

			wrapperFn = function wrapperFn() {
				if (lock) {
					// called too soon, queue to call later
					args = arguments;
				} else {
					// call and lock until later
					fn.apply(context, arguments);
					setTimeout(later, time);
					lock = true;
				}
			};

			return wrapperFn;
		}

		// @function wrapNum(num: Number, range: Number[], includeMax?: Boolean): Number
		// Returns the number `num` modulo `range` in such a way so it lies within
		// `range[0]` and `range[1]`. The returned value will be always smaller than
		// `range[1]` unless `includeMax` is set to `true`.
		function wrapNum(x, range, includeMax) {
			var max = range[1],
			    min = range[0],
			    d = max - min;
			return x === max && includeMax ? x : ((x - min) % d + d) % d + min;
		}

		// @function falseFn(): Function
		// Returns a function which always returns `false`.
		function falseFn() {
			return false;
		}

		// @function formatNum(num: Number, digits?: Number): Number
		// Returns the number `num` rounded to `digits` decimals, or to 5 decimals by default.
		function formatNum(num, digits) {
			var pow = Math.pow(10, digits || 5);
			return Math.round(num * pow) / pow;
		}

		// @function trim(str: String): String
		// Compatibility polyfill for [String.prototype.trim](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String/Trim)
		function trim(str) {
			return str.trim ? str.trim() : str.replace(/^\s+|\s+$/g, '');
		}

		// @function splitWords(str: String): String[]
		// Trims and splits the string on whitespace and returns the array of parts.
		function splitWords(str) {
			return trim(str).split(/\s+/);
		}

		// @function setOptions(obj: Object, options: Object): Object
		// Merges the given properties to the `options` of the `obj` object, returning the resulting options. See `Class options`. Has an `L.setOptions` shortcut.
		function setOptions(obj, options) {
			if (!obj.hasOwnProperty('options')) {
				obj.options = obj.options ? create(obj.options) : {};
			}
			for (var i in options) {
				obj.options[i] = options[i];
			}
			return obj.options;
		}

		// @function getParamString(obj: Object, existingUrl?: String, uppercase?: Boolean): String
		// Converts an object into a parameter URL string, e.g. `{a: "foo", b: "bar"}`
		// translates to `'?a=foo&b=bar'`. If `existingUrl` is set, the parameters will
		// be appended at the end. If `uppercase` is `true`, the parameter names will
		// be uppercased (e.g. `'?A=foo&B=bar'`)
		function getParamString(obj, existingUrl, uppercase) {
			var params = [];
			for (var i in obj) {
				params.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));
			}
			return (!existingUrl || existingUrl.indexOf('?') === -1 ? '?' : '&') + params.join('&');
		}

		var templateRe = /\{ *([\w_\-]+) *\}/g;

		// @function template(str: String, data: Object): String
		// Simple templating facility, accepts a template string of the form `'Hello {a}, {b}'`
		// and a data object like `{a: 'foo', b: 'bar'}`, returns evaluated string
		// `('Hello foo, bar')`. You can also specify functions instead of strings for
		// data values — they will be evaluated passing `data` as an argument.
		function template(str, data) {
			return str.replace(templateRe, function (str, key) {
				var value = data[key];

				if (value === undefined) {
					throw new Error('No value provided for variable ' + str);
				} else if (typeof value === 'function') {
					value = value(data);
				}
				return value;
			});
		}

		// @function isArray(obj): Boolean
		// Compatibility polyfill for [Array.isArray](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray)
		var isArray = Array.isArray || function (obj) {
			return Object.prototype.toString.call(obj) === '[object Array]';
		};

		// @function indexOf(array: Array, el: Object): Number
		// Compatibility polyfill for [Array.prototype.indexOf](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf)
		function indexOf(array, el) {
			for (var i = 0; i < array.length; i++) {
				if (array[i] === el) {
					return i;
				}
			}
			return -1;
		}

		// @property emptyImageUrl: String
		// Data URI string containing a base64-encoded empty GIF image.
		// Used as a hack to free memory from unused images on WebKit-powered
		// mobile devices (by setting image `src` to this string).
		var emptyImageUrl = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';

		// inspired by http://paulirish.com/2011/requestanimationframe-for-smart-animating/

		function getPrefixed(name) {
			return window['webkit' + name] || window['moz' + name] || window['ms' + name];
		}

		var lastTime = 0;

		// fallback for IE 7-8
		function timeoutDefer(fn) {
			var time = +new Date(),
			    timeToCall = Math.max(0, 16 - (time - lastTime));

			lastTime = time + timeToCall;
			return window.setTimeout(fn, timeToCall);
		}

		var requestFn = window.requestAnimationFrame || getPrefixed('RequestAnimationFrame') || timeoutDefer;
		var cancelFn = window.cancelAnimationFrame || getPrefixed('CancelAnimationFrame') || getPrefixed('CancelRequestAnimationFrame') || function (id) {
			window.clearTimeout(id);
		};

		// @function requestAnimFrame(fn: Function, context?: Object, immediate?: Boolean): Number
		// Schedules `fn` to be executed when the browser repaints. `fn` is bound to
		// `context` if given. When `immediate` is set, `fn` is called immediately if
		// the browser doesn't have native support for
		// [`window.requestAnimationFrame`](https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame),
		// otherwise it's delayed. Returns a request ID that can be used to cancel the request.
		function requestAnimFrame(fn, context, immediate) {
			if (immediate && requestFn === timeoutDefer) {
				fn.call(context);
			} else {
				return requestFn.call(window, bind(fn, context));
			}
		}

		// @function cancelAnimFrame(id: Number): undefined
		// Cancels a previous `requestAnimFrame`. See also [window.cancelAnimationFrame](https://developer.mozilla.org/docs/Web/API/window/cancelAnimationFrame).
		function cancelAnimFrame(id) {
			if (id) {
				cancelFn.call(window, id);
			}
		}

		var Util = (Object.freeze || Object)({
			freeze: freeze,
			extend: extend,
			create: create,
			bind: bind,
			lastId: lastId,
			stamp: stamp,
			throttle: throttle,
			wrapNum: wrapNum,
			falseFn: falseFn,
			formatNum: formatNum,
			trim: trim,
			splitWords: splitWords,
			setOptions: setOptions,
			getParamString: getParamString,
			template: template,
			isArray: isArray,
			indexOf: indexOf,
			emptyImageUrl: emptyImageUrl,
			requestFn: requestFn,
			cancelFn: cancelFn,
			requestAnimFrame: requestAnimFrame,
			cancelAnimFrame: cancelAnimFrame
		});

		// @class Class
		// @aka L.Class

		// @section
		// @uninheritable

		// Thanks to John Resig and Dean Edwards for inspiration!

		function Class() {}

		Class.extend = function (props) {

			// @function extend(props: Object): Function
			// [Extends the current class](#class-inheritance) given the properties to be included.
			// Returns a Javascript function that is a class constructor (to be called with `new`).
			var NewClass = function NewClass() {

				// call the constructor
				if (this.initialize) {
					this.initialize.apply(this, arguments);
				}

				// call all constructor hooks
				this.callInitHooks();
			};

			var parentProto = NewClass.__super__ = this.prototype;

			var proto = create(parentProto);
			proto.constructor = NewClass;

			NewClass.prototype = proto;

			// inherit parent's statics
			for (var i in this) {
				if (this.hasOwnProperty(i) && i !== 'prototype' && i !== '__super__') {
					NewClass[i] = this[i];
				}
			}

			// mix static properties into the class
			if (props.statics) {
				extend(NewClass, props.statics);
				delete props.statics;
			}

			// mix includes into the prototype
			if (props.includes) {
				checkDeprecatedMixinEvents(props.includes);
				extend.apply(null, [proto].concat(props.includes));
				delete props.includes;
			}

			// merge options
			if (proto.options) {
				props.options = extend(create(proto.options), props.options);
			}

			// mix given properties into the prototype
			extend(proto, props);

			proto._initHooks = [];

			// add method for calling all hooks
			proto.callInitHooks = function () {

				if (this._initHooksCalled) {
					return;
				}

				if (parentProto.callInitHooks) {
					parentProto.callInitHooks.call(this);
				}

				this._initHooksCalled = true;

				for (var i = 0, len = proto._initHooks.length; i < len; i++) {
					proto._initHooks[i].call(this);
				}
			};

			return NewClass;
		};

		// @function include(properties: Object): this
		// [Includes a mixin](#class-includes) into the current class.
		Class.include = function (props) {
			extend(this.prototype, props);
			return this;
		};

		// @function mergeOptions(options: Object): this
		// [Merges `options`](#class-options) into the defaults of the class.
		Class.mergeOptions = function (options) {
			extend(this.prototype.options, options);
			return this;
		};

		// @function addInitHook(fn: Function): this
		// Adds a [constructor hook](#class-constructor-hooks) to the class.
		Class.addInitHook = function (fn) {
			// (Function) || (String, args...)
			var args = Array.prototype.slice.call(arguments, 1);

			var init = typeof fn === 'function' ? fn : function () {
				this[fn].apply(this, args);
			};

			this.prototype._initHooks = this.prototype._initHooks || [];
			this.prototype._initHooks.push(init);
			return this;
		};

		function checkDeprecatedMixinEvents(includes) {
			if (!L || !L.Mixin) {
				return;
			}

			includes = isArray(includes) ? includes : [includes];

			for (var i = 0; i < includes.length; i++) {
				if (includes[i] === L.Mixin.Events) {
					console.warn('Deprecated include of L.Mixin.Events: ' + 'this property will be removed in future releases, ' + 'please inherit from L.Evented instead.', new Error().stack);
				}
			}
		}

		/*
   * @class Evented
   * @aka L.Evented
   * @inherits Class
   *
   * A set of methods shared between event-powered classes (like `Map` and `Marker`). Generally, events allow you to execute some function when something happens with an object (e.g. the user clicks on the map, causing the map to fire `'click'` event).
   *
   * @example
   *
   * ```js
   * map.on('click', function(e) {
   * 	alert(e.latlng);
   * } );
   * ```
   *
   * Leaflet deals with event listeners by reference, so if you want to add a listener and then remove it, define it as a function:
   *
   * ```js
   * function onClick(e) { ... }
   *
   * map.on('click', onClick);
   * map.off('click', onClick);
   * ```
   */

		var Events = {
			/* @method on(type: String, fn: Function, context?: Object): this
    * Adds a listener function (`fn`) to a particular event type of the object. You can optionally specify the context of the listener (object the this keyword will point to). You can also pass several space-separated types (e.g. `'click dblclick'`).
    *
    * @alternative
    * @method on(eventMap: Object): this
    * Adds a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`
    */
			on: function on(types, fn, context) {

				// types can be a map of types/handlers
				if ((typeof types === 'undefined' ? 'undefined' : _typeof(types)) === 'object') {
					for (var type in types) {
						// we don't process space-separated events here for performance;
						// it's a hot path since Layer uses the on(obj) syntax
						this._on(type, types[type], fn);
					}
				} else {
					// types can be a string of space-separated words
					types = splitWords(types);

					for (var i = 0, len = types.length; i < len; i++) {
						this._on(types[i], fn, context);
					}
				}

				return this;
			},

			/* @method off(type: String, fn?: Function, context?: Object): this
    * Removes a previously added listener function. If no function is specified, it will remove all the listeners of that particular event from the object. Note that if you passed a custom context to `on`, you must pass the same context to `off` in order to remove the listener.
    *
    * @alternative
    * @method off(eventMap: Object): this
    * Removes a set of type/listener pairs.
    *
    * @alternative
    * @method off: this
    * Removes all listeners to all events on the object.
    */
			off: function off(types, fn, context) {

				if (!types) {
					// clear all listeners if called without arguments
					delete this._events;
				} else if ((typeof types === 'undefined' ? 'undefined' : _typeof(types)) === 'object') {
					for (var type in types) {
						this._off(type, types[type], fn);
					}
				} else {
					types = splitWords(types);

					for (var i = 0, len = types.length; i < len; i++) {
						this._off(types[i], fn, context);
					}
				}

				return this;
			},

			// attach listener (without syntactic sugar now)
			_on: function _on(type, fn, context) {
				this._events = this._events || {};

				/* get/init listeners for type */
				var typeListeners = this._events[type];
				if (!typeListeners) {
					typeListeners = [];
					this._events[type] = typeListeners;
				}

				if (context === this) {
					// Less memory footprint.
					context = undefined;
				}
				var newListener = { fn: fn, ctx: context },
				    listeners = typeListeners;

				// check if fn already there
				for (var i = 0, len = listeners.length; i < len; i++) {
					if (listeners[i].fn === fn && listeners[i].ctx === context) {
						return;
					}
				}

				listeners.push(newListener);
			},

			_off: function _off(type, fn, context) {
				var listeners, i, len;

				if (!this._events) {
					return;
				}

				listeners = this._events[type];

				if (!listeners) {
					return;
				}

				if (!fn) {
					// Set all removed listeners to noop so they are not called if remove happens in fire
					for (i = 0, len = listeners.length; i < len; i++) {
						listeners[i].fn = falseFn;
					}
					// clear all listeners for a type if function isn't specified
					delete this._events[type];
					return;
				}

				if (context === this) {
					context = undefined;
				}

				if (listeners) {

					// find fn and remove it
					for (i = 0, len = listeners.length; i < len; i++) {
						var l = listeners[i];
						if (l.ctx !== context) {
							continue;
						}
						if (l.fn === fn) {

							// set the removed listener to noop so that's not called if remove happens in fire
							l.fn = falseFn;

							if (this._firingCount) {
								/* copy array in case events are being fired */
								this._events[type] = listeners = listeners.slice();
							}
							listeners.splice(i, 1);

							return;
						}
					}
				}
			},

			// @method fire(type: String, data?: Object, propagate?: Boolean): this
			// Fires an event of the specified type. You can optionally provide an data
			// object — the first argument of the listener function will contain its
			// properties. The event can optionally be propagated to event parents.
			fire: function fire(type, data, propagate) {
				if (!this.listens(type, propagate)) {
					return this;
				}

				var event = extend({}, data, { type: type, target: this });

				if (this._events) {
					var listeners = this._events[type];

					if (listeners) {
						this._firingCount = this._firingCount + 1 || 1;
						for (var i = 0, len = listeners.length; i < len; i++) {
							var l = listeners[i];
							l.fn.call(l.ctx || this, event);
						}

						this._firingCount--;
					}
				}

				if (propagate) {
					// propagate the event to parents (set with addEventParent)
					this._propagateEvent(event);
				}

				return this;
			},

			// @method listens(type: String): Boolean
			// Returns `true` if a particular event type has any listeners attached to it.
			listens: function listens(type, propagate) {
				var listeners = this._events && this._events[type];
				if (listeners && listeners.length) {
					return true;
				}

				if (propagate) {
					// also check parents for listeners if event propagates
					for (var id in this._eventParents) {
						if (this._eventParents[id].listens(type, propagate)) {
							return true;
						}
					}
				}
				return false;
			},

			// @method once(…): this
			// Behaves as [`on(…)`](#evented-on), except the listener will only get fired once and then removed.
			once: function once(types, fn, context) {

				if ((typeof types === 'undefined' ? 'undefined' : _typeof(types)) === 'object') {
					for (var type in types) {
						this.once(type, types[type], fn);
					}
					return this;
				}

				var handler = bind(function () {
					this.off(types, fn, context).off(types, handler, context);
				}, this);

				// add a listener that's executed once and removed after that
				return this.on(types, fn, context).on(types, handler, context);
			},

			// @method addEventParent(obj: Evented): this
			// Adds an event parent - an `Evented` that will receive propagated events
			addEventParent: function addEventParent(obj) {
				this._eventParents = this._eventParents || {};
				this._eventParents[stamp(obj)] = obj;
				return this;
			},

			// @method removeEventParent(obj: Evented): this
			// Removes an event parent, so it will stop receiving propagated events
			removeEventParent: function removeEventParent(obj) {
				if (this._eventParents) {
					delete this._eventParents[stamp(obj)];
				}
				return this;
			},

			_propagateEvent: function _propagateEvent(e) {
				for (var id in this._eventParents) {
					this._eventParents[id].fire(e.type, extend({ layer: e.target }, e), true);
				}
			}
		};

		// aliases; we should ditch those eventually

		// @method addEventListener(…): this
		// Alias to [`on(…)`](#evented-on)
		Events.addEventListener = Events.on;

		// @method removeEventListener(…): this
		// Alias to [`off(…)`](#evented-off)

		// @method clearAllEventListeners(…): this
		// Alias to [`off()`](#evented-off)
		Events.removeEventListener = Events.clearAllEventListeners = Events.off;

		// @method addOneTimeEventListener(…): this
		// Alias to [`once(…)`](#evented-once)
		Events.addOneTimeEventListener = Events.once;

		// @method fireEvent(…): this
		// Alias to [`fire(…)`](#evented-fire)
		Events.fireEvent = Events.fire;

		// @method hasEventListeners(…): Boolean
		// Alias to [`listens(…)`](#evented-listens)
		Events.hasEventListeners = Events.listens;

		var Evented = Class.extend(Events);

		/*
   * @class Point
   * @aka L.Point
   *
   * Represents a point with `x` and `y` coordinates in pixels.
   *
   * @example
   *
   * ```js
   * var point = L.point(200, 300);
   * ```
   *
   * All Leaflet methods and options that accept `Point` objects also accept them in a simple Array form (unless noted otherwise), so these lines are equivalent:
   *
   * ```js
   * map.panBy([200, 300]);
   * map.panBy(L.point(200, 300));
   * ```
   */

		function Point(x, y, round) {
			// @property x: Number; The `x` coordinate of the point
			this.x = round ? Math.round(x) : x;
			// @property y: Number; The `y` coordinate of the point
			this.y = round ? Math.round(y) : y;
		}

		Point.prototype = {

			// @method clone(): Point
			// Returns a copy of the current point.
			clone: function clone() {
				return new Point(this.x, this.y);
			},

			// @method add(otherPoint: Point): Point
			// Returns the result of addition of the current and the given points.
			add: function add(point) {
				// non-destructive, returns a new point
				return this.clone()._add(toPoint(point));
			},

			_add: function _add(point) {
				// destructive, used directly for performance in situations where it's safe to modify existing point
				this.x += point.x;
				this.y += point.y;
				return this;
			},

			// @method subtract(otherPoint: Point): Point
			// Returns the result of subtraction of the given point from the current.
			subtract: function subtract(point) {
				return this.clone()._subtract(toPoint(point));
			},

			_subtract: function _subtract(point) {
				this.x -= point.x;
				this.y -= point.y;
				return this;
			},

			// @method divideBy(num: Number): Point
			// Returns the result of division of the current point by the given number.
			divideBy: function divideBy(num) {
				return this.clone()._divideBy(num);
			},

			_divideBy: function _divideBy(num) {
				this.x /= num;
				this.y /= num;
				return this;
			},

			// @method multiplyBy(num: Number): Point
			// Returns the result of multiplication of the current point by the given number.
			multiplyBy: function multiplyBy(num) {
				return this.clone()._multiplyBy(num);
			},

			_multiplyBy: function _multiplyBy(num) {
				this.x *= num;
				this.y *= num;
				return this;
			},

			// @method scaleBy(scale: Point): Point
			// Multiply each coordinate of the current point by each coordinate of
			// `scale`. In linear algebra terms, multiply the point by the
			// [scaling matrix](https://en.wikipedia.org/wiki/Scaling_%28geometry%29#Matrix_representation)
			// defined by `scale`.
			scaleBy: function scaleBy(point) {
				return new Point(this.x * point.x, this.y * point.y);
			},

			// @method unscaleBy(scale: Point): Point
			// Inverse of `scaleBy`. Divide each coordinate of the current point by
			// each coordinate of `scale`.
			unscaleBy: function unscaleBy(point) {
				return new Point(this.x / point.x, this.y / point.y);
			},

			// @method round(): Point
			// Returns a copy of the current point with rounded coordinates.
			round: function round() {
				return this.clone()._round();
			},

			_round: function _round() {
				this.x = Math.round(this.x);
				this.y = Math.round(this.y);
				return this;
			},

			// @method floor(): Point
			// Returns a copy of the current point with floored coordinates (rounded down).
			floor: function floor() {
				return this.clone()._floor();
			},

			_floor: function _floor() {
				this.x = Math.floor(this.x);
				this.y = Math.floor(this.y);
				return this;
			},

			// @method ceil(): Point
			// Returns a copy of the current point with ceiled coordinates (rounded up).
			ceil: function ceil() {
				return this.clone()._ceil();
			},

			_ceil: function _ceil() {
				this.x = Math.ceil(this.x);
				this.y = Math.ceil(this.y);
				return this;
			},

			// @method distanceTo(otherPoint: Point): Number
			// Returns the cartesian distance between the current and the given points.
			distanceTo: function distanceTo(point) {
				point = toPoint(point);

				var x = point.x - this.x,
				    y = point.y - this.y;

				return Math.sqrt(x * x + y * y);
			},

			// @method equals(otherPoint: Point): Boolean
			// Returns `true` if the given point has the same coordinates.
			equals: function equals(point) {
				point = toPoint(point);

				return point.x === this.x && point.y === this.y;
			},

			// @method contains(otherPoint: Point): Boolean
			// Returns `true` if both coordinates of the given point are less than the corresponding current point coordinates (in absolute values).
			contains: function contains(point) {
				point = toPoint(point);

				return Math.abs(point.x) <= Math.abs(this.x) && Math.abs(point.y) <= Math.abs(this.y);
			},

			// @method toString(): String
			// Returns a string representation of the point for debugging purposes.
			toString: function toString() {
				return 'Point(' + formatNum(this.x) + ', ' + formatNum(this.y) + ')';
			}
		};

		// @factory L.point(x: Number, y: Number, round?: Boolean)
		// Creates a Point object with the given `x` and `y` coordinates. If optional `round` is set to true, rounds the `x` and `y` values.

		// @alternative
		// @factory L.point(coords: Number[])
		// Expects an array of the form `[x, y]` instead.

		// @alternative
		// @factory L.point(coords: Object)
		// Expects a plain object of the form `{x: Number, y: Number}` instead.
		function toPoint(x, y, round) {
			if (x instanceof Point) {
				return x;
			}
			if (isArray(x)) {
				return new Point(x[0], x[1]);
			}
			if (x === undefined || x === null) {
				return x;
			}
			if ((typeof x === 'undefined' ? 'undefined' : _typeof(x)) === 'object' && 'x' in x && 'y' in x) {
				return new Point(x.x, x.y);
			}
			return new Point(x, y, round);
		}

		/*
   * @class Bounds
   * @aka L.Bounds
   *
   * Represents a rectangular area in pixel coordinates.
   *
   * @example
   *
   * ```js
   * var p1 = L.point(10, 10),
   * p2 = L.point(40, 60),
   * bounds = L.bounds(p1, p2);
   * ```
   *
   * All Leaflet methods that accept `Bounds` objects also accept them in a simple Array form (unless noted otherwise), so the bounds example above can be passed like this:
   *
   * ```js
   * otherBounds.intersects([[10, 10], [40, 60]]);
   * ```
   */

		function Bounds(a, b) {
			if (!a) {
				return;
			}

			var points = b ? [a, b] : a;

			for (var i = 0, len = points.length; i < len; i++) {
				this.extend(points[i]);
			}
		}

		Bounds.prototype = {
			// @method extend(point: Point): this
			// Extends the bounds to contain the given point.
			extend: function extend(point) {
				// (Point)
				point = toPoint(point);

				// @property min: Point
				// The top left corner of the rectangle.
				// @property max: Point
				// The bottom right corner of the rectangle.
				if (!this.min && !this.max) {
					this.min = point.clone();
					this.max = point.clone();
				} else {
					this.min.x = Math.min(point.x, this.min.x);
					this.max.x = Math.max(point.x, this.max.x);
					this.min.y = Math.min(point.y, this.min.y);
					this.max.y = Math.max(point.y, this.max.y);
				}
				return this;
			},

			// @method getCenter(round?: Boolean): Point
			// Returns the center point of the bounds.
			getCenter: function getCenter(round) {
				return new Point((this.min.x + this.max.x) / 2, (this.min.y + this.max.y) / 2, round);
			},

			// @method getBottomLeft(): Point
			// Returns the bottom-left point of the bounds.
			getBottomLeft: function getBottomLeft() {
				return new Point(this.min.x, this.max.y);
			},

			// @method getTopRight(): Point
			// Returns the top-right point of the bounds.
			getTopRight: function getTopRight() {
				// -> Point
				return new Point(this.max.x, this.min.y);
			},

			// @method getTopLeft(): Point
			// Returns the top-left point of the bounds (i.e. [`this.min`](#bounds-min)).
			getTopLeft: function getTopLeft() {
				return this.min; // left, top
			},

			// @method getBottomRight(): Point
			// Returns the bottom-right point of the bounds (i.e. [`this.max`](#bounds-max)).
			getBottomRight: function getBottomRight() {
				return this.max; // right, bottom
			},

			// @method getSize(): Point
			// Returns the size of the given bounds
			getSize: function getSize() {
				return this.max.subtract(this.min);
			},

			// @method contains(otherBounds: Bounds): Boolean
			// Returns `true` if the rectangle contains the given one.
			// @alternative
			// @method contains(point: Point): Boolean
			// Returns `true` if the rectangle contains the given point.
			contains: function contains(obj) {
				var min, max;

				if (typeof obj[0] === 'number' || obj instanceof Point) {
					obj = toPoint(obj);
				} else {
					obj = toBounds(obj);
				}

				if (obj instanceof Bounds) {
					min = obj.min;
					max = obj.max;
				} else {
					min = max = obj;
				}

				return min.x >= this.min.x && max.x <= this.max.x && min.y >= this.min.y && max.y <= this.max.y;
			},

			// @method intersects(otherBounds: Bounds): Boolean
			// Returns `true` if the rectangle intersects the given bounds. Two bounds
			// intersect if they have at least one point in common.
			intersects: function intersects(bounds) {
				// (Bounds) -> Boolean
				bounds = toBounds(bounds);

				var min = this.min,
				    max = this.max,
				    min2 = bounds.min,
				    max2 = bounds.max,
				    xIntersects = max2.x >= min.x && min2.x <= max.x,
				    yIntersects = max2.y >= min.y && min2.y <= max.y;

				return xIntersects && yIntersects;
			},

			// @method overlaps(otherBounds: Bounds): Boolean
			// Returns `true` if the rectangle overlaps the given bounds. Two bounds
			// overlap if their intersection is an area.
			overlaps: function overlaps(bounds) {
				// (Bounds) -> Boolean
				bounds = toBounds(bounds);

				var min = this.min,
				    max = this.max,
				    min2 = bounds.min,
				    max2 = bounds.max,
				    xOverlaps = max2.x > min.x && min2.x < max.x,
				    yOverlaps = max2.y > min.y && min2.y < max.y;

				return xOverlaps && yOverlaps;
			},

			isValid: function isValid() {
				return !!(this.min && this.max);
			}
		};

		// @factory L.bounds(corner1: Point, corner2: Point)
		// Creates a Bounds object from two corners coordinate pairs.
		// @alternative
		// @factory L.bounds(points: Point[])
		// Creates a Bounds object from the given array of points.
		function toBounds(a, b) {
			if (!a || a instanceof Bounds) {
				return a;
			}
			return new Bounds(a, b);
		}

		/*
   * @class LatLngBounds
   * @aka L.LatLngBounds
   *
   * Represents a rectangular geographical area on a map.
   *
   * @example
   *
   * ```js
   * var corner1 = L.latLng(40.712, -74.227),
   * corner2 = L.latLng(40.774, -74.125),
   * bounds = L.latLngBounds(corner1, corner2);
   * ```
   *
   * All Leaflet methods that accept LatLngBounds objects also accept them in a simple Array form (unless noted otherwise), so the bounds example above can be passed like this:
   *
   * ```js
   * map.fitBounds([
   * 	[40.712, -74.227],
   * 	[40.774, -74.125]
   * ]);
   * ```
   *
   * Caution: if the area crosses the antimeridian (often confused with the International Date Line), you must specify corners _outside_ the [-180, 180] degrees longitude range.
   */

		function LatLngBounds(corner1, corner2) {
			// (LatLng, LatLng) or (LatLng[])
			if (!corner1) {
				return;
			}

			var latlngs = corner2 ? [corner1, corner2] : corner1;

			for (var i = 0, len = latlngs.length; i < len; i++) {
				this.extend(latlngs[i]);
			}
		}

		LatLngBounds.prototype = {

			// @method extend(latlng: LatLng): this
			// Extend the bounds to contain the given point

			// @alternative
			// @method extend(otherBounds: LatLngBounds): this
			// Extend the bounds to contain the given bounds
			extend: function extend(obj) {
				var sw = this._southWest,
				    ne = this._northEast,
				    sw2,
				    ne2;

				if (obj instanceof LatLng) {
					sw2 = obj;
					ne2 = obj;
				} else if (obj instanceof LatLngBounds) {
					sw2 = obj._southWest;
					ne2 = obj._northEast;

					if (!sw2 || !ne2) {
						return this;
					}
				} else {
					return obj ? this.extend(toLatLng(obj) || toLatLngBounds(obj)) : this;
				}

				if (!sw && !ne) {
					this._southWest = new LatLng(sw2.lat, sw2.lng);
					this._northEast = new LatLng(ne2.lat, ne2.lng);
				} else {
					sw.lat = Math.min(sw2.lat, sw.lat);
					sw.lng = Math.min(sw2.lng, sw.lng);
					ne.lat = Math.max(ne2.lat, ne.lat);
					ne.lng = Math.max(ne2.lng, ne.lng);
				}

				return this;
			},

			// @method pad(bufferRatio: Number): LatLngBounds
			// Returns bigger bounds created by extending the current bounds by a given percentage in each direction.
			pad: function pad(bufferRatio) {
				var sw = this._southWest,
				    ne = this._northEast,
				    heightBuffer = Math.abs(sw.lat - ne.lat) * bufferRatio,
				    widthBuffer = Math.abs(sw.lng - ne.lng) * bufferRatio;

				return new LatLngBounds(new LatLng(sw.lat - heightBuffer, sw.lng - widthBuffer), new LatLng(ne.lat + heightBuffer, ne.lng + widthBuffer));
			},

			// @method getCenter(): LatLng
			// Returns the center point of the bounds.
			getCenter: function getCenter() {
				return new LatLng((this._southWest.lat + this._northEast.lat) / 2, (this._southWest.lng + this._northEast.lng) / 2);
			},

			// @method getSouthWest(): LatLng
			// Returns the south-west point of the bounds.
			getSouthWest: function getSouthWest() {
				return this._southWest;
			},

			// @method getNorthEast(): LatLng
			// Returns the north-east point of the bounds.
			getNorthEast: function getNorthEast() {
				return this._northEast;
			},

			// @method getNorthWest(): LatLng
			// Returns the north-west point of the bounds.
			getNorthWest: function getNorthWest() {
				return new LatLng(this.getNorth(), this.getWest());
			},

			// @method getSouthEast(): LatLng
			// Returns the south-east point of the bounds.
			getSouthEast: function getSouthEast() {
				return new LatLng(this.getSouth(), this.getEast());
			},

			// @method getWest(): Number
			// Returns the west longitude of the bounds
			getWest: function getWest() {
				return this._southWest.lng;
			},

			// @method getSouth(): Number
			// Returns the south latitude of the bounds
			getSouth: function getSouth() {
				return this._southWest.lat;
			},

			// @method getEast(): Number
			// Returns the east longitude of the bounds
			getEast: function getEast() {
				return this._northEast.lng;
			},

			// @method getNorth(): Number
			// Returns the north latitude of the bounds
			getNorth: function getNorth() {
				return this._northEast.lat;
			},

			// @method contains(otherBounds: LatLngBounds): Boolean
			// Returns `true` if the rectangle contains the given one.

			// @alternative
			// @method contains (latlng: LatLng): Boolean
			// Returns `true` if the rectangle contains the given point.
			contains: function contains(obj) {
				// (LatLngBounds) or (LatLng) -> Boolean
				if (typeof obj[0] === 'number' || obj instanceof LatLng || 'lat' in obj) {
					obj = toLatLng(obj);
				} else {
					obj = toLatLngBounds(obj);
				}

				var sw = this._southWest,
				    ne = this._northEast,
				    sw2,
				    ne2;

				if (obj instanceof LatLngBounds) {
					sw2 = obj.getSouthWest();
					ne2 = obj.getNorthEast();
				} else {
					sw2 = ne2 = obj;
				}

				return sw2.lat >= sw.lat && ne2.lat <= ne.lat && sw2.lng >= sw.lng && ne2.lng <= ne.lng;
			},

			// @method intersects(otherBounds: LatLngBounds): Boolean
			// Returns `true` if the rectangle intersects the given bounds. Two bounds intersect if they have at least one point in common.
			intersects: function intersects(bounds) {
				bounds = toLatLngBounds(bounds);

				var sw = this._southWest,
				    ne = this._northEast,
				    sw2 = bounds.getSouthWest(),
				    ne2 = bounds.getNorthEast(),
				    latIntersects = ne2.lat >= sw.lat && sw2.lat <= ne.lat,
				    lngIntersects = ne2.lng >= sw.lng && sw2.lng <= ne.lng;

				return latIntersects && lngIntersects;
			},

			// @method overlaps(otherBounds: Bounds): Boolean
			// Returns `true` if the rectangle overlaps the given bounds. Two bounds overlap if their intersection is an area.
			overlaps: function overlaps(bounds) {
				bounds = toLatLngBounds(bounds);

				var sw = this._southWest,
				    ne = this._northEast,
				    sw2 = bounds.getSouthWest(),
				    ne2 = bounds.getNorthEast(),
				    latOverlaps = ne2.lat > sw.lat && sw2.lat < ne.lat,
				    lngOverlaps = ne2.lng > sw.lng && sw2.lng < ne.lng;

				return latOverlaps && lngOverlaps;
			},

			// @method toBBoxString(): String
			// Returns a string with bounding box coordinates in a 'southwest_lng,southwest_lat,northeast_lng,northeast_lat' format. Useful for sending requests to web services that return geo data.
			toBBoxString: function toBBoxString() {
				return [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(',');
			},

			// @method equals(otherBounds: LatLngBounds, maxMargin?: Number): Boolean
			// Returns `true` if the rectangle is equivalent (within a small margin of error) to the given bounds. The margin of error can be overriden by setting `maxMargin` to a small number.
			equals: function equals(bounds, maxMargin) {
				if (!bounds) {
					return false;
				}

				bounds = toLatLngBounds(bounds);

				return this._southWest.equals(bounds.getSouthWest(), maxMargin) && this._northEast.equals(bounds.getNorthEast(), maxMargin);
			},

			// @method isValid(): Boolean
			// Returns `true` if the bounds are properly initialized.
			isValid: function isValid() {
				return !!(this._southWest && this._northEast);
			}
		};

		// TODO International date line?

		// @factory L.latLngBounds(corner1: LatLng, corner2: LatLng)
		// Creates a `LatLngBounds` object by defining two diagonally opposite corners of the rectangle.

		// @alternative
		// @factory L.latLngBounds(latlngs: LatLng[])
		// Creates a `LatLngBounds` object defined by the geographical points it contains. Very useful for zooming the map to fit a particular set of locations with [`fitBounds`](#map-fitbounds).
		function toLatLngBounds(a, b) {
			if (a instanceof LatLngBounds) {
				return a;
			}
			return new LatLngBounds(a, b);
		}

		/* @class LatLng
   * @aka L.LatLng
   *
   * Represents a geographical point with a certain latitude and longitude.
   *
   * @example
   *
   * ```
   * var latlng = L.latLng(50.5, 30.5);
   * ```
   *
   * All Leaflet methods that accept LatLng objects also accept them in a simple Array form and simple object form (unless noted otherwise), so these lines are equivalent:
   *
   * ```
   * map.panTo([50, 30]);
   * map.panTo({lon: 30, lat: 50});
   * map.panTo({lat: 50, lng: 30});
   * map.panTo(L.latLng(50, 30));
   * ```
   */

		function LatLng(lat, lng, alt) {
			if (isNaN(lat) || isNaN(lng)) {
				throw new Error('Invalid LatLng object: (' + lat + ', ' + lng + ')');
			}

			// @property lat: Number
			// Latitude in degrees
			this.lat = +lat;

			// @property lng: Number
			// Longitude in degrees
			this.lng = +lng;

			// @property alt: Number
			// Altitude in meters (optional)
			if (alt !== undefined) {
				this.alt = +alt;
			}
		}

		LatLng.prototype = {
			// @method equals(otherLatLng: LatLng, maxMargin?: Number): Boolean
			// Returns `true` if the given `LatLng` point is at the same position (within a small margin of error). The margin of error can be overriden by setting `maxMargin` to a small number.
			equals: function equals(obj, maxMargin) {
				if (!obj) {
					return false;
				}

				obj = toLatLng(obj);

				var margin = Math.max(Math.abs(this.lat - obj.lat), Math.abs(this.lng - obj.lng));

				return margin <= (maxMargin === undefined ? 1.0E-9 : maxMargin);
			},

			// @method toString(): String
			// Returns a string representation of the point (for debugging purposes).
			toString: function toString(precision) {
				return 'LatLng(' + formatNum(this.lat, precision) + ', ' + formatNum(this.lng, precision) + ')';
			},

			// @method distanceTo(otherLatLng: LatLng): Number
			// Returns the distance (in meters) to the given `LatLng` calculated using the [Haversine formula](http://en.wikipedia.org/wiki/Haversine_formula).
			distanceTo: function distanceTo(other) {
				return Earth.distance(this, toLatLng(other));
			},

			// @method wrap(): LatLng
			// Returns a new `LatLng` object with the longitude wrapped so it's always between -180 and +180 degrees.
			wrap: function wrap() {
				return Earth.wrapLatLng(this);
			},

			// @method toBounds(sizeInMeters: Number): LatLngBounds
			// Returns a new `LatLngBounds` object in which each boundary is `sizeInMeters/2` meters apart from the `LatLng`.
			toBounds: function toBounds(sizeInMeters) {
				var latAccuracy = 180 * sizeInMeters / 40075017,
				    lngAccuracy = latAccuracy / Math.cos(Math.PI / 180 * this.lat);

				return toLatLngBounds([this.lat - latAccuracy, this.lng - lngAccuracy], [this.lat + latAccuracy, this.lng + lngAccuracy]);
			},

			clone: function clone() {
				return new LatLng(this.lat, this.lng, this.alt);
			}
		};

		// @factory L.latLng(latitude: Number, longitude: Number, altitude?: Number): LatLng
		// Creates an object representing a geographical point with the given latitude and longitude (and optionally altitude).

		// @alternative
		// @factory L.latLng(coords: Array): LatLng
		// Expects an array of the form `[Number, Number]` or `[Number, Number, Number]` instead.

		// @alternative
		// @factory L.latLng(coords: Object): LatLng
		// Expects an plain object of the form `{lat: Number, lng: Number}` or `{lat: Number, lng: Number, alt: Number}` instead.

		function toLatLng(a, b, c) {
			if (a instanceof LatLng) {
				return a;
			}
			if (isArray(a) && _typeof(a[0]) !== 'object') {
				if (a.length === 3) {
					return new LatLng(a[0], a[1], a[2]);
				}
				if (a.length === 2) {
					return new LatLng(a[0], a[1]);
				}
				return null;
			}
			if (a === undefined || a === null) {
				return a;
			}
			if ((typeof a === 'undefined' ? 'undefined' : _typeof(a)) === 'object' && 'lat' in a) {
				return new LatLng(a.lat, 'lng' in a ? a.lng : a.lon, a.alt);
			}
			if (b === undefined) {
				return null;
			}
			return new LatLng(a, b, c);
		}

		/*
   * @namespace CRS
   * @crs L.CRS.Base
   * Object that defines coordinate reference systems for projecting
   * geographical points into pixel (screen) coordinates and back (and to
   * coordinates in other units for [WMS](https://en.wikipedia.org/wiki/Web_Map_Service) services). See
   * [spatial reference system](http://en.wikipedia.org/wiki/Coordinate_reference_system).
   *
   * Leaflet defines the most usual CRSs by default. If you want to use a
   * CRS not defined by default, take a look at the
   * [Proj4Leaflet](https://github.com/kartena/Proj4Leaflet) plugin.
   */

		var CRS = {
			// @method latLngToPoint(latlng: LatLng, zoom: Number): Point
			// Projects geographical coordinates into pixel coordinates for a given zoom.
			latLngToPoint: function latLngToPoint(latlng, zoom) {
				var projectedPoint = this.projection.project(latlng),
				    scale = this.scale(zoom);

				return this.transformation._transform(projectedPoint, scale);
			},

			// @method pointToLatLng(point: Point, zoom: Number): LatLng
			// The inverse of `latLngToPoint`. Projects pixel coordinates on a given
			// zoom into geographical coordinates.
			pointToLatLng: function pointToLatLng(point, zoom) {
				var scale = this.scale(zoom),
				    untransformedPoint = this.transformation.untransform(point, scale);

				return this.projection.unproject(untransformedPoint);
			},

			// @method project(latlng: LatLng): Point
			// Projects geographical coordinates into coordinates in units accepted for
			// this CRS (e.g. meters for EPSG:3857, for passing it to WMS services).
			project: function project(latlng) {
				return this.projection.project(latlng);
			},

			// @method unproject(point: Point): LatLng
			// Given a projected coordinate returns the corresponding LatLng.
			// The inverse of `project`.
			unproject: function unproject(point) {
				return this.projection.unproject(point);
			},

			// @method scale(zoom: Number): Number
			// Returns the scale used when transforming projected coordinates into
			// pixel coordinates for a particular zoom. For example, it returns
			// `256 * 2^zoom` for Mercator-based CRS.
			scale: function scale(zoom) {
				return 256 * Math.pow(2, zoom);
			},

			// @method zoom(scale: Number): Number
			// Inverse of `scale()`, returns the zoom level corresponding to a scale
			// factor of `scale`.
			zoom: function zoom(scale) {
				return Math.log(scale / 256) / Math.LN2;
			},

			// @method getProjectedBounds(zoom: Number): Bounds
			// Returns the projection's bounds scaled and transformed for the provided `zoom`.
			getProjectedBounds: function getProjectedBounds(zoom) {
				if (this.infinite) {
					return null;
				}

				var b = this.projection.bounds,
				    s = this.scale(zoom),
				    min = this.transformation.transform(b.min, s),
				    max = this.transformation.transform(b.max, s);

				return new Bounds(min, max);
			},

			// @method distance(latlng1: LatLng, latlng2: LatLng): Number
			// Returns the distance between two geographical coordinates.

			// @property code: String
			// Standard code name of the CRS passed into WMS services (e.g. `'EPSG:3857'`)
			//
			// @property wrapLng: Number[]
			// An array of two numbers defining whether the longitude (horizontal) coordinate
			// axis wraps around a given range and how. Defaults to `[-180, 180]` in most
			// geographical CRSs. If `undefined`, the longitude axis does not wrap around.
			//
			// @property wrapLat: Number[]
			// Like `wrapLng`, but for the latitude (vertical) axis.

			// wrapLng: [min, max],
			// wrapLat: [min, max],

			// @property infinite: Boolean
			// If true, the coordinate space will be unbounded (infinite in both axes)
			infinite: false,

			// @method wrapLatLng(latlng: LatLng): LatLng
			// Returns a `LatLng` where lat and lng has been wrapped according to the
			// CRS's `wrapLat` and `wrapLng` properties, if they are outside the CRS's bounds.
			wrapLatLng: function wrapLatLng(latlng) {
				var lng = this.wrapLng ? wrapNum(latlng.lng, this.wrapLng, true) : latlng.lng,
				    lat = this.wrapLat ? wrapNum(latlng.lat, this.wrapLat, true) : latlng.lat,
				    alt = latlng.alt;

				return new LatLng(lat, lng, alt);
			},

			// @method wrapLatLngBounds(bounds: LatLngBounds): LatLngBounds
			// Returns a `LatLngBounds` with the same size as the given one, ensuring
			// that its center is within the CRS's bounds.
			// Only accepts actual `L.LatLngBounds` instances, not arrays.
			wrapLatLngBounds: function wrapLatLngBounds(bounds) {
				var center = bounds.getCenter(),
				    newCenter = this.wrapLatLng(center),
				    latShift = center.lat - newCenter.lat,
				    lngShift = center.lng - newCenter.lng;

				if (latShift === 0 && lngShift === 0) {
					return bounds;
				}

				var sw = bounds.getSouthWest(),
				    ne = bounds.getNorthEast(),
				    newSw = new LatLng(sw.lat - latShift, sw.lng - lngShift),
				    newNe = new LatLng(ne.lat - latShift, ne.lng - lngShift);

				return new LatLngBounds(newSw, newNe);
			}
		};

		/*
   * @namespace CRS
   * @crs L.CRS.Earth
   *
   * Serves as the base for CRS that are global such that they cover the earth.
   * Can only be used as the base for other CRS and cannot be used directly,
   * since it does not have a `code`, `projection` or `transformation`. `distance()` returns
   * meters.
   */

		var Earth = extend({}, CRS, {
			wrapLng: [-180, 180],

			// Mean Earth Radius, as recommended for use by
			// the International Union of Geodesy and Geophysics,
			// see http://rosettacode.org/wiki/Haversine_formula
			R: 6371000,

			// distance between two geographical points using spherical law of cosines approximation
			distance: function distance(latlng1, latlng2) {
				var rad = Math.PI / 180,
				    lat1 = latlng1.lat * rad,
				    lat2 = latlng2.lat * rad,
				    a = Math.sin(lat1) * Math.sin(lat2) + Math.cos(lat1) * Math.cos(lat2) * Math.cos((latlng2.lng - latlng1.lng) * rad);

				return this.R * Math.acos(Math.min(a, 1));
			}
		});

		/*
   * @namespace Projection
   * @projection L.Projection.SphericalMercator
   *
   * Spherical Mercator projection — the most common projection for online maps,
   * used by almost all free and commercial tile providers. Assumes that Earth is
   * a sphere. Used by the `EPSG:3857` CRS.
   */

		var SphericalMercator = {

			R: 6378137,
			MAX_LATITUDE: 85.0511287798,

			project: function project(latlng) {
				var d = Math.PI / 180,
				    max = this.MAX_LATITUDE,
				    lat = Math.max(Math.min(max, latlng.lat), -max),
				    sin = Math.sin(lat * d);

				return new Point(this.R * latlng.lng * d, this.R * Math.log((1 + sin) / (1 - sin)) / 2);
			},

			unproject: function unproject(point) {
				var d = 180 / Math.PI;

				return new LatLng((2 * Math.atan(Math.exp(point.y / this.R)) - Math.PI / 2) * d, point.x * d / this.R);
			},

			bounds: function () {
				var d = 6378137 * Math.PI;
				return new Bounds([-d, -d], [d, d]);
			}()
		};

		/*
   * @class Transformation
   * @aka L.Transformation
   *
   * Represents an affine transformation: a set of coefficients `a`, `b`, `c`, `d`
   * for transforming a point of a form `(x, y)` into `(a*x + b, c*y + d)` and doing
   * the reverse. Used by Leaflet in its projections code.
   *
   * @example
   *
   * ```js
   * var transformation = L.transformation(2, 5, -1, 10),
   * 	p = L.point(1, 2),
   * 	p2 = transformation.transform(p), //  L.point(7, 8)
   * 	p3 = transformation.untransform(p2); //  L.point(1, 2)
   * ```
   */

		// factory new L.Transformation(a: Number, b: Number, c: Number, d: Number)
		// Creates a `Transformation` object with the given coefficients.
		function Transformation(a, b, c, d) {
			if (isArray(a)) {
				// use array properties
				this._a = a[0];
				this._b = a[1];
				this._c = a[2];
				this._d = a[3];
				return;
			}
			this._a = a;
			this._b = b;
			this._c = c;
			this._d = d;
		}

		Transformation.prototype = {
			// @method transform(point: Point, scale?: Number): Point
			// Returns a transformed point, optionally multiplied by the given scale.
			// Only accepts actual `L.Point` instances, not arrays.
			transform: function transform(point, scale) {
				// (Point, Number) -> Point
				return this._transform(point.clone(), scale);
			},

			// destructive transform (faster)
			_transform: function _transform(point, scale) {
				scale = scale || 1;
				point.x = scale * (this._a * point.x + this._b);
				point.y = scale * (this._c * point.y + this._d);
				return point;
			},

			// @method untransform(point: Point, scale?: Number): Point
			// Returns the reverse transformation of the given point, optionally divided
			// by the given scale. Only accepts actual `L.Point` instances, not arrays.
			untransform: function untransform(point, scale) {
				scale = scale || 1;
				return new Point((point.x / scale - this._b) / this._a, (point.y / scale - this._d) / this._c);
			}
		};

		// factory L.transformation(a: Number, b: Number, c: Number, d: Number)

		// @factory L.transformation(a: Number, b: Number, c: Number, d: Number)
		// Instantiates a Transformation object with the given coefficients.

		// @alternative
		// @factory L.transformation(coefficients: Array): Transformation
		// Expects an coeficients array of the form
		// `[a: Number, b: Number, c: Number, d: Number]`.

		function toTransformation(a, b, c, d) {
			return new Transformation(a, b, c, d);
		}

		/*
   * @namespace CRS
   * @crs L.CRS.EPSG3857
   *
   * The most common CRS for online maps, used by almost all free and commercial
   * tile providers. Uses Spherical Mercator projection. Set in by default in
   * Map's `crs` option.
   */

		var EPSG3857 = extend({}, Earth, {
			code: 'EPSG:3857',
			projection: SphericalMercator,

			transformation: function () {
				var scale = 0.5 / (Math.PI * SphericalMercator.R);
				return toTransformation(scale, 0.5, -scale, 0.5);
			}()
		});

		var EPSG900913 = extend({}, EPSG3857, {
			code: 'EPSG:900913'
		});

		// @namespace SVG; @section
		// There are several static functions which can be called without instantiating L.SVG:

		// @function create(name: String): SVGElement
		// Returns a instance of [SVGElement](https://developer.mozilla.org/docs/Web/API/SVGElement),
		// corresponding to the class name passed. For example, using 'line' will return
		// an instance of [SVGLineElement](https://developer.mozilla.org/docs/Web/API/SVGLineElement).
		function svgCreate(name) {
			return document.createElementNS('http://www.w3.org/2000/svg', name);
		}

		// @function pointsToPath(rings: Point[], closed: Boolean): String
		// Generates a SVG path string for multiple rings, with each ring turning
		// into "M..L..L.." instructions
		function pointsToPath(rings, closed) {
			var str = '',
			    i,
			    j,
			    len,
			    len2,
			    points,
			    p;

			for (i = 0, len = rings.length; i < len; i++) {
				points = rings[i];

				for (j = 0, len2 = points.length; j < len2; j++) {
					p = points[j];
					str += (j ? 'L' : 'M') + p.x + ' ' + p.y;
				}

				// closes the ring for polygons; "x" is VML syntax
				str += closed ? svg ? 'z' : 'x' : '';
			}

			// SVG complains about empty path strings
			return str || 'M0 0';
		}

		/*
   * @namespace Browser
   * @aka L.Browser
   *
   * A namespace with static properties for browser/feature detection used by Leaflet internally.
   *
   * @example
   *
   * ```js
   * if (L.Browser.ielt9) {
   *   alert('Upgrade your browser, dude!');
   * }
   * ```
   */

		var style$1 = document.documentElement.style;

		// @property ie: Boolean; `true` for all Internet Explorer versions (not Edge).
		var ie = 'ActiveXObject' in window;

		// @property ielt9: Boolean; `true` for Internet Explorer versions less than 9.
		var ielt9 = ie && !document.addEventListener;

		// @property edge: Boolean; `true` for the Edge web browser.
		var edge = 'msLaunchUri' in navigator && !('documentMode' in document);

		// @property webkit: Boolean;
		// `true` for webkit-based browsers like Chrome and Safari (including mobile versions).
		var webkit = userAgentContains('webkit');

		// @property android: Boolean
		// `true` for any browser running on an Android platform.
		var android = userAgentContains('android');

		// @property android23: Boolean; `true` for browsers running on Android 2 or Android 3.
		var android23 = userAgentContains('android 2') || userAgentContains('android 3');

		// @property opera: Boolean; `true` for the Opera browser
		var opera = !!window.opera;

		// @property chrome: Boolean; `true` for the Chrome browser.
		var chrome = userAgentContains('chrome');

		// @property gecko: Boolean; `true` for gecko-based browsers like Firefox.
		var gecko = userAgentContains('gecko') && !webkit && !opera && !ie;

		// @property safari: Boolean; `true` for the Safari browser.
		var safari = !chrome && userAgentContains('safari');

		var phantom = userAgentContains('phantom');

		// @property opera12: Boolean
		// `true` for the Opera browser supporting CSS transforms (version 12 or later).
		var opera12 = 'OTransition' in style$1;

		// @property win: Boolean; `true` when the browser is running in a Windows platform
		var win = navigator.platform.indexOf('Win') === 0;

		// @property ie3d: Boolean; `true` for all Internet Explorer versions supporting CSS transforms.
		var ie3d = ie && 'transition' in style$1;

		// @property webkit3d: Boolean; `true` for webkit-based browsers supporting CSS transforms.
		var webkit3d = 'WebKitCSSMatrix' in window && 'm11' in new window.WebKitCSSMatrix() && !android23;

		// @property gecko3d: Boolean; `true` for gecko-based browsers supporting CSS transforms.
		var gecko3d = 'MozPerspective' in style$1;

		// @property any3d: Boolean
		// `true` for all browsers supporting CSS transforms.
		var any3d = !window.L_DISABLE_3D && (ie3d || webkit3d || gecko3d) && !opera12 && !phantom;

		// @property mobile: Boolean; `true` for all browsers running in a mobile device.
		var mobile = typeof orientation !== 'undefined' || userAgentContains('mobile');

		// @property mobileWebkit: Boolean; `true` for all webkit-based browsers in a mobile device.
		var mobileWebkit = mobile && webkit;

		// @property mobileWebkit3d: Boolean
		// `true` for all webkit-based browsers in a mobile device supporting CSS transforms.
		var mobileWebkit3d = mobile && webkit3d;

		// @property msPointer: Boolean
		// `true` for browsers implementing the Microsoft touch events model (notably IE10).
		var msPointer = !window.PointerEvent && window.MSPointerEvent;

		// @property pointer: Boolean
		// `true` for all browsers supporting [pointer events](https://msdn.microsoft.com/en-us/library/dn433244%28v=vs.85%29.aspx).
		var pointer = !!(window.PointerEvent || msPointer);

		// @property touch: Boolean
		// `true` for all browsers supporting [touch events](https://developer.mozilla.org/docs/Web/API/Touch_events).
		// This does not necessarily mean that the browser is running in a computer with
		// a touchscreen, it only means that the browser is capable of understanding
		// touch events.
		var touch = !window.L_NO_TOUCH && (pointer || 'ontouchstart' in window || window.DocumentTouch && document instanceof window.DocumentTouch);

		// @property mobileOpera: Boolean; `true` for the Opera browser in a mobile device.
		var mobileOpera = mobile && opera;

		// @property mobileGecko: Boolean
		// `true` for gecko-based browsers running in a mobile device.
		var mobileGecko = mobile && gecko;

		// @property retina: Boolean
		// `true` for browsers on a high-resolution "retina" screen.
		var retina = (window.devicePixelRatio || window.screen.deviceXDPI / window.screen.logicalXDPI) > 1;

		// @property canvas: Boolean
		// `true` when the browser supports [`<canvas>`](https://developer.mozilla.org/docs/Web/API/Canvas_API).
		var canvas = function () {
			return !!document.createElement('canvas').getContext;
		}();

		// @property svg: Boolean
		// `true` when the browser supports [SVG](https://developer.mozilla.org/docs/Web/SVG).
		var svg = !!(document.createElementNS && svgCreate('svg').createSVGRect);

		// @property vml: Boolean
		// `true` if the browser supports [VML](https://en.wikipedia.org/wiki/Vector_Markup_Language).
		var vml = !svg && function () {
			try {
				var div = document.createElement('div');
				div.innerHTML = '<v:shape adj="1"/>';

				var shape = div.firstChild;
				shape.style.behavior = 'url(#default#VML)';

				return shape && _typeof(shape.adj) === 'object';
			} catch (e) {
				return false;
			}
		}();

		function userAgentContains(str) {
			return navigator.userAgent.toLowerCase().indexOf(str) >= 0;
		}

		var Browser = (Object.freeze || Object)({
			ie: ie,
			ielt9: ielt9,
			edge: edge,
			webkit: webkit,
			android: android,
			android23: android23,
			opera: opera,
			chrome: chrome,
			gecko: gecko,
			safari: safari,
			phantom: phantom,
			opera12: opera12,
			win: win,
			ie3d: ie3d,
			webkit3d: webkit3d,
			gecko3d: gecko3d,
			any3d: any3d,
			mobile: mobile,
			mobileWebkit: mobileWebkit,
			mobileWebkit3d: mobileWebkit3d,
			msPointer: msPointer,
			pointer: pointer,
			touch: touch,
			mobileOpera: mobileOpera,
			mobileGecko: mobileGecko,
			retina: retina,
			canvas: canvas,
			svg: svg,
			vml: vml
		});

		/*
   * Extends L.DomEvent to provide touch support for Internet Explorer and Windows-based devices.
   */

		var POINTER_DOWN = msPointer ? 'MSPointerDown' : 'pointerdown';
		var POINTER_MOVE = msPointer ? 'MSPointerMove' : 'pointermove';
		var POINTER_UP = msPointer ? 'MSPointerUp' : 'pointerup';
		var POINTER_CANCEL = msPointer ? 'MSPointerCancel' : 'pointercancel';
		var TAG_WHITE_LIST = ['INPUT', 'SELECT', 'OPTION'];
		var _pointers = {};
		var _pointerDocListener = false;

		// DomEvent.DoubleTap needs to know about this
		var _pointersCount = 0;

		// Provides a touch events wrapper for (ms)pointer events.
		// ref http://www.w3.org/TR/pointerevents/ https://www.w3.org/Bugs/Public/show_bug.cgi?id=22890

		function addPointerListener(obj, type, handler, id) {
			if (type === 'touchstart') {
				_addPointerStart(obj, handler, id);
			} else if (type === 'touchmove') {
				_addPointerMove(obj, handler, id);
			} else if (type === 'touchend') {
				_addPointerEnd(obj, handler, id);
			}

			return this;
		}

		function removePointerListener(obj, type, id) {
			var handler = obj['_leaflet_' + type + id];

			if (type === 'touchstart') {
				obj.removeEventListener(POINTER_DOWN, handler, false);
			} else if (type === 'touchmove') {
				obj.removeEventListener(POINTER_MOVE, handler, false);
			} else if (type === 'touchend') {
				obj.removeEventListener(POINTER_UP, handler, false);
				obj.removeEventListener(POINTER_CANCEL, handler, false);
			}

			return this;
		}

		function _addPointerStart(obj, handler, id) {
			var onDown = bind(function (e) {
				if (e.pointerType !== 'mouse' && e.pointerType !== e.MSPOINTER_TYPE_MOUSE && e.pointerType !== e.MSPOINTER_TYPE_MOUSE) {
					// In IE11, some touch events needs to fire for form controls, or
					// the controls will stop working. We keep a whitelist of tag names that
					// need these events. For other target tags, we prevent default on the event.
					if (TAG_WHITE_LIST.indexOf(e.target.tagName) < 0) {
						preventDefault(e);
					} else {
						return;
					}
				}

				_handlePointer(e, handler);
			});

			obj['_leaflet_touchstart' + id] = onDown;
			obj.addEventListener(POINTER_DOWN, onDown, false);

			// need to keep track of what pointers and how many are active to provide e.touches emulation
			if (!_pointerDocListener) {
				// we listen documentElement as any drags that end by moving the touch off the screen get fired there
				document.documentElement.addEventListener(POINTER_DOWN, _globalPointerDown, true);
				document.documentElement.addEventListener(POINTER_MOVE, _globalPointerMove, true);
				document.documentElement.addEventListener(POINTER_UP, _globalPointerUp, true);
				document.documentElement.addEventListener(POINTER_CANCEL, _globalPointerUp, true);

				_pointerDocListener = true;
			}
		}

		function _globalPointerDown(e) {
			_pointers[e.pointerId] = e;
			_pointersCount++;
		}

		function _globalPointerMove(e) {
			if (_pointers[e.pointerId]) {
				_pointers[e.pointerId] = e;
			}
		}

		function _globalPointerUp(e) {
			delete _pointers[e.pointerId];
			_pointersCount--;
		}

		function _handlePointer(e, handler) {
			e.touches = [];
			for (var i in _pointers) {
				e.touches.push(_pointers[i]);
			}
			e.changedTouches = [e];

			handler(e);
		}

		function _addPointerMove(obj, handler, id) {
			var onMove = function onMove(e) {
				// don't fire touch moves when mouse isn't down
				if ((e.pointerType === e.MSPOINTER_TYPE_MOUSE || e.pointerType === 'mouse') && e.buttons === 0) {
					return;
				}

				_handlePointer(e, handler);
			};

			obj['_leaflet_touchmove' + id] = onMove;
			obj.addEventListener(POINTER_MOVE, onMove, false);
		}

		function _addPointerEnd(obj, handler, id) {
			var onUp = function onUp(e) {
				_handlePointer(e, handler);
			};

			obj['_leaflet_touchend' + id] = onUp;
			obj.addEventListener(POINTER_UP, onUp, false);
			obj.addEventListener(POINTER_CANCEL, onUp, false);
		}

		/*
   * Extends the event handling code with double tap support for mobile browsers.
   */

		var _touchstart = msPointer ? 'MSPointerDown' : pointer ? 'pointerdown' : 'touchstart';
		var _touchend = msPointer ? 'MSPointerUp' : pointer ? 'pointerup' : 'touchend';
		var _pre = '_leaflet_';

		// inspired by Zepto touch code by Thomas Fuchs
		function addDoubleTapListener(obj, handler, id) {
			var last,
			    touch$$1,
			    doubleTap = false,
			    delay = 250;

			function onTouchStart(e) {
				var count;

				if (pointer) {
					if (!edge || e.pointerType === 'mouse') {
						return;
					}
					count = _pointersCount;
				} else {
					count = e.touches.length;
				}

				if (count > 1) {
					return;
				}

				var now = Date.now(),
				    delta = now - (last || now);

				touch$$1 = e.touches ? e.touches[0] : e;
				doubleTap = delta > 0 && delta <= delay;
				last = now;
			}

			function onTouchEnd(e) {
				if (doubleTap && !touch$$1.cancelBubble) {
					if (pointer) {
						if (!edge || e.pointerType === 'mouse') {
							return;
						}
						// work around .type being readonly with MSPointer* events
						var newTouch = {},
						    prop,
						    i;

						for (i in touch$$1) {
							prop = touch$$1[i];
							newTouch[i] = prop && prop.bind ? prop.bind(touch$$1) : prop;
						}
						touch$$1 = newTouch;
					}
					touch$$1.type = 'dblclick';
					handler(touch$$1);
					last = null;
				}
			}

			obj[_pre + _touchstart + id] = onTouchStart;
			obj[_pre + _touchend + id] = onTouchEnd;
			obj[_pre + 'dblclick' + id] = handler;

			obj.addEventListener(_touchstart, onTouchStart, false);
			obj.addEventListener(_touchend, onTouchEnd, false);

			// On some platforms (notably, chrome<55 on win10 + touchscreen + mouse),
			// the browser doesn't fire touchend/pointerup events but does fire
			// native dblclicks. See #4127.
			// Edge 14 also fires native dblclicks, but only for pointerType mouse, see #5180.
			obj.addEventListener('dblclick', handler, false);

			return this;
		}

		function removeDoubleTapListener(obj, id) {
			var touchstart = obj[_pre + _touchstart + id],
			    touchend = obj[_pre + _touchend + id],
			    dblclick = obj[_pre + 'dblclick' + id];

			obj.removeEventListener(_touchstart, touchstart, false);
			obj.removeEventListener(_touchend, touchend, false);
			if (!edge) {
				obj.removeEventListener('dblclick', dblclick, false);
			}

			return this;
		}

		/*
   * @namespace DomEvent
   * Utility functions to work with the [DOM events](https://developer.mozilla.org/docs/Web/API/Event), used by Leaflet internally.
   */

		// Inspired by John Resig, Dean Edwards and YUI addEvent implementations.

		// @function on(el: HTMLElement, types: String, fn: Function, context?: Object): this
		// Adds a listener function (`fn`) to a particular DOM event type of the
		// element `el`. You can optionally specify the context of the listener
		// (object the `this` keyword will point to). You can also pass several
		// space-separated types (e.g. `'click dblclick'`).

		// @alternative
		// @function on(el: HTMLElement, eventMap: Object, context?: Object): this
		// Adds a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`
		function on(obj, types, fn, context) {

			if ((typeof types === 'undefined' ? 'undefined' : _typeof(types)) === 'object') {
				for (var type in types) {
					addOne(obj, type, types[type], fn);
				}
			} else {
				types = splitWords(types);

				for (var i = 0, len = types.length; i < len; i++) {
					addOne(obj, types[i], fn, context);
				}
			}

			return this;
		}

		var eventsKey = '_leaflet_events';

		// @function off(el: HTMLElement, types: String, fn: Function, context?: Object): this
		// Removes a previously added listener function. If no function is specified,
		// it will remove all the listeners of that particular DOM event from the element.
		// Note that if you passed a custom context to on, you must pass the same
		// context to `off` in order to remove the listener.

		// @alternative
		// @function off(el: HTMLElement, eventMap: Object, context?: Object): this
		// Removes a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`

		// @alternative
		// @function off(el: HTMLElement): this
		// Removes all known event listeners
		function off(obj, types, fn, context) {

			if ((typeof types === 'undefined' ? 'undefined' : _typeof(types)) === 'object') {
				for (var type in types) {
					removeOne(obj, type, types[type], fn);
				}
			} else if (types) {
				types = splitWords(types);

				for (var i = 0, len = types.length; i < len; i++) {
					removeOne(obj, types[i], fn, context);
				}
			} else {
				for (var j in obj[eventsKey]) {
					removeOne(obj, j, obj[eventsKey][j]);
				}
				delete obj[eventsKey];
			}

			return this;
		}

		function addOne(obj, type, fn, context) {
			var id = type + stamp(fn) + (context ? '_' + stamp(context) : '');

			if (obj[eventsKey] && obj[eventsKey][id]) {
				return this;
			}

			var handler = function handler(e) {
				return fn.call(context || obj, e || window.event);
			};

			var originalHandler = handler;

			if (pointer && type.indexOf('touch') === 0) {
				// Needs DomEvent.Pointer.js
				addPointerListener(obj, type, handler, id);
			} else if (touch && type === 'dblclick' && addDoubleTapListener && !(pointer && chrome)) {
				// Chrome >55 does not need the synthetic dblclicks from addDoubleTapListener
				// See #5180
				addDoubleTapListener(obj, handler, id);
			} else if ('addEventListener' in obj) {

				if (type === 'mousewheel') {
					obj.addEventListener('onwheel' in obj ? 'wheel' : 'mousewheel', handler, false);
				} else if (type === 'mouseenter' || type === 'mouseleave') {
					handler = function handler(e) {
						e = e || window.event;
						if (isExternalTarget(obj, e)) {
							originalHandler(e);
						}
					};
					obj.addEventListener(type === 'mouseenter' ? 'mouseover' : 'mouseout', handler, false);
				} else {
					if (type === 'click' && android) {
						handler = function handler(e) {
							filterClick(e, originalHandler);
						};
					}
					obj.addEventListener(type, handler, false);
				}
			} else if ('attachEvent' in obj) {
				obj.attachEvent('on' + type, handler);
			}

			obj[eventsKey] = obj[eventsKey] || {};
			obj[eventsKey][id] = handler;
		}

		function removeOne(obj, type, fn, context) {

			var id = type + stamp(fn) + (context ? '_' + stamp(context) : ''),
			    handler = obj[eventsKey] && obj[eventsKey][id];

			if (!handler) {
				return this;
			}

			if (pointer && type.indexOf('touch') === 0) {
				removePointerListener(obj, type, id);
			} else if (touch && type === 'dblclick' && removeDoubleTapListener) {
				removeDoubleTapListener(obj, id);
			} else if ('removeEventListener' in obj) {

				if (type === 'mousewheel') {
					obj.removeEventListener('onwheel' in obj ? 'wheel' : 'mousewheel', handler, false);
				} else {
					obj.removeEventListener(type === 'mouseenter' ? 'mouseover' : type === 'mouseleave' ? 'mouseout' : type, handler, false);
				}
			} else if ('detachEvent' in obj) {
				obj.detachEvent('on' + type, handler);
			}

			obj[eventsKey][id] = null;
		}

		// @function stopPropagation(ev: DOMEvent): this
		// Stop the given event from propagation to parent elements. Used inside the listener functions:
		// ```js
		// L.DomEvent.on(div, 'click', function (ev) {
		// 	L.DomEvent.stopPropagation(ev);
		// });
		// ```
		function stopPropagation(e) {

			if (e.stopPropagation) {
				e.stopPropagation();
			} else if (e.originalEvent) {
				// In case of Leaflet event.
				e.originalEvent._stopped = true;
			} else {
				e.cancelBubble = true;
			}
			skipped(e);

			return this;
		}

		// @function disableScrollPropagation(el: HTMLElement): this
		// Adds `stopPropagation` to the element's `'mousewheel'` events (plus browser variants).
		function disableScrollPropagation(el) {
			addOne(el, 'mousewheel', stopPropagation);
			return this;
		}

		// @function disableClickPropagation(el: HTMLElement): this
		// Adds `stopPropagation` to the element's `'click'`, `'doubleclick'`,
		// `'mousedown'` and `'touchstart'` events (plus browser variants).
		function disableClickPropagation(el) {
			on(el, 'mousedown touchstart dblclick', stopPropagation);
			addOne(el, 'click', fakeStop);
			return this;
		}

		// @function preventDefault(ev: DOMEvent): this
		// Prevents the default action of the DOM Event `ev` from happening (such as
		// following a link in the href of the a element, or doing a POST request
		// with page reload when a `<form>` is submitted).
		// Use it inside listener functions.
		function preventDefault(e) {
			if (e.preventDefault) {
				e.preventDefault();
			} else {
				e.returnValue = false;
			}
			return this;
		}

		// @function stop(ev): this
		// Does `stopPropagation` and `preventDefault` at the same time.
		function stop(e) {
			preventDefault(e);
			stopPropagation(e);
			return this;
		}

		// @function getMousePosition(ev: DOMEvent, container?: HTMLElement): Point
		// Gets normalized mouse position from a DOM event relative to the
		// `container` or to the whole page if not specified.
		function getMousePosition(e, container) {
			if (!container) {
				return new Point(e.clientX, e.clientY);
			}

			var rect = container.getBoundingClientRect();

			return new Point(e.clientX - rect.left - container.clientLeft, e.clientY - rect.top - container.clientTop);
		}

		// Chrome on Win scrolls double the pixels as in other platforms (see #4538),
		// and Firefox scrolls device pixels, not CSS pixels
		var wheelPxFactor = win && chrome ? 2 * window.devicePixelRatio : gecko ? window.devicePixelRatio : 1;

		// @function getWheelDelta(ev: DOMEvent): Number
		// Gets normalized wheel delta from a mousewheel DOM event, in vertical
		// pixels scrolled (negative if scrolling down).
		// Events from pointing devices without precise scrolling are mapped to
		// a best guess of 60 pixels.
		function getWheelDelta(e) {
			return edge ? e.wheelDeltaY / 2 : // Don't trust window-geometry-based delta
			e.deltaY && e.deltaMode === 0 ? -e.deltaY / wheelPxFactor : // Pixels
			e.deltaY && e.deltaMode === 1 ? -e.deltaY * 20 : // Lines
			e.deltaY && e.deltaMode === 2 ? -e.deltaY * 60 : // Pages
			e.deltaX || e.deltaZ ? 0 : // Skip horizontal/depth wheel events
			e.wheelDelta ? (e.wheelDeltaY || e.wheelDelta) / 2 : // Legacy IE pixels
			e.detail && Math.abs(e.detail) < 32765 ? -e.detail * 20 : // Legacy Moz lines
			e.detail ? e.detail / -32765 * 60 : // Legacy Moz pages
			0;
		}

		var skipEvents = {};

		function fakeStop(e) {
			// fakes stopPropagation by setting a special event flag, checked/reset with skipped(e)
			skipEvents[e.type] = true;
		}

		function skipped(e) {
			var events = skipEvents[e.type];
			// reset when checking, as it's only used in map container and propagates outside of the map
			skipEvents[e.type] = false;
			return events;
		}

		// check if element really left/entered the event target (for mouseenter/mouseleave)
		function isExternalTarget(el, e) {

			var related = e.relatedTarget;

			if (!related) {
				return true;
			}

			try {
				while (related && related !== el) {
					related = related.parentNode;
				}
			} catch (err) {
				return false;
			}
			return related !== el;
		}

		var lastClick;

		// this is a horrible workaround for a bug in Android where a single touch triggers two click events
		function filterClick(e, handler) {
			var timeStamp = e.timeStamp || e.originalEvent && e.originalEvent.timeStamp,
			    elapsed = lastClick && timeStamp - lastClick;

			// are they closer together than 500ms yet more than 100ms?
			// Android typically triggers them ~300ms apart while multiple listeners
			// on the same event should be triggered far faster;
			// or check if click is simulated on the element, and if it is, reject any non-simulated events

			if (elapsed && elapsed > 100 && elapsed < 500 || e.target._simulatedClick && !e._simulated) {
				stop(e);
				return;
			}
			lastClick = timeStamp;

			handler(e);
		}

		var DomEvent = (Object.freeze || Object)({
			on: on,
			off: off,
			stopPropagation: stopPropagation,
			disableScrollPropagation: disableScrollPropagation,
			disableClickPropagation: disableClickPropagation,
			preventDefault: preventDefault,
			stop: stop,
			getMousePosition: getMousePosition,
			getWheelDelta: getWheelDelta,
			fakeStop: fakeStop,
			skipped: skipped,
			isExternalTarget: isExternalTarget,
			addListener: on,
			removeListener: off
		});

		/*
   * @namespace DomUtil
   *
   * Utility functions to work with the [DOM](https://developer.mozilla.org/docs/Web/API/Document_Object_Model)
   * tree, used by Leaflet internally.
   *
   * Most functions expecting or returning a `HTMLElement` also work for
   * SVG elements. The only difference is that classes refer to CSS classes
   * in HTML and SVG classes in SVG.
   */

		// @property TRANSFORM: String
		// Vendor-prefixed transform style name (e.g. `'webkitTransform'` for WebKit).
		var TRANSFORM = testProp(['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform']);

		// webkitTransition comes first because some browser versions that drop vendor prefix don't do
		// the same for the transitionend event, in particular the Android 4.1 stock browser

		// @property TRANSITION: String
		// Vendor-prefixed transition style name.
		var TRANSITION = testProp(['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);

		// @property TRANSITION_END: String
		// Vendor-prefixed transitionend event name.
		var TRANSITION_END = TRANSITION === 'webkitTransition' || TRANSITION === 'OTransition' ? TRANSITION + 'End' : 'transitionend';

		// @function get(id: String|HTMLElement): HTMLElement
		// Returns an element given its DOM id, or returns the element itself
		// if it was passed directly.
		function get(id) {
			return typeof id === 'string' ? document.getElementById(id) : id;
		}

		// @function getStyle(el: HTMLElement, styleAttrib: String): String
		// Returns the value for a certain style attribute on an element,
		// including computed values or values set through CSS.
		function getStyle(el, style) {
			var value = el.style[style] || el.currentStyle && el.currentStyle[style];

			if ((!value || value === 'auto') && document.defaultView) {
				var css = document.defaultView.getComputedStyle(el, null);
				value = css ? css[style] : null;
			}
			return value === 'auto' ? null : value;
		}

		// @function create(tagName: String, className?: String, container?: HTMLElement): HTMLElement
		// Creates an HTML element with `tagName`, sets its class to `className`, and optionally appends it to `container` element.
		function create$1(tagName, className, container) {
			var el = document.createElement(tagName);
			el.className = className || '';

			if (container) {
				container.appendChild(el);
			}
			return el;
		}

		// @function remove(el: HTMLElement)
		// Removes `el` from its parent element
		function _remove(el) {
			var parent = el.parentNode;
			if (parent) {
				parent.removeChild(el);
			}
		}

		// @function empty(el: HTMLElement)
		// Removes all of `el`'s children elements from `el`
		function empty(el) {
			while (el.firstChild) {
				el.removeChild(el.firstChild);
			}
		}

		// @function toFront(el: HTMLElement)
		// Makes `el` the last child of its parent, so it renders in front of the other children.
		function toFront(el) {
			var parent = el.parentNode;
			if (parent.lastChild !== el) {
				parent.appendChild(el);
			}
		}

		// @function toBack(el: HTMLElement)
		// Makes `el` the first child of its parent, so it renders behind the other children.
		function toBack(el) {
			var parent = el.parentNode;
			if (parent.firstChild !== el) {
				parent.insertBefore(el, parent.firstChild);
			}
		}

		// @function hasClass(el: HTMLElement, name: String): Boolean
		// Returns `true` if the element's class attribute contains `name`.
		function hasClass(el, name) {
			if (el.classList !== undefined) {
				return el.classList.contains(name);
			}
			var className = getClass(el);
			return className.length > 0 && new RegExp('(^|\\s)' + name + '(\\s|$)').test(className);
		}

		// @function addClass(el: HTMLElement, name: String)
		// Adds `name` to the element's class attribute.
		function addClass(el, name) {
			if (el.classList !== undefined) {
				var classes = splitWords(name);
				for (var i = 0, len = classes.length; i < len; i++) {
					el.classList.add(classes[i]);
				}
			} else if (!hasClass(el, name)) {
				var className = getClass(el);
				setClass(el, (className ? className + ' ' : '') + name);
			}
		}

		// @function removeClass(el: HTMLElement, name: String)
		// Removes `name` from the element's class attribute.
		function removeClass(el, name) {
			if (el.classList !== undefined) {
				el.classList.remove(name);
			} else {
				setClass(el, trim((' ' + getClass(el) + ' ').replace(' ' + name + ' ', ' ')));
			}
		}

		// @function setClass(el: HTMLElement, name: String)
		// Sets the element's class.
		function setClass(el, name) {
			if (el.className.baseVal === undefined) {
				el.className = name;
			} else {
				// in case of SVG element
				el.className.baseVal = name;
			}
		}

		// @function getClass(el: HTMLElement): String
		// Returns the element's class.
		function getClass(el) {
			return el.className.baseVal === undefined ? el.className : el.className.baseVal;
		}

		// @function setOpacity(el: HTMLElement, opacity: Number)
		// Set the opacity of an element (including old IE support).
		// `opacity` must be a number from `0` to `1`.
		function _setOpacity(el, value) {
			if ('opacity' in el.style) {
				el.style.opacity = value;
			} else if ('filter' in el.style) {
				_setOpacityIE(el, value);
			}
		}

		function _setOpacityIE(el, value) {
			var filter = false,
			    filterName = 'DXImageTransform.Microsoft.Alpha';

			// filters collection throws an error if we try to retrieve a filter that doesn't exist
			try {
				filter = el.filters.item(filterName);
			} catch (e) {
				// don't set opacity to 1 if we haven't already set an opacity,
				// it isn't needed and breaks transparent pngs.
				if (value === 1) {
					return;
				}
			}

			value = Math.round(value * 100);

			if (filter) {
				filter.Enabled = value !== 100;
				filter.Opacity = value;
			} else {
				el.style.filter += ' progid:' + filterName + '(opacity=' + value + ')';
			}
		}

		// @function testProp(props: String[]): String|false
		// Goes through the array of style names and returns the first name
		// that is a valid style name for an element. If no such name is found,
		// it returns false. Useful for vendor-prefixed styles like `transform`.
		function testProp(props) {
			var style = document.documentElement.style;

			for (var i = 0; i < props.length; i++) {
				if (props[i] in style) {
					return props[i];
				}
			}
			return false;
		}

		// @function setTransform(el: HTMLElement, offset: Point, scale?: Number)
		// Resets the 3D CSS transform of `el` so it is translated by `offset` pixels
		// and optionally scaled by `scale`. Does not have an effect if the
		// browser doesn't support 3D CSS transforms.
		function setTransform(el, offset, scale) {
			var pos = offset || new Point(0, 0);

			el.style[TRANSFORM] = (ie3d ? 'translate(' + pos.x + 'px,' + pos.y + 'px)' : 'translate3d(' + pos.x + 'px,' + pos.y + 'px,0)') + (scale ? ' scale(' + scale + ')' : '');
		}

		// @function setPosition(el: HTMLElement, position: Point)
		// Sets the position of `el` to coordinates specified by `position`,
		// using CSS translate or top/left positioning depending on the browser
		// (used by Leaflet internally to position its layers).
		function setPosition(el, point) {

			/*eslint-disable */
			el._leaflet_pos = point;
			/*eslint-enable */

			if (any3d) {
				setTransform(el, point);
			} else {
				el.style.left = point.x + 'px';
				el.style.top = point.y + 'px';
			}
		}

		// @function getPosition(el: HTMLElement): Point
		// Returns the coordinates of an element previously positioned with setPosition.
		function getPosition(el) {
			// this method is only used for elements previously positioned using setPosition,
			// so it's safe to cache the position for performance

			return el._leaflet_pos || new Point(0, 0);
		}

		// @function disableTextSelection()
		// Prevents the user from generating `selectstart` DOM events, usually generated
		// when the user drags the mouse through a page with text. Used internally
		// by Leaflet to override the behaviour of any click-and-drag interaction on
		// the map. Affects drag interactions on the whole document.

		// @function enableTextSelection()
		// Cancels the effects of a previous [`L.DomUtil.disableTextSelection`](#domutil-disabletextselection).
		var disableTextSelection;
		var enableTextSelection;
		var _userSelect;
		if ('onselectstart' in document) {
			disableTextSelection = function disableTextSelection() {
				on(window, 'selectstart', preventDefault);
			};
			enableTextSelection = function enableTextSelection() {
				off(window, 'selectstart', preventDefault);
			};
		} else {
			var userSelectProperty = testProp(['userSelect', 'WebkitUserSelect', 'OUserSelect', 'MozUserSelect', 'msUserSelect']);

			disableTextSelection = function disableTextSelection() {
				if (userSelectProperty) {
					var style = document.documentElement.style;
					_userSelect = style[userSelectProperty];
					style[userSelectProperty] = 'none';
				}
			};
			enableTextSelection = function enableTextSelection() {
				if (userSelectProperty) {
					document.documentElement.style[userSelectProperty] = _userSelect;
					_userSelect = undefined;
				}
			};
		}

		// @function disableImageDrag()
		// As [`L.DomUtil.disableTextSelection`](#domutil-disabletextselection), but
		// for `dragstart` DOM events, usually generated when the user drags an image.
		function disableImageDrag() {
			on(window, 'dragstart', preventDefault);
		}

		// @function enableImageDrag()
		// Cancels the effects of a previous [`L.DomUtil.disableImageDrag`](#domutil-disabletextselection).
		function enableImageDrag() {
			off(window, 'dragstart', preventDefault);
		}

		var _outlineElement;
		var _outlineStyle;
		// @function preventOutline(el: HTMLElement)
		// Makes the [outline](https://developer.mozilla.org/docs/Web/CSS/outline)
		// of the element `el` invisible. Used internally by Leaflet to prevent
		// focusable elements from displaying an outline when the user performs a
		// drag interaction on them.
		function preventOutline(element) {
			while (element.tabIndex === -1) {
				element = element.parentNode;
			}
			if (!element.style) {
				return;
			}
			restoreOutline();
			_outlineElement = element;
			_outlineStyle = element.style.outline;
			element.style.outline = 'none';
			on(window, 'keydown', restoreOutline);
		}

		// @function restoreOutline()
		// Cancels the effects of a previous [`L.DomUtil.preventOutline`]().
		function restoreOutline() {
			if (!_outlineElement) {
				return;
			}
			_outlineElement.style.outline = _outlineStyle;
			_outlineElement = undefined;
			_outlineStyle = undefined;
			off(window, 'keydown', restoreOutline);
		}

		var DomUtil = (Object.freeze || Object)({
			TRANSFORM: TRANSFORM,
			TRANSITION: TRANSITION,
			TRANSITION_END: TRANSITION_END,
			get: get,
			getStyle: getStyle,
			create: create$1,
			remove: _remove,
			empty: empty,
			toFront: toFront,
			toBack: toBack,
			hasClass: hasClass,
			addClass: addClass,
			removeClass: removeClass,
			setClass: setClass,
			getClass: getClass,
			setOpacity: _setOpacity,
			testProp: testProp,
			setTransform: setTransform,
			setPosition: setPosition,
			getPosition: getPosition,
			disableTextSelection: disableTextSelection,
			enableTextSelection: enableTextSelection,
			disableImageDrag: disableImageDrag,
			enableImageDrag: enableImageDrag,
			preventOutline: preventOutline,
			restoreOutline: restoreOutline
		});

		/*
   * @class PosAnimation
   * @aka L.PosAnimation
   * @inherits Evented
   * Used internally for panning animations, utilizing CSS3 Transitions for modern browsers and a timer fallback for IE6-9.
   *
   * @example
   * ```js
   * var fx = new L.PosAnimation();
   * fx.run(el, [300, 500], 0.5);
   * ```
   *
   * @constructor L.PosAnimation()
   * Creates a `PosAnimation` object.
   *
   */

		var PosAnimation = Evented.extend({

			// @method run(el: HTMLElement, newPos: Point, duration?: Number, easeLinearity?: Number)
			// Run an animation of a given element to a new position, optionally setting
			// duration in seconds (`0.25` by default) and easing linearity factor (3rd
			// argument of the [cubic bezier curve](http://cubic-bezier.com/#0,0,.5,1),
			// `0.5` by default).
			run: function run(el, newPos, duration, easeLinearity) {
				this.stop();

				this._el = el;
				this._inProgress = true;
				this._duration = duration || 0.25;
				this._easeOutPower = 1 / Math.max(easeLinearity || 0.5, 0.2);

				this._startPos = getPosition(el);
				this._offset = newPos.subtract(this._startPos);
				this._startTime = +new Date();

				// @event start: Event
				// Fired when the animation starts
				this.fire('start');

				this._animate();
			},

			// @method stop()
			// Stops the animation (if currently running).
			stop: function stop() {
				if (!this._inProgress) {
					return;
				}

				this._step(true);
				this._complete();
			},

			_animate: function _animate() {
				// animation loop
				this._animId = requestAnimFrame(this._animate, this);
				this._step();
			},

			_step: function _step(round) {
				var elapsed = +new Date() - this._startTime,
				    duration = this._duration * 1000;

				if (elapsed < duration) {
					this._runFrame(this._easeOut(elapsed / duration), round);
				} else {
					this._runFrame(1);
					this._complete();
				}
			},

			_runFrame: function _runFrame(progress, round) {
				var pos = this._startPos.add(this._offset.multiplyBy(progress));
				if (round) {
					pos._round();
				}
				setPosition(this._el, pos);

				// @event step: Event
				// Fired continuously during the animation.
				this.fire('step');
			},

			_complete: function _complete() {
				cancelAnimFrame(this._animId);

				this._inProgress = false;
				// @event end: Event
				// Fired when the animation ends.
				this.fire('end');
			},

			_easeOut: function _easeOut(t) {
				return 1 - Math.pow(1 - t, this._easeOutPower);
			}
		});

		/*
   * @class Map
   * @aka L.Map
   * @inherits Evented
   *
   * The central class of the API — it is used to create a map on a page and manipulate it.
   *
   * @example
   *
   * ```js
   * // initialize the map on the "map" div with a given center and zoom
   * var map = L.map('map', {
   * 	center: [51.505, -0.09],
   * 	zoom: 13
   * });
   * ```
   *
   */

		var Map = Evented.extend({

			options: {
				// @section Map State Options
				// @option crs: CRS = L.CRS.EPSG3857
				// The [Coordinate Reference System](#crs) to use. Don't change this if you're not
				// sure what it means.
				crs: EPSG3857,

				// @option center: LatLng = undefined
				// Initial geographic center of the map
				center: undefined,

				// @option zoom: Number = undefined
				// Initial map zoom level
				zoom: undefined,

				// @option minZoom: Number = *
				// Minimum zoom level of the map.
				// If not specified and at least one `GridLayer` or `TileLayer` is in the map,
				// the lowest of their `minZoom` options will be used instead.
				minZoom: undefined,

				// @option maxZoom: Number = *
				// Maximum zoom level of the map.
				// If not specified and at least one `GridLayer` or `TileLayer` is in the map,
				// the highest of their `maxZoom` options will be used instead.
				maxZoom: undefined,

				// @option layers: Layer[] = []
				// Array of layers that will be added to the map initially
				layers: [],

				// @option maxBounds: LatLngBounds = null
				// When this option is set, the map restricts the view to the given
				// geographical bounds, bouncing the user back if the user tries to pan
				// outside the view. To set the restriction dynamically, use
				// [`setMaxBounds`](#map-setmaxbounds) method.
				maxBounds: undefined,

				// @option renderer: Renderer = *
				// The default method for drawing vector layers on the map. `L.SVG`
				// or `L.Canvas` by default depending on browser support.
				renderer: undefined,

				// @section Animation Options
				// @option zoomAnimation: Boolean = true
				// Whether the map zoom animation is enabled. By default it's enabled
				// in all browsers that support CSS3 Transitions except Android.
				zoomAnimation: true,

				// @option zoomAnimationThreshold: Number = 4
				// Won't animate zoom if the zoom difference exceeds this value.
				zoomAnimationThreshold: 4,

				// @option fadeAnimation: Boolean = true
				// Whether the tile fade animation is enabled. By default it's enabled
				// in all browsers that support CSS3 Transitions except Android.
				fadeAnimation: true,

				// @option markerZoomAnimation: Boolean = true
				// Whether markers animate their zoom with the zoom animation, if disabled
				// they will disappear for the length of the animation. By default it's
				// enabled in all browsers that support CSS3 Transitions except Android.
				markerZoomAnimation: true,

				// @option transform3DLimit: Number = 2^23
				// Defines the maximum size of a CSS translation transform. The default
				// value should not be changed unless a web browser positions layers in
				// the wrong place after doing a large `panBy`.
				transform3DLimit: 8388608, // Precision limit of a 32-bit float

				// @section Interaction Options
				// @option zoomSnap: Number = 1
				// Forces the map's zoom level to always be a multiple of this, particularly
				// right after a [`fitBounds()`](#map-fitbounds) or a pinch-zoom.
				// By default, the zoom level snaps to the nearest integer; lower values
				// (e.g. `0.5` or `0.1`) allow for greater granularity. A value of `0`
				// means the zoom level will not be snapped after `fitBounds` or a pinch-zoom.
				zoomSnap: 1,

				// @option zoomDelta: Number = 1
				// Controls how much the map's zoom level will change after a
				// [`zoomIn()`](#map-zoomin), [`zoomOut()`](#map-zoomout), pressing `+`
				// or `-` on the keyboard, or using the [zoom controls](#control-zoom).
				// Values smaller than `1` (e.g. `0.5`) allow for greater granularity.
				zoomDelta: 1,

				// @option trackResize: Boolean = true
				// Whether the map automatically handles browser window resize to update itself.
				trackResize: true
			},

			initialize: function initialize(id, options) {
				// (HTMLElement or String, Object)
				options = setOptions(this, options);

				this._initContainer(id);
				this._initLayout();

				// hack for https://github.com/Leaflet/Leaflet/issues/1980
				this._onResize = bind(this._onResize, this);

				this._initEvents();

				if (options.maxBounds) {
					this.setMaxBounds(options.maxBounds);
				}

				if (options.zoom !== undefined) {
					this._zoom = this._limitZoom(options.zoom);
				}

				if (options.center && options.zoom !== undefined) {
					this.setView(toLatLng(options.center), options.zoom, { reset: true });
				}

				this._handlers = [];
				this._layers = {};
				this._zoomBoundLayers = {};
				this._sizeChanged = true;

				this.callInitHooks();

				// don't animate on browsers without hardware-accelerated transitions or old Android/Opera
				this._zoomAnimated = TRANSITION && any3d && !mobileOpera && this.options.zoomAnimation;

				// zoom transitions run with the same duration for all layers, so if one of transitionend events
				// happens after starting zoom animation (propagating to the map pane), we know that it ended globally
				if (this._zoomAnimated) {
					this._createAnimProxy();
					on(this._proxy, TRANSITION_END, this._catchTransitionEnd, this);
				}

				this._addLayers(this.options.layers);
			},

			// @section Methods for modifying map state

			// @method setView(center: LatLng, zoom: Number, options?: Zoom/pan options): this
			// Sets the view of the map (geographical center and zoom) with the given
			// animation options.
			setView: function setView(center, zoom, options) {

				zoom = zoom === undefined ? this._zoom : this._limitZoom(zoom);
				center = this._limitCenter(toLatLng(center), zoom, this.options.maxBounds);
				options = options || {};

				this._stop();

				if (this._loaded && !options.reset && options !== true) {

					if (options.animate !== undefined) {
						options.zoom = extend({ animate: options.animate }, options.zoom);
						options.pan = extend({ animate: options.animate, duration: options.duration }, options.pan);
					}

					// try animating pan or zoom
					var moved = this._zoom !== zoom ? this._tryAnimatedZoom && this._tryAnimatedZoom(center, zoom, options.zoom) : this._tryAnimatedPan(center, options.pan);

					if (moved) {
						// prevent resize handler call, the view will refresh after animation anyway
						clearTimeout(this._sizeTimer);
						return this;
					}
				}

				// animation didn't start, just reset the map view
				this._resetView(center, zoom);

				return this;
			},

			// @method setZoom(zoom: Number, options?: Zoom/pan options): this
			// Sets the zoom of the map.
			setZoom: function setZoom(zoom, options) {
				if (!this._loaded) {
					this._zoom = zoom;
					return this;
				}
				return this.setView(this.getCenter(), zoom, { zoom: options });
			},

			// @method zoomIn(delta?: Number, options?: Zoom options): this
			// Increases the zoom of the map by `delta` ([`zoomDelta`](#map-zoomdelta) by default).
			zoomIn: function zoomIn(delta, options) {
				delta = delta || (any3d ? this.options.zoomDelta : 1);
				return this.setZoom(this._zoom + delta, options);
			},

			// @method zoomOut(delta?: Number, options?: Zoom options): this
			// Decreases the zoom of the map by `delta` ([`zoomDelta`](#map-zoomdelta) by default).
			zoomOut: function zoomOut(delta, options) {
				delta = delta || (any3d ? this.options.zoomDelta : 1);
				return this.setZoom(this._zoom - delta, options);
			},

			// @method setZoomAround(latlng: LatLng, zoom: Number, options: Zoom options): this
			// Zooms the map while keeping a specified geographical point on the map
			// stationary (e.g. used internally for scroll zoom and double-click zoom).
			// @alternative
			// @method setZoomAround(offset: Point, zoom: Number, options: Zoom options): this
			// Zooms the map while keeping a specified pixel on the map (relative to the top-left corner) stationary.
			setZoomAround: function setZoomAround(latlng, zoom, options) {
				var scale = this.getZoomScale(zoom),
				    viewHalf = this.getSize().divideBy(2),
				    containerPoint = latlng instanceof Point ? latlng : this.latLngToContainerPoint(latlng),
				    centerOffset = containerPoint.subtract(viewHalf).multiplyBy(1 - 1 / scale),
				    newCenter = this.containerPointToLatLng(viewHalf.add(centerOffset));

				return this.setView(newCenter, zoom, { zoom: options });
			},

			_getBoundsCenterZoom: function _getBoundsCenterZoom(bounds, options) {

				options = options || {};
				bounds = bounds.getBounds ? bounds.getBounds() : toLatLngBounds(bounds);

				var paddingTL = toPoint(options.paddingTopLeft || options.padding || [0, 0]),
				    paddingBR = toPoint(options.paddingBottomRight || options.padding || [0, 0]),
				    zoom = this.getBoundsZoom(bounds, false, paddingTL.add(paddingBR));

				zoom = typeof options.maxZoom === 'number' ? Math.min(options.maxZoom, zoom) : zoom;

				if (zoom === Infinity) {
					return {
						center: bounds.getCenter(),
						zoom: zoom
					};
				}

				var paddingOffset = paddingBR.subtract(paddingTL).divideBy(2),
				    swPoint = this.project(bounds.getSouthWest(), zoom),
				    nePoint = this.project(bounds.getNorthEast(), zoom),
				    center = this.unproject(swPoint.add(nePoint).divideBy(2).add(paddingOffset), zoom);

				return {
					center: center,
					zoom: zoom
				};
			},

			// @method fitBounds(bounds: LatLngBounds, options?: fitBounds options): this
			// Sets a map view that contains the given geographical bounds with the
			// maximum zoom level possible.
			fitBounds: function fitBounds(bounds, options) {

				bounds = toLatLngBounds(bounds);

				if (!bounds.isValid()) {
					throw new Error('Bounds are not valid.');
				}

				var target = this._getBoundsCenterZoom(bounds, options);
				return this.setView(target.center, target.zoom, options);
			},

			// @method fitWorld(options?: fitBounds options): this
			// Sets a map view that mostly contains the whole world with the maximum
			// zoom level possible.
			fitWorld: function fitWorld(options) {
				return this.fitBounds([[-90, -180], [90, 180]], options);
			},

			// @method panTo(latlng: LatLng, options?: Pan options): this
			// Pans the map to a given center.
			panTo: function panTo(center, options) {
				// (LatLng)
				return this.setView(center, this._zoom, { pan: options });
			},

			// @method panBy(offset: Point, options?: Pan options): this
			// Pans the map by a given number of pixels (animated).
			panBy: function panBy(offset, options) {
				offset = toPoint(offset).round();
				options = options || {};

				if (!offset.x && !offset.y) {
					return this.fire('moveend');
				}
				// If we pan too far, Chrome gets issues with tiles
				// and makes them disappear or appear in the wrong place (slightly offset) #2602
				if (options.animate !== true && !this.getSize().contains(offset)) {
					this._resetView(this.unproject(this.project(this.getCenter()).add(offset)), this.getZoom());
					return this;
				}

				if (!this._panAnim) {
					this._panAnim = new PosAnimation();

					this._panAnim.on({
						'step': this._onPanTransitionStep,
						'end': this._onPanTransitionEnd
					}, this);
				}

				// don't fire movestart if animating inertia
				if (!options.noMoveStart) {
					this.fire('movestart');
				}

				// animate pan unless animate: false specified
				if (options.animate !== false) {
					addClass(this._mapPane, 'leaflet-pan-anim');

					var newPos = this._getMapPanePos().subtract(offset).round();
					this._panAnim.run(this._mapPane, newPos, options.duration || 0.25, options.easeLinearity);
				} else {
					this._rawPanBy(offset);
					this.fire('move').fire('moveend');
				}

				return this;
			},

			// @method flyTo(latlng: LatLng, zoom?: Number, options?: Zoom/pan options): this
			// Sets the view of the map (geographical center and zoom) performing a smooth
			// pan-zoom animation.
			flyTo: function flyTo(targetCenter, targetZoom, options) {

				options = options || {};
				if (options.animate === false || !any3d) {
					return this.setView(targetCenter, targetZoom, options);
				}

				this._stop();

				var from = this.project(this.getCenter()),
				    to = this.project(targetCenter),
				    size = this.getSize(),
				    startZoom = this._zoom;

				targetCenter = toLatLng(targetCenter);
				targetZoom = targetZoom === undefined ? startZoom : targetZoom;

				var w0 = Math.max(size.x, size.y),
				    w1 = w0 * this.getZoomScale(startZoom, targetZoom),
				    u1 = to.distanceTo(from) || 1,
				    rho = 1.42,
				    rho2 = rho * rho;

				function r(i) {
					var s1 = i ? -1 : 1,
					    s2 = i ? w1 : w0,
					    t1 = w1 * w1 - w0 * w0 + s1 * rho2 * rho2 * u1 * u1,
					    b1 = 2 * s2 * rho2 * u1,
					    b = t1 / b1,
					    sq = Math.sqrt(b * b + 1) - b;

					// workaround for floating point precision bug when sq = 0, log = -Infinite,
					// thus triggering an infinite loop in flyTo
					var log = sq < 0.000000001 ? -18 : Math.log(sq);

					return log;
				}

				function sinh(n) {
					return (Math.exp(n) - Math.exp(-n)) / 2;
				}
				function cosh(n) {
					return (Math.exp(n) + Math.exp(-n)) / 2;
				}
				function tanh(n) {
					return sinh(n) / cosh(n);
				}

				var r0 = r(0);

				function w(s) {
					return w0 * (cosh(r0) / cosh(r0 + rho * s));
				}
				function u(s) {
					return w0 * (cosh(r0) * tanh(r0 + rho * s) - sinh(r0)) / rho2;
				}

				function easeOut(t) {
					return 1 - Math.pow(1 - t, 1.5);
				}

				var start = Date.now(),
				    S = (r(1) - r0) / rho,
				    duration = options.duration ? 1000 * options.duration : 1000 * S * 0.8;

				function frame() {
					var t = (Date.now() - start) / duration,
					    s = easeOut(t) * S;

					if (t <= 1) {
						this._flyToFrame = requestAnimFrame(frame, this);

						this._move(this.unproject(from.add(to.subtract(from).multiplyBy(u(s) / u1)), startZoom), this.getScaleZoom(w0 / w(s), startZoom), { flyTo: true });
					} else {
						this._move(targetCenter, targetZoom)._moveEnd(true);
					}
				}

				this._moveStart(true);

				frame.call(this);
				return this;
			},

			// @method flyToBounds(bounds: LatLngBounds, options?: fitBounds options): this
			// Sets the view of the map with a smooth animation like [`flyTo`](#map-flyto),
			// but takes a bounds parameter like [`fitBounds`](#map-fitbounds).
			flyToBounds: function flyToBounds(bounds, options) {
				var target = this._getBoundsCenterZoom(bounds, options);
				return this.flyTo(target.center, target.zoom, options);
			},

			// @method setMaxBounds(bounds: Bounds): this
			// Restricts the map view to the given bounds (see the [maxBounds](#map-maxbounds) option).
			setMaxBounds: function setMaxBounds(bounds) {
				bounds = toLatLngBounds(bounds);

				if (!bounds.isValid()) {
					this.options.maxBounds = null;
					return this.off('moveend', this._panInsideMaxBounds);
				} else if (this.options.maxBounds) {
					this.off('moveend', this._panInsideMaxBounds);
				}

				this.options.maxBounds = bounds;

				if (this._loaded) {
					this._panInsideMaxBounds();
				}

				return this.on('moveend', this._panInsideMaxBounds);
			},

			// @method setMinZoom(zoom: Number): this
			// Sets the lower limit for the available zoom levels (see the [minZoom](#map-minzoom) option).
			setMinZoom: function setMinZoom(zoom) {
				this.options.minZoom = zoom;

				if (this._loaded && this.getZoom() < this.options.minZoom) {
					return this.setZoom(zoom);
				}

				return this;
			},

			// @method setMaxZoom(zoom: Number): this
			// Sets the upper limit for the available zoom levels (see the [maxZoom](#map-maxzoom) option).
			setMaxZoom: function setMaxZoom(zoom) {
				this.options.maxZoom = zoom;

				if (this._loaded && this.getZoom() > this.options.maxZoom) {
					return this.setZoom(zoom);
				}

				return this;
			},

			// @method panInsideBounds(bounds: LatLngBounds, options?: Pan options): this
			// Pans the map to the closest view that would lie inside the given bounds (if it's not already), controlling the animation using the options specific, if any.
			panInsideBounds: function panInsideBounds(bounds, options) {
				this._enforcingBounds = true;
				var center = this.getCenter(),
				    newCenter = this._limitCenter(center, this._zoom, toLatLngBounds(bounds));

				if (!center.equals(newCenter)) {
					this.panTo(newCenter, options);
				}

				this._enforcingBounds = false;
				return this;
			},

			// @method invalidateSize(options: Zoom/Pan options): this
			// Checks if the map container size changed and updates the map if so —
			// call it after you've changed the map size dynamically, also animating
			// pan by default. If `options.pan` is `false`, panning will not occur.
			// If `options.debounceMoveend` is `true`, it will delay `moveend` event so
			// that it doesn't happen often even if the method is called many
			// times in a row.

			// @alternative
			// @method invalidateSize(animate: Boolean): this
			// Checks if the map container size changed and updates the map if so —
			// call it after you've changed the map size dynamically, also animating
			// pan by default.
			invalidateSize: function invalidateSize(options) {
				if (!this._loaded) {
					return this;
				}

				options = extend({
					animate: false,
					pan: true
				}, options === true ? { animate: true } : options);

				var oldSize = this.getSize();
				this._sizeChanged = true;
				this._lastCenter = null;

				var newSize = this.getSize(),
				    oldCenter = oldSize.divideBy(2).round(),
				    newCenter = newSize.divideBy(2).round(),
				    offset = oldCenter.subtract(newCenter);

				if (!offset.x && !offset.y) {
					return this;
				}

				if (options.animate && options.pan) {
					this.panBy(offset);
				} else {
					if (options.pan) {
						this._rawPanBy(offset);
					}

					this.fire('move');

					if (options.debounceMoveend) {
						clearTimeout(this._sizeTimer);
						this._sizeTimer = setTimeout(bind(this.fire, this, 'moveend'), 200);
					} else {
						this.fire('moveend');
					}
				}

				// @section Map state change events
				// @event resize: ResizeEvent
				// Fired when the map is resized.
				return this.fire('resize', {
					oldSize: oldSize,
					newSize: newSize
				});
			},

			// @section Methods for modifying map state
			// @method stop(): this
			// Stops the currently running `panTo` or `flyTo` animation, if any.
			stop: function stop() {
				this.setZoom(this._limitZoom(this._zoom));
				if (!this.options.zoomSnap) {
					this.fire('viewreset');
				}
				return this._stop();
			},

			// @section Geolocation methods
			// @method locate(options?: Locate options): this
			// Tries to locate the user using the Geolocation API, firing a [`locationfound`](#map-locationfound)
			// event with location data on success or a [`locationerror`](#map-locationerror) event on failure,
			// and optionally sets the map view to the user's location with respect to
			// detection accuracy (or to the world view if geolocation failed).
			// Note that, if your page doesn't use HTTPS, this method will fail in
			// modern browsers ([Chrome 50 and newer](https://sites.google.com/a/chromium.org/dev/Home/chromium-security/deprecating-powerful-features-on-insecure-origins))
			// See `Locate options` for more details.
			locate: function locate(options) {

				options = this._locateOptions = extend({
					timeout: 10000,
					watch: false
					// setView: false
					// maxZoom: <Number>
					// maximumAge: 0
					// enableHighAccuracy: false
				}, options);

				if (!('geolocation' in navigator)) {
					this._handleGeolocationError({
						code: 0,
						message: 'Geolocation not supported.'
					});
					return this;
				}

				var onResponse = bind(this._handleGeolocationResponse, this),
				    onError = bind(this._handleGeolocationError, this);

				if (options.watch) {
					this._locationWatchId = navigator.geolocation.watchPosition(onResponse, onError, options);
				} else {
					navigator.geolocation.getCurrentPosition(onResponse, onError, options);
				}
				return this;
			},

			// @method stopLocate(): this
			// Stops watching location previously initiated by `map.locate({watch: true})`
			// and aborts resetting the map view if map.locate was called with
			// `{setView: true}`.
			stopLocate: function stopLocate() {
				if (navigator.geolocation && navigator.geolocation.clearWatch) {
					navigator.geolocation.clearWatch(this._locationWatchId);
				}
				if (this._locateOptions) {
					this._locateOptions.setView = false;
				}
				return this;
			},

			_handleGeolocationError: function _handleGeolocationError(error) {
				var c = error.code,
				    message = error.message || (c === 1 ? 'permission denied' : c === 2 ? 'position unavailable' : 'timeout');

				if (this._locateOptions.setView && !this._loaded) {
					this.fitWorld();
				}

				// @section Location events
				// @event locationerror: ErrorEvent
				// Fired when geolocation (using the [`locate`](#map-locate) method) failed.
				this.fire('locationerror', {
					code: c,
					message: 'Geolocation error: ' + message + '.'
				});
			},

			_handleGeolocationResponse: function _handleGeolocationResponse(pos) {
				var lat = pos.coords.latitude,
				    lng = pos.coords.longitude,
				    latlng = new LatLng(lat, lng),
				    bounds = latlng.toBounds(pos.coords.accuracy),
				    options = this._locateOptions;

				if (options.setView) {
					var zoom = this.getBoundsZoom(bounds);
					this.setView(latlng, options.maxZoom ? Math.min(zoom, options.maxZoom) : zoom);
				}

				var data = {
					latlng: latlng,
					bounds: bounds,
					timestamp: pos.timestamp
				};

				for (var i in pos.coords) {
					if (typeof pos.coords[i] === 'number') {
						data[i] = pos.coords[i];
					}
				}

				// @event locationfound: LocationEvent
				// Fired when geolocation (using the [`locate`](#map-locate) method)
				// went successfully.
				this.fire('locationfound', data);
			},

			// TODO handler.addTo
			// TODO Appropiate docs section?
			// @section Other Methods
			// @method addHandler(name: String, HandlerClass: Function): this
			// Adds a new `Handler` to the map, given its name and constructor function.
			addHandler: function addHandler(name, HandlerClass) {
				if (!HandlerClass) {
					return this;
				}

				var handler = this[name] = new HandlerClass(this);

				this._handlers.push(handler);

				if (this.options[name]) {
					handler.enable();
				}

				return this;
			},

			// @method remove(): this
			// Destroys the map and clears all related event listeners.
			remove: function remove() {

				this._initEvents(true);

				if (this._containerId !== this._container._leaflet_id) {
					throw new Error('Map container is being reused by another instance');
				}

				try {
					// throws error in IE6-8
					delete this._container._leaflet_id;
					delete this._containerId;
				} catch (e) {
					/*eslint-disable */
					this._container._leaflet_id = undefined;
					/*eslint-enable */
					this._containerId = undefined;
				}

				_remove(this._mapPane);

				if (this._clearControlPos) {
					this._clearControlPos();
				}

				this._clearHandlers();

				if (this._loaded) {
					// @section Map state change events
					// @event unload: Event
					// Fired when the map is destroyed with [remove](#map-remove) method.
					this.fire('unload');
				}

				var i;
				for (i in this._layers) {
					this._layers[i].remove();
				}
				for (i in this._panes) {
					_remove(this._panes[i]);
				}

				this._layers = [];
				this._panes = [];
				delete this._mapPane;
				delete this._renderer;

				return this;
			},

			// @section Other Methods
			// @method createPane(name: String, container?: HTMLElement): HTMLElement
			// Creates a new [map pane](#map-pane) with the given name if it doesn't exist already,
			// then returns it. The pane is created as a child of `container`, or
			// as a child of the main map pane if not set.
			createPane: function createPane(name, container) {
				var className = 'leaflet-pane' + (name ? ' leaflet-' + name.replace('Pane', '') + '-pane' : ''),
				    pane = create$1('div', className, container || this._mapPane);

				if (name) {
					this._panes[name] = pane;
				}
				return pane;
			},

			// @section Methods for Getting Map State

			// @method getCenter(): LatLng
			// Returns the geographical center of the map view
			getCenter: function getCenter() {
				this._checkIfLoaded();

				if (this._lastCenter && !this._moved()) {
					return this._lastCenter;
				}
				return this.layerPointToLatLng(this._getCenterLayerPoint());
			},

			// @method getZoom(): Number
			// Returns the current zoom level of the map view
			getZoom: function getZoom() {
				return this._zoom;
			},

			// @method getBounds(): LatLngBounds
			// Returns the geographical bounds visible in the current map view
			getBounds: function getBounds() {
				var bounds = this.getPixelBounds(),
				    sw = this.unproject(bounds.getBottomLeft()),
				    ne = this.unproject(bounds.getTopRight());

				return new LatLngBounds(sw, ne);
			},

			// @method getMinZoom(): Number
			// Returns the minimum zoom level of the map (if set in the `minZoom` option of the map or of any layers), or `0` by default.
			getMinZoom: function getMinZoom() {
				return this.options.minZoom === undefined ? this._layersMinZoom || 0 : this.options.minZoom;
			},

			// @method getMaxZoom(): Number
			// Returns the maximum zoom level of the map (if set in the `maxZoom` option of the map or of any layers).
			getMaxZoom: function getMaxZoom() {
				return this.options.maxZoom === undefined ? this._layersMaxZoom === undefined ? Infinity : this._layersMaxZoom : this.options.maxZoom;
			},

			// @method getBoundsZoom(bounds: LatLngBounds, inside?: Boolean): Number
			// Returns the maximum zoom level on which the given bounds fit to the map
			// view in its entirety. If `inside` (optional) is set to `true`, the method
			// instead returns the minimum zoom level on which the map view fits into
			// the given bounds in its entirety.
			getBoundsZoom: function getBoundsZoom(bounds, inside, padding) {
				// (LatLngBounds[, Boolean, Point]) -> Number
				bounds = toLatLngBounds(bounds);
				padding = toPoint(padding || [0, 0]);

				var zoom = this.getZoom() || 0,
				    min = this.getMinZoom(),
				    max = this.getMaxZoom(),
				    nw = bounds.getNorthWest(),
				    se = bounds.getSouthEast(),
				    size = this.getSize().subtract(padding),
				    boundsSize = toBounds(this.project(se, zoom), this.project(nw, zoom)).getSize(),
				    snap = any3d ? this.options.zoomSnap : 1,
				    scalex = size.x / boundsSize.x,
				    scaley = size.y / boundsSize.y,
				    scale = inside ? Math.max(scalex, scaley) : Math.min(scalex, scaley);

				zoom = this.getScaleZoom(scale, zoom);

				if (snap) {
					zoom = Math.round(zoom / (snap / 100)) * (snap / 100); // don't jump if within 1% of a snap level
					zoom = inside ? Math.ceil(zoom / snap) * snap : Math.floor(zoom / snap) * snap;
				}

				return Math.max(min, Math.min(max, zoom));
			},

			// @method getSize(): Point
			// Returns the current size of the map container (in pixels).
			getSize: function getSize() {
				if (!this._size || this._sizeChanged) {
					this._size = new Point(this._container.clientWidth || 0, this._container.clientHeight || 0);

					this._sizeChanged = false;
				}
				return this._size.clone();
			},

			// @method getPixelBounds(): Bounds
			// Returns the bounds of the current map view in projected pixel
			// coordinates (sometimes useful in layer and overlay implementations).
			getPixelBounds: function getPixelBounds(center, zoom) {
				var topLeftPoint = this._getTopLeftPoint(center, zoom);
				return new Bounds(topLeftPoint, topLeftPoint.add(this.getSize()));
			},

			// TODO: Check semantics - isn't the pixel origin the 0,0 coord relative to
			// the map pane? "left point of the map layer" can be confusing, specially
			// since there can be negative offsets.
			// @method getPixelOrigin(): Point
			// Returns the projected pixel coordinates of the top left point of
			// the map layer (useful in custom layer and overlay implementations).
			getPixelOrigin: function getPixelOrigin() {
				this._checkIfLoaded();
				return this._pixelOrigin;
			},

			// @method getPixelWorldBounds(zoom?: Number): Bounds
			// Returns the world's bounds in pixel coordinates for zoom level `zoom`.
			// If `zoom` is omitted, the map's current zoom level is used.
			getPixelWorldBounds: function getPixelWorldBounds(zoom) {
				return this.options.crs.getProjectedBounds(zoom === undefined ? this.getZoom() : zoom);
			},

			// @section Other Methods

			// @method getPane(pane: String|HTMLElement): HTMLElement
			// Returns a [map pane](#map-pane), given its name or its HTML element (its identity).
			getPane: function getPane(pane) {
				return typeof pane === 'string' ? this._panes[pane] : pane;
			},

			// @method getPanes(): Object
			// Returns a plain object containing the names of all [panes](#map-pane) as keys and
			// the panes as values.
			getPanes: function getPanes() {
				return this._panes;
			},

			// @method getContainer: HTMLElement
			// Returns the HTML element that contains the map.
			getContainer: function getContainer() {
				return this._container;
			},

			// @section Conversion Methods

			// @method getZoomScale(toZoom: Number, fromZoom: Number): Number
			// Returns the scale factor to be applied to a map transition from zoom level
			// `fromZoom` to `toZoom`. Used internally to help with zoom animations.
			getZoomScale: function getZoomScale(toZoom, fromZoom) {
				// TODO replace with universal implementation after refactoring projections
				var crs = this.options.crs;
				fromZoom = fromZoom === undefined ? this._zoom : fromZoom;
				return crs.scale(toZoom) / crs.scale(fromZoom);
			},

			// @method getScaleZoom(scale: Number, fromZoom: Number): Number
			// Returns the zoom level that the map would end up at, if it is at `fromZoom`
			// level and everything is scaled by a factor of `scale`. Inverse of
			// [`getZoomScale`](#map-getZoomScale).
			getScaleZoom: function getScaleZoom(scale, fromZoom) {
				var crs = this.options.crs;
				fromZoom = fromZoom === undefined ? this._zoom : fromZoom;
				var zoom = crs.zoom(scale * crs.scale(fromZoom));
				return isNaN(zoom) ? Infinity : zoom;
			},

			// @method project(latlng: LatLng, zoom: Number): Point
			// Projects a geographical coordinate `LatLng` according to the projection
			// of the map's CRS, then scales it according to `zoom` and the CRS's
			// `Transformation`. The result is pixel coordinate relative to
			// the CRS origin.
			project: function project(latlng, zoom) {
				zoom = zoom === undefined ? this._zoom : zoom;
				return this.options.crs.latLngToPoint(toLatLng(latlng), zoom);
			},

			// @method unproject(point: Point, zoom: Number): LatLng
			// Inverse of [`project`](#map-project).
			unproject: function unproject(point, zoom) {
				zoom = zoom === undefined ? this._zoom : zoom;
				return this.options.crs.pointToLatLng(toPoint(point), zoom);
			},

			// @method layerPointToLatLng(point: Point): LatLng
			// Given a pixel coordinate relative to the [origin pixel](#map-getpixelorigin),
			// returns the corresponding geographical coordinate (for the current zoom level).
			layerPointToLatLng: function layerPointToLatLng(point) {
				var projectedPoint = toPoint(point).add(this.getPixelOrigin());
				return this.unproject(projectedPoint);
			},

			// @method latLngToLayerPoint(latlng: LatLng): Point
			// Given a geographical coordinate, returns the corresponding pixel coordinate
			// relative to the [origin pixel](#map-getpixelorigin).
			latLngToLayerPoint: function latLngToLayerPoint(latlng) {
				var projectedPoint = this.project(toLatLng(latlng))._round();
				return projectedPoint._subtract(this.getPixelOrigin());
			},

			// @method wrapLatLng(latlng: LatLng): LatLng
			// Returns a `LatLng` where `lat` and `lng` has been wrapped according to the
			// map's CRS's `wrapLat` and `wrapLng` properties, if they are outside the
			// CRS's bounds.
			// By default this means longitude is wrapped around the dateline so its
			// value is between -180 and +180 degrees.
			wrapLatLng: function wrapLatLng(latlng) {
				return this.options.crs.wrapLatLng(toLatLng(latlng));
			},

			// @method wrapLatLngBounds(bounds: LatLngBounds): LatLngBounds
			// Returns a `LatLngBounds` with the same size as the given one, ensuring that
			// its center is within the CRS's bounds.
			// By default this means the center longitude is wrapped around the dateline so its
			// value is between -180 and +180 degrees, and the majority of the bounds
			// overlaps the CRS's bounds.
			wrapLatLngBounds: function wrapLatLngBounds(latlng) {
				return this.options.crs.wrapLatLngBounds(toLatLngBounds(latlng));
			},

			// @method distance(latlng1: LatLng, latlng2: LatLng): Number
			// Returns the distance between two geographical coordinates according to
			// the map's CRS. By default this measures distance in meters.
			distance: function distance(latlng1, latlng2) {
				return this.options.crs.distance(toLatLng(latlng1), toLatLng(latlng2));
			},

			// @method containerPointToLayerPoint(point: Point): Point
			// Given a pixel coordinate relative to the map container, returns the corresponding
			// pixel coordinate relative to the [origin pixel](#map-getpixelorigin).
			containerPointToLayerPoint: function containerPointToLayerPoint(point) {
				// (Point)
				return toPoint(point).subtract(this._getMapPanePos());
			},

			// @method layerPointToContainerPoint(point: Point): Point
			// Given a pixel coordinate relative to the [origin pixel](#map-getpixelorigin),
			// returns the corresponding pixel coordinate relative to the map container.
			layerPointToContainerPoint: function layerPointToContainerPoint(point) {
				// (Point)
				return toPoint(point).add(this._getMapPanePos());
			},

			// @method containerPointToLatLng(point: Point): LatLng
			// Given a pixel coordinate relative to the map container, returns
			// the corresponding geographical coordinate (for the current zoom level).
			containerPointToLatLng: function containerPointToLatLng(point) {
				var layerPoint = this.containerPointToLayerPoint(toPoint(point));
				return this.layerPointToLatLng(layerPoint);
			},

			// @method latLngToContainerPoint(latlng: LatLng): Point
			// Given a geographical coordinate, returns the corresponding pixel coordinate
			// relative to the map container.
			latLngToContainerPoint: function latLngToContainerPoint(latlng) {
				return this.layerPointToContainerPoint(this.latLngToLayerPoint(toLatLng(latlng)));
			},

			// @method mouseEventToContainerPoint(ev: MouseEvent): Point
			// Given a MouseEvent object, returns the pixel coordinate relative to the
			// map container where the event took place.
			mouseEventToContainerPoint: function mouseEventToContainerPoint(e) {
				return getMousePosition(e, this._container);
			},

			// @method mouseEventToLayerPoint(ev: MouseEvent): Point
			// Given a MouseEvent object, returns the pixel coordinate relative to
			// the [origin pixel](#map-getpixelorigin) where the event took place.
			mouseEventToLayerPoint: function mouseEventToLayerPoint(e) {
				return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e));
			},

			// @method mouseEventToLatLng(ev: MouseEvent): LatLng
			// Given a MouseEvent object, returns geographical coordinate where the
			// event took place.
			mouseEventToLatLng: function mouseEventToLatLng(e) {
				// (MouseEvent)
				return this.layerPointToLatLng(this.mouseEventToLayerPoint(e));
			},

			// map initialization methods

			_initContainer: function _initContainer(id) {
				var container = this._container = get(id);

				if (!container) {
					throw new Error('Map container not found.');
				} else if (container._leaflet_id) {
					throw new Error('Map container is already initialized.');
				}

				on(container, 'scroll', this._onScroll, this);
				this._containerId = stamp(container);
			},

			_initLayout: function _initLayout() {
				var container = this._container;

				this._fadeAnimated = this.options.fadeAnimation && any3d;

				addClass(container, 'leaflet-container' + (touch ? ' leaflet-touch' : '') + (retina ? ' leaflet-retina' : '') + (ielt9 ? ' leaflet-oldie' : '') + (safari ? ' leaflet-safari' : '') + (this._fadeAnimated ? ' leaflet-fade-anim' : ''));

				var position = getStyle(container, 'position');

				if (position !== 'absolute' && position !== 'relative' && position !== 'fixed') {
					container.style.position = 'relative';
				}

				this._initPanes();

				if (this._initControlPos) {
					this._initControlPos();
				}
			},

			_initPanes: function _initPanes() {
				var panes = this._panes = {};
				this._paneRenderers = {};

				// @section
				//
				// Panes are DOM elements used to control the ordering of layers on the map. You
				// can access panes with [`map.getPane`](#map-getpane) or
				// [`map.getPanes`](#map-getpanes) methods. New panes can be created with the
				// [`map.createPane`](#map-createpane) method.
				//
				// Every map has the following default panes that differ only in zIndex.
				//
				// @pane mapPane: HTMLElement = 'auto'
				// Pane that contains all other map panes

				this._mapPane = this.createPane('mapPane', this._container);
				setPosition(this._mapPane, new Point(0, 0));

				// @pane tilePane: HTMLElement = 200
				// Pane for `GridLayer`s and `TileLayer`s
				this.createPane('tilePane');
				// @pane overlayPane: HTMLElement = 400
				// Pane for vector overlays (`Path`s), like `Polyline`s and `Polygon`s
				this.createPane('shadowPane');
				// @pane shadowPane: HTMLElement = 500
				// Pane for overlay shadows (e.g. `Marker` shadows)
				this.createPane('overlayPane');
				// @pane markerPane: HTMLElement = 600
				// Pane for `Icon`s of `Marker`s
				this.createPane('markerPane');
				// @pane tooltipPane: HTMLElement = 650
				// Pane for tooltip.
				this.createPane('tooltipPane');
				// @pane popupPane: HTMLElement = 700
				// Pane for `Popup`s.
				this.createPane('popupPane');

				if (!this.options.markerZoomAnimation) {
					addClass(panes.markerPane, 'leaflet-zoom-hide');
					addClass(panes.shadowPane, 'leaflet-zoom-hide');
				}
			},

			// private methods that modify map state

			// @section Map state change events
			_resetView: function _resetView(center, zoom) {
				setPosition(this._mapPane, new Point(0, 0));

				var loading = !this._loaded;
				this._loaded = true;
				zoom = this._limitZoom(zoom);

				this.fire('viewprereset');

				var zoomChanged = this._zoom !== zoom;
				this._moveStart(zoomChanged)._move(center, zoom)._moveEnd(zoomChanged);

				// @event viewreset: Event
				// Fired when the map needs to redraw its content (this usually happens
				// on map zoom or load). Very useful for creating custom overlays.
				this.fire('viewreset');

				// @event load: Event
				// Fired when the map is initialized (when its center and zoom are set
				// for the first time).
				if (loading) {
					this.fire('load');
				}
			},

			_moveStart: function _moveStart(zoomChanged) {
				// @event zoomstart: Event
				// Fired when the map zoom is about to change (e.g. before zoom animation).
				// @event movestart: Event
				// Fired when the view of the map starts changing (e.g. user starts dragging the map).
				if (zoomChanged) {
					this.fire('zoomstart');
				}
				return this.fire('movestart');
			},

			_move: function _move(center, zoom, data) {
				if (zoom === undefined) {
					zoom = this._zoom;
				}
				var zoomChanged = this._zoom !== zoom;

				this._zoom = zoom;
				this._lastCenter = center;
				this._pixelOrigin = this._getNewPixelOrigin(center);

				// @event zoom: Event
				// Fired repeatedly during any change in zoom level, including zoom
				// and fly animations.
				if (zoomChanged || data && data.pinch) {
					// Always fire 'zoom' if pinching because #3530
					this.fire('zoom', data);
				}

				// @event move: Event
				// Fired repeatedly during any movement of the map, including pan and
				// fly animations.
				return this.fire('move', data);
			},

			_moveEnd: function _moveEnd(zoomChanged) {
				// @event zoomend: Event
				// Fired when the map has changed, after any animations.
				if (zoomChanged) {
					this.fire('zoomend');
				}

				// @event moveend: Event
				// Fired when the center of the map stops changing (e.g. user stopped
				// dragging the map).
				return this.fire('moveend');
			},

			_stop: function _stop() {
				cancelAnimFrame(this._flyToFrame);
				if (this._panAnim) {
					this._panAnim.stop();
				}
				return this;
			},

			_rawPanBy: function _rawPanBy(offset) {
				setPosition(this._mapPane, this._getMapPanePos().subtract(offset));
			},

			_getZoomSpan: function _getZoomSpan() {
				return this.getMaxZoom() - this.getMinZoom();
			},

			_panInsideMaxBounds: function _panInsideMaxBounds() {
				if (!this._enforcingBounds) {
					this.panInsideBounds(this.options.maxBounds);
				}
			},

			_checkIfLoaded: function _checkIfLoaded() {
				if (!this._loaded) {
					throw new Error('Set map center and zoom first.');
				}
			},

			// DOM event handling

			// @section Interaction events
			_initEvents: function _initEvents(remove$$1) {
				this._targets = {};
				this._targets[stamp(this._container)] = this;

				var onOff = remove$$1 ? off : on;

				// @event click: MouseEvent
				// Fired when the user clicks (or taps) the map.
				// @event dblclick: MouseEvent
				// Fired when the user double-clicks (or double-taps) the map.
				// @event mousedown: MouseEvent
				// Fired when the user pushes the mouse button on the map.
				// @event mouseup: MouseEvent
				// Fired when the user releases the mouse button on the map.
				// @event mouseover: MouseEvent
				// Fired when the mouse enters the map.
				// @event mouseout: MouseEvent
				// Fired when the mouse leaves the map.
				// @event mousemove: MouseEvent
				// Fired while the mouse moves over the map.
				// @event contextmenu: MouseEvent
				// Fired when the user pushes the right mouse button on the map, prevents
				// default browser context menu from showing if there are listeners on
				// this event. Also fired on mobile when the user holds a single touch
				// for a second (also called long press).
				// @event keypress: KeyboardEvent
				// Fired when the user presses a key from the keyboard while the map is focused.
				onOff(this._container, 'click dblclick mousedown mouseup ' + 'mouseover mouseout mousemove contextmenu keypress', this._handleDOMEvent, this);

				if (this.options.trackResize) {
					onOff(window, 'resize', this._onResize, this);
				}

				if (any3d && this.options.transform3DLimit) {
					(remove$$1 ? this.off : this.on).call(this, 'moveend', this._onMoveEnd);
				}
			},

			_onResize: function _onResize() {
				cancelAnimFrame(this._resizeRequest);
				this._resizeRequest = requestAnimFrame(function () {
					this.invalidateSize({ debounceMoveend: true });
				}, this);
			},

			_onScroll: function _onScroll() {
				this._container.scrollTop = 0;
				this._container.scrollLeft = 0;
			},

			_onMoveEnd: function _onMoveEnd() {
				var pos = this._getMapPanePos();
				if (Math.max(Math.abs(pos.x), Math.abs(pos.y)) >= this.options.transform3DLimit) {
					// https://bugzilla.mozilla.org/show_bug.cgi?id=1203873 but Webkit also have
					// a pixel offset on very high values, see: http://jsfiddle.net/dg6r5hhb/
					this._resetView(this.getCenter(), this.getZoom());
				}
			},

			_findEventTargets: function _findEventTargets(e, type) {
				var targets = [],
				    target,
				    isHover = type === 'mouseout' || type === 'mouseover',
				    src = e.target || e.srcElement,
				    dragging = false;

				while (src) {
					target = this._targets[stamp(src)];
					if (target && (type === 'click' || type === 'preclick') && !e._simulated && this._draggableMoved(target)) {
						// Prevent firing click after you just dragged an object.
						dragging = true;
						break;
					}
					if (target && target.listens(type, true)) {
						if (isHover && !isExternalTarget(src, e)) {
							break;
						}
						targets.push(target);
						if (isHover) {
							break;
						}
					}
					if (src === this._container) {
						break;
					}
					src = src.parentNode;
				}
				if (!targets.length && !dragging && !isHover && isExternalTarget(src, e)) {
					targets = [this];
				}
				return targets;
			},

			_handleDOMEvent: function _handleDOMEvent(e) {
				if (!this._loaded || skipped(e)) {
					return;
				}

				var type = e.type;

				if (type === 'mousedown' || type === 'keypress') {
					// prevents outline when clicking on keyboard-focusable element
					preventOutline(e.target || e.srcElement);
				}

				this._fireDOMEvent(e, type);
			},

			_mouseEvents: ['click', 'dblclick', 'mouseover', 'mouseout', 'contextmenu'],

			_fireDOMEvent: function _fireDOMEvent(e, type, targets) {

				if (e.type === 'click') {
					// Fire a synthetic 'preclick' event which propagates up (mainly for closing popups).
					// @event preclick: MouseEvent
					// Fired before mouse click on the map (sometimes useful when you
					// want something to happen on click before any existing click
					// handlers start running).
					var synth = extend({}, e);
					synth.type = 'preclick';
					this._fireDOMEvent(synth, synth.type, targets);
				}

				if (e._stopped) {
					return;
				}

				// Find the layer the event is propagating from and its parents.
				targets = (targets || []).concat(this._findEventTargets(e, type));

				if (!targets.length) {
					return;
				}

				var target = targets[0];
				if (type === 'contextmenu' && target.listens(type, true)) {
					preventDefault(e);
				}

				var data = {
					originalEvent: e
				};

				if (e.type !== 'keypress') {
					var isMarker = target.options && 'icon' in target.options;
					data.containerPoint = isMarker ? this.latLngToContainerPoint(target.getLatLng()) : this.mouseEventToContainerPoint(e);
					data.layerPoint = this.containerPointToLayerPoint(data.containerPoint);
					data.latlng = isMarker ? target.getLatLng() : this.layerPointToLatLng(data.layerPoint);
				}

				for (var i = 0; i < targets.length; i++) {
					targets[i].fire(type, data, true);
					if (data.originalEvent._stopped || targets[i].options.bubblingMouseEvents === false && indexOf(this._mouseEvents, type) !== -1) {
						return;
					}
				}
			},

			_draggableMoved: function _draggableMoved(obj) {
				obj = obj.dragging && obj.dragging.enabled() ? obj : this;
				return obj.dragging && obj.dragging.moved() || this.boxZoom && this.boxZoom.moved();
			},

			_clearHandlers: function _clearHandlers() {
				for (var i = 0, len = this._handlers.length; i < len; i++) {
					this._handlers[i].disable();
				}
			},

			// @section Other Methods

			// @method whenReady(fn: Function, context?: Object): this
			// Runs the given function `fn` when the map gets initialized with
			// a view (center and zoom) and at least one layer, or immediately
			// if it's already initialized, optionally passing a function context.
			whenReady: function whenReady(callback, context) {
				if (this._loaded) {
					callback.call(context || this, { target: this });
				} else {
					this.on('load', callback, context);
				}
				return this;
			},

			// private methods for getting map state

			_getMapPanePos: function _getMapPanePos() {
				return getPosition(this._mapPane) || new Point(0, 0);
			},

			_moved: function _moved() {
				var pos = this._getMapPanePos();
				return pos && !pos.equals([0, 0]);
			},

			_getTopLeftPoint: function _getTopLeftPoint(center, zoom) {
				var pixelOrigin = center && zoom !== undefined ? this._getNewPixelOrigin(center, zoom) : this.getPixelOrigin();
				return pixelOrigin.subtract(this._getMapPanePos());
			},

			_getNewPixelOrigin: function _getNewPixelOrigin(center, zoom) {
				var viewHalf = this.getSize()._divideBy(2);
				return this.project(center, zoom)._subtract(viewHalf)._add(this._getMapPanePos())._round();
			},

			_latLngToNewLayerPoint: function _latLngToNewLayerPoint(latlng, zoom, center) {
				var topLeft = this._getNewPixelOrigin(center, zoom);
				return this.project(latlng, zoom)._subtract(topLeft);
			},

			_latLngBoundsToNewLayerBounds: function _latLngBoundsToNewLayerBounds(latLngBounds, zoom, center) {
				var topLeft = this._getNewPixelOrigin(center, zoom);
				return toBounds([this.project(latLngBounds.getSouthWest(), zoom)._subtract(topLeft), this.project(latLngBounds.getNorthWest(), zoom)._subtract(topLeft), this.project(latLngBounds.getSouthEast(), zoom)._subtract(topLeft), this.project(latLngBounds.getNorthEast(), zoom)._subtract(topLeft)]);
			},

			// layer point of the current center
			_getCenterLayerPoint: function _getCenterLayerPoint() {
				return this.containerPointToLayerPoint(this.getSize()._divideBy(2));
			},

			// offset of the specified place to the current center in pixels
			_getCenterOffset: function _getCenterOffset(latlng) {
				return this.latLngToLayerPoint(latlng).subtract(this._getCenterLayerPoint());
			},

			// adjust center for view to get inside bounds
			_limitCenter: function _limitCenter(center, zoom, bounds) {

				if (!bounds) {
					return center;
				}

				var centerPoint = this.project(center, zoom),
				    viewHalf = this.getSize().divideBy(2),
				    viewBounds = new Bounds(centerPoint.subtract(viewHalf), centerPoint.add(viewHalf)),
				    offset = this._getBoundsOffset(viewBounds, bounds, zoom);

				// If offset is less than a pixel, ignore.
				// This prevents unstable projections from getting into
				// an infinite loop of tiny offsets.
				if (offset.round().equals([0, 0])) {
					return center;
				}

				return this.unproject(centerPoint.add(offset), zoom);
			},

			// adjust offset for view to get inside bounds
			_limitOffset: function _limitOffset(offset, bounds) {
				if (!bounds) {
					return offset;
				}

				var viewBounds = this.getPixelBounds(),
				    newBounds = new Bounds(viewBounds.min.add(offset), viewBounds.max.add(offset));

				return offset.add(this._getBoundsOffset(newBounds, bounds));
			},

			// returns offset needed for pxBounds to get inside maxBounds at a specified zoom
			_getBoundsOffset: function _getBoundsOffset(pxBounds, maxBounds, zoom) {
				var projectedMaxBounds = toBounds(this.project(maxBounds.getNorthEast(), zoom), this.project(maxBounds.getSouthWest(), zoom)),
				    minOffset = projectedMaxBounds.min.subtract(pxBounds.min),
				    maxOffset = projectedMaxBounds.max.subtract(pxBounds.max),
				    dx = this._rebound(minOffset.x, -maxOffset.x),
				    dy = this._rebound(minOffset.y, -maxOffset.y);

				return new Point(dx, dy);
			},

			_rebound: function _rebound(left, right) {
				return left + right > 0 ? Math.round(left - right) / 2 : Math.max(0, Math.ceil(left)) - Math.max(0, Math.floor(right));
			},

			_limitZoom: function _limitZoom(zoom) {
				var min = this.getMinZoom(),
				    max = this.getMaxZoom(),
				    snap = any3d ? this.options.zoomSnap : 1;
				if (snap) {
					zoom = Math.round(zoom / snap) * snap;
				}
				return Math.max(min, Math.min(max, zoom));
			},

			_onPanTransitionStep: function _onPanTransitionStep() {
				this.fire('move');
			},

			_onPanTransitionEnd: function _onPanTransitionEnd() {
				removeClass(this._mapPane, 'leaflet-pan-anim');
				this.fire('moveend');
			},

			_tryAnimatedPan: function _tryAnimatedPan(center, options) {
				// difference between the new and current centers in pixels
				var offset = this._getCenterOffset(center)._floor();

				// don't animate too far unless animate: true specified in options
				if ((options && options.animate) !== true && !this.getSize().contains(offset)) {
					return false;
				}

				this.panBy(offset, options);

				return true;
			},

			_createAnimProxy: function _createAnimProxy() {

				var proxy = this._proxy = create$1('div', 'leaflet-proxy leaflet-zoom-animated');
				this._panes.mapPane.appendChild(proxy);

				this.on('zoomanim', function (e) {
					var prop = TRANSFORM,
					    transform = this._proxy.style[prop];

					setTransform(this._proxy, this.project(e.center, e.zoom), this.getZoomScale(e.zoom, 1));

					// workaround for case when transform is the same and so transitionend event is not fired
					if (transform === this._proxy.style[prop] && this._animatingZoom) {
						this._onZoomTransitionEnd();
					}
				}, this);

				this.on('load moveend', function () {
					var c = this.getCenter(),
					    z = this.getZoom();
					setTransform(this._proxy, this.project(c, z), this.getZoomScale(z, 1));
				}, this);

				this._on('unload', this._destroyAnimProxy, this);
			},

			_destroyAnimProxy: function _destroyAnimProxy() {
				_remove(this._proxy);
				delete this._proxy;
			},

			_catchTransitionEnd: function _catchTransitionEnd(e) {
				if (this._animatingZoom && e.propertyName.indexOf('transform') >= 0) {
					this._onZoomTransitionEnd();
				}
			},

			_nothingToAnimate: function _nothingToAnimate() {
				return !this._container.getElementsByClassName('leaflet-zoom-animated').length;
			},

			_tryAnimatedZoom: function _tryAnimatedZoom(center, zoom, options) {

				if (this._animatingZoom) {
					return true;
				}

				options = options || {};

				// don't animate if disabled, not supported or zoom difference is too large
				if (!this._zoomAnimated || options.animate === false || this._nothingToAnimate() || Math.abs(zoom - this._zoom) > this.options.zoomAnimationThreshold) {
					return false;
				}

				// offset is the pixel coords of the zoom origin relative to the current center
				var scale = this.getZoomScale(zoom),
				    offset = this._getCenterOffset(center)._divideBy(1 - 1 / scale);

				// don't animate if the zoom origin isn't within one screen from the current center, unless forced
				if (options.animate !== true && !this.getSize().contains(offset)) {
					return false;
				}

				requestAnimFrame(function () {
					this._moveStart(true)._animateZoom(center, zoom, true);
				}, this);

				return true;
			},

			_animateZoom: function _animateZoom(center, zoom, startAnim, noUpdate) {
				if (startAnim) {
					this._animatingZoom = true;

					// remember what center/zoom to set after animation
					this._animateToCenter = center;
					this._animateToZoom = zoom;

					addClass(this._mapPane, 'leaflet-zoom-anim');
				}

				// @event zoomanim: ZoomAnimEvent
				// Fired on every frame of a zoom animation
				this.fire('zoomanim', {
					center: center,
					zoom: zoom,
					noUpdate: noUpdate
				});

				// Work around webkit not firing 'transitionend', see https://github.com/Leaflet/Leaflet/issues/3689, 2693
				setTimeout(bind(this._onZoomTransitionEnd, this), 250);
			},

			_onZoomTransitionEnd: function _onZoomTransitionEnd() {
				if (!this._animatingZoom) {
					return;
				}

				removeClass(this._mapPane, 'leaflet-zoom-anim');

				this._animatingZoom = false;

				this._move(this._animateToCenter, this._animateToZoom);

				// This anim frame should prevent an obscure iOS webkit tile loading race condition.
				requestAnimFrame(function () {
					this._moveEnd(true);
				}, this);
			}
		});

		// @section

		// @factory L.map(id: String, options?: Map options)
		// Instantiates a map object given the DOM ID of a `<div>` element
		// and optionally an object literal with `Map options`.
		//
		// @alternative
		// @factory L.map(el: HTMLElement, options?: Map options)
		// Instantiates a map object given an instance of a `<div>` HTML element
		// and optionally an object literal with `Map options`.
		function createMap(id, options) {
			return new Map(id, options);
		}

		/*
   * @class Control
   * @aka L.Control
   * @inherits Class
   *
   * L.Control is a base class for implementing map controls. Handles positioning.
   * All other controls extend from this class.
   */

		var Control = Class.extend({
			// @section
			// @aka Control options
			options: {
				// @option position: String = 'topright'
				// The position of the control (one of the map corners). Possible values are `'topleft'`,
				// `'topright'`, `'bottomleft'` or `'bottomright'`
				position: 'topright'
			},

			initialize: function initialize(options) {
				setOptions(this, options);
			},

			/* @section
    * Classes extending L.Control will inherit the following methods:
    *
    * @method getPosition: string
    * Returns the position of the control.
    */
			getPosition: function getPosition() {
				return this.options.position;
			},

			// @method setPosition(position: string): this
			// Sets the position of the control.
			setPosition: function setPosition(position) {
				var map = this._map;

				if (map) {
					map.removeControl(this);
				}

				this.options.position = position;

				if (map) {
					map.addControl(this);
				}

				return this;
			},

			// @method getContainer: HTMLElement
			// Returns the HTMLElement that contains the control.
			getContainer: function getContainer() {
				return this._container;
			},

			// @method addTo(map: Map): this
			// Adds the control to the given map.
			addTo: function addTo(map) {
				this.remove();
				this._map = map;

				var container = this._container = this.onAdd(map),
				    pos = this.getPosition(),
				    corner = map._controlCorners[pos];

				addClass(container, 'leaflet-control');

				if (pos.indexOf('bottom') !== -1) {
					corner.insertBefore(container, corner.firstChild);
				} else {
					corner.appendChild(container);
				}

				return this;
			},

			// @method remove: this
			// Removes the control from the map it is currently active on.
			remove: function remove() {
				if (!this._map) {
					return this;
				}

				_remove(this._container);

				if (this.onRemove) {
					this.onRemove(this._map);
				}

				this._map = null;

				return this;
			},

			_refocusOnMap: function _refocusOnMap(e) {
				// if map exists and event is not a keyboard event
				if (this._map && e && e.screenX > 0 && e.screenY > 0) {
					this._map.getContainer().focus();
				}
			}
		});

		var control = function control(options) {
			return new Control(options);
		};

		/* @section Extension methods
   * @uninheritable
   *
   * Every control should extend from `L.Control` and (re-)implement the following methods.
   *
   * @method onAdd(map: Map): HTMLElement
   * Should return the container DOM element for the control and add listeners on relevant map events. Called on [`control.addTo(map)`](#control-addTo).
   *
   * @method onRemove(map: Map)
   * Optional method. Should contain all clean up code that removes the listeners previously added in [`onAdd`](#control-onadd). Called on [`control.remove()`](#control-remove).
   */

		/* @namespace Map
   * @section Methods for Layers and Controls
   */
		Map.include({
			// @method addControl(control: Control): this
			// Adds the given control to the map
			addControl: function addControl(control) {
				control.addTo(this);
				return this;
			},

			// @method removeControl(control: Control): this
			// Removes the given control from the map
			removeControl: function removeControl(control) {
				control.remove();
				return this;
			},

			_initControlPos: function _initControlPos() {
				var corners = this._controlCorners = {},
				    l = 'leaflet-',
				    container = this._controlContainer = create$1('div', l + 'control-container', this._container);

				function createCorner(vSide, hSide) {
					var className = l + vSide + ' ' + l + hSide;

					corners[vSide + hSide] = create$1('div', className, container);
				}

				createCorner('top', 'left');
				createCorner('top', 'right');
				createCorner('bottom', 'left');
				createCorner('bottom', 'right');
			},

			_clearControlPos: function _clearControlPos() {
				for (var i in this._controlCorners) {
					_remove(this._controlCorners[i]);
				}
				_remove(this._controlContainer);
				delete this._controlCorners;
				delete this._controlContainer;
			}
		});

		/*
   * @class Control.Layers
   * @aka L.Control.Layers
   * @inherits Control
   *
   * The layers control gives users the ability to switch between different base layers and switch overlays on/off (check out the [detailed example](http://leafletjs.com/examples/layers-control/)). Extends `Control`.
   *
   * @example
   *
   * ```js
   * var baseLayers = {
   * 	"Mapbox": mapbox,
   * 	"OpenStreetMap": osm
   * };
   *
   * var overlays = {
   * 	"Marker": marker,
   * 	"Roads": roadsLayer
   * };
   *
   * L.control.layers(baseLayers, overlays).addTo(map);
   * ```
   *
   * The `baseLayers` and `overlays` parameters are object literals with layer names as keys and `Layer` objects as values:
   *
   * ```js
   * {
   *     "<someName1>": layer1,
   *     "<someName2>": layer2
   * }
   * ```
   *
   * The layer names can contain HTML, which allows you to add additional styling to the items:
   *
   * ```js
   * {"<img src='my-layer-icon' /> <span class='my-layer-item'>My Layer</span>": myLayer}
   * ```
   */

		var Layers = Control.extend({
			// @section
			// @aka Control.Layers options
			options: {
				// @option collapsed: Boolean = true
				// If `true`, the control will be collapsed into an icon and expanded on mouse hover or touch.
				collapsed: true,
				position: 'topright',

				// @option autoZIndex: Boolean = true
				// If `true`, the control will assign zIndexes in increasing order to all of its layers so that the order is preserved when switching them on/off.
				autoZIndex: true,

				// @option hideSingleBase: Boolean = false
				// If `true`, the base layers in the control will be hidden when there is only one.
				hideSingleBase: false,

				// @option sortLayers: Boolean = false
				// Whether to sort the layers. When `false`, layers will keep the order
				// in which they were added to the control.
				sortLayers: false,

				// @option sortFunction: Function = *
				// A [compare function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)
				// that will be used for sorting the layers, when `sortLayers` is `true`.
				// The function receives both the `L.Layer` instances and their names, as in
				// `sortFunction(layerA, layerB, nameA, nameB)`.
				// By default, it sorts layers alphabetically by their name.
				sortFunction: function sortFunction(layerA, layerB, nameA, nameB) {
					return nameA < nameB ? -1 : nameB < nameA ? 1 : 0;
				}
			},

			initialize: function initialize(baseLayers, overlays, options) {
				setOptions(this, options);

				this._layerControlInputs = [];
				this._layers = [];
				this._lastZIndex = 0;
				this._handlingClick = false;

				for (var i in baseLayers) {
					this._addLayer(baseLayers[i], i);
				}

				for (i in overlays) {
					this._addLayer(overlays[i], i, true);
				}
			},

			onAdd: function onAdd(map) {
				this._initLayout();
				this._update();

				this._map = map;
				map.on('zoomend', this._checkDisabledLayers, this);

				for (var i = 0; i < this._layers.length; i++) {
					this._layers[i].layer.on('add remove', this._onLayerChange, this);
				}

				return this._container;
			},

			addTo: function addTo(map) {
				Control.prototype.addTo.call(this, map);
				// Trigger expand after Layers Control has been inserted into DOM so that is now has an actual height.
				return this._expandIfNotCollapsed();
			},

			onRemove: function onRemove() {
				this._map.off('zoomend', this._checkDisabledLayers, this);

				for (var i = 0; i < this._layers.length; i++) {
					this._layers[i].layer.off('add remove', this._onLayerChange, this);
				}
			},

			// @method addBaseLayer(layer: Layer, name: String): this
			// Adds a base layer (radio button entry) with the given name to the control.
			addBaseLayer: function addBaseLayer(layer, name) {
				this._addLayer(layer, name);
				return this._map ? this._update() : this;
			},

			// @method addOverlay(layer: Layer, name: String): this
			// Adds an overlay (checkbox entry) with the given name to the control.
			addOverlay: function addOverlay(layer, name) {
				this._addLayer(layer, name, true);
				return this._map ? this._update() : this;
			},

			// @method removeLayer(layer: Layer): this
			// Remove the given layer from the control.
			removeLayer: function removeLayer(layer) {
				layer.off('add remove', this._onLayerChange, this);

				var obj = this._getLayer(stamp(layer));
				if (obj) {
					this._layers.splice(this._layers.indexOf(obj), 1);
				}
				return this._map ? this._update() : this;
			},

			// @method expand(): this
			// Expand the control container if collapsed.
			expand: function expand() {
				addClass(this._container, 'leaflet-control-layers-expanded');
				this._form.style.height = null;
				var acceptableHeight = this._map.getSize().y - (this._container.offsetTop + 50);
				if (acceptableHeight < this._form.clientHeight) {
					addClass(this._form, 'leaflet-control-layers-scrollbar');
					this._form.style.height = acceptableHeight + 'px';
				} else {
					removeClass(this._form, 'leaflet-control-layers-scrollbar');
				}
				this._checkDisabledLayers();
				return this;
			},

			// @method collapse(): this
			// Collapse the control container if expanded.
			collapse: function collapse() {
				removeClass(this._container, 'leaflet-control-layers-expanded');
				return this;
			},

			_initLayout: function _initLayout() {
				var className = 'leaflet-control-layers',
				    container = this._container = create$1('div', className),
				    collapsed = this.options.collapsed;

				// makes this work on IE touch devices by stopping it from firing a mouseout event when the touch is released
				container.setAttribute('aria-haspopup', true);

				disableClickPropagation(container);
				disableScrollPropagation(container);

				var form = this._form = create$1('form', className + '-list');

				if (collapsed) {
					this._map.on('click', this.collapse, this);

					if (!android) {
						on(container, {
							mouseenter: this.expand,
							mouseleave: this.collapse
						}, this);
					}
				}

				var link = this._layersLink = create$1('a', className + '-toggle', container);
				link.href = '#';
				link.title = 'Layers';

				if (touch) {
					on(link, 'click', stop);
					on(link, 'click', this.expand, this);
				} else {
					on(link, 'focus', this.expand, this);
				}

				if (!collapsed) {
					this.expand();
				}

				this._baseLayersList = create$1('div', className + '-base', form);
				this._separator = create$1('div', className + '-separator', form);
				this._overlaysList = create$1('div', className + '-overlays', form);

				container.appendChild(form);
			},

			_getLayer: function _getLayer(id) {
				for (var i = 0; i < this._layers.length; i++) {

					if (this._layers[i] && stamp(this._layers[i].layer) === id) {
						return this._layers[i];
					}
				}
			},

			_addLayer: function _addLayer(layer, name, overlay) {
				if (this._map) {
					layer.on('add remove', this._onLayerChange, this);
				}

				this._layers.push({
					layer: layer,
					name: name,
					overlay: overlay
				});

				if (this.options.sortLayers) {
					this._layers.sort(bind(function (a, b) {
						return this.options.sortFunction(a.layer, b.layer, a.name, b.name);
					}, this));
				}

				if (this.options.autoZIndex && layer.setZIndex) {
					this._lastZIndex++;
					layer.setZIndex(this._lastZIndex);
				}

				this._expandIfNotCollapsed();
			},

			_update: function _update() {
				if (!this._container) {
					return this;
				}

				empty(this._baseLayersList);
				empty(this._overlaysList);

				this._layerControlInputs = [];
				var baseLayersPresent,
				    overlaysPresent,
				    i,
				    obj,
				    baseLayersCount = 0;

				for (i = 0; i < this._layers.length; i++) {
					obj = this._layers[i];
					this._addItem(obj);
					overlaysPresent = overlaysPresent || obj.overlay;
					baseLayersPresent = baseLayersPresent || !obj.overlay;
					baseLayersCount += !obj.overlay ? 1 : 0;
				}

				// Hide base layers section if there's only one layer.
				if (this.options.hideSingleBase) {
					baseLayersPresent = baseLayersPresent && baseLayersCount > 1;
					this._baseLayersList.style.display = baseLayersPresent ? '' : 'none';
				}

				this._separator.style.display = overlaysPresent && baseLayersPresent ? '' : 'none';

				return this;
			},

			_onLayerChange: function _onLayerChange(e) {
				if (!this._handlingClick) {
					this._update();
				}

				var obj = this._getLayer(stamp(e.target));

				// @namespace Map
				// @section Layer events
				// @event baselayerchange: LayersControlEvent
				// Fired when the base layer is changed through the [layer control](#control-layers).
				// @event overlayadd: LayersControlEvent
				// Fired when an overlay is selected through the [layer control](#control-layers).
				// @event overlayremove: LayersControlEvent
				// Fired when an overlay is deselected through the [layer control](#control-layers).
				// @namespace Control.Layers
				var type = obj.overlay ? e.type === 'add' ? 'overlayadd' : 'overlayremove' : e.type === 'add' ? 'baselayerchange' : null;

				if (type) {
					this._map.fire(type, obj);
				}
			},

			// IE7 bugs out if you create a radio dynamically, so you have to do it this hacky way (see http://bit.ly/PqYLBe)
			_createRadioElement: function _createRadioElement(name, checked) {

				var radioHtml = '<input type="radio" class="leaflet-control-layers-selector" name="' + name + '"' + (checked ? ' checked="checked"' : '') + '/>';

				var radioFragment = document.createElement('div');
				radioFragment.innerHTML = radioHtml;

				return radioFragment.firstChild;
			},

			_addItem: function _addItem(obj) {
				var label = document.createElement('label'),
				    checked = this._map.hasLayer(obj.layer),
				    input;

				if (obj.overlay) {
					input = document.createElement('input');
					input.type = 'checkbox';
					input.className = 'leaflet-control-layers-selector';
					input.defaultChecked = checked;
				} else {
					input = this._createRadioElement('leaflet-base-layers', checked);
				}

				this._layerControlInputs.push(input);
				input.layerId = stamp(obj.layer);

				on(input, 'click', this._onInputClick, this);

				var name = document.createElement('span');
				name.innerHTML = ' ' + obj.name;

				// Helps from preventing layer control flicker when checkboxes are disabled
				// https://github.com/Leaflet/Leaflet/issues/2771
				var holder = document.createElement('div');

				label.appendChild(holder);
				holder.appendChild(input);
				holder.appendChild(name);

				var container = obj.overlay ? this._overlaysList : this._baseLayersList;
				container.appendChild(label);

				this._checkDisabledLayers();
				return label;
			},

			_onInputClick: function _onInputClick() {
				var inputs = this._layerControlInputs,
				    input,
				    layer;
				var addedLayers = [],
				    removedLayers = [];

				this._handlingClick = true;

				for (var i = inputs.length - 1; i >= 0; i--) {
					input = inputs[i];
					layer = this._getLayer(input.layerId).layer;

					if (input.checked) {
						addedLayers.push(layer);
					} else if (!input.checked) {
						removedLayers.push(layer);
					}
				}

				// Bugfix issue 2318: Should remove all old layers before readding new ones
				for (i = 0; i < removedLayers.length; i++) {
					if (this._map.hasLayer(removedLayers[i])) {
						this._map.removeLayer(removedLayers[i]);
					}
				}
				for (i = 0; i < addedLayers.length; i++) {
					if (!this._map.hasLayer(addedLayers[i])) {
						this._map.addLayer(addedLayers[i]);
					}
				}

				this._handlingClick = false;

				this._refocusOnMap();
			},

			_checkDisabledLayers: function _checkDisabledLayers() {
				var inputs = this._layerControlInputs,
				    input,
				    layer,
				    zoom = this._map.getZoom();

				for (var i = inputs.length - 1; i >= 0; i--) {
					input = inputs[i];
					layer = this._getLayer(input.layerId).layer;
					input.disabled = layer.options.minZoom !== undefined && zoom < layer.options.minZoom || layer.options.maxZoom !== undefined && zoom > layer.options.maxZoom;
				}
			},

			_expandIfNotCollapsed: function _expandIfNotCollapsed() {
				if (this._map && !this.options.collapsed) {
					this.expand();
				}
				return this;
			},

			_expand: function _expand() {
				// Backward compatibility, remove me in 1.1.
				return this.expand();
			},

			_collapse: function _collapse() {
				// Backward compatibility, remove me in 1.1.
				return this.collapse();
			}

		});

		// @factory L.control.layers(baselayers?: Object, overlays?: Object, options?: Control.Layers options)
		// Creates an attribution control with the given layers. Base layers will be switched with radio buttons, while overlays will be switched with checkboxes. Note that all base layers should be passed in the base layers object, but only one should be added to the map during map instantiation.
		var layers = function layers(baseLayers, overlays, options) {
			return new Layers(baseLayers, overlays, options);
		};

		/*
   * @class Control.Zoom
   * @aka L.Control.Zoom
   * @inherits Control
   *
   * A basic zoom control with two buttons (zoom in and zoom out). It is put on the map by default unless you set its [`zoomControl` option](#map-zoomcontrol) to `false`. Extends `Control`.
   */

		var Zoom = Control.extend({
			// @section
			// @aka Control.Zoom options
			options: {
				position: 'topleft',

				// @option zoomInText: String = '+'
				// The text set on the 'zoom in' button.
				zoomInText: '+',

				// @option zoomInTitle: String = 'Zoom in'
				// The title set on the 'zoom in' button.
				zoomInTitle: 'Zoom in',

				// @option zoomOutText: String = '&#x2212;'
				// The text set on the 'zoom out' button.
				zoomOutText: '&#x2212;',

				// @option zoomOutTitle: String = 'Zoom out'
				// The title set on the 'zoom out' button.
				zoomOutTitle: 'Zoom out'
			},

			onAdd: function onAdd(map) {
				var zoomName = 'leaflet-control-zoom',
				    container = create$1('div', zoomName + ' leaflet-bar'),
				    options = this.options;

				this._zoomInButton = this._createButton(options.zoomInText, options.zoomInTitle, zoomName + '-in', container, this._zoomIn);
				this._zoomOutButton = this._createButton(options.zoomOutText, options.zoomOutTitle, zoomName + '-out', container, this._zoomOut);

				this._updateDisabled();
				map.on('zoomend zoomlevelschange', this._updateDisabled, this);

				return container;
			},

			onRemove: function onRemove(map) {
				map.off('zoomend zoomlevelschange', this._updateDisabled, this);
			},

			disable: function disable() {
				this._disabled = true;
				this._updateDisabled();
				return this;
			},

			enable: function enable() {
				this._disabled = false;
				this._updateDisabled();
				return this;
			},

			_zoomIn: function _zoomIn(e) {
				if (!this._disabled && this._map._zoom < this._map.getMaxZoom()) {
					this._map.zoomIn(this._map.options.zoomDelta * (e.shiftKey ? 3 : 1));
				}
			},

			_zoomOut: function _zoomOut(e) {
				if (!this._disabled && this._map._zoom > this._map.getMinZoom()) {
					this._map.zoomOut(this._map.options.zoomDelta * (e.shiftKey ? 3 : 1));
				}
			},

			_createButton: function _createButton(html, title, className, container, fn) {
				var link = create$1('a', className, container);
				link.innerHTML = html;
				link.href = '#';
				link.title = title;

				/*
     * Will force screen readers like VoiceOver to read this as "Zoom in - button"
     */
				link.setAttribute('role', 'button');
				link.setAttribute('aria-label', title);

				disableClickPropagation(link);
				on(link, 'click', stop);
				on(link, 'click', fn, this);
				on(link, 'click', this._refocusOnMap, this);

				return link;
			},

			_updateDisabled: function _updateDisabled() {
				var map = this._map,
				    className = 'leaflet-disabled';

				removeClass(this._zoomInButton, className);
				removeClass(this._zoomOutButton, className);

				if (this._disabled || map._zoom === map.getMinZoom()) {
					addClass(this._zoomOutButton, className);
				}
				if (this._disabled || map._zoom === map.getMaxZoom()) {
					addClass(this._zoomInButton, className);
				}
			}
		});

		// @namespace Map
		// @section Control options
		// @option zoomControl: Boolean = true
		// Whether a [zoom control](#control-zoom) is added to the map by default.
		Map.mergeOptions({
			zoomControl: true
		});

		Map.addInitHook(function () {
			if (this.options.zoomControl) {
				this.zoomControl = new Zoom();
				this.addControl(this.zoomControl);
			}
		});

		// @namespace Control.Zoom
		// @factory L.control.zoom(options: Control.Zoom options)
		// Creates a zoom control
		var zoom = function zoom(options) {
			return new Zoom(options);
		};

		/*
   * @class Control.Scale
   * @aka L.Control.Scale
   * @inherits Control
   *
   * A simple scale control that shows the scale of the current center of screen in metric (m/km) and imperial (mi/ft) systems. Extends `Control`.
   *
   * @example
   *
   * ```js
   * L.control.scale().addTo(map);
   * ```
   */

		var Scale = Control.extend({
			// @section
			// @aka Control.Scale options
			options: {
				position: 'bottomleft',

				// @option maxWidth: Number = 100
				// Maximum width of the control in pixels. The width is set dynamically to show round values (e.g. 100, 200, 500).
				maxWidth: 100,

				// @option metric: Boolean = True
				// Whether to show the metric scale line (m/km).
				metric: true,

				// @option imperial: Boolean = True
				// Whether to show the imperial scale line (mi/ft).
				imperial: true

				// @option updateWhenIdle: Boolean = false
				// If `true`, the control is updated on [`moveend`](#map-moveend), otherwise it's always up-to-date (updated on [`move`](#map-move)).
			},

			onAdd: function onAdd(map) {
				var className = 'leaflet-control-scale',
				    container = create$1('div', className),
				    options = this.options;

				this._addScales(options, className + '-line', container);

				map.on(options.updateWhenIdle ? 'moveend' : 'move', this._update, this);
				map.whenReady(this._update, this);

				return container;
			},

			onRemove: function onRemove(map) {
				map.off(this.options.updateWhenIdle ? 'moveend' : 'move', this._update, this);
			},

			_addScales: function _addScales(options, className, container) {
				if (options.metric) {
					this._mScale = create$1('div', className, container);
				}
				if (options.imperial) {
					this._iScale = create$1('div', className, container);
				}
			},

			_update: function _update() {
				var map = this._map,
				    y = map.getSize().y / 2;

				var maxMeters = map.distance(map.containerPointToLatLng([0, y]), map.containerPointToLatLng([this.options.maxWidth, y]));

				this._updateScales(maxMeters);
			},

			_updateScales: function _updateScales(maxMeters) {
				if (this.options.metric && maxMeters) {
					this._updateMetric(maxMeters);
				}
				if (this.options.imperial && maxMeters) {
					this._updateImperial(maxMeters);
				}
			},

			_updateMetric: function _updateMetric(maxMeters) {
				var meters = this._getRoundNum(maxMeters),
				    label = meters < 1000 ? meters + ' m' : meters / 1000 + ' km';

				this._updateScale(this._mScale, label, meters / maxMeters);
			},

			_updateImperial: function _updateImperial(maxMeters) {
				var maxFeet = maxMeters * 3.2808399,
				    maxMiles,
				    miles,
				    feet;

				if (maxFeet > 5280) {
					maxMiles = maxFeet / 5280;
					miles = this._getRoundNum(maxMiles);
					this._updateScale(this._iScale, miles + ' mi', miles / maxMiles);
				} else {
					feet = this._getRoundNum(maxFeet);
					this._updateScale(this._iScale, feet + ' ft', feet / maxFeet);
				}
			},

			_updateScale: function _updateScale(scale, text, ratio) {
				scale.style.width = Math.round(this.options.maxWidth * ratio) + 'px';
				scale.innerHTML = text;
			},

			_getRoundNum: function _getRoundNum(num) {
				var pow10 = Math.pow(10, (Math.floor(num) + '').length - 1),
				    d = num / pow10;

				d = d >= 10 ? 10 : d >= 5 ? 5 : d >= 3 ? 3 : d >= 2 ? 2 : 1;

				return pow10 * d;
			}
		});

		// @factory L.control.scale(options?: Control.Scale options)
		// Creates an scale control with the given options.
		var scale = function scale(options) {
			return new Scale(options);
		};

		/*
   * @class Control.Attribution
   * @aka L.Control.Attribution
   * @inherits Control
   *
   * The attribution control allows you to display attribution data in a small text box on a map. It is put on the map by default unless you set its [`attributionControl` option](#map-attributioncontrol) to `false`, and it fetches attribution texts from layers with the [`getAttribution` method](#layer-getattribution) automatically. Extends Control.
   */

		var Attribution = Control.extend({
			// @section
			// @aka Control.Attribution options
			options: {
				position: 'bottomright',

				// @option prefix: String = 'Leaflet'
				// The HTML text shown before the attributions. Pass `false` to disable.
				prefix: '<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'
			},

			initialize: function initialize(options) {
				setOptions(this, options);

				this._attributions = {};
			},

			onAdd: function onAdd(map) {
				map.attributionControl = this;
				this._container = create$1('div', 'leaflet-control-attribution');
				disableClickPropagation(this._container);

				// TODO ugly, refactor
				for (var i in map._layers) {
					if (map._layers[i].getAttribution) {
						this.addAttribution(map._layers[i].getAttribution());
					}
				}

				this._update();

				return this._container;
			},

			// @method setPrefix(prefix: String): this
			// Sets the text before the attributions.
			setPrefix: function setPrefix(prefix) {
				this.options.prefix = prefix;
				this._update();
				return this;
			},

			// @method addAttribution(text: String): this
			// Adds an attribution text (e.g. `'Vector data &copy; Mapbox'`).
			addAttribution: function addAttribution(text) {
				if (!text) {
					return this;
				}

				if (!this._attributions[text]) {
					this._attributions[text] = 0;
				}
				this._attributions[text]++;

				this._update();

				return this;
			},

			// @method removeAttribution(text: String): this
			// Removes an attribution text.
			removeAttribution: function removeAttribution(text) {
				if (!text) {
					return this;
				}

				if (this._attributions[text]) {
					this._attributions[text]--;
					this._update();
				}

				return this;
			},

			_update: function _update() {
				if (!this._map) {
					return;
				}

				var attribs = [];

				for (var i in this._attributions) {
					if (this._attributions[i]) {
						attribs.push(i);
					}
				}

				var prefixAndAttribs = [];

				if (this.options.prefix) {
					prefixAndAttribs.push(this.options.prefix);
				}
				if (attribs.length) {
					prefixAndAttribs.push(attribs.join(', '));
				}

				this._container.innerHTML = prefixAndAttribs.join(' | ');
			}
		});

		// @namespace Map
		// @section Control options
		// @option attributionControl: Boolean = true
		// Whether a [attribution control](#control-attribution) is added to the map by default.
		Map.mergeOptions({
			attributionControl: true
		});

		Map.addInitHook(function () {
			if (this.options.attributionControl) {
				new Attribution().addTo(this);
			}
		});

		// @namespace Control.Attribution
		// @factory L.control.attribution(options: Control.Attribution options)
		// Creates an attribution control.
		var attribution = function attribution(options) {
			return new Attribution(options);
		};

		Control.Layers = Layers;
		Control.Zoom = Zoom;
		Control.Scale = Scale;
		Control.Attribution = Attribution;

		control.layers = layers;
		control.zoom = zoom;
		control.scale = scale;
		control.attribution = attribution;

		/*
  	L.Handler is a base class for handler classes that are used internally to inject
  	interaction features like dragging to classes like Map and Marker.
  */

		// @class Handler
		// @aka L.Handler
		// Abstract class for map interaction handlers

		var Handler = Class.extend({
			initialize: function initialize(map) {
				this._map = map;
			},

			// @method enable(): this
			// Enables the handler
			enable: function enable() {
				if (this._enabled) {
					return this;
				}

				this._enabled = true;
				this.addHooks();
				return this;
			},

			// @method disable(): this
			// Disables the handler
			disable: function disable() {
				if (!this._enabled) {
					return this;
				}

				this._enabled = false;
				this.removeHooks();
				return this;
			},

			// @method enabled(): Boolean
			// Returns `true` if the handler is enabled
			enabled: function enabled() {
				return !!this._enabled;
			}

			// @section Extension methods
			// Classes inheriting from `Handler` must implement the two following methods:
			// @method addHooks()
			// Called when the handler is enabled, should add event hooks.
			// @method removeHooks()
			// Called when the handler is disabled, should remove the event hooks added previously.
		});

		var Mixin = { Events: Events };

		/*
   * @class Draggable
   * @aka L.Draggable
   * @inherits Evented
   *
   * A class for making DOM elements draggable (including touch support).
   * Used internally for map and marker dragging. Only works for elements
   * that were positioned with [`L.DomUtil.setPosition`](#domutil-setposition).
   *
   * @example
   * ```js
   * var draggable = new L.Draggable(elementToDrag);
   * draggable.enable();
   * ```
   */

		var START = touch ? 'touchstart mousedown' : 'mousedown';
		var END = {
			mousedown: 'mouseup',
			touchstart: 'touchend',
			pointerdown: 'touchend',
			MSPointerDown: 'touchend'
		};
		var MOVE = {
			mousedown: 'mousemove',
			touchstart: 'touchmove',
			pointerdown: 'touchmove',
			MSPointerDown: 'touchmove'
		};

		var Draggable = Evented.extend({

			options: {
				// @section
				// @aka Draggable options
				// @option clickTolerance: Number = 3
				// The max number of pixels a user can shift the mouse pointer during a click
				// for it to be considered a valid click (as opposed to a mouse drag).
				clickTolerance: 3
			},

			// @constructor L.Draggable(el: HTMLElement, dragHandle?: HTMLElement, preventOutline?: Boolean, options?: Draggable options)
			// Creates a `Draggable` object for moving `el` when you start dragging the `dragHandle` element (equals `el` itself by default).
			initialize: function initialize(element, dragStartTarget, preventOutline$$1, options) {
				setOptions(this, options);

				this._element = element;
				this._dragStartTarget = dragStartTarget || element;
				this._preventOutline = preventOutline$$1;
			},

			// @method enable()
			// Enables the dragging ability
			enable: function enable() {
				if (this._enabled) {
					return;
				}

				on(this._dragStartTarget, START, this._onDown, this);

				this._enabled = true;
			},

			// @method disable()
			// Disables the dragging ability
			disable: function disable() {
				if (!this._enabled) {
					return;
				}

				// If we're currently dragging this draggable,
				// disabling it counts as first ending the drag.
				if (Draggable._dragging === this) {
					this.finishDrag();
				}

				off(this._dragStartTarget, START, this._onDown, this);

				this._enabled = false;
				this._moved = false;
			},

			_onDown: function _onDown(e) {
				// Ignore simulated events, since we handle both touch and
				// mouse explicitly; otherwise we risk getting duplicates of
				// touch events, see #4315.
				// Also ignore the event if disabled; this happens in IE11
				// under some circumstances, see #3666.
				if (e._simulated || !this._enabled) {
					return;
				}

				this._moved = false;

				if (hasClass(this._element, 'leaflet-zoom-anim')) {
					return;
				}

				if (Draggable._dragging || e.shiftKey || e.which !== 1 && e.button !== 1 && !e.touches) {
					return;
				}
				Draggable._dragging = this; // Prevent dragging multiple objects at once.

				if (this._preventOutline) {
					preventOutline(this._element);
				}

				disableImageDrag();
				disableTextSelection();

				if (this._moving) {
					return;
				}

				// @event down: Event
				// Fired when a drag is about to start.
				this.fire('down');

				var first = e.touches ? e.touches[0] : e;

				this._startPoint = new Point(first.clientX, first.clientY);

				on(document, MOVE[e.type], this._onMove, this);
				on(document, END[e.type], this._onUp, this);
			},

			_onMove: function _onMove(e) {
				// Ignore simulated events, since we handle both touch and
				// mouse explicitly; otherwise we risk getting duplicates of
				// touch events, see #4315.
				// Also ignore the event if disabled; this happens in IE11
				// under some circumstances, see #3666.
				if (e._simulated || !this._enabled) {
					return;
				}

				if (e.touches && e.touches.length > 1) {
					this._moved = true;
					return;
				}

				var first = e.touches && e.touches.length === 1 ? e.touches[0] : e,
				    newPoint = new Point(first.clientX, first.clientY),
				    offset = newPoint.subtract(this._startPoint);

				if (!offset.x && !offset.y) {
					return;
				}
				if (Math.abs(offset.x) + Math.abs(offset.y) < this.options.clickTolerance) {
					return;
				}

				preventDefault(e);

				if (!this._moved) {
					// @event dragstart: Event
					// Fired when a drag starts
					this.fire('dragstart');

					this._moved = true;
					this._startPos = getPosition(this._element).subtract(offset);

					addClass(document.body, 'leaflet-dragging');

					this._lastTarget = e.target || e.srcElement;
					// IE and Edge do not give the <use> element, so fetch it
					// if necessary
					if (window.SVGElementInstance && this._lastTarget instanceof SVGElementInstance) {
						this._lastTarget = this._lastTarget.correspondingUseElement;
					}
					addClass(this._lastTarget, 'leaflet-drag-target');
				}

				this._newPos = this._startPos.add(offset);
				this._moving = true;

				cancelAnimFrame(this._animRequest);
				this._lastEvent = e;
				this._animRequest = requestAnimFrame(this._updatePosition, this, true);
			},

			_updatePosition: function _updatePosition() {
				var e = { originalEvent: this._lastEvent };

				// @event predrag: Event
				// Fired continuously during dragging *before* each corresponding
				// update of the element's position.
				this.fire('predrag', e);
				setPosition(this._element, this._newPos);

				// @event drag: Event
				// Fired continuously during dragging.
				this.fire('drag', e);
			},

			_onUp: function _onUp(e) {
				// Ignore simulated events, since we handle both touch and
				// mouse explicitly; otherwise we risk getting duplicates of
				// touch events, see #4315.
				// Also ignore the event if disabled; this happens in IE11
				// under some circumstances, see #3666.
				if (e._simulated || !this._enabled) {
					return;
				}
				this.finishDrag();
			},

			finishDrag: function finishDrag() {
				removeClass(document.body, 'leaflet-dragging');

				if (this._lastTarget) {
					removeClass(this._lastTarget, 'leaflet-drag-target');
					this._lastTarget = null;
				}

				for (var i in MOVE) {
					off(document, MOVE[i], this._onMove, this);
					off(document, END[i], this._onUp, this);
				}

				enableImageDrag();
				enableTextSelection();

				if (this._moved && this._moving) {
					// ensure drag is not fired after dragend
					cancelAnimFrame(this._animRequest);

					// @event dragend: DragEndEvent
					// Fired when the drag ends.
					this.fire('dragend', {
						distance: this._newPos.distanceTo(this._startPos)
					});
				}

				this._moving = false;
				Draggable._dragging = false;
			}

		});

		/*
   * @namespace LineUtil
   *
   * Various utility functions for polyine points processing, used by Leaflet internally to make polylines lightning-fast.
   */

		// Simplify polyline with vertex reduction and Douglas-Peucker simplification.
		// Improves rendering performance dramatically by lessening the number of points to draw.

		// @function simplify(points: Point[], tolerance: Number): Point[]
		// Dramatically reduces the number of points in a polyline while retaining
		// its shape and returns a new array of simplified points, using the
		// [Douglas-Peucker algorithm](http://en.wikipedia.org/wiki/Douglas-Peucker_algorithm).
		// Used for a huge performance boost when processing/displaying Leaflet polylines for
		// each zoom level and also reducing visual noise. tolerance affects the amount of
		// simplification (lesser value means higher quality but slower and with more points).
		// Also released as a separated micro-library [Simplify.js](http://mourner.github.com/simplify-js/).
		function simplify(points, tolerance) {
			if (!tolerance || !points.length) {
				return points.slice();
			}

			var sqTolerance = tolerance * tolerance;

			// stage 1: vertex reduction
			points = _reducePoints(points, sqTolerance);

			// stage 2: Douglas-Peucker simplification
			points = _simplifyDP(points, sqTolerance);

			return points;
		}

		// @function pointToSegmentDistance(p: Point, p1: Point, p2: Point): Number
		// Returns the distance between point `p` and segment `p1` to `p2`.
		function pointToSegmentDistance(p, p1, p2) {
			return Math.sqrt(_sqClosestPointOnSegment(p, p1, p2, true));
		}

		// @function closestPointOnSegment(p: Point, p1: Point, p2: Point): Number
		// Returns the closest point from a point `p` on a segment `p1` to `p2`.
		function closestPointOnSegment(p, p1, p2) {
			return _sqClosestPointOnSegment(p, p1, p2);
		}

		// Douglas-Peucker simplification, see http://en.wikipedia.org/wiki/Douglas-Peucker_algorithm
		function _simplifyDP(points, sqTolerance) {

			var len = points.length,
			    ArrayConstructor = (typeof Uint8Array === 'undefined' ? 'undefined' : _typeof(Uint8Array)) !== undefined + '' ? Uint8Array : Array,
			    markers = new ArrayConstructor(len);

			markers[0] = markers[len - 1] = 1;

			_simplifyDPStep(points, markers, sqTolerance, 0, len - 1);

			var i,
			    newPoints = [];

			for (i = 0; i < len; i++) {
				if (markers[i]) {
					newPoints.push(points[i]);
				}
			}

			return newPoints;
		}

		function _simplifyDPStep(points, markers, sqTolerance, first, last) {

			var maxSqDist = 0,
			    index,
			    i,
			    sqDist;

			for (i = first + 1; i <= last - 1; i++) {
				sqDist = _sqClosestPointOnSegment(points[i], points[first], points[last], true);

				if (sqDist > maxSqDist) {
					index = i;
					maxSqDist = sqDist;
				}
			}

			if (maxSqDist > sqTolerance) {
				markers[index] = 1;

				_simplifyDPStep(points, markers, sqTolerance, first, index);
				_simplifyDPStep(points, markers, sqTolerance, index, last);
			}
		}

		// reduce points that are too close to each other to a single point
		function _reducePoints(points, sqTolerance) {
			var reducedPoints = [points[0]];

			for (var i = 1, prev = 0, len = points.length; i < len; i++) {
				if (_sqDist(points[i], points[prev]) > sqTolerance) {
					reducedPoints.push(points[i]);
					prev = i;
				}
			}
			if (prev < len - 1) {
				reducedPoints.push(points[len - 1]);
			}
			return reducedPoints;
		}

		var _lastCode;

		// @function clipSegment(a: Point, b: Point, bounds: Bounds, useLastCode?: Boolean, round?: Boolean): Point[]|Boolean
		// Clips the segment a to b by rectangular bounds with the
		// [Cohen-Sutherland algorithm](https://en.wikipedia.org/wiki/Cohen%E2%80%93Sutherland_algorithm)
		// (modifying the segment points directly!). Used by Leaflet to only show polyline
		// points that are on the screen or near, increasing performance.
		function clipSegment(a, b, bounds, useLastCode, round) {
			var codeA = useLastCode ? _lastCode : _getBitCode(a, bounds),
			    codeB = _getBitCode(b, bounds),
			    codeOut,
			    p,
			    newCode;

			// save 2nd code to avoid calculating it on the next segment
			_lastCode = codeB;

			while (true) {
				// if a,b is inside the clip window (trivial accept)
				if (!(codeA | codeB)) {
					return [a, b];
				}

				// if a,b is outside the clip window (trivial reject)
				if (codeA & codeB) {
					return false;
				}

				// other cases
				codeOut = codeA || codeB;
				p = _getEdgeIntersection(a, b, codeOut, bounds, round);
				newCode = _getBitCode(p, bounds);

				if (codeOut === codeA) {
					a = p;
					codeA = newCode;
				} else {
					b = p;
					codeB = newCode;
				}
			}
		}

		function _getEdgeIntersection(a, b, code, bounds, round) {
			var dx = b.x - a.x,
			    dy = b.y - a.y,
			    min = bounds.min,
			    max = bounds.max,
			    x,
			    y;

			if (code & 8) {
				// top
				x = a.x + dx * (max.y - a.y) / dy;
				y = max.y;
			} else if (code & 4) {
				// bottom
				x = a.x + dx * (min.y - a.y) / dy;
				y = min.y;
			} else if (code & 2) {
				// right
				x = max.x;
				y = a.y + dy * (max.x - a.x) / dx;
			} else if (code & 1) {
				// left
				x = min.x;
				y = a.y + dy * (min.x - a.x) / dx;
			}

			return new Point(x, y, round);
		}

		function _getBitCode(p, bounds) {
			var code = 0;

			if (p.x < bounds.min.x) {
				// left
				code |= 1;
			} else if (p.x > bounds.max.x) {
				// right
				code |= 2;
			}

			if (p.y < bounds.min.y) {
				// bottom
				code |= 4;
			} else if (p.y > bounds.max.y) {
				// top
				code |= 8;
			}

			return code;
		}

		// square distance (to avoid unnecessary Math.sqrt calls)
		function _sqDist(p1, p2) {
			var dx = p2.x - p1.x,
			    dy = p2.y - p1.y;
			return dx * dx + dy * dy;
		}

		// return closest point on segment or distance to that point
		function _sqClosestPointOnSegment(p, p1, p2, sqDist) {
			var x = p1.x,
			    y = p1.y,
			    dx = p2.x - x,
			    dy = p2.y - y,
			    dot = dx * dx + dy * dy,
			    t;

			if (dot > 0) {
				t = ((p.x - x) * dx + (p.y - y) * dy) / dot;

				if (t > 1) {
					x = p2.x;
					y = p2.y;
				} else if (t > 0) {
					x += dx * t;
					y += dy * t;
				}
			}

			dx = p.x - x;
			dy = p.y - y;

			return sqDist ? dx * dx + dy * dy : new Point(x, y);
		}

		// @function isFlat(latlngs: LatLng[]): Boolean
		// Returns true if `latlngs` is a flat array, false is nested.
		function isFlat(latlngs) {
			return !isArray(latlngs[0]) || _typeof(latlngs[0][0]) !== 'object' && typeof latlngs[0][0] !== 'undefined';
		}

		function _flat(latlngs) {
			console.warn('Deprecated use of _flat, please use L.LineUtil.isFlat instead.');
			return isFlat(latlngs);
		}

		var LineUtil = (Object.freeze || Object)({
			simplify: simplify,
			pointToSegmentDistance: pointToSegmentDistance,
			closestPointOnSegment: closestPointOnSegment,
			clipSegment: clipSegment,
			_getEdgeIntersection: _getEdgeIntersection,
			_getBitCode: _getBitCode,
			_sqClosestPointOnSegment: _sqClosestPointOnSegment,
			isFlat: isFlat,
			_flat: _flat
		});

		/*
   * @namespace PolyUtil
   * Various utility functions for polygon geometries.
   */

		/* @function clipPolygon(points: Point[], bounds: Bounds, round?: Boolean): Point[]
   * Clips the polygon geometry defined by the given `points` by the given bounds (using the [Sutherland-Hodgeman algorithm](https://en.wikipedia.org/wiki/Sutherland%E2%80%93Hodgman_algorithm)).
   * Used by Leaflet to only show polygon points that are on the screen or near, increasing
   * performance. Note that polygon points needs different algorithm for clipping
   * than polyline, so there's a seperate method for it.
   */
		function clipPolygon(points, bounds, round) {
			var clippedPoints,
			    edges = [1, 4, 2, 8],
			    i,
			    j,
			    k,
			    a,
			    b,
			    len,
			    edge,
			    p;

			for (i = 0, len = points.length; i < len; i++) {
				points[i]._code = _getBitCode(points[i], bounds);
			}

			// for each edge (left, bottom, right, top)
			for (k = 0; k < 4; k++) {
				edge = edges[k];
				clippedPoints = [];

				for (i = 0, len = points.length, j = len - 1; i < len; j = i++) {
					a = points[i];
					b = points[j];

					// if a is inside the clip window
					if (!(a._code & edge)) {
						// if b is outside the clip window (a->b goes out of screen)
						if (b._code & edge) {
							p = _getEdgeIntersection(b, a, edge, bounds, round);
							p._code = _getBitCode(p, bounds);
							clippedPoints.push(p);
						}
						clippedPoints.push(a);

						// else if b is inside the clip window (a->b enters the screen)
					} else if (!(b._code & edge)) {
						p = _getEdgeIntersection(b, a, edge, bounds, round);
						p._code = _getBitCode(p, bounds);
						clippedPoints.push(p);
					}
				}
				points = clippedPoints;
			}

			return points;
		}

		var PolyUtil = (Object.freeze || Object)({
			clipPolygon: clipPolygon
		});

		/*
   * @namespace Projection
   * @section
   * Leaflet comes with a set of already defined Projections out of the box:
   *
   * @projection L.Projection.LonLat
   *
   * Equirectangular, or Plate Carree projection — the most simple projection,
   * mostly used by GIS enthusiasts. Directly maps `x` as longitude, and `y` as
   * latitude. Also suitable for flat worlds, e.g. game maps. Used by the
   * `EPSG:4326` and `Simple` CRS.
   */

		var LonLat = {
			project: function project(latlng) {
				return new Point(latlng.lng, latlng.lat);
			},

			unproject: function unproject(point) {
				return new LatLng(point.y, point.x);
			},

			bounds: new Bounds([-180, -90], [180, 90])
		};

		/*
   * @namespace Projection
   * @projection L.Projection.Mercator
   *
   * Elliptical Mercator projection — more complex than Spherical Mercator. Takes into account that Earth is a geoid, not a perfect sphere. Used by the EPSG:3395 CRS.
   */

		var Mercator = {
			R: 6378137,
			R_MINOR: 6356752.314245179,

			bounds: new Bounds([-20037508.34279, -15496570.73972], [20037508.34279, 18764656.23138]),

			project: function project(latlng) {
				var d = Math.PI / 180,
				    r = this.R,
				    y = latlng.lat * d,
				    tmp = this.R_MINOR / r,
				    e = Math.sqrt(1 - tmp * tmp),
				    con = e * Math.sin(y);

				var ts = Math.tan(Math.PI / 4 - y / 2) / Math.pow((1 - con) / (1 + con), e / 2);
				y = -r * Math.log(Math.max(ts, 1E-10));

				return new Point(latlng.lng * d * r, y);
			},

			unproject: function unproject(point) {
				var d = 180 / Math.PI,
				    r = this.R,
				    tmp = this.R_MINOR / r,
				    e = Math.sqrt(1 - tmp * tmp),
				    ts = Math.exp(-point.y / r),
				    phi = Math.PI / 2 - 2 * Math.atan(ts);

				for (var i = 0, dphi = 0.1, con; i < 15 && Math.abs(dphi) > 1e-7; i++) {
					con = e * Math.sin(phi);
					con = Math.pow((1 - con) / (1 + con), e / 2);
					dphi = Math.PI / 2 - 2 * Math.atan(ts * con) - phi;
					phi += dphi;
				}

				return new LatLng(phi * d, point.x * d / r);
			}
		};

		/*
   * @class Projection
  
   * An object with methods for projecting geographical coordinates of the world onto
   * a flat surface (and back). See [Map projection](http://en.wikipedia.org/wiki/Map_projection).
  
   * @property bounds: Bounds
   * The bounds (specified in CRS units) where the projection is valid
  
   * @method project(latlng: LatLng): Point
   * Projects geographical coordinates into a 2D point.
   * Only accepts actual `L.LatLng` instances, not arrays.
  
   * @method unproject(point: Point): LatLng
   * The inverse of `project`. Projects a 2D point into a geographical location.
   * Only accepts actual `L.Point` instances, not arrays.
  
   */

		var index = (Object.freeze || Object)({
			LonLat: LonLat,
			Mercator: Mercator,
			SphericalMercator: SphericalMercator
		});

		/*
   * @namespace CRS
   * @crs L.CRS.EPSG3395
   *
   * Rarely used by some commercial tile providers. Uses Elliptical Mercator projection.
   */
		var EPSG3395 = extend({}, Earth, {
			code: 'EPSG:3395',
			projection: Mercator,

			transformation: function () {
				var scale = 0.5 / (Math.PI * Mercator.R);
				return toTransformation(scale, 0.5, -scale, 0.5);
			}()
		});

		/*
   * @namespace CRS
   * @crs L.CRS.EPSG4326
   *
   * A common CRS among GIS enthusiasts. Uses simple Equirectangular projection.
   *
   * Leaflet 1.0.x complies with the [TMS coordinate scheme for EPSG:4326](https://wiki.osgeo.org/wiki/Tile_Map_Service_Specification#global-geodetic),
   * which is a breaking change from 0.7.x behaviour.  If you are using a `TileLayer`
   * with this CRS, ensure that there are two 256x256 pixel tiles covering the
   * whole earth at zoom level zero, and that the tile coordinate origin is (-180,+90),
   * or (-180,-90) for `TileLayer`s with [the `tms` option](#tilelayer-tms) set.
   */

		var EPSG4326 = extend({}, Earth, {
			code: 'EPSG:4326',
			projection: LonLat,
			transformation: toTransformation(1 / 180, 1, -1 / 180, 0.5)
		});

		/*
   * @namespace CRS
   * @crs L.CRS.Simple
   *
   * A simple CRS that maps longitude and latitude into `x` and `y` directly.
   * May be used for maps of flat surfaces (e.g. game maps). Note that the `y`
   * axis should still be inverted (going from bottom to top). `distance()` returns
   * simple euclidean distance.
   */

		var Simple = extend({}, CRS, {
			projection: LonLat,
			transformation: toTransformation(1, 0, -1, 0),

			scale: function scale(zoom) {
				return Math.pow(2, zoom);
			},

			zoom: function zoom(scale) {
				return Math.log(scale) / Math.LN2;
			},

			distance: function distance(latlng1, latlng2) {
				var dx = latlng2.lng - latlng1.lng,
				    dy = latlng2.lat - latlng1.lat;

				return Math.sqrt(dx * dx + dy * dy);
			},

			infinite: true
		});

		CRS.Earth = Earth;
		CRS.EPSG3395 = EPSG3395;
		CRS.EPSG3857 = EPSG3857;
		CRS.EPSG900913 = EPSG900913;
		CRS.EPSG4326 = EPSG4326;
		CRS.Simple = Simple;

		/*
   * @class Layer
   * @inherits Evented
   * @aka L.Layer
   * @aka ILayer
   *
   * A set of methods from the Layer base class that all Leaflet layers use.
   * Inherits all methods, options and events from `L.Evented`.
   *
   * @example
   *
   * ```js
   * var layer = L.Marker(latlng).addTo(map);
   * layer.addTo(map);
   * layer.remove();
   * ```
   *
   * @event add: Event
   * Fired after the layer is added to a map
   *
   * @event remove: Event
   * Fired after the layer is removed from a map
   */

		var Layer = Evented.extend({

			// Classes extending `L.Layer` will inherit the following options:
			options: {
				// @option pane: String = 'overlayPane'
				// By default the layer will be added to the map's [overlay pane](#map-overlaypane). Overriding this option will cause the layer to be placed on another pane by default.
				pane: 'overlayPane',

				// @option attribution: String = null
				// String to be shown in the attribution control, describes the layer data, e.g. "© Mapbox".
				attribution: null,

				bubblingMouseEvents: true
			},

			/* @section
    * Classes extending `L.Layer` will inherit the following methods:
    *
    * @method addTo(map: Map|LayerGroup): this
    * Adds the layer to the given map or layer group.
    */
			addTo: function addTo(map) {
				map.addLayer(this);
				return this;
			},

			// @method remove: this
			// Removes the layer from the map it is currently active on.
			remove: function remove() {
				return this.removeFrom(this._map || this._mapToAdd);
			},

			// @method removeFrom(map: Map): this
			// Removes the layer from the given map
			removeFrom: function removeFrom(obj) {
				if (obj) {
					obj.removeLayer(this);
				}
				return this;
			},

			// @method getPane(name? : String): HTMLElement
			// Returns the `HTMLElement` representing the named pane on the map. If `name` is omitted, returns the pane for this layer.
			getPane: function getPane(name) {
				return this._map.getPane(name ? this.options[name] || name : this.options.pane);
			},

			addInteractiveTarget: function addInteractiveTarget(targetEl) {
				this._map._targets[stamp(targetEl)] = this;
				return this;
			},

			removeInteractiveTarget: function removeInteractiveTarget(targetEl) {
				delete this._map._targets[stamp(targetEl)];
				return this;
			},

			// @method getAttribution: String
			// Used by the `attribution control`, returns the [attribution option](#gridlayer-attribution).
			getAttribution: function getAttribution() {
				return this.options.attribution;
			},

			_layerAdd: function _layerAdd(e) {
				var map = e.target;

				// check in case layer gets added and then removed before the map is ready
				if (!map.hasLayer(this)) {
					return;
				}

				this._map = map;
				this._zoomAnimated = map._zoomAnimated;

				if (this.getEvents) {
					var events = this.getEvents();
					map.on(events, this);
					this.once('remove', function () {
						map.off(events, this);
					}, this);
				}

				this.onAdd(map);

				if (this.getAttribution && map.attributionControl) {
					map.attributionControl.addAttribution(this.getAttribution());
				}

				this.fire('add');
				map.fire('layeradd', { layer: this });
			}
		});

		/* @section Extension methods
   * @uninheritable
   *
   * Every layer should extend from `L.Layer` and (re-)implement the following methods.
   *
   * @method onAdd(map: Map): this
   * Should contain code that creates DOM elements for the layer, adds them to `map panes` where they should belong and puts listeners on relevant map events. Called on [`map.addLayer(layer)`](#map-addlayer).
   *
   * @method onRemove(map: Map): this
   * Should contain all clean up code that removes the layer's elements from the DOM and removes listeners previously added in [`onAdd`](#layer-onadd). Called on [`map.removeLayer(layer)`](#map-removelayer).
   *
   * @method getEvents(): Object
   * This optional method should return an object like `{ viewreset: this._reset }` for [`addEventListener`](#evented-addeventlistener). The event handlers in this object will be automatically added and removed from the map with your layer.
   *
   * @method getAttribution(): String
   * This optional method should return a string containing HTML to be shown on the `Attribution control` whenever the layer is visible.
   *
   * @method beforeAdd(map: Map): this
   * Optional method. Called on [`map.addLayer(layer)`](#map-addlayer), before the layer is added to the map, before events are initialized, without waiting until the map is in a usable state. Use for early initialization only.
   */

		/* @namespace Map
   * @section Layer events
   *
   * @event layeradd: LayerEvent
   * Fired when a new layer is added to the map.
   *
   * @event layerremove: LayerEvent
   * Fired when some layer is removed from the map
   *
   * @section Methods for Layers and Controls
   */
		Map.include({
			// @method addLayer(layer: Layer): this
			// Adds the given layer to the map
			addLayer: function addLayer(layer) {
				if (!layer._layerAdd) {
					throw new Error('The provided object is not a Layer.');
				}

				var id = stamp(layer);
				if (this._layers[id]) {
					return this;
				}
				this._layers[id] = layer;

				layer._mapToAdd = this;

				if (layer.beforeAdd) {
					layer.beforeAdd(this);
				}

				this.whenReady(layer._layerAdd, layer);

				return this;
			},

			// @method removeLayer(layer: Layer): this
			// Removes the given layer from the map.
			removeLayer: function removeLayer(layer) {
				var id = stamp(layer);

				if (!this._layers[id]) {
					return this;
				}

				if (this._loaded) {
					layer.onRemove(this);
				}

				if (layer.getAttribution && this.attributionControl) {
					this.attributionControl.removeAttribution(layer.getAttribution());
				}

				delete this._layers[id];

				if (this._loaded) {
					this.fire('layerremove', { layer: layer });
					layer.fire('remove');
				}

				layer._map = layer._mapToAdd = null;

				return this;
			},

			// @method hasLayer(layer: Layer): Boolean
			// Returns `true` if the given layer is currently added to the map
			hasLayer: function hasLayer(layer) {
				return !!layer && stamp(layer) in this._layers;
			},

			/* @method eachLayer(fn: Function, context?: Object): this
    * Iterates over the layers of the map, optionally specifying context of the iterator function.
    * ```
    * map.eachLayer(function(layer){
    *     layer.bindPopup('Hello');
    * });
    * ```
    */
			eachLayer: function eachLayer(method, context) {
				for (var i in this._layers) {
					method.call(context, this._layers[i]);
				}
				return this;
			},

			_addLayers: function _addLayers(layers) {
				layers = layers ? isArray(layers) ? layers : [layers] : [];

				for (var i = 0, len = layers.length; i < len; i++) {
					this.addLayer(layers[i]);
				}
			},

			_addZoomLimit: function _addZoomLimit(layer) {
				if (isNaN(layer.options.maxZoom) || !isNaN(layer.options.minZoom)) {
					this._zoomBoundLayers[stamp(layer)] = layer;
					this._updateZoomLevels();
				}
			},

			_removeZoomLimit: function _removeZoomLimit(layer) {
				var id = stamp(layer);

				if (this._zoomBoundLayers[id]) {
					delete this._zoomBoundLayers[id];
					this._updateZoomLevels();
				}
			},

			_updateZoomLevels: function _updateZoomLevels() {
				var minZoom = Infinity,
				    maxZoom = -Infinity,
				    oldZoomSpan = this._getZoomSpan();

				for (var i in this._zoomBoundLayers) {
					var options = this._zoomBoundLayers[i].options;

					minZoom = options.minZoom === undefined ? minZoom : Math.min(minZoom, options.minZoom);
					maxZoom = options.maxZoom === undefined ? maxZoom : Math.max(maxZoom, options.maxZoom);
				}

				this._layersMaxZoom = maxZoom === -Infinity ? undefined : maxZoom;
				this._layersMinZoom = minZoom === Infinity ? undefined : minZoom;

				// @section Map state change events
				// @event zoomlevelschange: Event
				// Fired when the number of zoomlevels on the map is changed due
				// to adding or removing a layer.
				if (oldZoomSpan !== this._getZoomSpan()) {
					this.fire('zoomlevelschange');
				}

				if (this.options.maxZoom === undefined && this._layersMaxZoom && this.getZoom() > this._layersMaxZoom) {
					this.setZoom(this._layersMaxZoom);
				}
				if (this.options.minZoom === undefined && this._layersMinZoom && this.getZoom() < this._layersMinZoom) {
					this.setZoom(this._layersMinZoom);
				}
			}
		});

		/*
   * @class LayerGroup
   * @aka L.LayerGroup
   * @inherits Layer
   *
   * Used to group several layers and handle them as one. If you add it to the map,
   * any layers added or removed from the group will be added/removed on the map as
   * well. Extends `Layer`.
   *
   * @example
   *
   * ```js
   * L.layerGroup([marker1, marker2])
   * 	.addLayer(polyline)
   * 	.addTo(map);
   * ```
   */

		var LayerGroup = Layer.extend({

			initialize: function initialize(layers) {
				this._layers = {};

				var i, len;

				if (layers) {
					for (i = 0, len = layers.length; i < len; i++) {
						this.addLayer(layers[i]);
					}
				}
			},

			// @method addLayer(layer: Layer): this
			// Adds the given layer to the group.
			addLayer: function addLayer(layer) {
				var id = this.getLayerId(layer);

				this._layers[id] = layer;

				if (this._map) {
					this._map.addLayer(layer);
				}

				return this;
			},

			// @method removeLayer(layer: Layer): this
			// Removes the given layer from the group.
			// @alternative
			// @method removeLayer(id: Number): this
			// Removes the layer with the given internal ID from the group.
			removeLayer: function removeLayer(layer) {
				var id = layer in this._layers ? layer : this.getLayerId(layer);

				if (this._map && this._layers[id]) {
					this._map.removeLayer(this._layers[id]);
				}

				delete this._layers[id];

				return this;
			},

			// @method hasLayer(layer: Layer): Boolean
			// Returns `true` if the given layer is currently added to the group.
			// @alternative
			// @method hasLayer(id: Number): Boolean
			// Returns `true` if the given internal ID is currently added to the group.
			hasLayer: function hasLayer(layer) {
				return !!layer && (layer in this._layers || this.getLayerId(layer) in this._layers);
			},

			// @method clearLayers(): this
			// Removes all the layers from the group.
			clearLayers: function clearLayers() {
				for (var i in this._layers) {
					this.removeLayer(this._layers[i]);
				}
				return this;
			},

			// @method invoke(methodName: String, …): this
			// Calls `methodName` on every layer contained in this group, passing any
			// additional parameters. Has no effect if the layers contained do not
			// implement `methodName`.
			invoke: function invoke(methodName) {
				var args = Array.prototype.slice.call(arguments, 1),
				    i,
				    layer;

				for (i in this._layers) {
					layer = this._layers[i];

					if (layer[methodName]) {
						layer[methodName].apply(layer, args);
					}
				}

				return this;
			},

			onAdd: function onAdd(map) {
				for (var i in this._layers) {
					map.addLayer(this._layers[i]);
				}
			},

			onRemove: function onRemove(map) {
				for (var i in this._layers) {
					map.removeLayer(this._layers[i]);
				}
			},

			// @method eachLayer(fn: Function, context?: Object): this
			// Iterates over the layers of the group, optionally specifying context of the iterator function.
			// ```js
			// group.eachLayer(function (layer) {
			// 	layer.bindPopup('Hello');
			// });
			// ```
			eachLayer: function eachLayer(method, context) {
				for (var i in this._layers) {
					method.call(context, this._layers[i]);
				}
				return this;
			},

			// @method getLayer(id: Number): Layer
			// Returns the layer with the given internal ID.
			getLayer: function getLayer(id) {
				return this._layers[id];
			},

			// @method getLayers(): Layer[]
			// Returns an array of all the layers added to the group.
			getLayers: function getLayers() {
				var layers = [];

				for (var i in this._layers) {
					layers.push(this._layers[i]);
				}
				return layers;
			},

			// @method setZIndex(zIndex: Number): this
			// Calls `setZIndex` on every layer contained in this group, passing the z-index.
			setZIndex: function setZIndex(zIndex) {
				return this.invoke('setZIndex', zIndex);
			},

			// @method getLayerId(layer: Layer): Number
			// Returns the internal ID for a layer
			getLayerId: function getLayerId(layer) {
				return stamp(layer);
			}
		});

		// @factory L.layerGroup(layers?: Layer[])
		// Create a layer group, optionally given an initial set of layers.
		var layerGroup = function layerGroup(layers) {
			return new LayerGroup(layers);
		};

		/*
   * @class FeatureGroup
   * @aka L.FeatureGroup
   * @inherits LayerGroup
   *
   * Extended `LayerGroup` that makes it easier to do the same thing to all its member layers:
   *  * [`bindPopup`](#layer-bindpopup) binds a popup to all of the layers at once (likewise with [`bindTooltip`](#layer-bindtooltip))
   *  * Events are propagated to the `FeatureGroup`, so if the group has an event
   * handler, it will handle events from any of the layers. This includes mouse events
   * and custom events.
   *  * Has `layeradd` and `layerremove` events
   *
   * @example
   *
   * ```js
   * L.featureGroup([marker1, marker2, polyline])
   * 	.bindPopup('Hello world!')
   * 	.on('click', function() { alert('Clicked on a member of the group!'); })
   * 	.addTo(map);
   * ```
   */

		var FeatureGroup = LayerGroup.extend({

			addLayer: function addLayer(layer) {
				if (this.hasLayer(layer)) {
					return this;
				}

				layer.addEventParent(this);

				LayerGroup.prototype.addLayer.call(this, layer);

				// @event layeradd: LayerEvent
				// Fired when a layer is added to this `FeatureGroup`
				return this.fire('layeradd', { layer: layer });
			},

			removeLayer: function removeLayer(layer) {
				if (!this.hasLayer(layer)) {
					return this;
				}
				if (layer in this._layers) {
					layer = this._layers[layer];
				}

				layer.removeEventParent(this);

				LayerGroup.prototype.removeLayer.call(this, layer);

				// @event layerremove: LayerEvent
				// Fired when a layer is removed from this `FeatureGroup`
				return this.fire('layerremove', { layer: layer });
			},

			// @method setStyle(style: Path options): this
			// Sets the given path options to each layer of the group that has a `setStyle` method.
			setStyle: function setStyle(style) {
				return this.invoke('setStyle', style);
			},

			// @method bringToFront(): this
			// Brings the layer group to the top of all other layers
			bringToFront: function bringToFront() {
				return this.invoke('bringToFront');
			},

			// @method bringToBack(): this
			// Brings the layer group to the top of all other layers
			bringToBack: function bringToBack() {
				return this.invoke('bringToBack');
			},

			// @method getBounds(): LatLngBounds
			// Returns the LatLngBounds of the Feature Group (created from bounds and coordinates of its children).
			getBounds: function getBounds() {
				var bounds = new LatLngBounds();

				for (var id in this._layers) {
					var layer = this._layers[id];
					bounds.extend(layer.getBounds ? layer.getBounds() : layer.getLatLng());
				}
				return bounds;
			}
		});

		// @factory L.featureGroup(layers: Layer[])
		// Create a feature group, optionally given an initial set of layers.
		var featureGroup = function featureGroup(layers) {
			return new FeatureGroup(layers);
		};

		/*
   * @class Icon
   * @aka L.Icon
   *
   * Represents an icon to provide when creating a marker.
   *
   * @example
   *
   * ```js
   * var myIcon = L.icon({
   *     iconUrl: 'my-icon.png',
   *     iconRetinaUrl: 'my-icon@2x.png',
   *     iconSize: [38, 95],
   *     iconAnchor: [22, 94],
   *     popupAnchor: [-3, -76],
   *     shadowUrl: 'my-icon-shadow.png',
   *     shadowRetinaUrl: 'my-icon-shadow@2x.png',
   *     shadowSize: [68, 95],
   *     shadowAnchor: [22, 94]
   * });
   *
   * L.marker([50.505, 30.57], {icon: myIcon}).addTo(map);
   * ```
   *
   * `L.Icon.Default` extends `L.Icon` and is the blue icon Leaflet uses for markers by default.
   *
   */

		var Icon = Class.extend({

			/* @section
    * @aka Icon options
    *
    * @option iconUrl: String = null
    * **(required)** The URL to the icon image (absolute or relative to your script path).
    *
    * @option iconRetinaUrl: String = null
    * The URL to a retina sized version of the icon image (absolute or relative to your
    * script path). Used for Retina screen devices.
    *
    * @option iconSize: Point = null
    * Size of the icon image in pixels.
    *
    * @option iconAnchor: Point = null
    * The coordinates of the "tip" of the icon (relative to its top left corner). The icon
    * will be aligned so that this point is at the marker's geographical location. Centered
    * by default if size is specified, also can be set in CSS with negative margins.
    *
    * @option popupAnchor: Point = null
    * The coordinates of the point from which popups will "open", relative to the icon anchor.
    *
    * @option shadowUrl: String = null
    * The URL to the icon shadow image. If not specified, no shadow image will be created.
    *
    * @option shadowRetinaUrl: String = null
    *
    * @option shadowSize: Point = null
    * Size of the shadow image in pixels.
    *
    * @option shadowAnchor: Point = null
    * The coordinates of the "tip" of the shadow (relative to its top left corner) (the same
    * as iconAnchor if not specified).
    *
    * @option className: String = ''
    * A custom class name to assign to both icon and shadow images. Empty by default.
    */

			initialize: function initialize(options) {
				setOptions(this, options);
			},

			// @method createIcon(oldIcon?: HTMLElement): HTMLElement
			// Called internally when the icon has to be shown, returns a `<img>` HTML element
			// styled according to the options.
			createIcon: function createIcon(oldIcon) {
				return this._createIcon('icon', oldIcon);
			},

			// @method createShadow(oldIcon?: HTMLElement): HTMLElement
			// As `createIcon`, but for the shadow beneath it.
			createShadow: function createShadow(oldIcon) {
				return this._createIcon('shadow', oldIcon);
			},

			_createIcon: function _createIcon(name, oldIcon) {
				var src = this._getIconUrl(name);

				if (!src) {
					if (name === 'icon') {
						throw new Error('iconUrl not set in Icon options (see the docs).');
					}
					return null;
				}

				var img = this._createImg(src, oldIcon && oldIcon.tagName === 'IMG' ? oldIcon : null);
				this._setIconStyles(img, name);

				return img;
			},

			_setIconStyles: function _setIconStyles(img, name) {
				var options = this.options;
				var sizeOption = options[name + 'Size'];

				if (typeof sizeOption === 'number') {
					sizeOption = [sizeOption, sizeOption];
				}

				var size = toPoint(sizeOption),
				    anchor = toPoint(name === 'shadow' && options.shadowAnchor || options.iconAnchor || size && size.divideBy(2, true));

				img.className = 'leaflet-marker-' + name + ' ' + (options.className || '');

				if (anchor) {
					img.style.marginLeft = -anchor.x + 'px';
					img.style.marginTop = -anchor.y + 'px';
				}

				if (size) {
					img.style.width = size.x + 'px';
					img.style.height = size.y + 'px';
				}
			},

			_createImg: function _createImg(src, el) {
				el = el || document.createElement('img');
				el.src = src;
				return el;
			},

			_getIconUrl: function _getIconUrl(name) {
				return retina && this.options[name + 'RetinaUrl'] || this.options[name + 'Url'];
			}
		});

		// @factory L.icon(options: Icon options)
		// Creates an icon instance with the given options.
		function icon(options) {
			return new Icon(options);
		}

		/*
   * @miniclass Icon.Default (Icon)
   * @aka L.Icon.Default
   * @section
   *
   * A trivial subclass of `Icon`, represents the icon to use in `Marker`s when
   * no icon is specified. Points to the blue marker image distributed with Leaflet
   * releases.
   *
   * In order to customize the default icon, just change the properties of `L.Icon.Default.prototype.options`
   * (which is a set of `Icon options`).
   *
   * If you want to _completely_ replace the default icon, override the
   * `L.Marker.prototype.options.icon` with your own icon instead.
   */

		var IconDefault = Icon.extend({

			options: {
				iconUrl: 'marker-icon.png',
				iconRetinaUrl: 'marker-icon-2x.png',
				shadowUrl: 'marker-shadow.png',
				iconSize: [25, 41],
				iconAnchor: [12, 41],
				popupAnchor: [1, -34],
				tooltipAnchor: [16, -28],
				shadowSize: [41, 41]
			},

			_getIconUrl: function _getIconUrl(name) {
				if (!IconDefault.imagePath) {
					// Deprecated, backwards-compatibility only
					IconDefault.imagePath = this._detectIconPath();
				}

				// @option imagePath: String
				// `Icon.Default` will try to auto-detect the absolute location of the
				// blue icon images. If you are placing these images in a non-standard
				// way, set this option to point to the right absolute path.
				return (this.options.imagePath || IconDefault.imagePath) + Icon.prototype._getIconUrl.call(this, name);
			},

			_detectIconPath: function _detectIconPath() {
				var el = create$1('div', 'leaflet-default-icon-path', document.body);
				var path = getStyle(el, 'background-image') || getStyle(el, 'backgroundImage'); // IE8

				document.body.removeChild(el);

				if (path === null || path.indexOf('url') !== 0) {
					path = '';
				} else {
					path = path.replace(/^url\([\"\']?/, '').replace(/marker-icon\.png[\"\']?\)$/, '');
				}

				return path;
			}
		});

		/*
   * L.Handler.MarkerDrag is used internally by L.Marker to make the markers draggable.
   */

		/* @namespace Marker
   * @section Interaction handlers
   *
   * Interaction handlers are properties of a marker instance that allow you to control interaction behavior in runtime, enabling or disabling certain features such as dragging (see `Handler` methods). Example:
   *
   * ```js
   * marker.dragging.disable();
   * ```
   *
   * @property dragging: Handler
   * Marker dragging handler (by both mouse and touch). Only valid when the marker is on the map (Otherwise set [`marker.options.draggable`](#marker-draggable)).
   */

		var MarkerDrag = Handler.extend({
			initialize: function initialize(marker) {
				this._marker = marker;
			},

			addHooks: function addHooks() {
				var icon = this._marker._icon;

				if (!this._draggable) {
					this._draggable = new Draggable(icon, icon, true);
				}

				this._draggable.on({
					dragstart: this._onDragStart,
					drag: this._onDrag,
					dragend: this._onDragEnd
				}, this).enable();

				addClass(icon, 'leaflet-marker-draggable');
			},

			removeHooks: function removeHooks() {
				this._draggable.off({
					dragstart: this._onDragStart,
					drag: this._onDrag,
					dragend: this._onDragEnd
				}, this).disable();

				if (this._marker._icon) {
					removeClass(this._marker._icon, 'leaflet-marker-draggable');
				}
			},

			moved: function moved() {
				return this._draggable && this._draggable._moved;
			},

			_onDragStart: function _onDragStart() {
				// @section Dragging events
				// @event dragstart: Event
				// Fired when the user starts dragging the marker.

				// @event movestart: Event
				// Fired when the marker starts moving (because of dragging).

				this._oldLatLng = this._marker.getLatLng();
				this._marker.closePopup().fire('movestart').fire('dragstart');
			},

			_onDrag: function _onDrag(e) {
				var marker = this._marker,
				    shadow = marker._shadow,
				    iconPos = getPosition(marker._icon),
				    latlng = marker._map.layerPointToLatLng(iconPos);

				// update shadow position
				if (shadow) {
					setPosition(shadow, iconPos);
				}

				marker._latlng = latlng;
				e.latlng = latlng;
				e.oldLatLng = this._oldLatLng;

				// @event drag: Event
				// Fired repeatedly while the user drags the marker.
				marker.fire('move', e).fire('drag', e);
			},

			_onDragEnd: function _onDragEnd(e) {
				// @event dragend: DragEndEvent
				// Fired when the user stops dragging the marker.

				// @event moveend: Event
				// Fired when the marker stops moving (because of dragging).
				delete this._oldLatLng;
				this._marker.fire('moveend').fire('dragend', e);
			}
		});

		/*
   * @class Marker
   * @inherits Interactive layer
   * @aka L.Marker
   * L.Marker is used to display clickable/draggable icons on the map. Extends `Layer`.
   *
   * @example
   *
   * ```js
   * L.marker([50.5, 30.5]).addTo(map);
   * ```
   */

		var Marker = Layer.extend({

			// @section
			// @aka Marker options
			options: {
				// @option icon: Icon = *
				// Icon instance to use for rendering the marker.
				// See [Icon documentation](#L.Icon) for details on how to customize the marker icon.
				// If not specified, a common instance of `L.Icon.Default` is used.
				icon: new IconDefault(),

				// Option inherited from "Interactive layer" abstract class
				interactive: true,

				// @option draggable: Boolean = false
				// Whether the marker is draggable with mouse/touch or not.
				draggable: false,

				// @option keyboard: Boolean = true
				// Whether the marker can be tabbed to with a keyboard and clicked by pressing enter.
				keyboard: true,

				// @option title: String = ''
				// Text for the browser tooltip that appear on marker hover (no tooltip by default).
				title: '',

				// @option alt: String = ''
				// Text for the `alt` attribute of the icon image (useful for accessibility).
				alt: '',

				// @option zIndexOffset: Number = 0
				// By default, marker images zIndex is set automatically based on its latitude. Use this option if you want to put the marker on top of all others (or below), specifying a high value like `1000` (or high negative value, respectively).
				zIndexOffset: 0,

				// @option opacity: Number = 1.0
				// The opacity of the marker.
				opacity: 1,

				// @option riseOnHover: Boolean = false
				// If `true`, the marker will get on top of others when you hover the mouse over it.
				riseOnHover: false,

				// @option riseOffset: Number = 250
				// The z-index offset used for the `riseOnHover` feature.
				riseOffset: 250,

				// @option pane: String = 'markerPane'
				// `Map pane` where the markers icon will be added.
				pane: 'markerPane',

				// @option bubblingMouseEvents: Boolean = false
				// When `true`, a mouse event on this marker will trigger the same event on the map
				// (unless [`L.DomEvent.stopPropagation`](#domevent-stoppropagation) is used).
				bubblingMouseEvents: false
			},

			/* @section
    *
    * In addition to [shared layer methods](#Layer) like `addTo()` and `remove()` and [popup methods](#Popup) like bindPopup() you can also use the following methods:
    */

			initialize: function initialize(latlng, options) {
				setOptions(this, options);
				this._latlng = toLatLng(latlng);
			},

			onAdd: function onAdd(map) {
				this._zoomAnimated = this._zoomAnimated && map.options.markerZoomAnimation;

				if (this._zoomAnimated) {
					map.on('zoomanim', this._animateZoom, this);
				}

				this._initIcon();
				this.update();
			},

			onRemove: function onRemove(map) {
				if (this.dragging && this.dragging.enabled()) {
					this.options.draggable = true;
					this.dragging.removeHooks();
				}
				delete this.dragging;

				if (this._zoomAnimated) {
					map.off('zoomanim', this._animateZoom, this);
				}

				this._removeIcon();
				this._removeShadow();
			},

			getEvents: function getEvents() {
				return {
					zoom: this.update,
					viewreset: this.update
				};
			},

			// @method getLatLng: LatLng
			// Returns the current geographical position of the marker.
			getLatLng: function getLatLng() {
				return this._latlng;
			},

			// @method setLatLng(latlng: LatLng): this
			// Changes the marker position to the given point.
			setLatLng: function setLatLng(latlng) {
				var oldLatLng = this._latlng;
				this._latlng = toLatLng(latlng);
				this.update();

				// @event move: Event
				// Fired when the marker is moved via [`setLatLng`](#marker-setlatlng) or by [dragging](#marker-dragging). Old and new coordinates are included in event arguments as `oldLatLng`, `latlng`.
				return this.fire('move', { oldLatLng: oldLatLng, latlng: this._latlng });
			},

			// @method setZIndexOffset(offset: Number): this
			// Changes the [zIndex offset](#marker-zindexoffset) of the marker.
			setZIndexOffset: function setZIndexOffset(offset) {
				this.options.zIndexOffset = offset;
				return this.update();
			},

			// @method setIcon(icon: Icon): this
			// Changes the marker icon.
			setIcon: function setIcon(icon) {

				this.options.icon = icon;

				if (this._map) {
					this._initIcon();
					this.update();
				}

				if (this._popup) {
					this.bindPopup(this._popup, this._popup.options);
				}

				return this;
			},

			getElement: function getElement() {
				return this._icon;
			},

			update: function update() {

				if (this._icon) {
					var pos = this._map.latLngToLayerPoint(this._latlng).round();
					this._setPos(pos);
				}

				return this;
			},

			_initIcon: function _initIcon() {
				var options = this.options,
				    classToAdd = 'leaflet-zoom-' + (this._zoomAnimated ? 'animated' : 'hide');

				var icon = options.icon.createIcon(this._icon),
				    addIcon = false;

				// if we're not reusing the icon, remove the old one and init new one
				if (icon !== this._icon) {
					if (this._icon) {
						this._removeIcon();
					}
					addIcon = true;

					if (options.title) {
						icon.title = options.title;
					}
					if (options.alt) {
						icon.alt = options.alt;
					}
				}

				addClass(icon, classToAdd);

				if (options.keyboard) {
					icon.tabIndex = '0';
				}

				this._icon = icon;

				if (options.riseOnHover) {
					this.on({
						mouseover: this._bringToFront,
						mouseout: this._resetZIndex
					});
				}

				var newShadow = options.icon.createShadow(this._shadow),
				    addShadow = false;

				if (newShadow !== this._shadow) {
					this._removeShadow();
					addShadow = true;
				}

				if (newShadow) {
					addClass(newShadow, classToAdd);
					newShadow.alt = '';
				}
				this._shadow = newShadow;

				if (options.opacity < 1) {
					this._updateOpacity();
				}

				if (addIcon) {
					this.getPane().appendChild(this._icon);
				}
				this._initInteraction();
				if (newShadow && addShadow) {
					this.getPane('shadowPane').appendChild(this._shadow);
				}
			},

			_removeIcon: function _removeIcon() {
				if (this.options.riseOnHover) {
					this.off({
						mouseover: this._bringToFront,
						mouseout: this._resetZIndex
					});
				}

				_remove(this._icon);
				this.removeInteractiveTarget(this._icon);

				this._icon = null;
			},

			_removeShadow: function _removeShadow() {
				if (this._shadow) {
					_remove(this._shadow);
				}
				this._shadow = null;
			},

			_setPos: function _setPos(pos) {
				setPosition(this._icon, pos);

				if (this._shadow) {
					setPosition(this._shadow, pos);
				}

				this._zIndex = pos.y + this.options.zIndexOffset;

				this._resetZIndex();
			},

			_updateZIndex: function _updateZIndex(offset) {
				this._icon.style.zIndex = this._zIndex + offset;
			},

			_animateZoom: function _animateZoom(opt) {
				var pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center).round();

				this._setPos(pos);
			},

			_initInteraction: function _initInteraction() {

				if (!this.options.interactive) {
					return;
				}

				addClass(this._icon, 'leaflet-interactive');

				this.addInteractiveTarget(this._icon);

				if (MarkerDrag) {
					var draggable = this.options.draggable;
					if (this.dragging) {
						draggable = this.dragging.enabled();
						this.dragging.disable();
					}

					this.dragging = new MarkerDrag(this);

					if (draggable) {
						this.dragging.enable();
					}
				}
			},

			// @method setOpacity(opacity: Number): this
			// Changes the opacity of the marker.
			setOpacity: function setOpacity(opacity) {
				this.options.opacity = opacity;
				if (this._map) {
					this._updateOpacity();
				}

				return this;
			},

			_updateOpacity: function _updateOpacity() {
				var opacity = this.options.opacity;

				_setOpacity(this._icon, opacity);

				if (this._shadow) {
					_setOpacity(this._shadow, opacity);
				}
			},

			_bringToFront: function _bringToFront() {
				this._updateZIndex(this.options.riseOffset);
			},

			_resetZIndex: function _resetZIndex() {
				this._updateZIndex(0);
			},

			_getPopupAnchor: function _getPopupAnchor() {
				return this.options.icon.options.popupAnchor || [0, 0];
			},

			_getTooltipAnchor: function _getTooltipAnchor() {
				return this.options.icon.options.tooltipAnchor || [0, 0];
			}
		});

		// factory L.marker(latlng: LatLng, options? : Marker options)

		// @factory L.marker(latlng: LatLng, options? : Marker options)
		// Instantiates a Marker object given a geographical point and optionally an options object.
		function marker(latlng, options) {
			return new Marker(latlng, options);
		}

		/*
   * @class Path
   * @aka L.Path
   * @inherits Interactive layer
   *
   * An abstract class that contains options and constants shared between vector
   * overlays (Polygon, Polyline, Circle). Do not use it directly. Extends `Layer`.
   */

		var Path = Layer.extend({

			// @section
			// @aka Path options
			options: {
				// @option stroke: Boolean = true
				// Whether to draw stroke along the path. Set it to `false` to disable borders on polygons or circles.
				stroke: true,

				// @option color: String = '#3388ff'
				// Stroke color
				color: '#3388ff',

				// @option weight: Number = 3
				// Stroke width in pixels
				weight: 3,

				// @option opacity: Number = 1.0
				// Stroke opacity
				opacity: 1,

				// @option lineCap: String= 'round'
				// A string that defines [shape to be used at the end](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-linecap) of the stroke.
				lineCap: 'round',

				// @option lineJoin: String = 'round'
				// A string that defines [shape to be used at the corners](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-linejoin) of the stroke.
				lineJoin: 'round',

				// @option dashArray: String = null
				// A string that defines the stroke [dash pattern](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-dasharray). Doesn't work on `Canvas`-powered layers in [some old browsers](https://developer.mozilla.org/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility).
				dashArray: null,

				// @option dashOffset: String = null
				// A string that defines the [distance into the dash pattern to start the dash](https://developer.mozilla.org/docs/Web/SVG/Attribute/stroke-dashoffset). Doesn't work on `Canvas`-powered layers in [some old browsers](https://developer.mozilla.org/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility).
				dashOffset: null,

				// @option fill: Boolean = depends
				// Whether to fill the path with color. Set it to `false` to disable filling on polygons or circles.
				fill: false,

				// @option fillColor: String = *
				// Fill color. Defaults to the value of the [`color`](#path-color) option
				fillColor: null,

				// @option fillOpacity: Number = 0.2
				// Fill opacity.
				fillOpacity: 0.2,

				// @option fillRule: String = 'evenodd'
				// A string that defines [how the inside of a shape](https://developer.mozilla.org/docs/Web/SVG/Attribute/fill-rule) is determined.
				fillRule: 'evenodd',

				// className: '',

				// Option inherited from "Interactive layer" abstract class
				interactive: true,

				// @option bubblingMouseEvents: Boolean = true
				// When `true`, a mouse event on this path will trigger the same event on the map
				// (unless [`L.DomEvent.stopPropagation`](#domevent-stoppropagation) is used).
				bubblingMouseEvents: true
			},

			beforeAdd: function beforeAdd(map) {
				// Renderer is set here because we need to call renderer.getEvents
				// before this.getEvents.
				this._renderer = map.getRenderer(this);
			},

			onAdd: function onAdd() {
				this._renderer._initPath(this);
				this._reset();
				this._renderer._addPath(this);
			},

			onRemove: function onRemove() {
				this._renderer._removePath(this);
			},

			// @method redraw(): this
			// Redraws the layer. Sometimes useful after you changed the coordinates that the path uses.
			redraw: function redraw() {
				if (this._map) {
					this._renderer._updatePath(this);
				}
				return this;
			},

			// @method setStyle(style: Path options): this
			// Changes the appearance of a Path based on the options in the `Path options` object.
			setStyle: function setStyle(style) {
				setOptions(this, style);
				if (this._renderer) {
					this._renderer._updateStyle(this);
				}
				return this;
			},

			// @method bringToFront(): this
			// Brings the layer to the top of all path layers.
			bringToFront: function bringToFront() {
				if (this._renderer) {
					this._renderer._bringToFront(this);
				}
				return this;
			},

			// @method bringToBack(): this
			// Brings the layer to the bottom of all path layers.
			bringToBack: function bringToBack() {
				if (this._renderer) {
					this._renderer._bringToBack(this);
				}
				return this;
			},

			getElement: function getElement() {
				return this._path;
			},

			_reset: function _reset() {
				// defined in child classes
				this._project();
				this._update();
			},

			_clickTolerance: function _clickTolerance() {
				// used when doing hit detection for Canvas layers
				return (this.options.stroke ? this.options.weight / 2 : 0) + (touch ? 10 : 0);
			}
		});

		/*
   * @class CircleMarker
   * @aka L.CircleMarker
   * @inherits Path
   *
   * A circle of a fixed size with radius specified in pixels. Extends `Path`.
   */

		var CircleMarker = Path.extend({

			// @section
			// @aka CircleMarker options
			options: {
				fill: true,

				// @option radius: Number = 10
				// Radius of the circle marker, in pixels
				radius: 10
			},

			initialize: function initialize(latlng, options) {
				setOptions(this, options);
				this._latlng = toLatLng(latlng);
				this._radius = this.options.radius;
			},

			// @method setLatLng(latLng: LatLng): this
			// Sets the position of a circle marker to a new location.
			setLatLng: function setLatLng(latlng) {
				this._latlng = toLatLng(latlng);
				this.redraw();
				return this.fire('move', { latlng: this._latlng });
			},

			// @method getLatLng(): LatLng
			// Returns the current geographical position of the circle marker
			getLatLng: function getLatLng() {
				return this._latlng;
			},

			// @method setRadius(radius: Number): this
			// Sets the radius of a circle marker. Units are in pixels.
			setRadius: function setRadius(radius) {
				this.options.radius = this._radius = radius;
				return this.redraw();
			},

			// @method getRadius(): Number
			// Returns the current radius of the circle
			getRadius: function getRadius() {
				return this._radius;
			},

			setStyle: function setStyle(options) {
				var radius = options && options.radius || this._radius;
				Path.prototype.setStyle.call(this, options);
				this.setRadius(radius);
				return this;
			},

			_project: function _project() {
				this._point = this._map.latLngToLayerPoint(this._latlng);
				this._updateBounds();
			},

			_updateBounds: function _updateBounds() {
				var r = this._radius,
				    r2 = this._radiusY || r,
				    w = this._clickTolerance(),
				    p = [r + w, r2 + w];
				this._pxBounds = new Bounds(this._point.subtract(p), this._point.add(p));
			},

			_update: function _update() {
				if (this._map) {
					this._updatePath();
				}
			},

			_updatePath: function _updatePath() {
				this._renderer._updateCircle(this);
			},

			_empty: function _empty() {
				return this._radius && !this._renderer._bounds.intersects(this._pxBounds);
			},

			// Needed by the `Canvas` renderer for interactivity
			_containsPoint: function _containsPoint(p) {
				return p.distanceTo(this._point) <= this._radius + this._clickTolerance();
			}
		});

		// @factory L.circleMarker(latlng: LatLng, options?: CircleMarker options)
		// Instantiates a circle marker object given a geographical point, and an optional options object.
		function circleMarker(latlng, options) {
			return new CircleMarker(latlng, options);
		}

		/*
   * @class Circle
   * @aka L.Circle
   * @inherits CircleMarker
   *
   * A class for drawing circle overlays on a map. Extends `CircleMarker`.
   *
   * It's an approximation and starts to diverge from a real circle closer to poles (due to projection distortion).
   *
   * @example
   *
   * ```js
   * L.circle([50.5, 30.5], {radius: 200}).addTo(map);
   * ```
   */

		var Circle = CircleMarker.extend({

			initialize: function initialize(latlng, options, legacyOptions) {
				if (typeof options === 'number') {
					// Backwards compatibility with 0.7.x factory (latlng, radius, options?)
					options = extend({}, legacyOptions, { radius: options });
				}
				setOptions(this, options);
				this._latlng = toLatLng(latlng);

				if (isNaN(this.options.radius)) {
					throw new Error('Circle radius cannot be NaN');
				}

				// @section
				// @aka Circle options
				// @option radius: Number; Radius of the circle, in meters.
				this._mRadius = this.options.radius;
			},

			// @method setRadius(radius: Number): this
			// Sets the radius of a circle. Units are in meters.
			setRadius: function setRadius(radius) {
				this._mRadius = radius;
				return this.redraw();
			},

			// @method getRadius(): Number
			// Returns the current radius of a circle. Units are in meters.
			getRadius: function getRadius() {
				return this._mRadius;
			},

			// @method getBounds(): LatLngBounds
			// Returns the `LatLngBounds` of the path.
			getBounds: function getBounds() {
				var half = [this._radius, this._radiusY || this._radius];

				return new LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(half)), this._map.layerPointToLatLng(this._point.add(half)));
			},

			setStyle: Path.prototype.setStyle,

			_project: function _project() {

				var lng = this._latlng.lng,
				    lat = this._latlng.lat,
				    map = this._map,
				    crs = map.options.crs;

				if (crs.distance === Earth.distance) {
					var d = Math.PI / 180,
					    latR = this._mRadius / Earth.R / d,
					    top = map.project([lat + latR, lng]),
					    bottom = map.project([lat - latR, lng]),
					    p = top.add(bottom).divideBy(2),
					    lat2 = map.unproject(p).lat,
					    lngR = Math.acos((Math.cos(latR * d) - Math.sin(lat * d) * Math.sin(lat2 * d)) / (Math.cos(lat * d) * Math.cos(lat2 * d))) / d;

					if (isNaN(lngR) || lngR === 0) {
						lngR = latR / Math.cos(Math.PI / 180 * lat); // Fallback for edge case, #2425
					}

					this._point = p.subtract(map.getPixelOrigin());
					this._radius = isNaN(lngR) ? 0 : Math.max(Math.round(p.x - map.project([lat2, lng - lngR]).x), 1);
					this._radiusY = Math.max(Math.round(p.y - top.y), 1);
				} else {
					var latlng2 = crs.unproject(crs.project(this._latlng).subtract([this._mRadius, 0]));

					this._point = map.latLngToLayerPoint(this._latlng);
					this._radius = this._point.x - map.latLngToLayerPoint(latlng2).x;
				}

				this._updateBounds();
			}
		});

		// @factory L.circle(latlng: LatLng, options?: Circle options)
		// Instantiates a circle object given a geographical point, and an options object
		// which contains the circle radius.
		// @alternative
		// @factory L.circle(latlng: LatLng, radius: Number, options?: Circle options)
		// Obsolete way of instantiating a circle, for compatibility with 0.7.x code.
		// Do not use in new applications or plugins.
		function circle(latlng, options, legacyOptions) {
			return new Circle(latlng, options, legacyOptions);
		}

		/*
   * @class Polyline
   * @aka L.Polyline
   * @inherits Path
   *
   * A class for drawing polyline overlays on a map. Extends `Path`.
   *
   * @example
   *
   * ```js
   * // create a red polyline from an array of LatLng points
   * var latlngs = [
   * 	[45.51, -122.68],
   * 	[37.77, -122.43],
   * 	[34.04, -118.2]
   * ];
   *
   * var polyline = L.polyline(latlngs, {color: 'red'}).addTo(map);
   *
   * // zoom the map to the polyline
   * map.fitBounds(polyline.getBounds());
   * ```
   *
   * You can also pass a multi-dimensional array to represent a `MultiPolyline` shape:
   *
   * ```js
   * // create a red polyline from an array of arrays of LatLng points
   * var latlngs = [
   * 	[[45.51, -122.68],
   * 	 [37.77, -122.43],
   * 	 [34.04, -118.2]],
   * 	[[40.78, -73.91],
   * 	 [41.83, -87.62],
   * 	 [32.76, -96.72]]
   * ];
   * ```
   */

		var Polyline = Path.extend({

			// @section
			// @aka Polyline options
			options: {
				// @option smoothFactor: Number = 1.0
				// How much to simplify the polyline on each zoom level. More means
				// better performance and smoother look, and less means more accurate representation.
				smoothFactor: 1.0,

				// @option noClip: Boolean = false
				// Disable polyline clipping.
				noClip: false
			},

			initialize: function initialize(latlngs, options) {
				setOptions(this, options);
				this._setLatLngs(latlngs);
			},

			// @method getLatLngs(): LatLng[]
			// Returns an array of the points in the path, or nested arrays of points in case of multi-polyline.
			getLatLngs: function getLatLngs() {
				return this._latlngs;
			},

			// @method setLatLngs(latlngs: LatLng[]): this
			// Replaces all the points in the polyline with the given array of geographical points.
			setLatLngs: function setLatLngs(latlngs) {
				this._setLatLngs(latlngs);
				return this.redraw();
			},

			// @method isEmpty(): Boolean
			// Returns `true` if the Polyline has no LatLngs.
			isEmpty: function isEmpty() {
				return !this._latlngs.length;
			},

			closestLayerPoint: function closestLayerPoint(p) {
				var minDistance = Infinity,
				    minPoint = null,
				    closest = _sqClosestPointOnSegment,
				    p1,
				    p2;

				for (var j = 0, jLen = this._parts.length; j < jLen; j++) {
					var points = this._parts[j];

					for (var i = 1, len = points.length; i < len; i++) {
						p1 = points[i - 1];
						p2 = points[i];

						var sqDist = closest(p, p1, p2, true);

						if (sqDist < minDistance) {
							minDistance = sqDist;
							minPoint = closest(p, p1, p2);
						}
					}
				}
				if (minPoint) {
					minPoint.distance = Math.sqrt(minDistance);
				}
				return minPoint;
			},

			// @method getCenter(): LatLng
			// Returns the center ([centroid](http://en.wikipedia.org/wiki/Centroid)) of the polyline.
			getCenter: function getCenter() {
				// throws error when not yet added to map as this center calculation requires projected coordinates
				if (!this._map) {
					throw new Error('Must add layer to map before using getCenter()');
				}

				var i,
				    halfDist,
				    segDist,
				    dist,
				    p1,
				    p2,
				    ratio,
				    points = this._rings[0],
				    len = points.length;

				if (!len) {
					return null;
				}

				// polyline centroid algorithm; only uses the first ring if there are multiple

				for (i = 0, halfDist = 0; i < len - 1; i++) {
					halfDist += points[i].distanceTo(points[i + 1]) / 2;
				}

				// The line is so small in the current view that all points are on the same pixel.
				if (halfDist === 0) {
					return this._map.layerPointToLatLng(points[0]);
				}

				for (i = 0, dist = 0; i < len - 1; i++) {
					p1 = points[i];
					p2 = points[i + 1];
					segDist = p1.distanceTo(p2);
					dist += segDist;

					if (dist > halfDist) {
						ratio = (dist - halfDist) / segDist;
						return this._map.layerPointToLatLng([p2.x - ratio * (p2.x - p1.x), p2.y - ratio * (p2.y - p1.y)]);
					}
				}
			},

			// @method getBounds(): LatLngBounds
			// Returns the `LatLngBounds` of the path.
			getBounds: function getBounds() {
				return this._bounds;
			},

			// @method addLatLng(latlng: LatLng, latlngs? LatLng[]): this
			// Adds a given point to the polyline. By default, adds to the first ring of
			// the polyline in case of a multi-polyline, but can be overridden by passing
			// a specific ring as a LatLng array (that you can earlier access with [`getLatLngs`](#polyline-getlatlngs)).
			addLatLng: function addLatLng(latlng, latlngs) {
				latlngs = latlngs || this._defaultShape();
				latlng = toLatLng(latlng);
				latlngs.push(latlng);
				this._bounds.extend(latlng);
				return this.redraw();
			},

			_setLatLngs: function _setLatLngs(latlngs) {
				this._bounds = new LatLngBounds();
				this._latlngs = this._convertLatLngs(latlngs);
			},

			_defaultShape: function _defaultShape() {
				return isFlat(this._latlngs) ? this._latlngs : this._latlngs[0];
			},

			// recursively convert latlngs input into actual LatLng instances; calculate bounds along the way
			_convertLatLngs: function _convertLatLngs(latlngs) {
				var result = [],
				    flat = isFlat(latlngs);

				for (var i = 0, len = latlngs.length; i < len; i++) {
					if (flat) {
						result[i] = toLatLng(latlngs[i]);
						this._bounds.extend(result[i]);
					} else {
						result[i] = this._convertLatLngs(latlngs[i]);
					}
				}

				return result;
			},

			_project: function _project() {
				var pxBounds = new Bounds();
				this._rings = [];
				this._projectLatlngs(this._latlngs, this._rings, pxBounds);

				var w = this._clickTolerance(),
				    p = new Point(w, w);

				if (this._bounds.isValid() && pxBounds.isValid()) {
					pxBounds.min._subtract(p);
					pxBounds.max._add(p);
					this._pxBounds = pxBounds;
				}
			},

			// recursively turns latlngs into a set of rings with projected coordinates
			_projectLatlngs: function _projectLatlngs(latlngs, result, projectedBounds) {
				var flat = latlngs[0] instanceof LatLng,
				    len = latlngs.length,
				    i,
				    ring;

				if (flat) {
					ring = [];
					for (i = 0; i < len; i++) {
						ring[i] = this._map.latLngToLayerPoint(latlngs[i]);
						projectedBounds.extend(ring[i]);
					}
					result.push(ring);
				} else {
					for (i = 0; i < len; i++) {
						this._projectLatlngs(latlngs[i], result, projectedBounds);
					}
				}
			},

			// clip polyline by renderer bounds so that we have less to render for performance
			_clipPoints: function _clipPoints() {
				var bounds = this._renderer._bounds;

				this._parts = [];
				if (!this._pxBounds || !this._pxBounds.intersects(bounds)) {
					return;
				}

				if (this.options.noClip) {
					this._parts = this._rings;
					return;
				}

				var parts = this._parts,
				    i,
				    j,
				    k,
				    len,
				    len2,
				    segment,
				    points;

				for (i = 0, k = 0, len = this._rings.length; i < len; i++) {
					points = this._rings[i];

					for (j = 0, len2 = points.length; j < len2 - 1; j++) {
						segment = clipSegment(points[j], points[j + 1], bounds, j, true);

						if (!segment) {
							continue;
						}

						parts[k] = parts[k] || [];
						parts[k].push(segment[0]);

						// if segment goes out of screen, or it's the last one, it's the end of the line part
						if (segment[1] !== points[j + 1] || j === len2 - 2) {
							parts[k].push(segment[1]);
							k++;
						}
					}
				}
			},

			// simplify each clipped part of the polyline for performance
			_simplifyPoints: function _simplifyPoints() {
				var parts = this._parts,
				    tolerance = this.options.smoothFactor;

				for (var i = 0, len = parts.length; i < len; i++) {
					parts[i] = simplify(parts[i], tolerance);
				}
			},

			_update: function _update() {
				if (!this._map) {
					return;
				}

				this._clipPoints();
				this._simplifyPoints();
				this._updatePath();
			},

			_updatePath: function _updatePath() {
				this._renderer._updatePoly(this);
			},

			// Needed by the `Canvas` renderer for interactivity
			_containsPoint: function _containsPoint(p, closed) {
				var i,
				    j,
				    k,
				    len,
				    len2,
				    part,
				    w = this._clickTolerance();

				if (!this._pxBounds || !this._pxBounds.contains(p)) {
					return false;
				}

				// hit detection for polylines
				for (i = 0, len = this._parts.length; i < len; i++) {
					part = this._parts[i];

					for (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {
						if (!closed && j === 0) {
							continue;
						}

						if (pointToSegmentDistance(p, part[k], part[j]) <= w) {
							return true;
						}
					}
				}
				return false;
			}
		});

		// @factory L.polyline(latlngs: LatLng[], options?: Polyline options)
		// Instantiates a polyline object given an array of geographical points and
		// optionally an options object. You can create a `Polyline` object with
		// multiple separate lines (`MultiPolyline`) by passing an array of arrays
		// of geographic points.
		function polyline(latlngs, options) {
			return new Polyline(latlngs, options);
		}

		// Retrocompat. Allow plugins to support Leaflet versions before and after 1.1.
		Polyline._flat = _flat;

		/*
   * @class Polygon
   * @aka L.Polygon
   * @inherits Polyline
   *
   * A class for drawing polygon overlays on a map. Extends `Polyline`.
   *
   * Note that points you pass when creating a polygon shouldn't have an additional last point equal to the first one — it's better to filter out such points.
   *
   *
   * @example
   *
   * ```js
   * // create a red polygon from an array of LatLng points
   * var latlngs = [[37, -109.05],[41, -109.03],[41, -102.05],[37, -102.04]];
   *
   * var polygon = L.polygon(latlngs, {color: 'red'}).addTo(map);
   *
   * // zoom the map to the polygon
   * map.fitBounds(polygon.getBounds());
   * ```
   *
   * You can also pass an array of arrays of latlngs, with the first array representing the outer shape and the other arrays representing holes in the outer shape:
   *
   * ```js
   * var latlngs = [
   *   [[37, -109.05],[41, -109.03],[41, -102.05],[37, -102.04]], // outer ring
   *   [[37.29, -108.58],[40.71, -108.58],[40.71, -102.50],[37.29, -102.50]] // hole
   * ];
   * ```
   *
   * Additionally, you can pass a multi-dimensional array to represent a MultiPolygon shape.
   *
   * ```js
   * var latlngs = [
   *   [ // first polygon
   *     [[37, -109.05],[41, -109.03],[41, -102.05],[37, -102.04]], // outer ring
   *     [[37.29, -108.58],[40.71, -108.58],[40.71, -102.50],[37.29, -102.50]] // hole
   *   ],
   *   [ // second polygon
   *     [[41, -111.03],[45, -111.04],[45, -104.05],[41, -104.05]]
   *   ]
   * ];
   * ```
   */

		var Polygon = Polyline.extend({

			options: {
				fill: true
			},

			isEmpty: function isEmpty() {
				return !this._latlngs.length || !this._latlngs[0].length;
			},

			getCenter: function getCenter() {
				// throws error when not yet added to map as this center calculation requires projected coordinates
				if (!this._map) {
					throw new Error('Must add layer to map before using getCenter()');
				}

				var i,
				    j,
				    p1,
				    p2,
				    f,
				    area,
				    x,
				    y,
				    center,
				    points = this._rings[0],
				    len = points.length;

				if (!len) {
					return null;
				}

				// polygon centroid algorithm; only uses the first ring if there are multiple

				area = x = y = 0;

				for (i = 0, j = len - 1; i < len; j = i++) {
					p1 = points[i];
					p2 = points[j];

					f = p1.y * p2.x - p2.y * p1.x;
					x += (p1.x + p2.x) * f;
					y += (p1.y + p2.y) * f;
					area += f * 3;
				}

				if (area === 0) {
					// Polygon is so small that all points are on same pixel.
					center = points[0];
				} else {
					center = [x / area, y / area];
				}
				return this._map.layerPointToLatLng(center);
			},

			_convertLatLngs: function _convertLatLngs(latlngs) {
				var result = Polyline.prototype._convertLatLngs.call(this, latlngs),
				    len = result.length;

				// remove last point if it equals first one
				if (len >= 2 && result[0] instanceof LatLng && result[0].equals(result[len - 1])) {
					result.pop();
				}
				return result;
			},

			_setLatLngs: function _setLatLngs(latlngs) {
				Polyline.prototype._setLatLngs.call(this, latlngs);
				if (isFlat(this._latlngs)) {
					this._latlngs = [this._latlngs];
				}
			},

			_defaultShape: function _defaultShape() {
				return isFlat(this._latlngs[0]) ? this._latlngs[0] : this._latlngs[0][0];
			},

			_clipPoints: function _clipPoints() {
				// polygons need a different clipping algorithm so we redefine that

				var bounds = this._renderer._bounds,
				    w = this.options.weight,
				    p = new Point(w, w);

				// increase clip padding by stroke width to avoid stroke on clip edges
				bounds = new Bounds(bounds.min.subtract(p), bounds.max.add(p));

				this._parts = [];
				if (!this._pxBounds || !this._pxBounds.intersects(bounds)) {
					return;
				}

				if (this.options.noClip) {
					this._parts = this._rings;
					return;
				}

				for (var i = 0, len = this._rings.length, clipped; i < len; i++) {
					clipped = clipPolygon(this._rings[i], bounds, true);
					if (clipped.length) {
						this._parts.push(clipped);
					}
				}
			},

			_updatePath: function _updatePath() {
				this._renderer._updatePoly(this, true);
			},

			// Needed by the `Canvas` renderer for interactivity
			_containsPoint: function _containsPoint(p) {
				var inside = false,
				    part,
				    p1,
				    p2,
				    i,
				    j,
				    k,
				    len,
				    len2;

				if (!this._pxBounds.contains(p)) {
					return false;
				}

				// ray casting algorithm for detecting if point is in polygon
				for (i = 0, len = this._parts.length; i < len; i++) {
					part = this._parts[i];

					for (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {
						p1 = part[j];
						p2 = part[k];

						if (p1.y > p.y !== p2.y > p.y && p.x < (p2.x - p1.x) * (p.y - p1.y) / (p2.y - p1.y) + p1.x) {
							inside = !inside;
						}
					}
				}

				// also check if it's on polygon stroke
				return inside || Polyline.prototype._containsPoint.call(this, p, true);
			}

		});

		// @factory L.polygon(latlngs: LatLng[], options?: Polyline options)
		function polygon(latlngs, options) {
			return new Polygon(latlngs, options);
		}

		/*
   * @class GeoJSON
   * @aka L.GeoJSON
   * @inherits FeatureGroup
   *
   * Represents a GeoJSON object or an array of GeoJSON objects. Allows you to parse
   * GeoJSON data and display it on the map. Extends `FeatureGroup`.
   *
   * @example
   *
   * ```js
   * L.geoJSON(data, {
   * 	style: function (feature) {
   * 		return {color: feature.properties.color};
   * 	}
   * }).bindPopup(function (layer) {
   * 	return layer.feature.properties.description;
   * }).addTo(map);
   * ```
   */

		var GeoJSON = FeatureGroup.extend({

			/* @section
    * @aka GeoJSON options
    *
    * @option pointToLayer: Function = *
    * A `Function` defining how GeoJSON points spawn Leaflet layers. It is internally
    * called when data is added, passing the GeoJSON point feature and its `LatLng`.
    * The default is to spawn a default `Marker`:
    * ```js
    * function(geoJsonPoint, latlng) {
    * 	return L.marker(latlng);
    * }
    * ```
    *
    * @option style: Function = *
    * A `Function` defining the `Path options` for styling GeoJSON lines and polygons,
    * called internally when data is added.
    * The default value is to not override any defaults:
    * ```js
    * function (geoJsonFeature) {
    * 	return {}
    * }
    * ```
    *
    * @option onEachFeature: Function = *
    * A `Function` that will be called once for each created `Feature`, after it has
    * been created and styled. Useful for attaching events and popups to features.
    * The default is to do nothing with the newly created layers:
    * ```js
    * function (feature, layer) {}
    * ```
    *
    * @option filter: Function = *
    * A `Function` that will be used to decide whether to include a feature or not.
    * The default is to include all features:
    * ```js
    * function (geoJsonFeature) {
    * 	return true;
    * }
    * ```
    * Note: dynamically changing the `filter` option will have effect only on newly
    * added data. It will _not_ re-evaluate already included features.
    *
    * @option coordsToLatLng: Function = *
    * A `Function` that will be used for converting GeoJSON coordinates to `LatLng`s.
    * The default is the `coordsToLatLng` static method.
    */

			initialize: function initialize(geojson, options) {
				setOptions(this, options);

				this._layers = {};

				if (geojson) {
					this.addData(geojson);
				}
			},

			// @method addData( <GeoJSON> data ): this
			// Adds a GeoJSON object to the layer.
			addData: function addData(geojson) {
				var features = isArray(geojson) ? geojson : geojson.features,
				    i,
				    len,
				    feature;

				if (features) {
					for (i = 0, len = features.length; i < len; i++) {
						// only add this if geometry or geometries are set and not null
						feature = features[i];
						if (feature.geometries || feature.geometry || feature.features || feature.coordinates) {
							this.addData(feature);
						}
					}
					return this;
				}

				var options = this.options;

				if (options.filter && !options.filter(geojson)) {
					return this;
				}

				var layer = geometryToLayer(geojson, options);
				if (!layer) {
					return this;
				}
				layer.feature = asFeature(geojson);

				layer.defaultOptions = layer.options;
				this.resetStyle(layer);

				if (options.onEachFeature) {
					options.onEachFeature(geojson, layer);
				}

				return this.addLayer(layer);
			},

			// @method resetStyle( <Path> layer ): this
			// Resets the given vector layer's style to the original GeoJSON style, useful for resetting style after hover events.
			resetStyle: function resetStyle(layer) {
				// reset any custom styles
				layer.options = extend({}, layer.defaultOptions);
				this._setLayerStyle(layer, this.options.style);
				return this;
			},

			// @method setStyle( <Function> style ): this
			// Changes styles of GeoJSON vector layers with the given style function.
			setStyle: function setStyle(style) {
				return this.eachLayer(function (layer) {
					this._setLayerStyle(layer, style);
				}, this);
			},

			_setLayerStyle: function _setLayerStyle(layer, style) {
				if (typeof style === 'function') {
					style = style(layer.feature);
				}
				if (layer.setStyle) {
					layer.setStyle(style);
				}
			}
		});

		// @section
		// There are several static functions which can be called without instantiating L.GeoJSON:

		// @function geometryToLayer(featureData: Object, options?: GeoJSON options): Layer
		// Creates a `Layer` from a given GeoJSON feature. Can use a custom
		// [`pointToLayer`](#geojson-pointtolayer) and/or [`coordsToLatLng`](#geojson-coordstolatlng)
		// functions if provided as options.
		function geometryToLayer(geojson, options) {

			var geometry = geojson.type === 'Feature' ? geojson.geometry : geojson,
			    coords = geometry ? geometry.coordinates : null,
			    layers = [],
			    pointToLayer = options && options.pointToLayer,
			    _coordsToLatLng = options && options.coordsToLatLng || coordsToLatLng,
			    latlng,
			    latlngs,
			    i,
			    len;

			if (!coords && !geometry) {
				return null;
			}

			switch (geometry.type) {
				case 'Point':
					latlng = _coordsToLatLng(coords);
					return pointToLayer ? pointToLayer(geojson, latlng) : new Marker(latlng);

				case 'MultiPoint':
					for (i = 0, len = coords.length; i < len; i++) {
						latlng = _coordsToLatLng(coords[i]);
						layers.push(pointToLayer ? pointToLayer(geojson, latlng) : new Marker(latlng));
					}
					return new FeatureGroup(layers);

				case 'LineString':
				case 'MultiLineString':
					latlngs = coordsToLatLngs(coords, geometry.type === 'LineString' ? 0 : 1, _coordsToLatLng);
					return new Polyline(latlngs, options);

				case 'Polygon':
				case 'MultiPolygon':
					latlngs = coordsToLatLngs(coords, geometry.type === 'Polygon' ? 1 : 2, _coordsToLatLng);
					return new Polygon(latlngs, options);

				case 'GeometryCollection':
					for (i = 0, len = geometry.geometries.length; i < len; i++) {
						var layer = geometryToLayer({
							geometry: geometry.geometries[i],
							type: 'Feature',
							properties: geojson.properties
						}, options);

						if (layer) {
							layers.push(layer);
						}
					}
					return new FeatureGroup(layers);

				default:
					throw new Error('Invalid GeoJSON object.');
			}
		}

		// @function coordsToLatLng(coords: Array): LatLng
		// Creates a `LatLng` object from an array of 2 numbers (longitude, latitude)
		// or 3 numbers (longitude, latitude, altitude) used in GeoJSON for points.
		function coordsToLatLng(coords) {
			return new LatLng(coords[1], coords[0], coords[2]);
		}

		// @function coordsToLatLngs(coords: Array, levelsDeep?: Number, coordsToLatLng?: Function): Array
		// Creates a multidimensional array of `LatLng`s from a GeoJSON coordinates array.
		// `levelsDeep` specifies the nesting level (0 is for an array of points, 1 for an array of arrays of points, etc., 0 by default).
		// Can use a custom [`coordsToLatLng`](#geojson-coordstolatlng) function.
		function coordsToLatLngs(coords, levelsDeep, _coordsToLatLng) {
			var latlngs = [];

			for (var i = 0, len = coords.length, latlng; i < len; i++) {
				latlng = levelsDeep ? coordsToLatLngs(coords[i], levelsDeep - 1, _coordsToLatLng) : (_coordsToLatLng || coordsToLatLng)(coords[i]);

				latlngs.push(latlng);
			}

			return latlngs;
		}

		// @function latLngToCoords(latlng: LatLng, precision?: Number): Array
		// Reverse of [`coordsToLatLng`](#geojson-coordstolatlng)
		function latLngToCoords(latlng, precision) {
			precision = typeof precision === 'number' ? precision : 6;
			return latlng.alt !== undefined ? [formatNum(latlng.lng, precision), formatNum(latlng.lat, precision), formatNum(latlng.alt, precision)] : [formatNum(latlng.lng, precision), formatNum(latlng.lat, precision)];
		}

		// @function latLngsToCoords(latlngs: Array, levelsDeep?: Number, closed?: Boolean): Array
		// Reverse of [`coordsToLatLngs`](#geojson-coordstolatlngs)
		// `closed` determines whether the first point should be appended to the end of the array to close the feature, only used when `levelsDeep` is 0. False by default.
		function latLngsToCoords(latlngs, levelsDeep, closed, precision) {
			var coords = [];

			for (var i = 0, len = latlngs.length; i < len; i++) {
				coords.push(levelsDeep ? latLngsToCoords(latlngs[i], levelsDeep - 1, closed, precision) : latLngToCoords(latlngs[i], precision));
			}

			if (!levelsDeep && closed) {
				coords.push(coords[0]);
			}

			return coords;
		}

		function getFeature(layer, newGeometry) {
			return layer.feature ? extend({}, layer.feature, { geometry: newGeometry }) : asFeature(newGeometry);
		}

		// @function asFeature(geojson: Object): Object
		// Normalize GeoJSON geometries/features into GeoJSON features.
		function asFeature(geojson) {
			if (geojson.type === 'Feature' || geojson.type === 'FeatureCollection') {
				return geojson;
			}

			return {
				type: 'Feature',
				properties: {},
				geometry: geojson
			};
		}

		var PointToGeoJSON = {
			toGeoJSON: function toGeoJSON(precision) {
				return getFeature(this, {
					type: 'Point',
					coordinates: latLngToCoords(this.getLatLng(), precision)
				});
			}
		};

		// @namespace Marker
		// @method toGeoJSON(): Object
		// Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the marker (as a GeoJSON `Point` Feature).
		Marker.include(PointToGeoJSON);

		// @namespace CircleMarker
		// @method toGeoJSON(): Object
		// Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the circle marker (as a GeoJSON `Point` Feature).
		Circle.include(PointToGeoJSON);
		CircleMarker.include(PointToGeoJSON);

		// @namespace Polyline
		// @method toGeoJSON(): Object
		// Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the polyline (as a GeoJSON `LineString` or `MultiLineString` Feature).
		Polyline.include({
			toGeoJSON: function toGeoJSON(precision) {
				var multi = !isFlat(this._latlngs);

				var coords = latLngsToCoords(this._latlngs, multi ? 1 : 0, false, precision);

				return getFeature(this, {
					type: (multi ? 'Multi' : '') + 'LineString',
					coordinates: coords
				});
			}
		});

		// @namespace Polygon
		// @method toGeoJSON(): Object
		// Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the polygon (as a GeoJSON `Polygon` or `MultiPolygon` Feature).
		Polygon.include({
			toGeoJSON: function toGeoJSON(precision) {
				var holes = !isFlat(this._latlngs),
				    multi = holes && !isFlat(this._latlngs[0]);

				var coords = latLngsToCoords(this._latlngs, multi ? 2 : holes ? 1 : 0, true, precision);

				if (!holes) {
					coords = [coords];
				}

				return getFeature(this, {
					type: (multi ? 'Multi' : '') + 'Polygon',
					coordinates: coords
				});
			}
		});

		// @namespace LayerGroup
		LayerGroup.include({
			toMultiPoint: function toMultiPoint(precision) {
				var coords = [];

				this.eachLayer(function (layer) {
					coords.push(layer.toGeoJSON(precision).geometry.coordinates);
				});

				return getFeature(this, {
					type: 'MultiPoint',
					coordinates: coords
				});
			},

			// @method toGeoJSON(): Object
			// Returns a [`GeoJSON`](http://en.wikipedia.org/wiki/GeoJSON) representation of the layer group (as a GeoJSON `FeatureCollection`, `GeometryCollection`, or `MultiPoint`).
			toGeoJSON: function toGeoJSON(precision) {

				var type = this.feature && this.feature.geometry && this.feature.geometry.type;

				if (type === 'MultiPoint') {
					return this.toMultiPoint(precision);
				}

				var isGeometryCollection = type === 'GeometryCollection',
				    jsons = [];

				this.eachLayer(function (layer) {
					if (layer.toGeoJSON) {
						var json = layer.toGeoJSON(precision);
						if (isGeometryCollection) {
							jsons.push(json.geometry);
						} else {
							var feature = asFeature(json);
							// Squash nested feature collections
							if (feature.type === 'FeatureCollection') {
								jsons.push.apply(jsons, feature.features);
							} else {
								jsons.push(feature);
							}
						}
					}
				});

				if (isGeometryCollection) {
					return getFeature(this, {
						geometries: jsons,
						type: 'GeometryCollection'
					});
				}

				return {
					type: 'FeatureCollection',
					features: jsons
				};
			}
		});

		// @namespace GeoJSON
		// @factory L.geoJSON(geojson?: Object, options?: GeoJSON options)
		// Creates a GeoJSON layer. Optionally accepts an object in
		// [GeoJSON format](http://geojson.org/geojson-spec.html) to display on the map
		// (you can alternatively add it later with `addData` method) and an `options` object.
		function geoJSON(geojson, options) {
			return new GeoJSON(geojson, options);
		}

		// Backward compatibility.
		var geoJson = geoJSON;

		/*
   * @class ImageOverlay
   * @aka L.ImageOverlay
   * @inherits Interactive layer
   *
   * Used to load and display a single image over specific bounds of the map. Extends `Layer`.
   *
   * @example
   *
   * ```js
   * var imageUrl = 'http://www.lib.utexas.edu/maps/historical/newark_nj_1922.jpg',
   * 	imageBounds = [[40.712216, -74.22655], [40.773941, -74.12544]];
   * L.imageOverlay(imageUrl, imageBounds).addTo(map);
   * ```
   */

		var ImageOverlay = Layer.extend({

			// @section
			// @aka ImageOverlay options
			options: {
				// @option opacity: Number = 1.0
				// The opacity of the image overlay.
				opacity: 1,

				// @option alt: String = ''
				// Text for the `alt` attribute of the image (useful for accessibility).
				alt: '',

				// @option interactive: Boolean = false
				// If `true`, the image overlay will emit [mouse events](#interactive-layer) when clicked or hovered.
				interactive: false,

				// @option crossOrigin: Boolean = false
				// If true, the image will have its crossOrigin attribute set to ''. This is needed if you want to access image pixel data.
				crossOrigin: false,

				// @option errorOverlayUrl: String = ''
				// URL to the overlay image to show in place of the overlay that failed to load.
				errorOverlayUrl: '',

				// @option zIndex: Number = 1
				// The explicit [zIndex](https://developer.mozilla.org/docs/Web/CSS/CSS_Positioning/Understanding_z_index) of the tile layer.
				zIndex: 1,

				// @option className: String = ''
				// A custom class name to assign to the image. Empty by default.
				className: ''
			},

			initialize: function initialize(url, bounds, options) {
				// (String, LatLngBounds, Object)
				this._url = url;
				this._bounds = toLatLngBounds(bounds);

				setOptions(this, options);
			},

			onAdd: function onAdd() {
				if (!this._image) {
					this._initImage();

					if (this.options.opacity < 1) {
						this._updateOpacity();
					}
				}

				if (this.options.interactive) {
					addClass(this._image, 'leaflet-interactive');
					this.addInteractiveTarget(this._image);
				}

				this.getPane().appendChild(this._image);
				this._reset();
			},

			onRemove: function onRemove() {
				_remove(this._image);
				if (this.options.interactive) {
					this.removeInteractiveTarget(this._image);
				}
			},

			// @method setOpacity(opacity: Number): this
			// Sets the opacity of the overlay.
			setOpacity: function setOpacity(opacity) {
				this.options.opacity = opacity;

				if (this._image) {
					this._updateOpacity();
				}
				return this;
			},

			setStyle: function setStyle(styleOpts) {
				if (styleOpts.opacity) {
					this.setOpacity(styleOpts.opacity);
				}
				return this;
			},

			// @method bringToFront(): this
			// Brings the layer to the top of all overlays.
			bringToFront: function bringToFront() {
				if (this._map) {
					toFront(this._image);
				}
				return this;
			},

			// @method bringToBack(): this
			// Brings the layer to the bottom of all overlays.
			bringToBack: function bringToBack() {
				if (this._map) {
					toBack(this._image);
				}
				return this;
			},

			// @method setUrl(url: String): this
			// Changes the URL of the image.
			setUrl: function setUrl(url) {
				this._url = url;

				if (this._image) {
					this._image.src = url;
				}
				return this;
			},

			// @method setBounds(bounds: LatLngBounds): this
			// Update the bounds that this ImageOverlay covers
			setBounds: function setBounds(bounds) {
				this._bounds = toLatLngBounds(bounds);

				if (this._map) {
					this._reset();
				}
				return this;
			},

			getEvents: function getEvents() {
				var events = {
					zoom: this._reset,
					viewreset: this._reset
				};

				if (this._zoomAnimated) {
					events.zoomanim = this._animateZoom;
				}

				return events;
			},

			// @method: setZIndex(value: Number) : this
			// Changes the [zIndex](#imageoverlay-zindex) of the image overlay.
			setZIndex: function setZIndex(value) {
				this.options.zIndex = value;
				this._updateZIndex();
				return this;
			},

			// @method getBounds(): LatLngBounds
			// Get the bounds that this ImageOverlay covers
			getBounds: function getBounds() {
				return this._bounds;
			},

			// @method getElement(): HTMLElement
			// Returns the instance of [`HTMLImageElement`](https://developer.mozilla.org/docs/Web/API/HTMLImageElement)
			// used by this overlay.
			getElement: function getElement() {
				return this._image;
			},

			_initImage: function _initImage() {
				var img = this._image = create$1('img', 'leaflet-image-layer ' + (this._zoomAnimated ? 'leaflet-zoom-animated' : '') + (this.options.className || ''));

				img.onselectstart = falseFn;
				img.onmousemove = falseFn;

				// @event load: Event
				// Fired when the ImageOverlay layer has loaded its image
				img.onload = bind(this.fire, this, 'load');
				img.onerror = bind(this._overlayOnError, this, 'error');

				if (this.options.crossOrigin) {
					img.crossOrigin = '';
				}

				if (this.options.zIndex) {
					this._updateZIndex();
				}

				img.src = this._url;
				img.alt = this.options.alt;
			},

			_animateZoom: function _animateZoom(e) {
				var scale = this._map.getZoomScale(e.zoom),
				    offset = this._map._latLngBoundsToNewLayerBounds(this._bounds, e.zoom, e.center).min;

				setTransform(this._image, offset, scale);
			},

			_reset: function _reset() {
				var image = this._image,
				    bounds = new Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()), this._map.latLngToLayerPoint(this._bounds.getSouthEast())),
				    size = bounds.getSize();

				setPosition(image, bounds.min);

				image.style.width = size.x + 'px';
				image.style.height = size.y + 'px';
			},

			_updateOpacity: function _updateOpacity() {
				_setOpacity(this._image, this.options.opacity);
			},

			_updateZIndex: function _updateZIndex() {
				if (this._image && this.options.zIndex !== undefined && this.options.zIndex !== null) {
					this._image.style.zIndex = this.options.zIndex;
				}
			},

			_overlayOnError: function _overlayOnError() {
				// @event error: Event
				// Fired when the ImageOverlay layer has loaded its image
				this.fire('error');

				var errorUrl = this.options.errorOverlayUrl;
				if (errorUrl && this._url !== errorUrl) {
					this._url = errorUrl;
					this._image.src = errorUrl;
				}
			}
		});

		// @factory L.imageOverlay(imageUrl: String, bounds: LatLngBounds, options?: ImageOverlay options)
		// Instantiates an image overlay object given the URL of the image and the
		// geographical bounds it is tied to.
		var imageOverlay = function imageOverlay(url, bounds, options) {
			return new ImageOverlay(url, bounds, options);
		};

		/*
   * @class VideoOverlay
   * @aka L.VideoOverlay
   * @inherits ImageOverlay
   *
   * Used to load and display a video player over specific bounds of the map. Extends `ImageOverlay`.
   *
   * A video overlay uses the [`<video>`](https://developer.mozilla.org/docs/Web/HTML/Element/video)
   * HTML5 element.
   *
   * @example
   *
   * ```js
   * var videoUrl = 'https://www.mapbox.com/bites/00188/patricia_nasa.webm',
   * 	videoBounds = [[ 32, -130], [ 13, -100]];
   * L.VideoOverlay(videoUrl, videoBounds ).addTo(map);
   * ```
   */

		var VideoOverlay = ImageOverlay.extend({

			// @section
			// @aka VideoOverlay options
			options: {
				// @option autoplay: Boolean = true
				// Whether the video starts playing automatically when loaded.
				autoplay: true,

				// @option loop: Boolean = true
				// Whether the video will loop back to the beginning when played.
				loop: true
			},

			_initImage: function _initImage() {
				var wasElementSupplied = this._url.tagName === 'VIDEO';
				var vid = this._image = wasElementSupplied ? this._url : create$1('video');

				vid.class = vid.class || '';
				vid.class += 'leaflet-image-layer ' + (this._zoomAnimated ? 'leaflet-zoom-animated' : '');

				vid.onselectstart = falseFn;
				vid.onmousemove = falseFn;

				// @event load: Event
				// Fired when the video has finished loading the first frame
				vid.onloadeddata = bind(this.fire, this, 'load');

				if (wasElementSupplied) {
					return;
				}

				if (!isArray(this._url)) {
					this._url = [this._url];
				}

				vid.autoplay = !!this.options.autoplay;
				vid.loop = !!this.options.loop;
				for (var i = 0; i < this._url.length; i++) {
					var source = create$1('source');
					source.src = this._url[i];
					vid.appendChild(source);
				}
			}

			// @method getElement(): HTMLVideoElement
			// Returns the instance of [`HTMLVideoElement`](https://developer.mozilla.org/docs/Web/API/HTMLVideoElement)
			// used by this overlay.
		});

		// @factory L.videoOverlay(video: String|Array|HTMLVideoElement, bounds: LatLngBounds, options?: VideoOverlay options)
		// Instantiates an image overlay object given the URL of the video (or array of URLs, or even a video element) and the
		// geographical bounds it is tied to.

		function videoOverlay(video, bounds, options) {
			return new VideoOverlay(video, bounds, options);
		}

		/*
   * @class DivOverlay
   * @inherits Layer
   * @aka L.DivOverlay
   * Base model for L.Popup and L.Tooltip. Inherit from it for custom popup like plugins.
   */

		// @namespace DivOverlay
		var DivOverlay = Layer.extend({

			// @section
			// @aka DivOverlay options
			options: {
				// @option offset: Point = Point(0, 7)
				// The offset of the popup position. Useful to control the anchor
				// of the popup when opening it on some overlays.
				offset: [0, 7],

				// @option className: String = ''
				// A custom CSS class name to assign to the popup.
				className: '',

				// @option pane: String = 'popupPane'
				// `Map pane` where the popup will be added.
				pane: 'popupPane'
			},

			initialize: function initialize(options, source) {
				setOptions(this, options);

				this._source = source;
			},

			onAdd: function onAdd(map) {
				this._zoomAnimated = map._zoomAnimated;

				if (!this._container) {
					this._initLayout();
				}

				if (map._fadeAnimated) {
					_setOpacity(this._container, 0);
				}

				clearTimeout(this._removeTimeout);
				this.getPane().appendChild(this._container);
				this.update();

				if (map._fadeAnimated) {
					_setOpacity(this._container, 1);
				}

				this.bringToFront();
			},

			onRemove: function onRemove(map) {
				if (map._fadeAnimated) {
					_setOpacity(this._container, 0);
					this._removeTimeout = setTimeout(bind(_remove, undefined, this._container), 200);
				} else {
					_remove(this._container);
				}
			},

			// @namespace Popup
			// @method getLatLng: LatLng
			// Returns the geographical point of popup.
			getLatLng: function getLatLng() {
				return this._latlng;
			},

			// @method setLatLng(latlng: LatLng): this
			// Sets the geographical point where the popup will open.
			setLatLng: function setLatLng(latlng) {
				this._latlng = toLatLng(latlng);
				if (this._map) {
					this._updatePosition();
					this._adjustPan();
				}
				return this;
			},

			// @method getContent: String|HTMLElement
			// Returns the content of the popup.
			getContent: function getContent() {
				return this._content;
			},

			// @method setContent(htmlContent: String|HTMLElement|Function): this
			// Sets the HTML content of the popup. If a function is passed the source layer will be passed to the function. The function should return a `String` or `HTMLElement` to be used in the popup.
			setContent: function setContent(content) {
				this._content = content;
				this.update();
				return this;
			},

			// @method getElement: String|HTMLElement
			// Alias for [getContent()](#popup-getcontent)
			getElement: function getElement() {
				return this._container;
			},

			// @method update: null
			// Updates the popup content, layout and position. Useful for updating the popup after something inside changed, e.g. image loaded.
			update: function update() {
				if (!this._map) {
					return;
				}

				this._container.style.visibility = 'hidden';

				this._updateContent();
				this._updateLayout();
				this._updatePosition();

				this._container.style.visibility = '';

				this._adjustPan();
			},

			getEvents: function getEvents() {
				var events = {
					zoom: this._updatePosition,
					viewreset: this._updatePosition
				};

				if (this._zoomAnimated) {
					events.zoomanim = this._animateZoom;
				}
				return events;
			},

			// @method isOpen: Boolean
			// Returns `true` when the popup is visible on the map.
			isOpen: function isOpen() {
				return !!this._map && this._map.hasLayer(this);
			},

			// @method bringToFront: this
			// Brings this popup in front of other popups (in the same map pane).
			bringToFront: function bringToFront() {
				if (this._map) {
					toFront(this._container);
				}
				return this;
			},

			// @method bringToBack: this
			// Brings this popup to the back of other popups (in the same map pane).
			bringToBack: function bringToBack() {
				if (this._map) {
					toBack(this._container);
				}
				return this;
			},

			_updateContent: function _updateContent() {
				if (!this._content) {
					return;
				}

				var node = this._contentNode;
				var content = typeof this._content === 'function' ? this._content(this._source || this) : this._content;

				if (typeof content === 'string') {
					node.innerHTML = content;
				} else {
					while (node.hasChildNodes()) {
						node.removeChild(node.firstChild);
					}
					node.appendChild(content);
				}
				this.fire('contentupdate');
			},

			_updatePosition: function _updatePosition() {
				if (!this._map) {
					return;
				}

				var pos = this._map.latLngToLayerPoint(this._latlng),
				    offset = toPoint(this.options.offset),
				    anchor = this._getAnchor();

				if (this._zoomAnimated) {
					setPosition(this._container, pos.add(anchor));
				} else {
					offset = offset.add(pos).add(anchor);
				}

				var bottom = this._containerBottom = -offset.y,
				    left = this._containerLeft = -Math.round(this._containerWidth / 2) + offset.x;

				// bottom position the popup in case the height of the popup changes (images loading etc)
				this._container.style.bottom = bottom + 'px';
				this._container.style.left = left + 'px';
			},

			_getAnchor: function _getAnchor() {
				return [0, 0];
			}

		});

		/*
   * @class Popup
   * @inherits DivOverlay
   * @aka L.Popup
   * Used to open popups in certain places of the map. Use [Map.openPopup](#map-openpopup) to
   * open popups while making sure that only one popup is open at one time
   * (recommended for usability), or use [Map.addLayer](#map-addlayer) to open as many as you want.
   *
   * @example
   *
   * If you want to just bind a popup to marker click and then open it, it's really easy:
   *
   * ```js
   * marker.bindPopup(popupContent).openPopup();
   * ```
   * Path overlays like polylines also have a `bindPopup` method.
   * Here's a more complicated way to open a popup on a map:
   *
   * ```js
   * var popup = L.popup()
   * 	.setLatLng(latlng)
   * 	.setContent('<p>Hello world!<br />This is a nice popup.</p>')
   * 	.openOn(map);
   * ```
   */

		// @namespace Popup
		var Popup = DivOverlay.extend({

			// @section
			// @aka Popup options
			options: {
				// @option maxWidth: Number = 300
				// Max width of the popup, in pixels.
				maxWidth: 300,

				// @option minWidth: Number = 50
				// Min width of the popup, in pixels.
				minWidth: 50,

				// @option maxHeight: Number = null
				// If set, creates a scrollable container of the given height
				// inside a popup if its content exceeds it.
				maxHeight: null,

				// @option autoPan: Boolean = true
				// Set it to `false` if you don't want the map to do panning animation
				// to fit the opened popup.
				autoPan: true,

				// @option autoPanPaddingTopLeft: Point = null
				// The margin between the popup and the top left corner of the map
				// view after autopanning was performed.
				autoPanPaddingTopLeft: null,

				// @option autoPanPaddingBottomRight: Point = null
				// The margin between the popup and the bottom right corner of the map
				// view after autopanning was performed.
				autoPanPaddingBottomRight: null,

				// @option autoPanPadding: Point = Point(5, 5)
				// Equivalent of setting both top left and bottom right autopan padding to the same value.
				autoPanPadding: [5, 5],

				// @option keepInView: Boolean = false
				// Set it to `true` if you want to prevent users from panning the popup
				// off of the screen while it is open.
				keepInView: false,

				// @option closeButton: Boolean = true
				// Controls the presence of a close button in the popup.
				closeButton: true,

				// @option autoClose: Boolean = true
				// Set it to `false` if you want to override the default behavior of
				// the popup closing when another popup is opened.
				autoClose: true,

				// @option closeOnClick: Boolean = *
				// Set it if you want to override the default behavior of the popup closing when user clicks
				// on the map. Defaults to the map's [`closePopupOnClick`](#map-closepopuponclick) option.

				// @option className: String = ''
				// A custom CSS class name to assign to the popup.
				className: ''
			},

			// @namespace Popup
			// @method openOn(map: Map): this
			// Adds the popup to the map and closes the previous one. The same as `map.openPopup(popup)`.
			openOn: function openOn(map) {
				map.openPopup(this);
				return this;
			},

			onAdd: function onAdd(map) {
				DivOverlay.prototype.onAdd.call(this, map);

				// @namespace Map
				// @section Popup events
				// @event popupopen: PopupEvent
				// Fired when a popup is opened in the map
				map.fire('popupopen', { popup: this });

				if (this._source) {
					// @namespace Layer
					// @section Popup events
					// @event popupopen: PopupEvent
					// Fired when a popup bound to this layer is opened
					this._source.fire('popupopen', { popup: this }, true);
					// For non-path layers, we toggle the popup when clicking
					// again the layer, so prevent the map to reopen it.
					if (!(this._source instanceof Path)) {
						this._source.on('preclick', stopPropagation);
					}
				}
			},

			onRemove: function onRemove(map) {
				DivOverlay.prototype.onRemove.call(this, map);

				// @namespace Map
				// @section Popup events
				// @event popupclose: PopupEvent
				// Fired when a popup in the map is closed
				map.fire('popupclose', { popup: this });

				if (this._source) {
					// @namespace Layer
					// @section Popup events
					// @event popupclose: PopupEvent
					// Fired when a popup bound to this layer is closed
					this._source.fire('popupclose', { popup: this }, true);
					if (!(this._source instanceof Path)) {
						this._source.off('preclick', stopPropagation);
					}
				}
			},

			getEvents: function getEvents() {
				var events = DivOverlay.prototype.getEvents.call(this);

				if (this.options.closeOnClick !== undefined ? this.options.closeOnClick : this._map.options.closePopupOnClick) {
					events.preclick = this._close;
				}

				if (this.options.keepInView) {
					events.moveend = this._adjustPan;
				}

				return events;
			},

			_close: function _close() {
				if (this._map) {
					this._map.closePopup(this);
				}
			},

			_initLayout: function _initLayout() {
				var prefix = 'leaflet-popup',
				    container = this._container = create$1('div', prefix + ' ' + (this.options.className || '') + ' leaflet-zoom-animated');

				var wrapper = this._wrapper = create$1('div', prefix + '-content-wrapper', container);
				this._contentNode = create$1('div', prefix + '-content', wrapper);

				disableClickPropagation(wrapper);
				disableScrollPropagation(this._contentNode);
				on(wrapper, 'contextmenu', stopPropagation);

				this._tipContainer = create$1('div', prefix + '-tip-container', container);
				this._tip = create$1('div', prefix + '-tip', this._tipContainer);

				if (this.options.closeButton) {
					var closeButton = this._closeButton = create$1('a', prefix + '-close-button', container);
					closeButton.href = '#close';
					closeButton.innerHTML = '&#215;';

					on(closeButton, 'click', this._onCloseButtonClick, this);
				}
			},

			_updateLayout: function _updateLayout() {
				var container = this._contentNode,
				    style = container.style;

				style.width = '';
				style.whiteSpace = 'nowrap';

				var width = container.offsetWidth;
				width = Math.min(width, this.options.maxWidth);
				width = Math.max(width, this.options.minWidth);

				style.width = width + 1 + 'px';
				style.whiteSpace = '';

				style.height = '';

				var height = container.offsetHeight,
				    maxHeight = this.options.maxHeight,
				    scrolledClass = 'leaflet-popup-scrolled';

				if (maxHeight && height > maxHeight) {
					style.height = maxHeight + 'px';
					addClass(container, scrolledClass);
				} else {
					removeClass(container, scrolledClass);
				}

				this._containerWidth = this._container.offsetWidth;
			},

			_animateZoom: function _animateZoom(e) {
				var pos = this._map._latLngToNewLayerPoint(this._latlng, e.zoom, e.center),
				    anchor = this._getAnchor();
				setPosition(this._container, pos.add(anchor));
			},

			_adjustPan: function _adjustPan() {
				if (!this.options.autoPan || this._map._panAnim && this._map._panAnim._inProgress) {
					return;
				}

				var map = this._map,
				    marginBottom = parseInt(getStyle(this._container, 'marginBottom'), 10) || 0,
				    containerHeight = this._container.offsetHeight + marginBottom,
				    containerWidth = this._containerWidth,
				    layerPos = new Point(this._containerLeft, -containerHeight - this._containerBottom);

				layerPos._add(getPosition(this._container));

				var containerPos = map.layerPointToContainerPoint(layerPos),
				    padding = toPoint(this.options.autoPanPadding),
				    paddingTL = toPoint(this.options.autoPanPaddingTopLeft || padding),
				    paddingBR = toPoint(this.options.autoPanPaddingBottomRight || padding),
				    size = map.getSize(),
				    dx = 0,
				    dy = 0;

				if (containerPos.x + containerWidth + paddingBR.x > size.x) {
					// right
					dx = containerPos.x + containerWidth - size.x + paddingBR.x;
				}
				if (containerPos.x - dx - paddingTL.x < 0) {
					// left
					dx = containerPos.x - paddingTL.x;
				}
				if (containerPos.y + containerHeight + paddingBR.y > size.y) {
					// bottom
					dy = containerPos.y + containerHeight - size.y + paddingBR.y;
				}
				if (containerPos.y - dy - paddingTL.y < 0) {
					// top
					dy = containerPos.y - paddingTL.y;
				}

				// @namespace Map
				// @section Popup events
				// @event autopanstart: Event
				// Fired when the map starts autopanning when opening a popup.
				if (dx || dy) {
					map.fire('autopanstart').panBy([dx, dy]);
				}
			},

			_onCloseButtonClick: function _onCloseButtonClick(e) {
				this._close();
				stop(e);
			},

			_getAnchor: function _getAnchor() {
				// Where should we anchor the popup on the source layer?
				return toPoint(this._source && this._source._getPopupAnchor ? this._source._getPopupAnchor() : [0, 0]);
			}

		});

		// @namespace Popup
		// @factory L.popup(options?: Popup options, source?: Layer)
		// Instantiates a `Popup` object given an optional `options` object that describes its appearance and location and an optional `source` object that is used to tag the popup with a reference to the Layer to which it refers.
		var popup = function popup(options, source) {
			return new Popup(options, source);
		};

		/* @namespace Map
   * @section Interaction Options
   * @option closePopupOnClick: Boolean = true
   * Set it to `false` if you don't want popups to close when user clicks the map.
   */
		Map.mergeOptions({
			closePopupOnClick: true
		});

		// @namespace Map
		// @section Methods for Layers and Controls
		Map.include({
			// @method openPopup(popup: Popup): this
			// Opens the specified popup while closing the previously opened (to make sure only one is opened at one time for usability).
			// @alternative
			// @method openPopup(content: String|HTMLElement, latlng: LatLng, options?: Popup options): this
			// Creates a popup with the specified content and options and opens it in the given point on a map.
			openPopup: function openPopup(popup, latlng, options) {
				if (!(popup instanceof Popup)) {
					popup = new Popup(options).setContent(popup);
				}

				if (latlng) {
					popup.setLatLng(latlng);
				}

				if (this.hasLayer(popup)) {
					return this;
				}

				if (this._popup && this._popup.options.autoClose) {
					this.closePopup();
				}

				this._popup = popup;
				return this.addLayer(popup);
			},

			// @method closePopup(popup?: Popup): this
			// Closes the popup previously opened with [openPopup](#map-openpopup) (or the given one).
			closePopup: function closePopup(popup) {
				if (!popup || popup === this._popup) {
					popup = this._popup;
					this._popup = null;
				}
				if (popup) {
					this.removeLayer(popup);
				}
				return this;
			}
		});

		/*
   * @namespace Layer
   * @section Popup methods example
   *
   * All layers share a set of methods convenient for binding popups to it.
   *
   * ```js
   * var layer = L.Polygon(latlngs).bindPopup('Hi There!').addTo(map);
   * layer.openPopup();
   * layer.closePopup();
   * ```
   *
   * Popups will also be automatically opened when the layer is clicked on and closed when the layer is removed from the map or another popup is opened.
   */

		// @section Popup methods
		Layer.include({

			// @method bindPopup(content: String|HTMLElement|Function|Popup, options?: Popup options): this
			// Binds a popup to the layer with the passed `content` and sets up the
			// necessary event listeners. If a `Function` is passed it will receive
			// the layer as the first argument and should return a `String` or `HTMLElement`.
			bindPopup: function bindPopup(content, options) {

				if (content instanceof Popup) {
					setOptions(content, options);
					this._popup = content;
					content._source = this;
				} else {
					if (!this._popup || options) {
						this._popup = new Popup(options, this);
					}
					this._popup.setContent(content);
				}

				if (!this._popupHandlersAdded) {
					this.on({
						click: this._openPopup,
						keypress: this._onKeyPress,
						remove: this.closePopup,
						move: this._movePopup
					});
					this._popupHandlersAdded = true;
				}

				return this;
			},

			// @method unbindPopup(): this
			// Removes the popup previously bound with `bindPopup`.
			unbindPopup: function unbindPopup() {
				if (this._popup) {
					this.off({
						click: this._openPopup,
						keypress: this._onKeyPress,
						remove: this.closePopup,
						move: this._movePopup
					});
					this._popupHandlersAdded = false;
					this._popup = null;
				}
				return this;
			},

			// @method openPopup(latlng?: LatLng): this
			// Opens the bound popup at the specificed `latlng` or at the default popup anchor if no `latlng` is passed.
			openPopup: function openPopup(layer, latlng) {
				if (!(layer instanceof Layer)) {
					latlng = layer;
					layer = this;
				}

				if (layer instanceof FeatureGroup) {
					for (var id in this._layers) {
						layer = this._layers[id];
						break;
					}
				}

				if (!latlng) {
					latlng = layer.getCenter ? layer.getCenter() : layer.getLatLng();
				}

				if (this._popup && this._map) {
					// set popup source to this layer
					this._popup._source = layer;

					// update the popup (content, layout, ect...)
					this._popup.update();

					// open the popup on the map
					this._map.openPopup(this._popup, latlng);
				}

				return this;
			},

			// @method closePopup(): this
			// Closes the popup bound to this layer if it is open.
			closePopup: function closePopup() {
				if (this._popup) {
					this._popup._close();
				}
				return this;
			},

			// @method togglePopup(): this
			// Opens or closes the popup bound to this layer depending on its current state.
			togglePopup: function togglePopup(target) {
				if (this._popup) {
					if (this._popup._map) {
						this.closePopup();
					} else {
						this.openPopup(target);
					}
				}
				return this;
			},

			// @method isPopupOpen(): boolean
			// Returns `true` if the popup bound to this layer is currently open.
			isPopupOpen: function isPopupOpen() {
				return this._popup ? this._popup.isOpen() : false;
			},

			// @method setPopupContent(content: String|HTMLElement|Popup): this
			// Sets the content of the popup bound to this layer.
			setPopupContent: function setPopupContent(content) {
				if (this._popup) {
					this._popup.setContent(content);
				}
				return this;
			},

			// @method getPopup(): Popup
			// Returns the popup bound to this layer.
			getPopup: function getPopup() {
				return this._popup;
			},

			_openPopup: function _openPopup(e) {
				var layer = e.layer || e.target;

				if (!this._popup) {
					return;
				}

				if (!this._map) {
					return;
				}

				// prevent map click
				stop(e);

				// if this inherits from Path its a vector and we can just
				// open the popup at the new location
				if (layer instanceof Path) {
					this.openPopup(e.layer || e.target, e.latlng);
					return;
				}

				// otherwise treat it like a marker and figure out
				// if we should toggle it open/closed
				if (this._map.hasLayer(this._popup) && this._popup._source === layer) {
					this.closePopup();
				} else {
					this.openPopup(layer, e.latlng);
				}
			},

			_movePopup: function _movePopup(e) {
				this._popup.setLatLng(e.latlng);
			},

			_onKeyPress: function _onKeyPress(e) {
				if (e.originalEvent.keyCode === 13) {
					this._openPopup(e);
				}
			}
		});

		/*
   * @class Tooltip
   * @inherits DivOverlay
   * @aka L.Tooltip
   * Used to display small texts on top of map layers.
   *
   * @example
   *
   * ```js
   * marker.bindTooltip("my tooltip text").openTooltip();
   * ```
   * Note about tooltip offset. Leaflet takes two options in consideration
   * for computing tooltip offseting:
   * - the `offset` Tooltip option: it defaults to [0, 0], and it's specific to one tooltip.
   *   Add a positive x offset to move the tooltip to the right, and a positive y offset to
   *   move it to the bottom. Negatives will move to the left and top.
   * - the `tooltipAnchor` Icon option: this will only be considered for Marker. You
   *   should adapt this value if you use a custom icon.
   */

		// @namespace Tooltip
		var Tooltip = DivOverlay.extend({

			// @section
			// @aka Tooltip options
			options: {
				// @option pane: String = 'tooltipPane'
				// `Map pane` where the tooltip will be added.
				pane: 'tooltipPane',

				// @option offset: Point = Point(0, 0)
				// Optional offset of the tooltip position.
				offset: [0, 0],

				// @option direction: String = 'auto'
				// Direction where to open the tooltip. Possible values are: `right`, `left`,
				// `top`, `bottom`, `center`, `auto`.
				// `auto` will dynamicaly switch between `right` and `left` according to the tooltip
				// position on the map.
				direction: 'auto',

				// @option permanent: Boolean = false
				// Whether to open the tooltip permanently or only on mouseover.
				permanent: false,

				// @option sticky: Boolean = false
				// If true, the tooltip will follow the mouse instead of being fixed at the feature center.
				sticky: false,

				// @option interactive: Boolean = false
				// If true, the tooltip will listen to the feature events.
				interactive: false,

				// @option opacity: Number = 0.9
				// Tooltip container opacity.
				opacity: 0.9
			},

			onAdd: function onAdd(map) {
				DivOverlay.prototype.onAdd.call(this, map);
				this.setOpacity(this.options.opacity);

				// @namespace Map
				// @section Tooltip events
				// @event tooltipopen: TooltipEvent
				// Fired when a tooltip is opened in the map.
				map.fire('tooltipopen', { tooltip: this });

				if (this._source) {
					// @namespace Layer
					// @section Tooltip events
					// @event tooltipopen: TooltipEvent
					// Fired when a tooltip bound to this layer is opened.
					this._source.fire('tooltipopen', { tooltip: this }, true);
				}
			},

			onRemove: function onRemove(map) {
				DivOverlay.prototype.onRemove.call(this, map);

				// @namespace Map
				// @section Tooltip events
				// @event tooltipclose: TooltipEvent
				// Fired when a tooltip in the map is closed.
				map.fire('tooltipclose', { tooltip: this });

				if (this._source) {
					// @namespace Layer
					// @section Tooltip events
					// @event tooltipclose: TooltipEvent
					// Fired when a tooltip bound to this layer is closed.
					this._source.fire('tooltipclose', { tooltip: this }, true);
				}
			},

			getEvents: function getEvents() {
				var events = DivOverlay.prototype.getEvents.call(this);

				if (touch && !this.options.permanent) {
					events.preclick = this._close;
				}

				return events;
			},

			_close: function _close() {
				if (this._map) {
					this._map.closeTooltip(this);
				}
			},

			_initLayout: function _initLayout() {
				var prefix = 'leaflet-tooltip',
				    className = prefix + ' ' + (this.options.className || '') + ' leaflet-zoom-' + (this._zoomAnimated ? 'animated' : 'hide');

				this._contentNode = this._container = create$1('div', className);
			},

			_updateLayout: function _updateLayout() {},

			_adjustPan: function _adjustPan() {},

			_setPosition: function _setPosition(pos) {
				var map = this._map,
				    container = this._container,
				    centerPoint = map.latLngToContainerPoint(map.getCenter()),
				    tooltipPoint = map.layerPointToContainerPoint(pos),
				    direction = this.options.direction,
				    tooltipWidth = container.offsetWidth,
				    tooltipHeight = container.offsetHeight,
				    offset = toPoint(this.options.offset),
				    anchor = this._getAnchor();

				if (direction === 'top') {
					pos = pos.add(toPoint(-tooltipWidth / 2 + offset.x, -tooltipHeight + offset.y + anchor.y, true));
				} else if (direction === 'bottom') {
					pos = pos.subtract(toPoint(tooltipWidth / 2 - offset.x, -offset.y, true));
				} else if (direction === 'center') {
					pos = pos.subtract(toPoint(tooltipWidth / 2 + offset.x, tooltipHeight / 2 - anchor.y + offset.y, true));
				} else if (direction === 'right' || direction === 'auto' && tooltipPoint.x < centerPoint.x) {
					direction = 'right';
					pos = pos.add(toPoint(offset.x + anchor.x, anchor.y - tooltipHeight / 2 + offset.y, true));
				} else {
					direction = 'left';
					pos = pos.subtract(toPoint(tooltipWidth + anchor.x - offset.x, tooltipHeight / 2 - anchor.y - offset.y, true));
				}

				removeClass(container, 'leaflet-tooltip-right');
				removeClass(container, 'leaflet-tooltip-left');
				removeClass(container, 'leaflet-tooltip-top');
				removeClass(container, 'leaflet-tooltip-bottom');
				addClass(container, 'leaflet-tooltip-' + direction);
				setPosition(container, pos);
			},

			_updatePosition: function _updatePosition() {
				var pos = this._map.latLngToLayerPoint(this._latlng);
				this._setPosition(pos);
			},

			setOpacity: function setOpacity(opacity) {
				this.options.opacity = opacity;

				if (this._container) {
					_setOpacity(this._container, opacity);
				}
			},

			_animateZoom: function _animateZoom(e) {
				var pos = this._map._latLngToNewLayerPoint(this._latlng, e.zoom, e.center);
				this._setPosition(pos);
			},

			_getAnchor: function _getAnchor() {
				// Where should we anchor the tooltip on the source layer?
				return toPoint(this._source && this._source._getTooltipAnchor && !this.options.sticky ? this._source._getTooltipAnchor() : [0, 0]);
			}

		});

		// @namespace Tooltip
		// @factory L.tooltip(options?: Tooltip options, source?: Layer)
		// Instantiates a Tooltip object given an optional `options` object that describes its appearance and location and an optional `source` object that is used to tag the tooltip with a reference to the Layer to which it refers.
		var tooltip = function tooltip(options, source) {
			return new Tooltip(options, source);
		};

		// @namespace Map
		// @section Methods for Layers and Controls
		Map.include({

			// @method openTooltip(tooltip: Tooltip): this
			// Opens the specified tooltip.
			// @alternative
			// @method openTooltip(content: String|HTMLElement, latlng: LatLng, options?: Tooltip options): this
			// Creates a tooltip with the specified content and options and open it.
			openTooltip: function openTooltip(tooltip, latlng, options) {
				if (!(tooltip instanceof Tooltip)) {
					tooltip = new Tooltip(options).setContent(tooltip);
				}

				if (latlng) {
					tooltip.setLatLng(latlng);
				}

				if (this.hasLayer(tooltip)) {
					return this;
				}

				return this.addLayer(tooltip);
			},

			// @method closeTooltip(tooltip?: Tooltip): this
			// Closes the tooltip given as parameter.
			closeTooltip: function closeTooltip(tooltip) {
				if (tooltip) {
					this.removeLayer(tooltip);
				}
				return this;
			}

		});

		/*
   * @namespace Layer
   * @section Tooltip methods example
   *
   * All layers share a set of methods convenient for binding tooltips to it.
   *
   * ```js
   * var layer = L.Polygon(latlngs).bindTooltip('Hi There!').addTo(map);
   * layer.openTooltip();
   * layer.closeTooltip();
   * ```
   */

		// @section Tooltip methods
		Layer.include({

			// @method bindTooltip(content: String|HTMLElement|Function|Tooltip, options?: Tooltip options): this
			// Binds a tooltip to the layer with the passed `content` and sets up the
			// necessary event listeners. If a `Function` is passed it will receive
			// the layer as the first argument and should return a `String` or `HTMLElement`.
			bindTooltip: function bindTooltip(content, options) {

				if (content instanceof Tooltip) {
					setOptions(content, options);
					this._tooltip = content;
					content._source = this;
				} else {
					if (!this._tooltip || options) {
						this._tooltip = new Tooltip(options, this);
					}
					this._tooltip.setContent(content);
				}

				this._initTooltipInteractions();

				if (this._tooltip.options.permanent && this._map && this._map.hasLayer(this)) {
					this.openTooltip();
				}

				return this;
			},

			// @method unbindTooltip(): this
			// Removes the tooltip previously bound with `bindTooltip`.
			unbindTooltip: function unbindTooltip() {
				if (this._tooltip) {
					this._initTooltipInteractions(true);
					this.closeTooltip();
					this._tooltip = null;
				}
				return this;
			},

			_initTooltipInteractions: function _initTooltipInteractions(remove$$1) {
				if (!remove$$1 && this._tooltipHandlersAdded) {
					return;
				}
				var onOff = remove$$1 ? 'off' : 'on',
				    events = {
					remove: this.closeTooltip,
					move: this._moveTooltip
				};
				if (!this._tooltip.options.permanent) {
					events.mouseover = this._openTooltip;
					events.mouseout = this.closeTooltip;
					if (this._tooltip.options.sticky) {
						events.mousemove = this._moveTooltip;
					}
					if (touch) {
						events.click = this._openTooltip;
					}
				} else {
					events.add = this._openTooltip;
				}
				this[onOff](events);
				this._tooltipHandlersAdded = !remove$$1;
			},

			// @method openTooltip(latlng?: LatLng): this
			// Opens the bound tooltip at the specificed `latlng` or at the default tooltip anchor if no `latlng` is passed.
			openTooltip: function openTooltip(layer, latlng) {
				if (!(layer instanceof Layer)) {
					latlng = layer;
					layer = this;
				}

				if (layer instanceof FeatureGroup) {
					for (var id in this._layers) {
						layer = this._layers[id];
						break;
					}
				}

				if (!latlng) {
					latlng = layer.getCenter ? layer.getCenter() : layer.getLatLng();
				}

				if (this._tooltip && this._map) {

					// set tooltip source to this layer
					this._tooltip._source = layer;

					// update the tooltip (content, layout, ect...)
					this._tooltip.update();

					// open the tooltip on the map
					this._map.openTooltip(this._tooltip, latlng);

					// Tooltip container may not be defined if not permanent and never
					// opened.
					if (this._tooltip.options.interactive && this._tooltip._container) {
						addClass(this._tooltip._container, 'leaflet-clickable');
						this.addInteractiveTarget(this._tooltip._container);
					}
				}

				return this;
			},

			// @method closeTooltip(): this
			// Closes the tooltip bound to this layer if it is open.
			closeTooltip: function closeTooltip() {
				if (this._tooltip) {
					this._tooltip._close();
					if (this._tooltip.options.interactive && this._tooltip._container) {
						removeClass(this._tooltip._container, 'leaflet-clickable');
						this.removeInteractiveTarget(this._tooltip._container);
					}
				}
				return this;
			},

			// @method toggleTooltip(): this
			// Opens or closes the tooltip bound to this layer depending on its current state.
			toggleTooltip: function toggleTooltip(target) {
				if (this._tooltip) {
					if (this._tooltip._map) {
						this.closeTooltip();
					} else {
						this.openTooltip(target);
					}
				}
				return this;
			},

			// @method isTooltipOpen(): boolean
			// Returns `true` if the tooltip bound to this layer is currently open.
			isTooltipOpen: function isTooltipOpen() {
				return this._tooltip.isOpen();
			},

			// @method setTooltipContent(content: String|HTMLElement|Tooltip): this
			// Sets the content of the tooltip bound to this layer.
			setTooltipContent: function setTooltipContent(content) {
				if (this._tooltip) {
					this._tooltip.setContent(content);
				}
				return this;
			},

			// @method getTooltip(): Tooltip
			// Returns the tooltip bound to this layer.
			getTooltip: function getTooltip() {
				return this._tooltip;
			},

			_openTooltip: function _openTooltip(e) {
				var layer = e.layer || e.target;

				if (!this._tooltip || !this._map) {
					return;
				}
				this.openTooltip(layer, this._tooltip.options.sticky ? e.latlng : undefined);
			},

			_moveTooltip: function _moveTooltip(e) {
				var latlng = e.latlng,
				    containerPoint,
				    layerPoint;
				if (this._tooltip.options.sticky && e.originalEvent) {
					containerPoint = this._map.mouseEventToContainerPoint(e.originalEvent);
					layerPoint = this._map.containerPointToLayerPoint(containerPoint);
					latlng = this._map.layerPointToLatLng(layerPoint);
				}
				this._tooltip.setLatLng(latlng);
			}
		});

		/*
   * @class DivIcon
   * @aka L.DivIcon
   * @inherits Icon
   *
   * Represents a lightweight icon for markers that uses a simple `<div>`
   * element instead of an image. Inherits from `Icon` but ignores the `iconUrl` and shadow options.
   *
   * @example
   * ```js
   * var myIcon = L.divIcon({className: 'my-div-icon'});
   * // you can set .my-div-icon styles in CSS
   *
   * L.marker([50.505, 30.57], {icon: myIcon}).addTo(map);
   * ```
   *
   * By default, it has a 'leaflet-div-icon' CSS class and is styled as a little white square with a shadow.
   */

		var DivIcon = Icon.extend({
			options: {
				// @section
				// @aka DivIcon options
				iconSize: [12, 12], // also can be set through CSS

				// iconAnchor: (Point),
				// popupAnchor: (Point),

				// @option html: String = ''
				// Custom HTML code to put inside the div element, empty by default.
				html: false,

				// @option bgPos: Point = [0, 0]
				// Optional relative position of the background, in pixels
				bgPos: null,

				className: 'leaflet-div-icon'
			},

			createIcon: function createIcon(oldIcon) {
				var div = oldIcon && oldIcon.tagName === 'DIV' ? oldIcon : document.createElement('div'),
				    options = this.options;

				div.innerHTML = options.html !== false ? options.html : '';

				if (options.bgPos) {
					var bgPos = toPoint(options.bgPos);
					div.style.backgroundPosition = -bgPos.x + 'px ' + -bgPos.y + 'px';
				}
				this._setIconStyles(div, 'icon');

				return div;
			},

			createShadow: function createShadow() {
				return null;
			}
		});

		// @factory L.divIcon(options: DivIcon options)
		// Creates a `DivIcon` instance with the given options.
		function divIcon(options) {
			return new DivIcon(options);
		}

		Icon.Default = IconDefault;

		/*
   * @class GridLayer
   * @inherits Layer
   * @aka L.GridLayer
   *
   * Generic class for handling a tiled grid of HTML elements. This is the base class for all tile layers and replaces `TileLayer.Canvas`.
   * GridLayer can be extended to create a tiled grid of HTML elements like `<canvas>`, `<img>` or `<div>`. GridLayer will handle creating and animating these DOM elements for you.
   *
   *
   * @section Synchronous usage
   * @example
   *
   * To create a custom layer, extend GridLayer and implement the `createTile()` method, which will be passed a `Point` object with the `x`, `y`, and `z` (zoom level) coordinates to draw your tile.
   *
   * ```js
   * var CanvasLayer = L.GridLayer.extend({
   *     createTile: function(coords){
   *         // create a <canvas> element for drawing
   *         var tile = L.DomUtil.create('canvas', 'leaflet-tile');
   *
   *         // setup tile width and height according to the options
   *         var size = this.getTileSize();
   *         tile.width = size.x;
   *         tile.height = size.y;
   *
   *         // get a canvas context and draw something on it using coords.x, coords.y and coords.z
   *         var ctx = tile.getContext('2d');
   *
   *         // return the tile so it can be rendered on screen
   *         return tile;
   *     }
   * });
   * ```
   *
   * @section Asynchronous usage
   * @example
   *
   * Tile creation can also be asynchronous, this is useful when using a third-party drawing library. Once the tile is finished drawing it can be passed to the `done()` callback.
   *
   * ```js
   * var CanvasLayer = L.GridLayer.extend({
   *     createTile: function(coords, done){
   *         var error;
   *
   *         // create a <canvas> element for drawing
   *         var tile = L.DomUtil.create('canvas', 'leaflet-tile');
   *
   *         // setup tile width and height according to the options
   *         var size = this.getTileSize();
   *         tile.width = size.x;
   *         tile.height = size.y;
   *
   *         // draw something asynchronously and pass the tile to the done() callback
   *         setTimeout(function() {
   *             done(error, tile);
   *         }, 1000);
   *
   *         return tile;
   *     }
   * });
   * ```
   *
   * @section
   */

		var GridLayer = Layer.extend({

			// @section
			// @aka GridLayer options
			options: {
				// @option tileSize: Number|Point = 256
				// Width and height of tiles in the grid. Use a number if width and height are equal, or `L.point(width, height)` otherwise.
				tileSize: 256,

				// @option opacity: Number = 1.0
				// Opacity of the tiles. Can be used in the `createTile()` function.
				opacity: 1,

				// @option updateWhenIdle: Boolean = (depends)
				// Load new tiles only when panning ends.
				// `true` by default on mobile browsers, in order to avoid too many requests and keep smooth navigation.
				// `false` otherwise in order to display new tiles _during_ panning, since it is easy to pan outside the
				// [`keepBuffer`](#gridlayer-keepbuffer) option in desktop browsers.
				updateWhenIdle: mobile,

				// @option updateWhenZooming: Boolean = true
				// By default, a smooth zoom animation (during a [touch zoom](#map-touchzoom) or a [`flyTo()`](#map-flyto)) will update grid layers every integer zoom level. Setting this option to `false` will update the grid layer only when the smooth animation ends.
				updateWhenZooming: true,

				// @option updateInterval: Number = 200
				// Tiles will not update more than once every `updateInterval` milliseconds when panning.
				updateInterval: 200,

				// @option zIndex: Number = 1
				// The explicit zIndex of the tile layer.
				zIndex: 1,

				// @option bounds: LatLngBounds = undefined
				// If set, tiles will only be loaded inside the set `LatLngBounds`.
				bounds: null,

				// @option minZoom: Number = 0
				// The minimum zoom level down to which this layer will be displayed (inclusive).
				minZoom: 0,

				// @option maxZoom: Number = undefined
				// The maximum zoom level up to which this layer will be displayed (inclusive).
				maxZoom: undefined,

				// @option maxNativeZoom: Number = undefined
				// Maximum zoom number the tile source has available. If it is specified,
				// the tiles on all zoom levels higher than `maxNativeZoom` will be loaded
				// from `maxNativeZoom` level and auto-scaled.
				maxNativeZoom: undefined,

				// @option minNativeZoom: Number = undefined
				// Minimum zoom number the tile source has available. If it is specified,
				// the tiles on all zoom levels lower than `minNativeZoom` will be loaded
				// from `minNativeZoom` level and auto-scaled.
				minNativeZoom: undefined,

				// @option noWrap: Boolean = false
				// Whether the layer is wrapped around the antimeridian. If `true`, the
				// GridLayer will only be displayed once at low zoom levels. Has no
				// effect when the [map CRS](#map-crs) doesn't wrap around. Can be used
				// in combination with [`bounds`](#gridlayer-bounds) to prevent requesting
				// tiles outside the CRS limits.
				noWrap: false,

				// @option pane: String = 'tilePane'
				// `Map pane` where the grid layer will be added.
				pane: 'tilePane',

				// @option className: String = ''
				// A custom class name to assign to the tile layer. Empty by default.
				className: '',

				// @option keepBuffer: Number = 2
				// When panning the map, keep this many rows and columns of tiles before unloading them.
				keepBuffer: 2
			},

			initialize: function initialize(options) {
				setOptions(this, options);
			},

			onAdd: function onAdd() {
				this._initContainer();

				this._levels = {};
				this._tiles = {};

				this._resetView();
				this._update();
			},

			beforeAdd: function beforeAdd(map) {
				map._addZoomLimit(this);
			},

			onRemove: function onRemove(map) {
				this._removeAllTiles();
				_remove(this._container);
				map._removeZoomLimit(this);
				this._container = null;
				this._tileZoom = null;
			},

			// @method bringToFront: this
			// Brings the tile layer to the top of all tile layers.
			bringToFront: function bringToFront() {
				if (this._map) {
					toFront(this._container);
					this._setAutoZIndex(Math.max);
				}
				return this;
			},

			// @method bringToBack: this
			// Brings the tile layer to the bottom of all tile layers.
			bringToBack: function bringToBack() {
				if (this._map) {
					toBack(this._container);
					this._setAutoZIndex(Math.min);
				}
				return this;
			},

			// @method getContainer: HTMLElement
			// Returns the HTML element that contains the tiles for this layer.
			getContainer: function getContainer() {
				return this._container;
			},

			// @method setOpacity(opacity: Number): this
			// Changes the [opacity](#gridlayer-opacity) of the grid layer.
			setOpacity: function setOpacity(opacity) {
				this.options.opacity = opacity;
				this._updateOpacity();
				return this;
			},

			// @method setZIndex(zIndex: Number): this
			// Changes the [zIndex](#gridlayer-zindex) of the grid layer.
			setZIndex: function setZIndex(zIndex) {
				this.options.zIndex = zIndex;
				this._updateZIndex();

				return this;
			},

			// @method isLoading: Boolean
			// Returns `true` if any tile in the grid layer has not finished loading.
			isLoading: function isLoading() {
				return this._loading;
			},

			// @method redraw: this
			// Causes the layer to clear all the tiles and request them again.
			redraw: function redraw() {
				if (this._map) {
					this._removeAllTiles();
					this._update();
				}
				return this;
			},

			getEvents: function getEvents() {
				var events = {
					viewprereset: this._invalidateAll,
					viewreset: this._resetView,
					zoom: this._resetView,
					moveend: this._onMoveEnd
				};

				if (!this.options.updateWhenIdle) {
					// update tiles on move, but not more often than once per given interval
					if (!this._onMove) {
						this._onMove = throttle(this._onMoveEnd, this.options.updateInterval, this);
					}

					events.move = this._onMove;
				}

				if (this._zoomAnimated) {
					events.zoomanim = this._animateZoom;
				}

				return events;
			},

			// @section Extension methods
			// Layers extending `GridLayer` shall reimplement the following method.
			// @method createTile(coords: Object, done?: Function): HTMLElement
			// Called only internally, must be overriden by classes extending `GridLayer`.
			// Returns the `HTMLElement` corresponding to the given `coords`. If the `done` callback
			// is specified, it must be called when the tile has finished loading and drawing.
			createTile: function createTile() {
				return document.createElement('div');
			},

			// @section
			// @method getTileSize: Point
			// Normalizes the [tileSize option](#gridlayer-tilesize) into a point. Used by the `createTile()` method.
			getTileSize: function getTileSize() {
				var s = this.options.tileSize;
				return s instanceof Point ? s : new Point(s, s);
			},

			_updateZIndex: function _updateZIndex() {
				if (this._container && this.options.zIndex !== undefined && this.options.zIndex !== null) {
					this._container.style.zIndex = this.options.zIndex;
				}
			},

			_setAutoZIndex: function _setAutoZIndex(compare) {
				// go through all other layers of the same pane, set zIndex to max + 1 (front) or min - 1 (back)

				var layers = this.getPane().children,
				    edgeZIndex = -compare(-Infinity, Infinity); // -Infinity for max, Infinity for min

				for (var i = 0, len = layers.length, zIndex; i < len; i++) {

					zIndex = layers[i].style.zIndex;

					if (layers[i] !== this._container && zIndex) {
						edgeZIndex = compare(edgeZIndex, +zIndex);
					}
				}

				if (isFinite(edgeZIndex)) {
					this.options.zIndex = edgeZIndex + compare(-1, 1);
					this._updateZIndex();
				}
			},

			_updateOpacity: function _updateOpacity() {
				if (!this._map) {
					return;
				}

				// IE doesn't inherit filter opacity properly, so we're forced to set it on tiles
				if (ielt9) {
					return;
				}

				_setOpacity(this._container, this.options.opacity);

				var now = +new Date(),
				    nextFrame = false,
				    willPrune = false;

				for (var key in this._tiles) {
					var tile = this._tiles[key];
					if (!tile.current || !tile.loaded) {
						continue;
					}

					var fade = Math.min(1, (now - tile.loaded) / 200);

					_setOpacity(tile.el, fade);
					if (fade < 1) {
						nextFrame = true;
					} else {
						if (tile.active) {
							willPrune = true;
						} else {
							this._onOpaqueTile(tile);
						}
						tile.active = true;
					}
				}

				if (willPrune && !this._noPrune) {
					this._pruneTiles();
				}

				if (nextFrame) {
					cancelAnimFrame(this._fadeFrame);
					this._fadeFrame = requestAnimFrame(this._updateOpacity, this);
				}
			},

			_onOpaqueTile: falseFn,

			_initContainer: function _initContainer() {
				if (this._container) {
					return;
				}

				this._container = create$1('div', 'leaflet-layer ' + (this.options.className || ''));
				this._updateZIndex();

				if (this.options.opacity < 1) {
					this._updateOpacity();
				}

				this.getPane().appendChild(this._container);
			},

			_updateLevels: function _updateLevels() {

				var zoom = this._tileZoom,
				    maxZoom = this.options.maxZoom;

				if (zoom === undefined) {
					return undefined;
				}

				for (var z in this._levels) {
					if (this._levels[z].el.children.length || z === zoom) {
						this._levels[z].el.style.zIndex = maxZoom - Math.abs(zoom - z);
						this._onUpdateLevel(z);
					} else {
						_remove(this._levels[z].el);
						this._removeTilesAtZoom(z);
						this._onRemoveLevel(z);
						delete this._levels[z];
					}
				}

				var level = this._levels[zoom],
				    map = this._map;

				if (!level) {
					level = this._levels[zoom] = {};

					level.el = create$1('div', 'leaflet-tile-container leaflet-zoom-animated', this._container);
					level.el.style.zIndex = maxZoom;

					level.origin = map.project(map.unproject(map.getPixelOrigin()), zoom).round();
					level.zoom = zoom;

					this._setZoomTransform(level, map.getCenter(), map.getZoom());

					// force the browser to consider the newly added element for transition
					falseFn(level.el.offsetWidth);

					this._onCreateLevel(level);
				}

				this._level = level;

				return level;
			},

			_onUpdateLevel: falseFn,

			_onRemoveLevel: falseFn,

			_onCreateLevel: falseFn,

			_pruneTiles: function _pruneTiles() {
				if (!this._map) {
					return;
				}

				var key, tile;

				var zoom = this._map.getZoom();
				if (zoom > this.options.maxZoom || zoom < this.options.minZoom) {
					this._removeAllTiles();
					return;
				}

				for (key in this._tiles) {
					tile = this._tiles[key];
					tile.retain = tile.current;
				}

				for (key in this._tiles) {
					tile = this._tiles[key];
					if (tile.current && !tile.active) {
						var coords = tile.coords;
						if (!this._retainParent(coords.x, coords.y, coords.z, coords.z - 5)) {
							this._retainChildren(coords.x, coords.y, coords.z, coords.z + 2);
						}
					}
				}

				for (key in this._tiles) {
					if (!this._tiles[key].retain) {
						this._removeTile(key);
					}
				}
			},

			_removeTilesAtZoom: function _removeTilesAtZoom(zoom) {
				for (var key in this._tiles) {
					if (this._tiles[key].coords.z !== zoom) {
						continue;
					}
					this._removeTile(key);
				}
			},

			_removeAllTiles: function _removeAllTiles() {
				for (var key in this._tiles) {
					this._removeTile(key);
				}
			},

			_invalidateAll: function _invalidateAll() {
				for (var z in this._levels) {
					_remove(this._levels[z].el);
					this._onRemoveLevel(z);
					delete this._levels[z];
				}
				this._removeAllTiles();

				this._tileZoom = null;
			},

			_retainParent: function _retainParent(x, y, z, minZoom) {
				var x2 = Math.floor(x / 2),
				    y2 = Math.floor(y / 2),
				    z2 = z - 1,
				    coords2 = new Point(+x2, +y2);
				coords2.z = +z2;

				var key = this._tileCoordsToKey(coords2),
				    tile = this._tiles[key];

				if (tile && tile.active) {
					tile.retain = true;
					return true;
				} else if (tile && tile.loaded) {
					tile.retain = true;
				}

				if (z2 > minZoom) {
					return this._retainParent(x2, y2, z2, minZoom);
				}

				return false;
			},

			_retainChildren: function _retainChildren(x, y, z, maxZoom) {

				for (var i = 2 * x; i < 2 * x + 2; i++) {
					for (var j = 2 * y; j < 2 * y + 2; j++) {

						var coords = new Point(i, j);
						coords.z = z + 1;

						var key = this._tileCoordsToKey(coords),
						    tile = this._tiles[key];

						if (tile && tile.active) {
							tile.retain = true;
							continue;
						} else if (tile && tile.loaded) {
							tile.retain = true;
						}

						if (z + 1 < maxZoom) {
							this._retainChildren(i, j, z + 1, maxZoom);
						}
					}
				}
			},

			_resetView: function _resetView(e) {
				var animating = e && (e.pinch || e.flyTo);
				this._setView(this._map.getCenter(), this._map.getZoom(), animating, animating);
			},

			_animateZoom: function _animateZoom(e) {
				this._setView(e.center, e.zoom, true, e.noUpdate);
			},

			_clampZoom: function _clampZoom(zoom) {
				var options = this.options;

				if (undefined !== options.minNativeZoom && zoom < options.minNativeZoom) {
					return options.minNativeZoom;
				}

				if (undefined !== options.maxNativeZoom && options.maxNativeZoom < zoom) {
					return options.maxNativeZoom;
				}

				return zoom;
			},

			_setView: function _setView(center, zoom, noPrune, noUpdate) {
				var tileZoom = this._clampZoom(Math.round(zoom));
				if (this.options.maxZoom !== undefined && tileZoom > this.options.maxZoom || this.options.minZoom !== undefined && tileZoom < this.options.minZoom) {
					tileZoom = undefined;
				}

				var tileZoomChanged = this.options.updateWhenZooming && tileZoom !== this._tileZoom;

				if (!noUpdate || tileZoomChanged) {

					this._tileZoom = tileZoom;

					if (this._abortLoading) {
						this._abortLoading();
					}

					this._updateLevels();
					this._resetGrid();

					if (tileZoom !== undefined) {
						this._update(center);
					}

					if (!noPrune) {
						this._pruneTiles();
					}

					// Flag to prevent _updateOpacity from pruning tiles during
					// a zoom anim or a pinch gesture
					this._noPrune = !!noPrune;
				}

				this._setZoomTransforms(center, zoom);
			},

			_setZoomTransforms: function _setZoomTransforms(center, zoom) {
				for (var i in this._levels) {
					this._setZoomTransform(this._levels[i], center, zoom);
				}
			},

			_setZoomTransform: function _setZoomTransform(level, center, zoom) {
				var scale = this._map.getZoomScale(zoom, level.zoom),
				    translate = level.origin.multiplyBy(scale).subtract(this._map._getNewPixelOrigin(center, zoom)).round();

				if (any3d) {
					setTransform(level.el, translate, scale);
				} else {
					setPosition(level.el, translate);
				}
			},

			_resetGrid: function _resetGrid() {
				var map = this._map,
				    crs = map.options.crs,
				    tileSize = this._tileSize = this.getTileSize(),
				    tileZoom = this._tileZoom;

				var bounds = this._map.getPixelWorldBounds(this._tileZoom);
				if (bounds) {
					this._globalTileRange = this._pxBoundsToTileRange(bounds);
				}

				this._wrapX = crs.wrapLng && !this.options.noWrap && [Math.floor(map.project([0, crs.wrapLng[0]], tileZoom).x / tileSize.x), Math.ceil(map.project([0, crs.wrapLng[1]], tileZoom).x / tileSize.y)];
				this._wrapY = crs.wrapLat && !this.options.noWrap && [Math.floor(map.project([crs.wrapLat[0], 0], tileZoom).y / tileSize.x), Math.ceil(map.project([crs.wrapLat[1], 0], tileZoom).y / tileSize.y)];
			},

			_onMoveEnd: function _onMoveEnd() {
				if (!this._map || this._map._animatingZoom) {
					return;
				}

				this._update();
			},

			_getTiledPixelBounds: function _getTiledPixelBounds(center) {
				var map = this._map,
				    mapZoom = map._animatingZoom ? Math.max(map._animateToZoom, map.getZoom()) : map.getZoom(),
				    scale = map.getZoomScale(mapZoom, this._tileZoom),
				    pixelCenter = map.project(center, this._tileZoom).floor(),
				    halfSize = map.getSize().divideBy(scale * 2);

				return new Bounds(pixelCenter.subtract(halfSize), pixelCenter.add(halfSize));
			},

			// Private method to load tiles in the grid's active zoom level according to map bounds
			_update: function _update(center) {
				var map = this._map;
				if (!map) {
					return;
				}
				var zoom = this._clampZoom(map.getZoom());

				if (center === undefined) {
					center = map.getCenter();
				}
				if (this._tileZoom === undefined) {
					return;
				} // if out of minzoom/maxzoom

				var pixelBounds = this._getTiledPixelBounds(center),
				    tileRange = this._pxBoundsToTileRange(pixelBounds),
				    tileCenter = tileRange.getCenter(),
				    queue = [],
				    margin = this.options.keepBuffer,
				    noPruneRange = new Bounds(tileRange.getBottomLeft().subtract([margin, -margin]), tileRange.getTopRight().add([margin, -margin]));

				// Sanity check: panic if the tile range contains Infinity somewhere.
				if (!(isFinite(tileRange.min.x) && isFinite(tileRange.min.y) && isFinite(tileRange.max.x) && isFinite(tileRange.max.y))) {
					throw new Error('Attempted to load an infinite number of tiles');
				}

				for (var key in this._tiles) {
					var c = this._tiles[key].coords;
					if (c.z !== this._tileZoom || !noPruneRange.contains(new Point(c.x, c.y))) {
						this._tiles[key].current = false;
					}
				}

				// _update just loads more tiles. If the tile zoom level differs too much
				// from the map's, let _setView reset levels and prune old tiles.
				if (Math.abs(zoom - this._tileZoom) > 1) {
					this._setView(center, zoom);return;
				}

				// create a queue of coordinates to load tiles from
				for (var j = tileRange.min.y; j <= tileRange.max.y; j++) {
					for (var i = tileRange.min.x; i <= tileRange.max.x; i++) {
						var coords = new Point(i, j);
						coords.z = this._tileZoom;

						if (!this._isValidTile(coords)) {
							continue;
						}

						if (!this._tiles[this._tileCoordsToKey(coords)]) {
							queue.push(coords);
						}
					}
				}

				// sort tile queue to load tiles in order of their distance to center
				queue.sort(function (a, b) {
					return a.distanceTo(tileCenter) - b.distanceTo(tileCenter);
				});

				if (queue.length !== 0) {
					// if it's the first batch of tiles to load
					if (!this._loading) {
						this._loading = true;
						// @event loading: Event
						// Fired when the grid layer starts loading tiles.
						this.fire('loading');
					}

					// create DOM fragment to append tiles in one batch
					var fragment = document.createDocumentFragment();

					for (i = 0; i < queue.length; i++) {
						this._addTile(queue[i], fragment);
					}

					this._level.el.appendChild(fragment);
				}
			},

			_isValidTile: function _isValidTile(coords) {
				var crs = this._map.options.crs;

				if (!crs.infinite) {
					// don't load tile if it's out of bounds and not wrapped
					var bounds = this._globalTileRange;
					if (!crs.wrapLng && (coords.x < bounds.min.x || coords.x > bounds.max.x) || !crs.wrapLat && (coords.y < bounds.min.y || coords.y > bounds.max.y)) {
						return false;
					}
				}

				if (!this.options.bounds) {
					return true;
				}

				// don't load tile if it doesn't intersect the bounds in options
				var tileBounds = this._tileCoordsToBounds(coords);
				return toLatLngBounds(this.options.bounds).overlaps(tileBounds);
			},

			_keyToBounds: function _keyToBounds(key) {
				return this._tileCoordsToBounds(this._keyToTileCoords(key));
			},

			// converts tile coordinates to its geographical bounds
			_tileCoordsToBounds: function _tileCoordsToBounds(coords) {

				var map = this._map,
				    tileSize = this.getTileSize(),
				    nwPoint = coords.scaleBy(tileSize),
				    sePoint = nwPoint.add(tileSize),
				    nw = map.unproject(nwPoint, coords.z),
				    se = map.unproject(sePoint, coords.z),
				    bounds = new LatLngBounds(nw, se);

				if (!this.options.noWrap) {
					map.wrapLatLngBounds(bounds);
				}

				return bounds;
			},

			// converts tile coordinates to key for the tile cache
			_tileCoordsToKey: function _tileCoordsToKey(coords) {
				return coords.x + ':' + coords.y + ':' + coords.z;
			},

			// converts tile cache key to coordinates
			_keyToTileCoords: function _keyToTileCoords(key) {
				var k = key.split(':'),
				    coords = new Point(+k[0], +k[1]);
				coords.z = +k[2];
				return coords;
			},

			_removeTile: function _removeTile(key) {
				var tile = this._tiles[key];
				if (!tile) {
					return;
				}

				_remove(tile.el);

				delete this._tiles[key];

				// @event tileunload: TileEvent
				// Fired when a tile is removed (e.g. when a tile goes off the screen).
				this.fire('tileunload', {
					tile: tile.el,
					coords: this._keyToTileCoords(key)
				});
			},

			_initTile: function _initTile(tile) {
				addClass(tile, 'leaflet-tile');

				var tileSize = this.getTileSize();
				tile.style.width = tileSize.x + 'px';
				tile.style.height = tileSize.y + 'px';

				tile.onselectstart = falseFn;
				tile.onmousemove = falseFn;

				// update opacity on tiles in IE7-8 because of filter inheritance problems
				if (ielt9 && this.options.opacity < 1) {
					_setOpacity(tile, this.options.opacity);
				}

				// without this hack, tiles disappear after zoom on Chrome for Android
				// https://github.com/Leaflet/Leaflet/issues/2078
				if (android && !android23) {
					tile.style.WebkitBackfaceVisibility = 'hidden';
				}
			},

			_addTile: function _addTile(coords, container) {
				var tilePos = this._getTilePos(coords),
				    key = this._tileCoordsToKey(coords);

				var tile = this.createTile(this._wrapCoords(coords), bind(this._tileReady, this, coords));

				this._initTile(tile);

				// if createTile is defined with a second argument ("done" callback),
				// we know that tile is async and will be ready later; otherwise
				if (this.createTile.length < 2) {
					// mark tile as ready, but delay one frame for opacity animation to happen
					requestAnimFrame(bind(this._tileReady, this, coords, null, tile));
				}

				setPosition(tile, tilePos);

				// save tile in cache
				this._tiles[key] = {
					el: tile,
					coords: coords,
					current: true
				};

				container.appendChild(tile);
				// @event tileloadstart: TileEvent
				// Fired when a tile is requested and starts loading.
				this.fire('tileloadstart', {
					tile: tile,
					coords: coords
				});
			},

			_tileReady: function _tileReady(coords, err, tile) {
				if (!this._map) {
					return;
				}

				if (err) {
					// @event tileerror: TileErrorEvent
					// Fired when there is an error loading a tile.
					this.fire('tileerror', {
						error: err,
						tile: tile,
						coords: coords
					});
				}

				var key = this._tileCoordsToKey(coords);

				tile = this._tiles[key];
				if (!tile) {
					return;
				}

				tile.loaded = +new Date();
				if (this._map._fadeAnimated) {
					_setOpacity(tile.el, 0);
					cancelAnimFrame(this._fadeFrame);
					this._fadeFrame = requestAnimFrame(this._updateOpacity, this);
				} else {
					tile.active = true;
					this._pruneTiles();
				}

				if (!err) {
					addClass(tile.el, 'leaflet-tile-loaded');

					// @event tileload: TileEvent
					// Fired when a tile loads.
					this.fire('tileload', {
						tile: tile.el,
						coords: coords
					});
				}

				if (this._noTilesToLoad()) {
					this._loading = false;
					// @event load: Event
					// Fired when the grid layer loaded all visible tiles.
					this.fire('load');

					if (ielt9 || !this._map._fadeAnimated) {
						requestAnimFrame(this._pruneTiles, this);
					} else {
						// Wait a bit more than 0.2 secs (the duration of the tile fade-in)
						// to trigger a pruning.
						setTimeout(bind(this._pruneTiles, this), 250);
					}
				}
			},

			_getTilePos: function _getTilePos(coords) {
				return coords.scaleBy(this.getTileSize()).subtract(this._level.origin);
			},

			_wrapCoords: function _wrapCoords(coords) {
				var newCoords = new Point(this._wrapX ? wrapNum(coords.x, this._wrapX) : coords.x, this._wrapY ? wrapNum(coords.y, this._wrapY) : coords.y);
				newCoords.z = coords.z;
				return newCoords;
			},

			_pxBoundsToTileRange: function _pxBoundsToTileRange(bounds) {
				var tileSize = this.getTileSize();
				return new Bounds(bounds.min.unscaleBy(tileSize).floor(), bounds.max.unscaleBy(tileSize).ceil().subtract([1, 1]));
			},

			_noTilesToLoad: function _noTilesToLoad() {
				for (var key in this._tiles) {
					if (!this._tiles[key].loaded) {
						return false;
					}
				}
				return true;
			}
		});

		// @factory L.gridLayer(options?: GridLayer options)
		// Creates a new instance of GridLayer with the supplied options.
		function gridLayer(options) {
			return new GridLayer(options);
		}

		/*
   * @class TileLayer
   * @inherits GridLayer
   * @aka L.TileLayer
   * Used to load and display tile layers on the map. Extends `GridLayer`.
   *
   * @example
   *
   * ```js
   * L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png?{foo}', {foo: 'bar'}).addTo(map);
   * ```
   *
   * @section URL template
   * @example
   *
   * A string of the following form:
   *
   * ```
   * 'http://{s}.somedomain.com/blabla/{z}/{x}/{y}{r}.png'
   * ```
   *
   * `{s}` means one of the available subdomains (used sequentially to help with browser parallel requests per domain limitation; subdomain values are specified in options; `a`, `b` or `c` by default, can be omitted), `{z}` — zoom level, `{x}` and `{y}` — tile coordinates. `{r}` can be used to add "&commat;2x" to the URL to load retina tiles.
   *
   * You can use custom keys in the template, which will be [evaluated](#util-template) from TileLayer options, like this:
   *
   * ```
   * L.tileLayer('http://{s}.somedomain.com/{foo}/{z}/{x}/{y}.png', {foo: 'bar'});
   * ```
   */

		var TileLayer = GridLayer.extend({

			// @section
			// @aka TileLayer options
			options: {
				// @option minZoom: Number = 0
				// The minimum zoom level down to which this layer will be displayed (inclusive).
				minZoom: 0,

				// @option maxZoom: Number = 18
				// The maximum zoom level up to which this layer will be displayed (inclusive).
				maxZoom: 18,

				// @option subdomains: String|String[] = 'abc'
				// Subdomains of the tile service. Can be passed in the form of one string (where each letter is a subdomain name) or an array of strings.
				subdomains: 'abc',

				// @option errorTileUrl: String = ''
				// URL to the tile image to show in place of the tile that failed to load.
				errorTileUrl: '',

				// @option zoomOffset: Number = 0
				// The zoom number used in tile URLs will be offset with this value.
				zoomOffset: 0,

				// @option tms: Boolean = false
				// If `true`, inverses Y axis numbering for tiles (turn this on for [TMS](https://en.wikipedia.org/wiki/Tile_Map_Service) services).
				tms: false,

				// @option zoomReverse: Boolean = false
				// If set to true, the zoom number used in tile URLs will be reversed (`maxZoom - zoom` instead of `zoom`)
				zoomReverse: false,

				// @option detectRetina: Boolean = false
				// If `true` and user is on a retina display, it will request four tiles of half the specified size and a bigger zoom level in place of one to utilize the high resolution.
				detectRetina: false,

				// @option crossOrigin: Boolean = false
				// If true, all tiles will have their crossOrigin attribute set to ''. This is needed if you want to access tile pixel data.
				crossOrigin: false
			},

			initialize: function initialize(url, options) {

				this._url = url;

				options = setOptions(this, options);

				// detecting retina displays, adjusting tileSize and zoom levels
				if (options.detectRetina && retina && options.maxZoom > 0) {

					options.tileSize = Math.floor(options.tileSize / 2);

					if (!options.zoomReverse) {
						options.zoomOffset++;
						options.maxZoom--;
					} else {
						options.zoomOffset--;
						options.minZoom++;
					}

					options.minZoom = Math.max(0, options.minZoom);
				}

				if (typeof options.subdomains === 'string') {
					options.subdomains = options.subdomains.split('');
				}

				// for https://github.com/Leaflet/Leaflet/issues/137
				if (!android) {
					this.on('tileunload', this._onTileRemove);
				}
			},

			// @method setUrl(url: String, noRedraw?: Boolean): this
			// Updates the layer's URL template and redraws it (unless `noRedraw` is set to `true`).
			setUrl: function setUrl(url, noRedraw) {
				this._url = url;

				if (!noRedraw) {
					this.redraw();
				}
				return this;
			},

			// @method createTile(coords: Object, done?: Function): HTMLElement
			// Called only internally, overrides GridLayer's [`createTile()`](#gridlayer-createtile)
			// to return an `<img>` HTML element with the appropiate image URL given `coords`. The `done`
			// callback is called when the tile has been loaded.
			createTile: function createTile(coords, done) {
				var tile = document.createElement('img');

				on(tile, 'load', bind(this._tileOnLoad, this, done, tile));
				on(tile, 'error', bind(this._tileOnError, this, done, tile));

				if (this.options.crossOrigin) {
					tile.crossOrigin = '';
				}

				/*
     Alt tag is set to empty string to keep screen readers from reading URL and for compliance reasons
     http://www.w3.org/TR/WCAG20-TECHS/H67
    */
				tile.alt = '';

				/*
     Set role="presentation" to force screen readers to ignore this
     https://www.w3.org/TR/wai-aria/roles#textalternativecomputation
    */
				tile.setAttribute('role', 'presentation');

				tile.src = this.getTileUrl(coords);

				return tile;
			},

			// @section Extension methods
			// @uninheritable
			// Layers extending `TileLayer` might reimplement the following method.
			// @method getTileUrl(coords: Object): String
			// Called only internally, returns the URL for a tile given its coordinates.
			// Classes extending `TileLayer` can override this function to provide custom tile URL naming schemes.
			getTileUrl: function getTileUrl(coords) {
				var data = {
					r: retina ? '@2x' : '',
					s: this._getSubdomain(coords),
					x: coords.x,
					y: coords.y,
					z: this._getZoomForUrl()
				};
				if (this._map && !this._map.options.crs.infinite) {
					var invertedY = this._globalTileRange.max.y - coords.y;
					if (this.options.tms) {
						data['y'] = invertedY;
					}
					data['-y'] = invertedY;
				}

				return template(this._url, extend(data, this.options));
			},

			_tileOnLoad: function _tileOnLoad(done, tile) {
				// For https://github.com/Leaflet/Leaflet/issues/3332
				if (ielt9) {
					setTimeout(bind(done, this, null, tile), 0);
				} else {
					done(null, tile);
				}
			},

			_tileOnError: function _tileOnError(done, tile, e) {
				var errorUrl = this.options.errorTileUrl;
				if (errorUrl && tile.src !== errorUrl) {
					tile.src = errorUrl;
				}
				done(e, tile);
			},

			_onTileRemove: function _onTileRemove(e) {
				e.tile.onload = null;
			},

			_getZoomForUrl: function _getZoomForUrl() {
				var zoom = this._tileZoom,
				    maxZoom = this.options.maxZoom,
				    zoomReverse = this.options.zoomReverse,
				    zoomOffset = this.options.zoomOffset;

				if (zoomReverse) {
					zoom = maxZoom - zoom;
				}

				return zoom + zoomOffset;
			},

			_getSubdomain: function _getSubdomain(tilePoint) {
				var index = Math.abs(tilePoint.x + tilePoint.y) % this.options.subdomains.length;
				return this.options.subdomains[index];
			},

			// stops loading all tiles in the background layer
			_abortLoading: function _abortLoading() {
				var i, tile;
				for (i in this._tiles) {
					if (this._tiles[i].coords.z !== this._tileZoom) {
						tile = this._tiles[i].el;

						tile.onload = falseFn;
						tile.onerror = falseFn;

						if (!tile.complete) {
							tile.src = emptyImageUrl;
							_remove(tile);
						}
					}
				}
			}
		});

		// @factory L.tilelayer(urlTemplate: String, options?: TileLayer options)
		// Instantiates a tile layer object given a `URL template` and optionally an options object.

		function tileLayer(url, options) {
			return new TileLayer(url, options);
		}

		/*
   * @class TileLayer.WMS
   * @inherits TileLayer
   * @aka L.TileLayer.WMS
   * Used to display [WMS](https://en.wikipedia.org/wiki/Web_Map_Service) services as tile layers on the map. Extends `TileLayer`.
   *
   * @example
   *
   * ```js
   * var nexrad = L.tileLayer.wms("http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r.cgi", {
   * 	layers: 'nexrad-n0r-900913',
   * 	format: 'image/png',
   * 	transparent: true,
   * 	attribution: "Weather data © 2012 IEM Nexrad"
   * });
   * ```
   */

		var TileLayerWMS = TileLayer.extend({

			// @section
			// @aka TileLayer.WMS options
			// If any custom options not documented here are used, they will be sent to the
			// WMS server as extra parameters in each request URL. This can be useful for
			// [non-standard vendor WMS parameters](http://docs.geoserver.org/stable/en/user/services/wms/vendor.html).
			defaultWmsParams: {
				service: 'WMS',
				request: 'GetMap',

				// @option layers: String = ''
				// **(required)** Comma-separated list of WMS layers to show.
				layers: '',

				// @option styles: String = ''
				// Comma-separated list of WMS styles.
				styles: '',

				// @option format: String = 'image/jpeg'
				// WMS image format (use `'image/png'` for layers with transparency).
				format: 'image/jpeg',

				// @option transparent: Boolean = false
				// If `true`, the WMS service will return images with transparency.
				transparent: false,

				// @option version: String = '1.1.1'
				// Version of the WMS service to use
				version: '1.1.1'
			},

			options: {
				// @option crs: CRS = null
				// Coordinate Reference System to use for the WMS requests, defaults to
				// map CRS. Don't change this if you're not sure what it means.
				crs: null,

				// @option uppercase: Boolean = false
				// If `true`, WMS request parameter keys will be uppercase.
				uppercase: false
			},

			initialize: function initialize(url, options) {

				this._url = url;

				var wmsParams = extend({}, this.defaultWmsParams);

				// all keys that are not TileLayer options go to WMS params
				for (var i in options) {
					if (!(i in this.options)) {
						wmsParams[i] = options[i];
					}
				}

				options = setOptions(this, options);

				var retina = options.detectRetina && retina ? 2 : 1;
				var tileSize = this.getTileSize();
				wmsParams.width = tileSize.x * retina;
				wmsParams.height = tileSize.y * retina;

				this.wmsParams = wmsParams;
			},

			onAdd: function onAdd(map) {

				this._crs = this.options.crs || map.options.crs;
				this._wmsVersion = parseFloat(this.wmsParams.version);

				var projectionKey = this._wmsVersion >= 1.3 ? 'crs' : 'srs';
				this.wmsParams[projectionKey] = this._crs.code;

				TileLayer.prototype.onAdd.call(this, map);
			},

			getTileUrl: function getTileUrl(coords) {

				var tileBounds = this._tileCoordsToBounds(coords),
				    nw = this._crs.project(tileBounds.getNorthWest()),
				    se = this._crs.project(tileBounds.getSouthEast()),
				    bbox = (this._wmsVersion >= 1.3 && this._crs === EPSG4326 ? [se.y, nw.x, nw.y, se.x] : [nw.x, se.y, se.x, nw.y]).join(','),
				    url = TileLayer.prototype.getTileUrl.call(this, coords);

				return url + getParamString(this.wmsParams, url, this.options.uppercase) + (this.options.uppercase ? '&BBOX=' : '&bbox=') + bbox;
			},

			// @method setParams(params: Object, noRedraw?: Boolean): this
			// Merges an object with the new parameters and re-requests tiles on the current screen (unless `noRedraw` was set to true).
			setParams: function setParams(params, noRedraw) {

				extend(this.wmsParams, params);

				if (!noRedraw) {
					this.redraw();
				}

				return this;
			}
		});

		// @factory L.tileLayer.wms(baseUrl: String, options: TileLayer.WMS options)
		// Instantiates a WMS tile layer object given a base URL of the WMS service and a WMS parameters/options object.
		function tileLayerWMS(url, options) {
			return new TileLayerWMS(url, options);
		}

		TileLayer.WMS = TileLayerWMS;
		tileLayer.wms = tileLayerWMS;

		/*
   * @class Renderer
   * @inherits Layer
   * @aka L.Renderer
   *
   * Base class for vector renderer implementations (`SVG`, `Canvas`). Handles the
   * DOM container of the renderer, its bounds, and its zoom animation.
   *
   * A `Renderer` works as an implicit layer group for all `Path`s - the renderer
   * itself can be added or removed to the map. All paths use a renderer, which can
   * be implicit (the map will decide the type of renderer and use it automatically)
   * or explicit (using the [`renderer`](#path-renderer) option of the path).
   *
   * Do not use this class directly, use `SVG` and `Canvas` instead.
   *
   * @event update: Event
   * Fired when the renderer updates its bounds, center and zoom, for example when
   * its map has moved
   */

		var Renderer = Layer.extend({

			// @section
			// @aka Renderer options
			options: {
				// @option padding: Number = 0.1
				// How much to extend the clip area around the map view (relative to its size)
				// e.g. 0.1 would be 10% of map view in each direction
				padding: 0.1
			},

			initialize: function initialize(options) {
				setOptions(this, options);
				stamp(this);
				this._layers = this._layers || {};
			},

			onAdd: function onAdd() {
				if (!this._container) {
					this._initContainer(); // defined by renderer implementations

					if (this._zoomAnimated) {
						addClass(this._container, 'leaflet-zoom-animated');
					}
				}

				this.getPane().appendChild(this._container);
				this._update();
				this.on('update', this._updatePaths, this);
			},

			onRemove: function onRemove() {
				this.off('update', this._updatePaths, this);
				this._destroyContainer();
			},

			getEvents: function getEvents() {
				var events = {
					viewreset: this._reset,
					zoom: this._onZoom,
					moveend: this._update,
					zoomend: this._onZoomEnd
				};
				if (this._zoomAnimated) {
					events.zoomanim = this._onAnimZoom;
				}
				return events;
			},

			_onAnimZoom: function _onAnimZoom(ev) {
				this._updateTransform(ev.center, ev.zoom);
			},

			_onZoom: function _onZoom() {
				this._updateTransform(this._map.getCenter(), this._map.getZoom());
			},

			_updateTransform: function _updateTransform(center, zoom) {
				var scale = this._map.getZoomScale(zoom, this._zoom),
				    position = getPosition(this._container),
				    viewHalf = this._map.getSize().multiplyBy(0.5 + this.options.padding),
				    currentCenterPoint = this._map.project(this._center, zoom),
				    destCenterPoint = this._map.project(center, zoom),
				    centerOffset = destCenterPoint.subtract(currentCenterPoint),
				    topLeftOffset = viewHalf.multiplyBy(-scale).add(position).add(viewHalf).subtract(centerOffset);

				if (any3d) {
					setTransform(this._container, topLeftOffset, scale);
				} else {
					setPosition(this._container, topLeftOffset);
				}
			},

			_reset: function _reset() {
				this._update();
				this._updateTransform(this._center, this._zoom);

				for (var id in this._layers) {
					this._layers[id]._reset();
				}
			},

			_onZoomEnd: function _onZoomEnd() {
				for (var id in this._layers) {
					this._layers[id]._project();
				}
			},

			_updatePaths: function _updatePaths() {
				for (var id in this._layers) {
					this._layers[id]._update();
				}
			},

			_update: function _update() {
				// Update pixel bounds of renderer container (for positioning/sizing/clipping later)
				// Subclasses are responsible of firing the 'update' event.
				var p = this.options.padding,
				    size = this._map.getSize(),
				    min = this._map.containerPointToLayerPoint(size.multiplyBy(-p)).round();

				this._bounds = new Bounds(min, min.add(size.multiplyBy(1 + p * 2)).round());

				this._center = this._map.getCenter();
				this._zoom = this._map.getZoom();
			}
		});

		/*
   * @class Canvas
   * @inherits Renderer
   * @aka L.Canvas
   *
   * Allows vector layers to be displayed with [`<canvas>`](https://developer.mozilla.org/docs/Web/API/Canvas_API).
   * Inherits `Renderer`.
   *
   * Due to [technical limitations](http://caniuse.com/#search=canvas), Canvas is not
   * available in all web browsers, notably IE8, and overlapping geometries might
   * not display properly in some edge cases.
   *
   * @example
   *
   * Use Canvas by default for all paths in the map:
   *
   * ```js
   * var map = L.map('map', {
   * 	renderer: L.canvas()
   * });
   * ```
   *
   * Use a Canvas renderer with extra padding for specific vector geometries:
   *
   * ```js
   * var map = L.map('map');
   * var myRenderer = L.canvas({ padding: 0.5 });
   * var line = L.polyline( coordinates, { renderer: myRenderer } );
   * var circle = L.circle( center, { renderer: myRenderer } );
   * ```
   */

		var Canvas = Renderer.extend({
			getEvents: function getEvents() {
				var events = Renderer.prototype.getEvents.call(this);
				events.viewprereset = this._onViewPreReset;
				return events;
			},

			_onViewPreReset: function _onViewPreReset() {
				// Set a flag so that a viewprereset+moveend+viewreset only updates&redraws once
				this._postponeUpdatePaths = true;
			},

			onAdd: function onAdd() {
				Renderer.prototype.onAdd.call(this);

				// Redraw vectors since canvas is cleared upon removal,
				// in case of removing the renderer itself from the map.
				this._draw();
			},

			_initContainer: function _initContainer() {
				var container = this._container = document.createElement('canvas');

				on(container, 'mousemove', throttle(this._onMouseMove, 32, this), this);
				on(container, 'click dblclick mousedown mouseup contextmenu', this._onClick, this);
				on(container, 'mouseout', this._handleMouseOut, this);

				this._ctx = container.getContext('2d');
			},

			_destroyContainer: function _destroyContainer() {
				delete this._ctx;
				_remove(this._container);
				off(this._container);
				delete this._container;
			},

			_updatePaths: function _updatePaths() {
				if (this._postponeUpdatePaths) {
					return;
				}

				var layer;
				this._redrawBounds = null;
				for (var id in this._layers) {
					layer = this._layers[id];
					layer._update();
				}
				this._redraw();
			},

			_update: function _update() {
				if (this._map._animatingZoom && this._bounds) {
					return;
				}

				this._drawnLayers = {};

				Renderer.prototype._update.call(this);

				var b = this._bounds,
				    container = this._container,
				    size = b.getSize(),
				    m = retina ? 2 : 1;

				setPosition(container, b.min);

				// set canvas size (also clearing it); use double size on retina
				container.width = m * size.x;
				container.height = m * size.y;
				container.style.width = size.x + 'px';
				container.style.height = size.y + 'px';

				if (retina) {
					this._ctx.scale(2, 2);
				}

				// translate so we use the same path coordinates after canvas element moves
				this._ctx.translate(-b.min.x, -b.min.y);

				// Tell paths to redraw themselves
				this.fire('update');
			},

			_reset: function _reset() {
				Renderer.prototype._reset.call(this);

				if (this._postponeUpdatePaths) {
					this._postponeUpdatePaths = false;
					this._updatePaths();
				}
			},

			_initPath: function _initPath(layer) {
				this._updateDashArray(layer);
				this._layers[stamp(layer)] = layer;

				var order = layer._order = {
					layer: layer,
					prev: this._drawLast,
					next: null
				};
				if (this._drawLast) {
					this._drawLast.next = order;
				}
				this._drawLast = order;
				this._drawFirst = this._drawFirst || this._drawLast;
			},

			_addPath: function _addPath(layer) {
				this._requestRedraw(layer);
			},

			_removePath: function _removePath(layer) {
				var order = layer._order;
				var next = order.next;
				var prev = order.prev;

				if (next) {
					next.prev = prev;
				} else {
					this._drawLast = prev;
				}
				if (prev) {
					prev.next = next;
				} else {
					this._drawFirst = next;
				}

				delete layer._order;

				delete this._layers[L.stamp(layer)];

				this._requestRedraw(layer);
			},

			_updatePath: function _updatePath(layer) {
				// Redraw the union of the layer's old pixel
				// bounds and the new pixel bounds.
				this._extendRedrawBounds(layer);
				layer._project();
				layer._update();
				// The redraw will extend the redraw bounds
				// with the new pixel bounds.
				this._requestRedraw(layer);
			},

			_updateStyle: function _updateStyle(layer) {
				this._updateDashArray(layer);
				this._requestRedraw(layer);
			},

			_updateDashArray: function _updateDashArray(layer) {
				if (layer.options.dashArray) {
					var parts = layer.options.dashArray.split(','),
					    dashArray = [],
					    i;
					for (i = 0; i < parts.length; i++) {
						dashArray.push(Number(parts[i]));
					}
					layer.options._dashArray = dashArray;
				}
			},

			_requestRedraw: function _requestRedraw(layer) {
				if (!this._map) {
					return;
				}

				this._extendRedrawBounds(layer);
				this._redrawRequest = this._redrawRequest || requestAnimFrame(this._redraw, this);
			},

			_extendRedrawBounds: function _extendRedrawBounds(layer) {
				if (layer._pxBounds) {
					var padding = (layer.options.weight || 0) + 1;
					this._redrawBounds = this._redrawBounds || new Bounds();
					this._redrawBounds.extend(layer._pxBounds.min.subtract([padding, padding]));
					this._redrawBounds.extend(layer._pxBounds.max.add([padding, padding]));
				}
			},

			_redraw: function _redraw() {
				this._redrawRequest = null;

				if (this._redrawBounds) {
					this._redrawBounds.min._floor();
					this._redrawBounds.max._ceil();
				}

				this._clear(); // clear layers in redraw bounds
				this._draw(); // draw layers

				this._redrawBounds = null;
			},

			_clear: function _clear() {
				var bounds = this._redrawBounds;
				if (bounds) {
					var size = bounds.getSize();
					this._ctx.clearRect(bounds.min.x, bounds.min.y, size.x, size.y);
				} else {
					this._ctx.clearRect(0, 0, this._container.width, this._container.height);
				}
			},

			_draw: function _draw() {
				var layer,
				    bounds = this._redrawBounds;
				this._ctx.save();
				if (bounds) {
					var size = bounds.getSize();
					this._ctx.beginPath();
					this._ctx.rect(bounds.min.x, bounds.min.y, size.x, size.y);
					this._ctx.clip();
				}

				this._drawing = true;

				for (var order = this._drawFirst; order; order = order.next) {
					layer = order.layer;
					if (!bounds || layer._pxBounds && layer._pxBounds.intersects(bounds)) {
						layer._updatePath();
					}
				}

				this._drawing = false;

				this._ctx.restore(); // Restore state before clipping.
			},

			_updatePoly: function _updatePoly(layer, closed) {
				if (!this._drawing) {
					return;
				}

				var i,
				    j,
				    len2,
				    p,
				    parts = layer._parts,
				    len = parts.length,
				    ctx = this._ctx;

				if (!len) {
					return;
				}

				this._drawnLayers[layer._leaflet_id] = layer;

				ctx.beginPath();

				for (i = 0; i < len; i++) {
					for (j = 0, len2 = parts[i].length; j < len2; j++) {
						p = parts[i][j];
						ctx[j ? 'lineTo' : 'moveTo'](p.x, p.y);
					}
					if (closed) {
						ctx.closePath();
					}
				}

				this._fillStroke(ctx, layer);

				// TODO optimization: 1 fill/stroke for all features with equal style instead of 1 for each feature
			},

			_updateCircle: function _updateCircle(layer) {

				if (!this._drawing || layer._empty()) {
					return;
				}

				var p = layer._point,
				    ctx = this._ctx,
				    r = layer._radius,
				    s = (layer._radiusY || r) / r;

				this._drawnLayers[layer._leaflet_id] = layer;

				if (s !== 1) {
					ctx.save();
					ctx.scale(1, s);
				}

				ctx.beginPath();
				ctx.arc(p.x, p.y / s, r, 0, Math.PI * 2, false);

				if (s !== 1) {
					ctx.restore();
				}

				this._fillStroke(ctx, layer);
			},

			_fillStroke: function _fillStroke(ctx, layer) {
				var options = layer.options;

				if (options.fill) {
					ctx.globalAlpha = options.fillOpacity;
					ctx.fillStyle = options.fillColor || options.color;
					ctx.fill(options.fillRule || 'evenodd');
				}

				if (options.stroke && options.weight !== 0) {
					if (ctx.setLineDash) {
						ctx.setLineDash(layer.options && layer.options._dashArray || []);
					}
					ctx.globalAlpha = options.opacity;
					ctx.lineWidth = options.weight;
					ctx.strokeStyle = options.color;
					ctx.lineCap = options.lineCap;
					ctx.lineJoin = options.lineJoin;
					ctx.stroke();
				}
			},

			// Canvas obviously doesn't have mouse events for individual drawn objects,
			// so we emulate that by calculating what's under the mouse on mousemove/click manually

			_onClick: function _onClick(e) {
				var point = this._map.mouseEventToLayerPoint(e),
				    layer,
				    clickedLayer;

				for (var order = this._drawFirst; order; order = order.next) {
					layer = order.layer;
					if (layer.options.interactive && layer._containsPoint(point) && !this._map._draggableMoved(layer)) {
						clickedLayer = layer;
					}
				}
				if (clickedLayer) {
					fakeStop(e);
					this._fireEvent([clickedLayer], e);
				}
			},

			_onMouseMove: function _onMouseMove(e) {
				if (!this._map || this._map.dragging.moving() || this._map._animatingZoom) {
					return;
				}

				var point = this._map.mouseEventToLayerPoint(e);
				this._handleMouseHover(e, point);
			},

			_handleMouseOut: function _handleMouseOut(e) {
				var layer = this._hoveredLayer;
				if (layer) {
					// if we're leaving the layer, fire mouseout
					removeClass(this._container, 'leaflet-interactive');
					this._fireEvent([layer], e, 'mouseout');
					this._hoveredLayer = null;
				}
			},

			_handleMouseHover: function _handleMouseHover(e, point) {
				var layer, candidateHoveredLayer;

				for (var order = this._drawFirst; order; order = order.next) {
					layer = order.layer;
					if (layer.options.interactive && layer._containsPoint(point)) {
						candidateHoveredLayer = layer;
					}
				}

				if (candidateHoveredLayer !== this._hoveredLayer) {
					this._handleMouseOut(e);

					if (candidateHoveredLayer) {
						addClass(this._container, 'leaflet-interactive'); // change cursor
						this._fireEvent([candidateHoveredLayer], e, 'mouseover');
						this._hoveredLayer = candidateHoveredLayer;
					}
				}

				if (this._hoveredLayer) {
					this._fireEvent([this._hoveredLayer], e);
				}
			},

			_fireEvent: function _fireEvent(layers, e, type) {
				this._map._fireDOMEvent(e, type || e.type, layers);
			},

			_bringToFront: function _bringToFront(layer) {
				var order = layer._order;
				var next = order.next;
				var prev = order.prev;

				if (next) {
					next.prev = prev;
				} else {
					// Already last
					return;
				}
				if (prev) {
					prev.next = next;
				} else if (next) {
					// Update first entry unless this is the
					// signle entry
					this._drawFirst = next;
				}

				order.prev = this._drawLast;
				this._drawLast.next = order;

				order.next = null;
				this._drawLast = order;

				this._requestRedraw(layer);
			},

			_bringToBack: function _bringToBack(layer) {
				var order = layer._order;
				var next = order.next;
				var prev = order.prev;

				if (prev) {
					prev.next = next;
				} else {
					// Already first
					return;
				}
				if (next) {
					next.prev = prev;
				} else if (prev) {
					// Update last entry unless this is the
					// signle entry
					this._drawLast = prev;
				}

				order.prev = null;

				order.next = this._drawFirst;
				this._drawFirst.prev = order;
				this._drawFirst = order;

				this._requestRedraw(layer);
			}
		});

		// @factory L.canvas(options?: Renderer options)
		// Creates a Canvas renderer with the given options.
		function canvas$1(options) {
			return canvas ? new Canvas(options) : null;
		}

		/*
   * Thanks to Dmitry Baranovsky and his Raphael library for inspiration!
   */

		var vmlCreate = function () {
			try {
				document.namespaces.add('lvml', 'urn:schemas-microsoft-com:vml');
				return function (name) {
					return document.createElement('<lvml:' + name + ' class="lvml">');
				};
			} catch (e) {
				return function (name) {
					return document.createElement('<' + name + ' xmlns="urn:schemas-microsoft.com:vml" class="lvml">');
				};
			}
		}();

		/*
   * @class SVG
   *
   * Although SVG is not available on IE7 and IE8, these browsers support [VML](https://en.wikipedia.org/wiki/Vector_Markup_Language), and the SVG renderer will fall back to VML in this case.
   *
   * VML was deprecated in 2012, which means VML functionality exists only for backwards compatibility
   * with old versions of Internet Explorer.
   */

		// mixin to redefine some SVG methods to handle VML syntax which is similar but with some differences
		var vmlMixin = {

			_initContainer: function _initContainer() {
				this._container = create$1('div', 'leaflet-vml-container');
			},

			_update: function _update() {
				if (this._map._animatingZoom) {
					return;
				}
				Renderer.prototype._update.call(this);
				this.fire('update');
			},

			_initPath: function _initPath(layer) {
				var container = layer._container = vmlCreate('shape');

				addClass(container, 'leaflet-vml-shape ' + (this.options.className || ''));

				container.coordsize = '1 1';

				layer._path = vmlCreate('path');
				container.appendChild(layer._path);

				this._updateStyle(layer);
				this._layers[stamp(layer)] = layer;
			},

			_addPath: function _addPath(layer) {
				var container = layer._container;
				this._container.appendChild(container);

				if (layer.options.interactive) {
					layer.addInteractiveTarget(container);
				}
			},

			_removePath: function _removePath(layer) {
				var container = layer._container;
				_remove(container);
				layer.removeInteractiveTarget(container);
				delete this._layers[stamp(layer)];
			},

			_updateStyle: function _updateStyle(layer) {
				var stroke = layer._stroke,
				    fill = layer._fill,
				    options = layer.options,
				    container = layer._container;

				container.stroked = !!options.stroke;
				container.filled = !!options.fill;

				if (options.stroke) {
					if (!stroke) {
						stroke = layer._stroke = vmlCreate('stroke');
					}
					container.appendChild(stroke);
					stroke.weight = options.weight + 'px';
					stroke.color = options.color;
					stroke.opacity = options.opacity;

					if (options.dashArray) {
						stroke.dashStyle = isArray(options.dashArray) ? options.dashArray.join(' ') : options.dashArray.replace(/( *, *)/g, ' ');
					} else {
						stroke.dashStyle = '';
					}
					stroke.endcap = options.lineCap.replace('butt', 'flat');
					stroke.joinstyle = options.lineJoin;
				} else if (stroke) {
					container.removeChild(stroke);
					layer._stroke = null;
				}

				if (options.fill) {
					if (!fill) {
						fill = layer._fill = vmlCreate('fill');
					}
					container.appendChild(fill);
					fill.color = options.fillColor || options.color;
					fill.opacity = options.fillOpacity;
				} else if (fill) {
					container.removeChild(fill);
					layer._fill = null;
				}
			},

			_updateCircle: function _updateCircle(layer) {
				var p = layer._point.round(),
				    r = Math.round(layer._radius),
				    r2 = Math.round(layer._radiusY || r);

				this._setPath(layer, layer._empty() ? 'M0 0' : 'AL ' + p.x + ',' + p.y + ' ' + r + ',' + r2 + ' 0,' + 65535 * 360);
			},

			_setPath: function _setPath(layer, path) {
				layer._path.v = path;
			},

			_bringToFront: function _bringToFront(layer) {
				toFront(layer._container);
			},

			_bringToBack: function _bringToBack(layer) {
				toBack(layer._container);
			}
		};

		var create$2 = vml ? vmlCreate : svgCreate;

		/*
   * @class SVG
   * @inherits Renderer
   * @aka L.SVG
   *
   * Allows vector layers to be displayed with [SVG](https://developer.mozilla.org/docs/Web/SVG).
   * Inherits `Renderer`.
   *
   * Due to [technical limitations](http://caniuse.com/#search=svg), SVG is not
   * available in all web browsers, notably Android 2.x and 3.x.
   *
   * Although SVG is not available on IE7 and IE8, these browsers support
   * [VML](https://en.wikipedia.org/wiki/Vector_Markup_Language)
   * (a now deprecated technology), and the SVG renderer will fall back to VML in
   * this case.
   *
   * @example
   *
   * Use SVG by default for all paths in the map:
   *
   * ```js
   * var map = L.map('map', {
   * 	renderer: L.svg()
   * });
   * ```
   *
   * Use a SVG renderer with extra padding for specific vector geometries:
   *
   * ```js
   * var map = L.map('map');
   * var myRenderer = L.svg({ padding: 0.5 });
   * var line = L.polyline( coordinates, { renderer: myRenderer } );
   * var circle = L.circle( center, { renderer: myRenderer } );
   * ```
   */

		var SVG = Renderer.extend({

			getEvents: function getEvents() {
				var events = Renderer.prototype.getEvents.call(this);
				events.zoomstart = this._onZoomStart;
				return events;
			},

			_initContainer: function _initContainer() {
				this._container = create$2('svg');

				// makes it possible to click through svg root; we'll reset it back in individual paths
				this._container.setAttribute('pointer-events', 'none');

				this._rootGroup = create$2('g');
				this._container.appendChild(this._rootGroup);
			},

			_destroyContainer: function _destroyContainer() {
				_remove(this._container);
				off(this._container);
				delete this._container;
				delete this._rootGroup;
			},

			_onZoomStart: function _onZoomStart() {
				// Drag-then-pinch interactions might mess up the center and zoom.
				// In this case, the easiest way to prevent this is re-do the renderer
				//   bounds and padding when the zooming starts.
				this._update();
			},

			_update: function _update() {
				if (this._map._animatingZoom && this._bounds) {
					return;
				}

				Renderer.prototype._update.call(this);

				var b = this._bounds,
				    size = b.getSize(),
				    container = this._container;

				// set size of svg-container if changed
				if (!this._svgSize || !this._svgSize.equals(size)) {
					this._svgSize = size;
					container.setAttribute('width', size.x);
					container.setAttribute('height', size.y);
				}

				// movement: update container viewBox so that we don't have to change coordinates of individual layers
				setPosition(container, b.min);
				container.setAttribute('viewBox', [b.min.x, b.min.y, size.x, size.y].join(' '));

				this.fire('update');
			},

			// methods below are called by vector layers implementations

			_initPath: function _initPath(layer) {
				var path = layer._path = create$2('path');

				// @namespace Path
				// @option className: String = null
				// Custom class name set on an element. Only for SVG renderer.
				if (layer.options.className) {
					addClass(path, layer.options.className);
				}

				if (layer.options.interactive) {
					addClass(path, 'leaflet-interactive');
				}

				this._updateStyle(layer);
				this._layers[stamp(layer)] = layer;
			},

			_addPath: function _addPath(layer) {
				if (!this._rootGroup) {
					this._initContainer();
				}
				this._rootGroup.appendChild(layer._path);
				layer.addInteractiveTarget(layer._path);
			},

			_removePath: function _removePath(layer) {
				_remove(layer._path);
				layer.removeInteractiveTarget(layer._path);
				delete this._layers[stamp(layer)];
			},

			_updatePath: function _updatePath(layer) {
				layer._project();
				layer._update();
			},

			_updateStyle: function _updateStyle(layer) {
				var path = layer._path,
				    options = layer.options;

				if (!path) {
					return;
				}

				if (options.stroke) {
					path.setAttribute('stroke', options.color);
					path.setAttribute('stroke-opacity', options.opacity);
					path.setAttribute('stroke-width', options.weight);
					path.setAttribute('stroke-linecap', options.lineCap);
					path.setAttribute('stroke-linejoin', options.lineJoin);

					if (options.dashArray) {
						path.setAttribute('stroke-dasharray', options.dashArray);
					} else {
						path.removeAttribute('stroke-dasharray');
					}

					if (options.dashOffset) {
						path.setAttribute('stroke-dashoffset', options.dashOffset);
					} else {
						path.removeAttribute('stroke-dashoffset');
					}
				} else {
					path.setAttribute('stroke', 'none');
				}

				if (options.fill) {
					path.setAttribute('fill', options.fillColor || options.color);
					path.setAttribute('fill-opacity', options.fillOpacity);
					path.setAttribute('fill-rule', options.fillRule || 'evenodd');
				} else {
					path.setAttribute('fill', 'none');
				}
			},

			_updatePoly: function _updatePoly(layer, closed) {
				this._setPath(layer, pointsToPath(layer._parts, closed));
			},

			_updateCircle: function _updateCircle(layer) {
				var p = layer._point,
				    r = layer._radius,
				    r2 = layer._radiusY || r,
				    arc = 'a' + r + ',' + r2 + ' 0 1,0 ';

				// drawing a circle with two half-arcs
				var d = layer._empty() ? 'M0 0' : 'M' + (p.x - r) + ',' + p.y + arc + r * 2 + ',0 ' + arc + -r * 2 + ',0 ';

				this._setPath(layer, d);
			},

			_setPath: function _setPath(layer, path) {
				layer._path.setAttribute('d', path);
			},

			// SVG does not have the concept of zIndex so we resort to changing the DOM order of elements
			_bringToFront: function _bringToFront(layer) {
				toFront(layer._path);
			},

			_bringToBack: function _bringToBack(layer) {
				toBack(layer._path);
			}
		});

		if (vml) {
			SVG.include(vmlMixin);
		}

		// @factory L.svg(options?: Renderer options)
		// Creates a SVG renderer with the given options.
		function svg$1(options) {
			return svg || vml ? new SVG(options) : null;
		}

		Map.include({
			// @namespace Map; @method getRenderer(layer: Path): Renderer
			// Returns the instance of `Renderer` that should be used to render the given
			// `Path`. It will ensure that the `renderer` options of the map and paths
			// are respected, and that the renderers do exist on the map.
			getRenderer: function getRenderer(layer) {
				// @namespace Path; @option renderer: Renderer
				// Use this specific instance of `Renderer` for this path. Takes
				// precedence over the map's [default renderer](#map-renderer).
				var renderer = layer.options.renderer || this._getPaneRenderer(layer.options.pane) || this.options.renderer || this._renderer;

				if (!renderer) {
					// @namespace Map; @option preferCanvas: Boolean = false
					// Whether `Path`s should be rendered on a `Canvas` renderer.
					// By default, all `Path`s are rendered in a `SVG` renderer.
					renderer = this._renderer = this.options.preferCanvas && canvas$1() || svg$1();
				}

				if (!this.hasLayer(renderer)) {
					this.addLayer(renderer);
				}
				return renderer;
			},

			_getPaneRenderer: function _getPaneRenderer(name) {
				if (name === 'overlayPane' || name === undefined) {
					return false;
				}

				var renderer = this._paneRenderers[name];
				if (renderer === undefined) {
					renderer = SVG && svg$1({ pane: name }) || Canvas && canvas$1({ pane: name });
					this._paneRenderers[name] = renderer;
				}
				return renderer;
			}
		});

		/*
   * L.Rectangle extends Polygon and creates a rectangle when passed a LatLngBounds object.
   */

		/*
   * @class Rectangle
   * @aka L.Retangle
   * @inherits Polygon
   *
   * A class for drawing rectangle overlays on a map. Extends `Polygon`.
   *
   * @example
   *
   * ```js
   * // define rectangle geographical bounds
   * var bounds = [[54.559322, -5.767822], [56.1210604, -3.021240]];
   *
   * // create an orange rectangle
   * L.rectangle(bounds, {color: "#ff7800", weight: 1}).addTo(map);
   *
   * // zoom the map to the rectangle bounds
   * map.fitBounds(bounds);
   * ```
   *
   */

		var Rectangle = Polygon.extend({
			initialize: function initialize(latLngBounds, options) {
				Polygon.prototype.initialize.call(this, this._boundsToLatLngs(latLngBounds), options);
			},

			// @method setBounds(latLngBounds: LatLngBounds): this
			// Redraws the rectangle with the passed bounds.
			setBounds: function setBounds(latLngBounds) {
				return this.setLatLngs(this._boundsToLatLngs(latLngBounds));
			},

			_boundsToLatLngs: function _boundsToLatLngs(latLngBounds) {
				latLngBounds = toLatLngBounds(latLngBounds);
				return [latLngBounds.getSouthWest(), latLngBounds.getNorthWest(), latLngBounds.getNorthEast(), latLngBounds.getSouthEast()];
			}
		});

		// @factory L.rectangle(latLngBounds: LatLngBounds, options?: Polyline options)
		function rectangle(latLngBounds, options) {
			return new Rectangle(latLngBounds, options);
		}

		SVG.create = create$2;
		SVG.pointsToPath = pointsToPath;

		GeoJSON.geometryToLayer = geometryToLayer;
		GeoJSON.coordsToLatLng = coordsToLatLng;
		GeoJSON.coordsToLatLngs = coordsToLatLngs;
		GeoJSON.latLngToCoords = latLngToCoords;
		GeoJSON.latLngsToCoords = latLngsToCoords;
		GeoJSON.getFeature = getFeature;
		GeoJSON.asFeature = asFeature;

		/*
   * L.Handler.BoxZoom is used to add shift-drag zoom interaction to the map
   * (zoom to a selected bounding box), enabled by default.
   */

		// @namespace Map
		// @section Interaction Options
		Map.mergeOptions({
			// @option boxZoom: Boolean = true
			// Whether the map can be zoomed to a rectangular area specified by
			// dragging the mouse while pressing the shift key.
			boxZoom: true
		});

		var BoxZoom = Handler.extend({
			initialize: function initialize(map) {
				this._map = map;
				this._container = map._container;
				this._pane = map._panes.overlayPane;
				this._resetStateTimeout = 0;
				map.on('unload', this._destroy, this);
			},

			addHooks: function addHooks() {
				on(this._container, 'mousedown', this._onMouseDown, this);
			},

			removeHooks: function removeHooks() {
				off(this._container, 'mousedown', this._onMouseDown, this);
			},

			moved: function moved() {
				return this._moved;
			},

			_destroy: function _destroy() {
				_remove(this._pane);
				delete this._pane;
			},

			_resetState: function _resetState() {
				this._resetStateTimeout = 0;
				this._moved = false;
			},

			_clearDeferredResetState: function _clearDeferredResetState() {
				if (this._resetStateTimeout !== 0) {
					clearTimeout(this._resetStateTimeout);
					this._resetStateTimeout = 0;
				}
			},

			_onMouseDown: function _onMouseDown(e) {
				if (!e.shiftKey || e.which !== 1 && e.button !== 1) {
					return false;
				}

				// Clear the deferred resetState if it hasn't executed yet, otherwise it
				// will interrupt the interaction and orphan a box element in the container.
				this._clearDeferredResetState();
				this._resetState();

				disableTextSelection();
				disableImageDrag();

				this._startPoint = this._map.mouseEventToContainerPoint(e);

				on(document, {
					contextmenu: stop,
					mousemove: this._onMouseMove,
					mouseup: this._onMouseUp,
					keydown: this._onKeyDown
				}, this);
			},

			_onMouseMove: function _onMouseMove(e) {
				if (!this._moved) {
					this._moved = true;

					this._box = create$1('div', 'leaflet-zoom-box', this._container);
					addClass(this._container, 'leaflet-crosshair');

					this._map.fire('boxzoomstart');
				}

				this._point = this._map.mouseEventToContainerPoint(e);

				var bounds = new Bounds(this._point, this._startPoint),
				    size = bounds.getSize();

				setPosition(this._box, bounds.min);

				this._box.style.width = size.x + 'px';
				this._box.style.height = size.y + 'px';
			},

			_finish: function _finish() {
				if (this._moved) {
					_remove(this._box);
					removeClass(this._container, 'leaflet-crosshair');
				}

				enableTextSelection();
				enableImageDrag();

				off(document, {
					contextmenu: stop,
					mousemove: this._onMouseMove,
					mouseup: this._onMouseUp,
					keydown: this._onKeyDown
				}, this);
			},

			_onMouseUp: function _onMouseUp(e) {
				if (e.which !== 1 && e.button !== 1) {
					return;
				}

				this._finish();

				if (!this._moved) {
					return;
				}
				// Postpone to next JS tick so internal click event handling
				// still see it as "moved".
				this._clearDeferredResetState();
				this._resetStateTimeout = setTimeout(bind(this._resetState, this), 0);

				var bounds = new LatLngBounds(this._map.containerPointToLatLng(this._startPoint), this._map.containerPointToLatLng(this._point));

				this._map.fitBounds(bounds).fire('boxzoomend', { boxZoomBounds: bounds });
			},

			_onKeyDown: function _onKeyDown(e) {
				if (e.keyCode === 27) {
					this._finish();
				}
			}
		});

		// @section Handlers
		// @property boxZoom: Handler
		// Box (shift-drag with mouse) zoom handler.
		Map.addInitHook('addHandler', 'boxZoom', BoxZoom);

		/*
   * L.Handler.DoubleClickZoom is used to handle double-click zoom on the map, enabled by default.
   */

		// @namespace Map
		// @section Interaction Options

		Map.mergeOptions({
			// @option doubleClickZoom: Boolean|String = true
			// Whether the map can be zoomed in by double clicking on it and
			// zoomed out by double clicking while holding shift. If passed
			// `'center'`, double-click zoom will zoom to the center of the
			//  view regardless of where the mouse was.
			doubleClickZoom: true
		});

		var DoubleClickZoom = Handler.extend({
			addHooks: function addHooks() {
				this._map.on('dblclick', this._onDoubleClick, this);
			},

			removeHooks: function removeHooks() {
				this._map.off('dblclick', this._onDoubleClick, this);
			},

			_onDoubleClick: function _onDoubleClick(e) {
				var map = this._map,
				    oldZoom = map.getZoom(),
				    delta = map.options.zoomDelta,
				    zoom = e.originalEvent.shiftKey ? oldZoom - delta : oldZoom + delta;

				if (map.options.doubleClickZoom === 'center') {
					map.setZoom(zoom);
				} else {
					map.setZoomAround(e.containerPoint, zoom);
				}
			}
		});

		// @section Handlers
		//
		// Map properties include interaction handlers that allow you to control
		// interaction behavior in runtime, enabling or disabling certain features such
		// as dragging or touch zoom (see `Handler` methods). For example:
		//
		// ```js
		// map.doubleClickZoom.disable();
		// ```
		//
		// @property doubleClickZoom: Handler
		// Double click zoom handler.
		Map.addInitHook('addHandler', 'doubleClickZoom', DoubleClickZoom);

		/*
   * L.Handler.MapDrag is used to make the map draggable (with panning inertia), enabled by default.
   */

		// @namespace Map
		// @section Interaction Options
		Map.mergeOptions({
			// @option dragging: Boolean = true
			// Whether the map be draggable with mouse/touch or not.
			dragging: true,

			// @section Panning Inertia Options
			// @option inertia: Boolean = *
			// If enabled, panning of the map will have an inertia effect where
			// the map builds momentum while dragging and continues moving in
			// the same direction for some time. Feels especially nice on touch
			// devices. Enabled by default unless running on old Android devices.
			inertia: !android23,

			// @option inertiaDeceleration: Number = 3000
			// The rate with which the inertial movement slows down, in pixels/second².
			inertiaDeceleration: 3400, // px/s^2

			// @option inertiaMaxSpeed: Number = Infinity
			// Max speed of the inertial movement, in pixels/second.
			inertiaMaxSpeed: Infinity, // px/s

			// @option easeLinearity: Number = 0.2
			easeLinearity: 0.2,

			// TODO refactor, move to CRS
			// @option worldCopyJump: Boolean = false
			// With this option enabled, the map tracks when you pan to another "copy"
			// of the world and seamlessly jumps to the original one so that all overlays
			// like markers and vector layers are still visible.
			worldCopyJump: false,

			// @option maxBoundsViscosity: Number = 0.0
			// If `maxBounds` is set, this option will control how solid the bounds
			// are when dragging the map around. The default value of `0.0` allows the
			// user to drag outside the bounds at normal speed, higher values will
			// slow down map dragging outside bounds, and `1.0` makes the bounds fully
			// solid, preventing the user from dragging outside the bounds.
			maxBoundsViscosity: 0.0
		});

		var Drag = Handler.extend({
			addHooks: function addHooks() {
				if (!this._draggable) {
					var map = this._map;

					this._draggable = new Draggable(map._mapPane, map._container);

					this._draggable.on({
						dragstart: this._onDragStart,
						drag: this._onDrag,
						dragend: this._onDragEnd
					}, this);

					this._draggable.on('predrag', this._onPreDragLimit, this);
					if (map.options.worldCopyJump) {
						this._draggable.on('predrag', this._onPreDragWrap, this);
						map.on('zoomend', this._onZoomEnd, this);

						map.whenReady(this._onZoomEnd, this);
					}
				}
				addClass(this._map._container, 'leaflet-grab leaflet-touch-drag');
				this._draggable.enable();
				this._positions = [];
				this._times = [];
			},

			removeHooks: function removeHooks() {
				removeClass(this._map._container, 'leaflet-grab');
				removeClass(this._map._container, 'leaflet-touch-drag');
				this._draggable.disable();
			},

			moved: function moved() {
				return this._draggable && this._draggable._moved;
			},

			moving: function moving() {
				return this._draggable && this._draggable._moving;
			},

			_onDragStart: function _onDragStart() {
				var map = this._map;

				map._stop();
				if (this._map.options.maxBounds && this._map.options.maxBoundsViscosity) {
					var bounds = toLatLngBounds(this._map.options.maxBounds);

					this._offsetLimit = toBounds(this._map.latLngToContainerPoint(bounds.getNorthWest()).multiplyBy(-1), this._map.latLngToContainerPoint(bounds.getSouthEast()).multiplyBy(-1).add(this._map.getSize()));

					this._viscosity = Math.min(1.0, Math.max(0.0, this._map.options.maxBoundsViscosity));
				} else {
					this._offsetLimit = null;
				}

				map.fire('movestart').fire('dragstart');

				if (map.options.inertia) {
					this._positions = [];
					this._times = [];
				}
			},

			_onDrag: function _onDrag(e) {
				if (this._map.options.inertia) {
					var time = this._lastTime = +new Date(),
					    pos = this._lastPos = this._draggable._absPos || this._draggable._newPos;

					this._positions.push(pos);
					this._times.push(time);

					if (time - this._times[0] > 50) {
						this._positions.shift();
						this._times.shift();
					}
				}

				this._map.fire('move', e).fire('drag', e);
			},

			_onZoomEnd: function _onZoomEnd() {
				var pxCenter = this._map.getSize().divideBy(2),
				    pxWorldCenter = this._map.latLngToLayerPoint([0, 0]);

				this._initialWorldOffset = pxWorldCenter.subtract(pxCenter).x;
				this._worldWidth = this._map.getPixelWorldBounds().getSize().x;
			},

			_viscousLimit: function _viscousLimit(value, threshold) {
				return value - (value - threshold) * this._viscosity;
			},

			_onPreDragLimit: function _onPreDragLimit() {
				if (!this._viscosity || !this._offsetLimit) {
					return;
				}

				var offset = this._draggable._newPos.subtract(this._draggable._startPos);

				var limit = this._offsetLimit;
				if (offset.x < limit.min.x) {
					offset.x = this._viscousLimit(offset.x, limit.min.x);
				}
				if (offset.y < limit.min.y) {
					offset.y = this._viscousLimit(offset.y, limit.min.y);
				}
				if (offset.x > limit.max.x) {
					offset.x = this._viscousLimit(offset.x, limit.max.x);
				}
				if (offset.y > limit.max.y) {
					offset.y = this._viscousLimit(offset.y, limit.max.y);
				}

				this._draggable._newPos = this._draggable._startPos.add(offset);
			},

			_onPreDragWrap: function _onPreDragWrap() {
				// TODO refactor to be able to adjust map pane position after zoom
				var worldWidth = this._worldWidth,
				    halfWidth = Math.round(worldWidth / 2),
				    dx = this._initialWorldOffset,
				    x = this._draggable._newPos.x,
				    newX1 = (x - halfWidth + dx) % worldWidth + halfWidth - dx,
				    newX2 = (x + halfWidth + dx) % worldWidth - halfWidth - dx,
				    newX = Math.abs(newX1 + dx) < Math.abs(newX2 + dx) ? newX1 : newX2;

				this._draggable._absPos = this._draggable._newPos.clone();
				this._draggable._newPos.x = newX;
			},

			_onDragEnd: function _onDragEnd(e) {
				var map = this._map,
				    options = map.options,
				    noInertia = !options.inertia || this._times.length < 2;

				map.fire('dragend', e);

				if (noInertia) {
					map.fire('moveend');
				} else {

					var direction = this._lastPos.subtract(this._positions[0]),
					    duration = (this._lastTime - this._times[0]) / 1000,
					    ease = options.easeLinearity,
					    speedVector = direction.multiplyBy(ease / duration),
					    speed = speedVector.distanceTo([0, 0]),
					    limitedSpeed = Math.min(options.inertiaMaxSpeed, speed),
					    limitedSpeedVector = speedVector.multiplyBy(limitedSpeed / speed),
					    decelerationDuration = limitedSpeed / (options.inertiaDeceleration * ease),
					    offset = limitedSpeedVector.multiplyBy(-decelerationDuration / 2).round();

					if (!offset.x && !offset.y) {
						map.fire('moveend');
					} else {
						offset = map._limitOffset(offset, map.options.maxBounds);

						requestAnimFrame(function () {
							map.panBy(offset, {
								duration: decelerationDuration,
								easeLinearity: ease,
								noMoveStart: true,
								animate: true
							});
						});
					}
				}
			}
		});

		// @section Handlers
		// @property dragging: Handler
		// Map dragging handler (by both mouse and touch).
		Map.addInitHook('addHandler', 'dragging', Drag);

		/*
   * L.Map.Keyboard is handling keyboard interaction with the map, enabled by default.
   */

		// @namespace Map
		// @section Keyboard Navigation Options
		Map.mergeOptions({
			// @option keyboard: Boolean = true
			// Makes the map focusable and allows users to navigate the map with keyboard
			// arrows and `+`/`-` keys.
			keyboard: true,

			// @option keyboardPanDelta: Number = 80
			// Amount of pixels to pan when pressing an arrow key.
			keyboardPanDelta: 80
		});

		var Keyboard = Handler.extend({

			keyCodes: {
				left: [37],
				right: [39],
				down: [40],
				up: [38],
				zoomIn: [187, 107, 61, 171],
				zoomOut: [189, 109, 54, 173]
			},

			initialize: function initialize(map) {
				this._map = map;

				this._setPanDelta(map.options.keyboardPanDelta);
				this._setZoomDelta(map.options.zoomDelta);
			},

			addHooks: function addHooks() {
				var container = this._map._container;

				// make the container focusable by tabbing
				if (container.tabIndex <= 0) {
					container.tabIndex = '0';
				}

				on(container, {
					focus: this._onFocus,
					blur: this._onBlur,
					mousedown: this._onMouseDown
				}, this);

				this._map.on({
					focus: this._addHooks,
					blur: this._removeHooks
				}, this);
			},

			removeHooks: function removeHooks() {
				this._removeHooks();

				off(this._map._container, {
					focus: this._onFocus,
					blur: this._onBlur,
					mousedown: this._onMouseDown
				}, this);

				this._map.off({
					focus: this._addHooks,
					blur: this._removeHooks
				}, this);
			},

			_onMouseDown: function _onMouseDown() {
				if (this._focused) {
					return;
				}

				var body = document.body,
				    docEl = document.documentElement,
				    top = body.scrollTop || docEl.scrollTop,
				    left = body.scrollLeft || docEl.scrollLeft;

				this._map._container.focus();

				window.scrollTo(left, top);
			},

			_onFocus: function _onFocus() {
				this._focused = true;
				this._map.fire('focus');
			},

			_onBlur: function _onBlur() {
				this._focused = false;
				this._map.fire('blur');
			},

			_setPanDelta: function _setPanDelta(panDelta) {
				var keys = this._panKeys = {},
				    codes = this.keyCodes,
				    i,
				    len;

				for (i = 0, len = codes.left.length; i < len; i++) {
					keys[codes.left[i]] = [-1 * panDelta, 0];
				}
				for (i = 0, len = codes.right.length; i < len; i++) {
					keys[codes.right[i]] = [panDelta, 0];
				}
				for (i = 0, len = codes.down.length; i < len; i++) {
					keys[codes.down[i]] = [0, panDelta];
				}
				for (i = 0, len = codes.up.length; i < len; i++) {
					keys[codes.up[i]] = [0, -1 * panDelta];
				}
			},

			_setZoomDelta: function _setZoomDelta(zoomDelta) {
				var keys = this._zoomKeys = {},
				    codes = this.keyCodes,
				    i,
				    len;

				for (i = 0, len = codes.zoomIn.length; i < len; i++) {
					keys[codes.zoomIn[i]] = zoomDelta;
				}
				for (i = 0, len = codes.zoomOut.length; i < len; i++) {
					keys[codes.zoomOut[i]] = -zoomDelta;
				}
			},

			_addHooks: function _addHooks() {
				on(document, 'keydown', this._onKeyDown, this);
			},

			_removeHooks: function _removeHooks() {
				off(document, 'keydown', this._onKeyDown, this);
			},

			_onKeyDown: function _onKeyDown(e) {
				if (e.altKey || e.ctrlKey || e.metaKey) {
					return;
				}

				var key = e.keyCode,
				    map = this._map,
				    offset;

				if (key in this._panKeys) {

					if (map._panAnim && map._panAnim._inProgress) {
						return;
					}

					offset = this._panKeys[key];
					if (e.shiftKey) {
						offset = toPoint(offset).multiplyBy(3);
					}

					map.panBy(offset);

					if (map.options.maxBounds) {
						map.panInsideBounds(map.options.maxBounds);
					}
				} else if (key in this._zoomKeys) {
					map.setZoom(map.getZoom() + (e.shiftKey ? 3 : 1) * this._zoomKeys[key]);
				} else if (key === 27 && map._popup) {
					map.closePopup();
				} else {
					return;
				}

				stop(e);
			}
		});

		// @section Handlers
		// @section Handlers
		// @property keyboard: Handler
		// Keyboard navigation handler.
		Map.addInitHook('addHandler', 'keyboard', Keyboard);

		/*
   * L.Handler.ScrollWheelZoom is used by L.Map to enable mouse scroll wheel zoom on the map.
   */

		// @namespace Map
		// @section Interaction Options
		Map.mergeOptions({
			// @section Mousewheel options
			// @option scrollWheelZoom: Boolean|String = true
			// Whether the map can be zoomed by using the mouse wheel. If passed `'center'`,
			// it will zoom to the center of the view regardless of where the mouse was.
			scrollWheelZoom: true,

			// @option wheelDebounceTime: Number = 40
			// Limits the rate at which a wheel can fire (in milliseconds). By default
			// user can't zoom via wheel more often than once per 40 ms.
			wheelDebounceTime: 40,

			// @option wheelPxPerZoomLevel: Number = 60
			// How many scroll pixels (as reported by [L.DomEvent.getWheelDelta](#domevent-getwheeldelta))
			// mean a change of one full zoom level. Smaller values will make wheel-zooming
			// faster (and vice versa).
			wheelPxPerZoomLevel: 60
		});

		var ScrollWheelZoom = Handler.extend({
			addHooks: function addHooks() {
				on(this._map._container, 'mousewheel', this._onWheelScroll, this);

				this._delta = 0;
			},

			removeHooks: function removeHooks() {
				off(this._map._container, 'mousewheel', this._onWheelScroll, this);
			},

			_onWheelScroll: function _onWheelScroll(e) {
				var delta = getWheelDelta(e);

				var debounce = this._map.options.wheelDebounceTime;

				this._delta += delta;
				this._lastMousePos = this._map.mouseEventToContainerPoint(e);

				if (!this._startTime) {
					this._startTime = +new Date();
				}

				var left = Math.max(debounce - (+new Date() - this._startTime), 0);

				clearTimeout(this._timer);
				this._timer = setTimeout(bind(this._performZoom, this), left);

				stop(e);
			},

			_performZoom: function _performZoom() {
				var map = this._map,
				    zoom = map.getZoom(),
				    snap = this._map.options.zoomSnap || 0;

				map._stop(); // stop panning and fly animations if any

				// map the delta with a sigmoid function to -4..4 range leaning on -1..1
				var d2 = this._delta / (this._map.options.wheelPxPerZoomLevel * 4),
				    d3 = 4 * Math.log(2 / (1 + Math.exp(-Math.abs(d2)))) / Math.LN2,
				    d4 = snap ? Math.ceil(d3 / snap) * snap : d3,
				    delta = map._limitZoom(zoom + (this._delta > 0 ? d4 : -d4)) - zoom;

				this._delta = 0;
				this._startTime = null;

				if (!delta) {
					return;
				}

				if (map.options.scrollWheelZoom === 'center') {
					map.setZoom(zoom + delta);
				} else {
					map.setZoomAround(this._lastMousePos, zoom + delta);
				}
			}
		});

		// @section Handlers
		// @property scrollWheelZoom: Handler
		// Scroll wheel zoom handler.
		Map.addInitHook('addHandler', 'scrollWheelZoom', ScrollWheelZoom);

		/*
   * L.Map.Tap is used to enable mobile hacks like quick taps and long hold.
   */

		// @namespace Map
		// @section Interaction Options
		Map.mergeOptions({
			// @section Touch interaction options
			// @option tap: Boolean = true
			// Enables mobile hacks for supporting instant taps (fixing 200ms click
			// delay on iOS/Android) and touch holds (fired as `contextmenu` events).
			tap: true,

			// @option tapTolerance: Number = 15
			// The max number of pixels a user can shift his finger during touch
			// for it to be considered a valid tap.
			tapTolerance: 15
		});

		var Tap = Handler.extend({
			addHooks: function addHooks() {
				on(this._map._container, 'touchstart', this._onDown, this);
			},

			removeHooks: function removeHooks() {
				off(this._map._container, 'touchstart', this._onDown, this);
			},

			_onDown: function _onDown(e) {
				if (!e.touches) {
					return;
				}

				preventDefault(e);

				this._fireClick = true;

				// don't simulate click or track longpress if more than 1 touch
				if (e.touches.length > 1) {
					this._fireClick = false;
					clearTimeout(this._holdTimeout);
					return;
				}

				var first = e.touches[0],
				    el = first.target;

				this._startPos = this._newPos = new Point(first.clientX, first.clientY);

				// if touching a link, highlight it
				if (el.tagName && el.tagName.toLowerCase() === 'a') {
					addClass(el, 'leaflet-active');
				}

				// simulate long hold but setting a timeout
				this._holdTimeout = setTimeout(bind(function () {
					if (this._isTapValid()) {
						this._fireClick = false;
						this._onUp();
						this._simulateEvent('contextmenu', first);
					}
				}, this), 1000);

				this._simulateEvent('mousedown', first);

				on(document, {
					touchmove: this._onMove,
					touchend: this._onUp
				}, this);
			},

			_onUp: function _onUp(e) {
				clearTimeout(this._holdTimeout);

				off(document, {
					touchmove: this._onMove,
					touchend: this._onUp
				}, this);

				if (this._fireClick && e && e.changedTouches) {

					var first = e.changedTouches[0],
					    el = first.target;

					if (el && el.tagName && el.tagName.toLowerCase() === 'a') {
						removeClass(el, 'leaflet-active');
					}

					this._simulateEvent('mouseup', first);

					// simulate click if the touch didn't move too much
					if (this._isTapValid()) {
						this._simulateEvent('click', first);
					}
				}
			},

			_isTapValid: function _isTapValid() {
				return this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance;
			},

			_onMove: function _onMove(e) {
				var first = e.touches[0];
				this._newPos = new Point(first.clientX, first.clientY);
				this._simulateEvent('mousemove', first);
			},

			_simulateEvent: function _simulateEvent(type, e) {
				var simulatedEvent = document.createEvent('MouseEvents');

				simulatedEvent._simulated = true;
				e.target._simulatedClick = true;

				simulatedEvent.initMouseEvent(type, true, true, window, 1, e.screenX, e.screenY, e.clientX, e.clientY, false, false, false, false, 0, null);

				e.target.dispatchEvent(simulatedEvent);
			}
		});

		// @section Handlers
		// @property tap: Handler
		// Mobile touch hacks (quick tap and touch hold) handler.
		if (touch && !pointer) {
			Map.addInitHook('addHandler', 'tap', Tap);
		}

		/*
   * L.Handler.TouchZoom is used by L.Map to add pinch zoom on supported mobile browsers.
   */

		// @namespace Map
		// @section Interaction Options
		Map.mergeOptions({
			// @section Touch interaction options
			// @option touchZoom: Boolean|String = *
			// Whether the map can be zoomed by touch-dragging with two fingers. If
			// passed `'center'`, it will zoom to the center of the view regardless of
			// where the touch events (fingers) were. Enabled for touch-capable web
			// browsers except for old Androids.
			touchZoom: touch && !android23,

			// @option bounceAtZoomLimits: Boolean = true
			// Set it to false if you don't want the map to zoom beyond min/max zoom
			// and then bounce back when pinch-zooming.
			bounceAtZoomLimits: true
		});

		var TouchZoom = Handler.extend({
			addHooks: function addHooks() {
				addClass(this._map._container, 'leaflet-touch-zoom');
				on(this._map._container, 'touchstart', this._onTouchStart, this);
			},

			removeHooks: function removeHooks() {
				removeClass(this._map._container, 'leaflet-touch-zoom');
				off(this._map._container, 'touchstart', this._onTouchStart, this);
			},

			_onTouchStart: function _onTouchStart(e) {
				var map = this._map;
				if (!e.touches || e.touches.length !== 2 || map._animatingZoom || this._zooming) {
					return;
				}

				var p1 = map.mouseEventToContainerPoint(e.touches[0]),
				    p2 = map.mouseEventToContainerPoint(e.touches[1]);

				this._centerPoint = map.getSize()._divideBy(2);
				this._startLatLng = map.containerPointToLatLng(this._centerPoint);
				if (map.options.touchZoom !== 'center') {
					this._pinchStartLatLng = map.containerPointToLatLng(p1.add(p2)._divideBy(2));
				}

				this._startDist = p1.distanceTo(p2);
				this._startZoom = map.getZoom();

				this._moved = false;
				this._zooming = true;

				map._stop();

				on(document, 'touchmove', this._onTouchMove, this);
				on(document, 'touchend', this._onTouchEnd, this);

				preventDefault(e);
			},

			_onTouchMove: function _onTouchMove(e) {
				if (!e.touches || e.touches.length !== 2 || !this._zooming) {
					return;
				}

				var map = this._map,
				    p1 = map.mouseEventToContainerPoint(e.touches[0]),
				    p2 = map.mouseEventToContainerPoint(e.touches[1]),
				    scale = p1.distanceTo(p2) / this._startDist;

				this._zoom = map.getScaleZoom(scale, this._startZoom);

				if (!map.options.bounceAtZoomLimits && (this._zoom < map.getMinZoom() && scale < 1 || this._zoom > map.getMaxZoom() && scale > 1)) {
					this._zoom = map._limitZoom(this._zoom);
				}

				if (map.options.touchZoom === 'center') {
					this._center = this._startLatLng;
					if (scale === 1) {
						return;
					}
				} else {
					// Get delta from pinch to center, so centerLatLng is delta applied to initial pinchLatLng
					var delta = p1._add(p2)._divideBy(2)._subtract(this._centerPoint);
					if (scale === 1 && delta.x === 0 && delta.y === 0) {
						return;
					}
					this._center = map.unproject(map.project(this._pinchStartLatLng, this._zoom).subtract(delta), this._zoom);
				}

				if (!this._moved) {
					map._moveStart(true);
					this._moved = true;
				}

				cancelAnimFrame(this._animRequest);

				var moveFn = bind(map._move, map, this._center, this._zoom, { pinch: true, round: false });
				this._animRequest = requestAnimFrame(moveFn, this, true);

				preventDefault(e);
			},

			_onTouchEnd: function _onTouchEnd() {
				if (!this._moved || !this._zooming) {
					this._zooming = false;
					return;
				}

				this._zooming = false;
				cancelAnimFrame(this._animRequest);

				off(document, 'touchmove', this._onTouchMove);
				off(document, 'touchend', this._onTouchEnd);

				// Pinch updates GridLayers' levels only when zoomSnap is off, so zoomSnap becomes noUpdate.
				if (this._map.options.zoomAnimation) {
					this._map._animateZoom(this._center, this._map._limitZoom(this._zoom), true, this._map.options.zoomSnap);
				} else {
					this._map._resetView(this._center, this._map._limitZoom(this._zoom));
				}
			}
		});

		// @section Handlers
		// @property touchZoom: Handler
		// Touch zoom handler.
		Map.addInitHook('addHandler', 'touchZoom', TouchZoom);

		Map.BoxZoom = BoxZoom;
		Map.DoubleClickZoom = DoubleClickZoom;
		Map.Drag = Drag;
		Map.Keyboard = Keyboard;
		Map.ScrollWheelZoom = ScrollWheelZoom;
		Map.Tap = Tap;
		Map.TouchZoom = TouchZoom;

		// misc

		var oldL = window.L;
		function noConflict() {
			window.L = oldL;
			return this;
		}

		// Always export us to window global (see #2364)
		window.L = exports;

		Object.freeze = freeze;

		exports.version = version;
		exports.noConflict = noConflict;
		exports.Control = Control;
		exports.control = control;
		exports.Browser = Browser;
		exports.Evented = Evented;
		exports.Mixin = Mixin;
		exports.Util = Util;
		exports.Class = Class;
		exports.Handler = Handler;
		exports.extend = extend;
		exports.bind = bind;
		exports.stamp = stamp;
		exports.setOptions = setOptions;
		exports.DomEvent = DomEvent;
		exports.DomUtil = DomUtil;
		exports.PosAnimation = PosAnimation;
		exports.Draggable = Draggable;
		exports.LineUtil = LineUtil;
		exports.PolyUtil = PolyUtil;
		exports.Point = Point;
		exports.point = toPoint;
		exports.Bounds = Bounds;
		exports.bounds = toBounds;
		exports.Transformation = Transformation;
		exports.transformation = toTransformation;
		exports.Projection = index;
		exports.LatLng = LatLng;
		exports.latLng = toLatLng;
		exports.LatLngBounds = LatLngBounds;
		exports.latLngBounds = toLatLngBounds;
		exports.CRS = CRS;
		exports.GeoJSON = GeoJSON;
		exports.geoJSON = geoJSON;
		exports.geoJson = geoJson;
		exports.Layer = Layer;
		exports.LayerGroup = LayerGroup;
		exports.layerGroup = layerGroup;
		exports.FeatureGroup = FeatureGroup;
		exports.featureGroup = featureGroup;
		exports.ImageOverlay = ImageOverlay;
		exports.imageOverlay = imageOverlay;
		exports.VideoOverlay = VideoOverlay;
		exports.videoOverlay = videoOverlay;
		exports.DivOverlay = DivOverlay;
		exports.Popup = Popup;
		exports.popup = popup;
		exports.Tooltip = Tooltip;
		exports.tooltip = tooltip;
		exports.Icon = Icon;
		exports.icon = icon;
		exports.DivIcon = DivIcon;
		exports.divIcon = divIcon;
		exports.Marker = Marker;
		exports.marker = marker;
		exports.TileLayer = TileLayer;
		exports.tileLayer = tileLayer;
		exports.GridLayer = GridLayer;
		exports.gridLayer = gridLayer;
		exports.SVG = SVG;
		exports.svg = svg$1;
		exports.Renderer = Renderer;
		exports.Canvas = Canvas;
		exports.canvas = canvas$1;
		exports.Path = Path;
		exports.CircleMarker = CircleMarker;
		exports.circleMarker = circleMarker;
		exports.Circle = Circle;
		exports.circle = circle;
		exports.Polyline = Polyline;
		exports.polyline = polyline;
		exports.Polygon = Polygon;
		exports.polygon = polygon;
		exports.Rectangle = Rectangle;
		exports.rectangle = rectangle;
		exports.Map = Map;
		exports.map = createMap;
	});
	//# sourceMappingURL=leaflet-src.js.map
}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
//# sourceMappingURL=leaflet-src.js.map

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(5);
__webpack_require__(1);
__webpack_require__(3);
__webpack_require__(4);
__webpack_require__(2);
__webpack_require__(0);





/***/ })
/******/ ]);